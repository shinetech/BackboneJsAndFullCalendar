(function (e, t) {
    function u(e) {
        var t = o[e] = {}, n, r;
        e = e.split(/\s+/);
        for (n = 0, r = e.length; n < r; n++) t[e[n]] = !0;
        return t
    }

    function c(e, n, r) {
        if (r === t && e.nodeType === 1) {
            var i = "data-" + n.replace(l, "-$1").toLowerCase();
            r = e.getAttribute(i);
            if (typeof r == "string") {
                try {
                    r = r === "true" ? !0 : r === "false" ? !1 : r === "null" ? null : s.isNumeric(r) ? +r : f.test(r) ? s.parseJSON(r) : r
                } catch (o) {}
                s.data(e, n, r)
            } else r = t
        }
        return r
    }

    function h(e) {
        for (var t in e) {
            if (t === "data" && s.isEmptyObject(e[t])) continue;
            if (t !== "toJSON") return !1
        }
        return !0
    }

    function p(e, t, n) {
        var r = t + "defer",
            i = t + "queue",
            o = t + "mark",
            u = s._data(e, r);
        u && (n === "queue" || !s._data(e, i)) && (n === "mark" || !s._data(e, o)) && setTimeout(function () {
            !s._data(e, i) && !s._data(e, o) && (s.removeData(e, r, !0), u.fire())
        }, 0)
    }

    function H() {
        return !1
    }

    function B() {
        return !0
    }

    function W(e) {
        return !e || !e.parentNode || e.parentNode.nodeType === 11
    }

    function X(e, t, n) {
        t = t || 0;
        if (s.isFunction(t)) return s.grep(e, function (e, r) {
            var i = !! t.call(e, r, e);
            return i === n
        });
        if (t.nodeType) return s.grep(e, function (e, r) {
            return e === t === n
        });
        if (typeof t == "string") {
            var r = s.grep(e, function (e) {
                return e.nodeType === 1
            });
            if (q.test(t)) return s.filter(t, r, !n);
            t = s.filter(t, r)
        }
        return s.grep(e, function (e, r) {
            return s.inArray(e, t) >= 0 === n
        })
    }

    function V(e) {
        var t = $.split("|"),
            n = e.createDocumentFragment();
        if (n.createElement)
            while (t.length) n.createElement(t.pop());
        return n
    }

    function at(e, t) {
        return s.nodeName(e, "table") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
    }

    function ft(e, t) {
        if (t.nodeType !== 1 || !s.hasData(e)) return;
        var n, r, i, o = s._data(e),
            u = s._data(t, o),
            a = o.events;
        if (a) {
            delete u.handle, u.events = {};
            for (n in a)
                for (r = 0, i = a[n].length; r < i; r++) s.event.add(t, n, a[n][r])
        }
        u.data && (u.data = s.extend({}, u.data))
    }

    function lt(e, t) {
        var n;
        if (t.nodeType !== 1) return;
        t.clearAttributes && t.clearAttributes(), t.mergeAttributes && t.mergeAttributes(e), n = t.nodeName.toLowerCase(), n === "object" ? t.outerHTML = e.outerHTML : n !== "input" || e.type !== "checkbox" && e.type !== "radio" ? n === "option" ? t.selected = e.defaultSelected : n === "input" || n === "textarea" ? t.defaultValue = e.defaultValue : n === "script" && t.text !== e.text && (t.text = e.text) : (e.checked && (t.defaultChecked = t.checked = e.checked), t.value !== e.value && (t.value = e.value)), t.removeAttribute(s.expando), t.removeAttribute("_submit_attached"), t.removeAttribute("_change_attached")
    }

    function ct(e) {
        return typeof e.getElementsByTagName != "undefined" ? e.getElementsByTagName("*") : typeof e.querySelectorAll != "undefined" ? e.querySelectorAll("*") : []
    }

    function ht(e) {
        if (e.type === "checkbox" || e.type === "radio") e.defaultChecked = e.checked
    }

    function pt(e) {
        var t = (e.nodeName || "").toLowerCase();
        t === "input" ? ht(e) : t !== "script" && typeof e.getElementsByTagName != "undefined" && s.grep(e.getElementsByTagName("input"), ht)
    }

    function dt(e) {
        var t = n.createElement("div");
        return ut.appendChild(t), t.innerHTML = e.outerHTML, t.firstChild
    }

    function kt(e, t, n) {
        var r = t === "width" ? e.offsetWidth : e.offsetHeight,
            i = t === "width" ? 1 : 0,
            o = 4;
        if (r > 0) {
            if (n !== "border")
                for (; i < o; i += 2) n || (r -= parseFloat(s.css(e, "padding" + xt[i])) || 0), n === "margin" ? r += parseFloat(s.css(e, n + xt[i])) || 0 : r -= parseFloat(s.css(e, "border" + xt[i] + "Width")) || 0;
            return r + "px"
        }
        r = Tt(e, t);
        if (r < 0 || r == null) r = e.style[t];
        if (bt.test(r)) return r;
        r = parseFloat(r) || 0;
        if (n)
            for (; i < o; i += 2) r += parseFloat(s.css(e, "padding" + xt[i])) || 0, n !== "padding" && (r += parseFloat(s.css(e, "border" + xt[i] + "Width")) || 0), n === "margin" && (r += parseFloat(s.css(e, n + xt[i])) || 0);
        return r + "px"
    }

    function Qt(e) {
        return function (t, n) {
            typeof t != "string" && (n = t, t = "*");
            if (s.isFunction(n)) {
                var r = t.toLowerCase().split(qt),
                    i = 0,
                    o = r.length,
                    u, a, f;
                for (; i < o; i++) u = r[i], f = /^\+/.test(u), f && (u = u.substr(1) || "*"), a = e[u] = e[u] || [], a[f ? "unshift" : "push"](n)
            }
        }
    }

    function Gt(e, n, r, i, s, o) {
        s = s || n.dataTypes[0], o = o || {}, o[s] = !0;
        var u = e[s],
            a = 0,
            f = u ? u.length : 0,
            l = e === Wt,
            c;
        for (; a < f && (l || !c); a++) c = u[a](n, r, i), typeof c == "string" && (!l || o[c] ? c = t : (n.dataTypes.unshift(c), c = Gt(e, n, r, i, c, o)));
        return (l || !c) && !o["*"] && (c = Gt(e, n, r, i, "*", o)), c
    }

    function Yt(e, n) {
        var r, i, o = s.ajaxSettings.flatOptions || {};
        for (r in n) n[r] !== t && ((o[r] ? e : i || (i = {}))[r] = n[r]);
        i && s.extend(!0, e, i)
    }

    function Zt(e, t, n, r) {
        if (s.isArray(t)) s.each(t, function (t, i) {
            n || At.test(e) ? r(e, i) : Zt(e + "[" + (typeof i == "object" ? t : "") + "]", i, n, r)
        });
        else if (!n && s.type(t) === "object")
            for (var i in t) Zt(e + "[" + i + "]", t[i], n, r);
        else r(e, t)
    }

    function en(e, n, r) {
        var i = e.contents,
            s = e.dataTypes,
            o = e.responseFields,
            u, a, f, l;
        for (a in o) a in r && (n[o[a]] = r[a]);
        while (s[0] === "*") s.shift(), u === t && (u = e.mimeType || n.getResponseHeader("content-type"));
        if (u)
            for (a in i)
                if (i[a] && i[a].test(u)) {
                    s.unshift(a);
                    break
                }
        if (s[0] in r) f = s[0];
        else {
            for (a in r) {
                if (!s[0] || e.converters[a + " " + s[0]]) {
                    f = a;
                    break
                }
                l || (l = a)
            }
            f = f || l
        } if (f) return f !== s[0] && s.unshift(f), r[f]
    }

    function tn(e, n) {
        e.dataFilter && (n = e.dataFilter(n, e.dataType));
        var r = e.dataTypes,
            i = {}, o, u, a = r.length,
            f, l = r[0],
            c, h, p, d, v;
        for (o = 1; o < a; o++) {
            if (o === 1)
                for (u in e.converters) typeof u == "string" && (i[u.toLowerCase()] = e.converters[u]);
            c = l, l = r[o];
            if (l === "*") l = c;
            else if (c !== "*" && c !== l) {
                h = c + " " + l, p = i[h] || i["* " + l];
                if (!p) {
                    v = t;
                    for (d in i) {
                        f = d.split(" ");
                        if (f[0] === c || f[0] === "*") {
                            v = i[f[1] + " " + l];
                            if (v) {
                                d = i[d], d === !0 ? p = v : v === !0 && (p = d);
                                break
                            }
                        }
                    }
                }!p && !v && s.error("No conversion from " + h.replace(" ", " to ")), p !== !0 && (n = p ? p(n) : v(d(n)))
            }
        }
        return n
    }

    function an() {
        try {
            return new e.XMLHttpRequest
        } catch (t) {}
    }

    function fn() {
        try {
            return new e.ActiveXObject("Microsoft.XMLHTTP")
        } catch (t) {}
    }

    function yn() {
        return setTimeout(bn, 0), gn = s.now()
    }

    function bn() {
        gn = t
    }

    function wn(e, t) {
        var n = {};
        return s.each(mn.concat.apply([], mn.slice(0, t)), function () {
            n[this] = e
        }), n
    }

    function En(e) {
        if (!ln[e]) {
            var t = n.body,
                r = s("<" + e + ">").appendTo(t),
                i = r.css("display");
            r.remove();
            if (i === "none" || i === "") {
                cn || (cn = n.createElement("iframe"), cn.frameBorder = cn.width = cn.height = 0), t.appendChild(cn);
                if (!hn || !cn.createElement) hn = (cn.contentWindow || cn.contentDocument).document, hn.write((s.support.boxModel ? "<!doctype html>" : "") + "<html><body>"), hn.close();
                r = hn.createElement(e), hn.body.appendChild(r), i = s.css(r, "display"), t.removeChild(cn)
            }
            ln[e] = i
        }
        return ln[e]
    }

    function Nn(e) {
        return s.isWindow(e) ? e : e.nodeType === 9 ? e.defaultView || e.parentWindow : !1
    }
    var n = e.document,
        r = e.navigator,
        i = e.location,
        s = function () {
            function H() {
                if (i.isReady) return;
                try {
                    n.documentElement.doScroll("left")
                } catch (e) {
                    setTimeout(H, 1);
                    return
                }
                i.ready()
            }
            var i = function (e, t) {
                return new i.fn.init(e, t, u)
            }, s = e.jQuery,
                o = e.$,
                u, a = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,
                f = /\S/,
                l = /^\s+/,
                c = /\s+$/,
                h = /^<(\w+)\s*\/?>(?:<\/\1>)?$/,
                p = /^[\],:{}\s]*$/,
                d = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
                v = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
                m = /(?:^|:|,)(?:\s*\[)+/g,
                g = /(webkit)[ \/]([\w.]+)/,
                y = /(opera)(?:.*version)?[ \/]([\w.]+)/,
                b = /(msie) ([\w.]+)/,
                w = /(mozilla)(?:.*? rv:([\w.]+))?/,
                E = /-([a-z]|[0-9])/ig,
                S = /^-ms-/,
                x = function (e, t) {
                    return (t + "").toUpperCase()
                }, T = r.userAgent,
                N, C, k, L = Object.prototype.toString,
                A = Object.prototype.hasOwnProperty,
                O = Array.prototype.push,
                M = Array.prototype.slice,
                _ = String.prototype.trim,
                D = Array.prototype.indexOf,
                P = {};
            return i.fn = i.prototype = {
                constructor: i,
                init: function (e, r, s) {
                    var o, u, f, l;
                    if (!e) return this;
                    if (e.nodeType) return this.context = this[0] = e, this.length = 1, this;
                    if (e === "body" && !r && n.body) return this.context = n, this[0] = n.body, this.selector = e, this.length = 1, this;
                    if (typeof e == "string") {
                        e.charAt(0) === "<" && e.charAt(e.length - 1) === ">" && e.length >= 3 ? o = [null, e, null] : o = a.exec(e);
                        if (o && (o[1] || !r)) {
                            if (o[1]) return r = r instanceof i ? r[0] : r, l = r ? r.ownerDocument || r : n, f = h.exec(e), f ? i.isPlainObject(r) ? (e = [n.createElement(f[1])], i.fn.attr.call(e, r, !0)) : e = [l.createElement(f[1])] : (f = i.buildFragment([o[1]], [l]), e = (f.cacheable ? i.clone(f.fragment) : f.fragment).childNodes), i.merge(this, e);
                            u = n.getElementById(o[2]);
                            if (u && u.parentNode) {
                                if (u.id !== o[2]) return s.find(e);
                                this.length = 1, this[0] = u
                            }
                            return this.context = n, this.selector = e, this
                        }
                        return !r || r.jquery ? (r || s).find(e) : this.constructor(r).find(e)
                    }
                    return i.isFunction(e) ? s.ready(e) : (e.selector !== t && (this.selector = e.selector, this.context = e.context), i.makeArray(e, this))
                },
                selector: "",
                jquery: "1.7.2",
                length: 0,
                size: function () {
                    return this.length
                },
                toArray: function () {
                    return M.call(this, 0)
                },
                get: function (e) {
                    return e == null ? this.toArray() : e < 0 ? this[this.length + e] : this[e]
                },
                pushStack: function (e, t, n) {
                    var r = this.constructor();
                    return i.isArray(e) ? O.apply(r, e) : i.merge(r, e), r.prevObject = this, r.context = this.context, t === "find" ? r.selector = this.selector + (this.selector ? " " : "") + n : t && (r.selector = this.selector + "." + t + "(" + n + ")"), r
                },
                each: function (e, t) {
                    return i.each(this, e, t)
                },
                ready: function (e) {
                    return i.bindReady(), C.add(e), this
                },
                eq: function (e) {
                    return e = +e, e === -1 ? this.slice(e) : this.slice(e, e + 1)
                },
                first: function () {
                    return this.eq(0)
                },
                last: function () {
                    return this.eq(-1)
                },
                slice: function () {
                    return this.pushStack(M.apply(this, arguments), "slice", M.call(arguments).join(","))
                },
                map: function (e) {
                    return this.pushStack(i.map(this, function (t, n) {
                                return e.call(t, n, t)
                            }))
                },
                end: function () {
                    return this.prevObject || this.constructor(null)
                },
                push: O,
                sort: [].sort,
                splice: [].splice
            }, i.fn.init.prototype = i.fn, i.extend = i.fn.extend = function () {
                var e, n, r, s, o, u, a = arguments[0] || {}, f = 1,
                    l = arguments.length,
                    c = !1;
                typeof a == "boolean" && (c = a, a = arguments[1] || {}, f = 2), typeof a != "object" && !i.isFunction(a) && (a = {}), l === f && (a = this, --f);
                for (; f < l; f++)
                    if ((e = arguments[f]) != null)
                        for (n in e) {
                            r = a[n], s = e[n];
                            if (a === s) continue;
                            c && s && (i.isPlainObject(s) || (o = i.isArray(s))) ? (o ? (o = !1, u = r && i.isArray(r) ? r : []) : u = r && i.isPlainObject(r) ? r : {}, a[n] = i.extend(c, u, s)) : s !== t && (a[n] = s)
                    }
                return a
            }, i.extend({
                    noConflict: function (t) {
                        return e.$ === i && (e.$ = o), t && e.jQuery === i && (e.jQuery = s), i
                    },
                    isReady: !1,
                    readyWait: 1,
                    holdReady: function (e) {
                        e ? i.readyWait++ : i.ready(!0)
                    },
                    ready: function (e) {
                        if (e === !0 && !--i.readyWait || e !== !0 && !i.isReady) {
                            if (!n.body) return setTimeout(i.ready, 1);
                            i.isReady = !0;
                            if (e !== !0 && --i.readyWait > 0) return;
                            C.fireWith(n, [i]), i.fn.trigger && i(n).trigger("ready").off("ready")
                        }
                    },
                    bindReady: function () {
                        if (C) return;
                        C = i.Callbacks("once memory");
                        if (n.readyState === "complete") return setTimeout(i.ready, 1);
                        if (n.addEventListener) n.addEventListener("DOMContentLoaded", k, !1), e.addEventListener("load", i.ready, !1);
                        else if (n.attachEvent) {
                            n.attachEvent("onreadystatechange", k), e.attachEvent("onload", i.ready);
                            var t = !1;
                            try {
                                t = e.frameElement == null
                            } catch (r) {}
                            n.documentElement.doScroll && t && H()
                        }
                    },
                    isFunction: function (e) {
                        return i.type(e) === "function"
                    },
                    isArray: Array.isArray || function (e) {
                        return i.type(e) === "array"
                    },
                    isWindow: function (e) {
                        return e != null && e == e.window
                    },
                    isNumeric: function (e) {
                        return !isNaN(parseFloat(e)) && isFinite(e)
                    },
                    type: function (e) {
                        return e == null ? String(e) : P[L.call(e)] || "object"
                    },
                    isPlainObject: function (e) {
                        if (!e || i.type(e) !== "object" || e.nodeType || i.isWindow(e)) return !1;
                        try {
                            if (e.constructor && !A.call(e, "constructor") && !A.call(e.constructor.prototype, "isPrototypeOf")) return !1
                        } catch (n) {
                            return !1
                        }
                        var r;
                        for (r in e);
                        return r === t || A.call(e, r)
                    },
                    isEmptyObject: function (e) {
                        for (var t in e) return !1;
                        return !0
                    },
                    error: function (e) {
                        throw new Error(e)
                    },
                    parseJSON: function (t) {
                        if (typeof t != "string" || !t) return null;
                        t = i.trim(t);
                        if (e.JSON && e.JSON.parse) return e.JSON.parse(t);
                        if (p.test(t.replace(d, "@").replace(v, "]").replace(m, ""))) return (new Function("return " + t))();
                        i.error("Invalid JSON: " + t)
                    },
                    parseXML: function (n) {
                        if (typeof n != "string" || !n) return null;
                        var r, s;
                        try {
                            e.DOMParser ? (s = new DOMParser, r = s.parseFromString(n, "text/xml")) : (r = new ActiveXObject("Microsoft.XMLDOM"), r.async = "false", r.loadXML(n))
                        } catch (o) {
                            r = t
                        }
                        return (!r || !r.documentElement || r.getElementsByTagName("parsererror").length) && i.error("Invalid XML: " + n), r
                    },
                    noop: function () {},
                    globalEval: function (t) {
                        t && f.test(t) && (e.execScript || function (t) {
                            e.eval.call(e, t)
                        })(t)
                    },
                    camelCase: function (e) {
                        return e.replace(S, "ms-").replace(E, x)
                    },
                    nodeName: function (e, t) {
                        return e.nodeName && e.nodeName.toUpperCase() === t.toUpperCase()
                    },
                    each: function (e, n, r) {
                        var s, o = 0,
                            u = e.length,
                            a = u === t || i.isFunction(e);
                        if (r) {
                            if (a) {
                                for (s in e)
                                    if (n.apply(e[s], r) === !1) break
                            } else
                                for (; o < u;)
                                    if (n.apply(e[o++], r) === !1) break
                        } else if (a) {
                            for (s in e)
                                if (n.call(e[s], s, e[s]) === !1) break
                        } else
                            for (; o < u;)
                                if (n.call(e[o], o, e[o++]) === !1) break; return e
                    },
                    trim: _ ? function (e) {
                        return e == null ? "" : _.call(e)
                    } : function (e) {
                        return e == null ? "" : e.toString().replace(l, "").replace(c, "")
                    },
                    makeArray: function (e, t) {
                        var n = t || [];
                        if (e != null) {
                            var r = i.type(e);
                            e.length == null || r === "string" || r === "function" || r === "regexp" || i.isWindow(e) ? O.call(n, e) : i.merge(n, e)
                        }
                        return n
                    },
                    inArray: function (e, t, n) {
                        var r;
                        if (t) {
                            if (D) return D.call(t, e, n);
                            r = t.length, n = n ? n < 0 ? Math.max(0, r + n) : n : 0;
                            for (; n < r; n++)
                                if (n in t && t[n] === e) return n
                        }
                        return -1
                    },
                    merge: function (e, n) {
                        var r = e.length,
                            i = 0;
                        if (typeof n.length == "number")
                            for (var s = n.length; i < s; i++) e[r++] = n[i];
                        else
                            while (n[i] !== t) e[r++] = n[i++];
                        return e.length = r, e
                    },
                    grep: function (e, t, n) {
                        var r = [],
                            i;
                        n = !! n;
                        for (var s = 0, o = e.length; s < o; s++) i = !! t(e[s], s), n !== i && r.push(e[s]);
                        return r
                    },
                    map: function (e, n, r) {
                        var s, o, u = [],
                            a = 0,
                            f = e.length,
                            l = e instanceof i || f !== t && typeof f == "number" && (f > 0 && e[0] && e[f - 1] || f === 0 || i.isArray(e));
                        if (l)
                            for (; a < f; a++) s = n(e[a], a, r), s != null && (u[u.length] = s);
                        else
                            for (o in e) s = n(e[o], o, r), s != null && (u[u.length] = s);
                        return u.concat.apply([], u)
                    },
                    guid: 1,
                    proxy: function (e, n) {
                        if (typeof n == "string") {
                            var r = e[n];
                            n = e, e = r
                        }
                        if (!i.isFunction(e)) return t;
                        var s = M.call(arguments, 2),
                            o = function () {
                                return e.apply(n, s.concat(M.call(arguments)))
                            };
                        return o.guid = e.guid = e.guid || o.guid || i.guid++, o
                    },
                    access: function (e, n, r, s, o, u, a) {
                        var f, l = r == null,
                            c = 0,
                            h = e.length;
                        if (r && typeof r == "object") {
                            for (c in r) i.access(e, n, c, r[c], 1, u, s);
                            o = 1
                        } else if (s !== t) {
                            f = a === t && i.isFunction(s), l && (f ? (f = n, n = function (e, t, n) {
                                        return f.call(i(e), n)
                                    }) : (n.call(e, s), n = null));
                            if (n)
                                for (; c < h; c++) n(e[c], r, f ? s.call(e[c], c, n(e[c], r)) : s, a);
                            o = 1
                        }
                        return o ? e : l ? n.call(e) : h ? n(e[0], r) : u
                    },
                    now: function () {
                        return (new Date).getTime()
                    },
                    uaMatch: function (e) {
                        e = e.toLowerCase();
                        var t = g.exec(e) || y.exec(e) || b.exec(e) || e.indexOf("compatible") < 0 && w.exec(e) || [];
                        return {
                            browser: t[1] || "",
                            version: t[2] || "0"
                        }
                    },
                    sub: function () {
                        function e(t, n) {
                            return new e.fn.init(t, n)
                        }
                        i.extend(!0, e, this), e.superclass = this, e.fn = e.prototype = this(), e.fn.constructor = e, e.sub = this.sub, e.fn.init = function (r, s) {
                            return s && s instanceof i && !(s instanceof e) && (s = e(s)), i.fn.init.call(this, r, s, t)
                        }, e.fn.init.prototype = e.fn;
                        var t = e(n);
                        return e
                    },
                    browser: {}
                }), i.each("Boolean Number String Function Array Date RegExp Object".split(" "), function (e, t) {
                    P["[object " + t + "]"] = t.toLowerCase()
                }), N = i.uaMatch(T), N.browser && (i.browser[N.browser] = !0, i.browser.version = N.version), i.browser.webkit && (i.browser.safari = !0), f.test(" ") && (l = /^[\s\xA0]+/, c = /[\s\xA0]+$/), u = i(n), n.addEventListener ? k = function () {
                n.removeEventListener("DOMContentLoaded", k, !1), i.ready()
            } : n.attachEvent && (k = function () {
                n.readyState === "complete" && (n.detachEvent("onreadystatechange", k), i.ready())
            }), i
        }(),
        o = {};
    s.Callbacks = function (e) {
        e = e ? o[e] || u(e) : {};
        var n = [],
            r = [],
            i, a, f, l, c, h, p = function (t) {
                var r, i, o, u, a;
                for (r = 0, i = t.length; r < i; r++) o = t[r], u = s.type(o), u === "array" ? p(o) : u === "function" && (!e.unique || !v.has(o)) && n.push(o)
            }, d = function (t, s) {
                s = s || [], i = !e.memory || [t, s], a = !0, f = !0, h = l || 0, l = 0, c = n.length;
                for (; n && h < c; h++)
                    if (n[h].apply(t, s) === !1 && e.stopOnFalse) {
                        i = !0;
                        break
                    }
                f = !1, n && (e.once ? i === !0 ? v.disable() : n = [] : r && r.length && (i = r.shift(), v.fireWith(i[0], i[1])))
            }, v = {
                add: function () {
                    if (n) {
                        var e = n.length;
                        p(arguments), f ? c = n.length : i && i !== !0 && (l = e, d(i[0], i[1]))
                    }
                    return this
                },
                remove: function () {
                    if (n) {
                        var t = arguments,
                            r = 0,
                            i = t.length;
                        for (; r < i; r++)
                            for (var s = 0; s < n.length; s++)
                                if (t[r] === n[s]) {
                                    f && s <= c && (c--, s <= h && h--), n.splice(s--, 1);
                                    if (e.unique) break
                                }
                    }
                    return this
                },
                has: function (e) {
                    if (n) {
                        var t = 0,
                            r = n.length;
                        for (; t < r; t++)
                            if (e === n[t]) return !0
                    }
                    return !1
                },
                empty: function () {
                    return n = [], this
                },
                disable: function () {
                    return n = r = i = t, this
                },
                disabled: function () {
                    return !n
                },
                lock: function () {
                    return r = t, (!i || i === !0) && v.disable(), this
                },
                locked: function () {
                    return !r
                },
                fireWith: function (t, n) {
                    return r && (f ? e.once || r.push([t, n]) : (!e.once || !i) && d(t, n)), this
                },
                fire: function () {
                    return v.fireWith(this, arguments), this
                },
                fired: function () {
                    return !!a
                }
            };
        return v
    };
    var a = [].slice;
    s.extend({
            Deferred: function (e) {
                var t = s.Callbacks("once memory"),
                    n = s.Callbacks("once memory"),
                    r = s.Callbacks("memory"),
                    i = "pending",
                    o = {
                        resolve: t,
                        reject: n,
                        notify: r
                    }, u = {
                        done: t.add,
                        fail: n.add,
                        progress: r.add,
                        state: function () {
                            return i
                        },
                        isResolved: t.fired,
                        isRejected: n.fired,
                        then: function (e, t, n) {
                            return a.done(e).fail(t).progress(n), this
                        },
                        always: function () {
                            return a.done.apply(a, arguments).fail.apply(a, arguments), this
                        },
                        pipe: function (e, t, n) {
                            return s.Deferred(function (r) {
                                s.each({
                                        done: [e, "resolve"],
                                        fail: [t, "reject"],
                                        progress: [n, "notify"]
                                    }, function (e, t) {
                                        var n = t[0],
                                            i = t[1],
                                            o;
                                        s.isFunction(n) ? a[e](function () {
                                            o = n.apply(this, arguments), o && s.isFunction(o.promise) ? o.promise().then(r.resolve, r.reject, r.notify) : r[i + "With"](this === a ? r : this, [o])
                                        }) : a[e](r[i])
                                    })
                            }).promise()
                        },
                        promise: function (e) {
                            if (e == null) e = u;
                            else
                                for (var t in u) e[t] = u[t];
                            return e
                        }
                    }, a = u.promise({}),
                    f;
                for (f in o) a[f] = o[f].fire, a[f + "With"] = o[f].fireWith;
                return a.done(function () {
                    i = "resolved"
                }, n.disable, r.lock).fail(function () {
                    i = "rejected"
                }, t.disable, r.lock), e && e.call(a, a), a
            },
            when: function (e) {
                function c(e) {
                    return function (n) {
                        t[e] = arguments.length > 1 ? a.call(arguments, 0) : n, --o || f.resolveWith(f, t)
                    }
                }

                function h(e) {
                    return function (t) {
                        i[e] = arguments.length > 1 ? a.call(arguments, 0) : t, f.notifyWith(l, i)
                    }
                }
                var t = a.call(arguments, 0),
                    n = 0,
                    r = t.length,
                    i = new Array(r),
                    o = r,
                    u = r,
                    f = r <= 1 && e && s.isFunction(e.promise) ? e : s.Deferred(),
                    l = f.promise();
                if (r > 1) {
                    for (; n < r; n++) t[n] && t[n].promise && s.isFunction(t[n].promise) ? t[n].promise().then(c(n), f.reject, h(n)) : --o;
                    o || f.resolveWith(f, t)
                } else f !== e && f.resolveWith(f, r ? [e] : []);
                return l
            }
        }), s.support = function () {
        var t, r, i, o, u, a, f, l, c, h, p, d, v = n.createElement("div"),
            m = n.documentElement;
        v.setAttribute("className", "t"), v.innerHTML = "   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>", r = v.getElementsByTagName("*"), i = v.getElementsByTagName("a")[0];
        if (!r || !r.length || !i) return {};
        o = n.createElement("select"), u = o.appendChild(n.createElement("option")), a = v.getElementsByTagName("input")[0], t = {
            leadingWhitespace: v.firstChild.nodeType === 3,
            tbody: !v.getElementsByTagName("tbody").length,
            htmlSerialize: !! v.getElementsByTagName("link").length,
            style: /top/.test(i.getAttribute("style")),
            hrefNormalized: i.getAttribute("href") === "/a",
            opacity: /^0.55/.test(i.style.opacity),
            cssFloat: !! i.style.cssFloat,
            checkOn: a.value === "on",
            optSelected: u.selected,
            getSetAttribute: v.className !== "t",
            enctype: !! n.createElement("form").enctype,
            html5Clone: n.createElement("nav").cloneNode(!0).outerHTML !== "<:nav></:nav>",
            submitBubbles: !0,
            changeBubbles: !0,
            focusinBubbles: !1,
            deleteExpando: !0,
            noCloneEvent: !0,
            inlineBlockNeedsLayout: !1,
            shrinkWrapBlocks: !1,
            reliableMarginRight: !0,
            pixelMargin: !0
        }, s.boxModel = t.boxModel = n.compatMode === "CSS1Compat", a.checked = !0, t.noCloneChecked = a.cloneNode(!0).checked, o.disabled = !0, t.optDisabled = !u.disabled;
        try {
            delete v.test
        } catch (g) {
            t.deleteExpando = !1
        }!v.addEventListener && v.attachEvent && v.fireEvent && (v.attachEvent("onclick", function () {
                    t.noCloneEvent = !1
                }), v.cloneNode(!0).fireEvent("onclick")), a = n.createElement("input"), a.value = "t", a.setAttribute("type", "radio"), t.radioValue = a.value === "t", a.setAttribute("checked", "checked"), a.setAttribute("name", "t"), v.appendChild(a), f = n.createDocumentFragment(), f.appendChild(v.lastChild), t.checkClone = f.cloneNode(!0).cloneNode(!0).lastChild.checked, t.appendChecked = a.checked, f.removeChild(a), f.appendChild(v);
        if (v.attachEvent)
            for (p in {
                    submit: 1,
                    change: 1,
                    focusin: 1
                }) h = "on" + p, d = h in v, d || (v.setAttribute(h, "return;"), d = typeof v[h] == "function"), t[p + "Bubbles"] = d;
        return f.removeChild(v), f = o = u = v = a = null, s(function () {
            var r, i, o, u, a, f, c, h, p, m, g, y, b, w = n.getElementsByTagName("body")[0];
            if (!w) return;
            h = 1, b = "padding:0;margin:0;border:", g = "position:absolute;top:0;left:0;width:1px;height:1px;", y = b + "0;visibility:hidden;", p = "style='" + g + b + "5px solid #000;", m = "<div " + p + "display:block;'><div style='" + b + "0;display:block;overflow:hidden;'></div></div>" + "<table " + p + "' cellpadding='0' cellspacing='0'>" + "<tr><td></td></tr></table>", r = n.createElement("div"), r.style.cssText = y + "width:0;height:0;position:static;top:0;margin-top:" + h + "px", w.insertBefore(r, w.firstChild), v = n.createElement("div"), r.appendChild(v), v.innerHTML = "<table><tr><td style='" + b + "0;display:none'></td><td>t</td></tr></table>", l = v.getElementsByTagName("td"), d = l[0].offsetHeight === 0, l[0].style.display = "", l[1].style.display = "none", t.reliableHiddenOffsets = d && l[0].offsetHeight === 0, e.getComputedStyle && (v.innerHTML = "", c = n.createElement("div"), c.style.width = "0", c.style.marginRight = "0", v.style.width = "2px", v.appendChild(c), t.reliableMarginRight = (parseInt((e.getComputedStyle(c, null) || {
                                marginRight: 0
                            }).marginRight, 10) || 0) === 0), typeof v.style.zoom != "undefined" && (v.innerHTML = "", v.style.width = v.style.padding = "1px", v.style.border = 0, v.style.overflow = "hidden", v.style.display = "inline", v.style.zoom = 1, t.inlineBlockNeedsLayout = v.offsetWidth === 3, v.style.display = "block", v.style.overflow = "visible", v.innerHTML = "<div style='width:5px;'></div>", t.shrinkWrapBlocks = v.offsetWidth !== 3), v.style.cssText = g + y, v.innerHTML = m, i = v.firstChild, o = i.firstChild, a = i.nextSibling.firstChild.firstChild, f = {
                doesNotAddBorder: o.offsetTop !== 5,
                doesAddBorderForTableAndCells: a.offsetTop === 5
            }, o.style.position = "fixed", o.style.top = "20px", f.fixedPosition = o.offsetTop === 20 || o.offsetTop === 15, o.style.position = o.style.top = "", i.style.overflow = "hidden", i.style.position = "relative", f.subtractsBorderForOverflowNotVisible = o.offsetTop === -5, f.doesNotIncludeMarginInBodyOffset = w.offsetTop !== h, e.getComputedStyle && (v.style.marginTop = "1%", t.pixelMargin = (e.getComputedStyle(v, null) || {
                        marginTop: 0
                    }).marginTop !== "1%"), typeof r.style.zoom != "undefined" && (r.style.zoom = 1), w.removeChild(r), c = v = r = null, s.extend(t, f)
        }), t
    }();
    var f = /^(?:\{.*\}|\[.*\])$/,
        l = /([A-Z])/g;
    s.extend({
            cache: {},
            uuid: 0,
            expando: "jQuery" + (s.fn.jquery + Math.random()).replace(/\D/g, ""),
            noData: {
                embed: !0,
                object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
                applet: !0
            },
            hasData: function (e) {
                return e = e.nodeType ? s.cache[e[s.expando]] : e[s.expando], !! e && !h(e)
            },
            data: function (e, n, r, i) {
                if (!s.acceptData(e)) return;
                var o, u, a, f = s.expando,
                    l = typeof n == "string",
                    c = e.nodeType,
                    h = c ? s.cache : e,
                    p = c ? e[f] : e[f] && f,
                    d = n === "events";
                if ((!p || !h[p] || !d && !i && !h[p].data) && l && r === t) return;
                p || (c ? e[f] = p = ++s.uuid : p = f), h[p] || (h[p] = {}, c || (h[p].toJSON = s.noop));
                if (typeof n == "object" || typeof n == "function") i ? h[p] = s.extend(h[p], n) : h[p].data = s.extend(h[p].data, n);
                return o = u = h[p], i || (u.data || (u.data = {}), u = u.data), r !== t && (u[s.camelCase(n)] = r), d && !u[n] ? o.events : (l ? (a = u[n], a == null && (a = u[s.camelCase(n)])) : a = u, a)
            },
            removeData: function (e, t, n) {
                if (!s.acceptData(e)) return;
                var r, i, o, u = s.expando,
                    a = e.nodeType,
                    f = a ? s.cache : e,
                    l = a ? e[u] : u;
                if (!f[l]) return;
                if (t) {
                    r = n ? f[l] : f[l].data;
                    if (r) {
                        s.isArray(t) || (t in r ? t = [t] : (t = s.camelCase(t), t in r ? t = [t] : t = t.split(" ")));
                        for (i = 0, o = t.length; i < o; i++) delete r[t[i]];
                        if (!(n ? h : s.isEmptyObject)(r)) return
                    }
                }
                if (!n) {
                    delete f[l].data;
                    if (!h(f[l])) return
                }
                s.support.deleteExpando || !f.setInterval ? delete f[l] : f[l] = null, a && (s.support.deleteExpando ? delete e[u] : e.removeAttribute ? e.removeAttribute(u) : e[u] = null)
            },
            _data: function (e, t, n) {
                return s.data(e, t, n, !0)
            },
            acceptData: function (e) {
                if (e.nodeName) {
                    var t = s.noData[e.nodeName.toLowerCase()];
                    if (t) return t !== !0 && e.getAttribute("classid") === t
                }
                return !0
            }
        }), s.fn.extend({
            data: function (e, n) {
                var r, i, o, u, a, f = this[0],
                    l = 0,
                    h = null;
                if (e === t) {
                    if (this.length) {
                        h = s.data(f);
                        if (f.nodeType === 1 && !s._data(f, "parsedAttrs")) {
                            o = f.attributes;
                            for (a = o.length; l < a; l++) u = o[l].name, u.indexOf("data-") === 0 && (u = s.camelCase(u.substring(5)), c(f, u, h[u]));
                            s._data(f, "parsedAttrs", !0)
                        }
                    }
                    return h
                }
                return typeof e == "object" ? this.each(function () {
                    s.data(this, e)
                }) : (r = e.split(".", 2), r[1] = r[1] ? "." + r[1] : "", i = r[1] + "!", s.access(this, function (n) {
                            if (n === t) return h = this.triggerHandler("getData" + i, [r[0]]), h === t && f && (h = s.data(f, e), h = c(f, e, h)), h === t && r[1] ? this.data(r[0]) : h;
                            r[1] = n, this.each(function () {
                                var t = s(this);
                                t.triggerHandler("setData" + i, r), s.data(this, e, n), t.triggerHandler("changeData" + i, r)
                            })
                        }, null, n, arguments.length > 1, null, !1))
            },
            removeData: function (e) {
                return this.each(function () {
                    s.removeData(this, e)
                })
            }
        }), s.extend({
            _mark: function (e, t) {
                e && (t = (t || "fx") + "mark", s._data(e, t, (s._data(e, t) || 0) + 1))
            },
            _unmark: function (e, t, n) {
                e !== !0 && (n = t, t = e, e = !1);
                if (t) {
                    n = n || "fx";
                    var r = n + "mark",
                        i = e ? 0 : (s._data(t, r) || 1) - 1;
                    i ? s._data(t, r, i) : (s.removeData(t, r, !0), p(t, n, "mark"))
                }
            },
            queue: function (e, t, n) {
                var r;
                if (e) return t = (t || "fx") + "queue", r = s._data(e, t), n && (!r || s.isArray(n) ? r = s._data(e, t, s.makeArray(n)) : r.push(n)), r || []
            },
            dequeue: function (e, t) {
                t = t || "fx";
                var n = s.queue(e, t),
                    r = n.shift(),
                    i = {};
                r === "inprogress" && (r = n.shift()), r && (t === "fx" && n.unshift("inprogress"), s._data(e, t + ".run", i), r.call(e, function () {
                            s.dequeue(e, t)
                        }, i)), n.length || (s.removeData(e, t + "queue " + t + ".run", !0), p(e, t, "queue"))
            }
        }), s.fn.extend({
            queue: function (e, n) {
                var r = 2;
                return typeof e != "string" && (n = e, e = "fx", r--), arguments.length < r ? s.queue(this[0], e) : n === t ? this : this.each(function () {
                    var t = s.queue(this, e, n);
                    e === "fx" && t[0] !== "inprogress" && s.dequeue(this, e)
                })
            },
            dequeue: function (e) {
                return this.each(function () {
                    s.dequeue(this, e)
                })
            },
            delay: function (e, t) {
                return e = s.fx ? s.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function (t, n) {
                    var r = setTimeout(t, e);
                    n.stop = function () {
                        clearTimeout(r)
                    }
                })
            },
            clearQueue: function (e) {
                return this.queue(e || "fx", [])
            },
            promise: function (e, n) {
                function h() {
                    --u || r.resolveWith(i, [i])
                }
                typeof e != "string" && (n = e, e = t), e = e || "fx";
                var r = s.Deferred(),
                    i = this,
                    o = i.length,
                    u = 1,
                    a = e + "defer",
                    f = e + "queue",
                    l = e + "mark",
                    c;
                while (o--)
                    if (c = s.data(i[o], a, t, !0) || (s.data(i[o], f, t, !0) || s.data(i[o], l, t, !0)) && s.data(i[o], a, s.Callbacks("once memory"), !0)) u++, c.add(h);
                return h(), r.promise(n)
            }
        });
    var d = /[\n\t\r]/g,
        v = /\s+/,
        m = /\r/g,
        g = /^(?:button|input)$/i,
        y = /^(?:button|input|object|select|textarea)$/i,
        b = /^a(?:rea)?$/i,
        w = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
        E = s.support.getSetAttribute,
        S, x, T;
    s.fn.extend({
            attr: function (e, t) {
                return s.access(this, s.attr, e, t, arguments.length > 1)
            },
            removeAttr: function (e) {
                return this.each(function () {
                    s.removeAttr(this, e)
                })
            },
            prop: function (e, t) {
                return s.access(this, s.prop, e, t, arguments.length > 1)
            },
            removeProp: function (e) {
                return e = s.propFix[e] || e, this.each(function () {
                    try {
                        this[e] = t, delete this[e]
                    } catch (n) {}
                })
            },
            addClass: function (e) {
                var t, n, r, i, o, u, a;
                if (s.isFunction(e)) return this.each(function (t) {
                    s(this).addClass(e.call(this, t, this.className))
                });
                if (e && typeof e == "string") {
                    t = e.split(v);
                    for (n = 0, r = this.length; n < r; n++) {
                        i = this[n];
                        if (i.nodeType === 1)
                            if (!i.className && t.length === 1) i.className = e;
                            else {
                                o = " " + i.className + " ";
                                for (u = 0, a = t.length; u < a; u++)~ o.indexOf(" " + t[u] + " ") || (o += t[u] + " ");
                                i.className = s.trim(o)
                            }
                    }
                }
                return this
            },
            removeClass: function (e) {
                var n, r, i, o, u, a, f;
                if (s.isFunction(e)) return this.each(function (t) {
                    s(this).removeClass(e.call(this, t, this.className))
                });
                if (e && typeof e == "string" || e === t) {
                    n = (e || "").split(v);
                    for (r = 0, i = this.length; r < i; r++) {
                        o = this[r];
                        if (o.nodeType === 1 && o.className)
                            if (e) {
                                u = (" " + o.className + " ").replace(d, " ");
                                for (a = 0, f = n.length; a < f; a++) u = u.replace(" " + n[a] + " ", " ");
                                o.className = s.trim(u)
                            } else o.className = ""
                    }
                }
                return this
            },
            toggleClass: function (e, t) {
                var n = typeof e,
                    r = typeof t == "boolean";
                return s.isFunction(e) ? this.each(function (n) {
                    s(this).toggleClass(e.call(this, n, this.className, t), t)
                }) : this.each(function () {
                    if (n === "string") {
                        var i, o = 0,
                            u = s(this),
                            a = t,
                            f = e.split(v);
                        while (i = f[o++]) a = r ? a : !u.hasClass(i), u[a ? "addClass" : "removeClass"](i)
                    } else if (n === "undefined" || n === "boolean") this.className && s._data(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : s._data(this, "__className__") || ""
                })
            },
            hasClass: function (e) {
                var t = " " + e + " ",
                    n = 0,
                    r = this.length;
                for (; n < r; n++)
                    if (this[n].nodeType === 1 && (" " + this[n].className + " ").replace(d, " ").indexOf(t) > -1) return !0;
                return !1
            },
            val: function (e) {
                var n, r, i, o = this[0];
                if (!arguments.length) {
                    if (o) return n = s.valHooks[o.type] || s.valHooks[o.nodeName.toLowerCase()], n && "get" in n && (r = n.get(o, "value")) !== t ? r : (r = o.value, typeof r == "string" ? r.replace(m, "") : r == null ? "" : r);
                    return
                }
                return i = s.isFunction(e), this.each(function (r) {
                    var o = s(this),
                        u;
                    if (this.nodeType !== 1) return;
                    i ? u = e.call(this, r, o.val()) : u = e, u == null ? u = "" : typeof u == "number" ? u += "" : s.isArray(u) && (u = s.map(u, function (e) {
                                return e == null ? "" : e + ""
                            })), n = s.valHooks[this.type] || s.valHooks[this.nodeName.toLowerCase()];
                    if (!n || !("set" in n) || n.set(this, u, "value") === t) this.value = u
                })
            }
        }), s.extend({
            valHooks: {
                option: {
                    get: function (e) {
                        var t = e.attributes.value;
                        return !t || t.specified ? e.value : e.text
                    }
                },
                select: {
                    get: function (e) {
                        var t, n, r, i, o = e.selectedIndex,
                            u = [],
                            a = e.options,
                            f = e.type === "select-one";
                        if (o < 0) return null;
                        n = f ? o : 0, r = f ? o + 1 : a.length;
                        for (; n < r; n++) {
                            i = a[n];
                            if (i.selected && (s.support.optDisabled ? !i.disabled : i.getAttribute("disabled") === null) && (!i.parentNode.disabled || !s.nodeName(i.parentNode, "optgroup"))) {
                                t = s(i).val();
                                if (f) return t;
                                u.push(t)
                            }
                        }
                        return f && !u.length && a.length ? s(a[o]).val() : u
                    },
                    set: function (e, t) {
                        var n = s.makeArray(t);
                        return s(e).find("option").each(function () {
                            this.selected = s.inArray(s(this).val(), n) >= 0
                        }), n.length || (e.selectedIndex = -1), n
                    }
                }
            },
            attrFn: {
                val: !0,
                css: !0,
                html: !0,
                text: !0,
                data: !0,
                width: !0,
                height: !0,
                offset: !0
            },
            attr: function (e, n, r, i) {
                var o, u, a, f = e.nodeType;
                if (!e || f === 3 || f === 8 || f === 2) return;
                if (i && n in s.attrFn) return s(e)[n](r);
                if (typeof e.getAttribute == "undefined") return s.prop(e, n, r);
                a = f !== 1 || !s.isXMLDoc(e), a && (n = n.toLowerCase(), u = s.attrHooks[n] || (w.test(n) ? x : S));
                if (r !== t) {
                    if (r === null) {
                        s.removeAttr(e, n);
                        return
                    }
                    return u && "set" in u && a && (o = u.set(e, r, n)) !== t ? o : (e.setAttribute(n, "" + r), r)
                }
                return u && "get" in u && a && (o = u.get(e, n)) !== null ? o : (o = e.getAttribute(n), o === null ? t : o)
            },
            removeAttr: function (e, t) {
                var n, r, i, o, u, a = 0;
                if (t && e.nodeType === 1) {
                    r = t.toLowerCase().split(v), o = r.length;
                    for (; a < o; a++) i = r[a], i && (n = s.propFix[i] || i, u = w.test(i), u || s.attr(e, i, ""), e.removeAttribute(E ? i : n), u && n in e && (e[n] = !1))
                }
            },
            attrHooks: {
                type: {
                    set: function (e, t) {
                        if (g.test(e.nodeName) && e.parentNode) s.error("type property can't be changed");
                        else if (!s.support.radioValue && t === "radio" && s.nodeName(e, "input")) {
                            var n = e.value;
                            return e.setAttribute("type", t), n && (e.value = n), t
                        }
                    }
                },
                value: {
                    get: function (e, t) {
                        return S && s.nodeName(e, "button") ? S.get(e, t) : t in e ? e.value : null
                    },
                    set: function (e, t, n) {
                        if (S && s.nodeName(e, "button")) return S.set(e, t, n);
                        e.value = t
                    }
                }
            },
            propFix: {
                tabindex: "tabIndex",
                readonly: "readOnly",
                "for": "htmlFor",
                "class": "className",
                maxlength: "maxLength",
                cellspacing: "cellSpacing",
                cellpadding: "cellPadding",
                rowspan: "rowSpan",
                colspan: "colSpan",
                usemap: "useMap",
                frameborder: "frameBorder",
                contenteditable: "contentEditable"
            },
            prop: function (e, n, r) {
                var i, o, u, a = e.nodeType;
                if (!e || a === 3 || a === 8 || a === 2) return;
                return u = a !== 1 || !s.isXMLDoc(e), u && (n = s.propFix[n] || n, o = s.propHooks[n]), r !== t ? o && "set" in o && (i = o.set(e, r, n)) !== t ? i : e[n] = r : o && "get" in o && (i = o.get(e, n)) !== null ? i : e[n]
            },
            propHooks: {
                tabIndex: {
                    get: function (e) {
                        var n = e.getAttributeNode("tabindex");
                        return n && n.specified ? parseInt(n.value, 10) : y.test(e.nodeName) || b.test(e.nodeName) && e.href ? 0 : t
                    }
                }
            }
        }), s.attrHooks.tabindex = s.propHooks.tabIndex, x = {
        get: function (e, n) {
            var r, i = s.prop(e, n);
            return i === !0 || typeof i != "boolean" && (r = e.getAttributeNode(n)) && r.nodeValue !== !1 ? n.toLowerCase() : t
        },
        set: function (e, t, n) {
            var r;
            return t === !1 ? s.removeAttr(e, n) : (r = s.propFix[n] || n, r in e && (e[r] = !0), e.setAttribute(n, n.toLowerCase())), n
        }
    }, E || (T = {
            name: !0,
            id: !0,
            coords: !0
        }, S = s.valHooks.button = {
            get: function (e, n) {
                var r;
                return r = e.getAttributeNode(n), r && (T[n] ? r.nodeValue !== "" : r.specified) ? r.nodeValue : t
            },
            set: function (e, t, r) {
                var i = e.getAttributeNode(r);
                return i || (i = n.createAttribute(r), e.setAttributeNode(i)), i.nodeValue = t + ""
            }
        }, s.attrHooks.tabindex.set = S.set, s.each(["width", "height"], function (e, t) {
                s.attrHooks[t] = s.extend(s.attrHooks[t], {
                        set: function (e, n) {
                            if (n === "") return e.setAttribute(t, "auto"), n
                        }
                    })
            }), s.attrHooks.contenteditable = {
            get: S.get,
            set: function (e, t, n) {
                t === "" && (t = "false"), S.set(e, t, n)
            }
        }), s.support.hrefNormalized || s.each(["href", "src", "width", "height"], function (e, n) {
            s.attrHooks[n] = s.extend(s.attrHooks[n], {
                    get: function (e) {
                        var r = e.getAttribute(n, 2);
                        return r === null ? t : r
                    }
                })
        }), s.support.style || (s.attrHooks.style = {
            get: function (e) {
                return e.style.cssText.toLowerCase() || t
            },
            set: function (e, t) {
                return e.style.cssText = "" + t
            }
        }), s.support.optSelected || (s.propHooks.selected = s.extend(s.propHooks.selected, {
                get: function (e) {
                    var t = e.parentNode;
                    return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null
                }
            })), s.support.enctype || (s.propFix.enctype = "encoding"), s.support.checkOn || s.each(["radio", "checkbox"], function () {
            s.valHooks[this] = {
                get: function (e) {
                    return e.getAttribute("value") === null ? "on" : e.value
                }
            }
        }), s.each(["radio", "checkbox"], function () {
            s.valHooks[this] = s.extend(s.valHooks[this], {
                    set: function (e, t) {
                        if (s.isArray(t)) return e.checked = s.inArray(s(e).val(), t) >= 0
                    }
                })
        });
    var N = /^(?:textarea|input|select)$/i,
        C = /^([^\.]*)?(?:\.(.+))?$/,
        k = /(?:^|\s)hover(\.\S+)?\b/,
        L = /^key/,
        A = /^(?:mouse|contextmenu)|click/,
        O = /^(?:focusinfocus|focusoutblur)$/,
        M = /^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,
        _ = function (e) {
            var t = M.exec(e);
            return t && (t[1] = (t[1] || "").toLowerCase(), t[3] = t[3] && new RegExp("(?:^|\\s)" + t[3] + "(?:\\s|$)")), t
        }, D = function (e, t) {
            var n = e.attributes || {};
            return (!t[1] || e.nodeName.toLowerCase() === t[1]) && (!t[2] || (n.id || {}).value === t[2]) && (!t[3] || t[3].test((n["class"] || {}).value))
        }, P = function (e) {
            return s.event.special.hover ? e : e.replace(k, "mouseenter$1 mouseleave$1")
        };
    s.event = {
        add: function (e, n, r, i, o) {
            var u, a, f, l, c, h, p, d, v, m, g, y;
            if (e.nodeType === 3 || e.nodeType === 8 || !n || !r || !(u = s._data(e))) return;
            r.handler && (v = r, r = v.handler, o = v.selector), r.guid || (r.guid = s.guid++), f = u.events, f || (u.events = f = {}), a = u.handle, a || (u.handle = a = function (e) {
                return typeof s == "undefined" || !! e && s.event.triggered === e.type ? t : s.event.dispatch.apply(a.elem, arguments)
            }, a.elem = e), n = s.trim(P(n)).split(" ");
            for (l = 0; l < n.length; l++) {
                c = C.exec(n[l]) || [], h = c[1], p = (c[2] || "").split(".").sort(), y = s.event.special[h] || {}, h = (o ? y.delegateType : y.bindType) || h, y = s.event.special[h] || {}, d = s.extend({
                        type: h,
                        origType: c[1],
                        data: i,
                        handler: r,
                        guid: r.guid,
                        selector: o,
                        quick: o && _(o),
                        namespace: p.join(".")
                    }, v), g = f[h];
                if (!g) {
                    g = f[h] = [], g.delegateCount = 0;
                    if (!y.setup || y.setup.call(e, i, p, a) === !1) e.addEventListener ? e.addEventListener(h, a, !1) : e.attachEvent && e.attachEvent("on" + h, a)
                }
                y.add && (y.add.call(e, d), d.handler.guid || (d.handler.guid = r.guid)), o ? g.splice(g.delegateCount++, 0, d) : g.push(d), s.event.global[h] = !0
            }
            e = null
        },
        global: {},
        remove: function (e, t, n, r, i) {
            var o = s.hasData(e) && s._data(e),
                u, a, f, l, c, h, p, d, v, m, g, y;
            if (!o || !(d = o.events)) return;
            t = s.trim(P(t || "")).split(" ");
            for (u = 0; u < t.length; u++) {
                a = C.exec(t[u]) || [], f = l = a[1], c = a[2];
                if (!f) {
                    for (f in d) s.event.remove(e, f + t[u], n, r, !0);
                    continue
                }
                v = s.event.special[f] || {}, f = (r ? v.delegateType : v.bindType) || f, g = d[f] || [], h = g.length, c = c ? new RegExp("(^|\\.)" + c.split(".").sort().join("\\.(?:.*\\.)?") + "(\\.|$)") : null;
                for (p = 0; p < g.length; p++) y = g[p], (i || l === y.origType) && (!n || n.guid === y.guid) && (!c || c.test(y.namespace)) && (!r || r === y.selector || r === "**" && y.selector) && (g.splice(p--, 1), y.selector && g.delegateCount--, v.remove && v.remove.call(e, y));
                g.length === 0 && h !== g.length && ((!v.teardown || v.teardown.call(e, c) === !1) && s.removeEvent(e, f, o.handle), delete d[f])
            }
            s.isEmptyObject(d) && (m = o.handle, m && (m.elem = null), s.removeData(e, ["events", "handle"], !0))
        },
        customEvent: {
            getData: !0,
            setData: !0,
            changeData: !0
        },
        trigger: function (n, r, i, o) {
            if (!i || i.nodeType !== 3 && i.nodeType !== 8) {
                var u = n.type || n,
                    a = [],
                    f, l, c, h, p, d, v, m, g, y;
                if (O.test(u + s.event.triggered)) return;
                u.indexOf("!") >= 0 && (u = u.slice(0, -1), l = !0), u.indexOf(".") >= 0 && (a = u.split("."), u = a.shift(), a.sort());
                if ((!i || s.event.customEvent[u]) && !s.event.global[u]) return;
                n = typeof n == "object" ? n[s.expando] ? n : new s.Event(u, n) : new s.Event(u), n.type = u, n.isTrigger = !0, n.exclusive = l, n.namespace = a.join("."), n.namespace_re = n.namespace ? new RegExp("(^|\\.)" + a.join("\\.(?:.*\\.)?") + "(\\.|$)") : null, d = u.indexOf(":") < 0 ? "on" + u : "";
                if (!i) {
                    f = s.cache;
                    for (c in f) f[c].events && f[c].events[u] && s.event.trigger(n, r, f[c].handle.elem, !0);
                    return
                }
                n.result = t, n.target || (n.target = i), r = r != null ? s.makeArray(r) : [], r.unshift(n), v = s.event.special[u] || {};
                if (v.trigger && v.trigger.apply(i, r) === !1) return;
                g = [
                    [i, v.bindType || u]
                ];
                if (!o && !v.noBubble && !s.isWindow(i)) {
                    y = v.delegateType || u, h = O.test(y + u) ? i : i.parentNode, p = null;
                    for (; h; h = h.parentNode) g.push([h, y]), p = h;
                    p && p === i.ownerDocument && g.push([p.defaultView || p.parentWindow || e, y])
                }
                for (c = 0; c < g.length && !n.isPropagationStopped(); c++) h = g[c][0], n.type = g[c][1], m = (s._data(h, "events") || {})[n.type] && s._data(h, "handle"), m && m.apply(h, r), m = d && h[d], m && s.acceptData(h) && m.apply(h, r) === !1 && n.preventDefault();
                return n.type = u, !o && !n.isDefaultPrevented() && (!v._default || v._default.apply(i.ownerDocument, r) === !1) && (u !== "click" || !s.nodeName(i, "a")) && s.acceptData(i) && d && i[u] && (u !== "focus" && u !== "blur" || n.target.offsetWidth !== 0) && !s.isWindow(i) && (p = i[d], p && (i[d] = null), s.event.triggered = u, i[u](), s.event.triggered = t, p && (i[d] = p)), n.result
            }
            return
        },
        dispatch: function (n) {
            n = s.event.fix(n || e.event);
            var r = (s._data(this, "events") || {})[n.type] || [],
                i = r.delegateCount,
                o = [].slice.call(arguments, 0),
                u = !n.exclusive && !n.namespace,
                a = s.event.special[n.type] || {}, f = [],
                l, c, h, p, d, v, m, g, y, b, w;
            o[0] = n, n.delegateTarget = this;
            if (a.preDispatch && a.preDispatch.call(this, n) === !1) return;
            if (i && (!n.button || n.type !== "click")) {
                p = s(this), p.context = this.ownerDocument || this;
                for (h = n.target; h != this; h = h.parentNode || this)
                    if (h.disabled !== !0) {
                        v = {}, g = [], p[0] = h;
                        for (l = 0; l < i; l++) y = r[l], b = y.selector, v[b] === t && (v[b] = y.quick ? D(h, y.quick) : p.is(b)), v[b] && g.push(y);
                        g.length && f.push({
                                elem: h,
                                matches: g
                            })
                    }
            }
            r.length > i && f.push({
                    elem: this,
                    matches: r.slice(i)
                });
            for (l = 0; l < f.length && !n.isPropagationStopped(); l++) {
                m = f[l], n.currentTarget = m.elem;
                for (c = 0; c < m.matches.length && !n.isImmediatePropagationStopped(); c++) {
                    y = m.matches[c];
                    if (u || !n.namespace && !y.namespace || n.namespace_re && n.namespace_re.test(y.namespace)) n.data = y.data, n.handleObj = y, d = ((s.event.special[y.origType] || {}).handle || y.handler).apply(m.elem, o), d !== t && (n.result = d, d === !1 && (n.preventDefault(), n.stopPropagation()))
                }
            }
            return a.postDispatch && a.postDispatch.call(this, n), n.result
        },
        props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function (e, t) {
                return e.which == null && (e.which = t.charCode != null ? t.charCode : t.keyCode), e
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function (e, r) {
                var i, s, o, u = r.button,
                    a = r.fromElement;
                return e.pageX == null && r.clientX != null && (i = e.target.ownerDocument || n, s = i.documentElement, o = i.body, e.pageX = r.clientX + (s && s.scrollLeft || o && o.scrollLeft || 0) - (s && s.clientLeft || o && o.clientLeft || 0), e.pageY = r.clientY + (s && s.scrollTop || o && o.scrollTop || 0) - (s && s.clientTop || o && o.clientTop || 0)), !e.relatedTarget && a && (e.relatedTarget = a === e.target ? r.toElement : a), !e.which && u !== t && (e.which = u & 1 ? 1 : u & 2 ? 3 : u & 4 ? 2 : 0), e
            }
        },
        fix: function (e) {
            if (e[s.expando]) return e;
            var r, i, o = e,
                u = s.event.fixHooks[e.type] || {}, a = u.props ? this.props.concat(u.props) : this.props;
            e = s.Event(o);
            for (r = a.length; r;) i = a[--r], e[i] = o[i];
            return e.target || (e.target = o.srcElement || n), e.target.nodeType === 3 && (e.target = e.target.parentNode), e.metaKey === t && (e.metaKey = e.ctrlKey), u.filter ? u.filter(e, o) : e
        },
        special: {
            ready: {
                setup: s.bindReady
            },
            load: {
                noBubble: !0
            },
            focus: {
                delegateType: "focusin"
            },
            blur: {
                delegateType: "focusout"
            },
            beforeunload: {
                setup: function (e, t, n) {
                    s.isWindow(this) && (this.onbeforeunload = n)
                },
                teardown: function (e, t) {
                    this.onbeforeunload === t && (this.onbeforeunload = null)
                }
            }
        },
        simulate: function (e, t, n, r) {
            var i = s.extend(new s.Event, n, {
                    type: e,
                    isSimulated: !0,
                    originalEvent: {}
                });
            r ? s.event.trigger(i, null, t) : s.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault()
        }
    }, s.event.handle = s.event.dispatch, s.removeEvent = n.removeEventListener ? function (e, t, n) {
        e.removeEventListener && e.removeEventListener(t, n, !1)
    } : function (e, t, n) {
        e.detachEvent && e.detachEvent("on" + t, n)
    }, s.Event = function (e, t) {
        if (!(this instanceof s.Event)) return new s.Event(e, t);
        e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.returnValue === !1 || e.getPreventDefault && e.getPreventDefault() ? B : H) : this.type = e, t && s.extend(this, t), this.timeStamp = e && e.timeStamp || s.now(), this[s.expando] = !0
    }, s.Event.prototype = {
        preventDefault: function () {
            this.isDefaultPrevented = B;
            var e = this.originalEvent;
            if (!e) return;
            e.preventDefault ? e.preventDefault() : e.returnValue = !1
        },
        stopPropagation: function () {
            this.isPropagationStopped = B;
            var e = this.originalEvent;
            if (!e) return;
            e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0
        },
        stopImmediatePropagation: function () {
            this.isImmediatePropagationStopped = B, this.stopPropagation()
        },
        isDefaultPrevented: H,
        isPropagationStopped: H,
        isImmediatePropagationStopped: H
    }, s.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout"
        }, function (e, t) {
            s.event.special[e] = {
                delegateType: t,
                bindType: t,
                handle: function (e) {
                    var n = this,
                        r = e.relatedTarget,
                        i = e.handleObj,
                        o = i.selector,
                        u;
                    if (!r || r !== n && !s.contains(n, r)) e.type = i.origType, u = i.handler.apply(this, arguments), e.type = t;
                    return u
                }
            }
        }), s.support.submitBubbles || (s.event.special.submit = {
            setup: function () {
                if (s.nodeName(this, "form")) return !1;
                s.event.add(this, "click._submit keypress._submit", function (e) {
                    var n = e.target,
                        r = s.nodeName(n, "input") || s.nodeName(n, "button") ? n.form : t;
                    r && !r._submit_attached && (s.event.add(r, "submit._submit", function (e) {
                                e._submit_bubble = !0
                            }), r._submit_attached = !0)
                })
            },
            postDispatch: function (e) {
                e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && s.event.simulate("submit", this.parentNode, e, !0))
            },
            teardown: function () {
                if (s.nodeName(this, "form")) return !1;
                s.event.remove(this, "._submit")
            }
        }), s.support.changeBubbles || (s.event.special.change = {
            setup: function () {
                if (N.test(this.nodeName)) {
                    if (this.type === "checkbox" || this.type === "radio") s.event.add(this, "propertychange._change", function (e) {
                        e.originalEvent.propertyName === "checked" && (this._just_changed = !0)
                    }), s.event.add(this, "click._change", function (e) {
                        this._just_changed && !e.isTrigger && (this._just_changed = !1, s.event.simulate("change", this, e, !0))
                    });
                    return !1
                }
                s.event.add(this, "beforeactivate._change", function (e) {
                    var t = e.target;
                    N.test(t.nodeName) && !t._change_attached && (s.event.add(t, "change._change", function (e) {
                                this.parentNode && !e.isSimulated && !e.isTrigger && s.event.simulate("change", this.parentNode, e, !0)
                            }), t._change_attached = !0)
                })
            },
            handle: function (e) {
                var t = e.target;
                if (this !== t || e.isSimulated || e.isTrigger || t.type !== "radio" && t.type !== "checkbox") return e.handleObj.handler.apply(this, arguments)
            },
            teardown: function () {
                return s.event.remove(this, "._change"), N.test(this.nodeName)
            }
        }), s.support.focusinBubbles || s.each({
            focus: "focusin",
            blur: "focusout"
        }, function (e, t) {
            var r = 0,
                i = function (e) {
                    s.event.simulate(t, e.target, s.event.fix(e), !0)
                };
            s.event.special[t] = {
                setup: function () {
                    r++ === 0 && n.addEventListener(e, i, !0)
                },
                teardown: function () {
                    --r === 0 && n.removeEventListener(e, i, !0)
                }
            }
        }), s.fn.extend({
            on: function (e, n, r, i, o) {
                var u, a;
                if (typeof e == "object") {
                    typeof n != "string" && (r = r || n, n = t);
                    for (a in e) this.on(a, n, r, e[a], o);
                    return this
                }
                r == null && i == null ? (i = n, r = n = t) : i == null && (typeof n == "string" ? (i = r, r = t) : (i = r, r = n, n = t));
                if (i === !1) i = H;
                else if (!i) return this;
                return o === 1 && (u = i, i = function (e) {
                    return s().off(e), u.apply(this, arguments)
                }, i.guid = u.guid || (u.guid = s.guid++)), this.each(function () {
                    s.event.add(this, e, i, r, n)
                })
            },
            one: function (e, t, n, r) {
                return this.on(e, t, n, r, 1)
            },
            off: function (e, n, r) {
                if (e && e.preventDefault && e.handleObj) {
                    var i = e.handleObj;
                    return s(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this
                }
                if (typeof e == "object") {
                    for (var o in e) this.off(o, n, e[o]);
                    return this
                }
                if (n === !1 || typeof n == "function") r = n, n = t;
                return r === !1 && (r = H), this.each(function () {
                    s.event.remove(this, e, r, n)
                })
            },
            bind: function (e, t, n) {
                return this.on(e, null, t, n)
            },
            unbind: function (e, t) {
                return this.off(e, null, t)
            },
            live: function (e, t, n) {
                return s(this.context).on(e, this.selector, t, n), this
            },
            die: function (e, t) {
                return s(this.context).off(e, this.selector || "**", t), this
            },
            delegate: function (e, t, n, r) {
                return this.on(t, e, n, r)
            },
            undelegate: function (e, t, n) {
                return arguments.length == 1 ? this.off(e, "**") : this.off(t, e, n)
            },
            trigger: function (e, t) {
                return this.each(function () {
                    s.event.trigger(e, t, this)
                })
            },
            triggerHandler: function (e, t) {
                if (this[0]) return s.event.trigger(e, t, this[0], !0)
            },
            toggle: function (e) {
                var t = arguments,
                    n = e.guid || s.guid++,
                    r = 0,
                    i = function (n) {
                        var i = (s._data(this, "lastToggle" + e.guid) || 0) % r;
                        return s._data(this, "lastToggle" + e.guid, i + 1), n.preventDefault(), t[i].apply(this, arguments) || !1
                    };
                i.guid = n;
                while (r < t.length) t[r++].guid = n;
                return this.click(i)
            },
            hover: function (e, t) {
                return this.mouseenter(e).mouseleave(t || e)
            }
        }), s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (e, t) {
            s.fn[t] = function (e, n) {
                return n == null && (n = e, e = null), arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
            }, s.attrFn && (s.attrFn[t] = !0), L.test(t) && (s.event.fixHooks[t] = s.event.keyHooks), A.test(t) && (s.event.fixHooks[t] = s.event.mouseHooks)
        }),
    function () {
        function S(e, t, n, i, s, o) {
            for (var u = 0, a = i.length; u < a; u++) {
                var f = i[u];
                if (f) {
                    var l = !1;
                    f = f[e];
                    while (f) {
                        if (f[r] === n) {
                            l = i[f.sizset];
                            break
                        }
                        f.nodeType === 1 && !o && (f[r] = n, f.sizset = u);
                        if (f.nodeName.toLowerCase() === t) {
                            l = f;
                            break
                        }
                        f = f[e]
                    }
                    i[u] = l
                }
            }
        }

        function x(e, t, n, i, s, o) {
            for (var u = 0, a = i.length; u < a; u++) {
                var f = i[u];
                if (f) {
                    var l = !1;
                    f = f[e];
                    while (f) {
                        if (f[r] === n) {
                            l = i[f.sizset];
                            break
                        }
                        if (f.nodeType === 1) {
                            o || (f[r] = n, f.sizset = u);
                            if (typeof t != "string") {
                                if (f === t) {
                                    l = !0;
                                    break
                                }
                            } else if (h.filter(t, [f]).length > 0) {
                                l = f;
                                break
                            }
                        }
                        f = f[e]
                    }
                    i[u] = l
                }
            }
        }
        var e = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
            r = "sizcache" + (Math.random() + "").replace(".", ""),
            i = 0,
            o = Object.prototype.toString,
            u = !1,
            a = !0,
            f = /\\/g,
            l = /\r\n/g,
            c = /\W/;
        [0, 0].sort(function () {
            return a = !1, 0
        });
        var h = function (t, r, i, s) {
            i = i || [], r = r || n;
            var u = r;
            if (r.nodeType !== 1 && r.nodeType !== 9) return [];
            if (!t || typeof t != "string") return i;
            var a, f, l, c, p, m, g, b, w = !0,
                E = h.isXML(r),
                S = [],
                x = t;
            do {
                e.exec(""), a = e.exec(x);
                if (a) {
                    x = a[3], S.push(a[1]);
                    if (a[2]) {
                        c = a[3];
                        break
                    }
                }
            } while (a);
            if (S.length > 1 && v.exec(t))
                if (S.length === 2 && d.relative[S[0]]) f = T(S[0] + S[1], r, s);
                else {
                    f = d.relative[S[0]] ? [r] : h(S.shift(), r);
                    while (S.length) t = S.shift(), d.relative[t] && (t += S.shift()), f = T(t, f, s)
                } else {
                    !s && S.length > 1 && r.nodeType === 9 && !E && d.match.ID.test(S[0]) && !d.match.ID.test(S[S.length - 1]) && (p = h.find(S.shift(), r, E), r = p.expr ? h.filter(p.expr, p.set)[0] : p.set[0]);
                    if (r) {
                        p = s ? {
                            expr: S.pop(),
                            set: y(s)
                        } : h.find(S.pop(), S.length !== 1 || S[0] !== "~" && S[0] !== "+" || !r.parentNode ? r : r.parentNode, E), f = p.expr ? h.filter(p.expr, p.set) : p.set, S.length > 0 ? l = y(f) : w = !1;
                        while (S.length) m = S.pop(), g = m, d.relative[m] ? g = S.pop() : m = "", g == null && (g = r), d.relative[m](l, g, E)
                    } else l = S = []
                }
            l || (l = f), l || h.error(m || t);
            if (o.call(l) === "[object Array]")
                if (!w) i.push.apply(i, l);
                else if (r && r.nodeType === 1)
                for (b = 0; l[b] != null; b++) l[b] && (l[b] === !0 || l[b].nodeType === 1 && h.contains(r, l[b])) && i.push(f[b]);
            else
                for (b = 0; l[b] != null; b++) l[b] && l[b].nodeType === 1 && i.push(f[b]);
            else y(l, i);
            return c && (h(c, u, i, s), h.uniqueSort(i)), i
        };
        h.uniqueSort = function (e) {
            if (w) {
                u = a, e.sort(w);
                if (u)
                    for (var t = 1; t < e.length; t++) e[t] === e[t - 1] && e.splice(t--, 1)
            }
            return e
        }, h.matches = function (e, t) {
            return h(e, null, null, t)
        }, h.matchesSelector = function (e, t) {
            return h(t, null, null, [e]).length > 0
        }, h.find = function (e, t, n) {
            var r, i, s, o, u, a;
            if (!e) return [];
            for (i = 0, s = d.order.length; i < s; i++) {
                u = d.order[i];
                if (o = d.leftMatch[u].exec(e)) {
                    a = o[1], o.splice(1, 1);
                    if (a.substr(a.length - 1) !== "\\") {
                        o[1] = (o[1] || "").replace(f, ""), r = d.find[u](o, t, n);
                        if (r != null) {
                            e = e.replace(d.match[u], "");
                            break
                        }
                    }
                }
            }
            return r || (r = typeof t.getElementsByTagName != "undefined" ? t.getElementsByTagName("*") : []), {
                set: r,
                expr: e
            }
        }, h.filter = function (e, n, r, i) {
            var s, o, u, a, f, l, c, p, v, m = e,
                g = [],
                y = n,
                b = n && n[0] && h.isXML(n[0]);
            while (e && n.length) {
                for (u in d.filter)
                    if ((s = d.leftMatch[u].exec(e)) != null && s[2]) {
                        l = d.filter[u], c = s[1], o = !1, s.splice(1, 1);
                        if (c.substr(c.length - 1) === "\\") continue;
                        y === g && (g = []);
                        if (d.preFilter[u]) {
                            s = d.preFilter[u](s, y, r, g, i, b);
                            if (!s) o = a = !0;
                            else if (s === !0) continue
                        }
                        if (s)
                            for (p = 0;
                                (f = y[p]) != null; p++) f && (a = l(f, s, p, y), v = i ^ a, r && a != null ? v ? o = !0 : y[p] = !1 : v && (g.push(f), o = !0));
                        if (a !== t) {
                            r || (y = g), e = e.replace(d.match[u], "");
                            if (!o) return [];
                            break
                        }
                    }
                if (e === m) {
                    if (o != null) break;
                    h.error(e)
                }
                m = e
            }
            return y
        }, h.error = function (e) {
            throw new Error("Syntax error, unrecognized expression: " + e)
        };
        var p = h.getText = function (e) {
            var t, n, r = e.nodeType,
                i = "";
            if (r) {
                if (r === 1 || r === 9 || r === 11) {
                    if (typeof e.textContent == "string") return e.textContent;
                    if (typeof e.innerText == "string") return e.innerText.replace(l, "");
                    for (e = e.firstChild; e; e = e.nextSibling) i += p(e)
                } else if (r === 3 || r === 4) return e.nodeValue
            } else
                for (t = 0; n = e[t]; t++) n.nodeType !== 8 && (i += p(n));
            return i
        }, d = h.selectors = {
                order: ["ID", "NAME", "TAG"],
                match: {
                    ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                    CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                    NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
                    ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
                    TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
                    CHILD: /:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
                    POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
                    PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/
                },
                leftMatch: {},
                attrMap: {
                    "class": "className",
                    "for": "htmlFor"
                },
                attrHandle: {
                    href: function (e) {
                        return e.getAttribute("href")
                    },
                    type: function (e) {
                        return e.getAttribute("type")
                    }
                },
                relative: {
                    "+": function (e, t) {
                        var n = typeof t == "string",
                            r = n && !c.test(t),
                            i = n && !r;
                        r && (t = t.toLowerCase());
                        for (var s = 0, o = e.length, u; s < o; s++)
                            if (u = e[s]) {
                                while ((u = u.previousSibling) && u.nodeType !== 1);
                                e[s] = i || u && u.nodeName.toLowerCase() === t ? u || !1 : u === t
                            }
                        i && h.filter(t, e, !0)
                    },
                    ">": function (e, t) {
                        var n, r = typeof t == "string",
                            i = 0,
                            s = e.length;
                        if (r && !c.test(t)) {
                            t = t.toLowerCase();
                            for (; i < s; i++) {
                                n = e[i];
                                if (n) {
                                    var o = n.parentNode;
                                    e[i] = o.nodeName.toLowerCase() === t ? o : !1
                                }
                            }
                        } else {
                            for (; i < s; i++) n = e[i], n && (e[i] = r ? n.parentNode : n.parentNode === t);
                            r && h.filter(t, e, !0)
                        }
                    },
                    "": function (e, t, n) {
                        var r, s = i++,
                            o = x;
                        typeof t == "string" && !c.test(t) && (t = t.toLowerCase(), r = t, o = S), o("parentNode", t, s, e, r, n)
                    },
                    "~": function (e, t, n) {
                        var r, s = i++,
                            o = x;
                        typeof t == "string" && !c.test(t) && (t = t.toLowerCase(), r = t, o = S), o("previousSibling", t, s, e, r, n)
                    }
                },
                find: {
                    ID: function (e, t, n) {
                        if (typeof t.getElementById != "undefined" && !n) {
                            var r = t.getElementById(e[1]);
                            return r && r.parentNode ? [r] : []
                        }
                    },
                    NAME: function (e, t) {
                        if (typeof t.getElementsByName != "undefined") {
                            var n = [],
                                r = t.getElementsByName(e[1]);
                            for (var i = 0, s = r.length; i < s; i++) r[i].getAttribute("name") === e[1] && n.push(r[i]);
                            return n.length === 0 ? null : n
                        }
                    },
                    TAG: function (e, t) {
                        if (typeof t.getElementsByTagName != "undefined") return t.getElementsByTagName(e[1])
                    }
                },
                preFilter: {
                    CLASS: function (e, t, n, r, i, s) {
                        e = " " + e[1].replace(f, "") + " ";
                        if (s) return e;
                        for (var o = 0, u;
                            (u = t[o]) != null; o++) u && (i ^ (u.className && (" " + u.className + " ").replace(/[\t\n\r]/g, " ").indexOf(e) >= 0) ? n || r.push(u) : n && (t[o] = !1));
                        return !1
                    },
                    ID: function (e) {
                        return e[1].replace(f, "")
                    },
                    TAG: function (e, t) {
                        return e[1].replace(f, "").toLowerCase()
                    },
                    CHILD: function (e) {
                        if (e[1] === "nth") {
                            e[2] || h.error(e[0]), e[2] = e[2].replace(/^\+|\s*/g, "");
                            var t = /(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2] === "even" && "2n" || e[2] === "odd" && "2n+1" || !/\D/.test(e[2]) && "0n+" + e[2] || e[2]);
                            e[2] = t[1] + (t[2] || 1) - 0, e[3] = t[3] - 0
                        } else e[2] && h.error(e[0]);
                        return e[0] = i++, e
                    },
                    ATTR: function (e, t, n, r, i, s) {
                        var o = e[1] = e[1].replace(f, "");
                        return !s && d.attrMap[o] && (e[1] = d.attrMap[o]), e[4] = (e[4] || e[5] || "").replace(f, ""), e[2] === "~=" && (e[4] = " " + e[4] + " "), e
                    },
                    PSEUDO: function (t, n, r, i, s) {
                        if (t[1] === "not") {
                            if (!((e.exec(t[3]) || "").length > 1 || /^\w/.test(t[3]))) {
                                var o = h.filter(t[3], n, r, !0 ^ s);
                                return r || i.push.apply(i, o), !1
                            }
                            t[3] = h(t[3], null, null, n)
                        } else if (d.match.POS.test(t[0]) || d.match.CHILD.test(t[0])) return !0;
                        return t
                    },
                    POS: function (e) {
                        return e.unshift(!0), e
                    }
                },
                filters: {
                    enabled: function (e) {
                        return e.disabled === !1 && e.type !== "hidden"
                    },
                    disabled: function (e) {
                        return e.disabled === !0
                    },
                    checked: function (e) {
                        return e.checked === !0
                    },
                    selected: function (e) {
                        return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                    },
                    parent: function (e) {
                        return !!e.firstChild
                    },
                    empty: function (e) {
                        return !e.firstChild
                    },
                    has: function (e, t, n) {
                        return !!h(n[3], e).length
                    },
                    header: function (e) {
                        return /h\d/i.test(e.nodeName)
                    },
                    text: function (e) {
                        var t = e.getAttribute("type"),
                            n = e.type;
                        return e.nodeName.toLowerCase() === "input" && "text" === n && (t === n || t === null)
                    },
                    radio: function (e) {
                        return e.nodeName.toLowerCase() === "input" && "radio" === e.type
                    },
                    checkbox: function (e) {
                        return e.nodeName.toLowerCase() === "input" && "checkbox" === e.type
                    },
                    file: function (e) {
                        return e.nodeName.toLowerCase() === "input" && "file" === e.type
                    },
                    password: function (e) {
                        return e.nodeName.toLowerCase() === "input" && "password" === e.type
                    },
                    submit: function (e) {
                        var t = e.nodeName.toLowerCase();
                        return (t === "input" || t === "button") && "submit" === e.type
                    },
                    image: function (e) {
                        return e.nodeName.toLowerCase() === "input" && "image" === e.type
                    },
                    reset: function (e) {
                        var t = e.nodeName.toLowerCase();
                        return (t === "input" || t === "button") && "reset" === e.type
                    },
                    button: function (e) {
                        var t = e.nodeName.toLowerCase();
                        return t === "input" && "button" === e.type || t === "button"
                    },
                    input: function (e) {
                        return /input|select|textarea|button/i.test(e.nodeName)
                    },
                    focus: function (e) {
                        return e === e.ownerDocument.activeElement
                    }
                },
                setFilters: {
                    first: function (e, t) {
                        return t === 0
                    },
                    last: function (e, t, n, r) {
                        return t === r.length - 1
                    },
                    even: function (e, t) {
                        return t % 2 === 0
                    },
                    odd: function (e, t) {
                        return t % 2 === 1
                    },
                    lt: function (e, t, n) {
                        return t < n[3] - 0
                    },
                    gt: function (e, t, n) {
                        return t > n[3] - 0
                    },
                    nth: function (e, t, n) {
                        return n[3] - 0 === t
                    },
                    eq: function (e, t, n) {
                        return n[3] - 0 === t
                    }
                },
                filter: {
                    PSEUDO: function (e, t, n, r) {
                        var i = t[1],
                            s = d.filters[i];
                        if (s) return s(e, n, t, r);
                        if (i === "contains") return (e.textContent || e.innerText || p([e]) || "").indexOf(t[3]) >= 0;
                        if (i === "not") {
                            var o = t[3];
                            for (var u = 0, a = o.length; u < a; u++)
                                if (o[u] === e) return !1;
                            return !0
                        }
                        h.error(i)
                    },
                    CHILD: function (e, t) {
                        var n, i, s, o, u, a, f, l = t[1],
                            c = e;
                        switch (l) {
                        case "only":
                        case "first":
                            while (c = c.previousSibling)
                                if (c.nodeType === 1) return !1;
                            if (l === "first") return !0;
                            c = e;
                        case "last":
                            while (c = c.nextSibling)
                                if (c.nodeType === 1) return !1;
                            return !0;
                        case "nth":
                            n = t[2], i = t[3];
                            if (n === 1 && i === 0) return !0;
                            s = t[0], o = e.parentNode;
                            if (o && (o[r] !== s || !e.nodeIndex)) {
                                a = 0;
                                for (c = o.firstChild; c; c = c.nextSibling) c.nodeType === 1 && (c.nodeIndex = ++a);
                                o[r] = s
                            }
                            return f = e.nodeIndex - i, n === 0 ? f === 0 : f % n === 0 && f / n >= 0
                        }
                    },
                    ID: function (e, t) {
                        return e.nodeType === 1 && e.getAttribute("id") === t
                    },
                    TAG: function (e, t) {
                        return t === "*" && e.nodeType === 1 || !! e.nodeName && e.nodeName.toLowerCase() === t
                    },
                    CLASS: function (e, t) {
                        return (" " + (e.className || e.getAttribute("class")) + " ").indexOf(t) > -1
                    },
                    ATTR: function (e, t) {
                        var n = t[1],
                            r = h.attr ? h.attr(e, n) : d.attrHandle[n] ? d.attrHandle[n](e) : e[n] != null ? e[n] : e.getAttribute(n),
                            i = r + "",
                            s = t[2],
                            o = t[4];
                        return r == null ? s === "!=" : !s && h.attr ? r != null : s === "=" ? i === o : s === "*=" ? i.indexOf(o) >= 0 : s === "~=" ? (" " + i + " ").indexOf(o) >= 0 : o ? s === "!=" ? i !== o : s === "^=" ? i.indexOf(o) === 0 : s === "$=" ? i.substr(i.length - o.length) === o : s === "|=" ? i === o || i.substr(0, o.length + 1) === o + "-" : !1 : i && r !== !1
                    },
                    POS: function (e, t, n, r) {
                        var i = t[2],
                            s = d.setFilters[i];
                        if (s) return s(e, n, t, r)
                    }
                }
            }, v = d.match.POS,
            m = function (e, t) {
                return "\\" + (t - 0 + 1)
            };
        for (var g in d.match) d.match[g] = new RegExp(d.match[g].source + /(?![^\[]*\])(?![^\(]*\))/.source), d.leftMatch[g] = new RegExp(/(^(?:.|\r|\n)*?)/.source + d.match[g].source.replace(/\\(\d+)/g, m));
        d.match.globalPOS = v;
        var y = function (e, t) {
            return e = Array.prototype.slice.call(e, 0), t ? (t.push.apply(t, e), t) : e
        };
        try {
            Array.prototype.slice.call(n.documentElement.childNodes, 0)[0].nodeType
        } catch (b) {
            y = function (e, t) {
                var n = 0,
                    r = t || [];
                if (o.call(e) === "[object Array]") Array.prototype.push.apply(r, e);
                else if (typeof e.length == "number")
                    for (var i = e.length; n < i; n++) r.push(e[n]);
                else
                    for (; e[n]; n++) r.push(e[n]);
                return r
            }
        }
        var w, E;
        n.documentElement.compareDocumentPosition ? w = function (e, t) {
            return e === t ? (u = !0, 0) : !e.compareDocumentPosition || !t.compareDocumentPosition ? e.compareDocumentPosition ? -1 : 1 : e.compareDocumentPosition(t) & 4 ? -1 : 1
        } : (w = function (e, t) {
            if (e === t) return u = !0, 0;
            if (e.sourceIndex && t.sourceIndex) return e.sourceIndex - t.sourceIndex;
            var n, r, i = [],
                s = [],
                o = e.parentNode,
                a = t.parentNode,
                f = o;
            if (o === a) return E(e, t);
            if (!o) return -1;
            if (!a) return 1;
            while (f) i.unshift(f), f = f.parentNode;
            f = a;
            while (f) s.unshift(f), f = f.parentNode;
            n = i.length, r = s.length;
            for (var l = 0; l < n && l < r; l++)
                if (i[l] !== s[l]) return E(i[l], s[l]);
            return l === n ? E(e, s[l], -1) : E(i[l], t, 1)
        }, E = function (e, t, n) {
            if (e === t) return n;
            var r = e.nextSibling;
            while (r) {
                if (r === t) return -1;
                r = r.nextSibling
            }
            return 1
        }),
        function () {
            var e = n.createElement("div"),
                r = "script" + (new Date).getTime(),
                i = n.documentElement;
            e.innerHTML = "<a name='" + r + "'/>", i.insertBefore(e, i.firstChild), n.getElementById(r) && (d.find.ID = function (e, n, r) {
                if (typeof n.getElementById != "undefined" && !r) {
                    var i = n.getElementById(e[1]);
                    return i ? i.id === e[1] || typeof i.getAttributeNode != "undefined" && i.getAttributeNode("id").nodeValue === e[1] ? [i] : t : []
                }
            }, d.filter.ID = function (e, t) {
                var n = typeof e.getAttributeNode != "undefined" && e.getAttributeNode("id");
                return e.nodeType === 1 && n && n.nodeValue === t
            }), i.removeChild(e), i = e = null
        }(),
        function () {
            var e = n.createElement("div");
            e.appendChild(n.createComment("")), e.getElementsByTagName("*").length > 0 && (d.find.TAG = function (e, t) {
                var n = t.getElementsByTagName(e[1]);
                if (e[1] === "*") {
                    var r = [];
                    for (var i = 0; n[i]; i++) n[i].nodeType === 1 && r.push(n[i]);
                    n = r
                }
                return n
            }), e.innerHTML = "<a href='#'></a>", e.firstChild && typeof e.firstChild.getAttribute != "undefined" && e.firstChild.getAttribute("href") !== "#" && (d.attrHandle.href = function (e) {
                return e.getAttribute("href", 2)
            }), e = null
        }(), n.querySelectorAll && function () {
            var e = h,
                t = n.createElement("div"),
                r = "__sizzle__";
            t.innerHTML = "<p class='TEST'></p>";
            if (t.querySelectorAll && t.querySelectorAll(".TEST").length === 0) return;
            h = function (t, i, s, o) {
                i = i || n;
                if (!o && !h.isXML(i)) {
                    var u = /^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);
                    if (u && (i.nodeType === 1 || i.nodeType === 9)) {
                        if (u[1]) return y(i.getElementsByTagName(t), s);
                        if (u[2] && d.find.CLASS && i.getElementsByClassName) return y(i.getElementsByClassName(u[2]), s)
                    }
                    if (i.nodeType === 9) {
                        if (t === "body" && i.body) return y([i.body], s);
                        if (u && u[3]) {
                            var a = i.getElementById(u[3]);
                            if (!a || !a.parentNode) return y([], s);
                            if (a.id === u[3]) return y([a], s)
                        }
                        try {
                            return y(i.querySelectorAll(t), s)
                        } catch (f) {}
                    } else if (i.nodeType === 1 && i.nodeName.toLowerCase() !== "object") {
                        var l = i,
                            c = i.getAttribute("id"),
                            p = c || r,
                            v = i.parentNode,
                            m = /^\s*[+~]/.test(t);
                        c ? p = p.replace(/'/g, "\\$&") : i.setAttribute("id", p), m && v && (i = i.parentNode);
                        try {
                            if (!m || v) return y(i.querySelectorAll("[id='" + p + "'] " + t), s)
                        } catch (g) {} finally {
                            c || l.removeAttribute("id")
                        }
                    }
                }
                return e(t, i, s, o)
            };
            for (var i in e) h[i] = e[i];
            t = null
        }(),
        function () {
            var e = n.documentElement,
                t = e.matchesSelector || e.mozMatchesSelector || e.webkitMatchesSelector || e.msMatchesSelector;
            if (t) {
                var r = !t.call(n.createElement("div"), "div"),
                    i = !1;
                try {
                    t.call(n.documentElement, "[test!='']:sizzle")
                } catch (s) {
                    i = !0
                }
                h.matchesSelector = function (e, n) {
                    n = n.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']");
                    if (!h.isXML(e)) try {
                        if (i || !d.match.PSEUDO.test(n) && !/!=/.test(n)) {
                            var s = t.call(e, n);
                            if (s || !r || e.document && e.document.nodeType !== 11) return s
                        }
                    } catch (o) {}
                    return h(n, null, null, [e]).length > 0
                }
            }
        }(),
        function () {
            var e = n.createElement("div");
            e.innerHTML = "<div class='test e'></div><div class='test'></div>";
            if (!e.getElementsByClassName || e.getElementsByClassName("e").length === 0) return;
            e.lastChild.className = "e";
            if (e.getElementsByClassName("e").length === 1) return;
            d.order.splice(1, 0, "CLASS"), d.find.CLASS = function (e, t, n) {
                if (typeof t.getElementsByClassName != "undefined" && !n) return t.getElementsByClassName(e[1])
            }, e = null
        }(), n.documentElement.contains ? h.contains = function (e, t) {
            return e !== t && (e.contains ? e.contains(t) : !0)
        } : n.documentElement.compareDocumentPosition ? h.contains = function (e, t) {
            return !!(e.compareDocumentPosition(t) & 16)
        } : h.contains = function () {
            return !1
        }, h.isXML = function (e) {
            var t = (e ? e.ownerDocument || e : 0).documentElement;
            return t ? t.nodeName !== "HTML" : !1
        };
        var T = function (e, t, n) {
            var r, i = [],
                s = "",
                o = t.nodeType ? [t] : t;
            while (r = d.match.PSEUDO.exec(e)) s += r[0], e = e.replace(d.match.PSEUDO, "");
            e = d.relative[e] ? e + "*" : e;
            for (var u = 0, a = o.length; u < a; u++) h(e, o[u], i, n);
            return h.filter(s, i)
        };
        h.attr = s.attr, h.selectors.attrMap = {}, s.find = h, s.expr = h.selectors, s.expr[":"] = s.expr.filters, s.unique = h.uniqueSort, s.text = h.getText, s.isXMLDoc = h.isXML, s.contains = h.contains
    }();
    var j = /Until$/,
        F = /^(?:parents|prevUntil|prevAll)/,
        I = /,/,
        q = /^.[^:#\[\.,]*$/,
        R = Array.prototype.slice,
        U = s.expr.match.globalPOS,
        z = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    s.fn.extend({
            find: function (e) {
                var t = this,
                    n, r;
                if (typeof e != "string") return s(e).filter(function () {
                    for (n = 0, r = t.length; n < r; n++)
                        if (s.contains(t[n], this)) return !0
                });
                var i = this.pushStack("", "find", e),
                    o, u, a;
                for (n = 0, r = this.length; n < r; n++) {
                    o = i.length, s.find(e, this[n], i);
                    if (n > 0)
                        for (u = o; u < i.length; u++)
                            for (a = 0; a < o; a++)
                                if (i[a] === i[u]) {
                                    i.splice(u--, 1);
                                    break
                                }
                }
                return i
            },
            has: function (e) {
                var t = s(e);
                return this.filter(function () {
                    for (var e = 0, n = t.length; e < n; e++)
                        if (s.contains(this, t[e])) return !0
                })
            },
            not: function (e) {
                return this.pushStack(X(this, e, !1), "not", e)
            },
            filter: function (e) {
                return this.pushStack(X(this, e, !0), "filter", e)
            },
            is: function (e) {
                return !!e && (typeof e == "string" ? U.test(e) ? s(e, this.context).index(this[0]) >= 0 : s.filter(e, this).length > 0 : this.filter(e).length > 0)
            },
            closest: function (e, t) {
                var n = [],
                    r, i, o = this[0];
                if (s.isArray(e)) {
                    var u = 1;
                    while (o && o.ownerDocument && o !== t) {
                        for (r = 0; r < e.length; r++) s(o).is(e[r]) && n.push({
                                selector: e[r],
                                elem: o,
                                level: u
                            });
                        o = o.parentNode, u++
                    }
                    return n
                }
                var a = U.test(e) || typeof e != "string" ? s(e, t || this.context) : 0;
                for (r = 0, i = this.length; r < i; r++) {
                    o = this[r];
                    while (o) {
                        if (a ? a.index(o) > -1 : s.find.matchesSelector(o, e)) {
                            n.push(o);
                            break
                        }
                        o = o.parentNode;
                        if (!o || !o.ownerDocument || o === t || o.nodeType === 11) break
                    }
                }
                return n = n.length > 1 ? s.unique(n) : n, this.pushStack(n, "closest", e)
            },
            index: function (e) {
                return e ? typeof e == "string" ? s.inArray(this[0], s(e)) : s.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.prevAll().length : -1
            },
            add: function (e, t) {
                var n = typeof e == "string" ? s(e, t) : s.makeArray(e && e.nodeType ? [e] : e),
                    r = s.merge(this.get(), n);
                return this.pushStack(W(n[0]) || W(r[0]) ? r : s.unique(r))
            },
            andSelf: function () {
                return this.add(this.prevObject)
            }
        }), s.each({
            parent: function (e) {
                var t = e.parentNode;
                return t && t.nodeType !== 11 ? t : null
            },
            parents: function (e) {
                return s.dir(e, "parentNode")
            },
            parentsUntil: function (e, t, n) {
                return s.dir(e, "parentNode", n)
            },
            next: function (e) {
                return s.nth(e, 2, "nextSibling")
            },
            prev: function (e) {
                return s.nth(e, 2, "previousSibling")
            },
            nextAll: function (e) {
                return s.dir(e, "nextSibling")
            },
            prevAll: function (e) {
                return s.dir(e, "previousSibling")
            },
            nextUntil: function (e, t, n) {
                return s.dir(e, "nextSibling", n)
            },
            prevUntil: function (e, t, n) {
                return s.dir(e, "previousSibling", n)
            },
            siblings: function (e) {
                return s.sibling((e.parentNode || {}).firstChild, e)
            },
            children: function (e) {
                return s.sibling(e.firstChild)
            },
            contents: function (e) {
                return s.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : s.makeArray(e.childNodes)
            }
        }, function (e, t) {
            s.fn[e] = function (n, r) {
                var i = s.map(this, t, n);
                return j.test(e) || (r = n), r && typeof r == "string" && (i = s.filter(r, i)), i = this.length > 1 && !z[e] ? s.unique(i) : i, (this.length > 1 || I.test(r)) && F.test(e) && (i = i.reverse()), this.pushStack(i, e, R.call(arguments).join(","))
            }
        }), s.extend({
            filter: function (e, t, n) {
                return n && (e = ":not(" + e + ")"), t.length === 1 ? s.find.matchesSelector(t[0], e) ? [t[0]] : [] : s.find.matches(e, t)
            },
            dir: function (e, n, r) {
                var i = [],
                    o = e[n];
                while (o && o.nodeType !== 9 && (r === t || o.nodeType !== 1 || !s(o).is(r))) o.nodeType === 1 && i.push(o), o = o[n];
                return i
            },
            nth: function (e, t, n, r) {
                t = t || 1;
                var i = 0;
                for (; e; e = e[n])
                    if (e.nodeType === 1 && ++i === t) break;
                return e
            },
            sibling: function (e, t) {
                var n = [];
                for (; e; e = e.nextSibling) e.nodeType === 1 && e !== t && n.push(e);
                return n
            }
        });
    var $ = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
        J = / jQuery\d+="(?:\d+|null)"/g,
        K = /^\s+/,
        Q = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,
        G = /<([\w:]+)/,
        Y = /<tbody/i,
        Z = /<|&#?\w+;/,
        et = /<(?:script|style)/i,
        tt = /<(?:script|object|embed|option|style)/i,
        nt = new RegExp("<(?:" + $ + ")[\\s/>]", "i"),
        rt = /checked\s*(?:[^=]|=\s*.checked.)/i,
        it = /\/(java|ecma)script/i,
        st = /^\s*<!(?:\[CDATA\[|\-\-)/,
        ot = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            legend: [1, "<fieldset>", "</fieldset>"],
            thead: [1, "<table>", "</table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
            area: [1, "<map>", "</map>"],
            _default: [0, "", ""]
        }, ut = V(n);
    ot.optgroup = ot.option, ot.tbody = ot.tfoot = ot.colgroup = ot.caption = ot.thead, ot.th = ot.td, s.support.htmlSerialize || (ot._default = [1, "div<div>", "</div>"]), s.fn.extend({
            text: function (e) {
                return s.access(this, function (e) {
                    return e === t ? s.text(this) : this.empty().append((this[0] && this[0].ownerDocument || n).createTextNode(e))
                }, null, e, arguments.length)
            },
            wrapAll: function (e) {
                if (s.isFunction(e)) return this.each(function (t) {
                    s(this).wrapAll(e.call(this, t))
                });
                if (this[0]) {
                    var t = s(e, this[0].ownerDocument).eq(0).clone(!0);
                    this[0].parentNode && t.insertBefore(this[0]), t.map(function () {
                        var e = this;
                        while (e.firstChild && e.firstChild.nodeType === 1) e = e.firstChild;
                        return e
                    }).append(this)
                }
                return this
            },
            wrapInner: function (e) {
                return s.isFunction(e) ? this.each(function (t) {
                    s(this).wrapInner(e.call(this, t))
                }) : this.each(function () {
                    var t = s(this),
                        n = t.contents();
                    n.length ? n.wrapAll(e) : t.append(e)
                })
            },
            wrap: function (e) {
                var t = s.isFunction(e);
                return this.each(function (n) {
                    s(this).wrapAll(t ? e.call(this, n) : e)
                })
            },
            unwrap: function () {
                return this.parent().each(function () {
                    s.nodeName(this, "body") || s(this).replaceWith(this.childNodes)
                }).end()
            },
            append: function () {
                return this.domManip(arguments, !0, function (e) {
                    this.nodeType === 1 && this.appendChild(e)
                })
            },
            prepend: function () {
                return this.domManip(arguments, !0, function (e) {
                    this.nodeType === 1 && this.insertBefore(e, this.firstChild)
                })
            },
            before: function () {
                if (this[0] && this[0].parentNode) return this.domManip(arguments, !1, function (e) {
                    this.parentNode.insertBefore(e, this)
                });
                if (arguments.length) {
                    var e = s.clean(arguments);
                    return e.push.apply(e, this.toArray()), this.pushStack(e, "before", arguments)
                }
            },
            after: function () {
                if (this[0] && this[0].parentNode) return this.domManip(arguments, !1, function (e) {
                    this.parentNode.insertBefore(e, this.nextSibling)
                });
                if (arguments.length) {
                    var e = this.pushStack(this, "after", arguments);
                    return e.push.apply(e, s.clean(arguments)), e
                }
            },
            remove: function (e, t) {
                for (var n = 0, r;
                    (r = this[n]) != null; n++)
                    if (!e || s.filter(
                            e, [r]).length)!t && r.nodeType === 1 && (s.cleanData(r.getElementsByTagName("*")), s.cleanData([r])), r.parentNode && r.parentNode.removeChild(r);
                return this
            },
            empty: function () {
                for (var e = 0, t;
                    (t = this[e]) != null; e++) {
                    t.nodeType === 1 && s.cleanData(t.getElementsByTagName("*"));
                    while (t.firstChild) t.removeChild(t.firstChild)
                }
                return this
            },
            clone: function (e, t) {
                return e = e == null ? !1 : e, t = t == null ? e : t, this.map(function () {
                    return s.clone(this, e, t)
                })
            },
            html: function (e) {
                return s.access(this, function (e) {
                    var n = this[0] || {}, r = 0,
                        i = this.length;
                    if (e === t) return n.nodeType === 1 ? n.innerHTML.replace(J, "") : null;
                    if (typeof e == "string" && !et.test(e) && (s.support.leadingWhitespace || !K.test(e)) && !ot[(G.exec(e) || ["", ""])[1].toLowerCase()]) {
                        e = e.replace(Q, "<$1></$2>");
                        try {
                            for (; r < i; r++) n = this[r] || {}, n.nodeType === 1 && (s.cleanData(n.getElementsByTagName("*")), n.innerHTML = e);
                            n = 0
                        } catch (o) {}
                    }
                    n && this.empty().append(e)
                }, null, e, arguments.length)
            },
            replaceWith: function (e) {
                return this[0] && this[0].parentNode ? s.isFunction(e) ? this.each(function (t) {
                    var n = s(this),
                        r = n.html();
                    n.replaceWith(e.call(this, t, r))
                }) : (typeof e != "string" && (e = s(e).detach()), this.each(function () {
                            var t = this.nextSibling,
                                n = this.parentNode;
                            s(this).remove(), t ? s(t).before(e) : s(n).append(e)
                        })) : this.length ? this.pushStack(s(s.isFunction(e) ? e() : e), "replaceWith", e) : this
            },
            detach: function (e) {
                return this.remove(e, !0)
            },
            domManip: function (e, n, r) {
                var i, o, u, a, f = e[0],
                    l = [];
                if (!s.support.checkClone && arguments.length === 3 && typeof f == "string" && rt.test(f)) return this.each(function () {
                    s(this).domManip(e, n, r, !0)
                });
                if (s.isFunction(f)) return this.each(function (i) {
                    var o = s(this);
                    e[0] = f.call(this, i, n ? o.html() : t), o.domManip(e, n, r)
                });
                if (this[0]) {
                    a = f && f.parentNode, s.support.parentNode && a && a.nodeType === 11 && a.childNodes.length === this.length ? i = {
                        fragment: a
                    } : i = s.buildFragment(e, this, l), u = i.fragment, u.childNodes.length === 1 ? o = u = u.firstChild : o = u.firstChild;
                    if (o) {
                        n = n && s.nodeName(o, "tr");
                        for (var c = 0, h = this.length, p = h - 1; c < h; c++) r.call(n ? at(this[c], o) : this[c], i.cacheable || h > 1 && c < p ? s.clone(u, !0, !0) : u)
                    }
                    l.length && s.each(l, function (e, t) {
                        t.src ? s.ajax({
                                type: "GET",
                                global: !1,
                                url: t.src,
                                async: !1,
                                dataType: "script"
                            }) : s.globalEval((t.text || t.textContent || t.innerHTML || "").replace(st, "/*$0*/")), t.parentNode && t.parentNode.removeChild(t)
                    })
                }
                return this
            }
        }), s.buildFragment = function (e, t, r) {
        var i, o, u, a, f = e[0];
        return t && t[0] && (a = t[0].ownerDocument || t[0]), a.createDocumentFragment || (a = n), e.length === 1 && typeof f == "string" && f.length < 512 && a === n && f.charAt(0) === "<" && !tt.test(f) && (s.support.checkClone || !rt.test(f)) && (s.support.html5Clone || !nt.test(f)) && (o = !0, u = s.fragments[f], u && u !== 1 && (i = u)), i || (i = a.createDocumentFragment(), s.clean(e, a, i, r)), o && (s.fragments[f] = u ? i : 1), {
            fragment: i,
            cacheable: o
        }
    }, s.fragments = {}, s.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function (e, t) {
            s.fn[e] = function (n) {
                var r = [],
                    i = s(n),
                    o = this.length === 1 && this[0].parentNode;
                if (o && o.nodeType === 11 && o.childNodes.length === 1 && i.length === 1) return i[t](this[0]), this;
                for (var u = 0, a = i.length; u < a; u++) {
                    var f = (u > 0 ? this.clone(!0) : this).get();
                    s(i[u])[t](f), r = r.concat(f)
                }
                return this.pushStack(r, e, i.selector)
            }
        }), s.extend({
            clone: function (e, t, n) {
                var r, i, o, u = s.support.html5Clone || s.isXMLDoc(e) || !nt.test("<" + e.nodeName + ">") ? e.cloneNode(!0) : dt(e);
                if ((!s.support.noCloneEvent || !s.support.noCloneChecked) && (e.nodeType === 1 || e.nodeType === 11) && !s.isXMLDoc(e)) {
                    lt(e, u), r = ct(e), i = ct(u);
                    for (o = 0; r[o]; ++o) i[o] && lt(r[o], i[o])
                }
                if (t) {
                    ft(e, u);
                    if (n) {
                        r = ct(e), i = ct(u);
                        for (o = 0; r[o]; ++o) ft(r[o], i[o])
                    }
                }
                return r = i = null, u
            },
            clean: function (e, t, r, i) {
                var o, u, a, f = [];
                t = t || n, typeof t.createElement == "undefined" && (t = t.ownerDocument || t[0] && t[0].ownerDocument || n);
                for (var l = 0, c;
                    (c = e[l]) != null; l++) {
                    typeof c == "number" && (c += "");
                    if (!c) continue;
                    if (typeof c == "string")
                        if (!Z.test(c)) c = t.createTextNode(c);
                        else {
                            c = c.replace(Q, "<$1></$2>");
                            var h = (G.exec(c) || ["", ""])[1].toLowerCase(),
                                p = ot[h] || ot._default,
                                d = p[0],
                                v = t.createElement("div"),
                                m = ut.childNodes,
                                g;
                            t === n ? ut.appendChild(v) : V(t).appendChild(v), v.innerHTML = p[1] + c + p[2];
                            while (d--) v = v.lastChild;
                            if (!s.support.tbody) {
                                var y = Y.test(c),
                                    b = h === "table" && !y ? v.firstChild && v.firstChild.childNodes : p[1] === "<table>" && !y ? v.childNodes : [];
                                for (a = b.length - 1; a >= 0; --a) s.nodeName(b[a], "tbody") && !b[a].childNodes.length && b[a].parentNode.removeChild(b[a])
                            }!s.support.leadingWhitespace && K.test(c) && v.insertBefore(t.createTextNode(K.exec(c)[0]), v.firstChild), c = v.childNodes, v && (v.parentNode.removeChild(v), m.length > 0 && (g = m[m.length - 1], g && g.parentNode && g.parentNode.removeChild(g)))
                        }
                    var w;
                    if (!s.support.appendChecked)
                        if (c[0] && typeof (w = c.length) == "number")
                            for (a = 0; a < w; a++) pt(c[a]);
                        else pt(c);
                    c.nodeType ? f.push(c) : f = s.merge(f, c)
                }
                if (r) {
                    o = function (e) {
                        return !e.type || it.test(e.type)
                    };
                    for (l = 0; f[l]; l++) {
                        u = f[l];
                        if (i && s.nodeName(u, "script") && (!u.type || it.test(u.type))) i.push(u.parentNode ? u.parentNode.removeChild(u) : u);
                        else {
                            if (u.nodeType === 1) {
                                var E = s.grep(u.getElementsByTagName("script"), o);
                                f.splice.apply(f, [l + 1, 0].concat(E))
                            }
                            r.appendChild(u)
                        }
                    }
                }
                return f
            },
            cleanData: function (e) {
                var t, n, r = s.cache,
                    i = s.event.special,
                    o = s.support.deleteExpando;
                for (var u = 0, a;
                    (a = e[u]) != null; u++) {
                    if (a.nodeName && s.noData[a.nodeName.toLowerCase()]) continue;
                    n = a[s.expando];
                    if (n) {
                        t = r[n];
                        if (t && t.events) {
                            for (var f in t.events) i[f] ? s.event.remove(a, f) : s.removeEvent(a, f, t.handle);
                            t.handle && (t.handle.elem = null)
                        }
                        o ? delete a[s.expando] : a.removeAttribute && a.removeAttribute(s.expando), delete r[n]
                    }
                }
            }
        });
    var vt = /alpha\([^)]*\)/i,
        mt = /opacity=([^)]*)/,
        gt = /([A-Z]|^ms)/g,
        yt = /^[\-+]?(?:\d*\.)?\d+$/i,
        bt = /^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,
        wt = /^([\-+])=([\-+.\de]+)/,
        Et = /^margin/,
        St = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        }, xt = ["Top", "Right", "Bottom", "Left"],
        Tt, Nt, Ct;
    s.fn.css = function (e, n) {
        return s.access(this, function (e, n, r) {
            return r !== t ? s.style(e, n, r) : s.css(e, n)
        }, e, n, arguments.length > 1)
    }, s.extend({
            cssHooks: {
                opacity: {
                    get: function (e, t) {
                        if (t) {
                            var n = Tt(e, "opacity");
                            return n === "" ? "1" : n
                        }
                        return e.style.opacity
                    }
                }
            },
            cssNumber: {
                fillOpacity: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                "float": s.support.cssFloat ? "cssFloat" : "styleFloat"
            },
            style: function (e, n, r, i) {
                if (!e || e.nodeType === 3 || e.nodeType === 8 || !e.style) return;
                var o, u, a = s.camelCase(n),
                    f = e.style,
                    l = s.cssHooks[a];
                n = s.cssProps[a] || a;
                if (r === t) return l && "get" in l && (o = l.get(e, !1, i)) !== t ? o : f[n];
                u = typeof r, u === "string" && (o = wt.exec(r)) && (r = +(o[1] + 1) * +o[2] + parseFloat(s.css(e, n)), u = "number");
                if (r == null || u === "number" && isNaN(r)) return;
                u === "number" && !s.cssNumber[a] && (r += "px");
                if (!l || !("set" in l) || (r = l.set(e, r)) !== t) try {
                    f[n] = r
                } catch (c) {}
            },
            css: function (e, n, r) {
                var i, o;
                n = s.camelCase(n), o = s.cssHooks[n], n = s.cssProps[n] || n, n === "cssFloat" && (n = "float");
                if (o && "get" in o && (i = o.get(e, !0, r)) !== t) return i;
                if (Tt) return Tt(e, n)
            },
            swap: function (e, t, n) {
                var r = {}, i, s;
                for (s in t) r[s] = e.style[s], e.style[s] = t[s];
                i = n.call(e);
                for (s in t) e.style[s] = r[s];
                return i
            }
        }), s.curCSS = s.css, n.defaultView && n.defaultView.getComputedStyle && (Nt = function (e, t) {
            var n, r, i, o, u = e.style;
            return t = t.replace(gt, "-$1").toLowerCase(), (r = e.ownerDocument.defaultView) && (i = r.getComputedStyle(e, null)) && (n = i.getPropertyValue(t), n === "" && !s.contains(e.ownerDocument.documentElement, e) && (n = s.style(e, t))), !s.support.pixelMargin && i && Et.test(t) && bt.test(n) && (o = u.width, u.width = n, n = i.width, u.width = o), n
        }), n.documentElement.currentStyle && (Ct = function (e, t) {
            var n, r, i, s = e.currentStyle && e.currentStyle[t],
                o = e.style;
            return s == null && o && (i = o[t]) && (s = i), bt.test(s) && (n = o.left, r = e.runtimeStyle && e.runtimeStyle.left, r && (e.runtimeStyle.left = e.currentStyle.left), o.left = t === "fontSize" ? "1em" : s, s = o.pixelLeft + "px", o.left = n, r && (e.runtimeStyle.left = r)), s === "" ? "auto" : s
        }), Tt = Nt || Ct, s.each(["height", "width"], function (e, t) {
            s.cssHooks[t] = {
                get: function (e, n, r) {
                    if (n) return e.offsetWidth !== 0 ? kt(e, t, r) : s.swap(e, St, function () {
                        return kt(e, t, r)
                    })
                },
                set: function (e, t) {
                    return yt.test(t) ? t + "px" : t
                }
            }
        }), s.support.opacity || (s.cssHooks.opacity = {
            get: function (e, t) {
                return mt.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? parseFloat(RegExp.$1) / 100 + "" : t ? "1" : ""
            },
            set: function (e, t) {
                var n = e.style,
                    r = e.currentStyle,
                    i = s.isNumeric(t) ? "alpha(opacity=" + t * 100 + ")" : "",
                    o = r && r.filter || n.filter || "";
                n.zoom = 1;
                if (t >= 1 && s.trim(o.replace(vt, "")) === "") {
                    n.removeAttribute("filter");
                    if (r && !r.filter) return
                }
                n.filter = vt.test(o) ? o.replace(vt, i) : o + " " + i
            }
        }), s(function () {
            s.support.reliableMarginRight || (s.cssHooks.marginRight = {
                    get: function (e, t) {
                        return s.swap(e, {
                                display: "inline-block"
                            }, function () {
                                return t ? Tt(e, "margin-right") : e.style.marginRight
                            })
                    }
                })
        }), s.expr && s.expr.filters && (s.expr.filters.hidden = function (e) {
            var t = e.offsetWidth,
                n = e.offsetHeight;
            return t === 0 && n === 0 || !s.support.reliableHiddenOffsets && (e.style && e.style.display || s.css(e, "display")) === "none"
        }, s.expr.filters.visible = function (e) {
            return !s.expr.filters.hidden(e)
        }), s.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function (e, t) {
            s.cssHooks[e + t] = {
                expand: function (n) {
                    var r, i = typeof n == "string" ? n.split(" ") : [n],
                        s = {};
                    for (r = 0; r < 4; r++) s[e + xt[r] + t] = i[r] || i[r - 2] || i[0];
                    return s
                }
            }
        });
    var Lt = /%20/g,
        At = /\[\]$/,
        Ot = /\r?\n/g,
        Mt = /#.*$/,
        _t = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg,
        Dt = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
        Pt = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,
        Ht = /^(?:GET|HEAD)$/,
        Bt = /^\/\//,
        jt = /\?/,
        Ft = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
        It = /^(?:select|textarea)/i,
        qt = /\s+/,
        Rt = /([?&])_=[^&]*/,
        Ut = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,
        zt = s.fn.load,
        Wt = {}, Xt = {}, Vt, $t, Jt = ["*/"] + ["*"];
    try {
        Vt = i.href
    } catch (Kt) {
        Vt = n.createElement("a"), Vt.href = "", Vt = Vt.href
    }
    $t = Ut.exec(Vt.toLowerCase()) || [], s.fn.extend({
            load: function (e, n, r) {
                if (typeof e != "string" && zt) return zt.apply(this, arguments);
                if (!this.length) return this;
                var i = e.indexOf(" ");
                if (i >= 0) {
                    var o = e.slice(i, e.length);
                    e = e.slice(0, i)
                }
                var u = "GET";
                n && (s.isFunction(n) ? (r = n, n = t) : typeof n == "object" && (n = s.param(n, s.ajaxSettings.traditional), u = "POST"));
                var a = this;
                return s.ajax({
                        url: e,
                        type: u,
                        dataType: "html",
                        data: n,
                        complete: function (e, t, n) {
                            n = e.responseText, e.isResolved() && (e.done(function (e) {
                                        n = e
                                    }), a.html(o ? s("<div>").append(n.replace(Ft, "")).find(o) : n)), r && a.each(r, [n, t, e])
                        }
                    }), this
            },
            serialize: function () {
                return s.param(this.serializeArray())
            },
            serializeArray: function () {
                return this.map(function () {
                    return this.elements ? s.makeArray(this.elements) : this
                }).filter(function () {
                    return this.name && !this.disabled && (this.checked || It.test(this.nodeName) || Dt.test(this.type))
                }).map(function (e, t) {
                    var n = s(this).val();
                    return n == null ? null : s.isArray(n) ? s.map(n, function (e, n) {
                        return {
                            name: t.name,
                            value: e.replace(Ot, "\r\n")
                        }
                    }) : {
                        name: t.name,
                        value: n.replace(Ot, "\r\n")
                    }
                }).get()
            }
        }), s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (e, t) {
            s.fn[t] = function (e) {
                return this.on(t, e)
            }
        }), s.each(["get", "post"], function (e, n) {
            s[n] = function (e, r, i, o) {
                return s.isFunction(r) && (o = o || i, i = r, r = t), s.ajax({
                        type: n,
                        url: e,
                        data: r,
                        success: i,
                        dataType: o
                    })
            }
        }), s.extend({
            getScript: function (e, n) {
                return s.get(e, t, n, "script")
            },
            getJSON: function (e, t, n) {
                return s.get(e, t, n, "json")
            },
            ajaxSetup: function (e, t) {
                return t ? Yt(e, s.ajaxSettings) : (t = e, e = s.ajaxSettings), Yt(e, t), e
            },
            ajaxSettings: {
                url: Vt,
                isLocal: Pt.test($t[1]),
                global: !0,
                type: "GET",
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                processData: !0,
                async: !0,
                accepts: {
                    xml: "application/xml, text/xml",
                    html: "text/html",
                    text: "text/plain",
                    json: "application/json, text/javascript",
                    "*": Jt
                },
                contents: {
                    xml: /xml/,
                    html: /html/,
                    json: /json/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText"
                },
                converters: {
                    "* text": e.String,
                    "text html": !0,
                    "text json": s.parseJSON,
                    "text xml": s.parseXML
                },
                flatOptions: {
                    context: !0,
                    url: !0
                }
            },
            ajaxPrefilter: Qt(Wt),
            ajaxTransport: Qt(Xt),
            ajax: function (e, n) {
                function S(e, n, c, h) {
                    if (y === 2) return;
                    y = 2, m && clearTimeout(m), v = t, p = h || "", E.readyState = e > 0 ? 4 : 0;
                    var d, g, w, S = n,
                        x = c ? en(r, E, c) : t,
                        T, N;
                    if (e >= 200 && e < 300 || e === 304) {
                        if (r.ifModified) {
                            if (T = E.getResponseHeader("Last-Modified")) s.lastModified[l] = T;
                            if (N = E.getResponseHeader("Etag")) s.etag[l] = N
                        }
                        if (e === 304) S = "notmodified", d = !0;
                        else try {
                            g = tn(r, x), S = "success", d = !0
                        } catch (C) {
                            S = "parsererror", w = C
                        }
                    } else {
                        w = S;
                        if (!S || e) S = "error", e < 0 && (e = 0)
                    }
                    E.status = e, E.statusText = "" + (n || S), d ? u.resolveWith(i, [g, S, E]) : u.rejectWith(i, [E, S, w]), E.statusCode(f), f = t, b && o.trigger("ajax" + (d ? "Success" : "Error"), [E, r, d ? g : w]), a.fireWith(i, [E, S]), b && (o.trigger("ajaxComplete", [E, r]), --s.active || s.event.trigger("ajaxStop"))
                }
                typeof e == "object" && (n = e, e = t), n = n || {};
                var r = s.ajaxSetup({}, n),
                    i = r.context || r,
                    o = i !== r && (i.nodeType || i instanceof s) ? s(i) : s.event,
                    u = s.Deferred(),
                    a = s.Callbacks("once memory"),
                    f = r.statusCode || {}, l, c = {}, h = {}, p, d, v, m, g, y = 0,
                    b, w, E = {
                        readyState: 0,
                        setRequestHeader: function (e, t) {
                            if (!y) {
                                var n = e.toLowerCase();
                                e = h[n] = h[n] || e, c[e] = t
                            }
                            return this
                        },
                        getAllResponseHeaders: function () {
                            return y === 2 ? p : null
                        },
                        getResponseHeader: function (e) {
                            var n;
                            if (y === 2) {
                                if (!d) {
                                    d = {};
                                    while (n = _t.exec(p)) d[n[1].toLowerCase()] = n[2]
                                }
                                n = d[e.toLowerCase()]
                            }
                            return n === t ? null : n
                        },
                        overrideMimeType: function (e) {
                            return y || (r.mimeType = e), this
                        },
                        abort: function (e) {
                            return e = e || "abort", v && v.abort(e), S(0, e), this
                        }
                    };
                u.promise(E), E.success = E.done, E.error = E.fail, E.complete = a.add, E.statusCode = function (e) {
                    if (e) {
                        var t;
                        if (y < 2)
                            for (t in e) f[t] = [f[t], e[t]];
                        else t = e[E.status], E.then(t, t)
                    }
                    return this
                }, r.url = ((e || r.url) + "").replace(Mt, "").replace(Bt, $t[1] + "//"), r.dataTypes = s.trim(r.dataType || "*").toLowerCase().split(qt), r.crossDomain == null && (g = Ut.exec(r.url.toLowerCase()), r.crossDomain = !(!g || g[1] == $t[1] && g[2] == $t[2] && (g[3] || (g[1] === "http:" ? 80 : 443)) == ($t[3] || ($t[1] === "http:" ? 80 : 443)))), r.data && r.processData && typeof r.data != "string" && (r.data = s.param(r.data, r.traditional)), Gt(Wt, r, n, E);
                if (y === 2) return !1;
                b = r.global, r.type = r.type.toUpperCase(), r.hasContent = !Ht.test(r.type), b && s.active++ === 0 && s.event.trigger("ajaxStart");
                if (!r.hasContent) {
                    r.data && (r.url += (jt.test(r.url) ? "&" : "?") + r.data, delete r.data), l = r.url;
                    if (r.cache === !1) {
                        var x = s.now(),
                            T = r.url.replace(Rt, "$1_=" + x);
                        r.url = T + (T === r.url ? (jt.test(r.url) ? "&" : "?") + "_=" + x : "")
                    }
                }(r.data && r.hasContent && r.contentType !== !1 || n.contentType) && E.setRequestHeader("Content-Type", r.contentType), r.ifModified && (l = l || r.url, s.lastModified[l] && E.setRequestHeader("If-Modified-Since", s.lastModified[l]), s.etag[l] && E.setRequestHeader("If-None-Match", s.etag[l])), E.setRequestHeader("Accept", r.dataTypes[0] && r.accepts[r.dataTypes[0]] ? r.accepts[r.dataTypes[0]] + (r.dataTypes[0] !== "*" ? ", " + Jt + "; q=0.01" : "") : r.accepts["*"]);
                for (w in r.headers) E.setRequestHeader(w, r.headers[w]);
                if (!r.beforeSend || r.beforeSend.call(i, E, r) !== !1 && y !== 2) {
                    for (w in {
                            success: 1,
                            error: 1,
                            complete: 1
                        }) E[w](r[w]);
                    v = Gt(Xt, r, n, E);
                    if (!v) S(-1, "No Transport");
                    else {
                        E.readyState = 1, b && o.trigger("ajaxSend", [E, r]), r.async && r.timeout > 0 && (m = setTimeout(function () {
                                    E.abort("timeout")
                                }, r.timeout));
                        try {
                            y = 1, v.send(c, S)
                        } catch (N) {
                            if (!(y < 2)) throw N;
                            S(-1, N)
                        }
                    }
                    return E
                }
                return E.abort(), !1
            },
            param: function (e, n) {
                var r = [],
                    i = function (e, t) {
                        t = s.isFunction(t) ? t() : t, r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
                    };
                n === t && (n = s.ajaxSettings.traditional);
                if (s.isArray(e) || e.jquery && !s.isPlainObject(e)) s.each(e, function () {
                    i(this.name, this.value)
                });
                else
                    for (var o in e) Zt(o, e[o], n, i);
                return r.join("&").replace(Lt, "+")
            }
        }), s.extend({
            active: 0,
            lastModified: {},
            etag: {}
        });
    var nn = s.now(),
        rn = /(\=)\?(&|$)|\?\?/i;
    s.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function () {
                return s.expando + "_" + nn++
            }
        }), s.ajaxPrefilter("json jsonp", function (t, n, r) {
            var i = typeof t.data == "string" && /^application\/x\-www\-form\-urlencoded/.test(t.contentType);
            if (t.dataTypes[0] === "jsonp" || t.jsonp !== !1 && (rn.test(t.url) || i && rn.test(t.data))) {
                var o, u = t.jsonpCallback = s.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback,
                    a = e[u],
                    f = t.url,
                    l = t.data,
                    c = "$1" + u + "$2";
                return t.jsonp !== !1 && (f = f.replace(rn, c), t.url === f && (i && (l = l.replace(rn, c)), t.data === l && (f += (/\?/.test(f) ? "&" : "?") + t.jsonp + "=" + u))), t.url = f, t.data = l, e[u] = function (e) {
                    o = [e]
                }, r.always(function () {
                    e[u] = a, o && s.isFunction(a) && e[u](o[0])
                }), t.converters["script json"] = function () {
                    return o || s.error(u + " was not called"), o[0]
                }, t.dataTypes[0] = "json", "script"
            }
        }), s.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /javascript|ecmascript/
            },
            converters: {
                "text script": function (e) {
                    return s.globalEval(e), e
                }
            }
        }), s.ajaxPrefilter("script", function (e) {
            e.cache === t && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1)
        }), s.ajaxTransport("script", function (e) {
            if (e.crossDomain) {
                var r, i = n.head || n.getElementsByTagName("head")[0] || n.documentElement;
                return {
                    send: function (s, o) {
                        r = n.createElement("script"), r.async = "async", e.scriptCharset && (r.charset = e.scriptCharset), r.src = e.url, r.onload = r.onreadystatechange = function (e, n) {
                            if (n || !r.readyState || /loaded|complete/.test(r.readyState)) r.onload = r.onreadystatechange = null, i && r.parentNode && i.removeChild(r), r = t, n || o(200, "success")
                        }, i.insertBefore(r, i.firstChild)
                    },
                    abort: function () {
                        r && r.onload(0, 1)
                    }
                }
            }
        });
    var sn = e.ActiveXObject ? function () {
            for (var e in un) un[e](0, 1)
        } : !1,
        on = 0,
        un;
    s.ajaxSettings.xhr = e.ActiveXObject ? function () {
        return !this.isLocal && an() || fn()
    } : an,
    function (e) {
        s.extend(s.support, {
                ajax: !! e,
                cors: !! e && "withCredentials" in e
            })
    }(s.ajaxSettings.xhr()), s.support.ajax && s.ajaxTransport(function (n) {
        if (!n.crossDomain || s.support.cors) {
            var r;
            return {
                send: function (i, o) {
                    var u = n.xhr(),
                        a, f;
                    n.username ? u.open(n.type, n.url, n.async, n.username, n.password) : u.open(n.type, n.url, n.async);
                    if (n.xhrFields)
                        for (f in n.xhrFields) u[f] = n.xhrFields[f];
                    n.mimeType && u.overrideMimeType && u.overrideMimeType(n.mimeType), !n.crossDomain && !i["X-Requested-With"] && (i["X-Requested-With"] = "XMLHttpRequest");
                    try {
                        for (f in i) u.setRequestHeader(f, i[f])
                    } catch (l) {}
                    u.send(n.hasContent && n.data || null), r = function (e, i) {
                        var f, l, c, h, p;
                        try {
                            if (r && (i || u.readyState === 4)) {
                                r = t, a && (u.onreadystatechange = s.noop, sn && delete un[a]);
                                if (i) u.readyState !== 4 && u.abort();
                                else {
                                    f = u.status, c = u.getAllResponseHeaders(), h = {}, p = u.responseXML, p && p.documentElement && (h.xml = p);
                                    try {
                                        h.text = u.responseText
                                    } catch (e) {}
                                    try {
                                        l = u.statusText
                                    } catch (d) {
                                        l = ""
                                    }!f && n.isLocal && !n.crossDomain ? f = h.text ? 200 : 404 : f === 1223 && (f = 204)
                                }
                            }
                        } catch (v) {
                            i || o(-1, v)
                        }
                        h && o(f, l, h, c)
                    }, !n.async || u.readyState === 4 ? r() : (a = ++on, sn && (un || (un = {}, s(e).unload(sn)), un[a] = r), u.onreadystatechange = r)
                },
                abort: function () {
                    r && r(0, 1)
                }
            }
        }
    });
    var ln = {}, cn, hn, pn = /^(?:toggle|show|hide)$/,
        dn = /^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
        vn, mn = [
            ["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"],
            ["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"],
            ["opacity"]
        ],
        gn;
    s.fn.extend({
            show: function (e, t, n) {
                var r, i;
                if (e || e === 0) return this.animate(wn("show", 3), e, t, n);
                for (var o = 0, u = this.length; o < u; o++) r = this[o], r.style && (i = r.style.display, !s._data(r, "olddisplay") && i === "none" && (i = r.style.display = ""), (i === "" && s.css(r, "display") === "none" || !s.contains(r.ownerDocument.documentElement, r)) && s._data(r, "olddisplay", En(r.nodeName)));
                for (o = 0; o < u; o++) {
                    r = this[o];
                    if (r.style) {
                        i = r.style.display;
                        if (i === "" || i === "none") r.style.display = s._data(r, "olddisplay") || ""
                    }
                }
                return this
            },
            hide: function (e, t, n) {
                if (e || e === 0) return this.animate(wn("hide", 3), e, t, n);
                var r, i, o = 0,
                    u = this.length;
                for (; o < u; o++) r = this[o], r.style && (i = s.css(r, "display"), i !== "none" && !s._data(r, "olddisplay") && s._data(r, "olddisplay", i));
                for (o = 0; o < u; o++) this[o].style && (this[o].style.display = "none");
                return this
            },
            _toggle: s.fn.toggle,
            toggle: function (e, t, n) {
                var r = typeof e == "boolean";
                return s.isFunction(e) && s.isFunction(t) ? this._toggle.apply(this, arguments) : e == null || r ? this.each(function () {
                    var t = r ? e : s(this).is(":hidden");
                    s(this)[t ? "show" : "hide"]()
                }) : this.animate(wn("toggle", 3), e, t, n), this
            },
            fadeTo: function (e, t, n, r) {
                return this.filter(":hidden").css("opacity", 0).show().end().animate({
                        opacity: t
                    }, e, n, r)
            },
            animate: function (e, t, n, r) {
                function o() {
                    i.queue === !1 && s._mark(this);
                    var t = s.extend({}, i),
                        n = this.nodeType === 1,
                        r = n && s(this).is(":hidden"),
                        o, u, a, f, l, c, h, p, d, v, m;
                    t.animatedProperties = {};
                    for (a in e) {
                        o = s.camelCase(a), a !== o && (e[o] = e[a], delete e[a]);
                        if ((l = s.cssHooks[o]) && "expand" in l) {
                            c = l.expand(e[o]), delete e[o];
                            for (a in c) a in e || (e[a] = c[a])
                        }
                    }
                    for (o in e) {
                        u = e[o], s.isArray(u) ? (t.animatedProperties[o] = u[1], u = e[o] = u[0]) : t.animatedProperties[o] = t.specialEasing && t.specialEasing[o] || t.easing || "swing";
                        if (u === "hide" && r || u === "show" && !r) return t.complete.call(this);
                        n && (o === "height" || o === "width") && (t.overflow = [this.style.overflow, this.style.overflowX, this.style.overflowY], s.css(this, "display") === "inline" && s.css(this, "float") === "none" && (!s.support.inlineBlockNeedsLayout || En(this.nodeName) === "inline" ? this.style.display = "inline-block" : this.style.zoom = 1))
                    }
                    t.overflow != null && (this.style.overflow = "hidden");
                    for (a in e) f = new s.fx(this, t, a), u = e[a], pn.test(u) ? (m = s._data(this, "toggle" + a) || (u === "toggle" ? r ? "show" : "hide" : 0), m ? (s._data(this, "toggle" + a, m === "show" ? "hide" : "show"), f[m]()) : f[u]()) : (h = dn.exec(u), p = f.cur(), h ? (d = parseFloat(h[2]), v = h[3] || (s.cssNumber[a] ? "" : "px"), v !== "px" && (s.style(this, a, (d || 1) + v), p = (d || 1) / f.cur() * p, s.style(this, a, p + v)), h[1] && (d = (h[1] === "-=" ? -1 : 1) * d + p), f.custom(p, d, v)) : f.custom(p, u, ""));
                    return !0
                }
                var i = s.speed(t, n, r);
                return s.isEmptyObject(e) ? this.each(i.complete, [!1]) : (e = s.extend({}, e), i.queue === !1 ? this.each(o) : this.queue(i.queue, o))
            },
            stop: function (e, n, r) {
                return typeof e != "string" && (r = n, n = e, e = t), n && e !== !1 && this.queue(e || "fx", []), this.each(function () {
                    function u(e, t, n) {
                        var i = t[n];
                        s.removeData(e, n, !0), i.stop(r)
                    }
                    var t, n = !1,
                        i = s.timers,
                        o = s._data(this);
                    r || s._unmark(!0, this);
                    if (e == null)
                        for (t in o) o[t] && o[t].stop && t.indexOf(".run") === t.length - 4 && u(this, o, t);
                    else o[t = e + ".run"] && o[t].stop && u(this, o, t);
                    for (t = i.length; t--;) i[t].elem === this && (e == null || i[t].queue === e) && (r ? i[t](!0) : i[t].saveState(), n = !0, i.splice(t, 1));
                    (!r || !n) && s.dequeue(this, e)
                })
            }
        }), s.each({
            slideDown: wn("show", 1),
            slideUp: wn("hide", 1),
            slideToggle: wn("toggle", 1),
            fadeIn: {
                opacity: "show"
            },
            fadeOut: {
                opacity: "hide"
            },
            fadeToggle: {
                opacity: "toggle"
            }
        }, function (e, t) {
            s.fn[e] = function (e, n, r) {
                return this.animate(t, e, n, r)
            }
        }), s.extend({
            speed: function (e, t, n) {
                var r = e && typeof e == "object" ? s.extend({}, e) : {
                    complete: n || !n && t || s.isFunction(e) && e,
                    duration: e,
                    easing: n && t || t && !s.isFunction(t) && t
                };
                r.duration = s.fx.off ? 0 : typeof r.duration == "number" ? r.duration : r.duration in s.fx.speeds ? s.fx.speeds[r.duration] : s.fx.speeds._default;
                if (r.queue == null || r.queue === !0) r.queue = "fx";
                return r.old = r.complete, r.complete = function (e) {
                    s.isFunction(r.old) && r.old.call(this), r.queue ? s.dequeue(this, r.queue) : e !== !1 && s._unmark(this)
                }, r
            },
            easing: {
                linear: function (e) {
                    return e
                },
                swing: function (e) {
                    return -Math.cos(e * Math.PI) / 2 + .5
                }
            },
            timers: [],
            fx: function (e, t, n) {
                this.options = t, this.elem = e, this.prop = n, t.orig = t.orig || {}
            }
        }), s.fx.prototype = {
        update: function () {
            this.options.step && this.options.step.call(this.elem, this.now, this), (s.fx.step[this.prop] || s.fx.step._default)(this)
        },
        cur: function () {
            if (this.elem[this.prop] == null || !! this.elem.style && this.elem.style[this.prop] != null) {
                var e, t = s.css(this.elem, this.prop);
                return isNaN(e = parseFloat(t)) ? !t || t === "auto" ? 0 : t : e
            }
            return this.elem[this.prop]
        },
        custom: function (e, n, r) {
            function u(e) {
                return i.step(e)
            }
            var i = this,
                o = s.fx;
            this.startTime = gn || yn(), this.end = n, this.now = this.start = e, this.pos = this.state = 0, this.unit = r || this.unit || (s.cssNumber[this.prop] ? "" : "px"), u.queue = this.options.queue, u.elem = this.elem, u.saveState = function () {
                s._data(i.elem, "fxshow" + i.prop) === t && (i.options.hide ? s._data(i.elem, "fxshow" + i.prop, i.start) : i.options.show && s._data(i.elem, "fxshow" + i.prop, i.end))
            }, u() && s.timers.push(u) && !vn && (vn = setInterval(o.tick, o.interval))
        },
        show: function () {
            var e = s._data(this.elem, "fxshow" + this.prop);
            this.options.orig[this.prop] = e || s.style(this.elem, this.prop), this.options.show = !0, e !== t ? this.custom(this.cur(), e) : this.custom(this.prop === "width" || this.prop === "height" ? 1 : 0, this.cur()), s(this.elem).show()
        },
        hide: function () {
            this.options.orig[this.prop] = s._data(this.elem, "fxshow" + this.prop) || s.style(this.elem, this.prop), this.options.hide = !0, this.custom(this.cur(), 0)
        },
        step: function (e) {
            var t, n, r, i = gn || yn(),
                o = !0,
                u = this.elem,
                a = this.options;
            if (e || i >= a.duration + this.startTime) {
                this.now = this.end, this.pos = this.state = 1, this.update(), a.animatedProperties[this.prop] = !0;
                for (t in a.animatedProperties) a.animatedProperties[t] !== !0 && (o = !1);
                if (o) {
                    a.overflow != null && !s.support.shrinkWrapBlocks && s.each(["", "X", "Y"], function (e, t) {
                        u.style["overflow" + t] = a.overflow[e]
                    }), a.hide && s(u).hide();
                    if (a.hide || a.show)
                        for (t in a.animatedProperties) s.style(u, t, a.orig[t]), s.removeData(u, "fxshow" + t, !0), s.removeData(u, "toggle" + t, !0);
                    r = a.complete, r && (a.complete = !1, r.call(u))
                }
                return !1
            }
            return a.duration == Infinity ? this.now = i : (n = i - this.startTime, this.state = n / a.duration, this.pos = s.easing[a.animatedProperties[this.prop]](this.state, n, 0, 1, a.duration), this.now = this.start + (this.end - this.start) * this.pos), this.update(), !0
        }
    }, s.extend(s.fx, {
            tick: function () {
                var e, t = s.timers,
                    n = 0;
                for (; n < t.length; n++) e = t[n], !e() && t[n] === e && t.splice(n--, 1);
                t.length || s.fx.stop()
            },
            interval: 13,
            stop: function () {
                clearInterval(vn), vn = null
            },
            speeds: {
                slow: 600,
                fast: 200,
                _default: 400
            },
            step: {
                opacity: function (e) {
                    s.style(e.elem, "opacity", e.now)
                },
                _default: function (e) {
                    e.elem.style && e.elem.style[e.prop] != null ? e.elem.style[e.prop] = e.now + e.unit : e.elem[e.prop] = e.now
                }
            }
        }), s.each(mn.concat.apply([], mn), function (e, t) {
            t.indexOf("margin") && (s.fx.step[t] = function (e) {
                s.style(e.elem, t, Math.max(0, e.now) + e.unit)
            })
        }), s.expr && s.expr.filters && (s.expr.filters.animated = function (e) {
            return s.grep(s.timers, function (t) {
                return e === t.elem
            }).length
        });
    var Sn, xn = /^t(?:able|d|h)$/i,
        Tn = /^(?:body|html)$/i;
    "getBoundingClientRect" in n.documentElement ? Sn = function (e, t, n, r) {
        try {
            r = e.getBoundingClientRect()
        } catch (i) {}
        if (!r || !s.contains(n, e)) return r ? {
            top: r.top,
            left: r.left
        }: {
            top: 0,
            left: 0
        };
        var o = t.body,
            u = Nn(t),
            a = n.clientTop || o.clientTop || 0,
            f = n.clientLeft || o.clientLeft || 0,
            l = u.pageYOffset || s.support.boxModel && n.scrollTop || o.scrollTop,
            c = u.pageXOffset || s.support.boxModel && n.scrollLeft || o.scrollLeft,
            h = r.top + l - a,
            p = r.left + c - f;
        return {
            top: h,
            left: p
        }
    } : Sn = function (e, t, n) {
        var r, i = e.offsetParent,
            o = e,
            u = t.body,
            a = t.defaultView,
            f = a ? a.getComputedStyle(e, null) : e.currentStyle,
            l = e.offsetTop,
            c = e.offsetLeft;
        while ((e = e.parentNode) && e !== u && e !== n) {
            if (s.support.fixedPosition && f.position === "fixed") break;
            r = a ? a.getComputedStyle(e, null) : e.currentStyle, l -= e.scrollTop, c -= e.scrollLeft, e === i && (l += e.offsetTop, c += e.offsetLeft, s.support.doesNotAddBorder && (!s.support.doesAddBorderForTableAndCells || !xn.test(e.nodeName)) && (l += parseFloat(r.borderTopWidth) || 0, c += parseFloat(r.borderLeftWidth) || 0), o = i, i = e.offsetParent), s.support.subtractsBorderForOverflowNotVisible && r.overflow !== "visible" && (l += parseFloat(r.borderTopWidth) || 0, c += parseFloat(r.borderLeftWidth) || 0), f = r
        }
        if (f.position === "relative" || f.position === "static") l += u.offsetTop, c += u.offsetLeft;
        return s.support.fixedPosition && f.position === "fixed" && (l += Math.max(n.scrollTop, u.scrollTop), c += Math.max(n.scrollLeft, u.scrollLeft)), {
            top: l,
            left: c
        }
    }, s.fn.offset = function (e) {
        if (arguments.length) return e === t ? this : this.each(function (t) {
            s.offset.setOffset(this, e, t)
        });
        var n = this[0],
            r = n && n.ownerDocument;
        return r ? n === r.body ? s.offset.bodyOffset(n) : Sn(n, r, r.documentElement) : null
    }, s.offset = {
        bodyOffset: function (e) {
            var t = e.offsetTop,
                n = e.offsetLeft;
            return s.support.doesNotIncludeMarginInBodyOffset && (t += parseFloat(s.css(e, "marginTop")) || 0, n += parseFloat(s.css(e, "marginLeft")) || 0), {
                top: t,
                left: n
            }
        },
        setOffset: function (e, t, n) {
            var r = s.css(e, "position");
            r === "static" && (e.style.position = "relative");
            var i = s(e),
                o = i.offset(),
                u = s.css(e, "top"),
                a = s.css(e, "left"),
                f = (r === "absolute" || r === "fixed") && s.inArray("auto", [u, a]) > -1,
                l = {}, c = {}, h, p;
            f ? (c = i.position(), h = c.top, p = c.left) : (h = parseFloat(u) || 0, p = parseFloat(a) || 0), s.isFunction(t) && (t = t.call(e, n, o)), t.top != null && (l.top = t.top - o.top + h), t.left != null && (l.left = t.left - o.left + p), "using" in t ? t.using.call(e, l) : i.css(l)
        }
    }, s.fn.extend({
            position: function () {
                if (!this[0]) return null;
                var e = this[0],
                    t = this.offsetParent(),
                    n = this.offset(),
                    r = Tn.test(t[0].nodeName) ? {
                        top: 0,
                        left: 0
                    } : t.offset();
                return n.top -= parseFloat(s.css(e, "marginTop")) || 0, n.left -= parseFloat(s.css(e, "marginLeft")) || 0, r.top += parseFloat(s.css(t[0], "borderTopWidth")) || 0, r.left += parseFloat(s.css(t[0], "borderLeftWidth")) || 0, {
                    top: n.top - r.top,
                    left: n.left - r.left
                }
            },
            offsetParent: function () {
                return this.map(function () {
                    var e = this.offsetParent || n.body;
                    while (e && !Tn.test(e.nodeName) && s.css(e, "position") === "static") e = e.offsetParent;
                    return e
                })
            }
        }), s.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function (e, n) {
            var r = /Y/.test(n);
            s.fn[e] = function (i) {
                return s.access(this, function (e, i, o) {
                    var u = Nn(e);
                    if (o === t) return u ? n in u ? u[n] : s.support.boxModel && u.document.documentElement[i] || u.document.body[i] : e[i];
                    u ? u.scrollTo(r ? s(u).scrollLeft() : o, r ? o : s(u).scrollTop()) : e[i] = o
                }, e, i, arguments.length, null)
            }
        }), s.each({
            Height: "height",
            Width: "width"
        }, function (e, n) {
            var r = "client" + e,
                i = "scroll" + e,
                o = "offset" + e;
            s.fn["inner" + e] = function () {
                var e = this[0];
                return e ? e.style ? parseFloat(s.css(e, n, "padding")) : this[n]() : null
            }, s.fn["outer" + e] = function (e) {
                var t = this[0];
                return t ? t.style ? parseFloat(s.css(t, n, e ? "margin" : "border")) : this[n]() : null
            }, s.fn[n] = function (e) {
                return s.access(this, function (e, n, u) {
                    var a, f, l, c;
                    if (s.isWindow(e)) return a = e.document, f = a.documentElement[r], s.support.boxModel && f || a.body && a.body[r] || f;
                    if (e.nodeType === 9) return a = e.documentElement, a[r] >= a[i] ? a[r] : Math.max(e.body[i], a[i], e.body[o], a[o]);
                    if (u === t) return l = s.css(e, n), c = parseFloat(l), s.isNumeric(c) ? c : l;
                    s(e).css(n, u)
                }, n, e, arguments.length, null)
            }
        }), e.jQuery = e.$ = s, typeof define == "function" && define.amd && define.amd.jQuery && define("jquery", [], function () {
            return s
        })
})(window),
function (e, t) {
    var n = function () {
        var t = e(document).data("events");
        return t && t.click && e.grep(t.click, function (e) {
            return e.namespace === "rails"
        }).length
    };
    n() && e.error("jquery-ujs has already been loaded!");
    var r;
    e.rails = r = {
        linkClickSelector: "a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",
        inputChangeSelector: "select[data-remote], input[data-remote], textarea[data-remote]",
        formSubmitSelector: "form",
        formInputClickSelector: "form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",
        disableSelector: "input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",
        enableSelector: "input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",
        requiredInputSelector: "input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",
        fileInputSelector: "input:file",
        linkDisableSelector: "a[data-disable-with]",
        CSRFProtection: function (t) {
            var n = e('meta[name="csrf-token"]').attr("content");
            n && t.setRequestHeader("X-CSRF-Token", n)
        },
        fire: function (t, n, r) {
            var i = e.Event(n);
            return t.trigger(i, r), i.result !== !1
        },
        confirm: function (e) {
            return confirm(e)
        },
        ajax: function (t) {
            return e.ajax(t)
        },
        href: function (e) {
            return e.attr("href")
        },
        handleRemote: function (n) {
            var i, s, o, u, a, f, l, c;
            if (r.fire(n, "ajax:before")) {
                u = n.data("cross-domain"), a = u === t ? null : u, f = n.data("with-credentials") || null, l = n.data("type") || e.ajaxSettings && e.ajaxSettings.dataType;
                if (n.is("form")) {
                    i = n.attr("method"), s = n.attr("action"), o = n.serializeArray();
                    var h = n.data("ujs:submit-button");
                    h && (o.push(h), n.data("ujs:submit-button", null))
                } else n.is(r.inputChangeSelector) ? (i = n.data("method"), s = n.data("url"), o = n.serialize(), n.data("params") && (o = o + "&" + n.data("params"))) : (i = n.data("method"), s = r.href(n), o = n.data("params") || null);
                c = {
                    type: i || "GET",
                    data: o,
                    dataType: l,
                    beforeSend: function (e, i) {
                        return i.dataType === t && e.setRequestHeader("accept", "*/*;q=0.5, " + i.accepts.script), r.fire(n, "ajax:beforeSend", [e, i])
                    },
                    success: function (e, t, r) {
                        n.trigger("ajax:success", [e, t, r])
                    },
                    complete: function (e, t) {
                        n.trigger("ajax:complete", [e, t])
                    },
                    error: function (e, t, r) {
                        n.trigger("ajax:error", [e, t, r])
                    },
                    xhrFields: {
                        withCredentials: f
                    },
                    crossDomain: a
                }, s && (c.url = s);
                var p = r.ajax(c);
                return n.trigger("ajax:send", p), p
            }
            return !1
        },
        handleMethod: function (n) {
            var i = r.href(n),
                s = n.data("method"),
                o = n.attr("target"),
                u = e("meta[name=csrf-token]").attr("content"),
                a = e("meta[name=csrf-param]").attr("content"),
                f = e('<form method="post" action="' + i + '"></form>'),
                l = '<input name="_method" value="' + s + '" type="hidden" />';
            a !== t && u !== t && (l += '<input name="' + a + '" value="' + u + '" type="hidden" />'), o && f.attr("target", o), f.hide().append(l).appendTo("body"), f.submit()
        },
        disableFormElements: function (t) {
            t.find(r.disableSelector).each(function () {
                var t = e(this),
                    n = t.is("button") ? "html" : "val";
                t.data("ujs:enable-with", t[n]()), t[n](t.data("disable-with")), t.prop("disabled", !0)
            })
        },
        enableFormElements: function (t) {
            t.find(r.enableSelector).each(function () {
                var t = e(this),
                    n = t.is("button") ? "html" : "val";
                t.data("ujs:enable-with") && t[n](t.data("ujs:enable-with")), t.prop("disabled", !1)
            })
        },
        allowAction: function (e) {
            var t = e.data("confirm"),
                n = !1,
                i;
            return t ? (r.fire(e, "confirm") && (n = r.confirm(t), i = r.fire(e, "confirm:complete", [n])), n && i) : !0
        },
        blankInputs: function (t, n, r) {
            var i = e(),
                s, o, u = n || "input,textarea";
            return t.find(u).each(function () {
                s = e(this), o = s.is(":checkbox,:radio") ? s.is(":checked") : s.val(), o == !! r && (i = i.add(s))
            }), i.length ? i : !1
        },
        nonBlankInputs: function (e, t) {
            return r.blankInputs(e, t, !0)
        },
        stopEverything: function (t) {
            return e(t.target).trigger("ujs:everythingStopped"), t.stopImmediatePropagation(), !1
        },
        callFormSubmitBindings: function (n, r) {
            var i =
                n.data("events"),
                s = !0;
            return i !== t && i.submit !== t && e.each(i.submit, function (e, t) {
                if (typeof t.handler == "function") return s = t.handler(r)
            }), s
        },
        disableElement: function (e) {
            e.data("ujs:enable-with", e.html()), e.html(e.data("disable-with")), e.bind("click.railsDisable", function (e) {
                return r.stopEverything(e)
            })
        },
        enableElement: function (e) {
            e.data("ujs:enable-with") !== t && (e.html(e.data("ujs:enable-with")), e.data("ujs:enable-with", !1)), e.unbind("click.railsDisable")
        }
    }, r.fire(e(document), "rails:attachBindings") && (e.ajaxPrefilter(function (e, t, n) {
                e.crossDomain || r.CSRFProtection(n)
            }), e(document).delegate(r.linkDisableSelector, "ajax:complete", function () {
                r.enableElement(e(this))
            }), e(document).delegate(r.linkClickSelector, "click.rails", function (n) {
                var i = e(this),
                    s = i.data("method"),
                    o = i.data("params");
                if (!r.allowAction(i)) return r.stopEverything(n);
                i.is(r.linkDisableSelector) && r.disableElement(i);
                if (i.data("remote") !== t) return (n.metaKey || n.ctrlKey) && (!s || s === "GET") && !o ? !0 : (r.handleRemote(i) === !1 && r.enableElement(i), !1);
                if (i.data("method")) return r.handleMethod(i), !1
            }), e(document).delegate(r.inputChangeSelector, "change.rails", function (t) {
                var n = e(this);
                return r.allowAction(n) ? (r.handleRemote(n), !1) : r.stopEverything(t)
            }), e(document).delegate(r.formSubmitSelector, "submit.rails", function (n) {
                var i = e(this),
                    s = i.data("remote") !== t,
                    o = r.blankInputs(i, r.requiredInputSelector),
                    u = r.nonBlankInputs(i, r.fileInputSelector);
                if (!r.allowAction(i)) return r.stopEverything(n);
                if (o && i.attr("novalidate") == t && r.fire(i, "ajax:aborted:required", [o])) return r.stopEverything(n);
                if (s) return u ? (setTimeout(function () {
                            r.disableFormElements(i)
                        }, 13), r.fire(i, "ajax:aborted:file", [u])) : !e.support.submitBubbles && e().jquery < "1.7" && r.callFormSubmitBindings(i, n) === !1 ? r.stopEverything(n) : (r.handleRemote(i), !1);
                setTimeout(function () {
                    r.disableFormElements(i)
                }, 13)
            }), e(document).delegate(r.formInputClickSelector, "click.rails", function (t) {
                var n = e(this);
                if (!r.allowAction(n)) return r.stopEverything(t);
                var i = n.attr("name"),
                    s = i ? {
                        name: i,
                        value: n.val()
                    } : null;
                n.closest("form").data("ujs:submit-button", s)
            }), e(document).delegate(r.formSubmitSelector, "ajax:beforeSend.rails", function (t) {
                this == t.target && r.disableFormElements(e(this))
            }), e(document).delegate(r.formSubmitSelector, "ajax:complete.rails", function (t) {
                this == t.target && r.enableFormElements(e(this))
            }), e(function () {
                csrf_token = e("meta[name=csrf-token]").attr("content"), csrf_param = e("meta[name=csrf-param]").attr("content"), e('form input[name="' + csrf_param + '"]').val(csrf_token)
            }))
}(jQuery),
function () {
    try {
        document.cookie, jQuery.cookie = function (e, t, n) {
            if (arguments.length > 1 && String(t) !== "[object Object]") {
                n = jQuery.extend({}, n);
                if (t === null || t === undefined) n.expires = -1;
                if (typeof n.expires == "number") {
                    var r = n.expires,
                        i = n.expires = new Date;
                    i.setDate(i.getDate() + r)
                }
                return t = String(t), document.cookie = [encodeURIComponent(e), "=", n.raw ? t : encodeURIComponent(t), n.expires ? "; expires=" + n.expires.toUTCString() : "", n.path ? "; path=" + n.path : "", n.domain ? "; domain=" + n.domain : "", n.secure ? "; secure" : ""].join("")
            }
            n = t || {};
            var s, o = n.raw ? function (e) {
                    return e
                } : decodeURIComponent;
            return (s = (new RegExp("(?:^|; )" + encodeURIComponent(e) + "=([^;]*)")).exec(document.cookie)) ? o(s[1]) : null
        }
    } catch (e) {
        jQuery.cookie = jQuery.noop
    }
}.call(this),
function (e, t) {
    function n(t, n) {
        var i = t.nodeName.toLowerCase();
        if ("area" === i) {
            var s = t.parentNode,
                o = s.name,
                u;
            return !t.href || !o || s.nodeName.toLowerCase() !== "map" ? !1 : (u = e("img[usemap=#" + o + "]")[0], !! u && r(u))
        }
        return (/input|select|textarea|button|object/.test(i) ? !t.disabled : "a" == i ? t.href || n : n) && r(t)
    }

    function r(t) {
        return !e(t).parents().andSelf().filter(function () {
            return e.curCSS(this, "visibility") === "hidden" || e.expr.filters.hidden(this)
        }).length
    }
    e.ui = e.ui || {};
    if (e.ui.version) return;
    e.extend(e.ui, {
            version: "1.8.21",
            keyCode: {
                ALT: 18,
                BACKSPACE: 8,
                CAPS_LOCK: 20,
                COMMA: 188,
                COMMAND: 91,
                COMMAND_LEFT: 91,
                COMMAND_RIGHT: 93,
                CONTROL: 17,
                DELETE: 46,
                DOWN: 40,
                END: 35,
                ENTER: 13,
                ESCAPE: 27,
                HOME: 36,
                INSERT: 45,
                LEFT: 37,
                MENU: 93,
                NUMPAD_ADD: 107,
                NUMPAD_DECIMAL: 110,
                NUMPAD_DIVIDE: 111,
                NUMPAD_ENTER: 108,
                NUMPAD_MULTIPLY: 106,
                NUMPAD_SUBTRACT: 109,
                PAGE_DOWN: 34,
                PAGE_UP: 33,
                PERIOD: 190,
                RIGHT: 39,
                SHIFT: 16,
                SPACE: 32,
                TAB: 9,
                UP: 38,
                WINDOWS: 91
            }
        }), e.fn.extend({
            propAttr: e.fn.prop || e.fn.attr,
            _focus: e.fn.focus,
            focus: function (t, n) {
                return typeof t == "number" ? this.each(function () {
                    var r = this;
                    setTimeout(function () {
                        e(r).focus(), n && n.call(r)
                    }, t)
                }) : this._focus.apply(this, arguments)
            },
            scrollParent: function () {
                var t;
                return e.browser.msie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? t = this.parents().filter(function () {
                    return /(relative|absolute|fixed)/.test(e.curCSS(this, "position", 1)) && /(auto|scroll)/.test(e.curCSS(this, "overflow", 1) + e.curCSS(this, "overflow-y", 1) + e.curCSS(this, "overflow-x", 1))
                }).eq(0) : t = this.parents().filter(function () {
                    return /(auto|scroll)/.test(e.curCSS(this, "overflow", 1) + e.curCSS(this, "overflow-y", 1) + e.curCSS(this, "overflow-x", 1))
                }).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t
            },
            zIndex: function (n) {
                if (n !== t) return this.css("zIndex", n);
                if (this.length) {
                    var r = e(this[0]),
                        i, s;
                    while (r.length && r[0] !== document) {
                        i = r.css("position");
                        if (i === "absolute" || i === "relative" || i === "fixed") {
                            s = parseInt(r.css("zIndex"), 10);
                            if (!isNaN(s) && s !== 0) return s
                        }
                        r = r.parent()
                    }
                }
                return 0
            },
            disableSelection: function () {
                return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function (e) {
                    e.preventDefault()
                })
            },
            enableSelection: function () {
                return this.unbind(".ui-disableSelection")
            }
        }), e.each(["Width", "Height"], function (n, r) {
            function i(t, n, r, i) {
                return e.each(s, function () {
                    n -= parseFloat(e.curCSS(t, "padding" + this, !0)) || 0, r && (n -= parseFloat(e.curCSS(t, "border" + this + "Width", !0)) || 0), i && (n -= parseFloat(e.curCSS(t, "margin" + this, !0)) || 0)
                }), n
            }
            var s = r === "Width" ? ["Left", "Right"] : ["Top", "Bottom"],
                o = r.toLowerCase(),
                u = {
                    innerWidth: e.fn.innerWidth,
                    innerHeight: e.fn.innerHeight,
                    outerWidth: e.fn.outerWidth,
                    outerHeight: e.fn.outerHeight
                };
            e.fn["inner" + r] = function (n) {
                return n === t ? u["inner" + r].call(this) : this.each(function () {
                    e(this).css(o, i(this, n) + "px")
                })
            }, e.fn["outer" + r] = function (t, n) {
                return typeof t != "number" ? u["outer" + r].call(this, t) : this.each(function () {
                    e(this).css(o, i(this, t, !0, n) + "px")
                })
            }
        }), e.extend(e.expr[":"], {
            data: function (t, n, r) {
                return !!e.data(t, r[3])
            },
            focusable: function (t) {
                return n(t, !isNaN(e.attr(t, "tabindex")))
            },
            tabbable: function (t) {
                var r = e.attr(t, "tabindex"),
                    i = isNaN(r);
                return (i || r >= 0) && n(t, !i)
            }
        }), e(function () {
            var t = document.body,
                n = t.appendChild(n = document.createElement("div"));
            n.offsetHeight, e.extend(n.style, {
                    minHeight: "100px",
                    height: "auto",
                    padding: 0,
                    borderWidth: 0
                }), e.support.minHeight = n.offsetHeight === 100, e.support.selectstart = "onselectstart" in n, t.removeChild(n).style.display = "none"
        }), e.extend(e.ui, {
            plugin: {
                add: function (t, n, r) {
                    var i = e.ui[t].prototype;
                    for (var s in r) i.plugins[s] = i.plugins[s] || [], i.plugins[s].push([n, r[s]])
                },
                call: function (e, t, n) {
                    var r = e.plugins[t];
                    if (!r || !e.element[0].parentNode) return;
                    for (var i = 0; i < r.length; i++) e.options[r[i][0]] && r[i][1].apply(e.element, n)
                }
            },
            contains: function (e, t) {
                return document.compareDocumentPosition ? e.compareDocumentPosition(t) & 16 : e !== t && e.contains(t)
            },
            hasScroll: function (t, n) {
                if (e(t).css("overflow") === "hidden") return !1;
                var r = n && n === "left" ? "scrollLeft" : "scrollTop",
                    i = !1;
                return t[r] > 0 ? !0 : (t[r] = 1, i = t[r] > 0, t[r] = 0, i)
            },
            isOverAxis: function (e, t, n) {
                return e > t && e < t + n
            },
            isOver: function (t, n, r, i, s, o) {
                return e.ui.isOverAxis(t, r, s) && e.ui.isOverAxis(n, i, o)
            }
        })
}(jQuery),
function (e, t) {
    if (e.cleanData) {
        var n = e.cleanData;
        e.cleanData = function (t) {
            for (var r = 0, i;
                (i = t[r]) != null; r++) try {
                e(i).triggerHandler("remove")
            } catch (s) {}
            n(t)
        }
    } else {
        var r = e.fn.remove;
        e.fn.remove = function (t, n) {
            return this.each(function () {
                return n || (!t || e.filter(t, [this]).length) && e("*", this).add([this]).each(function () {
                    try {
                        e(this).triggerHandler("remove")
                    } catch (t) {}
                }), r.call(e(this), t, n)
            })
        }
    }
    e.widget = function (t, n, r) {
        var i = t.split(".")[0],
            s;
        t = t.split(".")[1], s = i + "-" + t, r || (r = n, n = e.Widget), e.expr[":"][s] = function (n) {
            return !!e.data(n, t)
        }, e[i] = e[i] || {}, e[i][t] = function (e, t) {
            arguments.length && this._createWidget(e, t)
        };
        var o = new n;
        o.options = e.extend(!0, {}, o.options), e[i][t].prototype = e.extend(!0, o, {
                namespace: i,
                widgetName: t,
                widgetEventPrefix: e[i][t].prototype.widgetEventPrefix || t,
                widgetBaseClass: s
            }, r), e.widget.bridge(t, e[i][t])
    }, e.widget.bridge = function (n, r) {
        e.fn[n] = function (i) {
            var s = typeof i == "string",
                o = Array.prototype.slice.call(arguments, 1),
                u = this;
            return i = !s && o.length ? e.extend.apply(null, [!0, i].concat(o)) : i, s && i.charAt(0) === "_" ? u : (s ? this.each(function () {
                        var r = e.data(this, n),
                            s = r && e.isFunction(r[i]) ? r[i].apply(r, o) : r;
                        if (s !== r && s !== t) return u = s, !1
                    }) : this.each(function () {
                        var t = e.data(this, n);
                        t ? t.option(i || {})._init() : e.data(this, n, new r(i, this))
                    }), u)
        }
    }, e.Widget = function (e, t) {
        arguments.length && this._createWidget(e, t)
    }, e.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        options: {
            disabled: !1
        },
        _createWidget: function (t, n) {
            e.data(n, this.widgetName, this), this.element = e(n), this.options = e.extend(!0, {}, this.options, this._getCreateOptions(), t);
            var r = this;
            this.element.bind("remove." + this.widgetName, function () {
                r.destroy()
            }), this._create(), this._trigger("create"), this._init()
        },
        _getCreateOptions: function () {
            return e.metadata && e.metadata.get(this.element[0])[this.widgetName]
        },
        _create: function () {},
        _init: function () {},
        destroy: function () {
            this.element.unbind("." + this.widgetName).removeData(this.widgetName), this.widget().unbind("." + this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass + "-disabled " + "ui-state-disabled")
        },
        widget: function () {
            return this.element
        },
        option: function (n, r) {
            var i = n;
            if (arguments.length === 0) return e.extend({}, this.options);
            if (typeof n == "string") {
                if (r === t) return this.options[n];
                i = {}, i[n] = r
            }
            return this._setOptions(i), this
        },
        _setOptions: function (t) {
            var n = this;
            return e.each(t, function (e, t) {
                n._setOption(e, t)
            }), this
        },
        _setOption: function (e, t) {
            return this.options[e] = t, e === "disabled" && this.widget()[t ? "addClass" : "removeClass"](this.widgetBaseClass + "-disabled" + " " + "ui-state-disabled").attr("aria-disabled", t), this
        },
        enable: function () {
            return this._setOption("disabled", !1)
        },
        disable: function () {
            return this._setOption("disabled", !0)
        },
        _trigger: function (t, n, r) {
            var i, s, o = this.options[t];
            r = r || {}, n = e.Event(n), n.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), n.target = this.element[0], s = n.originalEvent;
            if (s)
                for (i in s) i in n || (n[i] = s[i]);
            return this.element.trigger(n, r), !(e.isFunction(o) && o.call(this.element[0], n, r) === !1 || n.isDefaultPrevented())
        }
    }
}(jQuery),
function (e, t) {
    var n = !1;
    e(document).mouseup(function (e) {
        n = !1
    }), e.widget("ui.mouse", {
            options: {
                cancel: ":input,option",
                distance: 1,
                delay: 0
            },
            _mouseInit: function () {
                var t = this;
                this.element.bind("mousedown." + this.widgetName, function (e) {
                    return t._mouseDown(e)
                }).bind("click." + this.widgetName, function (n) {
                    if (!0 === e.data(n.target, t.widgetName + ".preventClickEvent")) return e.removeData(n.target, t.widgetName + ".preventClickEvent"), n.stopImmediatePropagation(), !1
                }), this.started = !1
            },
            _mouseDestroy: function () {
                this.element.unbind("." + this.widgetName), e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
            },
            _mouseDown: function (t) {
                if (n) return;
                this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
                var r = this,
                    i = t.which == 1,
                    s = typeof this.options.cancel == "string" && t.target.nodeName ? e(t.target).closest(this.options.cancel).length : !1;
                if (!i || s || !this._mouseCapture(t)) return !0;
                this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () {
                            r.mouseDelayMet = !0
                        }, this.options.delay));
                if (this._mouseDistanceMet(t) && this._mouseDelayMet(t)) {
                    this._mouseStarted = this._mouseStart(t) !== !1;
                    if (!this._mouseStarted) return t.preventDefault(), !0
                }
                return !0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (e) {
                    return r._mouseMove(e)
                }, this._mouseUpDelegate = function (e) {
                    return r._mouseUp(e)
                }, e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), n = !0, !0
            },
            _mouseMove: function (t) {
                return !e.browser.msie || document.documentMode >= 9 || !! t.button ? this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted) : this._mouseUp(t)
            },
            _mouseUp: function (t) {
                return e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target == this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), !1
            },
            _mouseDistanceMet: function (e) {
                return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
            },
            _mouseDelayMet: function (e) {
                return this.mouseDelayMet
            },
            _mouseStart: function (e) {},
            _mouseDrag: function (e) {},
            _mouseStop: function (e) {},
            _mouseCapture: function (e) {
                return !0
            }
        })
}(jQuery),
function (e, t) {
    e.ui = e.ui || {};
    var n = /left|center|right/,
        r = /top|center|bottom/,
        i = "center",
        s = {}, o = e.fn.position,
        u = e.fn.offset;
    e.fn.position = function (t) {
        if (!t || !t.of) return o.apply(this, arguments);
        t = e.extend({}, t);
        var u = e(t.of),
            l = u[0],
            h = (t.collision || "flip").split(" "),
            p = t.offset ? t.offset.split(" ") : [0, 0],
            v, m, y;
        return l.nodeType === 9 ? (v = u.width(), m = u.height(), y = {
                top: 0,
                left: 0
            }) : l.setTimeout ? (v = u.width(), m = u.height(), y = {
                top: u.scrollTop(),
                left: u.scrollLeft()
            }) : l.preventDefault ? (t.at = "left top", v = m = 0, y = {
                top: t.of.pageY,
                left: t.of.pageX
            }) : (v = u.outerWidth(), m = u.outerHeight(), y = u.offset()), e.each(["my", "at"], function () {
                var e = (t[this] || "").split(" ");
                e.length === 1 && (e = n.test(e[0]) ? e.concat([i]) : r.test(e[0]) ? [i].concat(e) : [i, i]), e[0] = n.test(e[0]) ? e[0] : i, e[1] = r.test(e[1]) ? e[1] : i, t[this] = e
            }), h.length === 1 && (h[1] = h[0]), p[0] = parseInt(p[0], 10) || 0, p.length === 1 && (p[1] = p[0]), p[1] = parseInt(p[1], 10) || 0, t.at[0] === "right" ? y.left += v : t.at[0] === i && (y.left += v / 2), t.at[1] === "bottom" ? y.top += m : t.at[1] === i && (y.top += m / 2), y.left += p[0], y.top += p[1], this.each(function () {
                var n = e(this),
                    r = n.outerWidth(),
                    o = n.outerHeight(),
                    u = parseInt(e.curCSS(this, "marginLeft", !0)) || 0,
                    l = parseInt(e.curCSS(this, "marginTop", !0)) || 0,
                    c = r + u + (parseInt(e.curCSS(this, "marginRight", !0)) || 0),
                    d = o + l + (parseInt(e.curCSS(this, "marginBottom", !0)) || 0),
                    g = e.extend({}, y),
                    w;
                t.my[0] === "right" ? g.left -= r : t.my[0] === i && (g.left -= r / 2), t.my[1] === "bottom" ? g.top -= o : t.my[1] === i && (g.top -= o / 2), s.fractions || (g.left = Math.round(g.left), g.top = Math.round(g.top)), w = {
                    left: g.left - u,
                    top: g.top - l
                }, e.each(["left", "top"], function (n, i) {
                    e.ui.position[h[n]] && e.ui.position[h[n]][i](g, {
                            targetWidth: v,
                            targetHeight: m,
                            elemWidth: r,
                            elemHeight: o,
                            collisionPosition: w,
                            collisionWidth: c,
                            collisionHeight: d,
                            offset: p,
                            my: t.my,
                            at: t.at
                        })
                }), e.fn.bgiframe && n.bgiframe(), n.offset(e.extend(g, {
                            using: t.using
                        }))
            })
    }, e.ui.position = {
        fit: {
            left: function (t, n) {
                var r = e(window),
                    i = n.collisionPosition.left + n.collisionWidth - r.width() - r.scrollLeft();
                t.left = i > 0 ? t.left - i : Math.max(t.left - n.collisionPosition.left, t.left)
            },
            top: function (t, n) {
                var r = e(window),
                    i = n.collisionPosition.top + n.collisionHeight - r.height() - r.scrollTop();
                t.top = i > 0 ? t.top - i : Math.max(t.top - n.collisionPosition.top, t.top)
            }
        },
        flip: {
            left: function (t, n) {
                if (n.at[0] === i) return;
                var r = e(window),
                    s = n.collisionPosition.left + n.collisionWidth - r.width() - r.scrollLeft(),
                    o = n.my[0] === "left" ? -n.elemWidth : n.my[0] === "right" ? n.elemWidth : 0,
                    u = n.at[0] === "left" ? n.targetWidth : -n.targetWidth,
                    f = -2 * n.offset[0];
                t.left += n.collisionPosition.left < 0 ? o + u + f : s > 0 ? o + u + f : 0
            },
            top: function (t, n) {
                if (n.at[1] === i) return;
                var r = e(window),
                    s = n.collisionPosition.top + n.collisionHeight - r.height() - r.scrollTop(),
                    o = n.my[1] === "top" ? -n.elemHeight : n.my[1] === "bottom" ? n.elemHeight : 0,
                    u = n.at[1] === "top" ? n.targetHeight : -n.targetHeight,
                    f = -2 * n.offset[1];
                t.top += n.collisionPosition.top < 0 ? o + u + f : s > 0 ? o + u + f : 0
            }
        }
    }, e.offset.setOffset || (e.offset.setOffset = function (t, n) {
        /static/.test(e.curCSS(t, "position")) && (t.style.position = "relative");
        var r = e(t),
            i = r.offset(),
            s = parseInt(e.curCSS(t, "top", !0), 10) || 0,
            o = parseInt(e.curCSS(t, "left", !0), 10) || 0,
            u = {
                top: n.top - i.top + s,
                left: n.left - i.left + o
            };
        "using" in n ? n.using.call(t, u) : r.css(u)
    }, e.fn.offset = function (t) {
        var n = this[0];
        return !n || !n.ownerDocument ? null : t ? e.isFunction(t) ? this.each(function (n) {
            e(this).offset(t.call(this, n, e(this).offset()))
        }) : this.each(function () {
            e.offset.setOffset(this, t)
        }) : u.call(this)
    }),
    function () {
        var t = document.getElementsByTagName("body")[0],
            n = document.createElement("div"),
            r, i, o, u, l;
        r = document.createElement(t ? "div" : "body"), o = {
            visibility: "hidden",
            width: 0,
            height: 0,
            border: 0,
            margin: 0,
            background: "none"
        }, t && e.extend(o, {
                position: "absolute",
                left: "-1000px",
                top: "-1000px"
            });
        for (var c in o) r.style[c] = o[c];
        r.appendChild(n), i = t || document.documentElement, i.insertBefore(r, i.firstChild), n.style.cssText = "position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;", u = e(n).offset(function (e, t) {
            return t
        }).offset(), r.innerHTML = "", i.removeChild(r), l = u.top + u.left + (t ? 2e3 : 0), s.fractions = l > 21 && l < 22
    }()
}(jQuery),
function (e, t) {
    e.widget("ui.sortable", e.ui.mouse, {
            widgetEventPrefix: "sort",
            ready: !1,
            options: {
                appendTo: "parent",
                axis: !1,
                connectWith: !1,
                containment: !1,
                cursor: "auto",
                cursorAt: !1,
                dropOnEmpty: !0,
                forcePlaceholderSize: !1,
                forceHelperSize: !1,
                grid: !1,
                handle: !1,
                helper: "original",
                items: "> *",
                opacity: !1,
                placeholder: !1,
                revert: !1,
                scroll: !0,
                scrollSensitivity: 20,
                scrollSpeed: 20,
                scope: "default",
                tolerance: "intersect",
                zIndex: 1e3
            },
            _create: function () {
                var e = this.options;
                this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.floating = this.items.length ? e.axis === "x" || /left|right/.test(this.items[0].item.css("float")) || /inline|table-cell/.test(this.items[0].item.css("display")) : !1, this.offset = this.element.offset(), this._mouseInit(), this.ready = !0
            },
            destroy: function () {
                e.Widget.prototype.destroy.call(this), this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
                for (var t = this.items.length - 1; t >= 0; t--) this.items[t].item.removeData(this.widgetName + "-item");
                return this
            },
            _setOption: function (t, n) {
                t === "disabled" ? (this.options[t] = n, this.widget()[n ? "addClass" : "removeClass"]("ui-sortable-disabled")) : e.Widget.prototype._setOption.apply(this, arguments)
            },
            _mouseCapture: function (t, n) {
                var r = this;
                if (this.reverting) return !1;
                if (this.options.disabled || this.options.type == "static") return !1;
                this._refreshItems(t);
                var i = null,
                    s = this,
                    o = e(t.target).parents().each(function () {
                        if (e.data(this, r.widgetName + "-item") == s) return i = e(this), !1
                    });
                e.data(t.target, r.widgetName + "-item") == s && (i = e(t.target));
                if (!i) return !1;
                if (this.options.handle && !n) {
                    var u = !1;
                    e(this.options.handle, i).find("*").andSelf().each(function () {
                        this == t.target && (u = !0)
                    });
                    if (!u) return !1
                }
                return this.currentItem = i, this._removeCurrentsFromItems(), !0
            },
            _mouseStart: function (t, n, r) {
                var i = this.options,
                    s = this;
                this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                    top: this.offset.top - this.margins.top,
                    left: this.offset.left - this.margins.left
                }, e.extend(this.offset, {
                        click: {
                            left: t.pageX - this.offset.left,
                            top: t.pageY - this.offset.top
                        },
                        parent: this._getParentOffset(),
                        relative: this._getRelativeOffset()
                    }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this.domPosition = {
                    prev: this.currentItem.prev()[0],
                    parent: this.currentItem.parent()[0]
                }, this.helper[0] != this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), i.containment && this._setContainment(), i.cursor && (e("body").css("cursor") && (this._storedCursor = e("body").css("cursor")), e("body").css("cursor", i.cursor)), i.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", i.opacity)), i.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", i.zIndex)), this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML" && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions();
                if (!r)
                    for (var o = this.containers.length - 1; o >= 0; o--) this.containers[o]._trigger("activate", t, s._uiHash(this));
                return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), !0
            },
            _mouseDrag: function (t) {
                this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs);
                if (this.options.scroll) {
                    var n = this.options,
                        r = !1;
                    this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML" ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < n.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + n.scrollSpeed : t.pageY - this.overflowOffset.top < n.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - n.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < n.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + n.scrollSpeed : t.pageX - this.overflowOffset.left < n.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - n.scrollSpeed)) : (t.pageY - e(document).scrollTop() < n.scrollSensitivity ? r = e(document).scrollTop(e(document).scrollTop() - n.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < n.scrollSensitivity && (r = e(document).scrollTop(e(document).scrollTop() + n.scrollSpeed)), t.pageX - e(document).scrollLeft() < n.scrollSensitivity ? r = e(document).scrollLeft(e(document).scrollLeft() - n.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < n.scrollSensitivity && (r = e(document).scrollLeft(e(document).scrollLeft() + n.scrollSpeed))), r !== !1 && e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)
                }
                this.positionAbs = this._convertPositionTo("absolute");
                if (!this.options.axis || this.options.axis != "y") this.helper[0].style.left = this.position.left + "px";
                if (!this.options.axis || this.options.axis != "x") this.helper[0].style.top = this.position.top + "px";
                for (var i = this.items.length - 1; i >= 0; i--) {
                    var s = this.items[i],
                        o = s.item[0],
                        u = this._intersectsWithPointer(s);
                    if (!u) continue;
                    if (o != this.currentItem[0] && this.placeholder[u == 1 ? "next" : "prev"]()[0] != o && !e.ui.contains(this.placeholder[0], o) && (this.options.type == "semi-dynamic" ? !e.ui.contains(this.element[0], o) : !0)) {
                        this.direction = u == 1 ? "down" : "up";
                        if (this.options.tolerance != "pointer" && !this._intersectsWithSides(s)) break;
                        this._rearrange(t, s), this._trigger("change", t, this._uiHash());
                        break
                    }
                }
                return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
            },
            _mouseStop: function (t, n) {
                if (!t) return;
                e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t);
                if (this.options.revert) {
                    var r = this,
                        i = r.placeholder.offset();
                    r.reverting = !0, e(this.helper).animate({
                            left: i.left - this.offset.parent.left - r.margins.left + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollLeft),
                            top: i.top - this.offset.parent.top - r.margins.top + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollTop)
                        }, parseInt(this.options.revert, 10) || 500, function () {
                            r._clear(t)
                        })
                } else this._clear(t, n);
                return !1
            },
            cancel: function () {
                var t = this;
                if (this.dragging) {
                    this._mouseUp({
                            target: null
                        }), this.options.helper == "original" ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                    for (var n = this.containers.length - 1; n >= 0; n--) this.containers[n]._trigger("deactivate", null, t._uiHash(this)), this.containers[n].containerCache.over && (this.containers[n]._trigger("out", null, t._uiHash(this)), this.containers[n].containerCache.over = 0)
                }
                return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.options.helper != "original" && this.helper && this.helper[0].parentNode && this.helper.remove(), e.extend(this, {
                            helper: null,
                            dragging: !1,
                            reverting: !1,
                            _noFinalSort: null
                        }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), this
            },
            serialize: function (t) {
                var n = this._getItemsAsjQuery(t && t.connected),
                    r = [];
                return t = t || {}, e(n).each(function () {
                    var n = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[-=_](.+)/);
                    n && r.push((t.key || n[1] + "[]") + "=" + (t.key && t.expression ? n[1] : n[2]))
                }), !r.length && t.key && r.push(t.key + "="), r.join("&")
            },
            toArray: function (t) {
                var n = this._getItemsAsjQuery(t && t.connected),
                    r = [];
                return t = t || {}, n.each(function () {
                    r.push(e(t.item || this).attr(t.attribute || "id") || "")
                }), r
            },
            _intersectsWith: function (e) {
                var t = this.positionAbs.left,
                    n = t + this.helperProportions.width,
                    r = this.positionAbs.top,
                    i = r + this.helperProportions.height,
                    s = e.left,
                    o = s + e.width,
                    u = e.top,
                    a = u + e.height,
                    f = this.offset.click.top,
                    l = this.offset.click.left,
                    c = r + f > u && r + f < a && t + l > s && t + l < o;
                return this.options.tolerance == "pointer" || this.options.forcePointerForContainers || this.options.tolerance != "pointer" && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? c : s < t + this.helperProportions.width / 2 && n - this.helperProportions.width / 2 < o && u < r + this.helperProportions.height / 2 && i - this.helperProportions.height / 2 < a
            },
            _intersectsWithPointer: function (t) {
                var n = this.options.axis === "x" || e.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, t.top, t.height),
                    r = this.options.axis === "y" || e.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, t.left, t.width),
                    i = n && r,
                    s = this._getDragVerticalDirection(),
                    o = this._getDragHorizontalDirection();
                return i ? this.floating ? o && o == "right" || s == "down" ? 2 : 1 : s && (s == "down" ? 2 : 1) : !1
            },
            _intersectsWithSides: function (t) {
                var n = e.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, t.top + t.height / 2, t.height),
                    r = e.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, t.left + t.width / 2, t.width),
                    i = this._getDragVerticalDirection(),
                    s = this._getDragHorizontalDirection();
                return this.floating && s ? s == "right" && r || s == "left" && !r : i && (i == "down" && n || i == "up" && !n)
            },
            _getDragVerticalDirection: function () {
                var e = this.positionAbs.top - this.lastPositionAbs.top;
                return e != 0 && (e > 0 ? "down" : "up")
            },
            _getDragHorizontalDirection: function () {
                var e = this.positionAbs.left - this.lastPositionAbs.left;
                return e != 0 && (e > 0 ? "right" : "left")
            },
            refresh: function (e) {
                return this._refreshItems(e), this.refreshPositions(), this
            },
            _connectWith: function () {
                var e = this.options;
                return e.connectWith.constructor == String ? [e.connectWith] : e.connectWith
            },
            _getItemsAsjQuery: function (t) {
                var n = this,
                    r = [],
                    i = [],
                    s = this._connectWith();
                if (s && t)
                    for (var o = s.length - 1; o >= 0; o--) {
                        var u = e(s[o]);
                        for (var f = u.length - 1; f >= 0; f--) {
                            var l = e.data(u[f], this.widgetName);
                            l && l != this && !l.options.disabled && i.push([e.isFunction(l.options.items) ? l.options.items.call(l.element) : e(l.options.items, l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), l])
                        }
                }
                i.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                                options: this.options,
                                item: this.currentItem
                            }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
                for (var o = i.length - 1; o >= 0; o--) i[o][0].each(function () {
                    r.push(this)
                });
                return e(r)
            },
            _removeCurrentsFromItems: function () {
                var e = this.currentItem.find(":data(" + this.widgetName + "-item)");
                for (var t = 0; t < this.items.length; t++)
                    for (var n = 0; n < e.length; n++) e[n] == this.items[t].item[0] && this.items.splice(t, 1)
            },
            _refreshItems: function (t) {
                this.items = [], this.containers = [this];
                var n = this.items,
                    r = this,
                    i = [
                        [e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                                    item: this.currentItem
                                }) : e(this.options.items, this.element), this]
                    ],
                    s = this._connectWith();
                if (s && this.ready)
                    for (var o = s.length - 1; o >= 0; o--) {
                        var u = e(s[o]);
                        for (var f = u.length - 1; f >= 0; f--) {
                            var l = e.data(u[f], this.widgetName);
                            l && l != this && !l.options.disabled && (i.push([e.isFunction(l.options.items) ? l.options.items.call(l.element[0], t, {
                                                item: this.currentItem
                                            }) : e(l.options.items, l.element), l]), this.containers.push(l))
                        }
                }
                for (var o = i.length - 1; o >= 0; o--) {
                    var c = i[o][1],
                        h = i[o][0];
                    for (var f = 0, p = h.length; f < p; f++) {
                        var d = e(h[f]);
                        d.data(this.widgetName + "-item", c), n.push({
                                item: d,
                                instance: c,
                                width: 0,
                                height: 0,
                                left: 0,
                                top: 0
                            })
                    }
                }
            },
            refreshPositions: function (t) {
                this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
                for (var n = this.items.length - 1; n >= 0; n--) {
                    var r = this.items[n];
                    if (r.instance != this.currentContainer && this.currentContainer && r.item[0] != this.currentItem[0]) continue;
                    var i = this.options.toleranceElement ? e(this.options.toleranceElement, r.item) : r.item;
                    t || (r.width = i.outerWidth(), r.height = i.outerHeight());
                    var s = i.offset();
                    r.left = s.left, r.top = s.top
                }
                if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this);
                else
                    for (var n = this.containers.length - 1; n >= 0; n--) {
                        var s = this.containers[n].element.offset();
                        this.containers[n].containerCache.left = s.left, this.containers[n].containerCache.top = s.top, this.containers[n].containerCache.width = this.containers[n].element.outerWidth(), this.containers[n].containerCache.height = this.containers[n].element.outerHeight()
                }
                return this
            },
            _createPlaceholder: function (t) {
                var n = t || this,
                    r = n.options;
                if (!r.placeholder || r.placeholder.constructor == String) {
                    var i = r.placeholder;
                    r.placeholder = {
                        element: function () {
                            var t = e(document.createElement(n.currentItem[0].nodeName)).addClass(i || n.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
                            return i || (t.style.visibility = "hidden"), t
                        },
                        update: function (e, t) {
                            if (i && !r.forcePlaceholderSize) return;
                            t.height() || t.height(n.currentItem.innerHeight() - parseInt(n.currentItem.css("paddingTop") || 0, 10) - parseInt(n.currentItem.css("paddingBottom") || 0, 10)), t.width() || t.width(n.currentItem.innerWidth() - parseInt(n.currentItem.css("paddingLeft") || 0, 10) - parseInt(n.currentItem.css("paddingRight") || 0, 10))
                        }
                    }
                }
                n.placeholder = e(r.placeholder.element.call(n.element, n.currentItem)), n.currentItem.after(n.placeholder), r.placeholder.update(n, n.placeholder)
            },
            _contactContainers: function (t) {
                var n = null,
                    r = null;
                for (var i = this.containers.length - 1; i >= 0; i--) {
                    if (e.ui.contains(this.currentItem[0], this.containers[i].element[0])) continue;
                    if (this._intersectsWith(this.containers[i].containerCache)) {
                        if (n && e.ui.contains(this.containers[i].element[0], n.element[0])) continue;
                        n = this.containers[i], r = i
                    } else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", t, this._uiHash(this)), this.containers[i].containerCache.over = 0)
                }
                if (!n) return;
                if (this.containers.length === 1) this.containers[r]._trigger("over", t, this._uiHash(this)), this.containers[r].containerCache.over = 1;
                else if (this.currentContainer != this.containers[r]) {
                    var s = 1e4,
                        o = null,
                        u = this.positionAbs[this.containers[r].floating ? "left" : "top"];
                    for (var f = this.items.length - 1; f >= 0; f--) {
                        if (!e.ui.contains(this.containers[r].element[0], this.items[f].item[0])) continue;
                        var l = this.containers[r].floating ? this.items[f].item.offset().left : this.items[f].item.offset().top;
                        Math.abs(l - u) < s && (s = Math.abs(l - u), o = this.items[f], this.direction = l - u > 0 ? "down" : "up")
                    }
                    if (!o && !this.options.dropOnEmpty) return;
                    this.currentContainer = this.containers[r], o ? this._rearrange(t, o, null, !0) : this._rearrange(t, null, this.containers[r].element, !0), this._trigger("change", t, this._uiHash()), this.containers[r]._trigger("change", t, this._uiHash(this)), this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[r]._trigger("over", t, this._uiHash(this)), this.containers[r].containerCache.over = 1
                }
            },
            _createHelper: function (t) {
                var n = this.options,
                    r = e.isFunction(n.helper) ? e(n.helper.apply(this.element[0], [t, this.currentItem])) : n.helper == "clone" ? this.currentItem.clone() : this.currentItem;
                return r.parents("body").length || e(n.appendTo != "parent" ? n.appendTo : this.currentItem[0].parentNode)[0].appendChild(r[0]), r[0] == this.currentItem[0] && (this._storedCSS = {
                        width: this.currentItem[0].style.width,
                        height: this.currentItem[0].style.height,
                        position: this.currentItem.css("position"),
                        top: this.currentItem.css("top"),
                        left: this.currentItem.css("left")
                    }), (r[0].style.width == "" || n.forceHelperSize) && r.width(this.currentItem.width()), (r[0].style.height == "" || n.forceHelperSize) && r.height(this.currentItem.height()), r
            },
            _adjustOffsetFromHelper: function (t) {
                typeof t == "string" && (t = t.split(" ")), e.isArray(t) && (t = {
                        left: +t[0],
                        top: +t[1] || 0
                    }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
            },
            _getParentOffset: function () {
                this.offsetParent = this.helper.offsetParent();
                var t = this.offsetParent.offset();
                this.cssPosition == "absolute" && this.scrollParent[0] != document && e.ui.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop());
                if (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == "html" && e.browser.msie) t = {
                    top: 0,
                    left: 0
                };
                return {
                    top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                    left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                }
            },
            _getRelativeOffset: function () {
                if (this.cssPosition == "relative") {
                    var e = this.currentItem.position();
                    return {
                        top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                        left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                    }
                }
                return {
                    top: 0,
                    left: 0
                }
            },
            _cacheMargins: function () {
                this.margins = {
                    left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                    top: parseInt(this.currentItem.css("marginTop"), 10) || 0
                }
            },
            _cacheHelperProportions: function () {
                this.helperProportions = {
                    width: this.helper.outerWidth(),
                    height: this.helper.outerHeight()
                }
            },
            _setContainment: function () {
                var t = this.options;
                t.containment == "parent" && (t.containment = this.helper[0].parentNode);
                if (t.containment == "document" || t.containment == "window") this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e(t.containment == "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (e(t.containment == "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                if (!/^(document|window|parent)$/.test(t.containment)) {
                    var n = e(t.containment)[0],
                        r = e(t.containment).offset(),
                        i = e(n).css("overflow") != "hidden";
                    this.containment = [r.left + (parseInt(e(n).css("borderLeftWidth"), 10) || 0) + (parseInt(e(n).css("paddingLeft"), 10) || 0) - this.margins.left, r.top + (parseInt(e(n).css("borderTopWidth"), 10) || 0) + (parseInt(e(n).css("paddingTop"), 10) || 0) - this.margins.top, r.left + (i ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(e(n).css("borderLeftWidth"), 10) || 0) - (parseInt(e(n).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, r.top + (i ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(e(n).css("borderTopWidth"), 10) || 0) - (parseInt(e(n).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top]
                }
            },
            _convertPositionTo: function (t, n) {
                n || (n = this.position);
                var r = t == "absolute" ? 1 : -1,
                    i = this.options,
                    s = this.cssPosition != "absolute" || this.scrollParent[0] != document && !! e.ui.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                    o = /(html|body)/i.test(s[0].tagName);
                return {
                    top: n.top + this.offset.relative.top * r + this.offset.parent.top * r - (e.browser.safari && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : o ? 0 : s.scrollTop()) * r),
                    left: n.left + this.offset.relative.left * r + this.offset.parent.left * r - (e.browser.safari && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : o ? 0 : s.scrollLeft()) * r)
                }
            },
            _generatePosition: function (t) {
                var n = this.options,
                    r = this.cssPosition != "absolute" || this.scrollParent[0] != document && !! e.ui.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                    i = /(html|body)/i.test(r[0].tagName);
                this.cssPosition == "relative" && (this.scrollParent[0] == document || this.scrollParent[0] == this.offsetParent[0]) && (this.offset.relative = this._getRelativeOffset());
                var s = t.pageX,
                    o = t.pageY;
                if (this.originalPosition) {
                    this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (s = this.containment[0] + this.offset.click.left), t.pageY - this.offset.click.top < this.containment[1] && (o = this.containment[1] + this.offset.click.top), t.pageX - this.offset.click.left > this.containment[2] && (s = this.containment[2] + this.offset.click.left), t.pageY - this.offset.click.top > this.containment[3] && (o = this.containment[3] + this.offset.click.top));
                    if (n.grid) {
                        var u = this.originalPageY + Math.round((o - this.originalPageY) / n.grid[1]) * n.grid[1];
                        o = this.containment ? u - this.offset.click.top < this.containment[1] || u - this.offset.click.top > this.containment[3] ? u - this.offset.click.top < this.containment[1] ? u + n.grid[1] : u - n.grid[1] : u : u;
                        var f = this.originalPageX + Math.round((s - this.originalPageX) / n.grid[0]) * n.grid[0];
                        s = this.containment ? f - this.offset.click.left < this.containment[0] || f - this.offset.click.left > this.containment[2] ? f - this.offset.click.left < this.containment[0] ? f + n.grid[0] : f - n.grid[0] : f : f
                    }
                }
                return {
                    top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (e.browser.safari && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : i ? 0 : r.scrollTop()),
                    left: s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (e.browser.safari && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : i ? 0 : r.scrollLeft())
                }
            },
            _rearrange: function (e, t, n, r) {
                n ? n[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], this.direction == "down" ? t.item[0] : t.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
                var i = this,
                    s = this.counter;
                window.setTimeout(function () {
                    s == i.counter && i.refreshPositions(!r)
                }, 0)
            },
            _clear: function (t, n) {
                this.reverting = !1;
                var r = [],
                    i = this;
                !this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null;
                if (this.helper[0] == this.currentItem[0]) {
                    for (var s in this._storedCSS)
                        if (this._storedCSS[s] == "auto" || this._storedCSS[s] == "static") this._storedCSS[s] = "";
                    this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
                } else this.currentItem.show();
                this.fromOutside && !n && r.push(function (e) {
                    this._trigger("receive", e, this._uiHash(this.fromOutside))
                }), (this.fromOutside || this.domPosition.prev != this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent != this.currentItem.parent()[0]) && !n && r.push(function (e) {
                    this._trigger("update", e, this._uiHash())
                });
                if (!e.ui.contains(this.element[0], this.currentItem[0])) {
                    n || r.push(function (e) {
                        this._trigger("remove", e, this._uiHash())
                    });
                    for (var s = this.containers.length - 1; s >= 0; s--) e.ui.contains(this.containers[s].element[0], this.currentItem[0]) && !n && (r.push(function (e) {
                                return function (t) {
                                    e._trigger("receive", t, this._uiHash(this))
                                }
                            }.call(this, this.containers[s])), r.push(function (e) {
                                return function (t) {
                                    e._trigger("update", t, this._uiHash(this))
                                }
                            }.call(this, this.containers[s])))
                }
                for (var s = this.containers.length - 1; s >= 0; s--) n || r.push(function (e) {
                    return function (t) {
                        e._trigger("deactivate", t, this._uiHash(this))
                    }
                }.call(this, this.containers[s])), this.containers[s].containerCache.over && (r.push(function (e) {
                            return function (t) {
                                e._trigger("out", t, this._uiHash(this))
                            }
                        }.call(this, this.containers[s])), this.containers[s].containerCache.over = 0);
                this._storedCursor && e("body").css("cursor", this._storedCursor), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", this._storedZIndex == "auto" ? "" : this._storedZIndex), this.dragging = !1;
                if (this.cancelHelperRemoval) {
                    if (!n) {
                        this._trigger("beforeStop", t, this._uiHash());
                        for (var s = 0; s < r.length; s++) r[s].call(this, t);
                        this._trigger("stop", t, this._uiHash())
                    }
                    return !1
                }
                n || this._trigger("beforeStop", t, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.helper[0] != this.currentItem[0] && this.helper.remove(), this.helper = null;
                if (!n) {
                    for (var s = 0; s < r.length; s++) r[s].call(this, t);
                    this._trigger("stop", t, this._uiHash())
                }
                return this.fromOutside = !1, !0
            },
            _trigger: function () {
                e.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
            },
            _uiHash: function (t) {
                var n = t || this;
                return {
                    helper: n.helper,
                    placeholder: n.placeholder || e([]),
                    position: n.position,
                    originalPosition: n.originalPosition,
                    offset: n.positionAbs,
                    item: n.currentItem,
                    sender: t ? t.element : null
                }
            }
        }), e.extend(e.ui.sortable, {
            version: "1.8.21"
        })
}(jQuery),
function (e, t) {
    var n = 0;
    e.widget("ui.autocomplete", {
            options: {
                appendTo: "body",
                autoFocus: !1,
                delay: 300,
                minLength: 1,
                position: {
                    my: "left top",
                    at: "left bottom",
                    collision: "none"
                },
                source: null
            },
            pending: 0,
            _create: function () {
                var t = this,
                    n = this.element[0].ownerDocument,
                    r;
                this.isMultiLine = this.element.is("textarea"), this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off").attr({
                        role: "textbox",
                        "aria-autocomplete": "list",
                        "aria-haspopup": "true"
                    }).bind("keydown.autocomplete", function (n) {
                        if (t.options.disabled || t.element.propAttr("readOnly")) return;
                        r = !1;
                        var i = e.ui.keyCode;
                        switch (n.keyCode) {
                        case i.PAGE_UP:
                            t._move("previousPage", n);
                            break;
                        case i.PAGE_DOWN:
                            t._move("nextPage", n);
                            break;
                        case i.UP:
                            t._keyEvent("previous", n);
                            break;
                        case i.DOWN:
                            t._keyEvent("next", n);
                            break;
                        case i.ENTER:
                        case i.NUMPAD_ENTER:
                            t.menu.active && (r = !0, n.preventDefault());
                        case i.TAB:
                            if (!t.menu.active) return;
                            t.menu.select(n);
                            break;
                        case i.ESCAPE:
                            t.element.val(t.term), t.close(n);
                            break;
                        default:
                            clearTimeout(t.searching), t.searching = setTimeout(function () {
                                t.term != t.element.val() && (t.selectedItem = null, t.search(null, n))
                            }, t.options.delay)
                        }
                    }).bind("keypress.autocomplete", function (e) {
                        r && (r = !1, e.preventDefault())
                    }).bind("focus.autocomplete", function () {
                        if (t.options.disabled) return;
                        t.selectedItem = null, t.previous = t.element.val()
                    }).bind("blur.autocomplete", function (e) {
                        if (t.options.disabled) return;
                        clearTimeout(t.searching), t.closing = setTimeout(function () {
                            t.close(e), t._change(e)
                        }, 150)
                    }), this._initSource(), this.menu = e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo || "body", n)[0]).mousedown(function (n) {
                        var r = t.menu.element[0];
                        e(n.target).closest(".ui-menu-item").length || setTimeout(function () {
                            e(document).one("mousedown", function (n) {
                                n.target !== t.element[0] && n.target !== r && !e.ui.contains(r, n.target) && t.close()
                            })
                        }, 1), setTimeout(function () {
                            clearTimeout(t.closing)
                        }, 13)
                    }).menu({
                        focus: function (e, n) {
                            var r = n.item.data("item.autocomplete");
                            !1 !== t._trigger("focus", e, {
                                    item: r
                                }) && /^key/.test(e.originalEvent.type) && t.element.val(r.value)
                        },
                        selected: function (e, r) {
                            var i = r.item.data("item.autocomplete"),
                                s = t.previous;
                            t.element[0] !== n.activeElement && (t.element.focus(), t.previous = s, setTimeout(function () {
                                        t.previous = s, t.selectedItem = i
                                    }, 1)), !1 !== t._trigger("select", e, {
                                    item: i
                                }) && t.element.val(i.value), t.term = t.element.val(), t.close(e), t.selectedItem = i
                        },
                        blur: function (e, n) {
                            t.menu.element.is(":visible") && t.element.val() !== t.term && t.element.val(t.term)
                        }
                    }).zIndex(this.element.zIndex() + 1).css({
                        top: 0,
                        left: 0
                    }).hide().data("menu"), e.fn.bgiframe && this.menu.element.bgiframe(), t.beforeunloadHandler = function () {
                    t.element.removeAttr("autocomplete")
                }, e(window).bind("beforeunload", t.beforeunloadHandler)
            },
            destroy: function () {
                this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"), this.menu.element.remove(), e(window).unbind("beforeunload", this.beforeunloadHandler), e.Widget.prototype.destroy.call(this)
            },
            _setOption: function (t, n) {
                e.Widget.prototype._setOption.apply(this, arguments), t === "source" && this._initSource(), t === "appendTo" && this.menu.element.appendTo(e(n || "body", this.element[0].ownerDocument)[0]), t === "disabled" && n && this.xhr && this.xhr.abort()
            },
            _initSource: function () {
                var t = this,
                    n, r;
                e.isArray(this.options.source) ? (n = this.options.source, this.source = function (t, r) {
                    r(e.ui.autocomplete.filter(n, t.term))
                }) : typeof this.options.source == "string" ? (r = this.options.source, this.source = function (n, i) {
                    t.xhr && t.xhr.abort(), t.xhr = e.ajax({
                            url: r,
                            data: n,
                            dataType: "json",
                            success: function (e, t) {
                                i(e)
                            },
                            error: function () {
                                i([])
                            }
                        })
                }) : this.source = this.options.source
            },
            search: function (e, t) {
                e = e != null ? e : this.element.val(), this.term = this.element.val();
                if (e.length < this.options.minLength) return this.close(t);
                clearTimeout(this.closing);
                if (this._trigger("search", t) === !1) return;
                return this._search(e)
            },
            _search: function (e) {
                this.pending++, this.element.addClass("ui-autocomplete-loading"), this.source({
                        term: e
                    }, this._response())
            },
            _response: function () {
                var e = this,
                    t = ++n;
                return function (r) {
                    t === n && e.__response(r), e.pending--, e.pending || e.element.removeClass("ui-autocomplete-loading")
                }
            },
            __response: function (e) {
                !this.options.disabled && e && e.length ? (e = this._normalize(e), this._suggest(e), this._trigger("open")) : this.close()
            },
            close: function (e) {
                clearTimeout(this.closing), this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.deactivate(), this._trigger("close", e))
            },
            _change: function (e) {
                this.previous !== this.element.val() && this._trigger("change", e, {
                        item: this.selectedItem
                    })
            },
            _normalize: function (t) {
                return t.length && t[0].label && t[0].value ? t : e.map(t, function (t) {
                    return typeof t == "string" ? {
                        label: t,
                        value: t
                    } : e.extend({
                            label: t.label || t.value,
                            value: t.value || t.label
                        }, t)
                })
            },
            _suggest: function (t) {
                var n = this.menu.element.empty().zIndex(this.element.zIndex() + 1);
                this._renderMenu(n, t), this.menu.deactivate(), this.menu.refresh(), n.show(), this._resizeMenu(), n.position(e.extend({
                            of: this.element
                        }, this.options.position)), this.options.autoFocus && this.menu.next(new e.Event("mouseover"))
            },
            _resizeMenu: function () {
                var e = this.menu.element;
                e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()))
            },
            _renderMenu: function (t, n) {
                var r = this;
                e.each(n, function (e, n) {
                    r._renderItem(t, n)
                })
            },
            _renderItem: function (t, n) {
                return e("<li></li>").data("item.autocomplete", n).append(e("<a></a>").text(n.label)).appendTo(t)
            },
            _move: function (e, t) {
                if (!this.menu.element.is(":visible")) {
                    this.search(null, t);
                    return
                }
                if (this.menu.first() && /^previous/.test(e) || this.menu.last() && /^next/.test(e)) {
                    this.element.val(this.term), this.menu.deactivate();
                    return
                }
                this.menu[e](t)
            },
            widget: function () {
                return this.menu.element
            },
            _keyEvent: function (e, t) {
                if (!this.isMultiLine || this.menu.element.is(":visible")) this._move(e, t), t.preventDefault()
            }
        }), e.extend(e.ui.autocomplete, {
            escapeRegex: function (e) {
                return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")
            },
            filter: function (t, n) {
                var r = new RegExp(e.ui.autocomplete.escapeRegex(n), "i");
                return e.grep(t, function (e) {
                    return r.test(e.label || e.value || e)
                })
            }
        })
}(jQuery),
function (e) {
    e.widget("ui.menu", {
            _create: function () {
                var t = this;
                this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({
                        role: "listbox",
                        "aria-activedescendant": "ui-active-menuitem"
                    }).click(function (n) {
                        if (!e(n.target).closest(".ui-menu-item a").length) return;
                        n.preventDefault(), t.select(n)
                    }), this.refresh()
            },
            refresh: function () {
                var t = this,
                    n = this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "menuitem");
                n.children("a").addClass("ui-corner-all").attr("tabindex", -1).mouseenter(function (n) {
                    t.activate(n, e(this).parent())
                }).mouseleave(function () {
                    t.deactivate()
                })
            },
            activate: function (e, t) {
                this.deactivate();
                if (this.hasScroll()) {
                    var n = t.offset().top - this.element.offset().top,
                        r = this.element.scrollTop(),
                        i = this.element.height();
                    n < 0 ? this.element.scrollTop(r + n) : n >= i && this.element.scrollTop(r + n - i + t.height())
                }
                this.active = t.eq(0).children("a").addClass("ui-state-hover").attr("id", "ui-active-menuitem").end(), this._trigger("focus", e, {
                        item: t
                    })
            },
            deactivate: function () {
                if (!this.active) return;
                this.active.children("a").removeClass("ui-state-hover").removeAttr("id"), this._trigger("blur"), this.active = null
            },
            next: function (e) {
                this.move("next", ".ui-menu-item:first", e)
            },
            previous: function (e) {
                this.move("prev", ".ui-menu-item:last", e)
            },
            first: function () {
                return this.active && !this.active.prevAll(".ui-menu-item").length
            },
            last: function () {
                return this.active && !this.active.nextAll(".ui-menu-item").length
            },
            move: function (e, t, n) {
                if (!this.active) {
                    this.activate(n, this.element.children(t));
                    return
                }
                var r = this.active[e + "All"](".ui-menu-item").eq(0);
                r.length ? this.activate(n, r) : this.activate(n, this.element.children(t))
            },
            nextPage: function (t) {
                if (this.hasScroll()) {
                    if (!this.active || this.last()) {
                        this.activate(t, this.element.children(".ui-menu-item:first"));
                        return
                    }
                    var n = this.active.offset().top,
                        r = this.element.height(),
                        i = this.element.children(".ui-menu-item").filter(function () {
                            var t = e(this).offset().top - n - r + e(this).height();
                            return t < 10 && t > -10
                        });
                    i.length || (i = this.element.children(".ui-menu-item:last")), this.activate(t, i)
                } else this.activate(t, this.element.children(".ui-menu-item").filter(!this.active || this.last() ? ":first" : ":last"))
            },
            previousPage: function (t) {
                if (this.hasScroll()) {
                    if (!this.active || this.first()) {
                        this.activate(t, this.element.children(".ui-menu-item:last"));
                        return
                    }
                    var n = this.active.offset().top,
                        r = this.element.height(),
                        i = this.element.children(".ui-menu-item").filter(function () {
                            var t = e(this).offset().top - n + r - e(this).height();
                            return t < 10 && t > -10
                        });
                    i.length || (i = this.element.children(".ui-menu-item:first")), this.activate(t, i)
                } else this.activate(t, this.element.children(".ui-menu-item").filter(!this.active || this.first() ? ":last" : ":first"))
            },
            hasScroll: function () {
                return this.element.height() < this.element[e.fn.prop ? "prop" : "attr"]("scrollHeight")
            },
            select: function (e) {
                this._trigger("selected", e, {
                        item: this.active
                    })
            }
        })
}(jQuery),
function ($, undefined) {
    function Datepicker() {
        this.debug = !1, this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: !1,
            showMonthAfterYear: !1,
            yearSuffix: ""
        }, this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: !1,
            hideIfNoPrevNext: !1,
            navigationAsDateFormat: !1,
            gotoCurrent: !1,
            changeMonth: !1,
            changeYear: !1,
            yearRange: "c-10:c+10",
            showOtherMonths: !1,
            selectOtherMonths: !1,
            showWeek: !1,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null,
            maxDate: null,
            duration: "fast",
            beforeShowDay: null,
            beforeShow: null,
            onSelect: null,
            onChangeMonthYear: null,
            onClose: null,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: !0,
            showButtonPanel: !1,
            autoSize: !1,
            disabled: !1
        }, $.extend(this._defaults, this.regional[""]), this.dpDiv = bindHover($('<div id="' + this._mainDivId + '" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))
    }

    function bindHover(e) {
        var t = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return e.bind("mouseout", function (e) {
            var n = $(e.target).closest(t);
            if (!n.length) return;
            n.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")
        }).bind("mouseover", function (n) {
            var r = $(n.target).closest(t);
            if ($.datepicker._isDisabledDatepicker(instActive.inline ? e.parent()[0] : instActive.input[0]) || !r.length) return;
            r.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), r.addClass("ui-state-hover"), r.hasClass("ui-datepicker-prev") && r.addClass("ui-datepicker-prev-hover"), r.hasClass("ui-datepicker-next") && r.addClass("ui-datepicker-next-hover")
        })
    }

    function extendRemove(e, t) {
        $.extend(e, t);
        for (var n in t)
            if (t[n] == null || t[n] == undefined) e[n] = t[n];
        return e
    }

    function isArray(e) {
        return e && ($.browser.safari && typeof e == "object" && e.length || e.constructor && e.constructor.toString().match(/\Array\(\)/))
    }
    $.extend($.ui, {
            datepicker: {
                version: "1.8.21"
            }
        });
    var PROP_NAME = "datepicker",
        dpuuid = (new Date).getTime(),
        instActive;
    $.extend(Datepicker.prototype, {
            markerClassName: "hasDatepicker",
            maxRows: 4,
            log: function () {
                this.debug && console.log.apply("", arguments)
            },
            _widgetDatepicker: function () {
                return this.dpDiv
            },
            setDefaults: function (e) {
                return extendRemove(this._defaults, e || {}), this
            },
            _attachDatepicker: function (target, settings) {
                var inlineSettings = null;
                for (var attrName in this._defaults) {
                    var attrValue = target.getAttribute("date:" + attrName);
                    if (attrValue) {
                        inlineSettings = inlineSettings || {};
                        try {
                            inlineSettings[attrName] = eval(attrValue)
                        } catch (err) {
                            inlineSettings[attrName] = attrValue
                        }
                    }
                }
                var nodeName = target.nodeName.toLowerCase(),
                    inline = nodeName == "div" || nodeName == "span";
                target.id || (this.uuid += 1, target.id = "dp" + this.uuid);
                var inst = this._newInst($(target), inline);
                inst.settings = $.extend({}, settings || {}, inlineSettings || {}), nodeName == "input" ? this._connectDatepicker(target, inst) : inline && this._inlineDatepicker(target, inst)
            },
            _newInst: function (e, t) {
                var n = e[0].id.replace(/([^A-Za-z0-9_-])/g, "\\\\$1");
                return {
                    id: n,
                    input: e,
                    selectedDay: 0,
                    selectedMonth: 0,
                    selectedYear: 0,
                    drawMonth: 0,
                    drawYear: 0,
                    inline: t,
                    dpDiv: t ? bindHover($('<div class="' + this._inlineClass + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')) : this.dpDiv
                }
            },
            _connectDatepicker: function (e, t) {
                var n = $(e);
                t.append = $([]), t.trigger = $([]);
                if (n.hasClass(this.markerClassName)) return;
                this._attachments(n, t), n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker", function (e, n, r) {
                    t.settings[n] = r
                }).bind("getData.datepicker", function (e, n) {
                    return this._get(t, n)
                }), this._autoSize(t), $.data(e, PROP_NAME, t), t.settings.disabled && this._disableDatepicker(e)
            },
            _attachments: function (e, t) {
                var n = this._get(t, "appendText"),
                    r = this._get(t, "isRTL");
                t.append && t.append.remove(), n && (t.append = $('<span class="' + this._appendClass + '">' + n + "</span>"), e[r ? "before" : "after"](t.append)), e.unbind("focus", this._showDatepicker), t.trigger && t.trigger.remove();
                var i = this._get(t, "showOn");
                (i == "focus" || i == "both") && e.focus(this._showDatepicker);
                if (i == "button" || i == "both") {
                    var s = this._get(t, "buttonText"),
                        o = this._get(t, "buttonImage");
                    t.trigger = $(this._get(t, "buttonImageOnly") ? $("<img/>").addClass(this._triggerClass).attr({
                                src: o,
                                alt: s,
                                title: s
                            }) : $('<button type="button"></button>').addClass(this._triggerClass).html(o == "" ? s : $("<img/>").attr({
                                    src: o,
                                    alt: s,
                                    title: s
                                }))), e[r ? "before" : "after"](t.trigger), t.trigger.click(function () {
                            return $.datepicker._datepickerShowing && $.datepicker._lastInput == e[0] ? $.datepicker._hideDatepicker() : $.datepicker._datepickerShowing && $.datepicker._lastInput != e[0] ? ($.datepicker._hideDatepicker(), $.datepicker._showDatepicker(e[0])) : $.datepicker._showDatepicker(e[0]), !1
                        })
                }
            },
            _autoSize: function (e) {
                if (this._get(e, "autoSize") && !e.inline) {
                    var t = new Date(2009, 11, 20),
                        n = this._get(e, "dateFormat");
                    if (n.match(/[DM]/)) {
                        var r = function (e) {
                            var t = 0,
                                n = 0;
                            for (var r = 0; r < e.length; r++) e[r].length > t && (t = e[r].length, n = r);
                            return n
                        };
                        t.setMonth(r(this._get(e, n.match(/MM/) ? "monthNames" : "monthNamesShort"))), t.setDate(r(this._get(e, n.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - t.getDay())
                    }
                    e.input.attr("size", this._formatDate(e, t).length)
                }
            },
            _inlineDatepicker: function (e, t) {
                var n = $(e);
                if (n.hasClass(this.markerClassName)) return;
                n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker", function (e, n, r) {
                    t.settings[n] = r
                }).bind("getData.datepicker", function (e, n) {
                    return this._get(t, n)
                }), $.data(e, PROP_NAME, t), this._setDate(t, this._getDefaultDate(t), !0), this._updateDatepicker(t), this._updateAlternate(t), t.settings.disabled && this._disableDatepicker(e), t.dpDiv.css("display", "block")
            },
            _dialogDatepicker: function (e, t, n, r, i) {
                var s = this._dialogInst;
                if (!s) {
                    this.uuid += 1;
                    var o = "dp" + this.uuid;
                    this._dialogInput = $('<input type="text" id="' + o + '" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'), this._dialogInput.keydown(this._doKeyDown), $("body").append(this._dialogInput), s = this._dialogInst = this._newInst(this._dialogInput, !1), s.settings = {}, $.data(this._dialogInput[0], PROP_NAME, s)
                }
                extendRemove(s.settings, r || {}), t = t && t.constructor == Date ? this._formatDate(s, t) : t, this._dialogInput.val(t), this._pos = i ? i.length ? i : [i.pageX, i.pageY] : null;
                if (!this._pos) {
                    var u = document.documentElement.clientWidth,
                        a = document.documentElement.clientHeight,
                        f = document.documentElement.scrollLeft || document.body.scrollLeft,
                        l = document.documentElement.scrollTop || document.body.scrollTop;
                    this._pos = [u / 2 - 100 + f, a / 2 - 150 + l]
                }
                return this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), s.settings.onSelect = n, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), $.blockUI && $.blockUI(this.dpDiv), $.data(this._dialogInput[0], PROP_NAME, s), this
            },
            _destroyDatepicker: function (e) {
                var t = $(e),
                    n = $.data(e, PROP_NAME);
                if (!t.hasClass(this.markerClassName)) return;
                var r = e.nodeName.toLowerCase();
                $.removeData(e, PROP_NAME), r == "input" ? (n.append.remove(), n.trigger.remove(), t.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : (r == "div" || r == "span") && t.removeClass(this.markerClassName).empty()
            },
            _enableDatepicker: function (e) {
                var t = $(e),
                    n = $.data(e, PROP_NAME);
                if (!t.hasClass(this.markerClassName)) return;
                var r = e.nodeName.toLowerCase();
                if (r == "input") e.disabled = !1, n.trigger.filter("button").each(function () {
                    this.disabled = !1
                }).end().filter("img").css({
                        opacity: "1.0",
                        cursor: ""
                    });
                else if (r == "div" || r == "span") {
                    var i = t.children("." + this._inlineClass);
                    i.children().removeClass("ui-state-disabled"), i.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")
                }
                this._disabledInputs = $.map(this._disabledInputs, function (t) {
                    return t == e ? null : t
                })
            },
            _disableDatepicker: function (e) {
                var t = $(e),
                    n = $.data(e, PROP_NAME);
                if (!t.hasClass(this.markerClassName)) return;
                var r = e.nodeName.toLowerCase();
                if (r == "input") e.disabled = !0, n.trigger.filter("button").each(function () {
                    this.disabled = !0
                }).end().filter("img").css({
                        opacity: "0.5",
                        cursor: "default"
                    });
                else if (r == "div" || r == "span") {
                    var i = t.children("." + this._inlineClass);
                    i.children().addClass("ui-state-disabled"), i.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled", "disabled")
                }
                this._disabledInputs = $.map(this._disabledInputs, function (t) {
                    return t == e ? null : t
                }), this._disabledInputs[this._disabledInputs.length] = e
            },
            _isDisabledDatepicker: function (e) {
                if (!e) return !1;
                for (var t = 0; t < this._disabledInputs.length; t++)
                    if (this._disabledInputs[t] == e) return !0;
                return !1
            },
            _getInst: function (e) {
                try {
                    return $.data(e, PROP_NAME)
                } catch (t) {
                    throw "Missing instance data for this datepicker"
                }
            },
            _optionDatepicker: function (e, t, n) {
                var r = this._getInst(e);
                if (arguments.length == 2 && typeof t == "string") return t == "defaults" ? $.extend({}, $.datepicker._defaults) : r ? t == "all" ? $.extend({}, r.settings) : this._get(r, t) : null;
                var i = t || {};
                typeof t == "string" && (i = {}, i[t] = n);
                if (r) {
                    this._curInst == r && this._hideDatepicker();
                    var s = this._getDateDatepicker(e, !0),
                        o = this._getMinMaxDate(r, "min"),
                        u = this._getMinMaxDate(r, "max");
                    extendRemove(r.settings, i), o !== null && i.dateFormat !== undefined && i.minDate === undefined && (r.settings.minDate = this._formatDate(r, o)), u !== null && i.dateFormat !== undefined && i.maxDate === undefined && (r.settings.maxDate = this._formatDate(r, u)), this._attachments($(e), r), this._autoSize(r), this._setDate(r, s), this._updateAlternate(r), this._updateDatepicker(r)
                }
            },
            _changeDatepicker: function (e, t, n) {
                this._optionDatepicker(e, t, n)
            },
            _refreshDatepicker: function (e) {
                var t = this._getInst(e);
                t && this._updateDatepicker(t)
            },
            _setDateDatepicker: function (e, t) {
                var n = this._getInst(e);
                n && (this._setDate(n, t), this._updateDatepicker(n), this._updateAlternate(n))
            },
            _getDateDatepicker: function (e, t) {
                var n = this._getInst(e);
                return n && !n.inline && this._setDateFromField(n, t), n ? this._getDate(n) : null
            },
            _doKeyDown: function (e) {
                var t = $.datepicker._getInst(e.target),
                    n = !0,
                    r = t.dpDiv.is(".ui-datepicker-rtl");
                t._keyEvent = !0;
                if ($.datepicker._datepickerShowing) switch (e.keyCode) {
                case 9:
                    $.datepicker._hideDatepicker(), n = !1;
                    break;
                case 13:
                    var i = $("td." + $.datepicker._dayOverClass + ":not(." + $.datepicker._currentClass + ")", t.dpDiv);
                    i[0] && $.datepicker._selectDay(e.target, t.selectedMonth, t.selectedYear, i[0]);
                    var s = $.datepicker._get(t, "onSelect");
                    if (s) {
                        var o = $.datepicker._formatDate(t);
                        s.apply(t.input ? t.input[0] : null, [o, t])
                    } else $.datepicker._hideDatepicker();
                    return !1;
                case 27:
                    $.datepicker._hideDatepicker();
                    break;
                case 33:
                    $.datepicker._adjustDate(e.target, e.ctrlKey ? -$.datepicker._get(t, "stepBigMonths") : -$.datepicker._get(t, "stepMonths"), "M");
                    break;
                case 34:
                    $.datepicker._adjustDate(e.target, e.ctrlKey ? +$.datepicker._get(t, "stepBigMonths") : +$.datepicker._get(t, "stepMonths"), "M");
                    break;
                case 35:
                    (e.ctrlKey || e.metaKey) && $.datepicker._clearDate(e.target), n = e.ctrlKey || e.metaKey;
                    break;
                case 36:
                    (e.ctrlKey || e.metaKey) && $.datepicker._gotoToday(e.target), n = e.ctrlKey || e.metaKey;
                    break;
                case 37:
                    (e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, r ? 1 : -1, "D"), n = e.ctrlKey || e.metaKey, e.originalEvent.altKey && $.datepicker._adjustDate(e.target, e.ctrlKey ? -$.datepicker._get(t, "stepBigMonths") : -$.datepicker._get(t, "stepMonths"), "M");
                    break;
                case 38:
                    (e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, -7, "D"), n = e.ctrlKey || e.metaKey;
                    break;
                case 39:
                    (e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, r ? -1 : 1, "D"), n = e.ctrlKey || e.metaKey, e.originalEvent.altKey && $.datepicker._adjustDate(e.target, e.ctrlKey ? +$.datepicker._get(t, "stepBigMonths") : +$.datepicker._get(t, "stepMonths"), "M");
                    break;
                case 40:
                    (e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, 7, "D"), n = e.ctrlKey || e.metaKey;
                    break;
                default:
                    n = !1
                } else e.keyCode == 36 && e.ctrlKey ? $.datepicker._showDatepicker(this) : n = !1;
                n && (e.preventDefault(), e.stopPropagation())
            },
            _doKeyPress: function (e) {
                var t = $.datepicker._getInst(e.target);
                if ($.datepicker._get(t, "constrainInput")) {
                    var n = $.datepicker._possibleChars($.datepicker._get(t, "dateFormat")),
                        r = String.fromCharCode(e.charCode == undefined ? e.keyCode : e.charCode);
                    return e.ctrlKey || e.metaKey || r < " " || !n || n.indexOf(r) > -1
                }
            },
            _doKeyUp: function (e) {
                var t = $.datepicker._getInst(e.target);
                if (t.input.val() != t.lastVal) try {
                    var n = $.datepicker.parseDate($.datepicker._get(t, "dateFormat"), t.input ? t.input.val() : null, $.datepicker._getFormatConfig(t));
                    n && ($.datepicker._setDateFromField(t), $.datepicker._updateAlternate(t), $.datepicker._updateDatepicker(t))
                } catch (r) {
                    $.datepicker.log(r)
                }
                return !0
            },
            _showDatepicker: function (e) {
                e = e.target || e, e.nodeName.toLowerCase() != "input" && (e = $("input", e.parentNode)[0]);
                if ($.datepicker._isDisabledDatepicker(e) || $.datepicker._lastInput == e) return;
                var t = $.datepicker._getInst(e);
                $.datepicker._curInst && $.datepicker._curInst != t && ($.datepicker._curInst.dpDiv.stop(!0, !0), t && $.datepicker._datepickerShowing && $.datepicker._hideDatepicker($.datepicker._curInst.input[0]));
                var n = $.datepicker._get(t, "beforeShow"),
                    r = n ? n.apply(e, [e, t]) : {};
                if (r === !1) return;
                extendRemove(t.settings, r), t.lastVal = null, $.datepicker._lastInput = e, $.datepicker._setDateFromField(t), $.datepicker._inDialog && (e.value = ""), $.datepicker._pos || ($.datepicker._pos = $.datepicker._findPos(e), $.datepicker._pos[1] += e.offsetHeight);
                var i = !1;
                $(e).parents().each(function () {
                    return i |= $(this).css("position") == "fixed", !i
                }), i && $.browser.opera && ($.datepicker._pos[0] -= document.documentElement.scrollLeft, $.datepicker._pos[1] -= document.documentElement.scrollTop);
                var s = {
                    left: $.datepicker._pos[0],
                    top: $.datepicker._pos[1]
                };
                $.datepicker._pos = null, t.dpDiv.empty(), t.dpDiv.css({
                        position: "absolute",
                        display: "block",
                        top: "-1000px"
                    }), $.datepicker._updateDatepicker(t), s = $.datepicker._checkOffset(t, s, i), t.dpDiv.css({
                        position: $.datepicker._inDialog && $.blockUI ? "static" : i ? "fixed" : "absolute",
                        display: "none",
                        left: s.left + "px",
                        top: s.top + "px"
                    });
                if (!t.inline) {
                    var o = $.datepicker._get(t, "showAnim"),
                        u = $.datepicker._get(t, "duration"),
                        a = function () {
                            var e = t.dpDiv.find("iframe.ui-datepicker-cover");
                            if ( !! e.length) {
                                var n = $.datepicker._getBorders(t.dpDiv);
                                e.css({
                                        left: -n[0],
                                        top: -n[1],
                                        width: t.dpDiv.outerWidth(),
                                        height: t.dpDiv.outerHeight()
                                    })
                            }
                        };
                    t.dpDiv.zIndex($(e).zIndex() + 1), $.datepicker._datepickerShowing = !0, $.effects && $.effects[o] ? t.dpDiv.show(o, $.datepicker._get(t, "showOptions"), u, a) : t.dpDiv[o || "show"](o ? u : null, a), (!o || !u) && a(), t.input.is(":visible") && !t.input.is(":disabled") && t.input.focus(), $.datepicker._curInst = t
                }
            },
            _updateDatepicker: function (e) {
                var t = this;
                t.maxRows = 4;
                var n = $.datepicker._getBorders(e.dpDiv);
                instActive = e, e.dpDiv.empty().append(this._generateHTML(e));
                var r = e.dpDiv.find("iframe.ui-datepicker-cover");
                !r.length || r.css({
                        left: -n[0],
                        top: -n[1],
                        width: e.dpDiv.outerWidth(),
                        height: e.dpDiv.outerHeight()
                    }), e.dpDiv.find("." + this._dayOverClass + " a").mouseover();
                var i = this._getNumberOfMonths(e),
                    s = i[1],
                    o = 17;
                e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), s > 1 && e.dpDiv.addClass("ui-datepicker-multi-" + s).css("width", o * s + "em"), e.dpDiv[(i[0] != 1 || i[1] != 1 ? "add" : "remove") + "Class"]("ui-datepicker-multi"), e.dpDiv[(this._get(e, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"),
                e == $.datepicker._curInst && $.datepicker._datepickerShowing && e.input && e.input.is(":visible") && !e.input.is(":disabled") && e.input[0] != document.activeElement && e.input.focus();
                if (e.yearshtml) {
                    var u = e.yearshtml;
                    setTimeout(function () {
                        u === e.yearshtml && e.yearshtml && e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml), u = e.yearshtml = null
                    }, 0)
                }
            },
            _getBorders: function (e) {
                var t = function (e) {
                    return {
                        thin: 1,
                        medium: 2,
                        thick: 3
                    }[e] || e
                };
                return [parseFloat(t(e.css("border-left-width"))), parseFloat(t(e.css("border-top-width")))]
            },
            _checkOffset: function (e, t, n) {
                var r = e.dpDiv.outerWidth(),
                    i = e.dpDiv.outerHeight(),
                    s = e.input ? e.input.outerWidth() : 0,
                    o = e.input ? e.input.outerHeight() : 0,
                    u = document.documentElement.clientWidth + $(document).scrollLeft(),
                    a = document.documentElement.clientHeight + $(document).scrollTop();
                return t.left -= this._get(e, "isRTL") ? r - s : 0, t.left -= n && t.left == e.input.offset().left ? $(document).scrollLeft() : 0, t.top -= n && t.top == e.input.offset().top + o ? $(document).scrollTop() : 0, t.left -= Math.min(t.left, t.left + r > u && u > r ? Math.abs(t.left + r - u) : 0), t.top -= Math.min(t.top, t.top + i > a && a > i ? Math.abs(i + o) : 0), t
            },
            _findPos: function (e) {
                var t = this._getInst(e),
                    n = this._get(t, "isRTL");
                while (e && (e.type == "hidden" || e.nodeType != 1 || $.expr.filters.hidden(e))) e = e[n ? "previousSibling" : "nextSibling"];
                var r = $(e).offset();
                return [r.left, r.top]
            },
            _hideDatepicker: function (e) {
                var t = this._curInst;
                if (!t || e && t != $.data(e, PROP_NAME)) return;
                if (this._datepickerShowing) {
                    var n = this._get(t, "showAnim"),
                        r = this._get(t, "duration"),
                        i = function () {
                            $.datepicker._tidyDialog(t)
                        };
                    $.effects && $.effects[n] ? t.dpDiv.hide(n, $.datepicker._get(t, "showOptions"), r, i) : t.dpDiv[n == "slideDown" ? "slideUp" : n == "fadeIn" ? "fadeOut" : "hide"](n ? r : null, i), n || i(), this._datepickerShowing = !1;
                    var s = this._get(t, "onClose");
                    s && s.apply(t.input ? t.input[0] : null, [t.input ? t.input.val() : "", t]), this._lastInput = null, this._inDialog && (this._dialogInput.css({
                                position: "absolute",
                                left: "0",
                                top: "-100px"
                            }), $.blockUI && ($.unblockUI(), $("body").append(this.dpDiv))), this._inDialog = !1
                }
            },
            _tidyDialog: function (e) {
                e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
            },
            _checkExternalClick: function (e) {
                if (!$.datepicker._curInst) return;
                var t = $(e.target),
                    n = $.datepicker._getInst(t[0]);
                (t[0].id != $.datepicker._mainDivId && t.parents("#" + $.datepicker._mainDivId).length == 0 && !t.hasClass($.datepicker.markerClassName) && !t.closest("." + $.datepicker._triggerClass).length && $.datepicker._datepickerShowing && (!$.datepicker._inDialog || !$.blockUI) || t.hasClass($.datepicker.markerClassName) && $.datepicker._curInst != n) && $.datepicker._hideDatepicker()
            },
            _adjustDate: function (e, t, n) {
                var r = $(e),
                    i = this._getInst(r[0]);
                if (this._isDisabledDatepicker(r[0])) return;
                this._adjustInstDate(i, t + (n == "M" ? this._get(i, "showCurrentAtPos") : 0), n), this._updateDatepicker(i)
            },
            _gotoToday: function (e) {
                var t = $(e),
                    n = this._getInst(t[0]);
                if (this._get(n, "gotoCurrent") && n.currentDay) n.selectedDay = n.currentDay, n.drawMonth = n.selectedMonth = n.currentMonth, n.drawYear = n.selectedYear = n.currentYear;
                else {
                    var r = new Date;
                    n.selectedDay = r.getDate(), n.drawMonth = n.selectedMonth = r.getMonth(), n.drawYear = n.selectedYear = r.getFullYear()
                }
                this._notifyChange(n), this._adjustDate(t)
            },
            _selectMonthYear: function (e, t, n) {
                var r = $(e),
                    i = this._getInst(r[0]);
                i["selected" + (n == "M" ? "Month" : "Year")] = i["draw" + (n == "M" ? "Month" : "Year")] = parseInt(t.options[t.selectedIndex].value, 10), this._notifyChange(i), this._adjustDate(r)
            },
            _selectDay: function (e, t, n, r) {
                var i = $(e);
                if ($(r).hasClass(this._unselectableClass) || this._isDisabledDatepicker(i[0])) return;
                var s = this._getInst(i[0]);
                s.selectedDay = s.currentDay = $("a", r).html(), s.selectedMonth = s.currentMonth = t, s.selectedYear = s.currentYear = n, this._selectDate(e, this._formatDate(s, s.currentDay, s.currentMonth, s.currentYear))
            },
            _clearDate: function (e) {
                var t = $(e),
                    n = this._getInst(t[0]);
                this._selectDate(t, "")
            },
            _selectDate: function (e, t) {
                var n = $(e),
                    r = this._getInst(n[0]);
                t = t != null ? t : this._formatDate(r), r.input && r.input.val(t), this._updateAlternate(r);
                var i = this._get(r, "onSelect");
                i ? i.apply(r.input ? r.input[0] : null, [t, r]) : r.input && r.input.trigger("change"), r.inline ? this._updateDatepicker(r) : (this._hideDatepicker(), this._lastInput = r.input[0], typeof r.input[0] != "object" && r.input.focus(), this._lastInput = null)
            },
            _updateAlternate: function (e) {
                var t = this._get(e, "altField");
                if (t) {
                    var n = this._get(e, "altFormat") || this._get(e, "dateFormat"),
                        r = this._getDate(e),
                        i = this.formatDate(n, r, this._getFormatConfig(e));
                    $(t).each(function () {
                        $(this).val(i)
                    })
                }
            },
            noWeekends: function (e) {
                var t = e.getDay();
                return [t > 0 && t < 6, ""]
            },
            iso8601Week: function (e) {
                var t = new Date(e.getTime());
                t.setDate(t.getDate() + 4 - (t.getDay() || 7));
                var n = t.getTime();
                return t.setMonth(0), t.setDate(1), Math.floor(Math.round((n - t) / 864e5) / 7) + 1
            },
            parseDate: function (e, t, n) {
                if (e == null || t == null) throw "Invalid arguments";
                t = typeof t == "object" ? t.toString() : t + "";
                if (t == "") return null;
                var r = (n ? n.shortYearCutoff : null) || this._defaults.shortYearCutoff;
                r = typeof r != "string" ? r : (new Date).getFullYear() % 100 + parseInt(r, 10);
                var i = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort,
                    s = (n ? n.dayNames : null) || this._defaults.dayNames,
                    o = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort,
                    u = (n ? n.monthNames : null) || this._defaults.monthNames,
                    a = -1,
                    f = -1,
                    l = -1,
                    c = -1,
                    h = !1,
                    p = function (t) {
                        var n = y + 1 < e.length && e.charAt(y + 1) == t;
                        return n && y++, n
                    }, d = function (e) {
                        var n = p(e),
                            r = e == "@" ? 14 : e == "!" ? 20 : e == "y" && n ? 4 : e == "o" ? 3 : 2,
                            i = new RegExp("^\\d{1," + r + "}"),
                            s = t.substring(g).match(i);
                        if (!s) throw "Missing number at position " + g;
                        return g += s[0].length, parseInt(s[0], 10)
                    }, v = function (e, n, r) {
                        var i = $.map(p(e) ? r : n, function (e, t) {
                            return [[t, e]]
                        }).sort(function (e, t) {
                            return -(e[1].length - t[1].length)
                        }),
                            s = -1;
                        $.each(i, function (e, n) {
                            var r = n[1];
                            if (t.substr(g, r.length).toLowerCase() == r.toLowerCase()) return s = n[0], g += r.length, !1
                        });
                        if (s != -1) return s + 1;
                        throw "Unknown name at position " + g
                    }, m = function () {
                        if (t.charAt(g) != e.charAt(y)) throw "Unexpected literal at position " + g;
                        g++
                    }, g = 0;
                for (var y = 0; y < e.length; y++)
                    if (h) e.charAt(y) == "'" && !p("'") ? h = !1 : m();
                    else switch (e.charAt(y)) {
                    case "d":
                        l = d("d");
                        break;
                    case "D":
                        v("D", i, s);
                        break;
                    case "o":
                        c = d("o");
                        break;
                    case "m":
                        f = d("m");
                        break;
                    case "M":
                        f = v("M", o, u);
                        break;
                    case "y":
                        a = d("y");
                        break;
                    case "@":
                        var b = new Date(d("@"));
                        a = b.getFullYear(), f = b.getMonth() + 1, l = b.getDate();
                        break;
                    case "!":
                        var b = new Date((d("!") - this._ticksTo1970) / 1e4);
                        a = b.getFullYear(), f = b.getMonth() + 1, l = b.getDate();
                        break;
                    case "'":
                        p("'") ? m() : h = !0;
                        break;
                    default:
                        m()
                    }
                if (g < t.length) throw "Extra/unparsed characters found in date: " + t.substring(g);
                a == -1 ? a = (new Date).getFullYear() : a < 100 && (a += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (a <= r ? 0 : -100));
                if (c > -1) {
                    f = 1, l = c;
                    do {
                        var w = this._getDaysInMonth(a, f - 1);
                        if (l <= w) break;
                        f++, l -= w
                    } while (!0)
                }
                var b = this._daylightSavingAdjust(new Date(a, f - 1, l));
                if (b.getFullYear() != a || b.getMonth() + 1 != f || b.getDate() != l) throw "Invalid date";
                return b
            },
            ATOM: "yy-mm-dd",
            COOKIE: "D, dd M yy",
            ISO_8601: "yy-mm-dd",
            RFC_822: "D, d M y",
            RFC_850: "DD, dd-M-y",
            RFC_1036: "D, d M y",
            RFC_1123: "D, d M yy",
            RFC_2822: "D, d M yy",
            RSS: "D, d M y",
            TICKS: "!",
            TIMESTAMP: "@",
            W3C: "yy-mm-dd",
            _ticksTo1970: (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 24 * 60 * 60 * 1e7,
            formatDate: function (e, t, n) {
                if (!t) return "";
                var r = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort,
                    i = (n ? n.dayNames : null) || this._defaults.dayNames,
                    s = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort,
                    o = (n ? n.monthNames : null) || this._defaults.monthNames,
                    u = function (t) {
                        var n = h + 1 < e.length && e.charAt(h + 1) == t;
                        return n && h++, n
                    }, a = function (e, t, n) {
                        var r = "" + t;
                        if (u(e))
                            while (r.length < n) r = "0" + r;
                        return r
                    }, f = function (e, t, n, r) {
                        return u(e) ? r[t] : n[t]
                    }, l = "",
                    c = !1;
                if (t)
                    for (var h = 0; h < e.length; h++)
                        if (c) e.charAt(h) == "'" && !u("'") ? c = !1 : l += e.charAt(h);
                        else switch (e.charAt(h)) {
                        case "d":
                            l += a("d", t.getDate(), 2);
                            break;
                        case "D":
                            l += f("D", t.getDay(), r, i);
                            break;
                        case "o":
                            l += a("o", Math.round(((new Date(t.getFullYear(), t.getMonth(), t.getDate())).getTime() - (new Date(t.getFullYear(), 0, 0)).getTime()) / 864e5), 3);
                            break;
                        case "m":
                            l += a("m", t.getMonth() + 1, 2);
                            break;
                        case "M":
                            l += f("M", t.getMonth(), s, o);
                            break;
                        case "y":
                            l += u("y") ? t.getFullYear() : (t.getYear() % 100 < 10 ? "0" : "") + t.getYear() % 100;
                            break;
                        case "@":
                            l += t.getTime();
                            break;
                        case "!":
                            l += t.getTime() * 1e4 + this._ticksTo1970;
                            break;
                        case "'":
                            u("'") ? l += "'" : c = !0;
                            break;
                        default:
                            l += e.charAt(h)
                        }
                return l
            },
            _possibleChars: function (e) {
                var t = "",
                    n = !1,
                    r = function (t) {
                        var n = i + 1 < e.length && e.charAt(i + 1) == t;
                        return n && i++, n
                    };
                for (var i = 0; i < e.length; i++)
                    if (n) e.charAt(i) == "'" && !r("'") ? n = !1 : t += e.charAt(i);
                    else switch (e.charAt(i)) {
                    case "d":
                    case "m":
                    case "y":
                    case "@":
                        t += "0123456789";
                        break;
                    case "D":
                    case "M":
                        return null;
                    case "'":
                        r("'") ? t += "'" : n = !0;
                        break;
                    default:
                        t += e.charAt(i)
                    }
                return t
            },
            _get: function (e, t) {
                return e.settings[t] !== undefined ? e.settings[t] : this._defaults[t]
            },
            _setDateFromField: function (e, t) {
                if (e.input.val() == e.lastVal) return;
                var n = this._get(e, "dateFormat"),
                    r = e.lastVal = e.input ? e.input.val() : null,
                    i, s;
                i = s = this._getDefaultDate(e);
                var o = this._getFormatConfig(e);
                try {
                    i = this.parseDate(n, r, o) || s
                } catch (u) {
                    this.log(u), r = t ? "" : r
                }
                e.selectedDay = i.getDate(), e.drawMonth = e.selectedMonth = i.getMonth(), e.drawYear = e.selectedYear = i.getFullYear(), e.currentDay = r ? i.getDate() : 0, e.currentMonth = r ? i.getMonth() : 0, e.currentYear = r ? i.getFullYear() : 0, this._adjustInstDate(e)
            },
            _getDefaultDate: function (e) {
                return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date))
            },
            _determineDate: function (e, t, n) {
                var r = function (e) {
                    var t = new Date;
                    return t.setDate(t.getDate() + e), t
                }, i = function (t) {
                        try {
                            return $.datepicker.parseDate($.datepicker._get(e, "dateFormat"), t, $.datepicker._getFormatConfig(e))
                        } catch (n) {}
                        var r = (t.toLowerCase().match(/^c/) ? $.datepicker._getDate(e) : null) || new Date,
                            i = r.getFullYear(),
                            s = r.getMonth(),
                            o = r.getDate(),
                            u = /([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
                            f = u.exec(t);
                        while (f) {
                            switch (f[2] || "d") {
                            case "d":
                            case "D":
                                o += parseInt(f[1], 10);
                                break;
                            case "w":
                            case "W":
                                o += parseInt(f[1], 10) * 7;
                                break;
                            case "m":
                            case "M":
                                s += parseInt(f[1], 10), o = Math.min(o, $.datepicker._getDaysInMonth(i, s));
                                break;
                            case "y":
                            case "Y":
                                i += parseInt(f[1], 10), o = Math.min(o, $.datepicker._getDaysInMonth(i, s))
                            }
                            f = u.exec(t)
                        }
                        return new Date(i, s, o)
                    }, s = t == null || t === "" ? n : typeof t == "string" ? i(t) : typeof t == "number" ? isNaN(t) ? n : r(t) : new Date(t.getTime());
                return s = s && s.toString() == "Invalid Date" ? n : s, s && (s.setHours(0), s.setMinutes(0), s.setSeconds(0), s.setMilliseconds(0)), this._daylightSavingAdjust(s)
            },
            _daylightSavingAdjust: function (e) {
                return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null
            },
            _setDate: function (e, t, n) {
                var r = !t,
                    i = e.selectedMonth,
                    s = e.selectedYear,
                    o = this._restrictMinMax(e, this._determineDate(e, t, new Date));
                e.selectedDay = e.currentDay = o.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = o.getMonth(), e.drawYear = e.selectedYear = e.currentYear = o.getFullYear(), (i != e.selectedMonth || s != e.selectedYear) && !n && this._notifyChange(e), this._adjustInstDate(e), e.input && e.input.val(r ? "" : this._formatDate(e))
            },
            _getDate: function (e) {
                var t = !e.currentYear || e.input && e.input.val() == "" ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
                return t
            },
            _generateHTML: function (e) {
                var t = new Date;
                t = this._daylightSavingAdjust(new Date(t.getFullYear(), t.getMonth(), t.getDate()));
                var n = this._get(e, "isRTL"),
                    r = this._get(e, "showButtonPanel"),
                    i = this._get(e, "hideIfNoPrevNext"),
                    s = this._get(e, "navigationAsDateFormat"),
                    o = this._getNumberOfMonths(e),
                    u = this._get(e, "showCurrentAtPos"),
                    a = this._get(e, "stepMonths"),
                    f = o[0] != 1 || o[1] != 1,
                    l = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)),
                    c = this._getMinMaxDate(e, "min"),
                    h = this._getMinMaxDate(e, "max"),
                    p = e.drawMonth - u,
                    d = e.drawYear;
                p < 0 && (p += 12, d--);
                if (h) {
                    var v = this._daylightSavingAdjust(new Date(h.getFullYear(), h.getMonth() - o[0] * o[1] + 1, h.getDate()));
                    v = c && v < c ? c : v;
                    while (this._daylightSavingAdjust(new Date(d, p, 1)) > v) p--, p < 0 && (p = 11, d--)
                }
                e.drawMonth = p, e.drawYear = d;
                var m = this._get(e, "prevText");
                m = s ? this.formatDate(m, this._daylightSavingAdjust(new Date(d, p - a, 1)), this._getFormatConfig(e)) : m;
                var g = this._canAdjustMonth(e, -1, d, p) ? '<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_' + dpuuid + ".datepicker._adjustDate('#" + e.id + "', -" + a + ", 'M');\"" + ' title="' + m + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "e" : "w") + '">' + m + "</span></a>" : i ? "" : '<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="' + m + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "e" : "w") + '">' + m + "</span></a>",
                    y = this._get(e, "nextText");
                y = s ? this.formatDate(y, this._daylightSavingAdjust(new Date(d, p + a, 1)), this._getFormatConfig(e)) : y;
                var b = this._canAdjustMonth(e, 1, d, p) ? '<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_' + dpuuid + ".datepicker._adjustDate('#" + e.id + "', +" + a + ", 'M');\"" + ' title="' + y + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "w" : "e") + '">' + y + "</span></a>" : i ? "" : '<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="' + y + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "w" : "e") + '">' + y + "</span></a>",
                    w = this._get(e, "currentText"),
                    E = this._get(e, "gotoCurrent") && e.currentDay ? l : t;
                w = s ? this.formatDate(w, E, this._getFormatConfig(e)) : w;
                var S = e.inline ? "" : '<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_' + dpuuid + '.datepicker._hideDatepicker();">' + this._get(e, "closeText") + "</button>",
                    x = r ? '<div class="ui-datepicker-buttonpane ui-widget-content">' + (n ? S : "") + (this._isInRange(e, E) ? '<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_' + dpuuid + ".datepicker._gotoToday('#" + e.id + "');\"" + ">" + w + "</button>" : "") + (n ? "" : S) + "</div>" : "",
                    T = parseInt(this._get(e, "firstDay"), 10);
                T = isNaN(T) ? 0 : T;
                var N = this._get(e, "showWeek"),
                    C = this._get(e, "dayNames"),
                    k = this._get(e, "dayNamesShort"),
                    L = this._get(e, "dayNamesMin"),
                    A = this._get(e, "monthNames"),
                    O = this._get(e, "monthNamesShort"),
                    M = this._get(e, "beforeShowDay"),
                    _ = this._get(e, "showOtherMonths"),
                    D = this._get(e, "selectOtherMonths"),
                    P = this._get(e, "calculateWeek") || this.iso8601Week,
                    H = this._getDefaultDate(e),
                    B = "";
                for (var j = 0; j < o[0]; j++) {
                    var F = "";
                    this.maxRows = 4;
                    for (var I = 0; I < o[1]; I++) {
                        var q = this._daylightSavingAdjust(new Date(d, p, e.selectedDay)),
                            R = " ui-corner-all",
                            U = "";
                        if (f) {
                            U += '<div class="ui-datepicker-group';
                            if (o[1] > 1) switch (I) {
                            case 0:
                                U += " ui-datepicker-group-first", R = " ui-corner-" + (n ? "right" : "left");
                                break;
                            case o[1] - 1:
                                U += " ui-datepicker-group-last", R = " ui-corner-" + (n ? "left" : "right");
                                break;
                            default:
                                U += " ui-datepicker-group-middle", R = ""
                            }
                            U += '">'
                        }
                        U += '<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix' + R + '">' + (/all|left/.test(R) && j == 0 ? n ? b : g : "") + (/all|right/.test(R) && j == 0 ? n ? g : b : "") + this._generateMonthYearHeader(e, p, d, c, h, j > 0 || I > 0, A, O) + '</div><table class="ui-datepicker-calendar"><thead>' + "<tr>";
                        var z = N ? '<th class="ui-datepicker-week-col">' + this._get(e, "weekHeader") + "</th>" : "";
                        for (var W = 0; W < 7; W++) {
                            var X = (W + T) % 7;
                            z += "<th" + ((W + T + 6) % 7 >= 5 ? ' class="ui-datepicker-week-end"' : "") + ">" + '<span title="' + C[X] + '">' + L[X] + "</span></th>"
                        }
                        U += z + "</tr></thead><tbody>";
                        var V = this._getDaysInMonth(d, p);
                        d == e.selectedYear && p == e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, V));
                        var J = (this._getFirstDayOfMonth(d, p) - T + 7) % 7,
                            K = Math.ceil((J + V) / 7),
                            Q = f ? this.maxRows > K ? this.maxRows : K : K;
                        this.maxRows = Q;
                        var G = this._daylightSavingAdjust(new Date(d, p, 1 - J));
                        for (var Y = 0; Y < Q; Y++) {
                            U += "<tr>";
                            var Z = N ? '<td class="ui-datepicker-week-col">' + this._get(e, "calculateWeek")(G) + "</td>" : "";
                            for (var W = 0; W < 7; W++) {
                                var et = M ? M.apply(e.input ? e.input[0] : null, [G]) : [!0, ""],
                                    tt = G.getMonth() != p,
                                    nt = tt && !D || !et[0] || c && G < c || h && G > h;
                                Z += '<td class="' + ((W + T + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (tt ? " ui-datepicker-other-month" : "") + (G.getTime() == q.getTime() && p == e.selectedMonth && e._keyEvent || H.getTime() == G.getTime() && H.getTime() == q.getTime() ? " " + this._dayOverClass : "") + (nt ? " " + this._unselectableClass + " ui-state-disabled" : "") + (tt && !_ ? "" : " " + et[1] + (G.getTime() == l.getTime() ? " " + this._currentClass : "") + (G.getTime() == t.getTime() ? " ui-datepicker-today" : "")) + '"' + ((!tt || _) && et[2] ? ' title="' + et[2] + '"' : "") + (nt ? "" : ' onclick="DP_jQuery_' + dpuuid + ".datepicker._selectDay('#" + e.id + "'," + G.getMonth() + "," + G.getFullYear() + ', this);return false;"') + ">" + (tt && !_ ? "&#xa0;" : nt ? '<span class="ui-state-default">' + G.getDate() + "</span>" : '<a class="ui-state-default' + (G.getTime() == t.getTime() ? " ui-state-highlight" : "") + (G.getTime() == l.getTime() ? " ui-state-active" : "") + (tt ? " ui-priority-secondary" : "") + '" href="#">' + G.getDate() + "</a>") + "</td>", G.setDate(G.getDate() + 1), G = this._daylightSavingAdjust(G)
                            }
                            U += Z + "</tr>"
                        }
                        p++, p > 11 && (p = 0, d++), U += "</tbody></table>" + (f ? "</div>" + (o[0] > 0 && I == o[1] - 1 ? '<div class="ui-datepicker-row-break"></div>' : "") : ""), F += U
                    }
                    B += F
                }
                return B += x + ($.browser.msie && parseInt($.browser.version, 10) < 7 && !e.inline ? '<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>' : ""), e._keyEvent = !1, B
            },
            _generateMonthYearHeader: function (e, t, n, r, i, s, o, u) {
                var a = this._get(e, "changeMonth"),
                    f = this._get(e, "changeYear"),
                    l = this._get(e, "showMonthAfterYear"),
                    c = '<div class="ui-datepicker-title">',
                    h = "";
                if (s || !a) h += '<span class="ui-datepicker-month">' + o[t] + "</span>";
                else {
                    var p = r && r.getFullYear() == n,
                        d = i && i.getFullYear() == n;
                    h += '<select class="ui-datepicker-month" onchange="DP_jQuery_' + dpuuid + ".datepicker._selectMonthYear('#" + e.id + "', this, 'M');\" " + ">";
                    for (var v = 0; v < 12; v++)(!p || v >= r.getMonth()) && (!d || v <= i.getMonth()) && (h += '<option value="' + v + '"' + (v == t ? ' selected="selected"' : "") + ">" + u[v] + "</option>");
                    h += "</select>"
                }
                l || (c += h + (s || !a || !f ? "&#xa0;" : ""));
                if (!e.yearshtml) {
                    e.yearshtml = "";
                    if (s || !f) c += '<span class="ui-datepicker-year">' + n + "</span>";
                    else {
                        var m = this._get(e, "yearRange").split(":"),
                            g = (new Date).getFullYear(),
                            y = function (e) {
                                var t = e.match(/c[+-].*/) ? n + parseInt(e.substring(1), 10) : e.match(/[+-].*/) ? g + parseInt(e, 10) : parseInt(e, 10);
                                return isNaN(t) ? g : t
                            }, b = y(m[0]),
                            w = Math.max(b, y(m[1] || ""));
                        b = r ? Math.max(b, r.getFullYear()) : b, w = i ? Math.min(w, i.getFullYear()) : w, e.yearshtml += '<select class="ui-datepicker-year" onchange="DP_jQuery_' + dpuuid + ".datepicker._selectMonthYear('#" + e.id + "', this, 'Y');\" " + ">";
                        for (; b <= w; b++) e.yearshtml += '<option value="' + b + '"' + (b == n ? ' selected="selected"' : "") + ">" + b + "</option>";
                        e.yearshtml += "</select>", c += e.yearshtml, e.yearshtml = null
                    }
                }
                return c += this._get(e, "yearSuffix"), l && (c += (s || !a || !f ? "&#xa0;" : "") + h), c += "</div>", c
            },
            _adjustInstDate: function (e, t, n) {
                var r = e.drawYear + (n == "Y" ? t : 0),
                    i = e.drawMonth + (n == "M" ? t : 0),
                    s = Math.min(e.selectedDay, this._getDaysInMonth(r, i)) + (n == "D" ? t : 0),
                    o = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(r, i, s)));
                e.selectedDay = o.getDate(), e.drawMonth = e.selectedMonth = o.getMonth(), e.drawYear = e.selectedYear = o.getFullYear(), (n == "M" || n == "Y") && this._notifyChange(e)
            },
            _restrictMinMax: function (e, t) {
                var n = this._getMinMaxDate(e, "min"),
                    r = this._getMinMaxDate(e, "max"),
                    i = n && t < n ? n : t;
                return i = r && i > r ? r : i, i
            },
            _notifyChange: function (e) {
                var t = this._get(e, "onChangeMonthYear");
                t && t.apply(e.input ? e.input[0] : null, [e.selectedYear, e.selectedMonth + 1, e])
            },
            _getNumberOfMonths: function (e) {
                var t = this._get(e, "numberOfMonths");
                return t == null ? [1, 1] : typeof t == "number" ? [1, t] : t
            },
            _getMinMaxDate: function (e, t) {
                return this._determineDate(e, this._get(e, t + "Date"), null)
            },
            _getDaysInMonth: function (e, t) {
                return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate()
            },
            _getFirstDayOfMonth: function (e, t) {
                return (new Date(e, t, 1)).getDay()
            },
            _canAdjustMonth: function (e, t, n, r) {
                var i = this._getNumberOfMonths(e),
                    s = this._daylightSavingAdjust(new Date(n, r + (t < 0 ? t : i[0] * i[1]), 1));
                return t < 0 && s.setDate(this._getDaysInMonth(s.getFullYear(), s.getMonth())), this._isInRange(e, s)
            },
            _isInRange: function (e, t) {
                var n = this._getMinMaxDate(e, "min"),
                    r = this._getMinMaxDate(e, "max");
                return (!n || t.getTime() >= n.getTime()) && (!r || t.getTime() <= r.getTime())
            },
            _getFormatConfig: function (e) {
                var t = this._get(e, "shortYearCutoff");
                return t = typeof t != "string" ? t : (new Date).getFullYear() % 100 + parseInt(t, 10), {
                    shortYearCutoff: t,
                    dayNamesShort: this._get(e, "dayNamesShort"),
                    dayNames: this._get(e, "dayNames"),
                    monthNamesShort: this._get(e, "monthNamesShort"),
                    monthNames: this._get(e, "monthNames")
                }
            },
            _formatDate: function (e, t, n, r) {
                t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
                var i = t ? typeof t == "object" ? t : this._daylightSavingAdjust(new Date(r, n, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
                return this.formatDate(this._get(e, "dateFormat"), i, this._getFormatConfig(e))
            }
        }), $.fn.datepicker = function (e) {
        if (!this.length) return this;
        $.datepicker.initialized || ($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv), $.datepicker.initialized = !0);
        var t = Array.prototype.slice.call(arguments, 1);
        return typeof e != "string" || e != "isDisabled" && e != "getDate" && e != "widget" ? e == "option" && arguments.length == 2 && typeof arguments[1] == "string" ? $.datepicker["_" + e + "Datepicker"].apply($.datepicker, [this[0]].concat(t)) : this.each(function () {
            typeof e == "string" ? $.datepicker["_" + e + "Datepicker"].apply($.datepicker, [this].concat(t)) : $.datepicker._attachDatepicker(this, e)
        }) : $.datepicker["_" + e + "Datepicker"].apply($.datepicker, [this[0]].concat(t))
    }, $.datepicker = new Datepicker, $.datepicker.initialized = !1, $.datepicker.uuid = (new Date).getTime(), $.datepicker.version = "1.8.21", window["DP_jQuery_" + dpuuid] = $
}(jQuery), jQuery.effects || function (e, t) {
    function n(t) {
        var n;
        return t && t.constructor == Array && t.length == 3 ? t : (n = /rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t)) ? [parseInt(n[1], 10), parseInt(n[2], 10), parseInt(n[3], 10)] : (n = /rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t)) ? [parseFloat(n[1]) * 2.55, parseFloat(n[2]) * 2.55, parseFloat(n[3]) * 2.55] : (n = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t)) ? [parseInt(n[1], 16), parseInt(n[2], 16), parseInt(n[3], 16)] : (n = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t)) ? [parseInt(n[1] + n[1], 16), parseInt(n[2] + n[2], 16), parseInt(n[3] + n[3], 16)] : (n = /rgba\(0, 0, 0, 0\)/.exec(t)) ? f.transparent : f[e.trim(t).toLowerCase()]
    }

    function r(t, r) {
        var i;
        do {
            i = e.curCSS(t, r);
            if (i != "" && i != "transparent" || e.nodeName(t, "body")) break;
            r = "backgroundColor"
        } while (t = t.parentNode);
        return n(i)
    }

    function i() {
        var e = document.defaultView ? document.defaultView.getComputedStyle(this, null) : this.currentStyle,
            t = {}, n, r;
        if (e && e.length && e[0] && e[e[0]]) {
            var i = e.length;
            while (i--) n = e[i], typeof e[n] == "string" && (r = n.replace(/\-(\w)/g, function (e, t) {
                        return t.toUpperCase()
                    }), t[r] = e[n])
        } else
            for (n in e) typeof e[n] == "string" && (t[n] = e[n]);
        return t
    }

    function s(t) {
        var n, r;
        for (n in t) r = t[n], (r == null || e.isFunction(r) || n in c || /scrollbar/.test(n) || !/color/i.test(n) && isNaN(parseFloat(r))) && delete t[n];
        return t
    }

    function o(e, t) {
        var n = {
            _: 0
        }, r;
        for (r in t) e[r] != t[r] && (n[r] = t[r]);
        return n
    }

    function u(t, n, r, i) {
        typeof t == "object" && (i = n, r = null, n = t, t = n.effect), e.isFunction(n) && (i = n, r = null, n = {});
        if (typeof n == "number" || e.fx.speeds[n]) i = r, r = n, n = {};
        return e.isFunction(r) && (i = r, r = null), n = n || {}, r = r || n.duration, r = e.fx.off ? 0 : typeof r == "number" ? r : r in e.fx.speeds ? e.fx.speeds[r] : e.fx.speeds._default, i = i || n.complete, [t, n, r, i]
    }

    function a(t) {
        return !t || typeof t == "number" || e.fx.speeds[t] ? !0 : typeof t == "string" && !e.effects[t] ? !0 : !1
    }
    e.effects = {}, e.each(["backgroundColor", "borderBottomColor", "borderLeftColor", "borderRightColor", "borderTopColor", "borderColor", "color", "outlineColor"], function (t, i) {
        e.fx.step[i] = function (e) {
            e.colorInit || (e.start = r(e.elem, i), e.end = n(e.end), e.colorInit = !0), e.elem.style[i] = "rgb(" + Math.max(Math.min(parseInt(e.pos * (e.end[0] - e.start[0]) + e.start[0], 10), 255), 0) + "," + Math.max(Math.min(parseInt(e.pos * (e.end[1] - e.start[1]) + e.start[1], 10), 255), 0) + "," + Math.max(Math.min(parseInt(e.pos * (e.end[2] - e.start[2]) + e.start[2], 10), 255), 0) + ")"
        }
    });
    var f = {
        aqua: [0, 255, 255],
        azure: [240, 255, 255],
        beige: [245, 245, 220],
        black: [0, 0, 0],
        blue: [0, 0, 255],
        brown: [165, 42, 42],
        cyan: [0, 255, 255],
        darkblue: [0, 0, 139],
        darkcyan: [0, 139, 139],
        darkgrey: [169, 169, 169],
        darkgreen: [0, 100, 0],
        darkkhaki: [189, 183, 107],
        darkmagenta: [139, 0, 139],
        darkolivegreen: [85, 107, 47],
        darkorange: [255, 140, 0],
        darkorchid: [153, 50, 204],
        darkred: [139, 0, 0],
        darksalmon: [233, 150, 122],
        darkviolet: [148, 0, 211],
        fuchsia: [255, 0, 255],
        gold: [255, 215, 0],
        green: [0, 128, 0],
        indigo: [75, 0, 130],
        khaki: [240, 230, 140],
        lightblue: [173, 216, 230],
        lightcyan: [224, 255, 255],
        lightgreen: [144, 238, 144],
        lightgrey: [211, 211, 211],
        lightpink: [255, 182, 193],
        lightyellow: [255, 255, 224],
        lime: [0, 255, 0],
        magenta: [255, 0, 255],
        maroon: [128, 0, 0],
        navy: [0, 0, 128],
        olive: [128, 128, 0],
        orange: [255, 165, 0],
        pink: [255, 192, 203],
        purple: [128, 0, 128],
        violet: [128, 0, 128],
        red: [255, 0, 0],
        silver: [192, 192, 192],
        white: [255, 255, 255],
        yellow: [255, 255, 0],
        transparent: [255, 255, 255]
    }, l = ["add", "remove", "toggle"],
        c = {
            border: 1,
            borderBottom: 1,
            borderColor: 1,
            borderLeft: 1,
            borderRight: 1,
            borderTop: 1,
            borderWidth: 1,
            margin: 1,
            padding: 1
        };
    e.effects.animateClass = function (t, n, r, u) {
        return e.isFunction(r) && (u = r, r = null), this.queue(function () {
            var a = e(this),
                f = a.attr("style") || " ",
                c = s(i.call(this)),
                p, v = a.attr("class") || "";
            e.each(l, function (e, n) {
                t[n] && a[n + "Class"](t[n])
            }), p = s(i.call(this)), a.attr("class", v), a.animate(o(c, p), {
                    queue: !1,
                    duration: n,
                    easing: r,
                    complete: function () {
                        e.each(l, function (e, n) {
                            t[n] && a[n + "Class"](t[n])
                        }), typeof a.attr("style") == "object" ? (a.attr("style").cssText = "", a.attr("style").cssText = f) : a.attr("style", f), u && u.apply(this, arguments), e.dequeue(this)
                    }
                })
        })
    }, e.fn.extend({
            _addClass: e.fn.addClass,
            addClass: function (t, n, r, i) {
                return n ? e.effects.animateClass.apply(this, [{
                            add: t
                        },
                        n, r, i
                    ]) : this._addClass(t)
            },
            _removeClass: e.fn.removeClass,
            removeClass: function (t, n, r, i) {
                return n ? e.effects.animateClass.apply(this, [{
                            remove: t
                        },
                        n, r, i
                    ]) : this._removeClass(t)
            },
            _toggleClass: e.fn.toggleClass,
            toggleClass: function (n, r, i, s, o) {
                return typeof r == "boolean" || r === t ? i ? e.effects.animateClass.apply(this, [r ? {
                            add: n
                        } : {
                            remove: n
                        },
                        i, s, o
                    ]) : this._toggleClass(n, r) : e.effects.animateClass.apply(this, [{
                            toggle: n
                        },
                        r, i, s
                    ])
            },
            switchClass: function (t, n, r, i, s) {
                return e.effects.animateClass.apply(this, [{
                            add: n,
                            remove: t
                        },
                        r, i, s
                    ])
            }
        }), e.extend(e.effects, {
            version: "1.8.21",
            save: function (e, t) {
                for (var n = 0; n < t.length; n++) t[n] !== null && e.data("ec.storage." + t[n], e[0].style[t[n]])
            },
            restore: function (e, t) {
                for (var n = 0; n < t.length; n++) t[n] !== null && e.css(t[n], e.data("ec.storage." + t[n]))
            },
            setMode: function (e, t) {
                return t == "toggle" && (t = e.is(":hidden") ? "show" : "hide"), t
            },
            getBaseline: function (e, t) {
                var n, r;
                switch (e[0]) {
                case "top":
                    n = 0;
                    break;
                case "middle":
                    n = .5;
                    break;
                case "bottom":
                    n = 1;
                    break;
                default:
                    n = e[0] / t.height
                }
                switch (e[1]) {
                case "left":
                    r = 0;
                    break;
                case "center":
                    r = .5;
                    break;
                case "right":
                    r = 1;
                    break;
                default:
                    r = e[1] / t.width
                }
                return {
                    x: r,
                    y: n
                }
            },
            createWrapper: function (t) {
                if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                var n = {
                    width: t.outerWidth(!0),
                    height: t.outerHeight(!0),
                    "float": t.css("float")
                }, r = e("<div></div>").addClass("ui-effects-wrapper").css({
                            fontSize: "100%",
                            background: "transparent",
                            border: "none",
                            margin: 0,
                            padding: 0
                        }),
                    i = document.activeElement;
                try {
                    i.id
                } catch (s) {
                    i = document.body
                }
                return t.wrap(r), (t[0] === i || e.contains(t[0], i)) && e(i).focus(), r = t.parent(), t.css("position") == "static" ? (r.css({
                            position: "relative"
                        }), t.css({
                            position: "relative"
                        })) : (e.extend(n, {
                            position: t.css("position"),
                            zIndex: t.css("z-index")
                        }), e.each(["top", "left", "bottom", "right"], function (e, r) {
                            n[r] = t.css(r), isNaN(parseInt(n[r], 10)) && (n[r] = "auto")
                        }), t.css({
                            position: "relative",
                            top: 0,
                            left: 0,
                            right: "auto",
                            bottom: "auto"
                        })), r.css(n).show()
            },
            removeWrapper: function (t) {
                var n, r = document.activeElement;
                return t.parent().is(".ui-effects-wrapper") ? (n = t.parent().replaceWith(t), (t[0] === r || e.contains(t[0], r)) && e(r).focus(), n) : t
            },
            setTransition: function (t, n, r, i) {
                return i = i || {}, e.each(n, function (e, n) {
                    var s = t.cssUnit(n);
                    s[0] > 0 && (i[n] = s[0] * r + s[1])
                }), i
            }
        }), e.fn.extend({
            effect: function (t, n, r, i) {
                var s = u.apply(this, arguments),
                    o = {
                        options: s[1],
                        duration: s[2],
                        callback: s[3]
                    }, a = o.options.mode,
                    f = e.effects[t];
                return e.fx.off || !f ? a ? this[a](o.duration, o.callback) : this.each(function () {
                    o.callback && o.callback.call(this)
                }) : f.call(this, o)
            },
            _show: e.fn.show,
            show: function (e) {
                if (a(e)) return this._show.apply(this, arguments);
                var t = u.apply(this, arguments);
                return t[1].mode = "show", this.effect.apply(this, t)
            },
            _hide: e.fn.hide,
            hide: function (e) {
                if (a(e)) return this._hide.apply(this, arguments);
                var t = u.apply(this, arguments);
                return t[1].mode = "hide", this.effect.apply(this, t)
            },
            __toggle: e.fn.toggle,
            toggle: function (t) {
                if (a(t) || typeof t == "boolean" || e.isFunction(t)) return this.__toggle.apply(this, arguments);
                var n = u.apply(this, arguments);
                return n[1].mode = "toggle", this.effect.apply(this, n)
            },
            cssUnit: function (t) {
                var n = this.css(t),
                    r = [];
                return e.each(["em", "px", "%", "pt"], function (e, t) {
                    n.indexOf(t) > 0 && (r = [parseFloat(n), t])
                }), r
            }
        }), e.easing.jswing = e.easing.swing, e.extend(e.easing, {
            def: "easeOutQuad",
            swing: function (t, n, r, i, s) {
                return e.easing[e.easing.def](t, n, r, i, s)
            },
            easeInQuad: function (e, t, n, r, i) {
                return r * (t /= i) * t + n
            },
            easeOutQuad: function (e, t, n, r, i) {
                return -r * (t /= i) * (t - 2) + n
            },
            easeInOutQuad: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? r / 2 * t * t + n : -r / 2 * (--t * (t - 2) - 1) + n
            },
            easeInCubic: function (e, t, n, r, i) {
                return r * (t /= i) * t * t + n
            },
            easeOutCubic: function (e, t, n, r, i) {
                return r * ((t = t / i - 1) * t * t + 1) + n
            },
            easeInOutCubic: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? r / 2 * t * t * t + n : r / 2 * ((t -= 2) * t * t + 2) + n
            },
            easeInQuart: function (e, t, n, r, i) {
                return r * (t /= i) * t * t * t + n
            },
            easeOutQuart: function (e, t, n, r, i) {
                return -r * ((t = t / i - 1) * t * t * t - 1) + n
            },
            easeInOutQuart: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? r / 2 * t * t * t * t + n : -r / 2 * ((t -= 2) * t * t * t - 2) + n
            },
            easeInQuint: function (e, t, n, r, i) {
                return r * (t /= i) * t * t * t * t + n
            },
            easeOutQuint: function (e, t, n, r, i) {
                return r * ((t = t / i - 1) * t * t * t * t + 1) + n
            },
            easeInOutQuint: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? r / 2 * t * t * t * t * t + n : r / 2 * ((t -= 2) * t * t * t * t + 2) + n
            },
            easeInSine: function (e, t, n, r, i) {
                return -r * Math.cos(t / i * (Math.PI / 2)) + r + n
            },
            easeOutSine: function (e, t, n, r, i) {
                return r * Math.sin(t / i * (Math.PI / 2)) + n
            },
            easeInOutSine: function (e, t, n, r, i) {
                return -r / 2 * (Math.cos(Math.PI * t / i) - 1) + n
            },
            easeInExpo: function (e, t, n, r, i) {
                return t == 0 ? n : r * Math.pow(2, 10 * (t / i - 1)) + n
            },
            easeOutExpo: function (e, t, n, r, i) {
                return t == i ? n + r : r * (-Math.pow(2, -10 * t / i) + 1) + n
            },
            easeInOutExpo: function (e, t, n, r, i) {
                return t == 0 ? n : t == i ? n + r : (t /= i / 2) < 1 ? r / 2 * Math.pow(2, 10 * (t - 1)) + n : r / 2 * (-Math.pow(2, -10 * --t) + 2) + n
            },
            easeInCirc: function (e, t, n, r, i) {
                return -r * (Math.sqrt(1 - (t /= i) * t) - 1) + n
            },
            easeOutCirc: function (e, t, n, r, i) {
                return r * Math.sqrt(1 - (t = t / i - 1) * t) + n
            },
            easeInOutCirc: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? -r / 2 * (Math.sqrt(1 - t * t) - 1) + n : r / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + n
            },
            easeInElastic: function (e, t, n, r, i) {
                var s = 1.70158,
                    o = 0,
                    u = r;
                if (t == 0) return n;
                if ((t /= i) == 1) return n + r;
                o || (o = i * .3);
                if (u < Math.abs(r)) {
                    u = r;
                    var s = o / 4
                } else var s = o / (2 * Math.PI) * Math.asin(r / u);
                return -(u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o)) + n
            },
            easeOutElastic: function (e, t, n, r, i) {
                var s = 1.70158,
                    o = 0,
                    u = r;
                if (t == 0) return n;
                if ((t /= i) == 1) return n + r;
                o || (o = i * .3);
                if (u < Math.abs(r)) {
                    u = r;
                    var s = o / 4
                } else var s = o / (2 * Math.PI) * Math.asin(r / u);
                return u * Math.pow(2, -10 * t) * Math.sin((t * i - s) * 2 * Math.PI / o) + r + n
            },
            easeInOutElastic: function (e, t, n, r, i) {
                var s = 1.70158,
                    o = 0,
                    u = r;
                if (t == 0) return n;
                if ((t /= i / 2) == 2) return n + r;
                o || (o = i * .3 * 1.5);
                if (u < Math.abs(r)) {
                    u = r;
                    var s = o / 4
                } else var s = o / (2 * Math.PI) * Math.asin(r / u);
                return t < 1 ? -0.5 * u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) + n : u * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) * .5 + r + n
            },
            easeInBack: function (e, n, r, i, s, o) {
                return o == t && (o = 1.70158), i * (n /= s) * n * ((o + 1) * n - o) + r
            },
            easeOutBack: function (e, n, r, i, s, o) {
                return o == t && (o = 1.70158), i * ((n = n / s - 1) * n * ((o + 1) * n + o) + 1) + r
            },
            easeInOutBack: function (e, n, r, i, s, o) {
                return o == t && (o = 1.70158), (n /= s / 2) < 1 ? i / 2 * n * n * (((o *= 1.525) + 1) * n - o) + r : i / 2 * ((n -= 2) * n * (((o *= 1.525) + 1) * n + o) + 2) + r
            },
            easeInBounce: function (t, n, r, i, s) {
                return i - e.easing.easeOutBounce(t, s - n, 0, i, s) + r
            },
            easeOutBounce: function (e, t, n, r, i) {
                return (t /= i) < 1 / 2.75 ? r * 7.5625 * t * t + n : t < 2 / 2.75 ? r * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + n : t < 2.5 / 2.75 ? r * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + n : r * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + n
            },
            easeInOutBounce: function (t, n, r, i, s) {
                return n < s / 2 ? e.easing.easeInBounce(t, n * 2, 0, i, s) * .5 + r : e.easing.easeOutBounce(t, n * 2 - s, 0, i, s) * .5 + i * .5 + r
            }
        })
}(jQuery),
function (e, t) {
    e.effects.drop = function (t) {
        return this.queue(function () {
            var n = e(this),
                r = ["position", "top", "bottom", "left", "right", "opacity"],
                i = e.effects.setMode(n, t.options.mode || "hide"),
                s = t.options.direction || "left";
            e.effects.save(n, r), n.show(), e.effects.createWrapper(n);
            var o = s == "up" || s == "down" ? "top" : "left",
                u = s == "up" || s == "left" ? "pos" : "neg",
                f = t.options.distance || (o == "top" ? n.outerHeight({
                            margin: !0
                        }) / 2 : n.outerWidth({
                            margin: !0
                        }) / 2);
            i == "show" && n.css("opacity", 0).css(o, u == "pos" ? -f : f);
            var l = {
                opacity: i == "show" ? 1 : 0
            };
            l[o] = (i == "show" ? u == "pos" ? "+=" : "-=" : u == "pos" ? "-=" : "+=") + f, n.animate(l, {
                    queue: !1,
                    duration: t.duration,
                    easing: t.options.easing,
                    complete: function () {
                        i == "hide" && n.hide(), e.effects.restore(n, r), e.effects.removeWrapper(n), t.callback && t.callback.apply(this, arguments), n.dequeue()
                    }
                })
        })
    }
}(jQuery),
function (e, t) {
    e.effects.explo(function (e, t) {
        function u(e) {
            var t = o[e] = {}, n, r;
            e = e.split(/\s+/);
            for (n = 0, r = e.length; n < r; n++) t[e[n]] = !0;
            return t
        }

        function c(e, n, r) {
            if (r === t && e.nodeType === 1) {
                var i = "data-" + n.replace(l, "-$1").toLowerCase();
                r = e.getAttribute(i);
                if (typeof r == "string") {
                    try {
                        r = r === "true" ? !0 : r === "false" ? !1 : r === "null" ? null : s.isNumeric(r) ? +r : f.test(r) ? s.parseJSON(r) : r
                    } catch (o) {}
                    s.data(e, n, r)
                } else r = t
            }
            return r
        }

        function h(e) {
            for (var t in e) {
                if (t === "data" && s.isEmptyObject(e[t])) continue;
                if (t !== "toJSON") return !1
            }
            return !0
        }

        function p(e, t, n) {
            var r = t + "defer",
                i = t + "queue",
                o = t + "mark",
                u = s._data(e, r);
            u && (n === "queue" || !s._data(e, i)) && (n === "mark" || !s._data(e, o)) && setTimeout(function () {
                !s._data(e, i) && !s._data(e, o) && (s.removeData(e, r, !0), u.fire())
            }, 0)
        }

        function H() {
            return !1
        }

        function B() {
            return !0
        }

        function W(e) {
            return !e || !e.parentNode || e.parentNode.nodeType === 11
        }

        function X(e, t, n) {
            t = t || 0;
            if (s.isFunction(t)) return s.grep(e, function (e, r) {
                var i = !! t.call(e, r, e);
                return i === n
            });
            if (t.nodeType) return s.grep(e, function (e, r) {
                return e === t === n
            });
            if (typeof t == "string") {
                var r = s.grep(e, function (e) {
                    return e.nodeType === 1
                });
                if (q.test(t)) return s.filter(t, r, !n);
                t = s.filter(t, r)
            }
            return s.grep(e, function (e, r) {
                return s.inArray(e, t) >= 0 === n
            })
        }

        function V(e) {
            var t = $.split("|"),
                n = e.createDocumentFragment();
            if (n.createElement)
                while (t.length) n.createElement(t.pop());
            return n
        }

        function at(e, t) {
            return s.nodeName(e, "table") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
        }

        function ft(e, t) {
            if (t.nodeType !== 1 || !s.hasData(e)) return;
            var n, r, i, o = s._data(e),
                u = s._data(t, o),
                a = o.events;
            if (a) {
                delete u.handle, u.events = {};
                for (n in a)
                    for (r = 0, i = a[n].length; r < i; r++) s.event.add(t, n, a[n][r])
            }
            u.data && (u.data = s.extend({}, u.data))
        }

        function lt(e, t) {
            var n;
            if (t.nodeType !== 1) return;
            t.clearAttributes && t.clearAttributes(), t.mergeAttributes && t.mergeAttributes(e), n = t.nodeName.toLowerCase(), n === "object" ? t.outerHTML = e.outerHTML : n !== "input" || e.type !== "checkbox" && e.type !== "radio" ? n === "option" ? t.selected = e.defaultSelected : n === "input" || n === "textarea" ? t.defaultValue = e.defaultValue : n === "script" && t.text !== e.text && (t.text = e.text) : (e.checked && (t.defaultChecked = t.checked = e.checked), t.value !== e.value && (t.value = e.value)), t.removeAttribute(s.expando), t.removeAttribute("_submit_attached"), t.removeAttribute("_change_attached")
        }

        function ct(e) {
            return typeof e.getElementsByTagName != "undefined" ? e.getElementsByTagName("*") : typeof e.querySelectorAll != "undefined" ? e.querySelectorAll("*") : []
        }

        function ht(e) {
            if (e.type === "checkbox" || e.type === "radio") e.defaultChecked = e.checked
        }

        function pt(e) {
            var t = (e.nodeName || "").toLowerCase();
            t === "input" ? ht(e) : t !== "script" && typeof e.getElementsByTagName != "undefined" && s.grep(e.getElementsByTagName("input"), ht)
        }

        function dt(e) {
            var t = n.createElement("div");
            return ut.appendChild(t), t.innerHTML = e.outerHTML, t.firstChild
        }

        function kt(e, t, n) {
            var r = t === "width" ? e.offsetWidth : e.offsetHeight,
                i = t === "width" ? 1 : 0,
                o = 4;
            if (r > 0) {
                if (n !== "border")
                    for (; i < o; i += 2) n || (r -= parseFloat(s.css(e, "padding" + xt[i])) || 0), n === "margin" ? r += parseFloat(s.css(e, n + xt[i])) || 0 : r -= parseFloat(s.css(e, "border" + xt[i] + "Width")) || 0;
                return r + "px"
            }
            r = Tt(e, t);
            if (r < 0 || r == null) r = e.style[t];
            if (bt.test(r)) return r;
            r = parseFloat(r) || 0;
            if (n)
                for (; i < o; i += 2) r += parseFloat(s.css(e, "padding" + xt[i])) || 0, n !== "padding" && (r += parseFloat(s.css(e, "border" + xt[i] + "Width")) || 0), n === "margin" && (r += parseFloat(s.css(e, n + xt[i])) || 0);
            return r + "px"
        }

        function Qt(e) {
            return function (t, n) {
                typeof t != "string" && (n = t, t = "*");
                if (s.isFunction(n)) {
                    var r = t.toLowerCase().split(qt),
                        i = 0,
                        o = r.length,
                        u, a, f;
                    for (; i < o; i++) u = r[i], f = /^\+/.test(u), f && (u = u.substr(1) || "*"), a = e[u] = e[u] || [], a[f ? "unshift" : "push"](n)
                }
            }
        }

        function Gt(e, n, r, i, s, o) {
            s = s || n.dataTypes[0], o = o || {}, o[s] = !0;
            var u = e[s],
                a = 0,
                f = u ? u.length : 0,
                l = e === Wt,
                c;
            for (; a < f && (l || !c); a++) c = u[a](n, r, i), typeof c == "string" && (!l || o[c] ? c = t : (n.dataTypes.unshift(c), c = Gt(e, n, r, i, c, o)));
            return (l || !c) && !o["*"] && (c = Gt(e, n, r, i, "*", o)), c
        }

        function Yt(e, n) {
            var r, i, o = s.ajaxSettings.flatOptions || {};
            for (r in n) n[r] !== t && ((o[r] ? e : i || (i = {}))[r] = n[r]);
            i && s.extend(!0, e, i)
        }

        function Zt(e, t, n, r) {
            if (s.isArray(t)) s.each(t, function (t, i) {
                n || At.test(e) ? r(e, i) : Zt(e + "[" + (typeof i == "object" ? t : "") + "]", i, n, r)
            });
            else if (!n && s.type(t) === "object")
                for (var i in t) Zt(e + "[" + i + "]", t[i], n, r);
            else r(e, t)
        }

        function en(e, n, r) {
            var i = e.contents,
                s = e.dataTypes,
                o = e.responseFields,
                u, a, f, l;
            for (a in o) a in r && (n[o[a]] = r[a]);
            while (s[0] === "*") s.shift(), u === t && (u = e.mimeType || n.getResponseHeader("content-type"));
            if (u)
                for (a in i)
                    if (i[a] && i[a].test(u)) {
                        s.unshift(a);
                        break
                    }
            if (s[0] in r) f = s[0];
            else {
                for (a in r) {
                    if (!s[0] || e.converters[a + " " + s[0]]) {
                        f = a;
                        break
                    }
                    l || (l = a)
                }
                f = f || l
            } if (f) return f !== s[0] && s.unshift(f), r[f]
        }

        function tn(e, n) {
            e.dataFilter && (n = e.dataFilter(n, e.dataType));
            var r = e.dataTypes,
                i = {}, o, u, a = r.length,
                f, l = r[0],
                c, h, p, d, v;
            for (o = 1; o < a; o++) {
                if (o === 1)
                    for (u in e.converters) typeof u == "string" && (i[u.toLowerCase()] = e.converters[u]);
                c = l, l = r[o];
                if (l === "*") l = c;
                else if (c !== "*" && c !== l) {
                    h = c + " " + l, p = i[h] || i["* " + l];
                    if (!p) {
                        v = t;
                        for (d in i) {
                            f = d.split(" ");
                            if (f[0] === c || f[0] === "*") {
                                v = i[f[1] + " " + l];
                                if (v) {
                                    d = i[d], d === !0 ? p = v : v === !0 && (p = d);
                                    break
                                }
                            }
                        }
                    }!p && !v && s.error("No conversion from " + h.replace(" ", " to ")), p !== !0 && (n = p ? p(n) : v(d(n)))
                }
            }
            return n
        }

        function an() {
            try {
                return new e.XMLHttpRequest
            } catch (t) {}
        }

        function fn() {
            try {
                return new e.ActiveXObject("Microsoft.XMLHTTP")
            } catch (t) {}
        }

        function yn() {
            return setTimeout(bn, 0), gn = s.now()
        }

        function bn() {
            gn = t
        }

        function wn(e, t) {
            var n = {};
            return s.each(mn.concat.apply([], mn.slice(0, t)), function () {
                n[this] = e
            }), n
        }

        function En(e) {
            if (!ln[e]) {
                var t = n.body,
                    r = s("<" + e + ">").appendTo(t),
                    i = r.css("display");
                r.remove();
                if (i === "none" || i === "") {
                    cn || (cn = n.createElement("iframe"), cn.frameBorder = cn.width = cn.height = 0), t.appendChild(cn);
                    if (!hn || !cn.createElement) hn = (cn.contentWindow || cn.contentDocument).document, hn.write((s.support.boxModel ? "<!doctype html>" : "") + "<html><body>"), hn.close();
                    r = hn.createElement(e), hn.body.appendChild(r), i = s.css(r, "display"), t.removeChild(cn)
                }
                ln[e] = i
            }
            return ln[e]
        }

        function Nn(e) {
            return s.isWindow(e) ? e : e.nodeType === 9 ? e.defaultView || e.parentWindow : !1
        }
        var n = e.document,
            r = e.navigator,
            i = e.location,
            s = function () {
                function H() {
                    if (i.isReady) return;
                    try {
                        n.documentElement.doScroll("left")
                    } catch (e) {
                        setTimeout(H, 1);
                        return
                    }
                    i.ready()
                }
                var i = function (e, t) {
                    return new i.fn.init(e, t, u)
                }, s = e.jQuery,
                    o = e.$,
                    u, a = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,
                    f = /\S/,
                    l = /^\s+/,
                    c = /\s+$/,
                    h = /^<(\w+)\s*\/?>(?:<\/\1>)?$/,
                    p = /^[\],:{}\s]*$/,
                    d = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
                    v = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
                    m = /(?:^|:|,)(?:\s*\[)+/g,
                    g = /(webkit)[ \/]([\w.]+)/,
                    y = /(opera)(?:.*version)?[ \/]([\w.]+)/,
                    b = /(msie) ([\w.]+)/,
                    w = /(mozilla)(?:.*? rv:([\w.]+))?/,
                    E = /-([a-z]|[0-9])/ig,
                    S = /^-ms-/,
                    x = function (e, t) {
                        return (t + "").toUpperCase()
                    }, T = r.userAgent,
                    N, C, k, L = Object.prototype.toString,
                    A = Object.prototype.hasOwnProperty,
                    O = Array.prototype.push,
                    M = Array.prototype.slice,
                    _ = String.prototype.trim,
                    D = Array.prototype.indexOf,
                    P = {};
                return i.fn = i.prototype = {
                    constructor: i,
                    init: function (e, r, s) {
                        var o, u, f, l;
                        if (!e) return this;
                        if (e.nodeType) return this.context = this[0] = e, this.length = 1, this;
                        if (e === "body" && !r && n.body) return this.context = n, this[0] = n.body, this.selector = e, this.length = 1, this;
                        if (typeof e == "string") {
                            e.charAt(0) === "<" && e.charAt(e.length - 1) === ">" && e.length >= 3 ? o = [null, e, null] : o = a.exec(e);
                            if (o && (o[1] || !r)) {
                                if (o[1]) return r = r instanceof i ? r[0] : r, l = r ? r.ownerDocument || r : n, f = h.exec(e), f ? i.isPlainObject(r) ? (e = [n.createElement(f[1])], i.fn.attr.call(e, r, !0)) : e = [l.createElement(f[1])] : (f = i.buildFragment([o[1]], [l]), e = (f.cacheable ? i.clone(f.fragment) : f.fragment).childNodes), i.merge(this, e);
                                u = n.getElementById(o[2]);
                                if (u && u.parentNode) {
                                    if (u.id !== o[2]) return s.find(e);
                                    this.length = 1, this[0] = u
                                }
                                return this.context = n, this.selector = e, this
                            }
                            return !r || r.jquery ? (r || s).find(e) : this.constructor(r).find(e)
                        }
                        return i.isFunction(e) ? s.ready(e) : (e.selector !== t && (this.selector = e.selector, this.context = e.context), i.makeArray(e, this))
                    },
                    selector: "",
                    jquery: "1.7.2",
                    length: 0,
                    size: function () {
                        return this.length
                    },
                    toArray: function () {
                        return M.call(this, 0)
                    },
                    get: function (e) {
                        return e == null ? this.toArray() : e < 0 ? this[this.length + e] : this[e]
                    },
                    pushStack: function (e, t, n) {
                        var r = this.constructor();
                        return i.isArray(e) ? O.apply(r, e) : i.merge(r, e), r.prevObject = this, r.context = this.context, t === "find" ? r.selector = this.selector + (this.selector ? " " : "") + n : t && (r.selector = this.selector + "." + t + "(" + n + ")"), r
                    },
                    each: function (e, t) {
                        return i.each(this, e, t)
                    },
                    ready: function (e) {
                        return i.bindReady(), C.add(e), this
                    },
                    eq: function (e) {
                        return e = +e, e === -1 ? this.slice(e) : this.slice(e, e + 1)
                    },
                    first: function () {
                        return this.eq(0)
                    },
                    last: function () {
                        return this.eq(-1)
                    },
                    slice: function () {
                        return this.pushStack(M.apply(this, arguments), "slice", M.call(arguments).join(","))
                    },
                    map: function (e) {
                        return this.pushStack(i.map(this, function (t, n) {
                                    return e.call(t, n, t)
                                }))
                    },
                    end: function () {
                        return this.prevObject || this.constructor(null)
                    },
                    push: O,
                    sort: [].sort,
                    splice: [].splice
                }, i.fn.init.prototype = i.fn, i.extend = i.fn.extend = function () {
                    var e, n, r, s, o, u, a = arguments[0] || {}, f = 1,
                        l = arguments.length,
                        c = !1;
                    typeof a == "boolean" && (c = a, a = arguments[1] || {}, f = 2), typeof a != "object" && !i.isFunction(a) && (a = {}), l === f && (a = this, --f);
                    for (; f < l; f++)
                        if ((e = arguments[f]) != null)
                            for (n in e) {
                                r = a[n], s = e[n];
                                if (a === s) continue;
                                c && s && (i.isPlainObject(s) || (o = i.isArray(s))) ? (o ? (o = !1, u = r && i.isArray(r) ? r : []) : u = r && i.isPlainObject(r) ? r : {}, a[n] = i.extend(c, u, s)) : s !== t && (a[n] = s)
                        }
                    return a
                }, i.extend({
                        noConflict: function (t) {
                            return e.$ === i && (e.$ = o), t && e.jQuery === i && (e.jQuery = s), i
                        },
                        isReady: !1,
                        readyWait: 1,
                        holdReady: function (e) {
                            e ? i.readyWait++ : i.ready(!0)
                        },
                        ready: function (e) {
                            if (e === !0 && !--i.readyWait || e !== !0 && !i.isReady) {
                                if (!n.body) return setTimeout(i.ready, 1);
                                i.isReady = !0;
                                if (e !== !0 && --i.readyWait > 0) return;
                                C.fireWith(n, [i]), i.fn.trigger && i(n).trigger("ready").off("ready")
                            }
                        },
                        bindReady: function () {
                            if (C) return;
                            C = i.Callbacks("once memory");
                            if (n.readyState === "complete") return setTimeout(i.ready, 1);
                            if (n.addEventListener) n.addEventListener("DOMContentLoaded", k, !1), e.addEventListener("load", i.ready, !1);
                            else if (n.attachEvent) {
                                n.attachEvent("onreadystatechange", k), e.attachEvent("onload", i.ready);
                                var t = !1;
                                try {
                                    t = e.frameElement == null
                                } catch (r) {}
                                n.documentElement.doScroll && t && H()
                            }
                        },
                        isFunction: function (e) {
                            return i.type(e) === "function"
                        },
                        isArray: Array.isArray || function (e) {
                            return i.type(e) === "array"
                        },
                        isWindow: function (e) {
                            return e != null && e == e.window
                        },
                        isNumeric: function (e) {
                            return !isNaN(parseFloat(e)) && isFinite(e)
                        },
                        type: function (e) {
                            return e == null ? String(e) : P[L.call(e)] || "object"
                        },
                        isPlainObject: function (e) {
                            if (!e || i.type(e) !== "object" || e.nodeType || i.isWindow(e)) return !1;
                            try {
                                if (e.constructor && !A.call(e, "constructor") && !A.call(e.constructor.prototype, "isPrototypeOf")) return !1
                            } catch (n) {
                                return !1
                            }
                            var r;
                            for (r in e);
                            return r === t || A.call(e, r)
                        },
                        isEmptyObject: function (e) {
                            for (var t in e) return !1;
                            return !0
                        },
                        error: function (e) {
                            throw new Error(e)
                        },
                        parseJSON: function (t) {
                            if (typeof t != "string" || !t) return null;
                            t = i.trim(t);
                            if (e.JSON && e.JSON.parse) return e.JSON.parse(t);
                            if (p.test(t.replace(d, "@").replace(v, "]").replace(m, ""))) return (new Function("return " + t))();
                            i.error("Invalid JSON: " + t)
                        },
                        parseXML: function (n) {
                            if (typeof n != "string" || !n) return null;
                            var r, s;
                            try {
                                e.DOMParser ? (s = new DOMParser, r = s.parseFromString(n, "text/xml")) : (r = new ActiveXObject("Microsoft.XMLDOM"), r.async = "false", r.loadXML(n))
                            } catch (o) {
                                r = t
                            }
                            return (!r || !r.documentElement || r.getElementsByTagName("parsererror").length) && i.error("Invalid XML: " + n), r
                        },
                        noop: function () {},
                        globalEval: function (t) {
                            t && f.test(t) && (e.execScript || function (t) {
                                e.eval.call(e, t)
                            })(t)
                        },
                        camelCase: function (e) {
                            return e.replace(S, "ms-").replace(E, x)
                        },
                        nodeName: function (e, t) {
                            return e.nodeName && e.nodeName.toUpperCase() === t.toUpperCase()
                        },
                        each: function (e, n, r) {
                            var s, o = 0,
                                u = e.length,
                                a = u === t || i.isFunction(e);
                            if (r) {
                                if (a) {
                                    for (s in e)
                                        if (n.apply(e[s], r) === !1) break
                                } else
                                    for (; o < u;)
                                        if (n.apply(e[o++], r) === !1) break
                            } else if (a) {
                                for (s in e)
                                    if (n.call(e[s], s, e[s]) === !1) break
                            } else
                                for (; o < u;)
                                    if (n.call(e[o], o, e[o++]) === !1) break; return e
                        },
                        trim: _ ? function (e) {
                            return e == null ? "" : _.call(e)
                        } : function (e) {
                            return e == null ? "" : e.toString().replace(l, "").replace(c, "")
                        },
                        makeArray: function (e, t) {
                            var n = t || [];
                            if (e != null) {
                                var r = i.type(e);
                                e.length == null || r === "string" || r === "function" || r === "regexp" || i.isWindow(e) ? O.call(n, e) : i.merge(n, e)
                            }
                            return n
                        },
                        inArray: function (e, t, n) {
                            var r;
                            if (t) {
                                if (D) return D.call(t, e, n);
                                r = t.length, n = n ? n < 0 ? Math.max(0, r + n) : n : 0;
                                for (; n < r; n++)
                                    if (n in t && t[n] === e) return n
                            }
                            return -1
                        },
                        merge: function (e, n) {
                            var r = e.length,
                                i = 0;
                            if (typeof n.length == "number")
                                for (var s = n.length; i < s; i++) e[r++] = n[i];
                            else
                                while (n[i] !== t) e[r++] = n[i++];
                            return e.length = r, e
                        },
                        grep: function (e, t, n) {
                            var r = [],
                                i;
                            n = !! n;
                            for (var s = 0, o = e.length; s < o; s++) i = !! t(e[s], s), n !== i && r.push(e[s]);
                            return r
                        },
                        map: function (e, n, r) {
                            var s, o, u = [],
                                a = 0,
                                f = e.length,
                                l = e instanceof i || f !== t && typeof f == "number" && (f > 0 && e[0] && e[f - 1] || f === 0 || i.isArray(e));
                            if (l)
                                for (; a < f; a++) s = n(e[a], a, r), s != null && (u[u.length] = s);
                            else
                                for (o in e) s = n(e[o], o, r), s != null && (u[u.length] = s);
                            return u.concat.apply([], u)
                        },
                        guid: 1,
                        proxy: function (e, n) {
                            if (typeof n == "string") {
                                var r = e[n];
                                n = e, e = r
                            }
                            if (!i.isFunction(e)) return t;
                            var s = M.call(arguments, 2),
                                o = function () {
                                    return e.apply(n, s.concat(M.call(arguments)))
                                };
                            return o.guid = e.guid = e.guid || o.guid || i.guid++, o
                        },
                        access: function (e, n, r, s, o, u, a) {
                            var f, l = r == null,
                                c = 0,
                                h = e.length;
                            if (r && typeof r == "object") {
                                for (c in r) i.access(e, n, c, r[c], 1, u, s);
                                o = 1
                            } else if (s !== t) {
                                f = a === t && i.isFunction(s), l && (f ? (f = n, n = function (e, t, n) {
                                            return f.call(i(e), n)
                                        }) : (n.call(e, s), n = null));
                                if (n)
                                    for (; c < h; c++) n(e[c], r, f ? s.call(e[c], c, n(e[c], r)) : s, a);
                                o = 1
                            }
                            return o ? e : l ? n.call(e) : h ? n(e[0], r) : u
                        },
                        now: function () {
                            return (new Date).getTime()
                        },
                        uaMatch: function (e) {
                            e = e.toLowerCase();
                            var t = g.exec(e) || y.exec(e) || b.exec(e) || e.indexOf("compatible") < 0 && w.exec(e) || [];
                            return {
                                browser: t[1] || "",
                                version: t[2] || "0"
                            }
                        },
                        sub: function () {
                            function e(t, n) {
                                return new e.fn.init(t, n)
                            }
                            i.extend(!0, e, this), e.superclass = this, e.fn = e.prototype = this(), e.fn.constructor = e, e.sub = this.sub, e.fn.init = function (r, s) {
                                return s && s instanceof i && !(s instanceof e) && (s = e(s)), i.fn.init.call(this, r, s, t)
                            }, e.fn.init.prototype = e.fn;
                            var t = e(n);
                            return e
                        },
                        browser: {}
                    }), i.each("Boolean Number String Function Array Date RegExp Object".split(" "), function (e, t) {
                        P["[object " + t + "]"] = t.toLowerCase()
                    }), N = i.uaMatch(T), N.browser && (i.browser[N.browser] = !0, i.browser.version = N.version), i.browser.webkit && (i.browser.safari = !0), f.test(" ") && (l = /^[\s\xA0]+/, c = /[\s\xA0]+$/), u = i(n), n.addEventListener ? k = function () {
                    n.removeEventListener("DOMContentLoaded", k, !1), i.ready()
                } : n.attachEvent && (k = function () {
                    n.readyState === "complete" && (n.detachEvent("onreadystatechange", k), i.ready())
                }), i
            }(),
            o = {};
        s.Callbacks = function (e) {
            e = e ? o[e] || u(e) : {};
            var n = [],
                r = [],
                i, a, f, l, c, h, p = function (t) {
                    var r, i, o, u, a;
                    for (r = 0, i = t.length; r < i; r++) o = t[r], u = s.type(o), u === "array" ? p(o) : u === "function" && (!e.unique || !v.has(o)) && n.push(o)
                }, d = function (t, s) {
                    s = s || [], i = !e.memory || [t, s], a = !0, f = !0, h = l || 0, l = 0, c = n.length;
                    for (; n && h < c; h++)
                        if (n[h].apply(t, s) === !1 && e.stopOnFalse) {
                            i = !0;
                            break
                        }
                    f = !1, n && (e.once ? i === !0 ? v.disable() : n = [] : r && r.length && (i = r.shift(), v.fireWith(i[0], i[1])))
                }, v = {
                    add: function () {
                        if (n) {
                            var e = n.length;
                            p(arguments), f ? c = n.length : i && i !== !0 && (l = e, d(i[0], i[1]))
                        }
                        return this
                    },
                    remove: function () {
                        if (n) {
                            var t = arguments,
                                r = 0,
                                i = t.length;
                            for (; r < i; r++)
                                for (var s = 0; s < n.length; s++)
                                    if (t[r] === n[s]) {
                                        f && s <= c && (c--, s <= h && h--), n.splice(s--, 1);
                                        if (e.unique) break
                                    }
                        }
                        return this
                    },
                    has: function (e) {
                        if (n) {
                            var t = 0,
                                r = n.length;
                            for (; t < r; t++)
                                if (e === n[t]) return !0
                        }
                        return !1
                    },
                    empty: function () {
                        return n = [], this
                    },
                    disable: function () {
                        return n = r = i = t, this
                    },
                    disabled: function () {
                        return !n
                    },
                    lock: function () {
                        return r = t, (!i || i === !0) && v.disable(), this
                    },
                    locked: function () {
                        return !r
                    },
                    fireWith: function (t, n) {
                        return r && (f ? e.once || r.push([t, n]) : (!e.once || !i) && d(t, n)), this
                    },
                    fire: function () {
                        return v.fireWith(this, arguments), this
                    },
                    fired: function () {
                        return !!a
                    }
                };
            return v
        };
        var a = [].slice;
        s.extend({
                Deferred: function (e) {
                    var t = s.Callbacks("once memory"),
                        n = s.Callbacks("once memory"),
                        r = s.Callbacks("memory"),
                        i = "pending",
                        o = {
                            resolve: t,
                            reject: n,
                            notify: r
                        }, u = {
                            done: t.add,
                            fail: n.add,
                            progress: r.add,
                            state: function () {
                                return i
                            },
                            isResolved: t.fired,
                            isRejected: n.fired,
                            then: function (e, t, n) {
                                return a.done(e).fail(t).progress(n), this
                            },
                            always: function () {
                                return a.done.apply(a, arguments).fail.apply(a, arguments), this
                            },
                            pipe: function (e, t, n) {
                                return s.Deferred(function (r) {
                                    s.each({
                                            done: [e, "resolve"],
                                            fail: [t, "reject"],
                                            progress: [n, "notify"]
                                        }, function (e, t) {
                                            var n = t[0],
                                                i = t[1],
                                                o;
                                            s.isFunction(n) ? a[e](function () {
                                                o = n.apply(this, arguments), o && s.isFunction(o.promise) ? o.promise().then(r.resolve, r.reject, r.notify) : r[i + "With"](this === a ? r : this, [o])
                                            }) : a[e](r[i])
                                        })
                                }).promise()
                            },
                            promise: function (e) {
                                if (e == null) e = u;
                                else
                                    for (var t in u) e[t] = u[t];
                                return e
                            }
                        }, a = u.promise({}),
                        f;
                    for (f in o) a[f] = o[f].fire, a[f + "With"] = o[f].fireWith;
                    return a.done(function () {
                        i = "resolved"
                    }, n.disable, r.lock).fail(function () {
                        i = "rejected"
                    }, t.disable, r.lock), e && e.call(a, a), a
                },
                when: function (e) {
                    function c(e) {
                        return function (n) {
                            t[e] = arguments.length > 1 ? a.call(arguments, 0) : n, --o || f.resolveWith(f, t)
                        }
                    }

                    function h(e) {
                        return function (t) {
                            i[e] = arguments.length > 1 ? a.call(arguments, 0) : t, f.notifyWith(l, i)
                        }
                    }
                    var t = a.call(arguments, 0),
                        n = 0,
                        r = t.length,
                        i = new Array(r),
                        o = r,
                        u = r,
                        f = r <= 1 && e && s.isFunction(e.promise) ? e : s.Deferred(),
                        l = f.promise();
                    if (r > 1) {
                        for (; n < r; n++) t[n] && t[n].promise && s.isFunction(t[n].promise) ? t[n].promise().then(c(n), f.reject, h(n)) : --o;
                        o || f.resolveWith(f, t)
                    } else f !== e && f.resolveWith(f, r ? [e] : []);
                    return l
                }
            }), s.support = function () {
            var t, r, i, o, u, a, f, l, c, h, p, d, v = n.createElement("div"),
                m = n.documentElement;
            v.setAttribute("className", "t"), v.innerHTML = "   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>", r = v.getElementsByTagName("*"), i = v.getElementsByTagName("a")[0];
            if (!r || !r.length || !i) return {};
            o = n.createElement("select"), u = o.appendChild(n.createElement("option")), a = v.getElementsByTagName("input")[0], t = {
                leadingWhitespace: v.firstChild.nodeType === 3,
                tbody: !v.getElementsByTagName("tbody").length,
                htmlSerialize: !! v.getElementsByTagName("link").length,
                style: /top/.test(i.getAttribute("style")),
                hrefNormalized: i.getAttribute("href") === "/a",
                opacity: /^0.55/.test(i.style.opacity),
                cssFloat: !! i.style.cssFloat,
                checkOn: a.value === "on",
                optSelected: u.selected,
                getSetAttribute: v.className !== "t",
                enctype: !! n.createElement("form").enctype,
                html5Clone: n.createElement("nav").cloneNode(!0).outerHTML !== "<:nav></:nav>",
                submitBubbles: !0,
                changeBubbles: !0,
                focusinBubbles: !1,
                deleteExpando: !0,
                noCloneEvent: !0,
                inlineBlockNeedsLayout: !1,
                shrinkWrapBlocks: !1,
                reliableMarginRight: !0,
                pixelMargin: !0
            }, s.boxModel = t.boxModel = n.compatMode === "CSS1Compat", a.checked = !0, t.noCloneChecked = a.cloneNode(!0).checked, o.disabled = !0, t.optDisabled = !u.disabled;
            try {
                delete v.test
            } catch (g) {
                t.deleteExpando = !1
            }!v.addEventListener && v.attachEvent && v.fireEvent && (v.attachEvent("onclick", function () {
                        t.noCloneEvent = !1
                    }), v.cloneNode(!0).fireEvent("onclick")), a = n.createElement("input"), a.value = "t", a.setAttribute("type", "radio"), t.radioValue = a.value === "t", a.setAttribute("checked", "checked"), a.setAttribute("name", "t"), v.appendChild(a), f = n.createDocumentFragment(), f.appendChild(v.lastChild), t.checkClone = f.cloneNode(!0).cloneNode(!0).lastChild.checked, t.appendChecked = a.checked, f.removeChild(a), f.appendChild(v);
            if (v.attachEvent)
                for (p in {
                        submit: 1,
                        change: 1,
                        focusin: 1
                    }) h = "on" + p, d = h in v, d || (v.setAttribute(h, "return;"), d = typeof v[h] == "function"), t[p + "Bubbles"] = d;
            return f.removeChild(v), f = o = u = v = a = null, s(function () {
                var r, i, o, u, a, f, c, h, p, m, g, y, b, w = n.getElementsByTagName("body")[0];
                if (!w) return;
                h = 1, b = "padding:0;margin:0;border:", g = "position:absolute;top:0;left:0;width:1px;height:1px;", y = b + "0;visibility:hidden;", p = "style='" + g + b + "5px solid #000;", m = "<div " + p + "display:block;'><div style='" + b + "0;display:block;overflow:hidden;'></div></div>" + "<table " + p + "' cellpadding='0' cellspacing='0'>" + "<tr><td></td></tr></table>", r = n.createElement("div"), r.style.cssText = y + "width:0;height:0;position:static;top:0;margin-top:" + h + "px", w.insertBefore(r, w.firstChild), v = n.createElement("div"), r.appendChild(v), v.innerHTML = "<table><tr><td style='" + b + "0;display:none'></td><td>t</td></tr></table>", l = v.getElementsByTagName("td"), d = l[0].offsetHeight === 0, l[0].style.display = "", l[1].style.display = "none", t.reliableHiddenOffsets = d && l[0].offsetHeight === 0, e.getComputedStyle && (v.innerHTML = "", c = n.createElement("div"), c.style.width = "0", c.style.marginRight = "0", v.style.width = "2px", v.appendChild(c), t.reliableMarginRight = (parseInt((e.getComputedStyle(c, null) || {
                                    marginRight: 0
                                }).marginRight, 10) || 0) === 0), typeof v.style.zoom != "undefined" && (v.innerHTML = "", v.style.width = v.style.padding = "1px", v.style.border = 0, v.style.overflow = "hidden", v.style.display = "inline", v.style.zoom = 1, t.inlineBlockNeedsLayout = v.offsetWidth === 3, v.style.display = "block", v.style.overflow = "visible", v.innerHTML = "<div style='width:5px;'></div>", t.shrinkWrapBlocks = v.offsetWidth !== 3), v.style.cssText = g + y, v.innerHTML = m, i = v.firstChild, o = i.firstChild, a = i.nextSibling.firstChild.firstChild, f = {
                    doesNotAddBorder: o.offsetTop !== 5,
                    doesAddBorderForTableAndCells: a.offsetTop === 5
                }, o.style.position = "fixed", o.style.top = "20px", f.fixedPosition = o.offsetTop === 20 || o.offsetTop === 15, o.style.position = o.style.top = "", i.style.overflow = "hidden", i.style.position = "relative", f.subtractsBorderForOverflowNotVisible = o.offsetTop === -5, f.doesNotIncludeMarginInBodyOffset = w.offsetTop !== h, e.getComputedStyle && (v.style.marginTop = "1%", t.pixelMargin = (e.getComputedStyle(v, null) || {
                            marginTop: 0
                        }).marginTop !== "1%"), typeof r.style.zoom != "undefined" && (r.style.zoom = 1), w.removeChild(r), c = v = r = null, s.extend(t, f)
            }), t
        }();
        var f = /^(?:\{.*\}|\[.*\])$/,
            l = /([A-Z])/g;
        s.extend({
                cache: {},
                uuid: 0,
                expando: "jQuery" + (s.fn.jquery + Math.random()).replace(/\D/g, ""),
                noData: {
                    embed: !0,
                    object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
                    applet: !0
                },
                hasData: function (e) {
                    return e = e.nodeType ? s.cache[e[s.expando]] : e[s.expando], !! e && !h(e)
                },
                data: function (e, n, r, i) {
                    if (!s.acceptData(e)) return;
                    var o, u, a, f = s.expando,
                        l = typeof n == "string",
                        c = e.nodeType,
                        h = c ? s.cache : e,
                        p = c ? e[f] : e[f] && f,
                        d = n === "events";
                    if ((!p || !h[p] || !d && !i && !h[p].data) && l && r === t) return;
                    p || (c ? e[f] = p = ++s.uuid : p = f), h[p] || (h[p] = {}, c || (h[p].toJSON = s.noop));
                    if (typeof n == "object" || typeof n == "function") i ? h[p] = s.extend(h[p], n) : h[p].data = s.extend(h[p].data, n);
                    return o = u = h[p], i || (u.data || (u.data = {}), u = u.data), r !== t && (u[s.camelCase(n)] = r), d && !u[n] ? o.events : (l ? (a = u[n], a == null && (a = u[s.camelCase(n)])) : a = u, a)
                },
                removeData: function (e, t, n) {
                    if (!s.acceptData(e)) return;
                    var r, i, o, u = s.expando,
                        a = e.nodeType,
                        f = a ? s.cache : e,
                        l = a ? e[u] : u;
                    if (!f[l]) return;
                    if (t) {
                        r = n ? f[l] : f[l].data;
                        if (r) {
                            s.isArray(t) || (t in r ? t = [t] : (t = s.camelCase(t), t in r ? t = [t] : t = t.split(" ")));
                            for (i = 0, o = t.length; i < o; i++) delete r[t[i]];
                            if (!(n ? h : s.isEmptyObject)(r)) return
                        }
                    }
                    if (!n) {
                        delete f[l].data;
                        if (!h(f[l])) return
                    }
                    s.support.deleteExpando || !f.setInterval ? delete f[l] : f[l] = null, a && (s.support.deleteExpando ? delete e[u] : e.removeAttribute ? e.removeAttribute(u) : e[u] = null)
                },
                _data: function (e, t, n) {
                    return s.data(e, t, n, !0)
                },
                acceptData: function (e) {
                    if (e.nodeName) {
                        var t = s.noData[e.nodeName.toLowerCase()];
                        if (t) return t !== !0 && e.getAttribute("classid") === t
                    }
                    return !0
                }
            }), s.fn.extend({
                data: function (e, n) {
                    var r, i, o, u, a, f = this[0],
                        l = 0,
                        h = null;
                    if (e === t) {
                        if (this.length) {
                            h = s.data(f);
                            if (f.nodeType === 1 && !s._data(f, "parsedAttrs")) {
                                o = f.attributes;
                                for (a = o.length; l < a; l++) u = o[l].name, u.indexOf("data-") === 0 && (u = s.camelCase(u.substring(5)), c(f, u, h[u]));
                                s._data(f, "parsedAttrs", !0)
                            }
                        }
                        return h
                    }
                    return typeof e == "object" ? this.each(function () {
                        s.data(this, e)
                    }) : (r = e.split(".", 2), r[1] = r[1] ? "." + r[1] : "", i = r[1] + "!", s.access(this, function (n) {
                                if (n === t) return h = this.triggerHandler("getData" + i, [r[0]]), h === t && f && (h = s.data(f, e), h = c(f, e, h)), h === t && r[1] ? this.data(r[0]) : h;
                                r[1] = n, this.each(function () {
                                    var t = s(this);
                                    t.triggerHandler("setData" + i, r), s.data(this, e, n), t.triggerHandler("changeData" + i, r)
                                })
                            }, null, n, arguments.length > 1, null, !1))
                },
                removeData: function (e) {
                    return this.each(function () {
                        s.removeData(this, e)
                    })
                }
            }), s.extend({
                _mark: function (e, t) {
                    e && (t = (t || "fx") + "mark", s._data(e, t, (s._data(e, t) || 0) + 1))
                },
                _unmark: function (e, t, n) {
                    e !== !0 && (n = t, t = e, e = !1);
                    if (t) {
                        n = n || "fx";
                        var r = n + "mark",
                            i = e ? 0 : (s._data(t, r) || 1) - 1;
                        i ? s._data(t, r, i) : (s.removeData(t, r, !0), p(t, n, "mark"))
                    }
                },
                queue: function (e, t, n) {
                    var r;
                    if (e) return t = (t || "fx") + "queue", r = s._data(e, t), n && (!r || s.isArray(n) ? r = s._data(e, t, s.makeArray(n)) : r.push(n)), r || []
                },
                dequeue: function (e, t) {
                    t = t || "fx";
                    var n = s.queue(e, t),
                        r = n.shift(),
                        i = {};
                    r === "inprogress" && (r = n.shift()), r && (t === "fx" && n.unshift("inprogress"), s._data(e, t + ".run", i), r.call(e, function () {
                                s.dequeue(e, t)
                            }, i)), n.length || (s.removeData(e, t + "queue " + t + ".run", !0), p(e, t, "queue"))
                }
            }), s.fn.extend({
                queue: function (e, n) {
                    var r = 2;
                    return typeof e != "string" && (n = e, e = "fx", r--), arguments.length < r ? s.queue(this[0], e) : n === t ? this : this.each(function () {
                        var t = s.queue(this, e, n);
                        e === "fx" && t[0] !== "inprogress" && s.dequeue(this, e)
                    })
                },
                dequeue: function (e) {
                    return this.each(function () {
                        s.dequeue(this, e)
                    })
                },
                delay: function (e, t) {
                    return e = s.fx ? s.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function (t, n) {
                        var r = setTimeout(t, e);
                        n.stop = function () {
                            clearTimeout(r)
                        }
                    })
                },
                clearQueue: function (e) {
                    return this.queue(e || "fx", [])
                },
                promise: function (e, n) {
                    function h() {
                        --u || r.resolveWith(i, [i])
                    }
                    typeof e != "string" && (n = e, e = t), e = e || "fx";
                    var r = s.Deferred(),
                        i = this,
                        o = i.length,
                        u = 1,
                        a = e + "defer",
                        f = e + "queue",
                        l = e + "mark",
                        c;
                    while (o--)
                        if (c = s.data(i[o], a, t, !0) || (s.data(i[o], f, t, !0) || s.data(i[o], l, t, !0)) && s.data(i[o], a, s.Callbacks("once memory"), !0)) u++, c.add(h);
                    return h(), r.promise(n)
                }
            });
        var d = /[\n\t\r]/g,
            v = /\s+/,
            m = /\r/g,
            g = /^(?:button|input)$/i,
            y = /^(?:button|input|object|select|textarea)$/i,
            b = /^a(?:rea)?$/i,
            w = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
            E = s.support.getSetAttribute,
            S, x, T;
        s.fn.extend({
                attr: function (e, t) {
                    return s.access(this, s.attr, e, t, arguments.length > 1)
                },
                removeAttr: function (e) {
                    return this.each(function () {
                        s.removeAttr(this, e)
                    })
                },
                prop: function (e, t) {
                    return s.access(this, s.prop, e, t, arguments.length > 1)
                },
                removeProp: function (e) {
                    return e = s.propFix[e] || e, this.each(function () {
                        try {
                            this[e] = t, delete this[e]
                        } catch (n) {}
                    })
                },
                addClass: function (e) {
                    var t, n, r, i, o, u, a;
                    if (s.isFunction(e)) return this.each(function (t) {
                        s(this).addClass(e.call(this, t, this.className))
                    });
                    if (e && typeof e == "string") {
                        t = e.split(v);
                        for (n = 0, r = this.length; n < r; n++) {
                            i = this[n];
                            if (i.nodeType === 1)
                                if (!i.className && t.length === 1) i.className = e;
                                else {
                                    o = " " + i.className + " ";
                                    for (u = 0, a = t.length; u < a; u++)~ o.indexOf(" " + t[u] + " ") || (o += t[u] + " ");
                                    i.className = s.trim(o)
                                }
                        }
                    }
                    return this
                },
                removeClass: function (e) {
                    var n, r, i, o, u, a, f;
                    if (s.isFunction(e)) return this.each(function (t) {
                        s(this).removeClass(e.call(this, t, this.className))
                    });
                    if (e && typeof e == "string" || e === t) {
                        n = (e || "").split(v);
                        for (r = 0, i = this.length; r < i; r++) {
                            o = this[r];
                            if (o.nodeType === 1 && o.className)
                                if (e) {
                                    u = (" " + o.className + " ").replace(d, " ");
                                    for (a = 0, f = n.length; a < f; a++) u = u.replace(" " + n[a] + " ", " ");
                                    o.className = s.trim(u)
                                } else o.className = ""
                        }
                    }
                    return this
                },
                toggleClass: function (e, t) {
                    var n = typeof e,
                        r = typeof t == "boolean";
                    return s.isFunction(e) ? this.each(function (n) {
                        s(this).toggleClass(e.call(this, n, this.className, t), t)
                    }) : this.each(function () {
                        if (n === "string") {
                            var i, o = 0,
                                u = s(this),
                                a = t,
                                f = e.split(v);
                            while (i = f[o++]) a = r ? a : !u.hasClass(i), u[a ? "addClass" : "removeClass"](i)
                        } else if (n === "undefined" || n === "boolean") this.className && s._data(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : s._data(this, "__className__") || ""
                    })
                },
                hasClass: function (e) {
                    var t = " " + e + " ",
                        n = 0,
                        r = this.length;
                    for (; n < r; n++)
                        if (this[n].nodeType === 1 && (" " + this[n].className + " ").replace(d, " ").indexOf(t) > -1) return !0;
                    return !1
                },
                val: function (e) {
                    var n, r, i, o = this[0];
                    if (!arguments.length) {
                        if (o) return n = s.valHooks[o.type] || s.valHooks[o.nodeName.toLowerCase()], n && "get" in n && (r = n.get(o, "value")) !== t ? r : (r = o.value, typeof r == "string" ? r.replace(m, "") : r == null ? "" : r);
                        return
                    }
                    return i = s.isFunction(e), this.each(function (r) {
                        var o = s(this),
                            u;
                        if (this.nodeType !== 1) return;
                        i ? u = e.call(this, r, o.val()) : u = e, u == null ? u = "" : typeof u == "number" ? u += "" : s.isArray(u) && (u = s.map(u, function (e) {
                                    return e == null ? "" : e + ""
                                })), n = s.valHooks[this.type] || s.valHooks[this.nodeName.toLowerCase()];
                        if (!n || !("set" in n) || n.set(this, u, "value") === t) this.value = u
                    })
                }
            }), s.extend({
                valHooks: {
                    option: {
                        get: function (e) {
                            var t = e.attributes.value;
                            return !t || t.specified ? e.value : e.text
                        }
                    },
                    select: {
                        get: function (e) {
                            var t, n, r, i, o = e.selectedIndex,
                                u = [],
                                a = e.options,
                                f = e.type === "select-one";
                            if (o < 0) return null;
                            n = f ? o : 0, r = f ? o + 1 : a.length;
                            for (; n < r; n++) {
                                i = a[n];
                                if (i.selected && (s.support.optDisabled ? !i.disabled : i.getAttribute("disabled") === null) && (!i.parentNode.disabled || !s.nodeName(i.parentNode, "optgroup"))) {
                                    t = s(i).val();
                                    if (f) return t;
                                    u.push(t)
                                }
                            }
                            return f && !u.length && a.length ? s(a[o]).val() : u
                        },
                        set: function (e, t) {
                            var n = s.makeArray(t);
                            return s(e).find("option").each(function () {
                                this.selected = s.inArray(s(this).val(), n) >= 0
                            }), n.length || (e.selectedIndex = -1), n
                        }
                    }
                },
                attrFn: {
                    val: !0,
                    css: !0,
                    html: !0,
                    text: !0,
                    data: !0,
                    width: !0,
                    height: !0,
                    offset: !0
                },
                attr: function (e, n, r, i) {
                    var o, u, a, f = e.nodeType;
                    if (!e || f === 3 || f === 8 || f === 2) return;
                    if (i && n in s.attrFn) return s(e)[n](r);
                    if (typeof e.getAttribute == "undefined") return s.prop(e, n, r);
                    a = f !== 1 || !s.isXMLDoc(e), a && (n = n.toLowerCase(), u = s.attrHooks[n] || (w.test(n) ? x : S));
                    if (r !== t) {
                        if (r === null) {
                            s.removeAttr(e, n);
                            return
                        }
                        return u && "set" in u && a && (o = u.set(e, r, n)) !== t ? o : (e.setAttribute(n, "" + r), r)
                    }
                    return u && "get" in u && a && (o = u.get(e, n)) !== null ? o : (o = e.getAttribute(n), o === null ? t : o)
                },
                removeAttr: function (e, t) {
                    var n, r, i, o, u, a = 0;
                    if (t && e.nodeType === 1) {
                        r = t.toLowerCase().split(v), o = r.length;
                        for (; a < o; a++) i = r[a], i && (n = s.propFix[i] || i, u = w.test(i), u || s.attr(e, i, ""), e.removeAttribute(E ? i : n), u && n in e && (e[n] = !1))
                    }
                },
                attrHooks: {
                    type: {
                        set: function (e, t) {
                            if (g.test(e.nodeName) && e.parentNode) s.error("type property can't be changed");
                            else if (!s.support.radioValue && t === "radio" && s.nodeName(e, "input")) {
                                var n = e.value;
                                return e.setAttribute("type", t), n && (e.value = n), t
                            }
                        }
                    },
                    value: {
                        get: function (e, t) {
                            return S && s.nodeName(e, "button") ? S.get(e, t) : t in e ? e.value : null
                        },
                        set: function (e, t, n) {
                            if (S && s.nodeName(e, "button")) return S.set(e, t, n);
                            e.value = t
                        }
                    }
                },
                propFix: {
                    tabindex: "tabIndex",
                    readonly: "readOnly",
                    "for": "htmlFor",
                    "class": "className",
                    maxlength: "maxLength",
                    cellspacing: "cellSpacing",
                    cellpadding: "cellPadding",
                    rowspan: "rowSpan",
                    colspan: "colSpan",
                    usemap: "useMap",
                    frameborder: "frameBorder",
                    contenteditable: "contentEditable"
                },
                prop: function (e, n, r) {
                    var i, o, u, a = e.nodeType;
                    if (!e || a === 3 || a === 8 || a === 2) return;
                    return u = a !== 1 || !s.isXMLDoc(e), u && (n = s.propFix[n] || n, o = s.propHooks[n]), r !== t ? o && "set" in o && (i = o.set(e, r, n)) !== t ? i : e[n] = r : o && "get" in o && (i = o.get(e, n)) !== null ? i : e[n]
                },
                propHooks: {
                    tabIndex: {
                        get: function (e) {
                            var n = e.getAttributeNode("tabindex");
                            return n && n.specified ? parseInt(n.value, 10) : y.test(e.nodeName) || b.test(e.nodeName) && e.href ? 0 : t
                        }
                    }
                }
            }), s.attrHooks.tabindex = s.propHooks.tabIndex, x = {
            get: function (e, n) {
                var r, i = s.prop(e, n);
                return i === !0 || typeof i != "boolean" && (r = e.getAttributeNode(n)) && r.nodeValue !== !1 ? n.toLowerCase() : t
            },
            set: function (e, t, n) {
                var r;
                return t === !1 ? s.removeAttr(e, n) : (r = s.propFix[n] || n, r in e && (e[r] = !0), e.setAttribute(n, n.toLowerCase())), n
            }
        }, E || (T = {
                name: !0,
                id: !0,
                coords: !0
            }, S = s.valHooks.button = {
                get: function (e, n) {
                    var r;
                    return r = e.getAttributeNode(n), r && (T[n] ? r.nodeValue !== "" : r.specified) ? r.nodeValue : t
                },
                set: function (e, t, r) {
                    var i = e.getAttributeNode(r);
                    return i || (i = n.createAttribute(r), e.setAttributeNode(i)), i.nodeValue = t + ""
                }
            }, s.attrHooks.tabindex.set = S.set, s.each(["width", "height"], function (e, t) {
                    s.attrHooks[t] = s.extend(s.attrHooks[t], {
                            set: function (e, n) {
                                if (n === "") return e.setAttribute(t, "auto"), n
                            }
                        })
                }), s.attrHooks.contenteditable = {
                get: S.get,
                set: function (e, t, n) {
                    t === "" && (t = "false"), S.set(e, t, n)
                }
            }), s.support.hrefNormalized || s.each(["href", "src", "width", "height"], function (e, n) {
                s.attrHooks[n] = s.extend(s.attrHooks[n], {
                        get: function (e) {
                            var r = e.getAttribute(n, 2);
                            return r === null ? t : r
                        }
                    })
            }), s.support.style || (s.attrHooks.style = {
                get: function (e) {
                    return e.style.cssText.toLowerCase() || t
                },
                set: function (e, t) {
                    return e.style.cssText = "" + t
                }
            }), s.support.optSelected || (s.propHooks.selected = s.extend(s.propHooks.selected, {
                    get: function (e) {
                        var t = e.parentNode;
                        return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null
                    }
                })), s.support.enctype || (s.propFix.enctype = "encoding"), s.support.checkOn || s.each(["radio", "checkbox"], function () {
                s.valHooks[this] = {
                    get: function (e) {
                        return e.getAttribute("value") === null ? "on" : e.value
                    }
                }
            }), s.each(["radio", "checkbox"], function () {
                s.valHooks[this] = s.extend(s.valHooks[this], {
                        set: function (e, t) {
                            if (s.isArray(t)) return e.checked = s.inArray(s(e).val(), t) >= 0
                        }
                    })
            });
        var N = /^(?:textarea|input|select)$/i,
            C = /^([^\.]*)?(?:\.(.+))?$/,
            k = /(?:^|\s)hover(\.\S+)?\b/,
            L = /^key/,
            A = /^(?:mouse|contextmenu)|click/,
            O = /^(?:focusinfocus|focusoutblur)$/,
            M = /^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,
            _ = function (e) {
                var t = M.exec(e);
                return t && (t[1] = (t[1] || "").toLowerCase(), t[3] = t[3] && new RegExp("(?:^|\\s)" + t[3] + "(?:\\s|$)")), t
            }, D = function (e, t) {
                var n = e.attributes || {};
                return (!t[1] || e.nodeName.toLowerCase() === t[1]) && (!t[2] || (n.id || {}).value === t[2]) && (!t[3] || t[3].test((n["class"] || {}).value))
            }, P = function (e) {
                return s.event.special.hover ? e : e.replace(k, "mouseenter$1 mouseleave$1")
            };
        s.event = {
            add: function (e, n, r, i, o) {
                var u, a, f, l, c, h, p, d, v, m, g, y;
                if (e.nodeType === 3 || e.nodeType === 8 || !n || !r || !(u = s._data(e))) return;
                r.handler && (v = r, r = v.handler, o = v.selector), r.guid || (r.guid = s.guid++), f = u.events, f || (u.events = f = {}), a = u.handle, a || (u.handle = a = function (e) {
                    return typeof s == "undefined" || !! e && s.event.triggered === e.type ? t : s.event.dispatch.apply(a.elem, arguments)
                }, a.elem = e), n = s.trim(P(n)).split(" ");
                for (l = 0; l < n.length; l++) {
                    c = C.exec(n[l]) || [], h = c[1], p = (c[2] || "").split(".").sort(), y = s.event.special[h] || {}, h = (o ? y.delegateType : y.bindType) || h, y = s.event.special[h] || {}, d = s.extend({
                            type: h,
                            origType: c[1],
                            data: i,
                            handler: r,
                            guid: r.guid,
                            selector: o,
                            quick: o && _(o),
                            namespace: p.join(".")
                        }, v), g = f[h];
                    if (!g) {
                        g = f[h] = [], g.delegateCount = 0;
                        if (!y.setup || y.setup.call(e, i, p, a) === !1) e.addEventListener ? e.addEventListener(h, a, !1) : e.attachEvent && e.attachEvent("on" + h, a)
                    }
                    y.add && (y.add.call(e, d), d.handler.guid || (d.handler.guid = r.guid)), o ? g.splice(g.delegateCount++, 0, d) : g.push(d), s.event.global[h] = !0
                }
                e = null
            },
            global: {},
            remove: function (e, t, n, r, i) {
                var o = s.hasData(e) && s._data(e),
                    u, a, f, l, c, h, p, d, v, m, g, y;
                if (!o || !(d = o.events)) return;
                t = s.trim(P(t || "")).split(" ");
                for (u = 0; u < t.length; u++) {
                    a = C.exec(t[u]) || [], f = l = a[1], c = a[2];
                    if (!f) {
                        for (f in d) s.event.remove(e, f + t[u], n, r, !0);
                        continue
                    }
                    v = s.event.special[f] || {}, f = (r ? v.delegateType : v.bindType) || f, g = d[f] || [], h = g.length, c = c ? new RegExp("(^|\\.)" + c.split(".").sort().join("\\.(?:.*\\.)?") + "(\\.|$)") : null;
                    for (p = 0; p < g.length; p++) y = g[p], (i || l === y.origType) && (!n || n.guid === y.guid) && (!c || c.test(y.namespace)) && (!r || r === y.selector || r === "**" && y.selector) && (g.splice(p--, 1), y.selector && g.delegateCount--, v.remove && v.remove.call(e, y));
                    g.length === 0 && h !== g.length && ((!v.teardown || v.teardown.call(e, c) === !1) && s.removeEvent(e, f, o.handle), delete d[f])
                }
                s.isEmptyObject(d) && (m = o.handle, m && (m.elem = null), s.removeData(e, ["events", "handle"], !0))
            },
            customEvent: {
                getData: !0,
                setData: !0,
                changeData: !0
            },
            trigger: function (n, r, i, o) {
                if (!i || i.nodeType !== 3 && i.nodeType !== 8) {
                    var u = n.type || n,
                        a = [],
                        f, l, c, h, p, d, v, m, g, y;
                    if (O.test(u + s.event.triggered)) return;
                    u.indexOf("!") >= 0 && (u = u.slice(0, -1), l = !0), u.indexOf(".") >= 0 && (a = u.split("."), u = a.shift(), a.sort());
                    if ((!i || s.event.customEvent[u]) && !s.event.global[u]) return;
                    n = typeof n == "object" ? n[s.expando] ? n : new s.Event(u, n) : new s.Event(u), n.type = u, n.isTrigger = !0, n.exclusive = l, n.namespace = a.join("."), n.namespace_re = n.namespace ? new RegExp("(^|\\.)" + a.join("\\.(?:.*\\.)?") + "(\\.|$)") : null, d = u.indexOf(":") < 0 ? "on" + u : "";
                    if (!i) {
                        f = s.cache;
                        for (c in f) f[c].events && f[c].events[u] && s.event.trigger(n, r, f[c].handle.elem, !0);
                        return
                    }
                    n.result = t, n.target || (n.target = i), r = r != null ? s.makeArray(r) : [], r.unshift(n), v = s.event.special[u] || {};
                    if (v.trigger && v.trigger.apply(i, r) === !1) return;
                    g = [
                        [i, v.bindType || u]
                    ];
                    if (!o && !v.noBubble && !s.isWindow(i)) {
                        y = v.delegateType || u, h = O.test(y + u) ? i : i.parentNode, p = null;
                        for (; h; h = h.parentNode) g.push([h, y]), p = h;
                        p && p === i.ownerDocument && g.push([p.defaultView || p.parentWindow || e, y])
                    }
                    for (c = 0; c < g.length && !n.isPropagationStopped(); c++) h = g[c][0], n.type = g[c][1], m = (s._data(h, "events") || {})[n.type] && s._data(h, "handle"), m && m.apply(h, r), m = d && h[d], m && s.acceptData(h) && m.apply(h, r) === !1 && n.preventDefault();
                    return n.type = u, !o && !n.isDefaultPrevented() && (!v._default || v._default.apply(i.ownerDocument, r) === !1) && (u !== "click" || !s.nodeName(i, "a")) && s.acceptData(i) && d && i[u] && (u !== "focus" && u !== "blur" || n.target.offsetWidth !== 0) && !s.isWindow(i) && (p = i[d], p && (i[d] = null), s.event.triggered = u, i[u](), s.event.triggered = t, p && (i[d] = p)), n.result
                }
                return
            },
            dispatch: function (n) {
                n = s.event.fix(n || e.event);
                var r = (s._data(this, "events") || {})[n.type] || [],
                    i = r.delegateCount,
                    o = [].slice.call(arguments, 0),
                    u = !n.exclusive && !n.namespace,
                    a = s.event.special[n.type] || {}, f = [],
                    l, c, h, p, d, v, m, g, y, b, w;
                o[0] = n, n.delegateTarget = this;
                if (a.preDispatch && a.preDispatch.call(this, n) === !1) return;
                if (i && (!n.button || n.type !== "click")) {
                    p = s(this), p.context = this.ownerDocument || this;
                    for (h = n.target; h != this; h = h.parentNode || this)
                        if (h.disabled !== !0) {
                            v = {}, g = [], p[0] = h;
                            for (l = 0; l < i; l++) y = r[l], b = y.selector, v[b] === t && (v[b] = y.quick ? D(h, y.quick) : p.is(b)), v[b] && g.push(y);
                            g.length && f.push({
                                    elem: h,
                                    matches: g
                                })
                        }
                }
                r.length > i && f.push({
                        elem: this,
                        matches: r.slice(i)
                    });
                for (l = 0; l < f.length && !n.isPropagationStopped(); l++) {
                    m = f[l], n.currentTarget = m.elem;
                    for (c = 0; c < m.matches.length && !n.isImmediatePropagationStopped(); c++) {
                        y = m.matches[c];
                        if (u || !n.namespace && !y.namespace || n.namespace_re && n.namespace_re.test(y.namespace)) n.data = y.data, n.handleObj = y, d = ((s.event.special[y.origType] || {}).handle || y.handler).apply(m.elem, o), d !== t && (n.result = d, d === !1 && (n.preventDefault(), n.stopPropagation()))
                    }
                }
                return a.postDispatch && a.postDispatch.call(this, n), n.result
            },
            props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function (e, t) {
                    return e.which == null && (e.which = t.charCode != null ? t.charCode : t.keyCode), e
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function (e, r) {
                    var i, s, o, u = r.button,
                        a = r.fromElement;
                    return e.pageX == null && r.clientX != null && (i = e.target.ownerDocument || n, s = i.documentElement, o = i.body, e.pageX = r.clientX + (s && s.scrollLeft || o && o.scrollLeft || 0) - (s && s.clientLeft || o && o.clientLeft || 0), e.pageY = r.clientY + (s && s.scrollTop || o && o.scrollTop || 0) - (s && s.clientTop || o && o.clientTop || 0)), !e.relatedTarget && a && (e.relatedTarget = a === e.target ? r.toElement : a), !e.which && u !== t && (e.which = u & 1 ? 1 : u & 2 ? 3 : u & 4 ? 2 : 0), e
                }
            },
            fix: function (e) {
                if (e[s.expando]) return e;
                var r, i, o = e,
                    u = s.event.fixHooks[e.type] || {}, a = u.props ? this.props.concat(u.props) : this.props;
                e = s.Event(o);
                for (r = a.length; r;) i = a[--r], e[i] = o[i];
                return e.target || (e.target = o.srcElement || n), e.target.nodeType === 3 && (e.target = e.target.parentNode), e.metaKey === t && (e.metaKey = e.ctrlKey), u.filter ? u.filter(e, o) : e
            },
            special: {
                ready: {
                    setup: s.bindReady
                },
                load: {
                    noBubble: !0
                },
                focus: {
                    delegateType: "focusin"
                },
                blur: {
                    delegateType: "focusout"
                },
                beforeunload: {
                    setup: function (e, t, n) {
                        s.isWindow(this) && (this.onbeforeunload = n)
                    },
                    teardown: function (e, t) {
                        this.onbeforeunload === t && (this.onbeforeunload = null)
                    }
                }
            },
            simulate: function (e, t, n, r) {
                var i = s.extend(new s.Event, n, {
                        type: e,
                        isSimulated: !0,
                        originalEvent: {}
                    });
                r ? s.event.trigger(i, null, t) : s.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault()
            }
        }, s.event.handle = s.event.dispatch, s.removeEvent = n.removeEventListener ? function (e, t, n) {
            e.removeEventListener && e.removeEventListener(t, n, !1)
        } : function (e, t, n) {
            e.detachEvent && e.detachEvent("on" + t, n)
        }, s.Event = function (e, t) {
            if (!(this instanceof s.Event)) return new s.Event(e, t);
            e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.returnValue === !1 || e.getPreventDefault && e.getPreventDefault() ? B : H) : this.type = e, t && s.extend(this, t), this.timeStamp = e && e.timeStamp || s.now(), this[s.expando] = !0
        }, s.Event.prototype = {
            preventDefault: function () {
                this.isDefaultPrevented = B;
                var e = this.originalEvent;
                if (!e) return;
                e.preventDefault ? e.preventDefault() : e.returnValue = !1
            },
            stopPropagation: function () {
                this.isPropagationStopped = B;
                var e = this.originalEvent;
                if (!e) return;
                e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0
            },
            stopImmediatePropagation: function () {
                this.isImmediatePropagationStopped = B, this.stopPropagation()
            },
            isDefaultPrevented: H,
            isPropagationStopped: H,
            isImmediatePropagationStopped: H
        }, s.each({
                mouseenter: "mouseover",
                mouseleave: "mouseout"
            }, function (e, t) {
                s.event.special[e] = {
                    delegateType: t,
                    bindType: t,
                    handle: function (e) {
                        var n = this,
                            r = e.relatedTarget,
                            i = e.handleObj,
                            o = i.selector,
                            u;
                        if (!r || r !== n && !s.contains(n, r)) e.type = i.origType, u = i.handler.apply(this, arguments), e.type = t;
                        return u
                    }
                }
            }), s.support.submitBubbles || (s.event.special.submit = {
                setup: function () {
                    if (s.nodeName(this, "form")) return !1;
                    s.event.add(this, "click._submit keypress._submit", function (e) {
                        var n = e.target,
                            r = s.nodeName(n, "input") || s.nodeName(n, "button") ? n.form : t;
                        r && !r._submit_attached && (s.event.add(r, "submit._submit", function (e) {
                                    e._submit_bubble = !0
                                }), r._submit_attached = !0)
                    })
                },
                postDispatch: function (e) {
                    e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && s.event.simulate("submit", this.parentNode, e, !0))
                },
                teardown: function () {
                    if (s.nodeName(this, "form")) return !1;
                    s.event.remove(this, "._submit")
                }
            }), s.support.changeBubbles || (s.event.special.change = {
                setup: function () {
                    if (N.test(this.nodeName)) {
                        if (this.type === "checkbox" || this.type === "radio") s.event.add(this, "propertychange._change", function (e) {
                            e.originalEvent.propertyName === "checked" && (this._just_changed = !0)
                        }), s.event.add(this, "click._change", function (e) {
                            this._just_changed && !e.isTrigger && (this._just_changed = !1, s.event.simulate("change", this, e, !0))
                        });
                        return !1
                    }
                    s.event.add(this, "beforeactivate._change", function (e) {
                        var t = e.target;
                        N.test(t.nodeName) && !t._change_attached && (s.event.add(t, "change._change", function (e) {
                                    this.parentNode && !e.isSimulated && !e.isTrigger && s.event.simulate("change", this.parentNode, e, !0)
                                }), t._change_attached = !0)
                    })
                },
                handle: function (e) {
                    var t = e.target;
                    if (this !== t || e.isSimulated || e.isTrigger || t.type !== "radio" && t.type !== "checkbox") return e.handleObj.handler.apply(this, arguments)
                },
                teardown: function () {
                    return s.event.remove(this, "._change"), N.test(this.nodeName)
                }
            }), s.support.focusinBubbles || s.each({
                focus: "focusin",
                blur: "focusout"
            }, function (e, t) {
                var r = 0,
                    i = function (e) {
                        s.event.simulate(t, e.target, s.event.fix(e), !0)
                    };
                s.event.special[t] = {
                    setup: function () {
                        r++ === 0 && n.addEventListener(e, i, !0)
                    },
                    teardown: function () {
                        --r === 0 && n.removeEventListener(e, i, !0)
                    }
                }
            }), s.fn.extend({
                on: function (e, n, r, i, o) {
                    var u, a;
                    if (typeof e == "object") {
                        typeof n != "string" && (r = r || n, n = t);
                        for (a in e) this.on(a, n, r, e[a], o);
                        return this
                    }
                    r == null && i == null ? (i = n, r = n = t) : i == null && (typeof n == "string" ? (i = r, r = t) : (i = r, r = n, n = t));
                    if (i === !1) i = H;
                    else if (!i) return this;
                    return o === 1 && (u = i, i = function (e) {
                        return s().off(e), u.apply(this, arguments)
                    }, i.guid = u.guid || (u.guid = s.guid++)), this.each(function () {
                        s.event.add(this, e, i, r, n)
                    })
                },
                one: function (e, t, n, r) {
                    return this.on(e, t, n, r, 1)
                },
                off: function (e, n, r) {
                    if (e && e.preventDefault && e.handleObj) {
                        var i = e.handleObj;
                        return s(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this
                    }
                    if (typeof e == "object") {
                        for (var o in e) this.off(o, n, e[o]);
                        return this
                    }
                    if (n === !1 || typeof n == "function") r = n, n = t;
                    return r === !1 && (r = H), this.each(function () {
                        s.event.remove(this, e, r, n)
                    })
                },
                bind: function (e, t, n) {
                    return this.on(e, null, t, n)
                },
                unbind: function (e, t) {
                    return this.off(e, null, t)
                },
                live: function (e, t, n) {
                    return s(this.context).on(e, this.selector, t, n), this
                },
                die: function (e, t) {
                    return s(this.context).off(e, this.selector || "**", t), this
                },
                delegate: function (e, t, n, r) {
                    return this.on(t, e, n, r)
                },
                undelegate: function (e, t, n) {
                    return arguments.length == 1 ? this.off(e, "**") : this.off(t, e, n)
                },
                trigger: function (e, t) {
                    return this.each(function () {
                        s.event.trigger(e, t, this)
                    })
                },
                triggerHandler: function (e, t) {
                    if (this[0]) return s.event.trigger(e, t, this[0], !0)
                },
                toggle: function (e) {
                    var t = arguments,
                        n = e.guid || s.guid++,
                        r = 0,
                        i = function (n) {
                            var i = (s._data(this, "lastToggle" + e.guid) || 0) % r;
                            return s._data(this, "lastToggle" + e.guid, i + 1), n.preventDefault(), t[i].apply(this, arguments) || !1
                        };
                    i.guid = n;
                    while (r < t.length) t[r++].guid = n;
                    return this.click(i)
                },
                hover: function (e, t) {
                    return this.mouseenter(e).mouseleave(t || e)
                }
            }), s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (e, t) {
                s.fn[t] = function (e, n) {
                    return n == null && (n = e, e = null), arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
                }, s.attrFn && (s.attrFn[t] = !0), L.test(t) && (s.event.fixHooks[t] = s.event.keyHooks), A.test(t) && (s.event.fixHooks[t] = s.event.mouseHooks)
            }),
        function () {
            function S(e, t, n, i, s, o) {
                for (var u = 0, a = i.length; u < a; u++) {
                    var f = i[u];
                    if (f) {
                        var l = !1;
                        f = f[e];
                        while (f) {
                            if (f[r] === n) {
                                l = i[f.sizset];
                                break
                            }
                            f.nodeType === 1 && !o && (f[r] = n, f.sizset = u);
                            if (f.nodeName.toLowerCase() === t) {
                                l = f;
                                break
                            }
                            f = f[e]
                        }
                        i[u] = l
                    }
                }
            }

            function x(e, t, n, i, s, o) {
                for (var u = 0, a = i.length; u < a; u++) {
                    var f = i[u];
                    if (f) {
                        var l = !1;
                        f = f[e];
                        while (f) {
                            if (f[r] === n) {
                                l = i[f.sizset];
                                break
                            }
                            if (f.nodeType === 1) {
                                o || (f[r] = n, f.sizset = u);
                                if (typeof t != "string") {
                                    if (f === t) {
                                        l = !0;
                                        break
                                    }
                                } else if (h.filter(t, [f]).length > 0) {
                                    l = f;
                                    break
                                }
                            }
                            f = f[e]
                        }
                        i[u] = l
                    }
                }
            }
            var e = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
                r = "sizcache" + (Math.random() + "").replace(".", ""),
                i = 0,
                o = Object.prototype.toString,
                u = !1,
                a = !0,
                f = /\\/g,
                l = /\r\n/g,
                c = /\W/;
            [0, 0].sort(function () {
                return a = !1, 0
            });
            var h = function (t, r, i, s) {
                i = i || [], r = r || n;
                var u = r;
                if (r.nodeType !== 1 && r.nodeType !== 9) return [];
                if (!t || typeof t != "string") return i;
                var a, f, l, c, p, m, g, b, w = !0,
                    E = h.isXML(r),
                    S = [],
                    x = t;
                do {
                    e.exec(""), a = e.exec(x);
                    if (a) {
                        x = a[3], S.push(a[1]);
                        if (a[2]) {
                            c = a[3];
                            break
                        }
                    }
                } while (a);
                if (S.length > 1 && v.exec(t))
                    if (S.length === 2 && d.relative[S[0]]) f = T(S[0] + S[1], r, s);
                    else {
                        f = d.relative[S[0]] ? [r] : h(S.shift(), r);
                        while (S.length) t = S.shift(), d.relative[t] && (t += S.shift()), f = T(t, f, s)
                    } else {
                        !s && S.length > 1 && r.nodeType === 9 && !E && d.match.ID.test(S[0]) && !d.match.ID.test(S[S.length - 1]) && (p = h.find(S.shift(), r, E), r = p.expr ? h.filter(p.expr, p.set)[0] : p.set[0]);
                        if (r) {
                            p = s ? {
                                expr: S.pop(),
                                set: y(s)
                            } : h.find(S.pop(), S.length !== 1 || S[0] !== "~" && S[0] !== "+" || !r.parentNode ? r : r.parentNode, E), f = p.expr ? h.filter(p.expr, p.set) : p.set, S.length > 0 ? l = y(f) : w = !1;
                            while (S.length) m = S.pop(), g = m, d.relative[m] ? g = S.pop() : m = "", g == null && (g = r), d.relative[m](l, g, E)
                        } else l = S = []
                    }
                l || (l = f), l || h.error(m || t);
                if (o.call(l) === "[object Array]")
                    if (!w) i.push.apply(i, l);
                    else if (r && r.nodeType === 1)
                    for (b = 0; l[b] != null; b++) l[b] && (l[b] === !0 || l[b].nodeType === 1 && h.contains(r, l[b])) && i.push(f[b]);
                else
                    for (b = 0; l[b] != null; b++) l[b] && l[b].nodeType === 1 && i.push(f[b]);
                else y(l, i);
                return c && (h(c, u, i, s), h.uniqueSort(i)), i
            };
            h.uniqueSort = function (e) {
                if (w) {
                    u = a, e.sort(w);
                    if (u)
                        for (var t = 1; t < e.length; t++) e[t] === e[t - 1] && e.splice(t--, 1)
                }
                return e
            }, h.matches = function (e, t) {
                return h(e, null, null, t)
            }, h.matchesSelector = function (e, t) {
                return h(t, null, null, [e]).length > 0
            }, h.find = function (e, t, n) {
                var r, i, s, o, u, a;
                if (!e) return [];
                for (i = 0, s = d.order.length; i < s; i++) {
                    u = d.order[i];
                    if (o = d.leftMatch[u].exec(e)) {
                        a = o[1], o.splice(1, 1);
                        if (a.substr(a.length - 1) !== "\\") {
                            o[1] = (o[1] || "").replace(f, ""), r = d.find[u](o, t, n);
                            if (r != null) {
                                e = e.replace(d.match[u], "");
                                break
                            }
                        }
                    }
                }
                return r || (r = typeof t.getElementsByTagName != "undefined" ? t.getElementsByTagName("*") : []), {
                    set: r,
                    expr: e
                }
            }, h.filter = function (e, n, r, i) {
                var s, o, u, a, f, l, c, p, v, m = e,
                    g = [],
                    y = n,
                    b = n && n[0] && h.isXML(n[0]);
                while (e && n.length) {
                    for (u in d.filter)
                        if ((s = d.leftMatch[u].exec(e)) != null && s[2]) {
                            l = d.filter[u], c = s[1], o = !1, s.splice(1, 1);
                            if (c.substr(c.length - 1) === "\\") continue;
                            y === g && (g = []);
                            if (d.preFilter[u]) {
                                s = d.preFilter[u](s, y, r, g, i, b);
                                if (!s) o = a = !0;
                                else if (s === !0) continue
                            }
                            if (s)
                                for (p = 0;
                                    (f = y[p]) != null; p++) f && (a = l(f, s, p, y), v = i ^ a, r && a != null ? v ? o = !0 : y[p] = !1 : v && (g.push(f), o = !0));
                            if (a !== t) {
                                r || (y = g), e = e.replace(d.match[u], "");
                                if (!o) return [];
                                break
                            }
                        }
                    if (e === m) {
                        if (o != null) break;
                        h.error(e)
                    }
                    m = e
                }
                return y
            }, h.error = function (e) {
                throw new Error("Syntax error, unrecognized expression: " + e)
            };
            var p = h.getText = function (e) {
                var t, n, r = e.nodeType,
                    i = "";
                if (r) {
                    if (r === 1 || r === 9 || r === 11) {
                        if (typeof e.textContent == "string") return e.textContent;
                        if (typeof e.innerText == "string") return e.innerText.replace(l, "");
                        for (e = e.firstChild; e; e = e.nextSibling) i += p(e)
                    } else if (r === 3 || r === 4) return e.nodeValue
                } else
                    for (t = 0; n = e[t]; t++) n.nodeType !== 8 && (i += p(n));
                return i
            }, d = h.selectors = {
                    order: ["ID", "NAME", "TAG"],
                    match: {
                        ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                        CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                        NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
                        ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
                        TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
                        CHILD: /:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
                        POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
                        PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/
                    },
                    leftMatch: {},
                    attrMap: {
                        "class": "className",
                        "for": "htmlFor"
                    },
                    attrHandle: {
                        href: function (e) {
                            return e.getAttribute("href")
                        },
                        type: function (e) {
                            return e.getAttribute("type")
                        }
                    },
                    relative: {
                        "+": function (e, t) {
                            var n = typeof t == "string",
                                r = n && !c.test(t),
                                i = n && !r;
                            r && (t = t.toLowerCase());
                            for (var s = 0, o = e.length, u; s < o; s++)
                                if (u = e[s]) {
                                    while ((u = u.previousSibling) && u.nodeType !== 1);
                                    e[s] = i || u && u.nodeName.toLowerCase() === t ? u || !1 : u === t
                                }
                            i && h.filter(t, e, !0)
                        },
                        ">": function (e, t) {
                            var n, r = typeof t == "string",
                                i = 0,
                                s = e.length;
                            if (r && !c.test(t)) {
                                t = t.toLowerCase();
                                for (; i < s; i++) {
                                    n = e[i];
                                    if (n) {
                                        var o = n.parentNode;
                                        e[i] = o.nodeName.toLowerCase() === t ? o : !1
                                    }
                                }
                            } else {
                                for (; i < s; i++) n = e[i], n && (e[i] = r ? n.parentNode : n.parentNode === t);
                                r && h.filter(t, e, !0)
                            }
                        },
                        "": function (e, t, n) {
                            var r, s = i++,
                                o = x;
                            typeof t == "string" && !c.test(t) && (t = t.toLowerCase(), r = t, o = S), o("parentNode", t, s, e, r, n)
                        },
                        "~": function (e, t, n) {
                            var r, s = i++,
                                o = x;
                            typeof t == "string" && !c.test(t) && (t = t.toLowerCase(), r = t, o = S), o("previousSibling", t, s, e, r, n)
                        }
                    },
                    find: {
                        ID: function (e, t, n) {
                            if (typeof t.getElementById != "undefined" && !n) {
                                var r = t.getElementById(e[1]);
                                return r && r.parentNode ? [r] : []
                            }
                        },
                        NAME: function (e, t) {
                            if (typeof t.getElementsByName != "undefined") {
                                var n = [],
                                    r = t.getElementsByName(e[1]);
                                for (var i = 0, s = r.length; i < s; i++) r[i].getAttribute("name") === e[1] && n.push(r[i]);
                                return n.length === 0 ? null : n
                            }
                        },
                        TAG: function (e, t) {
                            if (typeof t.getElementsByTagName != "undefined") return t.getElementsByTagName(e[1])
                        }
                    },
                    preFilter: {
                        CLASS: function (e, t, n, r, i, s) {
                            e = " " + e[1].replace(f, "") + " ";
                            if (s) return e;
                            for (var o = 0, u;
                                (u = t[o]) != null; o++) u && (i ^ (u.className && (" " + u.className + " ").replace(/[\t\n\r]/g, " ").indexOf(e) >= 0) ? n || r.push(u) : n && (t[o] = !1));
                            return !1
                        },
                        ID: function (e) {
                            return e[1].replace(f, "")
                        },
                        TAG: function (e, t) {
                            return e[1].replace(f, "").toLowerCase()
                        },
                        CHILD: function (e) {
                            if (e[1] === "nth") {
                                e[2] || h.error(e[0]), e[2] = e[2].replace(/^\+|\s*/g, "");
                                var t = /(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2] === "even" && "2n" || e[2] === "odd" && "2n+1" || !/\D/.test(e[2]) && "0n+" + e[2] || e[2]);
                                e[2] = t[1] + (t[2] || 1) - 0, e[3] = t[3] - 0
                            } else e[2] && h.error(e[0]);
                            return e[0] = i++, e
                        },
                        ATTR: function (e, t, n, r, i, s) {
                            var o = e[1] = e[1].replace(f, "");
                            return !s && d.attrMap[o] && (e[1] = d.attrMap[o]), e[4] = (e[4] || e[5] || "").replace(f, ""), e[2] === "~=" && (e[4] = " " + e[4] + " "), e
                        },
                        PSEUDO: function (t, n, r, i, s) {
                            if (t[1] === "not") {
                                if (!((e.exec(t[3]) || "").length > 1 || /^\w/.test(t[3]))) {
                                    var o = h.filter(t[3], n, r, !0 ^ s);
                                    return r || i.push.apply(i, o), !1
                                }
                                t[3] = h(t[3], null, null, n)
                            } else if (d.match.POS.test(t[0]) || d.match.CHILD.test(t[0])) return !0;
                            return t
                        },
                        POS: function (e) {
                            return e.unshift(!0), e
                        }
                    },
                    filters: {
                        enabled: function (e) {
                            return e.disabled === !1 && e.type !== "hidden"
                        },
                        disabled: function (e) {
                            return e.disabled === !0
                        },
                        checked: function (e) {
                            return e.checked === !0
                        },
                        selected: function (e) {
                            return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                        },
                        parent: function (e) {
                            return !!e.firstChild
                        },
                        empty: function (e) {
                            return !e.firstChild
                        },
                        has: function (e, t, n) {
                            return !!h(n[3], e).length
                        },
                        header: function (e) {
                            return /h\d/i.test(e.nodeName)
                        },
                        text: function (e) {
                            var t = e.getAttribute("type"),
                                n = e.type;
                            return e.nodeName.toLowerCase() === "input" && "text" === n && (t === n || t === null)
                        },
                        radio: function (e) {
                            return e.nodeName.toLowerCase() === "input" && "radio" === e.type
                        },
                        checkbox: function (e) {
                            return e.nodeName.toLowerCase() === "input" && "checkbox" === e.type
                        },
                        file: function (e) {
                            return e.nodeName.toLowerCase() === "input" && "file" === e.type
                        },
                        password: function (e) {
                            return e.nodeName.toLowerCase() === "input" && "password" === e.type
                        },
                        submit: function (e) {
                            var t = e.nodeName.toLowerCase();
                            return (t === "input" || t === "button") && "submit" === e.type
                        },
                        image: function (e) {
                            return e.nodeName.toLowerCase() === "input" && "image" === e.type
                        },
                        reset: function (e) {
                            var t = e.nodeName.toLowerCase();
                            return (t === "input" || t === "button") && "reset" === e.type
                        },
                        button: function (e) {
                            var t = e.nodeName.toLowerCase();
                            return t === "input" && "button" === e.type || t === "button"
                        },
                        input: function (e) {
                            return /input|select|textarea|button/i.test(e.nodeName)
                        },
                        focus: function (e) {
                            return e === e.ownerDocument.activeElement
                        }
                    },
                    setFilters: {
                        first: function (e, t) {
                            return t === 0
                        },
                        last: function (e, t, n, r) {
                            return t === r.length - 1
                        },
                        even: function (e, t) {
                            return t % 2 === 0
                        },
                        odd: function (e, t) {
                            return t % 2 === 1
                        },
                        lt: function (e, t, n) {
                            return t < n[3] - 0
                        },
                        gt: function (e, t, n) {
                            return t > n[3] - 0
                        },
                        nth: function (e, t, n) {
                            return n[3] - 0 === t
                        },
                        eq: function (e, t, n) {
                            return n[3] - 0 === t
                        }
                    },
                    filter: {
                        PSEUDO: function (e, t, n, r) {
                            var i = t[1],
                                s = d.filters[i];
                            if (s) return s(e, n, t, r);
                            if (i === "contains") return (e.textContent || e.innerText || p([e]) || "").indexOf(t[3]) >= 0;
                            if (i === "not") {
                                var o = t[3];
                                for (var u = 0, a = o.length; u < a; u++)
                                    if (o[u] === e) return !1;
                                return !0
                            }
                            h.error(i)
                        },
                        CHILD: function (e, t) {
                            var n, i, s, o, u, a, f, l = t[1],
                                c = e;
                            switch (l) {
                            case "only":
                            case "first":
                                while (c = c.previousSibling)
                                    if (c.nodeType === 1) return !1;
                                if (l === "first") return !0;
                                c = e;
                            case "last":
                                while (c = c.nextSibling)
                                    if (c.nodeType === 1) return !1;
                                return !0;
                            case "nth":
                                n = t[2], i = t[3];
                                if (n === 1 && i === 0) return !0;
                                s = t[0], o = e.parentNode;
                                if (o && (o[r] !== s || !e.nodeIndex)) {
                                    a = 0;
                                    for (c = o.firstChild; c; c = c.nextSibling) c.nodeType === 1 && (c.nodeIndex = ++a);
                                    o[r] = s
                                }
                                return f = e.nodeIndex - i, n === 0 ? f === 0 : f % n === 0 && f / n >= 0
                            }
                        },
                        ID: function (e, t) {
                            return e.nodeType === 1 && e.getAttribute("id") === t
                        },
                        TAG: function (e, t) {
                            return t === "*" && e.nodeType === 1 || !! e.nodeName && e.nodeName.toLowerCase() === t
                        },
                        CLASS: function (e, t) {
                            return (" " + (e.className || e.getAttribute("class")) + " ").indexOf(t) > -1
                        },
                        ATTR: function (e, t) {
                            var n = t[1],
                                r = h.attr ? h.attr(e, n) : d.attrHandle[n] ? d.attrHandle[n](e) : e[n] != null ? e[n] : e.getAttribute(n),
                                i = r + "",
                                s = t[2],
                                o = t[4];
                            return r == null ? s === "!=" : !s && h.attr ? r != null : s === "=" ? i === o : s === "*=" ? i.indexOf(o) >= 0 : s === "~=" ? (" " + i + " ").indexOf(o) >= 0 : o ? s === "!=" ? i !== o : s === "^=" ? i.indexOf(o) === 0 : s === "$=" ? i.substr(i.length - o.length) === o : s === "|=" ? i === o || i.substr(0, o.length + 1) === o + "-" : !1 : i && r !== !1
                        },
                        POS: function (e, t, n, r) {
                            var i = t[2],
                                s = d.setFilters[i];
                            if (s) return s(e, n, t, r)
                        }
                    }
                }, v = d.match.POS,
                m = function (e, t) {
                    return "\\" + (t - 0 + 1)
                };
            for (var g in d.match) d.match[g] = new RegExp(d.match[g].source + /(?![^\[]*\])(?![^\(]*\))/.source), d.leftMatch[g] = new RegExp(/(^(?:.|\r|\n)*?)/.source + d.match[g].source.replace(/\\(\d+)/g, m));
            d.match.globalPOS = v;
            var y = function (e, t) {
                return e = Array.prototype.slice.call(e, 0), t ? (t.push.apply(t, e), t) : e
            };
            try {
                Array.prototype.slice.call(n.documentElement.childNodes, 0)[0].nodeType
            } catch (b) {
                y = function (e, t) {
                    var n = 0,
                        r = t || [];
                    if (o.call(e) === "[object Array]") Array.prototype.push.apply(r, e);
                    else if (typeof e.length == "number")
                        for (var i = e.length; n < i; n++) r.push(e[n]);
                    else
                        for (; e[n]; n++) r.push(e[n]);
                    return r
                }
            }
            var w, E;
            n.documentElement.compareDocumentPosition ? w = function (e, t) {
                return e === t ? (u = !0, 0) : !e.compareDocumentPosition || !t.compareDocumentPosition ? e.compareDocumentPosition ? -1 : 1 : e.compareDocumentPosition(t) & 4 ? -1 : 1
            } : (w = function (e, t) {
                if (e === t) return u = !0, 0;
                if (e.sourceIndex && t.sourceIndex) return e.sourceIndex - t.sourceIndex;
                var n, r, i = [],
                    s = [],
                    o = e.parentNode,
                    a = t.parentNode,
                    f = o;
                if (o === a) return E(e, t);
                if (!o) return -1;
                if (!a) return 1;
                while (f) i.unshift(f), f = f.parentNode;
                f = a;
                while (f) s.unshift(f), f = f.parentNode;
                n = i.length, r = s.length;
                for (var l = 0; l < n && l < r; l++)
                    if (i[l] !== s[l]) return E(i[l], s[l]);
                return l === n ? E(e, s[l], -1) : E(i[l], t, 1)
            }, E = function (e, t, n) {
                if (e === t) return n;
                var r = e.nextSibling;
                while (r) {
                    if (r === t) return -1;
                    r = r.nextSibling
                }
                return 1
            }),
            function () {
                var e = n.createElement("div"),
                    r = "script" + (new Date).getTime(),
                    i = n.documentElement;
                e.innerHTML = "<a name='" + r + "'/>", i.insertBefore(e, i.firstChild), n.getElementById(r) && (d.find.ID = function (e, n, r) {
                    if (typeof n.getElementById != "undefined" && !r) {
                        var i = n.getElementById(e[1]);
                        return i ? i.id === e[1] || typeof i.getAttributeNode != "undefined" && i.getAttributeNode("id").nodeValue === e[1] ? [i] : t : []
                    }
                }, d.filter.ID = function (e, t) {
                    var n = typeof e.getAttributeNode != "undefined" && e.getAttributeNode("id");
                    return e.nodeType === 1 && n && n.nodeValue === t
                }), i.removeChild(e), i = e = null
            }(),
            function () {
                var e = n.createElement("div");
                e.appendChild(n.createComment("")), e.getElementsByTagName("*").length > 0 && (d.find.TAG = function (e, t) {
                    var n = t.getElementsByTagName(e[1]);
                    if (e[1] === "*") {
                        var r = [];
                        for (var i = 0; n[i]; i++) n[i].nodeType === 1 && r.push(n[i]);
                        n = r
                    }
                    return n
                }), e.innerHTML = "<a href='#'></a>", e.firstChild && typeof e.firstChild.getAttribute != "undefined" && e.firstChild.getAttribute("href") !== "#" && (d.attrHandle.href = function (e) {
                    return e.getAttribute("href", 2)
                }), e = null
            }(), n.querySelectorAll && function () {
                var e = h,
                    t = n.createElement("div"),
                    r = "__sizzle__";
                t.innerHTML = "<p class='TEST'></p>";
                if (t.querySelectorAll && t.querySelectorAll(".TEST").length === 0) return;
                h = function (t, i, s, o) {
                    i = i || n;
                    if (!o && !h.isXML(i)) {
                        var u = /^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);
                        if (u && (i.nodeType === 1 || i.nodeType === 9)) {
                            if (u[1]) return y(i.getElementsByTagName(t), s);
                            if (u[2] && d.find.CLASS && i.getElementsByClassName) return y(i.getElementsByClassName(u[2]), s)
                        }
                        if (i.nodeType === 9) {
                            if (t === "body" && i.body) return y([i.body], s);
                            if (u && u[3]) {
                                var a = i.getElementById(u[3]);
                                if (!a || !a.parentNode) return y([], s);
                                if (a.id === u[3]) return y([a], s)
                            }
                            try {
                                return y(i.querySelectorAll(t), s)
                            } catch (f) {}
                        } else if (i.nodeType === 1 && i.nodeName.toLowerCase() !== "object") {
                            var l = i,
                                c = i.getAttribute("id"),
                                p = c || r,
                                v = i.parentNode,
                                m = /^\s*[+~]/.test(t);
                            c ? p = p.replace(/'/g, "\\$&") : i.setAttribute("id", p), m && v && (i = i.parentNode);
                            try {
                                if (!m || v) return y(i.querySelectorAll("[id='" + p + "'] " + t), s)
                            } catch (g) {} finally {
                                c || l.removeAttribute("id")
                            }
                        }
                    }
                    return e(t, i, s, o)
                };
                for (var i in e) h[i] = e[i];
                t = null
            }(),
            function () {
                var e = n.documentElement,
                    t = e.matchesSelector || e.mozMatchesSelector || e.webkitMatchesSelector || e.msMatchesSelector;
                if (t) {
                    var r = !t.call(n.createElement("div"), "div"),
                        i = !1;
                    try {
                        t.call(n.documentElement, "[test!='']:sizzle")
                    } catch (s) {
                        i = !0
                    }
                    h.matchesSelector = function (e, n) {
                        n = n.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']");
                        if (!h.isXML(e)) try {
                            if (i || !d.match.PSEUDO.test(n) && !/!=/.test(n)) {
                                var s = t.call(e, n);
                                if (s || !r || e.document && e.document.nodeType !== 11) return s
                            }
                        } catch (o) {}
                        return h(n, null, null, [e]).length > 0
                    }
                }
            }(),
            function () {
                var e = n.createElement("div");
                e.innerHTML = "<div class='test e'></div><div class='test'></div>";
                if (!e.getElementsByClassName || e.getElementsByClassName("e").length === 0) return;
                e.lastChild.className = "e";
                if (e.getElementsByClassName("e").length === 1) return;
                d.order.splice(1, 0, "CLASS"), d.find.CLASS = function (e, t, n) {
                    if (typeof t.getElementsByClassName != "undefined" && !n) return t.getElementsByClassName(e[1])
                }, e = null
            }(), n.documentElement.contains ? h.contains = function (e, t) {
                return e !== t && (e.contains ? e.contains(t) : !0)
            } : n.documentElement.compareDocumentPosition ? h.contains = function (e, t) {
                return !!(e.compareDocumentPosition(t) & 16)
            } : h.contains = function () {
                return !1
            }, h.isXML = function (e) {
                var t = (e ? e.ownerDocument || e : 0).documentElement;
                return t ? t.nodeName !== "HTML" : !1
            };
            var T = function (e, t, n) {
                var r, i = [],
                    s = "",
                    o = t.nodeType ? [t] : t;
                while (r = d.match.PSEUDO.exec(e)) s += r[0], e = e.replace(d.match.PSEUDO, "");
                e = d.relative[e] ? e + "*" : e;
                for (var u = 0, a = o.length; u < a; u++) h(e, o[u], i, n);
                return h.filter(s, i)
            };
            h.attr = s.attr, h.selectors.attrMap = {}, s.find = h, s.expr = h.selectors, s.expr[":"] = s.expr.filters, s.unique = h.uniqueSort, s.text = h.getText, s.isXMLDoc = h.isXML, s.contains = h.contains
        }();
        var j = /Until$/,
            F = /^(?:parents|prevUntil|prevAll)/,
            I = /,/,
            q = /^.[^:#\[\.,]*$/,
            R = Array.prototype.slice,
            U = s.expr.match.globalPOS,
            z = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };
        s.fn.extend({
                find: function (e) {
                    var t = this,
                        n, r;
                    if (typeof e != "string") return s(e).filter(function () {
                        for (n = 0, r = t.length; n < r; n++)
                            if (s.contains(t[n], this)) return !0
                    });
                    var i = this.pushStack("", "find", e),
                        o, u, a;
                    for (n = 0, r = this.length; n < r; n++) {
                        o = i.length, s.find(e, this[n], i);
                        if (n > 0)
                            for (u = o; u < i.length; u++)
                                for (a = 0; a < o; a++)
                                    if (i[a] === i[u]) {
                                        i.splice(u--, 1);
                                        break
                                    }
                    }
                    return i
                },
                has: function (e) {
                    var t = s(e);
                    return this.filter(function () {
                        for (var e = 0, n = t.length; e < n; e++)
                            if (s.contains(this, t[e])) return !0
                    })
                },
                not: function (e) {
                    return this.pushStack(X(this, e, !1), "not", e)
                },
                filter: function (e) {
                    return this.pushStack(X(this, e, !0), "filter", e)
                },
                is: function (e) {
                    return !!e && (typeof e == "string" ? U.test(e) ? s(e, this.context).index(this[0]) >= 0 : s.filter(e, this).length > 0 : this.filter(e).length > 0)
                },
                closest: function (e, t) {
                    var n = [],
                        r, i, o = this[0];
                    if (s.isArray(e)) {
                        var u = 1;
                        while (o && o.ownerDocument && o !== t) {
                            for (r = 0; r < e.length; r++) s(o).is(e[r]) && n.push({
                                    selector: e[r],
                                    elem: o,
                                    level: u
                                });
                            o = o.parentNode, u++
                        }
                        return n
                    }
                    var a = U.test(e) || typeof e != "string" ? s(e, t || this.context) : 0;
                    for (r = 0, i = this.length; r < i; r++) {
                        o = this[r];
                        while (o) {
                            if (a ? a.index(o) > -1 : s.find.matchesSelector(o, e)) {
                                n.push(o);
                                break
                            }
                            o = o.parentNode;
                            if (!o || !o.ownerDocument || o === t || o.nodeType === 11) break
                        }
                    }
                    return n = n.length > 1 ? s.unique(n) : n, this.pushStack(n, "closest", e)
                },
                index: function (e) {
                    return e ? typeof e == "string" ? s.inArray(this[0], s(e)) : s.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.prevAll().length : -1
                },
                add: function (e, t) {
                    var n = typeof e == "string" ? s(e, t) : s.makeArray(e && e.nodeType ? [e] : e),
                        r = s.merge(this.get(), n);
                    return this.pushStack(W(n[0]) || W(r[0]) ? r : s.unique(r))
                },
                andSelf: function () {
                    return this.add(this.prevObject)
                }
            }), s.each({
                parent: function (e) {
                    var t = e.parentNode;
                    return t && t.nodeType !== 11 ? t : null
                },
                parents: function (e) {
                    return s.dir(e, "parentNode")
                },
                parentsUntil: function (e, t, n) {
                    return s.dir(e, "parentNode", n)
                },
                next: function (e) {
                    return s.nth(e, 2, "nextSibling")
                },
                prev: function (e) {
                    return s.nth(e, 2, "previousSibling")
                },
                nextAll: function (e) {
                    return s.dir(e, "nextSibling")
                },
                prevAll: function (e) {
                    return s.dir(e, "previousSibling")
                },
                nextUntil: function (e, t, n) {
                    return s.dir(e, "nextSibling", n)
                },
                prevUntil: function (e, t, n) {
                    return s.dir(e, "previousSibling", n)
                },
                siblings: function (e) {
                    return s.sibling((e.parentNode || {}).firstChild, e)
                },
                children: function (e) {
                    return s.sibling(e.firstChild)
                },
                contents: function (e) {
                    return s.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : s.makeArray(e.childNodes)
                }
            }, function (e, t) {
                s.fn[e] = function (n, r) {
                    var i = s.map(this, t, n);
                    return j.test(e) || (r = n), r && typeof r == "string" && (i = s.filter(r, i)), i = this.length > 1 && !z[e] ? s.unique(i) : i, (this.length > 1 || I.test(r)) && F.test(e) && (i = i.reverse()), this.pushStack(i, e, R.call(arguments).join(","))
                }
            }), s.extend({
                filter: function (e, t, n) {
                    return n && (e = ":not(" + e + ")"), t.length === 1 ? s.find.matchesSelector(t[0], e) ? [t[0]] : [] : s.find.matches(e, t)
                },
                dir: function (e, n, r) {
                    var i = [],
                        o = e[n];
                    while (o && o.nodeType !== 9 && (r === t || o.nodeType !== 1 || !s(o).is(r))) o.nodeType === 1 && i.push(o), o = o[n];
                    return i
                },
                nth: function (e, t, n, r) {
                    t = t || 1;
                    var i = 0;
                    for (; e; e = e[n])
                        if (e.nodeType === 1 && ++i === t) break;
                    return e
                },
                sibling: function (e, t) {
                    var n = [];
                    for (; e; e = e.nextSibling) e.nodeType === 1 && e !== t && n.push(e);
                    return n
                }
            });
        var $ = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
            J = / jQuery\d+="(?:\d+|null)"/g,
            K = /^\s+/,
            Q = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,
            G = /<([\w:]+)/,
            Y = /<tbody/i,
            Z = /<|&#?\w+;/,
            et = /<(?:script|style)/i,
            tt = /<(?:script|object|embed|option|style)/i,
            nt = new RegExp("<(?:" + $ + ")[\\s/>]", "i"),
            rt = /checked\s*(?:[^=]|=\s*.checked.)/i,
            it = /\/(java|ecma)script/i,
            st = /^\s*<!(?:\[CDATA\[|\-\-)/,
            ot = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                legend: [1, "<fieldset>", "</fieldset>"],
                thead: [1, "<table>", "</table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
                area: [1, "<map>", "</map>"],
                _default: [0, "", ""]
            }, ut = V(n);
        ot.optgroup = ot.option, ot.tbody = ot.tfoot = ot.colgroup = ot.caption = ot.thead, ot.th = ot.td, s.support.htmlSerialize || (ot._default = [1, "div<div>", "</div>"]), s.fn.extend({
                text: function (e) {
                    return s.access(this, function (e) {
                        return e === t ? s.text(this) : this.empty().append((this[0] && this[0].ownerDocument || n).createTextNode(e))
                    }, null, e, arguments.length)
                },
                wrapAll: function (e) {
                    if (s.isFunction(e)) return this.each(function (t) {
                        s(this).wrapAll(e.call(this, t))
                    });
                    if (this[0]) {
                        var t = s(e, this[0].ownerDocument).eq(0).clone(!0);
                        this[0].parentNode && t.insertBefore(this[0]), t.map(function () {
                            var e = this;
                            while (e.firstChild && e.firstChild.nodeType === 1) e = e.firstChild;
                            return e
                        }).append(this)
                    }
                    return this
                },
                wrapInner: function (e) {
                    return s.isFunction(e) ? this.each(function (t) {
                        s(this).wrapInner(e.call(this, t))
                    }) : this.each(function () {
                        var t = s(this),
                            n = t.contents();
                        n.length ? n.wrapAll(e) : t.append(e)
                    })
                },
                wrap: function (e) {
                    var t = s.isFunction(e);
                    return this.each(function (n) {
                        s(this).wrapAll(t ? e.call(this, n) : e)
                    })
                },
                unwrap: function () {
                    return this.parent().each(function () {
                        s.nodeName(this, "body") || s(this).replaceWith(this.childNodes)
                    }).end()
                },
                append: function () {
                    return this.domManip(arguments, !0, function (e) {
                        this.nodeType === 1 && this.appendChild(e)
                    })
                },
                prepend: function () {
                    return this.domManip(arguments, !0, function (e) {
                        this.nodeType === 1 && this.insertBefore(e, this.firstChild)
                    })
                },
                before: function () {
                    if (this[0] && this[0].parentNode) return this.domManip(arguments, !1, function (e) {
                        this.parentNode.insertBefore(e, this)
                    });
                    if (arguments.length) {
                        var e = s.clean(arguments);
                        return e.push.apply(e, this.toArray()), this.pushStack(e, "before", arguments)
                    }
                },
                after: function () {
                    if (this[0] && this[0].parentNode) return this.domManip(arguments, !1, function (e) {
                        this.parentNode.insertBefore(e, this.nextSibling)
                    });
                    if (arguments.length) {
                        var e = this.pushStack(this, "after", arguments);
                        return e.push.apply(e, s.clean(arguments)), e
                    }
                },
                remove: function (e, t) {
                    for (var n = 0, r;
                        (r = this[n]) != null; n++)
                        if (!e || s.filter(
                                e, [r]).length)!t && r.nodeType === 1 && (s.cleanData(r.getElementsByTagName("*")), s.cleanData([r])), r.parentNode && r.parentNode.removeChild(r);
                    return this
                },
                empty: function () {
                    for (var e = 0, t;
                        (t = this[e]) != null; e++) {
                        t.nodeType === 1 && s.cleanData(t.getElementsByTagName("*"));
                        while (t.firstChild) t.removeChild(t.firstChild)
                    }
                    return this
                },
                clone: function (e, t) {
                    return e = e == null ? !1 : e, t = t == null ? e : t, this.map(function () {
                        return s.clone(this, e, t)
                    })
                },
                html: function (e) {
                    return s.access(this, function (e) {
                        var n = this[0] || {}, r = 0,
                            i = this.length;
                        if (e === t) return n.nodeType === 1 ? n.innerHTML.replace(J, "") : null;
                        if (typeof e == "string" && !et.test(e) && (s.support.leadingWhitespace || !K.test(e)) && !ot[(G.exec(e) || ["", ""])[1].toLowerCase()]) {
                            e = e.replace(Q, "<$1></$2>");
                            try {
                                for (; r < i; r++) n = this[r] || {}, n.nodeType === 1 && (s.cleanData(n.getElementsByTagName("*")), n.innerHTML = e);
                                n = 0
                            } catch (o) {}
                        }
                        n && this.empty().append(e)
                    }, null, e, arguments.length)
                },
                replaceWith: function (e) {
                    return this[0] && this[0].parentNode ? s.isFunction(e) ? this.each(function (t) {
                        var n = s(this),
                            r = n.html();
                        n.replaceWith(e.call(this, t, r))
                    }) : (typeof e != "string" && (e = s(e).detach()), this.each(function () {
                                var t = this.nextSibling,
                                    n = this.parentNode;
                                s(this).remove(), t ? s(t).before(e) : s(n).append(e)
                            })) : this.length ? this.pushStack(s(s.isFunction(e) ? e() : e), "replaceWith", e) : this
                },
                detach: function (e) {
                    return this.remove(e, !0)
                },
                domManip: function (e, n, r) {
                    var i, o, u, a, f = e[0],
                        l = [];
                    if (!s.support.checkClone && arguments.length === 3 && typeof f == "string" && rt.test(f)) return this.each(function () {
                        s(this).domManip(e, n, r, !0)
                    });
                    if (s.isFunction(f)) return this.each(function (i) {
                        var o = s(this);
                        e[0] = f.call(this, i, n ? o.html() : t), o.domManip(e, n, r)
                    });
                    if (this[0]) {
                        a = f && f.parentNode, s.support.parentNode && a && a.nodeType === 11 && a.childNodes.length === this.length ? i = {
                            fragment: a
                        } : i = s.buildFragment(e, this, l), u = i.fragment, u.childNodes.length === 1 ? o = u = u.firstChild : o = u.firstChild;
                        if (o) {
                            n = n && s.nodeName(o, "tr");
                            for (var c = 0, h = this.length, p = h - 1; c < h; c++) r.call(n ? at(this[c], o) : this[c], i.cacheable || h > 1 && c < p ? s.clone(u, !0, !0) : u)
                        }
                        l.length && s.each(l, function (e, t) {
                            t.src ? s.ajax({
                                    type: "GET",
                                    global: !1,
                                    url: t.src,
                                    async: !1,
                                    dataType: "script"
                                }) : s.globalEval((t.text || t.textContent || t.innerHTML || "").replace(st, "/*$0*/")), t.parentNode && t.parentNode.removeChild(t)
                        })
                    }
                    return this
                }
            }), s.buildFragment = function (e, t, r) {
            var i, o, u, a, f = e[0];
            return t && t[0] && (a = t[0].ownerDocument || t[0]), a.createDocumentFragment || (a = n), e.length === 1 && typeof f == "string" && f.length < 512 && a === n && f.charAt(0) === "<" && !tt.test(f) && (s.support.checkClone || !rt.test(f)) && (s.support.html5Clone || !nt.test(f)) && (o = !0, u = s.fragments[f], u && u !== 1 && (i = u)), i || (i = a.createDocumentFragment(), s.clean(e, a, i, r)), o && (s.fragments[f] = u ? i : 1), {
                fragment: i,
                cacheable: o
            }
        }, s.fragments = {}, s.each({
                appendTo: "append",
                prependTo: "prepend",
                insertBefore: "before",
                insertAfter: "after",
                replaceAll: "replaceWith"
            }, function (e, t) {
                s.fn[e] = function (n) {
                    var r = [],
                        i = s(n),
                        o = this.length === 1 && this[0].parentNode;
                    if (o && o.nodeType === 11 && o.childNodes.length === 1 && i.length === 1) return i[t](this[0]), this;
                    for (var u = 0, a = i.length; u < a; u++) {
                        var f = (u > 0 ? this.clone(!0) : this).get();
                        s(i[u])[t](f), r = r.concat(f)
                    }
                    return this.pushStack(r, e, i.selector)
                }
            }), s.extend({
                clone: function (e, t, n) {
                    var r, i, o, u = s.support.html5Clone || s.isXMLDoc(e) || !nt.test("<" + e.nodeName + ">") ? e.cloneNode(!0) : dt(e);
                    if ((!s.support.noCloneEvent || !s.support.noCloneChecked) && (e.nodeType === 1 || e.nodeType === 11) && !s.isXMLDoc(e)) {
                        lt(e, u), r = ct(e), i = ct(u);
                        for (o = 0; r[o]; ++o) i[o] && lt(r[o], i[o])
                    }
                    if (t) {
                        ft(e, u);
                        if (n) {
                            r = ct(e), i = ct(u);
                            for (o = 0; r[o]; ++o) ft(r[o], i[o])
                        }
                    }
                    return r = i = null, u
                },
                clean: function (e, t, r, i) {
                    var o, u, a, f = [];
                    t = t || n, typeof t.createElement == "undefined" && (t = t.ownerDocument || t[0] && t[0].ownerDocument || n);
                    for (var l = 0, c;
                        (c = e[l]) != null; l++) {
                        typeof c == "number" && (c += "");
                        if (!c) continue;
                        if (typeof c == "string")
                            if (!Z.test(c)) c = t.createTextNode(c);
                            else {
                                c = c.replace(Q, "<$1></$2>");
                                var h = (G.exec(c) || ["", ""])[1].toLowerCase(),
                                    p = ot[h] || ot._default,
                                    d = p[0],
                                    v = t.createElement("div"),
                                    m = ut.childNodes,
                                    g;
                                t === n ? ut.appendChild(v) : V(t).appendChild(v), v.innerHTML = p[1] + c + p[2];
                                while (d--) v = v.lastChild;
                                if (!s.support.tbody) {
                                    var y = Y.test(c),
                                        b = h === "table" && !y ? v.firstChild && v.firstChild.childNodes : p[1] === "<table>" && !y ? v.childNodes : [];
                                    for (a = b.length - 1; a >= 0; --a) s.nodeName(b[a], "tbody") && !b[a].childNodes.length && b[a].parentNode.removeChild(b[a])
                                }!s.support.leadingWhitespace && K.test(c) && v.insertBefore(t.createTextNode(K.exec(c)[0]), v.firstChild), c = v.childNodes, v && (v.parentNode.removeChild(v), m.length > 0 && (g = m[m.length - 1], g && g.parentNode && g.parentNode.removeChild(g)))
                            }
                        var w;
                        if (!s.support.appendChecked)
                            if (c[0] && typeof (w = c.length) == "number")
                                for (a = 0; a < w; a++) pt(c[a]);
                            else pt(c);
                        c.nodeType ? f.push(c) : f = s.merge(f, c)
                    }
                    if (r) {
                        o = function (e) {
                            return !e.type || it.test(e.type)
                        };
                        for (l = 0; f[l]; l++) {
                            u = f[l];
                            if (i && s.nodeName(u, "script") && (!u.type || it.test(u.type))) i.push(u.parentNode ? u.parentNode.removeChild(u) : u);
                            else {
                                if (u.nodeType === 1) {
                                    var E = s.grep(u.getElementsByTagName("script"), o);
                                    f.splice.apply(f, [l + 1, 0].concat(E))
                                }
                                r.appendChild(u)
                            }
                        }
                    }
                    return f
                },
                cleanData: function (e) {
                    var t, n, r = s.cache,
                        i = s.event.special,
                        o = s.support.deleteExpando;
                    for (var u = 0, a;
                        (a = e[u]) != null; u++) {
                        if (a.nodeName && s.noData[a.nodeName.toLowerCase()]) continue;
                        n = a[s.expando];
                        if (n) {
                            t = r[n];
                            if (t && t.events) {
                                for (var f in t.events) i[f] ? s.event.remove(a, f) : s.removeEvent(a, f, t.handle);
                                t.handle && (t.handle.elem = null)
                            }
                            o ? delete a[s.expando] : a.removeAttribute && a.removeAttribute(s.expando), delete r[n]
                        }
                    }
                }
            });
        var vt = /alpha\([^)]*\)/i,
            mt = /opacity=([^)]*)/,
            gt = /([A-Z]|^ms)/g,
            yt = /^[\-+]?(?:\d*\.)?\d+$/i,
            bt = /^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,
            wt = /^([\-+])=([\-+.\de]+)/,
            Et = /^margin/,
            St = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            }, xt = ["Top", "Right", "Bottom", "Left"],
            Tt, Nt, Ct;
        s.fn.css = function (e, n) {
            return s.access(this, function (e, n, r) {
                return r !== t ? s.style(e, n, r) : s.css(e, n)
            }, e, n, arguments.length > 1)
        }, s.extend({
                cssHooks: {
                    opacity: {
                        get: function (e, t) {
                            if (t) {
                                var n = Tt(e, "opacity");
                                return n === "" ? "1" : n
                            }
                            return e.style.opacity
                        }
                    }
                },
                cssNumber: {
                    fillOpacity: !0,
                    fontWeight: !0,
                    lineHeight: !0,
                    opacity: !0,
                    orphans: !0,
                    widows: !0,
                    zIndex: !0,
                    zoom: !0
                },
                cssProps: {
                    "float": s.support.cssFloat ? "cssFloat" : "styleFloat"
                },
                style: function (e, n, r, i) {
                    if (!e || e.nodeType === 3 || e.nodeType === 8 || !e.style) return;
                    var o, u, a = s.camelCase(n),
                        f = e.style,
                        l = s.cssHooks[a];
                    n = s.cssProps[a] || a;
                    if (r === t) return l && "get" in l && (o = l.get(e, !1, i)) !== t ? o : f[n];
                    u = typeof r, u === "string" && (o = wt.exec(r)) && (r = +(o[1] + 1) * +o[2] + parseFloat(s.css(e, n)), u = "number");
                    if (r == null || u === "number" && isNaN(r)) return;
                    u === "number" && !s.cssNumber[a] && (r += "px");
                    if (!l || !("set" in l) || (r = l.set(e, r)) !== t) try {
                        f[n] = r
                    } catch (c) {}
                },
                css: function (e, n, r) {
                    var i, o;
                    n = s.camelCase(n), o = s.cssHooks[n], n = s.cssProps[n] || n, n === "cssFloat" && (n = "float");
                    if (o && "get" in o && (i = o.get(e, !0, r)) !== t) return i;
                    if (Tt) return Tt(e, n)
                },
                swap: function (e, t, n) {
                    var r = {}, i, s;
                    for (s in t) r[s] = e.style[s], e.style[s] = t[s];
                    i = n.call(e);
                    for (s in t) e.style[s] = r[s];
                    return i
                }
            }), s.curCSS = s.css, n.defaultView && n.defaultView.getComputedStyle && (Nt = function (e, t) {
                var n, r, i, o, u = e.style;
                return t = t.replace(gt, "-$1").toLowerCase(), (r = e.ownerDocument.defaultView) && (i = r.getComputedStyle(e, null)) && (n = i.getPropertyValue(t), n === "" && !s.contains(e.ownerDocument.documentElement, e) && (n = s.style(e, t))), !s.support.pixelMargin && i && Et.test(t) && bt.test(n) && (o = u.width, u.width = n, n = i.width, u.width = o), n
            }), n.documentElement.currentStyle && (Ct = function (e, t) {
                var n, r, i, s = e.currentStyle && e.currentStyle[t],
                    o = e.style;
                return s == null && o && (i = o[t]) && (s = i), bt.test(s) && (n = o.left, r = e.runtimeStyle && e.runtimeStyle.left, r && (e.runtimeStyle.left = e.currentStyle.left), o.left = t === "fontSize" ? "1em" : s, s = o.pixelLeft + "px", o.left = n, r && (e.runtimeStyle.left = r)), s === "" ? "auto" : s
            }), Tt = Nt || Ct, s.each(["height", "width"], function (e, t) {
                s.cssHooks[t] = {
                    get: function (e, n, r) {
                        if (n) return e.offsetWidth !== 0 ? kt(e, t, r) : s.swap(e, St, function () {
                            return kt(e, t, r)
                        })
                    },
                    set: function (e, t) {
                        return yt.test(t) ? t + "px" : t
                    }
                }
            }), s.support.opacity || (s.cssHooks.opacity = {
                get: function (e, t) {
                    return mt.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? parseFloat(RegExp.$1) / 100 + "" : t ? "1" : ""
                },
                set: function (e, t) {
                    var n = e.style,
                        r = e.currentStyle,
                        i = s.isNumeric(t) ? "alpha(opacity=" + t * 100 + ")" : "",
                        o = r && r.filter || n.filter || "";
                    n.zoom = 1;
                    if (t >= 1 && s.trim(o.replace(vt, "")) === "") {
                        n.removeAttribute("filter");
                        if (r && !r.filter) return
                    }
                    n.filter = vt.test(o) ? o.replace(vt, i) : o + " " + i
                }
            }), s(function () {
                s.support.reliableMarginRight || (s.cssHooks.marginRight = {
                        get: function (e, t) {
                            return s.swap(e, {
                                    display: "inline-block"
                                }, function () {
                                    return t ? Tt(e, "margin-right") : e.style.marginRight
                                })
                        }
                    })
            }), s.expr && s.expr.filters && (s.expr.filters.hidden = function (e) {
                var t = e.offsetWidth,
                    n = e.offsetHeight;
                return t === 0 && n === 0 || !s.support.reliableHiddenOffsets && (e.style && e.style.display || s.css(e, "display")) === "none"
            }, s.expr.filters.visible = function (e) {
                return !s.expr.filters.hidden(e)
            }), s.each({
                margin: "",
                padding: "",
                border: "Width"
            }, function (e, t) {
                s.cssHooks[e + t] = {
                    expand: function (n) {
                        var r, i = typeof n == "string" ? n.split(" ") : [n],
                            s = {};
                        for (r = 0; r < 4; r++) s[e + xt[r] + t] = i[r] || i[r - 2] || i[0];
                        return s
                    }
                }
            });
        var Lt = /%20/g,
            At = /\[\]$/,
            Ot = /\r?\n/g,
            Mt = /#.*$/,
            _t = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg,
            Dt = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
            Pt = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,
            Ht = /^(?:GET|HEAD)$/,
            Bt = /^\/\//,
            jt = /\?/,
            Ft = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
            It = /^(?:select|textarea)/i,
            qt = /\s+/,
            Rt = /([?&])_=[^&]*/,
            Ut = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,
            zt = s.fn.load,
            Wt = {}, Xt = {}, Vt, $t, Jt = ["*/"] + ["*"];
        try {
            Vt = i.href
        } catch (Kt) {
            Vt = n.createElement("a"), Vt.href = "", Vt = Vt.href
        }
        $t = Ut.exec(Vt.toLowerCase()) || [], s.fn.extend({
                load: function (e, n, r) {
                    if (typeof e != "string" && zt) return zt.apply(this, arguments);
                    if (!this.length) return this;
                    var i = e.indexOf(" ");
                    if (i >= 0) {
                        var o = e.slice(i, e.length);
                        e = e.slice(0, i)
                    }
                    var u = "GET";
                    n && (s.isFunction(n) ? (r = n, n = t) : typeof n == "object" && (n = s.param(n, s.ajaxSettings.traditional), u = "POST"));
                    var a = this;
                    return s.ajax({
                            url: e,
                            type: u,
                            dataType: "html",
                            data: n,
                            complete: function (e, t, n) {
                                n = e.responseText, e.isResolved() && (e.done(function (e) {
                                            n = e
                                        }), a.html(o ? s("<div>").append(n.replace(Ft, "")).find(o) : n)), r && a.each(r, [n, t, e])
                            }
                        }), this
                },
                serialize: function () {
                    return s.param(this.serializeArray())
                },
                serializeArray: function () {
                    return this.map(function () {
                        return this.elements ? s.makeArray(this.elements) : this
                    }).filter(function () {
                        return this.name && !this.disabled && (this.checked || It.test(this.nodeName) || Dt.test(this.type))
                    }).map(function (e, t) {
                        var n = s(this).val();
                        return n == null ? null : s.isArray(n) ? s.map(n, function (e, n) {
                            return {
                                name: t.name,
                                value: e.replace(Ot, "\r\n")
                            }
                        }) : {
                            name: t.name,
                            value: n.replace(Ot, "\r\n")
                        }
                    }).get()
                }
            }), s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (e, t) {
                s.fn[t] = function (e) {
                    return this.on(t, e)
                }
            }), s.each(["get", "post"], function (e, n) {
                s[n] = function (e, r, i, o) {
                    return s.isFunction(r) && (o = o || i, i = r, r = t), s.ajax({
                            type: n,
                            url: e,
                            data: r,
                            success: i,
                            dataType: o
                        })
                }
            }), s.extend({
                getScript: function (e, n) {
                    return s.get(e, t, n, "script")
                },
                getJSON: function (e, t, n) {
                    return s.get(e, t, n, "json")
                },
                ajaxSetup: function (e, t) {
                    return t ? Yt(e, s.ajaxSettings) : (t = e, e = s.ajaxSettings), Yt(e, t), e
                },
                ajaxSettings: {
                    url: Vt,
                    isLocal: Pt.test($t[1]),
                    global: !0,
                    type: "GET",
                    contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                    processData: !0,
                    async: !0,
                    accepts: {
                        xml: "application/xml, text/xml",
                        html: "text/html",
                        text: "text/plain",
                        json: "application/json, text/javascript",
                        "*": Jt
                    },
                    contents: {
                        xml: /xml/,
                        html: /html/,
                        json: /json/
                    },
                    responseFields: {
                        xml: "responseXML",
                        text: "responseText"
                    },
                    converters: {
                        "* text": e.String,
                        "text html": !0,
                        "text json": s.parseJSON,
                        "text xml": s.parseXML
                    },
                    flatOptions: {
                        context: !0,
                        url: !0
                    }
                },
                ajaxPrefilter: Qt(Wt),
                ajaxTransport: Qt(Xt),
                ajax: function (e, n) {
                    function S(e, n, c, h) {
                        if (y === 2) return;
                        y = 2, m && clearTimeout(m), v = t, p = h || "", E.readyState = e > 0 ? 4 : 0;
                        var d, g, w, S = n,
                            x = c ? en(r, E, c) : t,
                            T, N;
                        if (e >= 200 && e < 300 || e === 304) {
                            if (r.ifModified) {
                                if (T = E.getResponseHeader("Last-Modified")) s.lastModified[l] = T;
                                if (N = E.getResponseHeader("Etag")) s.etag[l] = N
                            }
                            if (e === 304) S = "notmodified", d = !0;
                            else try {
                                g = tn(r, x), S = "success", d = !0
                            } catch (C) {
                                S = "parsererror", w = C
                            }
                        } else {
                            w = S;
                            if (!S || e) S = "error", e < 0 && (e = 0)
                        }
                        E.status = e, E.statusText = "" + (n || S), d ? u.resolveWith(i, [g, S, E]) : u.rejectWith(i, [E, S, w]), E.statusCode(f), f = t, b && o.trigger("ajax" + (d ? "Success" : "Error"), [E, r, d ? g : w]), a.fireWith(i, [E, S]), b && (o.trigger("ajaxComplete", [E, r]), --s.active || s.event.trigger("ajaxStop"))
                    }
                    typeof e == "object" && (n = e, e = t), n = n || {};
                    var r = s.ajaxSetup({}, n),
                        i = r.context || r,
                        o = i !== r && (i.nodeType || i instanceof s) ? s(i) : s.event,
                        u = s.Deferred(),
                        a = s.Callbacks("once memory"),
                        f = r.statusCode || {}, l, c = {}, h = {}, p, d, v, m, g, y = 0,
                        b, w, E = {
                            readyState: 0,
                            setRequestHeader: function (e, t) {
                                if (!y) {
                                    var n = e.toLowerCase();
                                    e = h[n] = h[n] || e, c[e] = t
                                }
                                return this
                            },
                            getAllResponseHeaders: function () {
                                return y === 2 ? p : null
                            },
                            getResponseHeader: function (e) {
                                var n;
                                if (y === 2) {
                                    if (!d) {
                                        d = {};
                                        while (n = _t.exec(p)) d[n[1].toLowerCase()] = n[2]
                                    }
                                    n = d[e.toLowerCase()]
                                }
                                return n === t ? null : n
                            },
                            overrideMimeType: function (e) {
                                return y || (r.mimeType = e), this
                            },
                            abort: function (e) {
                                return e = e || "abort", v && v.abort(e), S(0, e), this
                            }
                        };
                    u.promise(E), E.success = E.done, E.error = E.fail, E.complete = a.add, E.statusCode = function (e) {
                        if (e) {
                            var t;
                            if (y < 2)
                                for (t in e) f[t] = [f[t], e[t]];
                            else t = e[E.status], E.then(t, t)
                        }
                        return this
                    }, r.url = ((e || r.url) + "").replace(Mt, "").replace(Bt, $t[1] + "//"), r.dataTypes = s.trim(r.dataType || "*").toLowerCase().split(qt), r.crossDomain == null && (g = Ut.exec(r.url.toLowerCase()), r.crossDomain = !(!g || g[1] == $t[1] && g[2] == $t[2] && (g[3] || (g[1] === "http:" ? 80 : 443)) == ($t[3] || ($t[1] === "http:" ? 80 : 443)))), r.data && r.processData && typeof r.data != "string" && (r.data = s.param(r.data, r.traditional)), Gt(Wt, r, n, E);
                    if (y === 2) return !1;
                    b = r.global, r.type = r.type.toUpperCase(), r.hasContent = !Ht.test(r.type), b && s.active++ === 0 && s.event.trigger("ajaxStart");
                    if (!r.hasContent) {
                        r.data && (r.url += (jt.test(r.url) ? "&" : "?") + r.data, delete r.data), l = r.url;
                        if (r.cache === !1) {
                            var x = s.now(),
                                T = r.url.replace(Rt, "$1_=" + x);
                            r.url = T + (T === r.url ? (jt.test(r.url) ? "&" : "?") + "_=" + x : "")
                        }
                    }(r.data && r.hasContent && r.contentType !== !1 || n.contentType) && E.setRequestHeader("Content-Type", r.contentType), r.ifModified && (l = l || r.url, s.lastModified[l] && E.setRequestHeader("If-Modified-Since", s.lastModified[l]), s.etag[l] && E.setRequestHeader("If-None-Match", s.etag[l])), E.setRequestHeader("Accept", r.dataTypes[0] && r.accepts[r.dataTypes[0]] ? r.accepts[r.dataTypes[0]] + (r.dataTypes[0] !== "*" ? ", " + Jt + "; q=0.01" : "") : r.accepts["*"]);
                    for (w in r.headers) E.setRequestHeader(w, r.headers[w]);
                    if (!r.beforeSend || r.beforeSend.call(i, E, r) !== !1 && y !== 2) {
                        for (w in {
                                success: 1,
                                error: 1,
                                complete: 1
                            }) E[w](r[w]);
                        v = Gt(Xt, r, n, E);
                        if (!v) S(-1, "No Transport");
                        else {
                            E.readyState = 1, b && o.trigger("ajaxSend", [E, r]), r.async && r.timeout > 0 && (m = setTimeout(function () {
                                        E.abort("timeout")
                                    }, r.timeout));
                            try {
                                y = 1, v.send(c, S)
                            } catch (N) {
                                if (!(y < 2)) throw N;
                                S(-1, N)
                            }
                        }
                        return E
                    }
                    return E.abort(), !1
                },
                param: function (e, n) {
                    var r = [],
                        i = function (e, t) {
                            t = s.isFunction(t) ? t() : t, r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
                        };
                    n === t && (n = s.ajaxSettings.traditional);
                    if (s.isArray(e) || e.jquery && !s.isPlainObject(e)) s.each(e, function () {
                        i(this.name, this.value)
                    });
                    else
                        for (var o in e) Zt(o, e[o], n, i);
                    return r.join("&").replace(Lt, "+")
                }
            }), s.extend({
                active: 0,
                lastModified: {},
                etag: {}
            });
        var nn = s.now(),
            rn = /(\=)\?(&|$)|\?\?/i;
        s.ajaxSetup({
                jsonp: "callback",
                jsonpCallback: function () {
                    return s.expando + "_" + nn++
                }
            }), s.ajaxPrefilter("json jsonp", function (t, n, r) {
                var i = typeof t.data == "string" && /^application\/x\-www\-form\-urlencoded/.test(t.contentType);
                if (t.dataTypes[0] === "jsonp" || t.jsonp !== !1 && (rn.test(t.url) || i && rn.test(t.data))) {
                    var o, u = t.jsonpCallback = s.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback,
                        a = e[u],
                        f = t.url,
                        l = t.data,
                        c = "$1" + u + "$2";
                    return t.jsonp !== !1 && (f = f.replace(rn, c), t.url === f && (i && (l = l.replace(rn, c)), t.data === l && (f += (/\?/.test(f) ? "&" : "?") + t.jsonp + "=" + u))), t.url = f, t.data = l, e[u] = function (e) {
                        o = [e]
                    }, r.always(function () {
                        e[u] = a, o && s.isFunction(a) && e[u](o[0])
                    }), t.converters["script json"] = function () {
                        return o || s.error(u + " was not called"), o[0]
                    }, t.dataTypes[0] = "json", "script"
                }
            }), s.ajaxSetup({
                accepts: {
                    script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
                },
                contents: {
                    script: /javascript|ecmascript/
                },
                converters: {
                    "text script": function (e) {
                        return s.globalEval(e), e
                    }
                }
            }), s.ajaxPrefilter("script", function (e) {
                e.cache === t && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1)
            }), s.ajaxTransport("script", function (e) {
                if (e.crossDomain) {
                    var r, i = n.head || n.getElementsByTagName("head")[0] || n.documentElement;
                    return {
                        send: function (s, o) {
                            r = n.createElement("script"), r.async = "async", e.scriptCharset && (r.charset = e.scriptCharset), r.src = e.url, r.onload = r.onreadystatechange = function (e, n) {
                                if (n || !r.readyState || /loaded|complete/.test(r.readyState)) r.onload = r.onreadystatechange = null, i && r.parentNode && i.removeChild(r), r = t, n || o(200, "success")
                            }, i.insertBefore(r, i.firstChild)
                        },
                        abort: function () {
                            r && r.onload(0, 1)
                        }
                    }
                }
            });
        var sn = e.ActiveXObject ? function () {
                for (var e in un) un[e](0, 1)
            } : !1,
            on = 0,
            un;
        s.ajaxSettings.xhr = e.ActiveXObject ? function () {
            return !this.isLocal && an() || fn()
        } : an,
        function (e) {
            s.extend(s.support, {
                    ajax: !! e,
                    cors: !! e && "withCredentials" in e
                })
        }(s.ajaxSettings.xhr()), s.support.ajax && s.ajaxTransport(function (n) {
            if (!n.crossDomain || s.support.cors) {
                var r;
                return {
                    send: function (i, o) {
                        var u = n.xhr(),
                            a, f;
                        n.username ? u.open(n.type, n.url, n.async, n.username, n.password) : u.open(n.type, n.url, n.async);
                        if (n.xhrFields)
                            for (f in n.xhrFields) u[f] = n.xhrFields[f];
                        n.mimeType && u.overrideMimeType && u.overrideMimeType(n.mimeType), !n.crossDomain && !i["X-Requested-With"] && (i["X-Requested-With"] = "XMLHttpRequest");
                        try {
                            for (f in i) u.setRequestHeader(f, i[f])
                        } catch (l) {}
                        u.send(n.hasContent && n.data || null), r = function (e, i) {
                            var f, l, c, h, p;
                            try {
                                if (r && (i || u.readyState === 4)) {
                                    r = t, a && (u.onreadystatechange = s.noop, sn && delete un[a]);
                                    if (i) u.readyState !== 4 && u.abort();
                                    else {
                                        f = u.status, c = u.getAllResponseHeaders(), h = {}, p = u.responseXML, p && p.documentElement && (h.xml = p);
                                        try {
                                            h.text = u.responseText
                                        } catch (e) {}
                                        try {
                                            l = u.statusText
                                        } catch (d) {
                                            l = ""
                                        }!f && n.isLocal && !n.crossDomain ? f = h.text ? 200 : 404 : f === 1223 && (f = 204)
                                    }
                                }
                            } catch (v) {
                                i || o(-1, v)
                            }
                            h && o(f, l, h, c)
                        }, !n.async || u.readyState === 4 ? r() : (a = ++on, sn && (un || (un = {}, s(e).unload(sn)), un[a] = r), u.onreadystatechange = r)
                    },
                    abort: function () {
                        r && r(0, 1)
                    }
                }
            }
        });
        var ln = {}, cn, hn, pn = /^(?:toggle|show|hide)$/,
            dn = /^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
            vn, mn = [
                ["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"],
                ["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"],
                ["opacity"]
            ],
            gn;
        s.fn.extend({
                show: function (e, t, n) {
                    var r, i;
                    if (e || e === 0) return this.animate(wn("show", 3), e, t, n);
                    for (var o = 0, u = this.length; o < u; o++) r = this[o], r.style && (i = r.style.display, !s._data(r, "olddisplay") && i === "none" && (i = r.style.display = ""), (i === "" && s.css(r, "display") === "none" || !s.contains(r.ownerDocument.documentElement, r)) && s._data(r, "olddisplay", En(r.nodeName)));
                    for (o = 0; o < u; o++) {
                        r = this[o];
                        if (r.style) {
                            i = r.style.display;
                            if (i === "" || i === "none") r.style.display = s._data(r, "olddisplay") || ""
                        }
                    }
                    return this
                },
                hide: function (e, t, n) {
                    if (e || e === 0) return this.animate(wn("hide", 3), e, t, n);
                    var r, i, o = 0,
                        u = this.length;
                    for (; o < u; o++) r = this[o], r.style && (i = s.css(r, "display"), i !== "none" && !s._data(r, "olddisplay") && s._data(r, "olddisplay", i));
                    for (o = 0; o < u; o++) this[o].style && (this[o].style.display = "none");
                    return this
                },
                _toggle: s.fn.toggle,
                toggle: function (e, t, n) {
                    var r = typeof e == "boolean";
                    return s.isFunction(e) && s.isFunction(t) ? this._toggle.apply(this, arguments) : e == null || r ? this.each(function () {
                        var t = r ? e : s(this).is(":hidden");
                        s(this)[t ? "show" : "hide"]()
                    }) : this.animate(wn("toggle", 3), e, t, n), this
                },
                fadeTo: function (e, t, n, r) {
                    return this.filter(":hidden").css("opacity", 0).show().end().animate({
                            opacity: t
                        }, e, n, r)
                },
                animate: function (e, t, n, r) {
                    function o() {
                        i.queue === !1 && s._mark(this);
                        var t = s.extend({}, i),
                            n = this.nodeType === 1,
                            r = n && s(this).is(":hidden"),
                            o, u, a, f, l, c, h, p, d, v, m;
                        t.animatedProperties = {};
                        for (a in e) {
                            o = s.camelCase(a), a !== o && (e[o] = e[a], delete e[a]);
                            if ((l = s.cssHooks[o]) && "expand" in l) {
                                c = l.expand(e[o]), delete e[o];
                                for (a in c) a in e || (e[a] = c[a])
                            }
                        }
                        for (o in e) {
                            u = e[o], s.isArray(u) ? (t.animatedProperties[o] = u[1], u = e[o] = u[0]) : t.animatedProperties[o] = t.specialEasing && t.specialEasing[o] || t.easing || "swing";
                            if (u === "hide" && r || u === "show" && !r) return t.complete.call(this);
                            n && (o === "height" || o === "width") && (t.overflow = [this.style.overflow, this.style.overflowX, this.style.overflowY], s.css(this, "display") === "inline" && s.css(this, "float") === "none" && (!s.support.inlineBlockNeedsLayout || En(this.nodeName) === "inline" ? this.style.display = "inline-block" : this.style.zoom = 1))
                        }
                        t.overflow != null && (this.style.overflow = "hidden");
                        for (a in e) f = new s.fx(this, t, a), u = e[a], pn.test(u) ? (m = s._data(this, "toggle" + a) || (u === "toggle" ? r ? "show" : "hide" : 0), m ? (s._data(this, "toggle" + a, m === "show" ? "hide" : "show"), f[m]()) : f[u]()) : (h = dn.exec(u), p = f.cur(), h ? (d = parseFloat(h[2]), v = h[3] || (s.cssNumber[a] ? "" : "px"), v !== "px" && (s.style(this, a, (d || 1) + v), p = (d || 1) / f.cur() * p, s.style(this, a, p + v)), h[1] && (d = (h[1] === "-=" ? -1 : 1) * d + p), f.custom(p, d, v)) : f.custom(p, u, ""));
                        return !0
                    }
                    var i = s.speed(t, n, r);
                    return s.isEmptyObject(e) ? this.each(i.complete, [!1]) : (e = s.extend({}, e), i.queue === !1 ? this.each(o) : this.queue(i.queue, o))
                },
                stop: function (e, n, r) {
                    return typeof e != "string" && (r = n, n = e, e = t), n && e !== !1 && this.queue(e || "fx", []), this.each(function () {
                        function u(e, t, n) {
                            var i = t[n];
                            s.removeData(e, n, !0), i.stop(r)
                        }
                        var t, n = !1,
                            i = s.timers,
                            o = s._data(this);
                        r || s._unmark(!0, this);
                        if (e == null)
                            for (t in o) o[t] && o[t].stop && t.indexOf(".run") === t.length - 4 && u(this, o, t);
                        else o[t = e + ".run"] && o[t].stop && u(this, o, t);
                        for (t = i.length; t--;) i[t].elem === this && (e == null || i[t].queue === e) && (r ? i[t](!0) : i[t].saveState(), n = !0, i.splice(t, 1));
                        (!r || !n) && s.dequeue(this, e)
                    })
                }
            }), s.each({
                slideDown: wn("show", 1),
                slideUp: wn("hide", 1),
                slideToggle: wn("toggle", 1),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, function (e, t) {
                s.fn[e] = function (e, n, r) {
                    return this.animate(t, e, n, r)
                }
            }), s.extend({
                speed: function (e, t, n) {
                    var r = e && typeof e == "object" ? s.extend({}, e) : {
                        complete: n || !n && t || s.isFunction(e) && e,
                        duration: e,
                        easing: n && t || t && !s.isFunction(t) && t
                    };
                    r.duration = s.fx.off ? 0 : typeof r.duration == "number" ? r.duration : r.duration in s.fx.speeds ? s.fx.speeds[r.duration] : s.fx.speeds._default;
                    if (r.queue == null || r.queue === !0) r.queue = "fx";
                    return r.old = r.complete, r.complete = function (e) {
                        s.isFunction(r.old) && r.old.call(this), r.queue ? s.dequeue(this, r.queue) : e !== !1 && s._unmark(this)
                    }, r
                },
                easing: {
                    linear: function (e) {
                        return e
                    },
                    swing: function (e) {
                        return -Math.cos(e * Math.PI) / 2 + .5
                    }
                },
                timers: [],
                fx: function (e, t, n) {
                    this.options = t, this.elem = e, this.prop = n, t.orig = t.orig || {}
                }
            }), s.fx.prototype = {
            update: function () {
                this.options.step && this.options.step.call(this.elem, this.now, this), (s.fx.step[this.prop] || s.fx.step._default)(this)
            },
            cur: function () {
                if (this.elem[this.prop] == null || !! this.elem.style && this.elem.style[this.prop] != null) {
                    var e, t = s.css(this.elem, this.prop);
                    return isNaN(e = parseFloat(t)) ? !t || t === "auto" ? 0 : t : e
                }
                return this.elem[this.prop]
            },
            custom: function (e, n, r) {
                function u(e) {
                    return i.step(e)
                }
                var i = this,
                    o = s.fx;
                this.startTime = gn || yn(), this.end = n, this.now = this.start = e, this.pos = this.state = 0, this.unit = r || this.unit || (s.cssNumber[this.prop] ? "" : "px"), u.queue = this.options.queue, u.elem = this.elem, u.saveState = function () {
                    s._data(i.elem, "fxshow" + i.prop) === t && (i.options.hide ? s._data(i.elem, "fxshow" + i.prop, i.start) : i.options.show && s._data(i.elem, "fxshow" + i.prop, i.end))
                }, u() && s.timers.push(u) && !vn && (vn = setInterval(o.tick, o.interval))
            },
            show: function () {
                var e = s._data(this.elem, "fxshow" + this.prop);
                this.options.orig[this.prop] = e || s.style(this.elem, this.prop), this.options.show = !0, e !== t ? this.custom(this.cur(), e) : this.custom(this.prop === "width" || this.prop === "height" ? 1 : 0, this.cur()), s(this.elem).show()
            },
            hide: function () {
                this.options.orig[this.prop] = s._data(this.elem, "fxshow" + this.prop) || s.style(this.elem, this.prop), this.options.hide = !0, this.custom(this.cur(), 0)
            },
            step: function (e) {
                var t, n, r, i = gn || yn(),
                    o = !0,
                    u = this.elem,
                    a = this.options;
                if (e || i >= a.duration + this.startTime) {
                    this.now = this.end, this.pos = this.state = 1, this.update(), a.animatedProperties[this.prop] = !0;
                    for (t in a.animatedProperties) a.animatedProperties[t] !== !0 && (o = !1);
                    if (o) {
                        a.overflow != null && !s.support.shrinkWrapBlocks && s.each(["", "X", "Y"], function (e, t) {
                            u.style["overflow" + t] = a.overflow[e]
                        }), a.hide && s(u).hide();
                        if (a.hide || a.show)
                            for (t in a.animatedProperties) s.style(u, t, a.orig[t]), s.removeData(u, "fxshow" + t, !0), s.removeData(u, "toggle" + t, !0);
                        r = a.complete, r && (a.complete = !1, r.call(u))
                    }
                    return !1
                }
                return a.duration == Infinity ? this.now = i : (n = i - this.startTime, this.state = n / a.duration, this.pos = s.easing[a.animatedProperties[this.prop]](this.state, n, 0, 1, a.duration), this.now = this.start + (this.end - this.start) * this.pos), this.update(), !0
            }
        }, s.extend(s.fx, {
                tick: function () {
                    var e, t = s.timers,
                        n = 0;
                    for (; n < t.length; n++) e = t[n], !e() && t[n] === e && t.splice(n--, 1);
                    t.length || s.fx.stop()
                },
                interval: 13,
                stop: function () {
                    clearInterval(vn), vn = null
                },
                speeds: {
                    slow: 600,
                    fast: 200,
                    _default: 400
                },
                step: {
                    opacity: function (e) {
                        s.style(e.elem, "opacity", e.now)
                    },
                    _default: function (e) {
                        e.elem.style && e.elem.style[e.prop] != null ? e.elem.style[e.prop] = e.now + e.unit : e.elem[e.prop] = e.now
                    }
                }
            }), s.each(mn.concat.apply([], mn), function (e, t) {
                t.indexOf("margin") && (s.fx.step[t] = function (e) {
                    s.style(e.elem, t, Math.max(0, e.now) + e.unit)
                })
            }), s.expr && s.expr.filters && (s.expr.filters.animated = function (e) {
                return s.grep(s.timers, function (t) {
                    return e === t.elem
                }).length
            });
        var Sn, xn = /^t(?:able|d|h)$/i,
            Tn = /^(?:body|html)$/i;
        "getBoundingClientRect" in n.documentElement ? Sn = function (e, t, n, r) {
            try {
                r = e.getBoundingClientRect()
            } catch (i) {}
            if (!r || !s.contains(n, e)) return r ? {
                top: r.top,
                left: r.left
            }: {
                top: 0,
                left: 0
            };
            var o = t.body,
                u = Nn(t),
                a = n.clientTop || o.clientTop || 0,
                f = n.clientLeft || o.clientLeft || 0,
                l = u.pageYOffset || s.support.boxModel && n.scrollTop || o.scrollTop,
                c = u.pageXOffset || s.support.boxModel && n.scrollLeft || o.scrollLeft,
                h = r.top + l - a,
                p = r.left + c - f;
            return {
                top: h,
                left: p
            }
        } : Sn = function (e, t, n) {
            var r, i = e.offsetParent,
                o = e,
                u = t.body,
                a = t.defaultView,
                f = a ? a.getComputedStyle(e, null) : e.currentStyle,
                l = e.offsetTop,
                c = e.offsetLeft;
            while ((e = e.parentNode) && e !== u && e !== n) {
                if (s.support.fixedPosition && f.position === "fixed") break;
                r = a ? a.getComputedStyle(e, null) : e.currentStyle, l -= e.scrollTop, c -= e.scrollLeft, e === i && (l += e.offsetTop, c += e.offsetLeft, s.support.doesNotAddBorder && (!s.support.doesAddBorderForTableAndCells || !xn.test(e.nodeName)) && (l += parseFloat(r.borderTopWidth) || 0, c += parseFloat(r.borderLeftWidth) || 0), o = i, i = e.offsetParent), s.support.subtractsBorderForOverflowNotVisible && r.overflow !== "visible" && (l += parseFloat(r.borderTopWidth) || 0, c += parseFloat(r.borderLeftWidth) || 0), f = r
            }
            if (f.position === "relative" || f.position === "static") l += u.offsetTop, c += u.offsetLeft;
            return s.support.fixedPosition && f.position === "fixed" && (l += Math.max(n.scrollTop, u.scrollTop), c += Math.max(n.scrollLeft, u.scrollLeft)), {
                top: l,
                left: c
            }
        }, s.fn.offset = function (e) {
            if (arguments.length) return e === t ? this : this.each(function (t) {
                s.offset.setOffset(this, e, t)
            });
            var n = this[0],
                r = n && n.ownerDocument;
            return r ? n === r.body ? s.offset.bodyOffset(n) : Sn(n, r, r.documentElement) : null
        }, s.offset = {
            bodyOffset: function (e) {
                var t = e.offsetTop,
                    n = e.offsetLeft;
                return s.support.doesNotIncludeMarginInBodyOffset && (t += parseFloat(s.css(e, "marginTop")) || 0, n += parseFloat(s.css(e, "marginLeft")) || 0), {
                    top: t,
                    left: n
                }
            },
            setOffset: function (e, t, n) {
                var r = s.css(e, "position");
                r === "static" && (e.style.position = "relative");
                var i = s(e),
                    o = i.offset(),
                    u = s.css(e, "top"),
                    a = s.css(e, "left"),
                    f = (r === "absolute" || r === "fixed") && s.inArray("auto", [u, a]) > -1,
                    l = {}, c = {}, h, p;
                f ? (c = i.position(), h = c.top, p = c.left) : (h = parseFloat(u) || 0, p = parseFloat(a) || 0), s.isFunction(t) && (t = t.call(e, n, o)), t.top != null && (l.top = t.top - o.top + h), t.left != null && (l.left = t.left - o.left + p), "using" in t ? t.using.call(e, l) : i.css(l)
            }
        }, s.fn.extend({
                position: function () {
                    if (!this[0]) return null;
                    var e = this[0],
                        t = this.offsetParent(),
                        n = this.offset(),
                        r = Tn.test(t[0].nodeName) ? {
                            top: 0,
                            left: 0
                        } : t.offset();
                    return n.top -= parseFloat(s.css(e, "marginTop")) || 0, n.left -= parseFloat(s.css(e, "marginLeft")) || 0, r.top += parseFloat(s.css(t[0], "borderTopWidth")) || 0, r.left += parseFloat(s.css(t[0], "borderLeftWidth")) || 0, {
                        top: n.top - r.top,
                        left: n.left - r.left
                    }
                },
                offsetParent: function () {
                    return this.map(function () {
                        var e = this.offsetParent || n.body;
                        while (e && !Tn.test(e.nodeName) && s.css(e, "position") === "static") e = e.offsetParent;
                        return e
                    })
                }
            }), s.each({
                scrollLeft: "pageXOffset",
                scrollTop: "pageYOffset"
            }, function (e, n) {
                var r = /Y/.test(n);
                s.fn[e] = function (i) {
                    return s.access(this, function (e, i, o) {
                        var u = Nn(e);
                        if (o === t) return u ? n in u ? u[n] : s.support.boxModel && u.document.documentElement[i] || u.document.body[i] : e[i];
                        u ? u.scrollTo(r ? s(u).scrollLeft() : o, r ? o : s(u).scrollTop()) : e[i] = o
                    }, e, i, arguments.length, null)
                }
            }), s.each({
                Height: "height",
                Width: "width"
            }, function (e, n) {
                var r = "client" + e,
                    i = "scroll" + e,
                    o = "offset" + e;
                s.fn["inner" + e] = function () {
                    var e = this[0];
                    return e ? e.style ? parseFloat(s.css(e, n, "padding")) : this[n]() : null
                }, s.fn["outer" + e] = function (e) {
                    var t = this[0];
                    return t ? t.style ? parseFloat(s.css(t, n, e ? "margin" : "border")) : this[n]() : null
                }, s.fn[n] = function (e) {
                    return s.access(this, function (e, n, u) {
                        var a, f, l, c;
                        if (s.isWindow(e)) return a = e.document, f = a.documentElement[r], s.support.boxModel && f || a.body && a.body[r] || f;
                        if (e.nodeType === 9) return a = e.documentElement, a[r] >= a[i] ? a[r] : Math.max(e.body[i], a[i], e.body[o], a[o]);
                        if (u === t) return l = s.css(e, n), c = parseFloat(l), s.isNumeric(c) ? c : l;
                        s(e).css(n, u)
                    }, n, e, arguments.length, null)
                }
            }), e.jQuery = e.$ = s, typeof define == "function" && define.amd && define.amd.jQuery && define("jquery", [], function () {
                return s
            })
    })(window),
    function (e, t) {
        var n = function () {
            var t = e(document).data("events");
            return t && t.click && e.grep(t.click, function (e) {
                return e.namespace === "rails"
            }).length
        };
        n() && e.error("jquery-ujs has already been loaded!");
        var r;
        e.rails = r = {
            linkClickSelector: "a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",
            inputChangeSelector: "select[data-remote], input[data-remote], textarea[data-remote]",
            formSubmitSelector: "form",
            formInputClickSelector: "form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",
            disableSelector: "input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",
            enableSelector: "input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",
            requiredInputSelector: "input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",
            fileInputSelector: "input:file",
            linkDisableSelector: "a[data-disable-with]",
            CSRFProtection: function (t) {
                var n = e('meta[name="csrf-token"]').attr("content");
                n && t.setRequestHeader("X-CSRF-Token", n)
            },
            fire: function (t, n, r) {
                var i = e.Event(n);
                return t.trigger(i, r), i.result !== !1
            },
            confirm: function (e) {
                return confirm(e)
            },
            ajax: function (t) {
                return e.ajax(t)
            },
            href: function (e) {
                return e.attr("href")
            },
            handleRemote: function (n) {
                var i, s, o, u, a, f, l, c;
                if (r.fire(n, "ajax:before")) {
                    u = n.data("cross-domain"), a = u === t ? null : u, f = n.data("with-credentials") || null, l = n.data("type") || e.ajaxSettings && e.ajaxSettings.dataType;
                    if (n.is("form")) {
                        i = n.attr("method"), s = n.attr("action"), o = n.serializeArray();
                        var h = n.data("ujs:submit-button");
                        h && (o.push(h), n.data("ujs:submit-button", null))
                    } else n.is(r.inputChangeSelector) ? (i = n.data("method"), s = n.data("url"), o = n.serialize(), n.data("params") && (o = o + "&" + n.data("params"))) : (i = n.data("method"), s = r.href(n), o = n.data("params") || null);
                    c = {
                        type: i || "GET",
                        data: o,
                        dataType: l,
                        beforeSend: function (e, i) {
                            return i.dataType === t && e.setRequestHeader("accept", "*/*;q=0.5, " + i.accepts.script), r.fire(n, "ajax:beforeSend", [e, i])
                        },
                        success: function (e, t, r) {
                            n.trigger("ajax:success", [e, t, r])
                        },
                        complete: function (e, t) {
                            n.trigger("ajax:complete", [e, t])
                        },
                        error: function (e, t, r) {
                            n.trigger("ajax:error", [e, t, r])
                        },
                        xhrFields: {
                            withCredentials: f
                        },
                        crossDomain: a
                    }, s && (c.url = s);
                    var p = r.ajax(c);
                    return n.trigger("ajax:send", p), p
                }
                return !1
            },
            handleMethod: function (n) {
                var i = r.href(n),
                    s = n.data("method"),
                    o = n.attr("target"),
                    u = e("meta[name=csrf-token]").attr("content"),
                    a = e("meta[name=csrf-param]").attr("content"),
                    f = e('<form method="post" action="' + i + '"></form>'),
                    l = '<input name="_method" value="' + s + '" type="hidden" />';
                a !== t && u !== t && (l += '<input name="' + a + '" value="' + u + '" type="hidden" />'), o && f.attr("target", o), f.hide().append(l).appendTo("body"), f.submit()
            },
            disableFormElements: function (t) {
                t.find(r.disableSelector).each(function () {
                    var t = e(this),
                        n = t.is("button") ? "html" : "val";
                    t.data("ujs:enable-with", t[n]()), t[n](t.data("disable-with")), t.prop("disabled", !0)
                })
            },
            enableFormElements: function (t) {
                t.find(r.enableSelector).each(function () {
                    var t = e(this),
                        n = t.is("button") ? "html" : "val";
                    t.data("ujs:enable-with") && t[n](t.data("ujs:enable-with")), t.prop("disabled", !1)
                })
            },
            allowAction: function (e) {
                var t = e.data("confirm"),
                    n = !1,
                    i;
                return t ? (r.fire(e, "confirm") && (n = r.confirm(t), i = r.fire(e, "confirm:complete", [n])), n && i) : !0
            },
            blankInputs: function (t, n, r) {
                var i = e(),
                    s, o, u = n || "input,textarea";
                return t.find(u).each(function () {
                    s = e(this), o = s.is(":checkbox,:radio") ? s.is(":checked") : s.val(), o == !! r && (i = i.add(s))
                }), i.length ? i : !1
            },
            nonBlankInputs: function (e, t) {
                return r.blankInputs(e, t, !0)
            },
            stopEverything: function (t) {
                return e(t.target).trigger("ujs:everythingStopped"), t.stopImmediatePropagation(), !1
            },
            callFormSubmitBindings: function (n, r) {
                var i =
                    n.data("events"),
                    s = !0;
                return i !== t && i.submit !== t && e.each(i.submit, function (e, t) {
                    if (typeof t.handler == "function") return s = t.handler(r)
                }), s
            },
            disableElement: function (e) {
                e.data("ujs:enable-with", e.html()), e.html(e.data("disable-with")), e.bind("click.railsDisable", function (e) {
                    return r.stopEverything(e)
                })
            },
            enableElement: function (e) {
                e.data("ujs:enable-with") !== t && (e.html(e.data("ujs:enable-with")), e.data("ujs:enable-with", !1)), e.unbind("click.railsDisable")
            }
        }, r.fire(e(document), "rails:attachBindings") && (e.ajaxPrefilter(function (e, t, n) {
                    e.crossDomain || r.CSRFProtection(n)
                }), e(document).delegate(r.linkDisableSelector, "ajax:complete", function () {
                    r.enableElement(e(this))
                }), e(document).delegate(r.linkClickSelector, "click.rails", function (n) {
                    var i = e(this),
                        s = i.data("method"),
                        o = i.data("params");
                    if (!r.allowAction(i)) return r.stopEverything(n);
                    i.is(r.linkDisableSelector) && r.disableElement(i);
                    if (i.data("remote") !== t) return (n.metaKey || n.ctrlKey) && (!s || s === "GET") && !o ? !0 : (r.handleRemote(i) === !1 && r.enableElement(i), !1);
                    if (i.data("method")) return r.handleMethod(i), !1
                }), e(document).delegate(r.inputChangeSelector, "change.rails", function (t) {
                    var n = e(this);
                    return r.allowAction(n) ? (r.handleRemote(n), !1) : r.stopEverything(t)
                }), e(document).delegate(r.formSubmitSelector, "submit.rails", function (n) {
                    var i = e(this),
                        s = i.data("remote") !== t,
                        o = r.blankInputs(i, r.requiredInputSelector),
                        u = r.nonBlankInputs(i, r.fileInputSelector);
                    if (!r.allowAction(i)) return r.stopEverything(n);
                    if (o && i.attr("novalidate") == t && r.fire(i, "ajax:aborted:required", [o])) return r.stopEverything(n);
                    if (s) return u ? (setTimeout(function () {
                                r.disableFormElements(i)
                            }, 13), r.fire(i, "ajax:aborted:file", [u])) : !e.support.submitBubbles && e().jquery < "1.7" && r.callFormSubmitBindings(i, n) === !1 ? r.stopEverything(n) : (r.handleRemote(i), !1);
                    setTimeout(function () {
                        r.disableFormElements(i)
                    }, 13)
                }), e(document).delegate(r.formInputClickSelector, "click.rails", function (t) {
                    var n = e(this);
                    if (!r.allowAction(n)) return r.stopEverything(t);
                    var i = n.attr("name"),
                        s = i ? {
                            name: i,
                            value: n.val()
                        } : null;
                    n.closest("form").data("ujs:submit-button", s)
                }), e(document).delegate(r.formSubmitSelector, "ajax:beforeSend.rails", function (t) {
                    this == t.target && r.disableFormElements(e(this))
                }), e(document).delegate(r.formSubmitSelector, "ajax:complete.rails", function (t) {
                    this == t.target && r.enableFormElements(e(this))
                }), e(function () {
                    csrf_token = e("meta[name=csrf-token]").attr("content"), csrf_param = e("meta[name=csrf-param]").attr("content"), e('form input[name="' + csrf_param + '"]').val(csrf_token)
                }))
    }(jQuery),
    function () {
        try {
            document.cookie, jQuery.cookie = function (e, t, n) {
                if (arguments.length > 1 && String(t) !== "[object Object]") {
                    n = jQuery.extend({}, n);
                    if (t === null || t === undefined) n.expires = -1;
                    if (typeof n.expires == "number") {
                        var r = n.expires,
                            i = n.expires = new Date;
                        i.setDate(i.getDate() + r)
                    }
                    return t = String(t), document.cookie = [encodeURIComponent(e), "=", n.raw ? t : encodeURIComponent(t), n.expires ? "; expires=" + n.expires.toUTCString() : "", n.path ? "; path=" + n.path : "", n.domain ? "; domain=" + n.domain : "", n.secure ? "; secure" : ""].join("")
                }
                n = t || {};
                var s, o = n.raw ? function (e) {
                        return e
                    } : decodeURIComponent;
                return (s = (new RegExp("(?:^|; )" + encodeURIComponent(e) + "=([^;]*)")).exec(document.cookie)) ? o(s[1]) : null
            }
        } catch (e) {
            jQuery.cookie = jQuery.noop
        }
    }.call(this),
    function (e, t) {
        function n(t, n) {
            var i = t.nodeName.toLowerCase();
            if ("area" === i) {
                var s = t.parentNode,
                    o = s.name,
                    u;
                return !t.href || !o || s.nodeName.toLowerCase() !== "map" ? !1 : (u = e("img[usemap=#" + o + "]")[0], !! u && r(u))
            }
            return (/input|select|textarea|button|object/.test(i) ? !t.disabled : "a" == i ? t.href || n : n) && r(t)
        }

        function r(t) {
            return !e(t).parents().andSelf().filter(function () {
                return e.curCSS(this, "visibility") === "hidden" || e.expr.filters.hidden(this)
            }).length
        }
        e.ui = e.ui || {};
        if (e.ui.version) return;
        e.extend(e.ui, {
                version: "1.8.21",
                keyCode: {
                    ALT: 18,
                    BACKSPACE: 8,
                    CAPS_LOCK: 20,
                    COMMA: 188,
                    COMMAND: 91,
                    COMMAND_LEFT: 91,
                    COMMAND_RIGHT: 93,
                    CONTROL: 17,
                    DELETE: 46,
                    DOWN: 40,
                    END: 35,
                    ENTER: 13,
                    ESCAPE: 27,
                    HOME: 36,
                    INSERT: 45,
                    LEFT: 37,
                    MENU: 93,
                    NUMPAD_ADD: 107,
                    NUMPAD_DECIMAL: 110,
                    NUMPAD_DIVIDE: 111,
                    NUMPAD_ENTER: 108,
                    NUMPAD_MULTIPLY: 106,
                    NUMPAD_SUBTRACT: 109,
                    PAGE_DOWN: 34,
                    PAGE_UP: 33,
                    PERIOD: 190,
                    RIGHT: 39,
                    SHIFT: 16,
                    SPACE: 32,
                    TAB: 9,
                    UP: 38,
                    WINDOWS: 91
                }
            }), e.fn.extend({
                propAttr: e.fn.prop || e.fn.attr,
                _focus: e.fn.focus,
                focus: function (t, n) {
                    return typeof t == "number" ? this.each(function () {
                        var r = this;
                        setTimeout(function () {
                            e(r).focus(), n && n.call(r)
                        }, t)
                    }) : this._focus.apply(this, arguments)
                },
                scrollParent: function () {
                    var t;
                    return e.browser.msie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? t = this.parents().filter(function () {
                        return /(relative|absolute|fixed)/.test(e.curCSS(this, "position", 1)) && /(auto|scroll)/.test(e.curCSS(this, "overflow", 1) + e.curCSS(this, "overflow-y", 1) + e.curCSS(this, "overflow-x", 1))
                    }).eq(0) : t = this.parents().filter(function () {
                        return /(auto|scroll)/.test(e.curCSS(this, "overflow", 1) + e.curCSS(this, "overflow-y", 1) + e.curCSS(this, "overflow-x", 1))
                    }).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t
                },
                zIndex: function (n) {
                    if (n !== t) return this.css("zIndex", n);
                    if (this.length) {
                        var r = e(this[0]),
                            i, s;
                        while (r.length && r[0] !== document) {
                            i = r.css("position");
                            if (i === "absolute" || i === "relative" || i === "fixed") {
                                s = parseInt(r.css("zIndex"), 10);
                                if (!isNaN(s) && s !== 0) return s
                            }
                            r = r.parent()
                        }
                    }
                    return 0
                },
                disableSelection: function () {
                    return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function (e) {
                        e.preventDefault()
                    })
                },
                enableSelection: function () {
                    return this.unbind(".ui-disableSelection")
                }
            }), e.each(["Width", "Height"], function (n, r) {
                function i(t, n, r, i) {
                    return e.each(s, function () {
                        n -= parseFloat(e.curCSS(t, "padding" + this, !0)) || 0, r && (n -= parseFloat(e.curCSS(t, "border" + this + "Width", !0)) || 0), i && (n -= parseFloat(e.curCSS(t, "margin" + this, !0)) || 0)
                    }), n
                }
                var s = r === "Width" ? ["Left", "Right"] : ["Top", "Bottom"],
                    o = r.toLowerCase(),
                    u = {
                        innerWidth: e.fn.innerWidth,
                        innerHeight: e.fn.innerHeight,
                        outerWidth: e.fn.outerWidth,
                        outerHeight: e.fn.outerHeight
                    };
                e.fn["inner" + r] = function (n) {
                    return n === t ? u["inner" + r].call(this) : this.each(function () {
                        e(this).css(o, i(this, n) + "px")
                    })
                }, e.fn["outer" + r] = function (t, n) {
                    return typeof t != "number" ? u["outer" + r].call(this, t) : this.each(function () {
                        e(this).css(o, i(this, t, !0, n) + "px")
                    })
                }
            }), e.extend(e.expr[":"], {
                data: function (t, n, r) {
                    return !!e.data(t, r[3])
                },
                focusable: function (t) {
                    return n(t, !isNaN(e.attr(t, "tabindex")))
                },
                tabbable: function (t) {
                    var r = e.attr(t, "tabindex"),
                        i = isNaN(r);
                    return (i || r >= 0) && n(t, !i)
                }
            }), e(function () {
                var t = document.body,
                    n = t.appendChild(n = document.createElement("div"));
                n.offsetHeight, e.extend(n.style, {
                        minHeight: "100px",
                        height: "auto",
                        padding: 0,
                        borderWidth: 0
                    }), e.support.minHeight = n.offsetHeight === 100, e.support.selectstart = "onselectstart" in n, t.removeChild(n).style.display = "none"
            }), e.extend(e.ui, {
                plugin: {
                    add: function (t, n, r) {
                        var i = e.ui[t].prototype;
                        for (var s in r) i.plugins[s] = i.plugins[s] || [], i.plugins[s].push([n, r[s]])
                    },
                    call: function (e, t, n) {
                        var r = e.plugins[t];
                        if (!r || !e.element[0].parentNode) return;
                        for (var i = 0; i < r.length; i++) e.options[r[i][0]] && r[i][1].apply(e.element, n)
                    }
                },
                contains: function (e, t) {
                    return document.compareDocumentPosition ? e.compareDocumentPosition(t) & 16 : e !== t && e.contains(t)
                },
                hasScroll: function (t, n) {
                    if (e(t).css("overflow") === "hidden") return !1;
                    var r = n && n === "left" ? "scrollLeft" : "scrollTop",
                        i = !1;
                    return t[r] > 0 ? !0 : (t[r] = 1, i = t[r] > 0, t[r] = 0, i)
                },
                isOverAxis: function (e, t, n) {
                    return e > t && e < t + n
                },
                isOver: function (t, n, r, i, s, o) {
                    return e.ui.isOverAxis(t, r, s) && e.ui.isOverAxis(n, i, o)
                }
            })
    }(jQuery),
    function (e, t) {
        if (e.cleanData) {
            var n = e.cleanData;
            e.cleanData = function (t) {
                for (var r = 0, i;
                    (i = t[r]) != null; r++) try {
                    e(i).triggerHandler("remove")
                } catch (s) {}
                n(t)
            }
        } else {
            var r = e.fn.remove;
            e.fn.remove = function (t, n) {
                return this.each(function () {
                    return n || (!t || e.filter(t, [this]).length) && e("*", this).add([this]).each(function () {
                        try {
                            e(this).triggerHandler("remove")
                        } catch (t) {}
                    }), r.call(e(this), t, n)
                })
            }
        }
        e.widget = function (t, n, r) {
            var i = t.split(".")[0],
                s;
            t = t.split(".")[1], s = i + "-" + t, r || (r = n, n = e.Widget), e.expr[":"][s] = function (n) {
                return !!e.data(n, t)
            }, e[i] = e[i] || {}, e[i][t] = function (e, t) {
                arguments.length && this._createWidget(e, t)
            };
            var o = new n;
            o.options = e.extend(!0, {}, o.options), e[i][t].prototype = e.extend(!0, o, {
                    namespace: i,
                    widgetName: t,
                    widgetEventPrefix: e[i][t].prototype.widgetEventPrefix || t,
                    widgetBaseClass: s
                }, r), e.widget.bridge(t, e[i][t])
        }, e.widget.bridge = function (n, r) {
            e.fn[n] = function (i) {
                var s = typeof i == "string",
                    o = Array.prototype.slice.call(arguments, 1),
                    u = this;
                return i = !s && o.length ? e.extend.apply(null, [!0, i].concat(o)) : i, s && i.charAt(0) === "_" ? u : (s ? this.each(function () {
                            var r = e.data(this, n),
                                s = r && e.isFunction(r[i]) ? r[i].apply(r, o) : r;
                            if (s !== r && s !== t) return u = s, !1
                        }) : this.each(function () {
                            var t = e.data(this, n);
                            t ? t.option(i || {})._init() : e.data(this, n, new r(i, this))
                        }), u)
            }
        }, e.Widget = function (e, t) {
            arguments.length && this._createWidget(e, t)
        }, e.Widget.prototype = {
            widgetName: "widget",
            widgetEventPrefix: "",
            options: {
                disabled: !1
            },
            _createWidget: function (t, n) {
                e.data(n, this.widgetName, this), this.element = e(n), this.options = e.extend(!0, {}, this.options, this._getCreateOptions(), t);
                var r = this;
                this.element.bind("remove." + this.widgetName, function () {
                    r.destroy()
                }), this._create(), this._trigger("create"), this._init()
            },
            _getCreateOptions: function () {
                return e.metadata && e.metadata.get(this.element[0])[this.widgetName]
            },
            _create: function () {},
            _init: function () {},
            destroy: function () {
                this.element.unbind("." + this.widgetName).removeData(this.widgetName), this.widget().unbind("." + this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass + "-disabled " + "ui-state-disabled")
            },
            widget: function () {
                return this.element
            },
            option: function (n, r) {
                var i = n;
                if (arguments.length === 0) return e.extend({}, this.options);
                if (typeof n == "string") {
                    if (r === t) return this.options[n];
                    i = {}, i[n] = r
                }
                return this._setOptions(i), this
            },
            _setOptions: function (t) {
                var n = this;
                return e.each(t, function (e, t) {
                    n._setOption(e, t)
                }), this
            },
            _setOption: function (e, t) {
                return this.options[e] = t, e === "disabled" && this.widget()[t ? "addClass" : "removeClass"](this.widgetBaseClass + "-disabled" + " " + "ui-state-disabled").attr("aria-disabled", t), this
            },
            enable: function () {
                return this._setOption("disabled", !1)
            },
            disable: function () {
                return this._setOption("disabled", !0)
            },
            _trigger: function (t, n, r) {
                var i, s, o = this.options[t];
                r = r || {}, n = e.Event(n), n.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), n.target = this.element[0], s = n.originalEvent;
                if (s)
                    for (i in s) i in n || (n[i] = s[i]);
                return this.element.trigger(n, r), !(e.isFunction(o) && o.call(this.element[0], n, r) === !1 || n.isDefaultPrevented())
            }
        }
    }(jQuery),
    function (e, t) {
        var n = !1;
        e(document).mouseup(function (e) {
            n = !1
        }), e.widget("ui.mouse", {
                options: {
                    cancel: ":input,option",
                    distance: 1,
                    delay: 0
                },
                _mouseInit: function () {
                    var t = this;
                    this.element.bind("mousedown." + this.widgetName, function (e) {
                        return t._mouseDown(e)
                    }).bind("click." + this.widgetName, function (n) {
                        if (!0 === e.data(n.target, t.widgetName + ".preventClickEvent")) return e.removeData(n.target, t.widgetName + ".preventClickEvent"), n.stopImmediatePropagation(), !1
                    }), this.started = !1
                },
                _mouseDestroy: function () {
                    this.element.unbind("." + this.widgetName), e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
                },
                _mouseDown: function (t) {
                    if (n) return;
                    this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
                    var r = this,
                        i = t.which == 1,
                        s = typeof this.options.cancel == "string" && t.target.nodeName ? e(t.target).closest(this.options.cancel).length : !1;
                    if (!i || s || !this._mouseCapture(t)) return !0;
                    this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () {
                                r.mouseDelayMet = !0
                            }, this.options.delay));
                    if (this._mouseDistanceMet(t) && this._mouseDelayMet(t)) {
                        this._mouseStarted = this._mouseStart(t) !== !1;
                        if (!this._mouseStarted) return t.preventDefault(), !0
                    }
                    return !0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (e) {
                        return r._mouseMove(e)
                    }, this._mouseUpDelegate = function (e) {
                        return r._mouseUp(e)
                    }, e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), n = !0, !0
                },
                _mouseMove: function (t) {
                    return !e.browser.msie || document.documentMode >= 9 || !! t.button ? this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted) : this._mouseUp(t)
                },
                _mouseUp: function (t) {
                    return e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target == this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), !1
                },
                _mouseDistanceMet: function (e) {
                    return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
                },
                _mouseDelayMet: function (e) {
                    return this.mouseDelayMet
                },
                _mouseStart: function (e) {},
                _mouseDrag: function (e) {},
                _mouseStop: function (e) {},
                _mouseCapture: function (e) {
                    return !0
                }
            })
    }(jQuery),
    function (e, t) {
        e.ui = e.ui || {};
        var n = /left|center|right/,
            r = /top|center|bottom/,
            i = "center",
            s = {}, o = e.fn.position,
            u = e.fn.offset;
        e.fn.position = function (t) {
            if (!t || !t.of) return o.apply(this, arguments);
            t = e.extend({}, t);
            var u = e(t.of),
                l = u[0],
                h = (t.collision || "flip").split(" "),
                p = t.offset ? t.offset.split(" ") : [0, 0],
                v, m, y;
            return l.nodeType === 9 ? (v = u.width(), m = u.height(), y = {
                    top: 0,
                    left: 0
                }) : l.setTimeout ? (v = u.width(), m = u.height(), y = {
                    top: u.scrollTop(),
                    left: u.scrollLeft()
                }) : l.preventDefault ? (t.at = "left top", v = m = 0, y = {
                    top: t.of.pageY,
                    left: t.of.pageX
                }) : (v = u.outerWidth(), m = u.outerHeight(), y = u.offset()), e.each(["my", "at"], function () {
                    var e = (t[this] || "").split(" ");
                    e.length === 1 && (e = n.test(e[0]) ? e.concat([i]) : r.test(e[0]) ? [i].concat(e) : [i, i]), e[0] = n.test(e[0]) ? e[0] : i, e[1] = r.test(e[1]) ? e[1] : i, t[this] = e
                }), h.length === 1 && (h[1] = h[0]), p[0] = parseInt(p[0], 10) || 0, p.length === 1 && (p[1] = p[0]), p[1] = parseInt(p[1], 10) || 0, t.at[0] === "right" ? y.left += v : t.at[0] === i && (y.left += v / 2), t.at[1] === "bottom" ? y.top += m : t.at[1] === i && (y.top += m / 2), y.left += p[0], y.top += p[1], this.each(function () {
                    var n = e(this),
                        r = n.outerWidth(),
                        o = n.outerHeight(),
                        u = parseInt(e.curCSS(this, "marginLeft", !0)) || 0,
                        l = parseInt(e.curCSS(this, "marginTop", !0)) || 0,
                        c = r + u + (parseInt(e.curCSS(this, "marginRight", !0)) || 0),
                        d = o + l + (parseInt(e.curCSS(this, "marginBottom", !0)) || 0),
                        g = e.extend({}, y),
                        w;
                    t.my[0] === "right" ? g.left -= r : t.my[0] === i && (g.left -= r / 2), t.my[1] === "bottom" ? g.top -= o : t.my[1] === i && (g.top -= o / 2), s.fractions || (g.left = Math.round(g.left), g.top = Math.round(g.top)), w = {
                        left: g.left - u,
                        top: g.top - l
                    }, e.each(["left", "top"], function (n, i) {
                        e.ui.position[h[n]] && e.ui.position[h[n]][i](g, {
                                targetWidth: v,
                                targetHeight: m,
                                elemWidth: r,
                                elemHeight: o,
                                collisionPosition: w,
                                collisionWidth: c,
                                collisionHeight: d,
                                offset: p,
                                my: t.my,
                                at: t.at
                            })
                    }), e.fn.bgiframe && n.bgiframe(), n.offset(e.extend(g, {
                                using: t.using
                            }))
                })
        }, e.ui.position = {
            fit: {
                left: function (t, n) {
                    var r = e(window),
                        i = n.collisionPosition.left + n.collisionWidth - r.width() - r.scrollLeft();
                    t.left = i > 0 ? t.left - i : Math.max(t.left - n.collisionPosition.left, t.left)
                },
                top: function (t, n) {
                    var r = e(window),
                        i = n.collisionPosition.top + n.collisionHeight - r.height() - r.scrollTop();
                    t.top = i > 0 ? t.top - i : Math.max(t.top - n.collisionPosition.top, t.top)
                }
            },
            flip: {
                left: function (t, n) {
                    if (n.at[0] === i) return;
                    var r = e(window),
                        s = n.collisionPosition.left + n.collisionWidth - r.width() - r.scrollLeft(),
                        o = n.my[0] === "left" ? -n.elemWidth : n.my[0] === "right" ? n.elemWidth : 0,
                        u = n.at[0] === "left" ? n.targetWidth : -n.targetWidth,
                        f = -2 * n.offset[0];
                    t.left += n.collisionPosition.left < 0 ? o + u + f : s > 0 ? o + u + f : 0
                },
                top: function (t, n) {
                    if (n.at[1] === i) return;
                    var r = e(window),
                        s = n.collisionPosition.top + n.collisionHeight - r.height() - r.scrollTop(),
                        o = n.my[1] === "top" ? -n.elemHeight : n.my[1] === "bottom" ? n.elemHeight : 0,
                        u = n.at[1] === "top" ? n.targetHeight : -n.targetHeight,
                        f = -2 * n.offset[1];
                    t.top += n.collisionPosition.top < 0 ? o + u + f : s > 0 ? o + u + f : 0
                }
            }
        }, e.offset.setOffset || (e.offset.setOffset = function (t, n) {
            /static/.test(e.curCSS(t, "position")) && (t.style.position = "relative");
            var r = e(t),
                i = r.offset(),
                s = parseInt(e.curCSS(t, "top", !0), 10) || 0,
                o = parseInt(e.curCSS(t, "left", !0), 10) || 0,
                u = {
                    top: n.top - i.top + s,
                    left: n.left - i.left + o
                };
            "using" in n ? n.using.call(t, u) : r.css(u)
        }, e.fn.offset = function (t) {
            var n = this[0];
            return !n || !n.ownerDocument ? null : t ? e.isFunction(t) ? this.each(function (n) {
                e(this).offset(t.call(this, n, e(this).offset()))
            }) : this.each(function () {
                e.offset.setOffset(this, t)
            }) : u.call(this)
        }),
        function () {
            var t = document.getElementsByTagName("body")[0],
                n = document.createElement("div"),
                r, i, o, u, l;
            r = document.createElement(t ? "div" : "body"), o = {
                visibility: "hidden",
                width: 0,
                height: 0,
                border: 0,
                margin: 0,
                background: "none"
            }, t && e.extend(o, {
                    position: "absolute",
                    left: "-1000px",
                    top: "-1000px"
                });
            for (var c in o) r.style[c] = o[c];
            r.appendChild(n), i = t || document.documentElement, i.insertBefore(r, i.firstChild), n.style.cssText = "position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;", u = e(n).offset(function (e, t) {
                return t
            }).offset(), r.innerHTML = "", i.removeChild(r), l = u.top + u.left + (t ? 2e3 : 0), s.fractions = l > 21 && l < 22
        }()
    }(jQuery),
    function (e, t) {
        e.widget("ui.sortable", e.ui.mouse, {
                widgetEventPrefix: "sort",
                ready: !1,
                options: {
                    appendTo: "parent",
                    axis: !1,
                    connectWith: !1,
                    containment: !1,
                    cursor: "auto",
                    cursorAt: !1,
                    dropOnEmpty: !0,
                    forcePlaceholderSize: !1,
                    forceHelperSize: !1,
                    grid: !1,
                    handle: !1,
                    helper: "original",
                    items: "> *",
                    opacity: !1,
                    placeholder: !1,
                    revert: !1,
                    scroll: !0,
                    scrollSensitivity: 20,
                    scrollSpeed: 20,
                    scope: "default",
                    tolerance: "intersect",
                    zIndex: 1e3
                },
                _create: function () {
                    var e = this.options;
                    this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.floating = this.items.length ? e.axis === "x" || /left|right/.test(this.items[0].item.css("float")) || /inline|table-cell/.test(this.items[0].item.css("display")) : !1, this.offset = this.element.offset(), this._mouseInit(), this.ready = !0
                },
                destroy: function () {
                    e.Widget.prototype.destroy.call(this), this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
                    for (var t = this.items.length - 1; t >= 0; t--) this.items[t].item.removeData(this.widgetName + "-item");
                    return this
                },
                _setOption: function (t, n) {
                    t === "disabled" ? (this.options[t] = n, this.widget()[n ? "addClass" : "removeClass"]("ui-sortable-disabled")) : e.Widget.prototype._setOption.apply(this, arguments)
                },
                _mouseCapture: function (t, n) {
                    var r = this;
                    if (this.reverting) return !1;
                    if (this.options.disabled || this.options.type == "static") return !1;
                    this._refreshItems(t);
                    var i = null,
                        s = this,
                        o = e(t.target).parents().each(function () {
                            if (e.data(this, r.widgetName + "-item") == s) return i = e(this), !1
                        });
                    e.data(t.target, r.widgetName + "-item") == s && (i = e(t.target));
                    if (!i) return !1;
                    if (this.options.handle && !n) {
                        var u = !1;
                        e(this.options.handle, i).find("*").andSelf().each(function () {
                            this == t.target && (u = !0)
                        });
                        if (!u) return !1
                    }
                    return this.currentItem = i, this._removeCurrentsFromItems(), !0
                },
                _mouseStart: function (t, n, r) {
                    var i = this.options,
                        s = this;
                    this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                        top: this.offset.top - this.margins.top,
                        left: this.offset.left - this.margins.left
                    }, e.extend(this.offset, {
                            click: {
                                left: t.pageX - this.offset.left,
                                top: t.pageY - this.offset.top
                            },
                            parent: this._getParentOffset(),
                            relative: this._getRelativeOffset()
                        }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this.domPosition = {
                        prev: this.currentItem.prev()[0],
                        parent: this.currentItem.parent()[0]
                    }, this.helper[0] != this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), i.containment && this._setContainment(), i.cursor && (e("body").css("cursor") && (this._storedCursor = e("body").css("cursor")), e("body").css("cursor", i.cursor)), i.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", i.opacity)), i.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", i.zIndex)), this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML" && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions();
                    if (!r)
                        for (var o = this.containers.length - 1; o >= 0; o--) this.containers[o]._trigger("activate", t, s._uiHash(this));
                    return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), !0
                },
                _mouseDrag: function (t) {
                    this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs);
                    if (this.options.scroll) {
                        var n = this.options,
                            r = !1;
                        this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML" ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < n.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + n.scrollSpeed : t.pageY - this.overflowOffset.top < n.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - n.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < n.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + n.scrollSpeed : t.pageX - this.overflowOffset.left < n.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - n.scrollSpeed)) : (t.pageY - e(document).scrollTop() < n.scrollSensitivity ? r = e(document).scrollTop(e(document).scrollTop() - n.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < n.scrollSensitivity && (r = e(document).scrollTop(e(document).scrollTop() + n.scrollSpeed)), t.pageX - e(document).scrollLeft() < n.scrollSensitivity ? r = e(document).scrollLeft(e(document).scrollLeft() - n.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < n.scrollSensitivity && (r = e(document).scrollLeft(e(document).scrollLeft() + n.scrollSpeed))), r !== !1 && e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)
                    }
                    this.positionAbs = this._convertPositionTo("absolute");
                    if (!this.options.axis || this.options.axis != "y") this.helper[0].style.left = this.position.left + "px";
                    if (!this.options.axis || this.options.axis != "x") this.helper[0].style.top = this.position.top + "px";
                    for (var i = this.items.length - 1; i >= 0; i--) {
                        var s = this.items[i],
                            o = s.item[0],
                            u = this._intersectsWithPointer(s);
                        if (!u) continue;
                        if (o != this.currentItem[0] && this.placeholder[u == 1 ? "next" : "prev"]()[0] != o && !e.ui.contains(this.placeholder[0], o) && (this.options.type == "semi-dynamic" ? !e.ui.contains(this.element[0], o) : !0)) {
                            this.direction = u == 1 ? "down" : "up";
                            if (this.options.tolerance != "pointer" && !this._intersectsWithSides(s)) break;
                            this._rearrange(t, s), this._trigger("change", t, this._uiHash());
                            break
                        }
                    }
                    return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
                },
                _mouseStop: function (t, n) {
                    if (!t) return;
                    e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t);
                    if (this.options.revert) {
                        var r = this,
                            i = r.placeholder.offset();
                        r.reverting = !0, e(this.helper).animate({
                                left: i.left - this.offset.parent.left - r.margins.left + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollLeft),
                                top: i.top - this.offset.parent.top - r.margins.top + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollTop)
                            }, parseInt(this.options.revert, 10) || 500, function () {
                                r._clear(t)
                            })
                    } else this._clear(t, n);
                    return !1
                },
                cancel: function () {
                    var t = this;
                    if (this.dragging) {
                        this._mouseUp({
                                target: null
                            }), this.options.helper == "original" ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                        for (var n = this.containers.length - 1; n >= 0; n--) this.containers[n]._trigger("deactivate", null, t._uiHash(this)), this.containers[n].containerCache.over && (this.containers[n]._trigger("out", null, t._uiHash(this)), this.containers[n].containerCache.over = 0)
                    }
                    return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.options.helper != "original" && this.helper && this.helper[0].parentNode && this.helper.remove(), e.extend(this, {
                                helper: null,
                                dragging: !1,
                                reverting: !1,
                                _noFinalSort: null
                            }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), this
                },
                serialize: function (t) {
                    var n = this._getItemsAsjQuery(t && t.connected),
                        r = [];
                    return t = t || {}, e(n).each(function () {
                        var n = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[-=_](.+)/);
                        n && r.push((t.key || n[1] + "[]") + "=" + (t.key && t.expression ? n[1] : n[2]))
                    }), !r.length && t.key && r.push(t.key + "="), r.join("&")
                },
                toArray: function (t) {
                    var n = this._getItemsAsjQuery(t && t.connected),
                        r = [];
                    return t = t || {}, n.each(function () {
                        r.push(e(t.item || this).attr(t.attribute || "id") || "")
                    }), r
                },
                _intersectsWith: function (e) {
                    var t = this.positionAbs.left,
                        n = t + this.helperProportions.width,
                        r = this.positionAbs.top,
                        i = r + this.helperProportions.height,
                        s = e.left,
                        o = s + e.width,
                        u = e.top,
                        a = u + e.height,
                        f = this.offset.click.top,
                        l = this.offset.click.left,
                        c = r + f > u && r + f < a && t + l > s && t + l < o;
                    return this.options.tolerance == "pointer" || this.options.forcePointerForContainers || this.options.tolerance != "pointer" && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? c : s < t + this.helperProportions.width / 2 && n - this.helperProportions.width / 2 < o && u < r + this.helperProportions.height / 2 && i - this.helperProportions.height / 2 < a
                },
                _intersectsWithPointer: function (t) {
                    var n = this.options.axis === "x" || e.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, t.top, t.height),
                        r = this.options.axis === "y" || e.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, t.left, t.width),
                        i = n && r,
                        s = this._getDragVerticalDirection(),
                        o = this._getDragHorizontalDirection();
                    return i ? this.floating ? o && o == "right" || s == "down" ? 2 : 1 : s && (s == "down" ? 2 : 1) : !1
                },
                _intersectsWithSides: function (t) {
                    var n = e.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, t.top + t.height / 2, t.height),
                        r = e.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, t.left + t.width / 2, t.width),
                        i = this._getDragVerticalDirection(),
                        s = this._getDragHorizontalDirection();
                    return this.floating && s ? s == "right" && r || s == "left" && !r : i && (i == "down" && n || i == "up" && !n)
                },
                _getDragVerticalDirection: function () {
                    var e = this.positionAbs.top - this.lastPositionAbs.top;
                    return e != 0 && (e > 0 ? "down" : "up")
                },
                _getDragHorizontalDirection: function () {
                    var e = this.positionAbs.left - this.lastPositionAbs.left;
                    return e != 0 && (e > 0 ? "right" : "left")
                },
                refresh: function (e) {
                    return this._refreshItems(e), this.refreshPositions(), this
                },
                _connectWith: function () {
                    var e = this.options;
                    return e.connectWith.constructor == String ? [e.connectWith] : e.connectWith
                },
                _getItemsAsjQuery: function (t) {
                    var n = this,
                        r = [],
                        i = [],
                        s = this._connectWith();
                    if (s && t)
                        for (var o = s.length - 1; o >= 0; o--) {
                            var u = e(s[o]);
                            for (var f = u.length - 1; f >= 0; f--) {
                                var l = e.data(u[f], this.widgetName);
                                l && l != this && !l.options.disabled && i.push([e.isFunction(l.options.items) ? l.options.items.call(l.element) : e(l.options.items, l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), l])
                            }
                    }
                    i.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                                    options: this.options,
                                    item: this.currentItem
                                }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
                    for (var o = i.length - 1; o >= 0; o--) i[o][0].each(function () {
                        r.push(this)
                    });
                    return e(r)
                },
                _removeCurrentsFromItems: function () {
                    var e = this.currentItem.find(":data(" + this.widgetName + "-item)");
                    for (var t = 0; t < this.items.length; t++)
                        for (var n = 0; n < e.length; n++) e[n] == this.items[t].item[0] && this.items.splice(t, 1)
                },
                _refreshItems: function (t) {
                    this.items = [], this.containers = [this];
                    var n = this.items,
                        r = this,
                        i = [
                            [e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                                        item: this.currentItem
                                    }) : e(this.options.items, this.element), this]
                        ],
                        s = this._connectWith();
                    if (s && this.ready)
                        for (var o = s.length - 1; o >= 0; o--) {
                            var u = e(s[o]);
                            for (var f = u.length - 1; f >= 0; f--) {
                                var l = e.data(u[f], this.widgetName);
                                l && l != this && !l.options.disabled && (i.push([e.isFunction(l.options.items) ? l.options.items.call(l.element[0], t, {
                                                    item: this.currentItem
                                                }) : e(l.options.items, l.element), l]), this.containers.push(l))
                            }
                    }
                    for (var o = i.length - 1; o >= 0; o--) {
                        var c = i[o][1],
                            h = i[o][0];
                        for (var f = 0, p = h.length; f < p; f++) {
                            var d = e(h[f]);
                            d.data(this.widgetName + "-item", c), n.push({
                                    item: d,
                                    instance: c,
                                    width: 0,
                                    height: 0,
                                    left: 0,
                                    top: 0
                                })
                        }
                    }
                },
                refreshPositions: function (t) {
                    this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
                    for (var n = this.items.length - 1; n >= 0; n--) {
                        var r = this.items[n];
                        if (r.instance != this.currentContainer && this.currentContainer && r.item[0] != this.currentItem[0]) continue;
                        var i = this.options.toleranceElement ? e(this.options.toleranceElement, r.item) : r.item;
                        t || (r.width = i.outerWidth(), r.height = i.outerHeight());
                        var s = i.offset();
                        r.left = s.left, r.top = s.top
                    }
                    if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this);
                    else
                        for (var n = this.containers.length - 1; n >= 0; n--) {
                            var s = this.containers[n].element.offset();
                            this.containers[n].containerCache.left = s.left, this.containers[n].containerCache.top = s.top, this.containers[n].containerCache.width = this.containers[n].element.outerWidth(), this.containers[n].containerCache.height = this.containers[n].element.outerHeight()
                    }
                    return this
                },
                _createPlaceholder: function (t) {
                    var n = t || this,
                        r = n.options;
                    if (!r.placeholder || r.placeholder.constructor == String) {
                        var i = r.placeholder;
                        r.placeholder = {
                            element: function () {
                                var t = e(document.createElement(n.currentItem[0].nodeName)).addClass(i || n.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
                                return i || (t.style.visibility = "hidden"), t
                            },
                            update: function (e, t) {
                                if (i && !r.forcePlaceholderSize) return;
                                t.height() || t.height(n.currentItem.innerHeight() - parseInt(n.currentItem.css("paddingTop") || 0, 10) - parseInt(n.currentItem.css("paddingBottom") || 0, 10)), t.width() || t.width(n.currentItem.innerWidth() - parseInt(n.currentItem.css("paddingLeft") || 0, 10) - parseInt(n.currentItem.css("paddingRight") || 0, 10))
                            }
                        }
                    }
                    n.placeholder = e(r.placeholder.element.call(n.element, n.currentItem)), n.currentItem.after(n.placeholder), r.placeholder.update(n, n.placeholder)
                },
                _contactContainers: function (t) {
                    var n = null,
                        r = null;
                    for (var i = this.containers.length - 1; i >= 0; i--) {
                        if (e.ui.contains(this.currentItem[0], this.containers[i].element[0])) continue;
                        if (this._intersectsWith(this.containers[i].containerCache)) {
                            if (n && e.ui.contains(this.containers[i].element[0], n.element[0])) continue;
                            n = this.containers[i], r = i
                        } else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", t, this._uiHash(this)), this.containers[i].containerCache.over = 0)
                    }
                    if (!n) return;
                    if (this.containers.length === 1) this.containers[r]._trigger("over", t, this._uiHash(this)), this.containers[r].containerCache.over = 1;
                    else if (this.currentContainer != this.containers[r]) {
                        var s = 1e4,
                            o = null,
                            u = this.positionAbs[this.containers[r].floating ? "left" : "top"];
                        for (var f = this.items.length - 1; f >= 0; f--) {
                            if (!e.ui.contains(this.containers[r].element[0], this.items[f].item[0])) continue;
                            var l = this.containers[r].floating ? this.items[f].item.offset().left : this.items[f].item.offset().top;
                            Math.abs(l - u) < s && (s = Math.abs(l - u), o = this.items[f], this.direction = l - u > 0 ? "down" : "up")
                        }
                        if (!o && !this.options.dropOnEmpty) return;
                        this.currentContainer = this.containers[r], o ? this._rearrange(t, o, null, !0) : this._rearrange(t, null, this.containers[r].element, !0), this._trigger("change", t, this._uiHash()), this.containers[r]._trigger("change", t, this._uiHash(this)), this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[r]._trigger("over", t, this._uiHash(this)), this.containers[r].containerCache.over = 1
                    }
                },
                _createHelper: function (t) {
                    var n = this.options,
                        r = e.isFunction(n.helper) ? e(n.helper.apply(this.element[0], [t, this.currentItem])) : n.helper == "clone" ? this.currentItem.clone() : this.currentItem;
                    return r.parents("body").length || e(n.appendTo != "parent" ? n.appendTo : this.currentItem[0].parentNode)[0].appendChild(r[0]), r[0] == this.currentItem[0] && (this._storedCSS = {
                            width: this.currentItem[0].style.width,
                            height: this.currentItem[0].style.height,
                            position: this.currentItem.css("position"),
                            top: this.currentItem.css("top"),
                            left: this.currentItem.css("left")
                        }), (r[0].style.width == "" || n.forceHelperSize) && r.width(this.currentItem.width()), (r[0].style.height == "" || n.forceHelperSize) && r.height(this.currentItem.height()), r
                },
                _adjustOffsetFromHelper: function (t) {
                    typeof t == "string" && (t = t.split(" ")), e.isArray(t) && (t = {
                            left: +t[0],
                            top: +t[1] || 0
                        }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
                },
                _getParentOffset: function () {
                    this.offsetParent = this.helper.offsetParent();
                    var t = this.offsetParent.offset();
                    this.cssPosition == "absolute" && this.scrollParent[0] != document && e.ui.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop());
                    if (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == "html" && e.browser.msie) t = {
                        top: 0,
                        left: 0
                    };
                    return {
                        top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                        left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                    }
                },
                _getRelativeOffset: function () {
                    if (this.cssPosition == "relative") {
                        var e = this.currentItem.position();
                        return {
                            top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                            left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                        }
                    }
                    return {
                        top: 0,
                        left: 0
                    }
                },
                _cacheMargins: function () {
                    this.margins = {
                        left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                        top: parseInt(this.currentItem.css("marginTop"), 10) || 0
                    }
                },
                _cacheHelperProportions: function () {
                    this.helperProportions = {
                        width: this.helper.outerWidth(),
                        height: this.helper.outerHeight()
                    }
                },
                _setContainment: function () {
                    var t = this.options;
                    t.containment == "parent" && (t.containment = this.helper[0].parentNode);
                    if (t.containment == "document" || t.containment == "window") this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e(t.containment == "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (e(t.containment == "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                    if (!/^(document|window|parent)$/.test(t.containment)) {
                        var n = e(t.containment)[0],
                            r = e(t.containment).offset(),
                            i = e(n).css("overflow") != "hidden";
                        this.containment = [r.left + (parseInt(e(n).css("borderLeftWidth"), 10) || 0) + (parseInt(e(n).css("paddingLeft"), 10) || 0) - this.margins.left, r.top + (parseInt(e(n).css("borderTopWidth"), 10) || 0) + (parseInt(e(n).css("paddingTop"), 10) || 0) - this.margins.top, r.left + (i ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(e(n).css("borderLeftWidth"), 10) || 0) - (parseInt(e(n).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, r.top + (i ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(e(n).css("borderTopWidth"), 10) || 0) - (parseInt(e(n).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top]
                    }
                },
                _convertPositionTo: function (t, n) {
                    n || (n = this.position);
                    var r = t == "absolute" ? 1 : -1,
                        i = this.options,
                        s = this.cssPosition != "absolute" || this.scrollParent[0] != document && !! e.ui.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                        o = /(html|body)/i.test(s[0].tagName);
                    return {
                        top: n.top + this.offset.relative.top * r + this.offset.parent.top * r - (e.browser.safari && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : o ? 0 : s.scrollTop()) * r),
                        left: n.left + this.offset.relative.left * r + this.offset.parent.left * r - (e.browser.safari && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : o ? 0 : s.scrollLeft()) * r)
                    }
                },
                _generatePosition: function (t) {
                    var n = this.options,
                        r = this.cssPosition != "absolute" || this.scrollParent[0] != document && !! e.ui.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                        i = /(html|body)/i.test(r[0].tagName);
                    this.cssPosition == "relative" && (this.scrollParent[0] == document || this.scrollParent[0] == this.offsetParent[0]) && (this.offset.relative = this._getRelativeOffset());
                    var s = t.pageX,
                        o = t.pageY;
                    if (this.originalPosition) {
                        this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (s = this.containment[0] + this.offset.click.left), t.pageY - this.offset.click.top < this.containment[1] && (o = this.containment[1] + this.offset.click.top), t.pageX - this.offset.click.left > this.containment[2] && (s = this.containment[2] + this.offset.click.left), t.pageY - this.offset.click.top > this.containment[3] && (o = this.containment[3] + this.offset.click.top));
                        if (n.grid) {
                            var u = this.originalPageY + Math.round((o - this.originalPageY) / n.grid[1]) * n.grid[1];
                            o = this.containment ? u - this.offset.click.top < this.containment[1] || u - this.offset.click.top > this.containment[3] ? u - this.offset.click.top < this.containment[1] ? u + n.grid[1] : u - n.grid[1] : u : u;
                            var f = this.originalPageX + Math.round((s - this.originalPageX) / n.grid[0]) * n.grid[0];
                            s = this.containment ? f - this.offset.click.left < this.containment[0] || f - this.offset.click.left > this.containment[2] ? f - this.offset.click.left < this.containment[0] ? f + n.grid[0] : f - n.grid[0] : f : f
                        }
                    }
                    return {
                        top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (e.browser.safari && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : i ? 0 : r.scrollTop()),
                        left: s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (e.browser.safari && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : i ? 0 : r.scrollLeft())
                    }
                },
                _rearrange: function (e, t, n, r) {
                    n ? n[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], this.direction == "down" ? t.item[0] : t.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
                    var i = this,
                        s = this.counter;
                    window.setTimeout(function () {
                        s == i.counter && i.refreshPositions(!r)
                    }, 0)
                },
                _clear: function (t, n) {
                    this.reverting = !1;
                    var r = [],
                        i = this;
                    !this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null;
                    if (this.helper[0] == this.currentItem[0]) {
                        for (var s in this._storedCSS)
                            if (this._storedCSS[s] == "auto" || this._storedCSS[s] == "static") this._storedCSS[s] = "";
                        this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
                    } else this.currentItem.show();
                    this.fromOutside && !n && r.push(function (e) {
                        this._trigger("receive", e, this._uiHash(this.fromOutside))
                    }), (this.fromOutside || this.domPosition.prev != this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent != this.currentItem.parent()[0]) && !n && r.push(function (e) {
                        this._trigger("update", e, this._uiHash())
                    });
                    if (!e.ui.contains(this.element[0], this.currentItem[0])) {
                        n || r.push(function (e) {
                            this._trigger("remove", e, this._uiHash())
                        });
                        for (var s = this.containers.length - 1; s >= 0; s--) e.ui.contains(this.containers[s].element[0], this.currentItem[0]) && !n && (r.push(function (e) {
                                    return function (t) {
                                        e._trigger("receive", t, this._uiHash(this))
                                    }
                                }.call(this, this.containers[s])), r.push(function (e) {
                                    return function (t) {
                                        e._trigger("update", t, this._uiHash(this))
                                    }
                                }.call(this, this.containers[s])))
                    }
                    for (var s = this.containers.length - 1; s >= 0; s--) n || r.push(function (e) {
                        return function (t) {
                            e._trigger("deactivate", t, this._uiHash(this))
                        }
                    }.call(this, this.containers[s])), this.containers[s].containerCache.over && (r.push(function (e) {
                                return function (t) {
                                    e._trigger("out", t, this._uiHash(this))
                                }
                            }.call(this, this.containers[s])), this.containers[s].containerCache.over = 0);
                    this._storedCursor && e("body").css("cursor", this._storedCursor), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", this._storedZIndex == "auto" ? "" : this._storedZIndex), this.dragging = !1;
                    if (this.cancelHelperRemoval) {
                        if (!n) {
                            this._trigger("beforeStop", t, this._uiHash());
                            for (var s = 0; s < r.length; s++) r[s].call(this, t);
                            this._trigger("stop", t, this._uiHash())
                        }
                        return !1
                    }
                    n || this._trigger("beforeStop", t, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.helper[0] != this.currentItem[0] && this.helper.remove(), this.helper = null;
                    if (!n) {
                        for (var s = 0; s < r.length; s++) r[s].call(this, t);
                        this._trigger("stop", t, this._uiHash())
                    }
                    return this.fromOutside = !1, !0
                },
                _trigger: function () {
                    e.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
                },
                _uiHash: function (t) {
                    var n = t || this;
                    return {
                        helper: n.helper,
                        placeholder: n.placeholder || e([]),
                        position: n.position,
                        originalPosition: n.originalPosition,
                        offset: n.positionAbs,
                        item: n.currentItem,
                        sender: t ? t.element : null
                    }
                }
            }), e.extend(e.ui.sortable, {
                version: "1.8.21"
            })
    }(jQuery),
    function (e, t) {
        var n = 0;
        e.widget("ui.autocomplete", {
                options: {
                    appendTo: "body",
                    autoFocus: !1,
                    delay: 300,
                    minLength: 1,
                    position: {
                        my: "left top",
                        at: "left bottom",
                        collision: "none"
                    },
                    source: null
                },
                pending: 0,
                _create: function () {
                    var t = this,
                        n = this.element[0].ownerDocument,
                        r;
                    this.isMultiLine = this.element.is("textarea"), this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off").attr({
                            role: "textbox",
                            "aria-autocomplete": "list",
                            "aria-haspopup": "true"
                        }).bind("keydown.autocomplete", function (n) {
                            if (t.options.disabled || t.element.propAttr("readOnly")) return;
                            r = !1;
                            var i = e.ui.keyCode;
                            switch (n.keyCode) {
                            case i.PAGE_UP:
                                t._move("previousPage", n);
                                break;
                            case i.PAGE_DOWN:
                                t._move("nextPage", n);
                                break;
                            case i.UP:
                                t._keyEvent("previous", n);
                                break;
                            case i.DOWN:
                                t._keyEvent("next", n);
                                break;
                            case i.ENTER:
                            case i.NUMPAD_ENTER:
                                t.menu.active && (r = !0, n.preventDefault());
                            case i.TAB:
                                if (!t.menu.active) return;
                                t.menu.select(n);
                                break;
                            case i.ESCAPE:
                                t.element.val(t.term), t.close(n);
                                break;
                            default:
                                clearTimeout(t.searching), t.searching = setTimeout(function () {
                                    t.term != t.element.val() && (t.selectedItem = null, t.search(null, n))
                                }, t.options.delay)
                            }
                        }).bind("keypress.autocomplete", function (e) {
                            r && (r = !1, e.preventDefault())
                        }).bind("focus.autocomplete", function () {
                            if (t.options.disabled) return;
                            t.selectedItem = null, t.previous = t.element.val()
                        }).bind("blur.autocomplete", function (e) {
                            if (t.options.disabled) return;
                            clearTimeout(t.searching), t.closing = setTimeout(function () {
                                t.close(e), t._change(e)
                            }, 150)
                        }), this._initSource(), this.menu = e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo || "body", n)[0]).mousedown(function (n) {
                            var r = t.menu.element[0];
                            e(n.target).closest(".ui-menu-item").length || setTimeout(function () {
                                e(document).one("mousedown", function (n) {
                                    n.target !== t.element[0] && n.target !== r && !e.ui.contains(r, n.target) && t.close()
                                })
                            }, 1), setTimeout(function () {
                                clearTimeout(t.closing)
                            }, 13)
                        }).menu({
                            focus: function (e, n) {
                                var r = n.item.data("item.autocomplete");
                                !1 !== t._trigger("focus", e, {
                                        item: r
                                    }) && /^key/.test(e.originalEvent.type) && t.element.val(r.value)
                            },
                            selected: function (e, r) {
                                var i = r.item.data("item.autocomplete"),
                                    s = t.previous;
                                t.element[0] !== n.activeElement && (t.element.focus(), t.previous = s, setTimeout(function () {
                                            t.previous = s, t.selectedItem = i
                                        }, 1)), !1 !== t._trigger("select", e, {
                                        item: i
                                    }) && t.element.val(i.value), t.term = t.element.val(), t.close(e), t.selectedItem = i
                            },
                            blur: function (e, n) {
                                t.menu.element.is(":visible") && t.element.val() !== t.term && t.element.val(t.term)
                            }
                        }).zIndex(this.element.zIndex() + 1).css({
                            top: 0,
                            left: 0
                        }).hide().data("menu"), e.fn.bgiframe && this.menu.element.bgiframe(), t.beforeunloadHandler = function () {
                        t.element.removeAttr("autocomplete")
                    }, e(window).bind("beforeunload", t.beforeunloadHandler)
                },
                destroy: function () {
                    this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"), this.menu.element.remove(), e(window).unbind("beforeunload", this.beforeunloadHandler), e.Widget.prototype.destroy.call(this)
                },
                _setOption: function (t, n) {
                    e.Widget.prototype._setOption.apply(this, arguments), t === "source" && this._initSource(), t === "appendTo" && this.menu.element.appendTo(e(n || "body", this.element[0].ownerDocument)[0]), t === "disabled" && n && this.xhr && this.xhr.abort()
                },
                _initSource: function () {
                    var t = this,
                        n, r;
                    e.isArray(this.options.source) ? (n = this.options.source, this.source = function (t, r) {
                        r(e.ui.autocomplete.filter(n, t.term))
                    }) : typeof this.options.source == "string" ? (r = this.options.source, this.source = function (n, i) {
                        t.xhr && t.xhr.abort(), t.xhr = e.ajax({
                                url: r,
                                data: n,
                                dataType: "json",
                                success: function (e, t) {
                                    i(e)
                                },
                                error: function () {
                                    i([])
                                }
                            })
                    }) : this.source = this.options.source
                },
                search: function (e, t) {
                    e = e != null ? e : this.element.val(), this.term = this.element.val();
                    if (e.length < this.options.minLength) return this.close(t);
                    clearTimeout(this.closing);
                    if (this._trigger("search", t) === !1) return;
                    return this._search(e)
                },
                _search: function (e) {
                    this.pending++, this.element.addClass("ui-autocomplete-loading"), this.source({
                            term: e
                        }, this._response())
                },
                _response: function () {
                    var e = this,
                        t = ++n;
                    return function (r) {
                        t === n && e.__response(r), e.pending--, e.pending || e.element.removeClass("ui-autocomplete-loading")
                    }
                },
                __response: function (e) {
                    !this.options.disabled && e && e.length ? (e = this._normalize(e), this._suggest(e), this._trigger("open")) : this.close()
                },
                close: function (e) {
                    clearTimeout(this.closing), this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.deactivate(), this._trigger("close", e))
                },
                _change: function (e) {
                    this.previous !== this.element.val() && this._trigger("change", e, {
                            item: this.selectedItem
                        })
                },
                _normalize: function (t) {
                    return t.length && t[0].label && t[0].value ? t : e.map(t, function (t) {
                        return typeof t == "string" ? {
                            label: t,
                            value: t
                        } : e.extend({
                                label: t.label || t.value,
                                value: t.value || t.label
                            }, t)
                    })
                },
                _suggest: function (t) {
                    var n = this.menu.element.empty().zIndex(this.element.zIndex() + 1);
                    this._renderMenu(n, t), this.menu.deactivate(), this.menu.refresh(), n.show(), this._resizeMenu(), n.position(e.extend({
                                of: this.element
                            }, this.options.position)), this.options.autoFocus && this.menu.next(new e.Event("mouseover"))
                },
                _resizeMenu: function () {
                    var e = this.menu.element;
                    e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()))
                },
                _renderMenu: function (t, n) {
                    var r = this;
                    e.each(n, function (e, n) {
                        r._renderItem(t, n)
                    })
                },
                _renderItem: function (t, n) {
                    return e("<li></li>").data("item.autocomplete", n).append(e("<a></a>").text(n.label)).appendTo(t)
                },
                _move: function (e, t) {
                    if (!this.menu.element.is(":visible")) {
                        this.search(null, t);
                        return
                    }
                    if (this.menu.first() && /^previous/.test(e) || this.menu.last() && /^next/.test(e)) {
                        this.element.val(this.term), this.menu.deactivate();
                        return
                    }
                    this.menu[e](t)
                },
                widget: function () {
                    return this.menu.element
                },
                _keyEvent: function (e, t) {
                    if (!this.isMultiLine || this.menu.element.is(":visible")) this._move(e, t), t.preventDefault()
                }
            }), e.extend(e.ui.autocomplete, {
                escapeRegex: function (e) {
                    return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")
                },
                filter: function (t, n) {
                    var r = new RegExp(e.ui.autocomplete.escapeRegex(n), "i");
                    return e.grep(t, function (e) {
                        return r.test(e.label || e.value || e)
                    })
                }
            })
    }(jQuery),
    function (e) {
        e.widget("ui.menu", {
                _create: function () {
                    var t = this;
                    this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({
                            role: "listbox",
                            "aria-activedescendant": "ui-active-menuitem"
                        }).click(function (n) {
                            if (!e(n.target).closest(".ui-menu-item a").length) return;
                            n.preventDefault(), t.select(n)
                        }), this.refresh()
                },
                refresh: function () {
                    var t = this,
                        n = this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "menuitem");
                    n.children("a").addClass("ui-corner-all").attr("tabindex", -1).mouseenter(function (n) {
                        t.activate(n, e(this).parent())
                    }).mouseleave(function () {
                        t.deactivate()
                    })
                },
                activate: function (e, t) {
                    this.deactivate();
                    if (this.hasScroll()) {
                        var n = t.offset().top - this.element.offset().top,
                            r = this.element.scrollTop(),
                            i = this.element.height();
                        n < 0 ? this.element.scrollTop(r + n) : n >= i && this.element.scrollTop(r + n - i + t.height())
                    }
                    this.active = t.eq(0).children("a").addClass("ui-state-hover").attr("id", "ui-active-menuitem").end(), this._trigger("focus", e, {
                            item: t
                        })
                },
                deactivate: function () {
                    if (!this.active) return;
                    this.active.children("a").removeClass("ui-state-hover").removeAttr("id"), this._trigger("blur"), this.active = null
                },
                next: function (e) {
                    this.move("next", ".ui-menu-item:first", e)
                },
                previous: function (e) {
                    this.move("prev", ".ui-menu-item:last", e)
                },
                first: function () {
                    return this.active && !this.active.prevAll(".ui-menu-item").length
                },
                last: function () {
                    return this.active && !this.active.nextAll(".ui-menu-item").length
                },
                move: function (e, t, n) {
                    if (!this.active) {
                        this.activate(n, this.element.children(t));
                        return
                    }
                    var r = this.active[e + "All"](".ui-menu-item").eq(0);
                    r.length ? this.activate(n, r) : this.activate(n, this.element.children(t))
                },
                nextPage: function (t) {
                    if (this.hasScroll()) {
                        if (!this.active || this.last()) {
                            this.activate(t, this.element.children(".ui-menu-item:first"));
                            return
                        }
                        var n = this.active.offset().top,
                            r = this.element.height(),
                            i = this.element.children(".ui-menu-item").filter(function () {
                                var t = e(this).offset().top - n - r + e(this).height();
                                return t < 10 && t > -10
                            });
                        i.length || (i = this.element.children(".ui-menu-item:last")), this.activate(t, i)
                    } else this.activate(t, this.element.children(".ui-menu-item").filter(!this.active || this.last() ? ":first" : ":last"))
                },
                previousPage: function (t) {
                    if (this.hasScroll()) {
                        if (!this.active || this.first()) {
                            this.activate(t, this.element.children(".ui-menu-item:last"));
                            return
                        }
                        var n = this.active.offset().top,
                            r = this.element.height(),
                            i = this.element.children(".ui-menu-item").filter(function () {
                                var t = e(this).offset().top - n + r - e(this).height();
                                return t < 10 && t > -10
                            });
                        i.length || (i = this.element.children(".ui-menu-item:first")), this.activate(t, i)
                    } else this.activate(t, this.element.children(".ui-menu-item").filter(!this.active || this.first() ? ":last" : ":first"))
                },
                hasScroll: function () {
                    return this.element.height() < this.element[e.fn.prop ? "prop" : "attr"]("scrollHeight")
                },
                select: function (e) {
                    this._trigger("selected", e, {
                            item: this.active
                        })
                }
            })
    }(jQuery),
    function ($, undefined) {
        function Datepicker() {
            this.debug = !1, this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
                closeText: "Done",
                prevText: "Prev",
                nextText: "Next",
                currentText: "Today",
                monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
                weekHeader: "Wk",
                dateFormat: "mm/dd/yy",
                firstDay: 0,
                isRTL: !1,
                showMonthAfterYear: !1,
                yearSuffix: ""
            }, this._defaults = {
                showOn: "focus",
                showAnim: "fadeIn",
                showOptions: {},
                defaultDate: null,
                appendText: "",
                buttonText: "...",
                buttonImage: "",
                buttonImageOnly: !1,
                hideIfNoPrevNext: !1,
                navigationAsDateFormat: !1,
                gotoCurrent: !1,
                changeMonth: !1,
                changeYear: !1,
                yearRange: "c-10:c+10",
                showOtherMonths: !1,
                selectOtherMonths: !1,
                showWeek: !1,
                calculateWeek: this.iso8601Week,
                shortYearCutoff: "+10",
                minDate: null,
                maxDate: null,
                duration: "fast",
                beforeShowDay: null,
                beforeShow: null,
                onSelect: null,
                onChangeMonthYear: null,
                onClose: null,
                numberOfMonths: 1,
                showCurrentAtPos: 0,
                stepMonths: 1,
                stepBigMonths: 12,
                altField: "",
                altFormat: "",
                constrainInput: !0,
                showButtonPanel: !1,
                autoSize: !1,
                disabled: !1
            }, $.extend(this._defaults, this.regional[""]), this.dpDiv = bindHover($('<div id="' + this._mainDivId + '" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))
        }

        function bindHover(e) {
            var t = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
            return e.bind("mouseout", function (e) {
                var n = $(e.target).closest(t);
                if (!n.length) return;
                n.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")
            }).bind("mouseover", function (n) {
                var r = $(n.target).closest(t);
                if ($.datepicker._isDisabledDatepicker(instActive.inline ? e.parent()[0] : instActive.input[0]) || !r.length) return;
                r.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), r.addClass("ui-state-hover"), r.hasClass("ui-datepicker-prev") && r.addClass("ui-datepicker-prev-hover"), r.hasClass("ui-datepicker-next") && r.addClass("ui-datepicker-next-hover")
            })
        }

        function extendRemove(e, t) {
            $.extend(e, t);
            for (var n in t)
                if (t[n] == null || t[n] == undefined) e[n] = t[n];
            return e
        }

        function isArray(e) {
            return e && ($.browser.safari && typeof e == "object" && e.length || e.constructor && e.constructor.toString().match(/\Array\(\)/))
        }
        $.extend($.ui, {
                datepicker: {
                    version: "1.8.21"
                }
            });
        var PROP_NAME = "datepicker",
            dpuuid = (new Date).getTime(),
            instActive;
        $.extend(Datepicker.prototype, {
                markerClassName: "hasDatepicker",
                maxRows: 4,
                log: function () {
                    this.debug && console.log.apply("", arguments)
                },
                _widgetDatepicker: function () {
                    return this.dpDiv
                },
                setDefaults: function (e) {
                    return extendRemove(this._defaults, e || {}), this
                },
                _attachDatepicker: function (target, settings) {
                    var inlineSettings = null;
                    for (var attrName in this._defaults) {
                        var attrValue = target.getAttribute("date:" + attrName);
                        if (attrValue) {
                            inlineSettings = inlineSettings || {};
                            try {
                                inlineSettings[attrName] = eval(attrValue)
                            } catch (err) {
                                inlineSettings[attrName] = attrValue
                            }
                        }
                    }
                    var nodeName = target.nodeName.toLowerCase(),
                        inline = nodeName == "div" || nodeName == "span";
                    target.id || (this.uuid += 1, target.id = "dp" + this.uuid);
                    var inst = this._newInst($(target), inline);
                    inst.settings = $.extend({}, settings || {}, inlineSettings || {}), nodeName == "input" ? this._connectDatepicker(target, inst) : inline && this._inlineDatepicker(target, inst)
                },
                _newInst: function (e, t) {
                    var n = e[0].id.replace(/([^A-Za-z0-9_-])/g, "\\\\$1");
                    return {
                        id: n,
                        input: e,
                        selectedDay: 0,
                        selectedMonth: 0,
                        selectedYear: 0,
                        drawMonth: 0,
                        drawYear: 0,
                        inline: t,
                        dpDiv: t ? bindHover($('<div class="' + this._inlineClass + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')) : this.dpDiv
                    }
                },
                _connectDatepicker: function (e, t) {
                    var n = $(e);
                    t.append = $([]), t.trigger = $([]);
                    if (n.hasClass(this.markerClassName)) return;
                    this._attachments(n, t), n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker", function (e, n, r) {
                        t.settings[n] = r
                    }).bind("getData.datepicker", function (e, n) {
                        return this._get(t, n)
                    }), this._autoSize(t), $.data(e, PROP_NAME, t), t.settings.disabled && this._disableDatepicker(e)
                },
                _attachments: function (e, t) {
                    var n = this._get(t, "appendText"),
                        r = this._get(t, "isRTL");
                    t.append && t.append.remove(), n && (t.append = $('<span class="' + this._appendClass + '">' + n + "</span>"), e[r ? "before" : "after"](t.append)), e.unbind("focus", this._showDatepicker), t.trigger && t.trigger.remove();
                    var i = this._get(t, "showOn");
                    (i == "focus" || i == "both") && e.focus(this._showDatepicker);
                    if (i == "button" || i == "both") {
                        var s = this._get(t, "buttonText"),
                            o = this._get(t, "buttonImage");
                        t.trigger = $(this._get(t, "buttonImageOnly") ? $("<img/>").addClass(this._triggerClass).attr({
                                    src: o,
                                    alt: s,
                                    title: s
                                }) : $('<button type="button"></button>').addClass(this._triggerClass).html(o == "" ? s : $("<img/>").attr({
                                        src: o,
                                        alt: s,
                                        title: s
                                    }))), e[r ? "before" : "after"](t.trigger), t.trigger.click(function () {
                                return $.datepicker._datepickerShowing && $.datepicker._lastInput == e[0] ? $.datepicker._hideDatepicker() : $.datepicker._datepickerShowing && $.datepicker._lastInput != e[0] ? ($.datepicker._hideDatepicker(), $.datepicker._showDatepicker(e[0])) : $.datepicker._showDatepicker(e[0]), !1
                            })
                    }
                },
                _autoSize: function (e) {
                    if (this._get(e, "autoSize") && !e.inline) {
                        var t = new Date(2009, 11, 20),
                            n = this._get(e, "dateFormat");
                        if (n.match(/[DM]/)) {
                            var r = function (e) {
                                var t = 0,
                                    n = 0;
                                for (var r = 0; r < e.length; r++) e[r].length > t && (t = e[r].length, n = r);
                                return n
                            };
                            t.setMonth(r(this._get(e, n.match(/MM/) ? "monthNames" : "monthNamesShort"))), t.setDate(r(this._get(e, n.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - t.getDay())
                        }
                        e.input.attr("size", this._formatDate(e, t).length)
                    }
                },
                _inlineDatepicker: function (e, t) {
                    var n = $(e);
                    if (n.hasClass(this.markerClassName)) return;
                    n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker", function (e, n, r) {
                        t.settings[n] = r
                    }).bind("getData.datepicker", function (e, n) {
                        return this._get(t, n)
                    }), $.data(e, PROP_NAME, t), this._setDate(t, this._getDefaultDate(t), !0), this._updateDatepicker(t), this._updateAlternate(t), t.settings.disabled && this._disableDatepicker(e), t.dpDiv.css("display", "block")
                },
                _dialogDatepicker: function (e, t, n, r, i) {
                    var s = this._dialogInst;
                    if (!s) {
                        this.uuid += 1;
                        var o = "dp" + this.uuid;
                        this._dialogInput = $('<input type="text" id="' + o + '" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'), this._dialogInput.keydown(this._doKeyDown), $("body").append(this._dialogInput), s = this._dialogInst = this._newInst(this._dialogInput, !1), s.settings = {}, $.data(this._dialogInput[0], PROP_NAME, s)
                    }
                    extendRemove(s.settings, r || {}), t = t && t.constructor == Date ? this._formatDate(s, t) : t, this._dialogInput.val(t), this._pos = i ? i.length ? i : [i.pageX, i.pageY] : null;
                    if (!this._pos) {
                        var u = document.documentElement.clientWidth,
                            a = document.documentElement.clientHeight,
                            f = document.documentElement.scrollLeft || document.body.scrollLeft,
                            l = document.documentElement.scrollTop || document.body.scrollTop;
                        this._pos = [u / 2 - 100 + f, a / 2 - 150 + l]
                    }
                    return this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), s.settings.onSelect = n, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), $.blockUI && $.blockUI(this.dpDiv), $.data(this._dialogInput[0], PROP_NAME, s), this
                },
                _destroyDatepicker: function (e) {
                    var t = $(e),
                        n = $.data(e, PROP_NAME);
                    if (!t.hasClass(this.markerClassName)) return;
                    var r = e.nodeName.toLowerCase();
                    $.removeData(e, PROP_NAME), r == "input" ? (n.append.remove(), n.trigger.remove(), t.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : (r == "div" || r == "span") && t.removeClass(this.markerClassName).empty()
                },
                _enableDatepicker: function (e) {
                    var t = $(e),
                        n = $.data(e, PROP_NAME);
                    if (!t.hasClass(this.markerClassName)) return;
                    var r = e.nodeName.toLowerCase();
                    if (r == "input") e.disabled = !1, n.trigger.filter("button").each(function () {
                        this.disabled = !1
                    }).end().filter("img").css({
                            opacity: "1.0",
                            cursor: ""
                        });
                    else if (r == "div" || r == "span") {
                        var i = t.children("." + this._inlineClass);
                        i.children().removeClass("ui-state-disabled"), i.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")
                    }
                    this._disabledInputs = $.map(this._disabledInputs, function (t) {
                        return t == e ? null : t
                    })
                },
                _disableDatepicker: function (e) {
                    var t = $(e),
                        n = $.data(e, PROP_NAME);
                    if (!t.hasClass(this.markerClassName)) return;
                    var r = e.nodeName.toLowerCase();
                    if (r == "input") e.disabled = !0, n.trigger.filter("button").each(function () {
                        this.disabled = !0
                    }).end().filter("img").css({
                            opacity: "0.5",
                            cursor: "default"
                        });
                    else if (r == "div" || r == "span") {
                        var i = t.children("." + this._inlineClass);
                        i.children().addClass("ui-state-disabled"), i.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled", "disabled")
                    }
                    this._disabledInputs = $.map(this._disabledInputs, function (t) {
                        return t == e ? null : t
                    }), this._disabledInputs[this._disabledInputs.length] = e
                },
                _isDisabledDatepicker: function (e) {
                    if (!e) return !1;
                    for (var t = 0; t < this._disabledInputs.length; t++)
                        if (this._disabledInputs[t] == e) return !0;
                    return !1
                },
                _getInst: function (e) {
                    try {
                        return $.data(e, PROP_NAME)
                    } catch (t) {
                        throw "Missing instance data for this datepicker"
                    }
                },
                _optionDatepicker: function (e, t, n) {
                    var r = this._getInst(e);
                    if (arguments.length == 2 && typeof t == "string") return t == "defaults" ? $.extend({}, $.datepicker._defaults) : r ? t == "all" ? $.extend({}, r.settings) : this._get(r, t) : null;
                    var i = t || {};
                    typeof t == "string" && (i = {}, i[t] = n);
                    if (r) {
                        this._curInst == r && this._hideDatepicker();
                        var s = this._getDateDatepicker(e, !0),
                            o = this._getMinMaxDate(r, "min"),
                            u = this._getMinMaxDate(r, "max");
                        extendRemove(r.settings, i), o !== null && i.dateFormat !== undefined && i.minDate === undefined && (r.settings.minDate = this._formatDate(r, o)), u !== null && i.dateFormat !== undefined && i.maxDate === undefined && (r.settings.maxDate = this._formatDate(r, u)), this._attachments($(e), r), this._autoSize(r), this._setDate(r, s), this._updateAlternate(r), this._updateDatepicker(r)
                    }
                },
                _changeDatepicker: function (e, t, n) {
                    this._optionDatepicker(e, t, n)
                },
                _refreshDatepicker: function (e) {
                    var t = this._getInst(e);
                    t && this._updateDatepicker(t)
                },
                _setDateDatepicker: function (e, t) {
                    var n = this._getInst(e);
                    n && (this._setDate(n, t), this._updateDatepicker(n), this._updateAlternate(n))
                },
                _getDateDatepicker: function (e, t) {
                    var n = this._getInst(e);
                    return n && !n.inline && this._setDateFromField(n, t), n ? this._getDate(n) : null
                },
                _doKeyDown: function (e) {
                    var t = $.datepicker._getInst(e.target),
                        n = !0,
                        r = t.dpDiv.is(".ui-datepicker-rtl");
                    t._keyEvent = !0;
                    if ($.datepicker._datepickerShowing) switch (e.keyCode) {
                    case 9:
                        $.datepicker._hideDatepicker(), n = !1;
                        break;
                    case 13:
                        var i = $("td." + $.datepicker._dayOverClass + ":not(." + $.datepicker._currentClass + ")", t.dpDiv);
                        i[0] && $.datepicker._selectDay(e.target, t.selectedMonth, t.selectedYear, i[0]);
                        var s = $.datepicker._get(t, "onSelect");
                        if (s) {
                            var o = $.datepicker._formatDate(t);
                            s.apply(t.input ? t.input[0] : null, [o, t])
                        } else $.datepicker._hideDatepicker();
                        return !1;
                    case 27:
                        $.datepicker._hideDatepicker();
                        break;
                    case 33:
                        $.datepicker._adjustDate(e.target, e.ctrlKey ? -$.datepicker._get(t, "stepBigMonths") : -$.datepicker._get(t, "stepMonths"), "M");
                        break;
                    case 34:
                        $.datepicker._adjustDate(e.target, e.ctrlKey ? +$.datepicker._get(t, "stepBigMonths") : +$.datepicker._get(t, "stepMonths"), "M");
                        break;
                    case 35:
                        (e.ctrlKey || e.metaKey) && $.datepicker._clearDate(e.target), n = e.ctrlKey || e.metaKey;
                        break;
                    case 36:
                        (e.ctrlKey || e.metaKey) && $.datepicker._gotoToday(e.target), n = e.ctrlKey || e.metaKey;
                        break;
                    case 37:
                        (e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, r ? 1 : -1, "D"), n = e.ctrlKey || e.metaKey, e.originalEvent.altKey && $.datepicker._adjustDate(e.target, e.ctrlKey ? -$.datepicker._get(t, "stepBigMonths") : -$.datepicker._get(t, "stepMonths"), "M");
                        break;
                    case 38:
                        (e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, -7, "D"), n = e.ctrlKey || e.metaKey;
                        break;
                    case 39:
                        (e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, r ? -1 : 1, "D"), n = e.ctrlKey || e.metaKey, e.originalEvent.altKey && $.datepicker._adjustDate(e.target, e.ctrlKey ? +$.datepicker._get(t, "stepBigMonths") : +$.datepicker._get(t, "stepMonths"), "M");
                        break;
                    case 40:
                        (e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, 7, "D"), n = e.ctrlKey || e.metaKey;
                        break;
                    default:
                        n = !1
                    } else e.keyCode == 36 && e.ctrlKey ? $.datepicker._showDatepicker(this) : n = !1;
                    n && (e.preventDefault(), e.stopPropagation())
                },
                _doKeyPress: function (e) {
                    var t = $.datepicker._getInst(e.target);
                    if ($.datepicker._get(t, "constrainInput")) {
                        var n = $.datepicker._possibleChars($.datepicker._get(t, "dateFormat")),
                            r = String.fromCharCode(e.charCode == undefined ? e.keyCode : e.charCode);
                        return e.ctrlKey || e.metaKey || r < " " || !n || n.indexOf(r) > -1
                    }
                },
                _doKeyUp: function (e) {
                    var t = $.datepicker._getInst(e.target);
                    if (t.input.val() != t.lastVal) try {
                        var n = $.datepicker.parseDate($.datepicker._get(t, "dateFormat"), t.input ? t.input.val() : null, $.datepicker._getFormatConfig(t));
                        n && ($.datepicker._setDateFromField(t), $.datepicker._updateAlternate(t), $.datepicker._updateDatepicker(t))
                    } catch (r) {
                        $.datepicker.log(r)
                    }
                    return !0
                },
                _showDatepicker: function (e) {
                    e = e.target || e, e.nodeName.toLowerCase() != "input" && (e = $("input", e.parentNode)[0]);
                    if ($.datepicker._isDisabledDatepicker(e) || $.datepicker._lastInput == e) return;
                    var t = $.datepicker._getInst(e);
                    $.datepicker._curInst && $.datepicker._curInst != t && ($.datepicker._curInst.dpDiv.stop(!0, !0), t && $.datepicker._datepickerShowing && $.datepicker._hideDatepicker($.datepicker._curInst.input[0]));
                    var n = $.datepicker._get(t, "beforeShow"),
                        r = n ? n.apply(e, [e, t]) : {};
                    if (r === !1) return;
                    extendRemove(t.settings, r), t.lastVal = null, $.datepicker._lastInput = e, $.datepicker._setDateFromField(t), $.datepicker._inDialog && (e.value = ""), $.datepicker._pos || ($.datepicker._pos = $.datepicker._findPos(e), $.datepicker._pos[1] += e.offsetHeight);
                    var i = !1;
                    $(e).parents().each(function () {
                        return i |= $(this).css("position") == "fixed", !i
                    }), i && $.browser.opera && ($.datepicker._pos[0] -= document.documentElement.scrollLeft, $.datepicker._pos[1] -= document.documentElement.scrollTop);
                    var s = {
                        left: $.datepicker._pos[0],
                        top: $.datepicker._pos[1]
                    };
                    $.datepicker._pos = null, t.dpDiv.empty(), t.dpDiv.css({
                            position: "absolute",
                            display: "block",
                            top: "-1000px"
                        }), $.datepicker._updateDatepicker(t), s = $.datepicker._checkOffset(t, s, i), t.dpDiv.css({
                            position: $.datepicker._inDialog && $.blockUI ? "static" : i ? "fixed" : "absolute",
                            display: "none",
                            left: s.left + "px",
                            top: s.top + "px"
                        });
                    if (!t.inline) {
                        var o = $.datepicker._get(t, "showAnim"),
                            u = $.datepicker._get(t, "duration"),
                            a = function () {
                                var e = t.dpDiv.find("iframe.ui-datepicker-cover");
                                if ( !! e.length) {
                                    var n = $.datepicker._getBorders(t.dpDiv);
                                    e.css({
                                            left: -n[0],
                                            top: -n[1],
                                            width: t.dpDiv.outerWidth(),
                                            height: t.dpDiv.outerHeight()
                                        })
                                }
                            };
                        t.dpDiv.zIndex($(e).zIndex() + 1), $.datepicker._datepickerShowing = !0, $.effects && $.effects[o] ? t.dpDiv.show(o, $.datepicker._get(t, "showOptions"), u, a) : t.dpDiv[o || "show"](o ? u : null, a), (!o || !u) && a(), t.input.is(":visible") && !t.input.is(":disabled") && t.input.focus(), $.datepicker._curInst = t
                    }
                },
                _updateDatepicker: function (e) {
                    var t = this;
                    t.maxRows = 4;
                    var n = $.datepicker._getBorders(e.dpDiv);
                    instActive = e, e.dpDiv.empty().append(this._generateHTML(e));
                    var r = e.dpDiv.find("iframe.ui-datepicker-cover");
                    !r.length || r.css({
                            left: -n[0],
                            top: -n[1],
                            width: e.dpDiv.outerWidth(),
                            height: e.dpDiv.outerHeight()
                        }), e.dpDiv.find("." + this._dayOverClass + " a").mouseover();
                    var i = this._getNumberOfMonths(e),
                        s = i[1],
                        o = 17;
                    e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), s > 1 && e.dpDiv.addClass("ui-datepicker-multi-" + s).css("width", o * s + "em"), e.dpDiv[(i[0] != 1 || i[1] != 1 ? "add" : "remove") + "Class"]("ui-datepicker-multi"), e.dpDiv[(this._get(e, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"),
                    e == $.datepicker._curInst && $.datepicker._datepickerShowing && e.input && e.input.is(":visible") && !e.input.is(":disabled") && e.input[0] != document.activeElement && e.input.focus();
                    if (e.yearshtml) {
                        var u = e.yearshtml;
                        setTimeout(function () {
                            u === e.yearshtml && e.yearshtml && e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml), u = e.yearshtml = null
                        }, 0)
                    }
                },
                _getBorders: function (e) {
                    var t = function (e) {
                        return {
                            thin: 1,
                            medium: 2,
                            thick: 3
                        }[e] || e
                    };
                    return [parseFloat(t(e.css("border-left-width"))), parseFloat(t(e.css("border-top-width")))]
                },
                _checkOffset: function (e, t, n) {
                    var r = e.dpDiv.outerWidth(),
                        i = e.dpDiv.outerHeight(),
                        s = e.input ? e.input.outerWidth() : 0,
                        o = e.input ? e.input.outerHeight() : 0,
                        u = document.documentElement.clientWidth + $(document).scrollLeft(),
                        a = document.documentElement.clientHeight + $(document).scrollTop();
                    return t.left -= this._get(e, "isRTL") ? r - s : 0, t.left -= n && t.left == e.input.offset().left ? $(document).scrollLeft() : 0, t.top -= n && t.top == e.input.offset().top + o ? $(document).scrollTop() : 0, t.left -= Math.min(t.left, t.left + r > u && u > r ? Math.abs(t.left + r - u) : 0), t.top -= Math.min(t.top, t.top + i > a && a > i ? Math.abs(i + o) : 0), t
                },
                _findPos: function (e) {
                    var t = this._getInst(e),
                        n = this._get(t, "isRTL");
                    while (e && (e.type == "hidden" || e.nodeType != 1 || $.expr.filters.hidden(e))) e = e[n ? "previousSibling" : "nextSibling"];
                    var r = $(e).offset();
                    return [r.left, r.top]
                },
                _hideDatepicker: function (e) {
                    var t = this._curInst;
                    if (!t || e && t != $.data(e, PROP_NAME)) return;
                    if (this._datepickerShowing) {
                        var n = this._get(t, "showAnim"),
                            r = this._get(t, "duration"),
                            i = function () {
                                $.datepicker._tidyDialog(t)
                            };
                        $.effects && $.effects[n] ? t.dpDiv.hide(n, $.datepicker._get(t, "showOptions"), r, i) : t.dpDiv[n == "slideDown" ? "slideUp" : n == "fadeIn" ? "fadeOut" : "hide"](n ? r : null, i), n || i(), this._datepickerShowing = !1;
                        var s = this._get(t, "onClose");
                        s && s.apply(t.input ? t.input[0] : null, [t.input ? t.input.val() : "", t]), this._lastInput = null, this._inDialog && (this._dialogInput.css({
                                    position: "absolute",
                                    left: "0",
                                    top: "-100px"
                                }), $.blockUI && ($.unblockUI(), $("body").append(this.dpDiv))), this._inDialog = !1
                    }
                },
                _tidyDialog: function (e) {
                    e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
                },
                _checkExternalClick: function (e) {
                    if (!$.datepicker._curInst) return;
                    var t = $(e.target),
                        n = $.datepicker._getInst(t[0]);
                    (t[0].id != $.datepicker._mainDivId && t.parents("#" + $.datepicker._mainDivId).length == 0 && !t.hasClass($.datepicker.markerClassName) && !t.closest("." + $.datepicker._triggerClass).length && $.datepicker._datepickerShowing && (!$.datepicker._inDialog || !$.blockUI) || t.hasClass($.datepicker.markerClassName) && $.datepicker._curInst != n) && $.datepicker._hideDatepicker()
                },
                _adjustDate: function (e, t, n) {
                    var r = $(e),
                        i = this._getInst(r[0]);
                    if (this._isDisabledDatepicker(r[0])) return;
                    this._adjustInstDate(i, t + (n == "M" ? this._get(i, "showCurrentAtPos") : 0), n), this._updateDatepicker(i)
                },
                _gotoToday: function (e) {
                    var t = $(e),
                        n = this._getInst(t[0]);
                    if (this._get(n, "gotoCurrent") && n.currentDay) n.selectedDay = n.currentDay, n.drawMonth = n.selectedMonth = n.currentMonth, n.drawYear = n.selectedYear = n.currentYear;
                    else {
                        var r = new Date;
                        n.selectedDay = r.getDate(), n.drawMonth = n.selectedMonth = r.getMonth(), n.drawYear = n.selectedYear = r.getFullYear()
                    }
                    this._notifyChange(n), this._adjustDate(t)
                },
                _selectMonthYear: function (e, t, n) {
                    var r = $(e),
                        i = this._getInst(r[0]);
                    i["selected" + (n == "M" ? "Month" : "Year")] = i["draw" + (n == "M" ? "Month" : "Year")] = parseInt(t.options[t.selectedIndex].value, 10), this._notifyChange(i), this._adjustDate(r)
                },
                _selectDay: function (e, t, n, r) {
                    var i = $(e);
                    if ($(r).hasClass(this._unselectableClass) || this._isDisabledDatepicker(i[0])) return;
                    var s = this._getInst(i[0]);
                    s.selectedDay = s.currentDay = $("a", r).html(), s.selectedMonth = s.currentMonth = t, s.selectedYear = s.currentYear = n, this._selectDate(e, this._formatDate(s, s.currentDay, s.currentMonth, s.currentYear))
                },
                _clearDate: function (e) {
                    var t = $(e),
                        n = this._getInst(t[0]);
                    this._selectDate(t, "")
                },
                _selectDate: function (e, t) {
                    var n = $(e),
                        r = this._getInst(n[0]);
                    t = t != null ? t : this._formatDate(r), r.input && r.input.val(t), this._updateAlternate(r);
                    var i = this._get(r, "onSelect");
                    i ? i.apply(r.input ? r.input[0] : null, [t, r]) : r.input && r.input.trigger("change"), r.inline ? this._updateDatepicker(r) : (this._hideDatepicker(), this._lastInput = r.input[0], typeof r.input[0] != "object" && r.input.focus(), this._lastInput = null)
                },
                _updateAlternate: function (e) {
                    var t = this._get(e, "altField");
                    if (t) {
                        var n = this._get(e, "altFormat") || this._get(e, "dateFormat"),
                            r = this._getDate(e),
                            i = this.formatDate(n, r, this._getFormatConfig(e));
                        $(t).each(function () {
                            $(this).val(i)
                        })
                    }
                },
                noWeekends: function (e) {
                    var t = e.getDay();
                    return [t > 0 && t < 6, ""]
                },
                iso8601Week: function (e) {
                    var t = new Date(e.getTime());
                    t.setDate(t.getDate() + 4 - (t.getDay() || 7));
                    var n = t.getTime();
                    return t.setMonth(0), t.setDate(1), Math.floor(Math.round((n - t) / 864e5) / 7) + 1
                },
                parseDate: function (e, t, n) {
                    if (e == null || t == null) throw "Invalid arguments";
                    t = typeof t == "object" ? t.toString() : t + "";
                    if (t == "") return null;
                    var r = (n ? n.shortYearCutoff : null) || this._defaults.shortYearCutoff;
                    r = typeof r != "string" ? r : (new Date).getFullYear() % 100 + parseInt(r, 10);
                    var i = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort,
                        s = (n ? n.dayNames : null) || this._defaults.dayNames,
                        o = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort,
                        u = (n ? n.monthNames : null) || this._defaults.monthNames,
                        a = -1,
                        f = -1,
                        l = -1,
                        c = -1,
                        h = !1,
                        p = function (t) {
                            var n = y + 1 < e.length && e.charAt(y + 1) == t;
                            return n && y++, n
                        }, d = function (e) {
                            var n = p(e),
                                r = e == "@" ? 14 : e == "!" ? 20 : e == "y" && n ? 4 : e == "o" ? 3 : 2,
                                i = new RegExp("^\\d{1," + r + "}"),
                                s = t.substring(g).match(i);
                            if (!s) throw "Missing number at position " + g;
                            return g += s[0].length, parseInt(s[0], 10)
                        }, v = function (e, n, r) {
                            var i = $.map(p(e) ? r : n, function (e, t) {
                                return [[t, e]]
                            }).sort(function (e, t) {
                                return -(e[1].length - t[1].length)
                            }),
                                s = -1;
                            $.each(i, function (e, n) {
                                var r = n[1];
                                if (t.substr(g, r.length).toLowerCase() == r.toLowerCase()) return s = n[0], g += r.length, !1
                            });
                            if (s != -1) return s + 1;
                            throw "Unknown name at position " + g
                        }, m = function () {
                            if (t.charAt(g) != e.charAt(y)) throw "Unexpected literal at position " + g;
                            g++
                        }, g = 0;
                    for (var y = 0; y < e.length; y++)
                        if (h) e.charAt(y) == "'" && !p("'") ? h = !1 : m();
                        else switch (e.charAt(y)) {
                        case "d":
                            l = d("d");
                            break;
                        case "D":
                            v("D", i, s);
                            break;
                        case "o":
                            c = d("o");
                            break;
                        case "m":
                            f = d("m");
                            break;
                        case "M":
                            f = v("M", o, u);
                            break;
                        case "y":
                            a = d("y");
                            break;
                        case "@":
                            var b = new Date(d("@"));
                            a = b.getFullYear(), f = b.getMonth() + 1, l = b.getDate();
                            break;
                        case "!":
                            var b = new Date((d("!") - this._ticksTo1970) / 1e4);
                            a = b.getFullYear(), f = b.getMonth() + 1, l = b.getDate();
                            break;
                        case "'":
                            p("'") ? m() : h = !0;
                            break;
                        default:
                            m()
                        }
                    if (g < t.length) throw "Extra/unparsed characters found in date: " + t.substring(g);
                    a == -1 ? a = (new Date).getFullYear() : a < 100 && (a += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (a <= r ? 0 : -100));
                    if (c > -1) {
                        f = 1, l = c;
                        do {
                            var w = this._getDaysInMonth(a, f - 1);
                            if (l <= w) break;
                            f++, l -= w
                        } while (!0)
                    }
                    var b = this._daylightSavingAdjust(new Date(a, f - 1, l));
                    if (b.getFullYear() != a || b.getMonth() + 1 != f || b.getDate() != l) throw "Invalid date";
                    return b
                },
                ATOM: "yy-mm-dd",
                COOKIE: "D, dd M yy",
                ISO_8601: "yy-mm-dd",
                RFC_822: "D, d M y",
                RFC_850: "DD, dd-M-y",
                RFC_1036: "D, d M y",
                RFC_1123: "D, d M yy",
                RFC_2822: "D, d M yy",
                RSS: "D, d M y",
                TICKS: "!",
                TIMESTAMP: "@",
                W3C: "yy-mm-dd",
                _ticksTo1970: (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 24 * 60 * 60 * 1e7,
                formatDate: function (e, t, n) {
                    if (!t) return "";
                    var r = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort,
                        i = (n ? n.dayNames : null) || this._defaults.dayNames,
                        s = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort,
                        o = (n ? n.monthNames : null) || this._defaults.monthNames,
                        u = function (t) {
                            var n = h + 1 < e.length && e.charAt(h + 1) == t;
                            return n && h++, n
                        }, a = function (e, t, n) {
                            var r = "" + t;
                            if (u(e))
                                while (r.length < n) r = "0" + r;
                            return r
                        }, f = function (e, t, n, r) {
                            return u(e) ? r[t] : n[t]
                        }, l = "",
                        c = !1;
                    if (t)
                        for (var h = 0; h < e.length; h++)
                            if (c) e.charAt(h) == "'" && !u("'") ? c = !1 : l += e.charAt(h);
                            else switch (e.charAt(h)) {
                            case "d":
                                l += a("d", t.getDate(), 2);
                                break;
                            case "D":
                                l += f("D", t.getDay(), r, i);
                                break;
                            case "o":
                                l += a("o", Math.round(((new Date(t.getFullYear(), t.getMonth(), t.getDate())).getTime() - (new Date(t.getFullYear(), 0, 0)).getTime()) / 864e5), 3);
                                break;
                            case "m":
                                l += a("m", t.getMonth() + 1, 2);
                                break;
                            case "M":
                                l += f("M", t.getMonth(), s, o);
                                break;
                            case "y":
                                l += u("y") ? t.getFullYear() : (t.getYear() % 100 < 10 ? "0" : "") + t.getYear() % 100;
                                break;
                            case "@":
                                l += t.getTime();
                                break;
                            case "!":
                                l += t.getTime() * 1e4 + this._ticksTo1970;
                                break;
                            case "'":
                                u("'") ? l += "'" : c = !0;
                                break;
                            default:
                                l += e.charAt(h)
                            }
                    return l
                },
                _possibleChars: function (e) {
                    var t = "",
                        n = !1,
                        r = function (t) {
                            var n = i + 1 < e.length && e.charAt(i + 1) == t;
                            return n && i++, n
                        };
                    for (var i = 0; i < e.length; i++)
                        if (n) e.charAt(i) == "'" && !r("'") ? n = !1 : t += e.charAt(i);
                        else switch (e.charAt(i)) {
                        case "d":
                        case "m":
                        case "y":
                        case "@":
                            t += "0123456789";
                            break;
                        case "D":
                        case "M":
                            return null;
                        case "'":
                            r("'") ? t += "'" : n = !0;
                            break;
                        default:
                            t += e.charAt(i)
                        }
                    return t
                },
                _get: function (e, t) {
                    return e.settings[t] !== undefined ? e.settings[t] : this._defaults[t]
                },
                _setDateFromField: function (e, t) {
                    if (e.input.val() == e.lastVal) return;
                    var n = this._get(e, "dateFormat"),
                        r = e.lastVal = e.input ? e.input.val() : null,
                        i, s;
                    i = s = this._getDefaultDate(e);
                    var o = this._getFormatConfig(e);
                    try {
                        i = this.parseDate(n, r, o) || s
                    } catch (u) {
                        this.log(u), r = t ? "" : r
                    }
                    e.selectedDay = i.getDate(), e.drawMonth = e.selectedMonth = i.getMonth(), e.drawYear = e.selectedYear = i.getFullYear(), e.currentDay = r ? i.getDate() : 0, e.currentMonth = r ? i.getMonth() : 0, e.currentYear = r ? i.getFullYear() : 0, this._adjustInstDate(e)
                },
                _getDefaultDate: function (e) {
                    return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date))
                },
                _determineDate: function (e, t, n) {
                    var r = function (e) {
                        var t = new Date;
                        return t.setDate(t.getDate() + e), t
                    }, i = function (t) {
                            try {
                                return $.datepicker.parseDate($.datepicker._get(e, "dateFormat"), t, $.datepicker._getFormatConfig(e))
                            } catch (n) {}
                            var r = (t.toLowerCase().match(/^c/) ? $.datepicker._getDate(e) : null) || new Date,
                                i = r.getFullYear(),
                                s = r.getMonth(),
                                o = r.getDate(),
                                u = /([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
                                f = u.exec(t);
                            while (f) {
                                switch (f[2] || "d") {
                                case "d":
                                case "D":
                                    o += parseInt(f[1], 10);
                                    break;
                                case "w":
                                case "W":
                                    o += parseInt(f[1], 10) * 7;
                                    break;
                                case "m":
                                case "M":
                                    s += parseInt(f[1], 10), o = Math.min(o, $.datepicker._getDaysInMonth(i, s));
                                    break;
                                case "y":
                                case "Y":
                                    i += parseInt(f[1], 10), o = Math.min(o, $.datepicker._getDaysInMonth(i, s))
                                }
                                f = u.exec(t)
                            }
                            return new Date(i, s, o)
                        }, s = t == null || t === "" ? n : typeof t == "string" ? i(t) : typeof t == "number" ? isNaN(t) ? n : r(t) : new Date(t.getTime());
                    return s = s && s.toString() == "Invalid Date" ? n : s, s && (s.setHours(0), s.setMinutes(0), s.setSeconds(0), s.setMilliseconds(0)), this._daylightSavingAdjust(s)
                },
                _daylightSavingAdjust: function (e) {
                    return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null
                },
                _setDate: function (e, t, n) {
                    var r = !t,
                        i = e.selectedMonth,
                        s = e.selectedYear,
                        o = this._restrictMinMax(e, this._determineDate(e, t, new Date));
                    e.selectedDay = e.currentDay = o.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = o.getMonth(), e.drawYear = e.selectedYear = e.currentYear = o.getFullYear(), (i != e.selectedMonth || s != e.selectedYear) && !n && this._notifyChange(e), this._adjustInstDate(e), e.input && e.input.val(r ? "" : this._formatDate(e))
                },
                _getDate: function (e) {
                    var t = !e.currentYear || e.input && e.input.val() == "" ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
                    return t
                },
                _generateHTML: function (e) {
                    var t = new Date;
                    t = this._daylightSavingAdjust(new Date(t.getFullYear(), t.getMonth(), t.getDate()));
                    var n = this._get(e, "isRTL"),
                        r = this._get(e, "showButtonPanel"),
                        i = this._get(e, "hideIfNoPrevNext"),
                        s = this._get(e, "navigationAsDateFormat"),
                        o = this._getNumberOfMonths(e),
                        u = this._get(e, "showCurrentAtPos"),
                        a = this._get(e, "stepMonths"),
                        f = o[0] != 1 || o[1] != 1,
                        l = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)),
                        c = this._getMinMaxDate(e, "min"),
                        h = this._getMinMaxDate(e, "max"),
                        p = e.drawMonth - u,
                        d = e.drawYear;
                    p < 0 && (p += 12, d--);
                    if (h) {
                        var v = this._daylightSavingAdjust(new Date(h.getFullYear(), h.getMonth() - o[0] * o[1] + 1, h.getDate()));
                        v = c && v < c ? c : v;
                        while (this._daylightSavingAdjust(new Date(d, p, 1)) > v) p--, p < 0 && (p = 11, d--)
                    }
                    e.drawMonth = p, e.drawYear = d;
                    var m = this._get(e, "prevText");
                    m = s ? this.formatDate(m, this._daylightSavingAdjust(new Date(d, p - a, 1)), this._getFormatConfig(e)) : m;
                    var g = this._canAdjustMonth(e, -1, d, p) ? '<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_' + dpuuid + ".datepicker._adjustDate('#" + e.id + "', -" + a + ", 'M');\"" + ' title="' + m + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "e" : "w") + '">' + m + "</span></a>" : i ? "" : '<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="' + m + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "e" : "w") + '">' + m + "</span></a>",
                        y = this._get(e, "nextText");
                    y = s ? this.formatDate(y, this._daylightSavingAdjust(new Date(d, p + a, 1)), this._getFormatConfig(e)) : y;
                    var b = this._canAdjustMonth(e, 1, d, p) ? '<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_' + dpuuid + ".datepicker._adjustDate('#" + e.id + "', +" + a + ", 'M');\"" + ' title="' + y + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "w" : "e") + '">' + y + "</span></a>" : i ? "" : '<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="' + y + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "w" : "e") + '">' + y + "</span></a>",
                        w = this._get(e, "currentText"),
                        E = this._get(e, "gotoCurrent") && e.currentDay ? l : t;
                    w = s ? this.formatDate(w, E, this._getFormatConfig(e)) : w;
                    var S = e.inline ? "" : '<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_' + dpuuid + '.datepicker._hideDatepicker();">' + this._get(e, "closeText") + "</button>",
                        x = r ? '<div class="ui-datepicker-buttonpane ui-widget-content">' + (n ? S : "") + (this._isInRange(e, E) ? '<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_' + dpuuid + ".datepicker._gotoToday('#" + e.id + "');\"" + ">" + w + "</button>" : "") + (n ? "" : S) + "</div>" : "",
                        T = parseInt(this._get(e, "firstDay"), 10);
                    T = isNaN(T) ? 0 : T;
                    var N = this._get(e, "showWeek"),
                        C = this._get(e, "dayNames"),
                        k = this._get(e, "dayNamesShort"),
                        L = this._get(e, "dayNamesMin"),
                        A = this._get(e, "monthNames"),
                        O = this._get(e, "monthNamesShort"),
                        M = this._get(e, "beforeShowDay"),
                        _ = this._get(e, "showOtherMonths"),
                        D = this._get(e, "selectOtherMonths"),
                        P = this._get(e, "calculateWeek") || this.iso8601Week,
                        H = this._getDefaultDate(e),
                        B = "";
                    for (var j = 0; j < o[0]; j++) {
                        var F = "";
                        this.maxRows = 4;
                        for (var I = 0; I < o[1]; I++) {
                            var q = this._daylightSavingAdjust(new Date(d, p, e.selectedDay)),
                                R = " ui-corner-all",
                                U = "";
                            if (f) {
                                U += '<div class="ui-datepicker-group';
                                if (o[1] > 1) switch (I) {
                                case 0:
                                    U += " ui-datepicker-group-first", R = " ui-corner-" + (n ? "right" : "left");
                                    break;
                                case o[1] - 1:
                                    U += " ui-datepicker-group-last", R = " ui-corner-" + (n ? "left" : "right");
                                    break;
                                default:
                                    U += " ui-datepicker-group-middle", R = ""
                                }
                                U += '">'
                            }
                            U += '<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix' + R + '">' + (/all|left/.test(R) && j == 0 ? n ? b : g : "") + (/all|right/.test(R) && j == 0 ? n ? g : b : "") + this._generateMonthYearHeader(e, p, d, c, h, j > 0 || I > 0, A, O) + '</div><table class="ui-datepicker-calendar"><thead>' + "<tr>";
                            var z = N ? '<th class="ui-datepicker-week-col">' + this._get(e, "weekHeader") + "</th>" : "";
                            for (var W = 0; W < 7; W++) {
                                var X = (W + T) % 7;
                                z += "<th" + ((W + T + 6) % 7 >= 5 ? ' class="ui-datepicker-week-end"' : "") + ">" + '<span title="' + C[X] + '">' + L[X] + "</span></th>"
                            }
                            U += z + "</tr></thead><tbody>";
                            var V = this._getDaysInMonth(d, p);
                            d == e.selectedYear && p == e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, V));
                            var J = (this._getFirstDayOfMonth(d, p) - T + 7) % 7,
                                K = Math.ceil((J + V) / 7),
                                Q = f ? this.maxRows > K ? this.maxRows : K : K;
                            this.maxRows = Q;
                            var G = this._daylightSavingAdjust(new Date(d, p, 1 - J));
                            for (var Y = 0; Y < Q; Y++) {
                                U += "<tr>";
                                var Z = N ? '<td class="ui-datepicker-week-col">' + this._get(e, "calculateWeek")(G) + "</td>" : "";
                                for (var W = 0; W < 7; W++) {
                                    var et = M ? M.apply(e.input ? e.input[0] : null, [G]) : [!0, ""],
                                        tt = G.getMonth() != p,
                                        nt = tt && !D || !et[0] || c && G < c || h && G > h;
                                    Z += '<td class="' + ((W + T + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (tt ? " ui-datepicker-other-month" : "") + (G.getTime() == q.getTime() && p == e.selectedMonth && e._keyEvent || H.getTime() == G.getTime() && H.getTime() == q.getTime() ? " " + this._dayOverClass : "") + (nt ? " " + this._unselectableClass + " ui-state-disabled" : "") + (tt && !_ ? "" : " " + et[1] + (G.getTime() == l.getTime() ? " " + this._currentClass : "") + (G.getTime() == t.getTime() ? " ui-datepicker-today" : "")) + '"' + ((!tt || _) && et[2] ? ' title="' + et[2] + '"' : "") + (nt ? "" : ' onclick="DP_jQuery_' + dpuuid + ".datepicker._selectDay('#" + e.id + "'," + G.getMonth() + "," + G.getFullYear() + ', this);return false;"') + ">" + (tt && !_ ? "&#xa0;" : nt ? '<span class="ui-state-default">' + G.getDate() + "</span>" : '<a class="ui-state-default' + (G.getTime() == t.getTime() ? " ui-state-highlight" : "") + (G.getTime() == l.getTime() ? " ui-state-active" : "") + (tt ? " ui-priority-secondary" : "") + '" href="#">' + G.getDate() + "</a>") + "</td>", G.setDate(G.getDate() + 1), G = this._daylightSavingAdjust(G)
                                }
                                U += Z + "</tr>"
                            }
                            p++, p > 11 && (p = 0, d++), U += "</tbody></table>" + (f ? "</div>" + (o[0] > 0 && I == o[1] - 1 ? '<div class="ui-datepicker-row-break"></div>' : "") : ""), F += U
                        }
                        B += F
                    }
                    return B += x + ($.browser.msie && parseInt($.browser.version, 10) < 7 && !e.inline ? '<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>' : ""), e._keyEvent = !1, B
                },
                _generateMonthYearHeader: function (e, t, n, r, i, s, o, u) {
                    var a = this._get(e, "changeMonth"),
                        f = this._get(e, "changeYear"),
                        l = this._get(e, "showMonthAfterYear"),
                        c = '<div class="ui-datepicker-title">',
                        h = "";
                    if (s || !a) h += '<span class="ui-datepicker-month">' + o[t] + "</span>";
                    else {
                        var p = r && r.getFullYear() == n,
                            d = i && i.getFullYear() == n;
                        h += '<select class="ui-datepicker-month" onchange="DP_jQuery_' + dpuuid + ".datepicker._selectMonthYear('#" + e.id + "', this, 'M');\" " + ">";
                        for (var v = 0; v < 12; v++)(!p || v >= r.getMonth()) && (!d || v <= i.getMonth()) && (h += '<option value="' + v + '"' + (v == t ? ' selected="selected"' : "") + ">" + u[v] + "</option>");
                        h += "</select>"
                    }
                    l || (c += h + (s || !a || !f ? "&#xa0;" : ""));
                    if (!e.yearshtml) {
                        e.yearshtml = "";
                        if (s || !f) c += '<span class="ui-datepicker-year">' + n + "</span>";
                        else {
                            var m = this._get(e, "yearRange").split(":"),
                                g = (new Date).getFullYear(),
                                y = function (e) {
                                    var t = e.match(/c[+-].*/) ? n + parseInt(e.substring(1), 10) : e.match(/[+-].*/) ? g + parseInt(e, 10) : parseInt(e, 10);
                                    return isNaN(t) ? g : t
                                }, b = y(m[0]),
                                w = Math.max(b, y(m[1] || ""));
                            b = r ? Math.max(b, r.getFullYear()) : b, w = i ? Math.min(w, i.getFullYear()) : w, e.yearshtml += '<select class="ui-datepicker-year" onchange="DP_jQuery_' + dpuuid + ".datepicker._selectMonthYear('#" + e.id + "', this, 'Y');\" " + ">";
                            for (; b <= w; b++) e.yearshtml += '<option value="' + b + '"' + (b == n ? ' selected="selected"' : "") + ">" + b + "</option>";
                            e.yearshtml += "</select>", c += e.yearshtml, e.yearshtml = null
                        }
                    }
                    return c += this._get(e, "yearSuffix"), l && (c += (s || !a || !f ? "&#xa0;" : "") + h), c += "</div>", c
                },
                _adjustInstDate: function (e, t, n) {
                    var r = e.drawYear + (n == "Y" ? t : 0),
                        i = e.drawMonth + (n == "M" ? t : 0),
                        s = Math.min(e.selectedDay, this._getDaysInMonth(r, i)) + (n == "D" ? t : 0),
                        o = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(r, i, s)));
                    e.selectedDay = o.getDate(), e.drawMonth = e.selectedMonth = o.getMonth(), e.drawYear = e.selectedYear = o.getFullYear(), (n == "M" || n == "Y") && this._notifyChange(e)
                },
                _restrictMinMax: function (e, t) {
                    var n = this._getMinMaxDate(e, "min"),
                        r = this._getMinMaxDate(e, "max"),
                        i = n && t < n ? n : t;
                    return i = r && i > r ? r : i, i
                },
                _notifyChange: function (e) {
                    var t = this._get(e, "onChangeMonthYear");
                    t && t.apply(e.input ? e.input[0] : null, [e.selectedYear, e.selectedMonth + 1, e])
                },
                _getNumberOfMonths: function (e) {
                    var t = this._get(e, "numberOfMonths");
                    return t == null ? [1, 1] : typeof t == "number" ? [1, t] : t
                },
                _getMinMaxDate: function (e, t) {
                    return this._determineDate(e, this._get(e, t + "Date"), null)
                },
                _getDaysInMonth: function (e, t) {
                    return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate()
                },
                _getFirstDayOfMonth: function (e, t) {
                    return (new Date(e, t, 1)).getDay()
                },
                _canAdjustMonth: function (e, t, n, r) {
                    var i = this._getNumberOfMonths(e),
                        s = this._daylightSavingAdjust(new Date(n, r + (t < 0 ? t : i[0] * i[1]), 1));
                    return t < 0 && s.setDate(this._getDaysInMonth(s.getFullYear(), s.getMonth())), this._isInRange(e, s)
                },
                _isInRange: function (e, t) {
                    var n = this._getMinMaxDate(e, "min"),
                        r = this._getMinMaxDate(e, "max");
                    return (!n || t.getTime() >= n.getTime()) && (!r || t.getTime() <= r.getTime())
                },
                _getFormatConfig: function (e) {
                    var t = this._get(e, "shortYearCutoff");
                    return t = typeof t != "string" ? t : (new Date).getFullYear() % 100 + parseInt(t, 10), {
                        shortYearCutoff: t,
                        dayNamesShort: this._get(e, "dayNamesShort"),
                        dayNames: this._get(e, "dayNames"),
                        monthNamesShort: this._get(e, "monthNamesShort"),
                        monthNames: this._get(e, "monthNames")
                    }
                },
                _formatDate: function (e, t, n, r) {
                    t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
                    var i = t ? typeof t == "object" ? t : this._daylightSavingAdjust(new Date(r, n, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
                    return this.formatDate(this._get(e, "dateFormat"), i, this._getFormatConfig(e))
                }
            }), $.fn.datepicker = function (e) {
            if (!this.length) return this;
            $.datepicker.initialized || ($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv), $.datepicker.initialized = !0);
            var t = Array.prototype.slice.call(arguments, 1);
            return typeof e != "string" || e != "isDisabled" && e != "getDate" && e != "widget" ? e == "option" && arguments.length == 2 && typeof arguments[1] == "string" ? $.datepicker["_" + e + "Datepicker"].apply($.datepicker, [this[0]].concat(t)) : this.each(function () {
                typeof e == "string" ? $.datepicker["_" + e + "Datepicker"].apply($.datepicker, [this].concat(t)) : $.datepicker._attachDatepicker(this, e)
            }) : $.datepicker["_" + e + "Datepicker"].apply($.datepicker, [this[0]].concat(t))
        }, $.datepicker = new Datepicker, $.datepicker.initialized = !1, $.datepicker.uuid = (new Date).getTime(), $.datepicker.version = "1.8.21", window["DP_jQuery_" + dpuuid] = $
    }(jQuery), jQuery.effects || function (e, t) {
        function n(t) {
            var n;
            return t && t.constructor == Array && t.length == 3 ? t : (n = /rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t)) ? [parseInt(n[1], 10), parseInt(n[2], 10), parseInt(n[3], 10)] : (n = /rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t)) ? [parseFloat(n[1]) * 2.55, parseFloat(n[2]) * 2.55, parseFloat(n[3]) * 2.55] : (n = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t)) ? [parseInt(n[1], 16), parseInt(n[2], 16), parseInt(n[3], 16)] : (n = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t)) ? [parseInt(n[1] + n[1], 16), parseInt(n[2] + n[2], 16), parseInt(n[3] + n[3], 16)] : (n = /rgba\(0, 0, 0, 0\)/.exec(t)) ? f.transparent : f[e.trim(t).toLowerCase()]
        }

        function r(t, r) {
            var i;
            do {
                i = e.curCSS(t, r);
                if (i != "" && i != "transparent" || e.nodeName(t, "body")) break;
                r = "backgroundColor"
            } while (t = t.parentNode);
            return n(i)
        }

        function i() {
            var e = document.defaultView ? document.defaultView.getComputedStyle(this, null) : this.currentStyle,
                t = {}, n, r;
            if (e && e.length && e[0] && e[e[0]]) {
                var i = e.length;
                while (i--) n = e[i], typeof e[n] == "string" && (r = n.replace(/\-(\w)/g, function (e, t) {
                            return t.toUpperCase()
                        }), t[r] = e[n])
            } else
                for (n in e) typeof e[n] == "string" && (t[n] = e[n]);
            return t
        }

        function s(t) {
            var n, r;
            for (n in t) r = t[n], (r == null || e.isFunction(r) || n in c || /scrollbar/.test(n) || !/color/i.test(n) && isNaN(parseFloat(r))) && delete t[n];
            return t
        }

        function o(e, t) {
            var n = {
                _: 0
            }, r;
            for (r in t) e[r] != t[r] && (n[r] = t[r]);
            return n
        }

        function u(t, n, r, i) {
            typeof t == "object" && (i = n, r = null, n = t, t = n.effect), e.isFunction(n) && (i = n, r = null, n = {});
            if (typeof n == "number" || e.fx.speeds[n]) i = r, r = n, n = {};
            return e.isFunction(r) && (i = r, r = null), n = n || {}, r = r || n.duration, r = e.fx.off ? 0 : typeof r == "number" ? r : r in e.fx.speeds ? e.fx.speeds[r] : e.fx.speeds._default, i = i || n.complete, [t, n, r, i]
        }

        function a(t) {
            return !t || typeof t == "number" || e.fx.speeds[t] ? !0 : typeof t == "string" && !e.effects[t] ? !0 : !1
        }
        e.effects = {}, e.each(["backgroundColor", "borderBottomColor", "borderLeftColor", "borderRightColor", "borderTopColor", "borderColor", "color", "outlineColor"], function (t, i) {
            e.fx.step[i] = function (e) {
                e.colorInit || (e.start = r(e.elem, i), e.end = n(e.end), e.colorInit = !0), e.elem.style[i] = "rgb(" + Math.max(Math.min(parseInt(e.pos * (e.end[0] - e.start[0]) + e.start[0], 10), 255), 0) + "," + Math.max(Math.min(parseInt(e.pos * (e.end[1] - e.start[1]) + e.start[1], 10), 255), 0) + "," + Math.max(Math.min(parseInt(e.pos * (e.end[2] - e.start[2]) + e.start[2], 10), 255), 0) + ")"
            }
        });
        var f = {
            aqua: [0, 255, 255],
            azure: [240, 255, 255],
            beige: [245, 245, 220],
            black: [0, 0, 0],
            blue: [0, 0, 255],
            brown: [165, 42, 42],
            cyan: [0, 255, 255],
            darkblue: [0, 0, 139],
            darkcyan: [0, 139, 139],
            darkgrey: [169, 169, 169],
            darkgreen: [0, 100, 0],
            darkkhaki: [189, 183, 107],
            darkmagenta: [139, 0, 139],
            darkolivegreen: [85, 107, 47],
            darkorange: [255, 140, 0],
            darkorchid: [153, 50, 204],
            darkred: [139, 0, 0],
            darksalmon: [233, 150, 122],
            darkviolet: [148, 0, 211],
            fuchsia: [255, 0, 255],
            gold: [255, 215, 0],
            green: [0, 128, 0],
            indigo: [75, 0, 130],
            khaki: [240, 230, 140],
            lightblue: [173, 216, 230],
            lightcyan: [224, 255, 255],
            lightgreen: [144, 238, 144],
            lightgrey: [211, 211, 211],
            lightpink: [255, 182, 193],
            lightyellow: [255, 255, 224],
            lime: [0, 255, 0],
            magenta: [255, 0, 255],
            maroon: [128, 0, 0],
            navy: [0, 0, 128],
            olive: [128, 128, 0],
            orange: [255, 165, 0],
            pink: [255, 192, 203],
            purple: [128, 0, 128],
            violet: [128, 0, 128],
            red: [255, 0, 0],
            silver: [192, 192, 192],
            white: [255, 255, 255],
            yellow: [255, 255, 0],
            transparent: [255, 255, 255]
        }, l = ["add", "remove", "toggle"],
            c = {
                border: 1,
                borderBottom: 1,
                borderColor: 1,
                borderLeft: 1,
                borderRight: 1,
                borderTop: 1,
                borderWidth: 1,
                margin: 1,
                padding: 1
            };
        e.effects.animateClass = function (t, n, r, u) {
            return e.isFunction(r) && (u = r, r = null), this.queue(function () {
                var a = e(this),
                    f = a.attr("style") || " ",
                    c = s(i.call(this)),
                    p, v = a.attr("class") || "";
                e.each(l, function (e, n) {
                    t[n] && a[n + "Class"](t[n])
                }), p = s(i.call(this)), a.attr("class", v), a.animate(o(c, p), {
                        queue: !1,
                        duration: n,
                        easing: r,
                        complete: function () {
                            e.each(l, function (e, n) {
                                t[n] && a[n + "Class"](t[n])
                            }), typeof a.attr("style") == "object" ? (a.attr("style").cssText = "", a.attr("style").cssText = f) : a.attr("style", f), u && u.apply(this, arguments), e.dequeue(this)
                        }
                    })
            })
        }, e.fn.extend({
                _addClass: e.fn.addClass,
                addClass: function (t, n, r, i) {
                    return n ? e.effects.animateClass.apply(this, [{
                                add: t
                            },
                            n, r, i
                        ]) : this._addClass(t)
                },
                _removeClass: e.fn.removeClass,
                removeClass: function (t, n, r, i) {
                    return n ? e.effects.animateClass.apply(this, [{
                                remove: t
                            },
                            n, r, i
                        ]) : this._removeClass(t)
                },
                _toggleClass: e.fn.toggleClass,
                toggleClass: function (n, r, i, s, o) {
                    return typeof r == "boolean" || r === t ? i ? e.effects.animateClass.apply(this, [r ? {
                                add: n
                            } : {
                                remove: n
                            },
                            i, s, o
                        ]) : this._toggleClass(n, r) : e.effects.animateClass.apply(this, [{
                                toggle: n
                            },
                            r, i, s
                        ])
                },
                switchClass: function (t, n, r, i, s) {
                    return e.effects.animateClass.apply(this, [{
                                add: n,
                                remove: t
                            },
                            r, i, s
                        ])
                }
            }), e.extend(e.effects, {
                version: "1.8.21",
                save: function (e, t) {
                    for (var n = 0; n < t.length; n++) t[n] !== null && e.data("ec.storage." + t[n], e[0].style[t[n]])
                },
                restore: function (e, t) {
                    for (var n = 0; n < t.length; n++) t[n] !== null && e.css(t[n], e.data("ec.storage." + t[n]))
                },
                setMode: function (e, t) {
                    return t == "toggle" && (t = e.is(":hidden") ? "show" : "hide"), t
                },
                getBaseline: function (e, t) {
                    var n, r;
                    switch (e[0]) {
                    case "top":
                        n = 0;
                        break;
                    case "middle":
                        n = .5;
                        break;
                    case "bottom":
                        n = 1;
                        break;
                    default:
                        n = e[0] / t.height
                    }
                    switch (e[1]) {
                    case "left":
                        r = 0;
                        break;
                    case "center":
                        r = .5;
                        break;
                    case "right":
                        r = 1;
                        break;
                    default:
                        r = e[1] / t.width
                    }
                    return {
                        x: r,
                        y: n
                    }
                },
                createWrapper: function (t) {
                    if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                    var n = {
                        width: t.outerWidth(!0),
                        height: t.outerHeight(!0),
                        "float": t.css("float")
                    }, r = e("<div></div>").addClass("ui-effects-wrapper").css({
                                fontSize: "100%",
                                background: "transparent",
                                border: "none",
                                margin: 0,
                                padding: 0
                            }),
                        i = document.activeElement;
                    try {
                        i.id
                    } catch (s) {
                        i = document.body
                    }
                    return t.wrap(r), (t[0] === i || e.contains(t[0], i)) && e(i).focus(), r = t.parent(), t.css("position") == "static" ? (r.css({
                                position: "relative"
                            }), t.css({
                                position: "relative"
                            })) : (e.extend(n, {
                                position: t.css("position"),
                                zIndex: t.css("z-index")
                            }), e.each(["top", "left", "bottom", "right"], function (e, r) {
                                n[r] = t.css(r), isNaN(parseInt(n[r], 10)) && (n[r] = "auto")
                            }), t.css({
                                position: "relative",
                                top: 0,
                                left: 0,
                                right: "auto",
                                bottom: "auto"
                            })), r.css(n).show()
                },
                removeWrapper: function (t) {
                    var n, r = document.activeElement;
                    return t.parent().is(".ui-effects-wrapper") ? (n = t.parent().replaceWith(t), (t[0] === r || e.contains(t[0], r)) && e(r).focus(), n) : t
                },
                setTransition: function (t, n, r, i) {
                    return i = i || {}, e.each(n, function (e, n) {
                        var s = t.cssUnit(n);
                        s[0] > 0 && (i[n] = s[0] * r + s[1])
                    }), i
                }
            }), e.fn.extend({
                effect: function (t, n, r, i) {
                    var s = u.apply(this, arguments),
                        o = {
                            options: s[1],
                            duration: s[2],
                            callback: s[3]
                        }, a = o.options.mode,
                        f = e.effects[t];
                    return e.fx.off || !f ? a ? this[a](o.duration, o.callback) : this.each(function () {
                        o.callback && o.callback.call(this)
                    }) : f.call(this, o)
                },
                _show: e.fn.show,
                show: function (e) {
                    if (a(e)) return this._show.apply(this, arguments);
                    var t = u.apply(this, arguments);
                    return t[1].mode = "show", this.effect.apply(this, t)
                },
                _hide: e.fn.hide,
                hide: function (e) {
                    if (a(e)) return this._hide.apply(this, arguments);
                    var t = u.apply(this, arguments);
                    return t[1].mode = "hide", this.effect.apply(this, t)
                },
                __toggle: e.fn.toggle,
                toggle: function (t) {
                    if (a(t) || typeof t == "boolean" || e.isFunction(t)) return this.__toggle.apply(this, arguments);
                    var n = u.apply(this, arguments);
                    return n[1].mode = "toggle", this.effect.apply(this, n)
                },
                cssUnit: function (t) {
                    var n = this.css(t),
                        r = [];
                    return e.each(["em", "px", "%", "pt"], function (e, t) {
                        n.indexOf(t) > 0 && (r = [parseFloat(n), t])
                    }), r
                }
            }), e.easing.jswing = e.easing.swing, e.extend(e.easing, {
                def: "easeOutQuad",
                swing: function (t, n, r, i, s) {
                    return e.easing[e.easing.def](t, n, r, i, s)
                },
                easeInQuad: function (e, t, n, r, i) {
                    return r * (t /= i) * t + n
                },
                easeOutQuad: function (e, t, n, r, i) {
                    return -r * (t /= i) * (t - 2) + n
                },
                easeInOutQuad: function (e, t, n, r, i) {
                    return (t /= i / 2) < 1 ? r / 2 * t * t + n : -r / 2 * (--t * (t - 2) - 1) + n
                },
                easeInCubic: function (e, t, n, r, i) {
                    return r * (t /= i) * t * t + n
                },
                easeOutCubic: function (e, t, n, r, i) {
                    return r * ((t = t / i - 1) * t * t + 1) + n
                },
                easeInOutCubic: function (e, t, n, r, i) {
                    return (t /= i / 2) < 1 ? r / 2 * t * t * t + n : r / 2 * ((t -= 2) * t * t + 2) + n
                },
                easeInQuart: function (e, t, n, r, i) {
                    return r * (t /= i) * t * t * t + n
                },
                easeOutQuart: function (e, t, n, r, i) {
                    return -r * ((t = t / i - 1) * t * t * t - 1) + n
                },
                easeInOutQuart: function (e, t, n, r, i) {
                    return (t /= i / 2) < 1 ? r / 2 * t * t * t * t + n : -r / 2 * ((t -= 2) * t * t * t - 2) + n
                },
                easeInQuint: function (e, t, n, r, i) {
                    return r * (t /= i) * t * t * t * t + n
                },
                easeOutQuint: function (e, t, n, r, i) {
                    return r * ((t = t / i - 1) * t * t * t * t + 1) + n
                },
                easeInOutQuint: function (e, t, n, r, i) {
                    return (t /= i / 2) < 1 ? r / 2 * t * t * t * t * t + n : r / 2 * ((t -= 2) * t * t * t * t + 2) + n
                },
                easeInSine: function (e, t, n, r, i) {
                    return -r * Math.cos(t / i * (Math.PI / 2)) + r + n
                },
                easeOutSine: function (e, t, n, r, i) {
                    return r * Math.sin(t / i * (Math.PI / 2)) + n
                },
                easeInOutSine: function (e, t, n, r, i) {
                    return -r / 2 * (Math.cos(Math.PI * t / i) - 1) + n
                },
                easeInExpo: function (e, t, n, r, i) {
                    return t == 0 ? n : r * Math.pow(2, 10 * (t / i - 1)) + n
                },
                easeOutExpo: function (e, t, n, r, i) {
                    return t == i ? n + r : r * (-Math.pow(2, -10 * t / i) + 1) + n
                },
                easeInOutExpo: function (e, t, n, r, i) {
                    return t == 0 ? n : t == i ? n + r : (t /= i / 2) < 1 ? r / 2 * Math.pow(2, 10 * (t - 1)) + n : r / 2 * (-Math.pow(2, -10 * --t) + 2) + n
                },
                easeInCirc: function (e, t, n, r, i) {
                    return -r * (Math.sqrt(1 - (t /= i) * t) - 1) + n
                },
                easeOutCirc: function (e, t, n, r, i) {
                    return r * Math.sqrt(1 - (t = t / i - 1) * t) + n
                },
                easeInOutCirc: function (e, t, n, r, i) {
                    return (t /= i / 2) < 1 ? -r / 2 * (Math.sqrt(1 - t * t) - 1) + n : r / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + n
                },
                easeInElastic: function (e, t, n, r, i) {
                    var s = 1.70158,
                        o = 0,
                        u = r;
                    if (t == 0) return n;
                    if ((t /= i) == 1) return n + r;
                    o || (o = i * .3);
                    if (u < Math.abs(r)) {
                        u = r;
                        var s = o / 4
                    } else var s = o / (2 * Math.PI) * Math.asin(r / u);
                    return -(u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o)) + n
                },
                easeOutElastic: function (e, t, n, r, i) {
                    var s = 1.70158,
                        o = 0,
                        u = r;
                    if (t == 0) return n;
                    if ((t /= i) == 1) return n + r;
                    o || (o = i * .3);
                    if (u < Math.abs(r)) {
                        u = r;
                        var s = o / 4
                    } else var s = o / (2 * Math.PI) * Math.asin(r / u);
                    return u * Math.pow(2, -10 * t) * Math.sin((t * i - s) * 2 * Math.PI / o) + r + n
                },
                easeInOutElastic: function (e, t, n, r, i) {
                    var s = 1.70158,
                        o = 0,
                        u = r;
                    if (t == 0) return n;
                    if ((t /= i / 2) == 2) return n + r;
                    o || (o = i * .3 * 1.5);
                    if (u < Math.abs(r)) {
                        u = r;
                        var s = o / 4
                    } else var s = o / (2 * Math.PI) * Math.asin(r / u);
                    return t < 1 ? -0.5 * u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) + n : u * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) * .5 + r + n
                },
                easeInBack: function (e, n, r, i, s, o) {
                    return o == t && (o = 1.70158), i * (n /= s) * n * ((o + 1) * n - o) + r
                },
                easeOutBack: function (e, n, r, i, s, o) {
                    return o == t && (o = 1.70158), i * ((n = n / s - 1) * n * ((o + 1) * n + o) + 1) + r
                },
                easeInOutBack: function (e, n, r, i, s, o) {
                    return o == t && (o = 1.70158), (n /= s / 2) < 1 ? i / 2 * n * n * (((o *= 1.525) + 1) * n - o) + r : i / 2 * ((n -= 2) * n * (((o *= 1.525) + 1) * n + o) + 2) + r
                },
                easeInBounce: function (t, n, r, i, s) {
                    return i - e.easing.easeOutBounce(t, s - n, 0, i, s) + r
                },
                easeOutBounce: function (e, t, n, r, i) {
                    return (t /= i) < 1 / 2.75 ? r * 7.5625 * t * t + n : t < 2 / 2.75 ? r * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + n : t < 2.5 / 2.75 ? r * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + n : r * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + n
                },
                easeInOutBounce: function (t, n, r, i, s) {
                    return n < s / 2 ? e.easing.easeInBounce(t, n * 2, 0, i, s) * .5 + r : e.easing.easeOutBounce(t, n * 2 - s, 0, i, s) * .5 + i * .5 + r
                }
            })
    }(jQuery),
    function (e, t) {
        e.effects.drop = function (t) {
            return this.queue(function () {
                var n = e(this),
                    r = ["position", "top", "bottom", "left", "right", "opacity"],
                    i = e.effects.setMode(n, t.options.mode || "hide"),
                    s = t.options.direction || "left";
                e.effects.save(n, r), n.show(), e.effects.createWrapper(n);
                var o = s == "up" || s == "down" ? "top" : "left",
                    u = s == "up" || s == "left" ? "pos" : "neg",
                    f = t.options.distance || (o == "top" ? n.outerHeight({
                                margin: !0
                            }) / 2 : n.outerWidth({
                                margin: !0
                            }) / 2);
                i == "show" && n.css("opacity", 0).css(o, u == "pos" ? -f : f);
                var l = {
                    opacity: i == "show" ? 1 : 0
                };
                l[o] = (i == "show" ? u == "pos" ? "+=" : "-=" : u == "pos" ? "-=" : "+=") + f, n.animate(l, {
                        queue: !1,
                        duration: t.duration,
                        easing: t.options.easing,
                        complete: function () {
                            i == "hide" && n.hide(), e.effects.restore(n, r), e.effects.removeWrapper(n), t.callback && t.callback.apply(this, arguments), n.dequeue()
                        }
                    })
            })
        }
    }(jQuery),
    function (e, t) {
        e.effects.explode = function (t) {
            return this.queue(function () {
                var n = t.options.pieces ? Math.round(Math.sqrt(t.options.pieces)) : 3,
                    r = t.options.pieces ? Math.round(Math.sqrt(t.options.pieces)) : 3;
                t.options.mode = t.options.mode == "toggle" ? e(this).is(":visible") ? "hide" : "show" : t.options.mode;
                var i = e(this).show().css("visibility", "hidden"),
                    s = i.offset();
                s.top -= parseInt(i.css("marginTop"), 10) || 0, s.left -= parseInt(i.css("marginLeft"), 10) || 0;
                var o = i.outerWidth(!0),
                    u = i.outerHeight(!0);
                for (var f = 0; f < n; f++)
                    for (var l = 0; l < r; l++) i.clone().appendTo("body").wrap("<div></div>").css({
                            position: "absolute",
                            visibility: "visible",
                            left: -l * (o / r),
                            top: -f * (u / n)
                        }).parent().addClass("ui-effects-explode").css({
                            position: "absolute",
                            overflow: "hidden",
                            width: o / r,
                            height: u / n,
                            left: s.left + l * (o / r) + (t.options.mode == "show" ? (l - Math.floor(r / 2)) * (o / r) : 0),
                            top: s.top + f * (u / n) + (t.options.mode == "show" ? (f - Math.floor(n / 2)) * (u / n) : 0),
                            opacity: t.options.mode == "show" ? 0 : 1
                        }).animate({
                            left: s.left + l * (o / r) + (t.options.mode == "show" ? 0 : (l - Math.floor(r / 2)) * (o / r)),
                            top: s.top + f * (u / n) + (t.options.mode == "show" ? 0 : (f - Math.floor(n / 2)) * (u / n)),
                            opacity: t.options.mode == "show" ? 1 : 0
                        }, t.duration || 500);
                setTimeout(function () {
                    t.options.mode == "show" ? i.css({
                            visibility: "visible"
                        }) : i.css({
                            visibility: "visible"
                        }).hide(), t.callback && t.callback.apply(i[0]), i.dequeue(), e("div.ui-effects-explode").remove()
                }, t.duration || 500)
            })
        }
    }(jQuery),
    function (e, t) {
        e.effects.highlight = function (t) {
            return this.queue(function () {
                var n = e(this),
                    r = ["backgroundImage", "backgroundColor", "opacity"],
                    i = e.effects.setMode(n, t.options.mode || "show"),
                    s = {
                        backgroundColor: n.css("backgroundColor")
                    };
                i == "hide" && (s.opacity = 0), e.effects.save(n, r), n.show().css({
                        backgroundImage: "none",
                        backgroundColor: t.options.color || "#ffff99"
                    }).animate(s, {
                        queue: !1,
                        duration: t.duration,
                        easing: t.options.easing,
                        complete: function () {
                            i == "hide" && n.hide(), e.effects.restore(n, r), i == "show" && !e.support.opacity && this.style.removeAttribute("filter"), t.callback && t.callback.apply(this, arguments), n.dequeue()
                        }
                    })
            })
        }
    }(jQuery),
    function (e, t) {
        e.effects.pulsate = function (t) {
            return this.queue(function () {
                var n = e(this),
                    r = e.effects.setMode(n, t.options.mode || "show"),
                    i = (t.options.times || 5) * 2 - 1,
                    s = t.duration ? t.duration / 2 : e.fx.speeds._default / 2,
                    o = n.is(":visible"),
                    u = 0;
                o || (n.css("opacity", 0).show(), u = 1), (r == "hide" && o || r == "show" && !o) && i--;
                for (var f = 0; f < i; f++) n.animate({
                        opacity: u
                    }, s, t.options.easing), u = (u + 1) % 2;
                n.animate({
                        opacity: u
                    }, s, t.options.easing, function () {
                        u == 0 && n.hide(), t.callback && t.callback.apply(this, arguments)
                    }), n.queue("fx", function () {
                        n.dequeue()
                    }).dequeue()
            })
        }
    }(jQuery),
    function (e, t) {
        e.effects.transfer = function (t) {
            return this.queue(function () {
                var n = e(this),
                    r = e(t.options.to),
                    i = r.offset(),
                    s = {
                        top: i.top,
                        left: i.left,
                        height: r.innerHeight(),
                        width: r.innerWidth()
                    }, o = n.offset(),
                    u = e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({
                            top: o.top,
                            left: o.left,
                            height: n.innerHeight(),
                            width: n.innerWidth(),
                            position: "absolute"
                        }).animate(s, t.duration, t.options.easing, function () {
                            u.remove(), t.callback && t.callback.apply(n[0], arguments), n.dequeue()
                        })
            })
        }
    }(jQuery),
    function (e, t, n) {
        "$:nomunge";

        function r(r, i) {
            function u(t) {
                e(s).each(function () {
                    var n = e(this);
                    this !== t.target && !n.has(t.target).length && n.triggerHandler(i, [t.target])
                })
            }
            i = i || r + n;
            var s = e(),
                o = r + "." + i + "-special-event";
            e.event.special[i] = {
                setup: function () {
                    s = s.add(this), s.length === 1 && e(t).bind(o, u)
                },
                teardown: function () {
                    s = s.not(this), s.length === 0 && e(t).unbind(o)
                },
                add: function (e) {
                    var t = e.handler;
                    e.handler = function (e, n) {
                        e.target = n, t.apply(this, arguments)
                    }
                }
            }
        }
        e.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "), function (e) {
            r(e)
        }), r("focusin", "focus" + n), r("focusout", "blur" + n), e.addOutsideEvent = r
    }(jQuery, document, "outside"), jQuery.easing.jswing = jQuery.easing.swing, jQuery.extend(jQuery.easing, {
            def: "easeOutQuad",
            swing: function (e, t, n, r, i) {
                return jQuery.easing[jQuery.easing.def](e, t, n, r, i)
            },
            easeInQuad: function (e, t, n, r, i) {
                return r * (t /= i) * t + n
            },
            easeOutQuad: function (e, t, n, r, i) {
                return -r * (t /= i) * (t - 2) + n
            },
            easeInOutQuad: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? r / 2 * t * t + n : -r / 2 * (--t * (t - 2) - 1) + n
            },
            easeInCubic: function (e, t, n, r, i) {
                return r * (t /= i) * t * t + n
            },
            easeOutCubic: function (e, t, n, r, i) {
                return r * ((t = t / i - 1) * t * t + 1) + n
            },
            easeInOutCubic: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? r / 2 * t * t * t + n : r / 2 * ((t -= 2) * t * t + 2) + n
            },
            easeInQuart: function (e, t, n, r, i) {
                return r * (t /= i) * t * t * t + n
            },
            easeOutQuart: function (e, t, n, r, i) {
                return -r * ((t = t / i - 1) * t * t * t - 1) + n
            },
            easeInOutQuart: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? r / 2 * t * t * t * t + n : -r / 2 * ((t -= 2) * t * t * t - 2) + n
            },
            easeInQuint: function (e, t, n, r, i) {
                return r * (t /= i) * t * t * t * t + n
            },
            easeOutQuint: function (e, t, n, r, i) {
                return r * ((t = t / i - 1) * t * t * t * t + 1) + n
            },
            easeInOutQuint: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? r / 2 * t * t * t * t * t + n : r / 2 * ((t -= 2) * t * t * t * t + 2) + n
            },
            easeInSine: function (e, t, n, r, i) {
                return -r * Math.cos(t / i * (Math.PI / 2)) + r + n
            },
            easeOutSine: function (e, t, n, r, i) {
                return r * Math.sin(t / i * (Math.PI / 2)) + n
            },
            easeInOutSine: function (e, t, n, r, i) {
                return -r / 2 * (Math.cos(Math.PI * t / i) - 1) + n
            },
            easeInExpo: function (e, t, n, r, i) {
                return t == 0 ? n : r * Math.pow(2, 10 * (t / i - 1)) + n
            },
            easeOutExpo: function (e, t, n, r, i) {
                return t == i ? n + r : r * (-Math.pow(2, -10 * t / i) + 1) + n
            },
            easeInOutExpo: function (e, t, n, r, i) {
                return t == 0 ? n : t == i ? n + r : (t /= i / 2) < 1 ? r / 2 * Math.pow(2, 10 * (t - 1)) + n : r / 2 * (-Math.pow(2, -10 * --t) + 2) + n
            },
            easeInCirc: function (e, t, n, r, i) {
                return -r * (Math.sqrt(1 - (t /= i) * t) - 1) + n
            },
            easeOutCirc: function (e, t, n, r, i) {
                return r * Math.sqrt(1 - (t = t / i - 1) * t) + n
            },
            easeInOutCirc: function (e, t, n, r, i) {
                return (t /= i / 2) < 1 ? -r / 2 * (Math.sqrt(1 - t * t) - 1) + n : r / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + n
            },
            easeInElastic: function (e, t, n, r, i) {
                var s = 1.70158,
                    o = 0,
                    u = r;
                if (t == 0) return n;
                if ((t /= i) == 1) return n + r;
                o || (o = i * .3);
                if (u < Math.abs(r)) {
                    u = r;
                    var s = o / 4
                } else var s = o / (2 * Math.PI) * Math.asin(r / u);
                return -(u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o)) + n
            },
            easeOutElastic: function (e, t, n, r, i) {
                var s = 1.70158,
                    o = 0,
                    u = r;
                if (t == 0) return n;
                if ((t /= i) == 1) return n + r;
                o || (o = i * .3);
                if (u < Math.abs(r)) {
                    u = r;
                    var s = o / 4
                } else var s = o / (2 * Math.PI) * Math.asin(r / u);
                return u * Math.pow(2, -10 * t) * Math.sin((t * i - s) * 2 * Math.PI / o) + r + n
            },
            easeInOutElastic: function (e, t, n, r, i) {
                var s = 1.70158,
                    o = 0,
                    u = r;
                if (t == 0) return n;
                if ((t /= i / 2) == 2) return n + r;
                o || (o = i * .3 * 1.5);
                if (u < Math.abs(r)) {
                    u = r;
                    var s = o / 4
                } else var s = o / (2 * Math.PI) * Math.asin(r / u);
                return t < 1 ? -0.5 * u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) + n : u * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) * .5 + r + n
            },
            easeInBack: function (e, t, n, r, i, s) {
                return s == undefined && (s = 1.70158), r * (t /= i) * t * ((s + 1) * t - s) + n
            },
            easeOutBack: function (e, t, n, r, i, s) {
                return s == undefined && (s = 1.70158), r * ((t = t / i - 1) * t * ((s + 1) * t + s) + 1) + n
            },
            easeInOutBack: function (e, t, n, r, i, s) {
                return s == undefined && (s = 1.70158), (t /= i / 2) < 1 ? r / 2 * t * t * (((s *= 1.525) + 1) * t - s) + n : r / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + n
            },
            easeInBounce: function (e, t, n, r, i) {
                return r - jQuery.easing.easeOutBounce(e, i - t, 0, r, i) + n
            },
            easeOutBounce: function (e, t, n, r, i) {
                return (t /= i) < 1 / 2.75 ? r * 7.5625 * t * t + n : t < 2 / 2.75 ? r * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + n : t < 2.5 / 2.75 ? r * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + n : r * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + n
            },
            easeInOutBounce: function (e, t, n, r, i) {
                return t < i / 2 ? jQuery.easing.easeInBounce(e, t * 2, 0, r, i) * .5 + n : jQuery.easing.easeOutBounce(e, t * 2 - i, 0, r, i) * .5 + r * .5 + n
            }
        }),
    function (e) {
        window.embedlyURLre = /(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/, e.embedly = e.embedly || {};
        if (e.embedly.version) return;
        e.extend({
                embedly: function (t, n, r) {
                    var i = [],
                        s = "http://api.embed.ly/",
                        o;
                    typeof n != "undefined" ? o = e.extend(e.embedly.defaults, n) : o = e.embedly.defaults, o.urlRe || (o.urlRe = window.embedlyURLre), typeof t == "string" && (t = new Array(t)), typeof r != "undefined" && (o.success = r), o.secure && (s = "https://api.embed.ly/"), o.success === null && (o.success = function (t, n) {
                        var r, i = e(n.node);
                        if (!t) return null;
                        if ((r = o.method) === "replace") return i.replaceWith(t.code);
                        if (r === "after") return i.after(t.code);
                        if (r === "afterParent") return i.parent().after(t.code);
                        if (r === "replaceParent") return i.parent().replaceWith(t.code)
                    }), o.error === null && (o.error = function (e, t) {});
                    var u = function (e) {
                        return o.urlRe.test(e)
                    }, a = function (e) {
                            var t = "urls=" + e;
                            o.maxWidth !== null ? t += "&maxwidth=" + o.maxWidth : typeof dimensions != "undefined" && (t += "&maxwidth=" + dimensions.width), o.maxHeight !== null && (t += "&maxheight=" + o.maxHeight), o.chars !== null && (t += "&chars=" + o.chars), o.words !== null && (t += "&words=" + o.words), t += "&wmode=" + o.wmode, typeof o.key == "string" && (t += "&key=" + o.key);
                            if (typeof o.autoplay == "string" || typeof o.autoplay == "boolean") t += "&autoplay=" + o.autoplay;
                            return o.width && (t += "&width=" + o.width), t
                        }, f = function () {
                            if (typeof o.key == "string") {
                                if (o.endpoint.search(/objectify/i) >= 0) return s + "2/objectify";
                                if (o.endpoint.search(/preview/i) >= 0) return s + "1/preview"
                            }
                            return s + "1/oembed"
                        }, l = function (t, n) {
                            if (o.endpoint !== "oembed") return o.success(t, n);
                            var r, i, s, u, a, f, l, c;
                            return (r = t.type) === "photo" ? (u = t.title || "", s = [], o.addImageStyles && (o.maxWidth && (a = isNaN(parseInt(o.maxWidth, 10)) ? "" : "px", s.push("max-width: " + o.maxWidth + a)), o.maxHeight && (a = isNaN(parseInt(o.maxHeight, 10)) ? "" : "px", s.push("max-height: " + o.maxHeight + a))), s = s.join(";"), i = "<a href='" + n.url + "' target='_blank'><img style='" + s + "' src='" + t.url + "' alt='" + u + "' /></a>") : r === "video" ? i = t.html : r === "rich" ? i = t.html : (u = t.title || n.url, f = t.thumbnail_url ? '<img src="' + t.thumbnail_url + '" class="thumb" />' : "", c = t.description ? '<div class="description">' + t.description + "</div>" : "", l = t.provider_name ? '<a href="' + t.provider_url + '" class="provider">' + t.provider_name + "</a>" : "", i = f + "<a href='" + n.url + "'>" + u + "</a>", i += l, i += c), o.wrapElement && o.wrapElement === "div" && e.browser.msie && e.browser.version < 9 && (o.wrapElement = "span"), o.wrapElement && (i = "<" + o.wrapElement + ' class="' + o.className + '">' + i + "</" + o.wrapElement + ">"), t.code = i, typeof n.node != "undefined" && e(n.node).data("oembed", t).trigger("embedly-oembed", [t]), o.success(t, n)
                        }, c = function (t) {
                            var n, r, i, s, u;
                            i = e.map(t, function (t, n) {
                                return n === 0 && t.node !== null && (u = e(t.node), s = {
                                        width: u.parent().width(),
                                        height: u.parent().height()
                                    }), encodeURIComponent(t.url)
                            }).join(","), e.ajax({
                                    url: f(),
                                    dataType: "jsonp",
                                    data: a(i),
                                    success: function (n) {
                                        return e.each(n, function (e, n) {
                                            return n.type !== "error" ? l(n, t[e]) : o.error(t[e].node, n)
                                        })
                                    }
                                })
                        };
                    e.each(t, function (t, n) {
                        var r = typeof o.elems != "undefined" ? o.elems[t] : null;
                        typeof r != "undefined" && !u(n) && e(r).data("oembed", !1);
                        var s = {
                            url: n,
                            error_code: 400,
                            error_message: "HTTP 400: Bad Request",
                            type: "error"
                        };
                        return n && u(n) ? i.push({
                                url: n,
                                node: r
                            }) : o.error(r, s)
                    });
                    var h = [],
                        p = i.length;
                    for (var d = 0; 0 <= p ? d < p : d > p; d += 20) h = h.concat(c(i.slice(d, d + 20)));
                    return o.elems ? o.elems : this
                }
            }), e.embedly.version = "2.1.6", e.embedly.defaults = {
            endpoint: "oembed",
            chars: null,
            words: null,
            maxWidth: null,
            maxHeight: null,
            secure: !1,
            frame: !1,
            wmode: "opaque",
            autoplay: null,
            width: null,
            method: "replace",
            addImageStyles: !0,
            wrapElement: "div",
            className: "embed",
            urlRe: null,
            key: null,
            elems: [],
            success: null,
            error: null
        }, e.fn.embedly = function (t, n) {
            var r = typeof t != "undefined" ? t : {};
            typeof n != "undefined" && (t.success = n);
            var i = new Array,
                s = new Array;
            this.each(function () {
                typeof e(this).attr("href") != "undefined" ? (i.push(e(this).attr("href")), s.push(e(this))) : e(this).find("a").each(function () {
                    i.push(e(this).attr("href")), s.push(e(this))
                }), r.elems = s
            });
            var o = e.embedly(i, r);
            return this
        }
    }(jQuery),
    function (e) {
        e.fn.iframeAutoHeight = function (t) {
            function n(e) {
                i.debug && i.debug === !0 && window.console && console.log(e)
            }

            function r(t, r) {
                n("Diagnostics from '" + r + "'");
                try {
                    n("  " + e(t, window.top.document).contents().find("body")[0].scrollHeight + " for ...find('body')[0].scrollHeight"), n("  " + e(t.contentWindow.document).height() + " for ...contentWindow.document).height()"), n("  " + e(t.contentWindow.document.body).height() + " for ...contentWindow.document.body).height()")
                } catch (i) {
                    n("  unable to check in this state")
                }
                n("End diagnostics -> results vary by browser and when diagnostics are requested")
            }
            var i = e.extend({
                    heightOffset: 0,
                    minHeight: 0,
                    callback: function (e) {},
                    debug: !1,
                    diagnostics: !1
                }, t);
            return n(i), this.each(function () {
                function t(t) {
                    i.diagnostics && r(t, "resizeHeight");
                    var s = e(t, window.top.document).contents().find("body"),
                        o = s[0].scrollHeight + i.heightOffset;
                    o < i.minHeight && (n("new height is less than minHeight"), o = i.minHeight + i.heightOffset), n("New Height: " + o), t.style.height = o + "px", i.callback.apply(e(t), [{
                                newFrameHeight: o
                            }
                        ])
                }
                var s = 0;
                n(this), i.diagnostics && r(this, "each iframe");
                if (e.browser.safari || e.browser.opera) {
                    n("browser is webkit or opera"), e(this).load(function () {
                        var e = 0,
                            r = this;
                        r.style.height = "0px";
                        var i = function () {
                            t(r)
                        };
                        s === 0 && (e = 500), n("load delay: " + e), setTimeout(i, e), s++
                    });
                    var o = e(this).attr("src");
                    e(this).attr("src", ""), e(this).attr("src", o)
                } else e(this).load(function () {
                    t(this)
                })
            })
        }
    }(jQuery),
    function (e) {
        function n(e) {
            return typeof e == "object" ? e : {
                top: e,
                left: e
            }
        }
        var t = e.scrollTo = function (t, n, r) {
            e(window).scrollTo(t, n, r)
        };
        t.defaults = {
            axis: "xy",
            duration: parseFloat(e.fn.jquery) >= 1.3 ? 0 : 1
        }, t.window = function (t) {
            return e(window)._scrollable()
        }, e.fn._scrollable = function () {
            return this.map(function () {
                var t = this,
                    n = !t.nodeName || e.inArray(t.nodeName.toLowerCase(), ["iframe", "#document", "html", "body"]) != -1;
                if (!n) return t;
                var r = (t.contentWindow || t).document || t.ownerDocument || t;
                return e.browser.safari || r.compatMode == "BackCompat" ? r.body : r.documentElement
            })
        }, e.fn.scrollTo = function (r, i, s) {
            return typeof i == "object" && (s = i, i = 0), typeof s == "function" && (s = {
                    onAfter: s
                }), r == "max" && (r = 9e9), s = e.extend({}, t.defaults, s), i = i || s.speed || s.duration, s.queue = s.queue && s.axis.length > 1, s.queue && (i /= 2), s.offset = n(s.offset), s.over = n(s.over), this._scrollable().each(function () {
                    function h(e) {
                        u.animate(l, i, s.easing, e && function () {
                            e.call(this, r, s)
                        })
                    }
                    var o = this,
                        u = e(o),
                        a = r,
                        f, l = {}, c = u.is("html,body");
                    switch (typeof a) {
                    case "number":
                    case "string":
                        if (/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)) {
                            a = n(a);
                            break
                        }
                        a = e(a, this);
                    case "object":
                        if (a.is || a.style) f = (a = e(a)).offset()
                    }
                    e.each(s.axis.split(""), function (e, n) {
                        var r = n == "x" ? "Left" : "Top",
                            i = r.toLowerCase(),
                            p = "scroll" + r,
                            d = o[p],
                            v = t.max(o, n);
                        if (f) l[p] = f[i] + (c ? 0 : d - u.offset()[i]), s.margin && (l[p] -= parseInt(a.css("margin" + r)) || 0, l[p] -= parseInt(a.css("border" + r + "Width")) || 0), l[p] += s.offset[i] || 0, s.over[i] && (l[p] += a[n == "x" ? "width" : "height"]() * s.over[i]);
                        else {
                            var m = a[i];
                            l[p] = m.slice && m.slice(-1) == "%" ? parseFloat(m) / 100 * v : m
                        }
                        /^\d+$/.test(l[p]) && (l[p] = l[p] <= 0 ? 0 : Math.min(l[p], v)), !e && s.queue && (d != l[p] && h(s.onAfterFirst), delete l[p])
                    }), h(s.onAfter)
                }).end()
        }, t.max = function (t, n) {
            var r = n == "x" ? "Width" : "Height",
                i = "scroll" + r;
            if (!e(t).is("html,body")) return t[i] - e(t)[r.toLowerCase()]();
            var s = "client" + r,
                o = t.ownerDocument.documentElement,
                u = t.ownerDocument.body;
            return Math.max(o[i], u[i]) - Math.min(o[s], u[s])
        }
    }(jQuery),
    function (e) {
        var t = function (e, t) {
            return e << t | e >>> 32 - t
        }, n = function (e, t) {
                var n, r, i, s, o;
                return i = e & 2147483648, s = t & 2147483648, n = e & 1073741824, r = t & 1073741824, o = (e & 1073741823) + (t & 1073741823), n & r ? o ^ 2147483648 ^ i ^ s : n | r ? o & 1073741824 ? o ^ 3221225472 ^ i ^ s : o ^ 1073741824 ^ i ^ s : o ^ i ^ s
            }, r = function (e, t, n) {
                return e & t | ~e & n
            }, i = function (e, t, n) {
                return e & n | t & ~n
            }, s = function (e, t, n) {
                return e ^ t ^ n
            }, o = function (e, t, n) {
                return t ^ (e | ~n)
            }, u = function (e, i, s, o, u, a, f) {
                return e = n(e, n(n(r(i, s, o), u), f)), n(t(e, a), i)
            }, a = function (e, r, s, o, u, a, f) {
                return e = n(e, n(n(i(r, s, o), u), f)), n(t(e, a), r)
            }, f = function (e, r, i, o, u, a, f) {
                return e = n(e, n(n(s(r, i, o), u), f)), n(t(e, a), r)
            }, l = function (e, r, i, s, u, a, f) {
                return e = n(e, n(n(o(r, i, s), u), f)), n(t(e, a), r)
            }, c = function (e) {
                var t, n = e.length,
                    r = n + 8,
                    i = (r - r % 64) / 64,
                    s = (i + 1) * 16,
                    o = Array(s - 1),
                    u = 0,
                    a = 0;
                while (a < n) t = (a - a % 4) / 4, u = a % 4 * 8, o[t] = o[t] | e.charCodeAt(a) << u, a++;
                return t = (a - a % 4) / 4, u = a % 4 * 8, o[t] = o[t] | 128 << u, o[s - 2] = n << 3, o[s - 1] = n >>> 29, o
            }, h = function (e) {
                var t = "",
                    n = "",
                    r, i;
                for (i = 0; i <= 3; i++) r = e >>> i * 8 & 255, n = "0" + r.toString(16), t += n.substr(n.length - 2, 2);
                return t
            }, p = function (e) {
                e = e.replace(/\x0d\x0a/g, "\n");
                var t = "";
                for (var n = 0; n < e.length; n++) {
                    var r = e.charCodeAt(n);
                    r < 128 ? t += String.fromCharCode(r) : r > 127 && r < 2048 ? (t += String.fromCharCode(r >> 6 | 192), t += String.fromCharCode(r & 63 | 128)) : (t += String.fromCharCode(r >> 12 | 224), t += String.fromCharCode(r >> 6 & 63 | 128), t += String.fromCharCode(r & 63 | 128))
                }
                return t
            };
        e.extend({
                md5: function (e) {
                    var t = Array(),
                        r, i, s, o, d, v, m, g, y, b = 7,
                        w = 12,
                        E = 17,
                        S = 22,
                        x = 5,
                        T = 9,
                        N = 14,
                        C = 20,
                        k = 4,
                        L = 11,
                        A = 16,
                        O = 23,
                        M = 6,
                        _ = 10,
                        D = 15,
                        P = 21;
                    e = p(e), t = c(e), v = 1732584193, m = 4023233417, g = 2562383102, y = 271733878;
                    for (r = 0; r < t.length; r += 16) i = v, s = m, o = g, d = y, v = u(v, m, g, y, t[r + 0], b, 3614090360), y = u(y, v, m, g, t[r + 1], w, 3905402710), g = u(g, y, v, m, t[r + 2], E, 606105819), m = u(m, g, y, v, t[r + 3], S, 3250441966), v = u(v, m, g, y, t[r + 4], b, 4118548399), y = u(y, v, m, g, t[r + 5], w, 1200080426), g = u(g, y, v, m, t[r + 6], E, 2821735955), m = u(m, g, y, v, t[r + 7], S, 4249261313), v = u(v, m, g, y, t[r + 8], b, 1770035416), y = u(y, v, m, g, t[r + 9], w, 2336552879), g = u(g, y, v, m, t[r + 10], E, 4294925233), m = u(m, g, y, v, t[r + 11], S, 2304563134), v = u(v, m, g, y, t[r + 12], b, 1804603682), y = u(y, v, m, g, t[r + 13], w, 4254626195), g = u(g, y, v, m, t[r + 14], E, 2792965006), m = u(m, g, y, v, t[r + 15], S, 1236535329), v = a(v, m, g, y, t[r + 1], x, 4129170786), y = a(y, v, m, g, t[r + 6], T, 3225465664), g = a(g, y, v, m, t[r + 11], N, 643717713), m = a(m, g, y, v, t[r + 0], C, 3921069994), v = a(v, m, g, y, t[r + 5], x, 3593408605), y = a(y, v, m, g, t[r + 10], T, 38016083), g = a(g, y, v, m, t[r + 15], N, 3634488961), m = a(m, g, y, v, t[r + 4], C, 3889429448), v = a(v, m, g, y, t[r + 9], x, 568446438), y = a(y, v, m, g, t[r + 14], T, 3275163606), g = a(g, y, v, m, t[r + 3], N, 4107603335), m = a(m, g, y, v, t[r + 8], C, 1163531501), v = a(v, m, g, y, t[r + 13], x, 2850285829), y = a(y, v, m, g, t[r + 2], T, 4243563512), g = a(g, y, v, m, t[r + 7], N, 1735328473), m = a(m, g, y, v, t[r + 12], C, 2368359562), v = f(v, m, g, y, t[r + 5], k, 4294588738), y = f(y, v, m, g, t[r + 8], L, 2272392833), g = f(g, y, v, m, t[r + 11], A, 1839030562), m = f(m, g, y, v, t[r + 14], O, 4259657740), v = f(v, m, g, y, t[r + 1], k, 2763975236), y = f(y, v, m, g, t[r + 4], L, 1272893353), g = f(g, y, v, m, t[r + 7], A, 4139469664), m = f(m, g, y, v, t[r + 10], O, 3200236656), v = f(v, m, g, y, t[r + 13], k, 681279174), y = f(y, v, m, g, t[r + 0], L, 3936430074), g = f(g, y, v, m, t[r + 3], A, 3572445317), m = f(m, g, y, v, t[r + 6], O, 76029189), v = f(v, m, g, y, t[r + 9], k, 3654602809), y = f(y, v, m, g, t[r + 12], L, 3873151461), g = f(g, y, v, m, t[r + 15], A, 530742520), m = f(m, g, y, v, t[r + 2], O, 3299628645), v = l(v, m, g, y, t[r + 0], M, 4096336452), y = l(y, v, m, g, t[r + 7], _, 1126891415), g = l(g, y, v, m, t[r + 14], D, 2878612391), m = l(m, g, y, v, t[r + 5], P, 4237533241), v = l(v, m, g, y, t[r + 12], M, 1700485571), y = l(y, v, m, g, t[r + 3], _, 2399980690), g = l(g, y, v, m, t[r + 10], D, 4293915773), m = l(m, g, y, v, t[r + 1], P, 2240044497), v = l(v, m, g, y, t[r + 8], M, 1873313359), y = l(y, v, m, g, t[r + 15], _, 4264355552), g = l(g, y, v, m, t[r + 6], D, 2734768916), m = l(m, g, y, v, t[r + 13], P, 1309151649), v = l(v, m, g, y, t[r + 4], M, 4149444226), y = l(y, v, m, g, t[r + 11], _, 3174756917), g = l(g, y, v, m, t[r + 2], D, 718787259), m = l(m, g, y, v, t[r + 9], P, 3951481745), v = n(v, i), m = n(m, s), g = n(g, o), y = n(y, d);
                    var H = h(v) + h(m) + h(g) + h(y);
                    return H.toLowerCase()
                }
            })
    }(jQuery),
    function () {
        function C(e, t, n) {
            if (e === t) return e !== 0 || 1 / e == 1 / t;
            if (e == null || t == null) return e === t;
            e._chain && (e = e._wrapped), t._chain && (t = t._wrapped);
            if (e.isEqual && S.isFunction(e.isEqual)) return e.isEqual(t);
            if (t.isEqual && S.isFunction(t.isEqual)) return t.isEqual(e);
            var r = a.call(e);
            if (r != a.call(t)) return !1;
            switch (r) {
            case "[object String]":
                return e == String(t);
            case "[object Number]":
                return e != +e ? t != +t : e == 0 ? 1 / e == 1 / t : e == +t;
            case "[object Date]":
            case "[object Boolean]":
                return +e == +t;
            case "[object RegExp]":
                return e.source == t.source && e.global == t.global && e.multiline == t.multiline && e.ignoreCase == t.ignoreCase
            }
            if (typeof e != "object" || typeof t != "object") return !1;
            var i = n.length;
            while (i--)
                if (n[i] == e) return !0;
            n.push(e);
            var s = 0,
                o = !0;
            if (r == "[object Array]") {
                s = e.length, o = s == t.length;
                if (o)
                    while (s--)
                        if (!(o = s in e == s in t && C(e[s], t[s], n))) break
            } else {
                if ("constructor" in e != "constructor" in t || e.constructor != t.constructor) return !1;
                for (var u in e)
                    if (f.call(e, u)) {
                        s++;
                        if (!(o = f.call(t, u) && C(e[u], t[u], n))) break
                    }
                if (o) {
                    for (u in t)
                        if (f.call(t, u) && !(s--)) break;
                    o = !s
                }
            }
            return n.pop(), o
        }
        var e = this,
            t = e._,
            n = {}, r = Array.prototype,
            i = Object.prototype,
            s = Function.prototype,
            o = r.slice,
            u = r.unshift,
            a = i.toString,
            f = i.hasOwnProperty,
            l = r.forEach,
            c = r.map,
            h = r.reduce,
            p = r.reduceRight,
            d = r.filter,
            v = r.every,
            m = r.some,
            g = r.indexOf,
            y = r.lastIndexOf,
            b = Array.isArray,
            w = Object.keys,
            E = s.bind,
            S = function (e) {
                return new A(e)
            };
        typeof exports != "undefined" ? (typeof module != "undefined" && module.exports && (exports = module.exports = S), exports._ = S) : typeof define == "function" && define.amd ? define("underscore", function () {
            return S
        }) : e._ = S, S.VERSION = "1.2.4";
        var x = S.each = S.forEach = function (e, t, r) {
            if (e == null) return;
            if (l && e.forEach === l) e.forEach(t, r);
            else if (e.length === +e.length) {
                for (var i = 0, s = e.length; i < s; i++)
                    if (i in e && t.call(r, e[i], i, e) === n) return
            } else
                for (var o in e)
                    if (f.call(e, o) && t.call(r, e[o], o, e) === n) return
        };
        S.map = function (e, t, n) {
            var r = [];
            return e == null ? r : c && e.map === c ? e.map(t, n) : (x(e, function (e, i, s) {
                        r[r.length] = t.call(n, e, i, s)
                    }), e.length === +e.length && (r.length = e.length), r)
        }, S.reduce = S.foldl = S.inject = function (e, t, n, r) {
            var i = arguments.length > 2;
            e == null && (e = []);
            if (h && e.reduce === h) return r && (t = S.bind(t, r)), i ? e.reduce(t, n) : e.reduce(t);
            x(e, function (e, s, o) {
                i ? n = t.call(r, n, e, s, o) : (n = e, i = !0)
            });
            if (!i) throw new TypeError("Reduce of empty array with no initial value");
            return n
        }, S.reduceRight = S.foldr = function (e, t, n, r) {
            var i = arguments.length > 2;
            e == null && (e = []);
            if (p && e.reduceRight === p) return r && (t = S.bind(t, r)), i ? e.reduceRight(t, n) : e.reduceRight(t);
            var s = S.toArray(e).reverse();
            return r && !i && (t = S.bind(t, r)), i ? S.reduce(s, t, n, r) : S.reduce(s, t)
        }, S.find = S.detect = function (e, t, n) {
            var r;
            return T(e, function (e, i, s) {
                if (t.call(n, e, i, s)) return r = e, !0
            }), r
        }, S.filter = S.select = function (e, t, n) {
            var r = [];
            return e == null ? r : d && e.filter === d ? e.filter(t, n) : (x(e, function (e, i, s) {
                        t.call(n, e, i, s) && (r[r.length] = e)
                    }), r)
        }, S.reject = function (e, t, n) {
            var r = [];
            return e == null ? r : (x(e, function (e, i, s) {
                        t.call(n, e, i, s) || (r[r.length] = e)
                    }), r)
        }, S.every = S.all = function (e, t, r) {
            var i = !0;
            return e == null ? i : v && e.every === v ? e.every(t, r) : (x(e, function (e, s, o) {
                        if (!(i = i && t.call(r, e, s, o))) return n
                    }), i)
        };
        var T = S.some = S.any = function (e, t, r) {
            t || (t = S.identity);
            var i = !1;
            return e == null ? i : m && e.some === m ? e.some(t, r) : (x(e, function (e, s, o) {
                        if (i || (i = t.call(r, e, s, o))) return n
                    }), !! i)
        };
        S.include = S.contains = function (e, t) {
            var n = !1;
            return e == null ? n : g && e.indexOf === g ? e.indexOf(t) != -1 : (n = T(e, function (e) {
                        return e === t
                    }), n)
        }, S.invoke = function (e, t) {
            var n = o.call(arguments, 2);
            return S.map(e, function (e) {
                return (S.isFunction(t) ? t || e : e[t]).apply(e, n)
            })
        }, S.pluck = function (e, t) {
            return S.map(e, function (e) {
                return e[t]
            })
        }, S.max = function (e, t, n) {
            if (!t && S.isArray(e)) return Math.max.apply(Math, e);
            if (!t && S.isEmpty(e)) return -Infinity;
            var r = {
                computed: -Infinity
            };
            return x(e, function (e, i, s) {
                var o = t ? t.call(n, e, i, s) : e;
                o >= r.computed && (r = {
                        value: e,
                        computed: o
                    })
            }), r.value
        }, S.min = function (e, t, n) {
            if (!t && S.isArray(e)) return Math.min.apply(Math, e);
            if (!t && S.isEmpty(e)) return Infinity;
            var r = {
                computed: Infinity
            };
            return x(e, function (e, i, s) {
                var o = t ? t.call(n, e, i, s) : e;
                o < r.computed && (r = {
                        value: e,
                        computed: o
                    })
            }), r.value
        }, S.shuffle = function (e) {
            var t = [],
                n;
            return x(e, function (e, r, i) {
                r == 0 ? t[0] = e : (n = Math.floor(Math.random() * (r + 1)), t[r] = t[n], t[n] = e)
            }), t
        }, S.sortBy = function (e, t, n) {
            return S.pluck(S.map(e, function (e, r, i) {
                        return {
                            value: e,
                            criteria: t.call(n, e, r, i)
                        }
                    }).sort(function (e, t) {
                        var n = e.criteria,
                            r = t.criteria;
                        return n < r ? -1 : n > r ? 1 : 0
                    }), "value")
        }, S.groupBy = function (e, t) {
            var n = {}, r = S.isFunction(t) ? t : function (e) {
                    return e[t]
                };
            return x(e, function (e, t) {
                var i = r(e, t);
                (n[i] || (n[i] = [])).push(e)
            }), n
        }, S.sortedIndex = function (e, t, n) {
            n || (n = S.identity);
            var r = 0,
                i = e.length;
            while (r < i) {
                var s = r + i >> 1;
                n(e[s]) < n(t) ? r = s + 1 : i = s
            }
            return r
        }, S.toArray = function (e) {
            return e ? e.toArray ? e.toArray() : S.isArray(e) ? o.call(e) : S.isArguments(e) ? o.call(e) : S.values(e) : []
        }, S.size = function (e) {
            return S.toArray(e).length
        }, S.first = S.head = function (e, t, n) {
            return t != null && !n ? o.call(e, 0, t) : e[0]
        }, S.initial = function (e, t, n) {
            return o.call(e, 0, e.length - (t == null || n ? 1 : t))
        }, S.last = function (e, t, n) {
            return t != null && !n ? o.call(e, Math.max(e.length - t, 0)) : e[e.length - 1]
        }, S.rest = S.tail = function (e, t, n) {
            return o.call(e, t == null || n ? 1 : t)
        }, S.compact = function (e) {
            return S.filter(e, function (e) {
                return !!e
            })
        }, S.flatten = function (e, t) {
            return S.reduce(e, function (e, n) {
                return S.isArray(n) ? e.concat(t ? n : S.flatten(n)) : (e[e.length] = n, e)
            }, [])
        }, S.without = function (e) {
            return S.difference(e, o.call(arguments, 1))
        }, S.uniq = S.unique = function (e, t, n) {
            var r = n ? S.map(e, n) : e,
                i = [];
            return S.reduce(r, function (n, r, s) {
                if (0 == s || (t === !0 ? S.last(n) != r : !S.include(n, r))) n[n.length] = r, i[i.length] = e[s];
                return n
            }, []), i
        }, S.union = function () {
            return S.uniq(S.flatten(arguments, !0))
        }, S.intersection = S.intersect = function (e) {
            var t = o.call(arguments, 1);
            return S.filter(S.uniq(e), function (e) {
                return S.every(t, function (t) {
                    return S.indexOf(t, e) >= 0
                })
            })
        }, S.difference = function (e) {
            var t = S.flatten(o.call(arguments, 1));
            return S.filter(e, function (e) {
                return !S.include(t, e)
            })
        }, S.zip = function () {
            var e = o.call(arguments),
                t = S.max(S.pluck(e, "length")),
                n = new Array(t);
            for (var r = 0; r < t; r++) n[r] = S.pluck(e, "" + r);
            return n
        }, S.indexOf = function (e, t, n) {
            if (e == null) return -1;
            var r, i;
            if (n) return r = S.sortedIndex(e, t), e[r] === t ? r : -1;
            if (g && e.indexOf === g) return e.indexOf(t);
            for (r = 0, i = e.length; r < i; r++)
                if (r in e && e[r] === t) return r;
            return -1
        }, S.lastIndexOf = function (e, t) {
            if (e == null) return -1;
            if (y && e.lastIndexOf === y) return e.lastIndexOf(t);
            var n = e.length;
            while (n--)
                if (n in e && e[n] === t) return n;
            return -1
        }, S.range = function (e, t, n) {
            arguments.length <= 1 && (t = e || 0, e = 0), n = arguments[2] || 1;
            var r = Math.max(Math.ceil((t - e) / n), 0),
                i = 0,
                s = new Array(r);
            while (i < r) s[i++] = e, e += n;
            return s
        };
        var N = function () {};
        S.bind = function (t, n) {
            var r, i;
            if (t.bind === E && E) return E.apply(t, o.call(arguments, 1));
            if (!S.isFunction(t)) throw new TypeError;
            return i = o.call(arguments, 2), r = function () {
                if (this instanceof r) {
                    N.prototype = t.prototype;
                    var e = new N,
                        s = t.apply(e, i.concat(o.call(arguments)));
                    return Object(s) === s ? s : e
                }
                return t.apply(n, i.concat(o.call(arguments)))
            }
        }, S.bindAll = function (e) {
            var t = o.call(arguments, 1);
            return t.length == 0 && (t = S.functions(e)), x(t, function (t) {
                e[t] = S.bind(e[t], e)
            }), e
        }, S.memoize = function (e, t) {
            var n = {};
            return t || (t = S.identity),
            function () {
                var r = t.apply(this, arguments);
                return f.call(n, r) ? n[r] : n[r] = e.apply(this, arguments)
            }
        }, S.delay = function (e, t) {
            var n = o.call(arguments, 2);
            return setTimeout(function () {
                return e.apply(e, n)
            }, t)
        }, S.defer = function (e) {
            return S.delay.apply(S, [e, 1].concat(o.call(arguments, 1)))
        }, S.throttle = function (e, t) {
            var n, r, i, s, o, u = S.debounce(function () {
                    o = s = !1
                }, t);
            return function () {
                n = this, r = arguments;
                var a = function () {
                    i = null, o && e.apply(n, r), u()
                };
                i || (i = setTimeout(a, t)), s ? o = !0 : e.apply(n, r), u(), s = !0
            }
        }, S.debounce = function (e, t) {
            var n;
            return function () {
                var r = this,
                    i = arguments,
                    s = function () {
                        n = null, e.apply(r, i)
                    };
                clearTimeout(n), n = setTimeout(s, t)
            }
        }, S.once = function (e) {
            var t = !1,
                n;
            return function () {
                return t ? n : (t = !0, n = e.apply(this, arguments))
            }
        }, S.wrap = function (e, t) {
            return function () {
                var n = [e].concat(o.call(arguments, 0));
                return t.apply(this, n)
            }
        }, S.compose = function () {
            var e = arguments;
            return function () {
                var t = arguments;
                for (var n = e.length - 1; n >= 0; n--) t = [e[n].apply(this, t)];
                return t[0]
            }
        }, S.after = function (e, t) {
            return e <= 0 ? t() : function () {
                if (--e < 1) return t.apply(this, arguments)
            }
        }, S.keys = w || function (e) {
            if (e !== Object(e)) throw new TypeError("Invalid object");
            var t = [];
            for (var n in e) f.call(e, n) && (t[t.length] = n);
            return t
        }, S.values = function (e) {
            return S.map(e, S.identity)
        }, S.functions = S.methods = function (e) {
            var t = [];
            for (var n in e) S.isFunction(e[n]) && t.push(n);
            return t.sort()
        }, S.extend = function (e) {
            return x(o.call(arguments, 1), function (t) {
                for (var n in t) t[n] !== void 0 && (e[n] = t[n])
            }), e
        }, S.defaults = function (e) {
            return x(o.call(arguments, 1), function (t) {
                for (var n in t) e[n] == null && (e[n] = t[n])
            }), e
        }, S.clone = function (e) {
            return S.isObject(e) ? S.isArray(e) ? e.slice() : S.extend({}, e) : e
        }, S.tap = function (e, t) {
            return t(e), e
        }, S.isEqual = function (e, t) {
            return C(e, t, [])
        }, S.isEmpty = function (e) {
            if (S.isArray(e) || S.isString(e)) return e.length === 0;
            for (var t in e)
                if (f.call(e, t)) return !1;
            return !0
        }, S.isElement = function (e) {
            return !!e && e.nodeType == 1
        }, S.isArray = b || function (e) {
            return a.call(e) == "[object Array]"
        }, S.isObject = function (e) {
            return e === Object(e)
        }, S.isArguments = function (e) {
            return a.call(e) == "[object Arguments]"
        }, S.isArguments(arguments) || (S.isArguments = function (e) {
            return !!e && !! f.call(e, "callee")
        }), S.isFunction = function (e) {
            return a.call(e) == "[object Function]"
        }, S.isString = function (e) {
            return a.call(e) == "[object String]"
        }, S.isNumber = function (e) {
            return a.call(e) == "[object Number]"
        }, S.isNaN = function (e) {
            return e !== e
        }, S.isBoolean = function (e) {
            return e === !0 || e === !1 || a.call(e) == "[object Boolean]"
        }, S.isDate = function (e) {
            return a.call(e) == "[object Date]"
        }, S.isRegExp = function (e) {
            return a.call(e) == "[object RegExp]"
        }, S.isNull = function (e) {
            return e === null
        }, S.isUndefined = function (e) {
            return e === void 0
        }, S.noConflict = function () {
            return e._ = t, this
        }, S.identity = function (e) {
            return e
        }, S.times = function (e, t, n) {
            for (var r = 0; r < e; r++) t.call(n, r)
        }, S.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;")
        }, S.mixin = function (e) {
            x(S.functions(e), function (t) {
                M(t, S[t] = e[t])
            })
        };
        var k = 0;
        S.uniqueId = function (e) {
            var t = k++;
            return e ? e + t : t
        }, S.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var L = /.^/;
        S.template = function (e, t) {
            var n = S.templateSettings,
                r = "var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('" + e.replace(/\\/g, "\\\\").replace(/'/g, "\\'").replace(n.escape || L, function (e, t) {
                    return "',_.escape(" + t.replace(/\\'/g, "'") + "),'"
                }).replace(n.interpolate || L, function (e, t) {
                    return "'," + t.replace(/\\'/g, "'") + ",'"
                }).replace(n.evaluate || L, function (e, t) {
                    return "');" + t.replace(/\\'/g, "'").replace(/[\r\n\t]/g, " ").replace(/\\\\/g, "\\") + ";__p.push('"
                }).replace(/\r/g, "\\r").replace(/\n/g, "\\n").replace(/\t/g, "\\t") + "');}return __p.join('');",
                i = new Function("obj", "_", r);
            return t ? i(t, S) : function (e) {
                return i.call(this, e, S)
            }
        }, S.chain = function (e) {
            return S(e).chain()
        };
        var A = function (e) {
            this._wrapped = e
        };
        S.prototype = A.prototype;
        var O = function (e, t) {
            return t ? S(e).chain() : e
        }, M = function (e, t) {
                A.prototype[e] = function () {
                    var e = o.call(arguments);
                    return u.call(e, this._wrapped), O(t.apply(S, e), this._chain)
                }
            };
        S.mixin(S), x(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (e) {
            var t = r[e];
            A.prototype[e] = function () {
                var n = this._wrapped;
                t.apply(n, arguments);
                var r = n.length;
                return (e == "shift" || e == "splice") && r === 0 && delete n[0], O(n, this._chain)
            }
        }), x(["concat", "join", "slice"], function (e) {
            var t = r[e];
            A.prototype[e] = function () {
                return O(t.apply(this._wrapped, arguments), this._chain)
            }
        }), A.prototype.chain = function () {
            return this._chain = !0, this
        }, A.prototype.value = function () {
            return this._wrapped
        }
    }.call(this),
    function () {
        var e = this,
            t = e.Backbone,
            n = Array.prototype.slice,
            r;
        typeof exports != "undefined" ? r = exports : r = e.Backbone = {}, r.VERSION = "0.5.3";
        var i = e._;
        !i && typeof require != "undefined" && (i = require("underscore"));
        var s = e.jQuery || e.Zepto || e.ender;
        r.noConflict = function () {
            return e.Backbone = t, this
        }, r.emulateHTTP = !1, r.emulateJSON = !1, r.Events = {
            bind: function (e, t, n) {
                var r = this._callbacks || (this._callbacks = {}),
                    i = r[e] || (r[e] = {}),
                    s = i.tail || (i.tail = i.next = {});
                return s.callback = t, s.context = n, i.tail = s.next = {}, this
            },
            unbind: function (e, t) {
                var n, r, i;
                if (!e) this._callbacks = null;
                else if (n = this._callbacks)
                    if (!t) n[e] = {};
                    else if (r = n[e])
                    while ((i = r) && (r = r.next)) {
                        if (r.callback !== t) continue;
                        i.next = r.next, r.context = r.callback = null;
                        break
                }
                return this
            },
            trigger: function (e) {
                var t, r, i, s, o, u = ["all", e];
                if (!(r = this._callbacks)) return this;
                while (o = u.pop()) {
                    if (!(t = r[o])) continue;
                    s = o == "all" ? arguments : n.call(arguments, 1);
                    while (t = t.next)(i = t.callback) && i.apply(t.context || this, s)
                }
                return this
            }
        }, r.Model = function (e, t) {
            var n;
            e || (e = {}), t && t.parse && (e = this.parse(e));
            if (n = b(this, "defaults")) e = i.extend({}, n, e);
            this.attributes = {}, this._escapedAttributes = {}, this.cid = i.uniqueId("c"), this.set(e, {
                    silent: !0
                }), this._changed = !1, this._previousAttributes = i.clone(this.attributes), t && t.collection && (this.collection = t.collection), this.initialize(e, t)
        }, i.extend(r.Model.prototype, r.Events, {
                _changed: !1,
                idAttribute: "id",
                initialize: function () {},
                toJSON: function () {
                    return i.clone(this.attributes)
                },
                get: function (e) {
                    return this.attributes[e]
                },
                escape: function (e) {
                    var t;
                    if (t = this._escapedAttributes[e]) return t;
                    var n = this.attributes[e];
                    return this._escapedAttributes[e] = i.escape(n == null ? "" : "" + n)
                },
                has: function (e) {
                    return this.attributes[e] != null
                },
                set: function (e, t, n) {
                    var r;
                    i.isObject(e) || e == null ? (r = e, n = t) : (r = {}, r[e] = t), n || (n = {});
                    if (!r) return this;
                    r.attributes && (r = r.attributes);
                    if (n.unset)
                        for (var s in r) r[s] = void 0;
                    var o = this.attributes,
                        u = this._escapedAttributes;
                    if (!n.silent && this.validate && !this._performValidation(r, n)) return !1;
                    this.idAttribute in r && (this.id = r[this.idAttribute]);
                    var a = this._changing;
                    this._changing = !0;
                    for (var s in r) {
                        var f = r[s];
                        if (!i.isEqual(o[s], f) || n.unset && s in o) n.unset ? delete o[s] : o[s] = f, delete u[s], this._changed = !0, n.silent || this.trigger("change:" + s, this, f, n)
                    }
                    return a || (!n.silent && this._changed && this.change(n), this._changing = !1), this
                },
                unset: function (e, t) {
                    return (t || (t = {})).unset = !0, this.set(e, null, t)
                },
                clear: function (e) {
                    return (e || (e = {})).unset = !0, this.set(i.clone(this.attributes), e)
                },
                fetch: function (e) {
                    e || (e = {});
                    var t = this,
                        n = e.success;
                    return e.success = function (r, i, s) {
                        if (!t.set(t.parse(r, s), e)) return !1;
                        n && n(t, r)
                    }, e.error = E(e.error, t, e), (this.sync || r.sync).call(this, "read", this, e)
                },
                save: function (e, t) {
                    t || (t = {});
                    if (e && !this.set(e, t)) return !1;
                    var n = this,
                        i = t.success;
                    t.success = function (e, r, s) {
                        if (!n.set(n.parse(e, s), t)) return !1;
                        i && i(n, e, s)
                    }, t.error = E(t.error, n, t);
                    var s = this.isNew() ? "create" : "update";
                    return (this.sync || r.sync).call(this, s, this, t)
                },
                destroy: function (e) {
                    e || (e = {});
                    if (this.isNew()) return this.trigger("destroy", this, this.collection, e);
                    var t = this,
                        n = e.success;
                    return e.success = function (r) {
                        t.trigger("destroy", t, t.collection, e), n && n(t, r)
                    }, e.error = E(e.error, t, e), (this.sync || r.sync).call(this, "delete", this, e)
                },
                url: function () {
                    var e = b(this.collection, "url") || b(this, "urlRoot") || w();
                    return this.isNew() ? e : e + (e.charAt(e.length - 1) == "/" ? "" : "/") + encodeURIComponent(this.id)
                },
                parse: function (e, t) {
                    return e
                },
                clone: function () {
                    return new this.constructor(this)
                },
                isNew: function () {
                    return this.id == null
                },
                change: function (e) {
                    this.trigger("change", this, e), this._previousAttributes = i.clone(this.attributes), this._changed = !1
                },
                hasChanged: function (e) {
                    return e ? !i.isEqual(this._previousAttributes[e], this.attributes[e]) : this._changed
                },
                changedAttributes: function (e) {
                    if (!this._changed) return !1;
                    e || (e = this.attributes);
                    var t = !1,
                        n = this._previousAttributes;
                    for (var r in e) {
                        if (i.isEqual(n[r], e[r])) continue;
                        (t || (t = {}))[r] = e[r]
                    }
                    for (var r in n) r in e || ((t || (t = {}))[r] = void 0);
                    return t
                },
                previous: function (e) {
                    return !e || !this._previousAttributes ? null : this._previousAttributes[e]
                },
                previousAttributes: function () {
                    return i.clone(this._previousAttributes)
                },
                _performValidation: function (e, t) {
                    var n = this.validate(e, t);
                    return n ? (t.error ? t.error(this, n, t) : this.trigger("error", this, n, t), !1) : !0
                }
            }), r.Collection = function (e, t) {
            t || (t = {}), t.comparator && (this.comparator = t.comparator), i.bindAll(this, "_onModelEvent", "_removeReference"), this._reset(), e && this.reset(e, {
                    silent: !0
                }), this.initialize.apply(this, arguments)
        }, i.extend(r.Collection.prototype, r.Events, {
                model: r.Model,
                initialize: function () {},
                toJSON: function () {
                    return this.map(function (e) {
                        return e.toJSON()
                    })
                },
                add: function (e, t) {
                    var n, r;
                    t || (t = {}), i.isArray(e) || (e = [e]);
                    for (n = 0, r = e.length; n < r; n++) t && t.at == +t.at && n && (t.at += 1), e[n] = this._add(e[n], t);
                    this.comparator && this.sort({
                            silent: !0
                        });
                    if (!t.silent)
                        for (n = 0; n < r; n++) e[n].trigger("add", e[n], this, t);
                    return this
                },
                remove: function (e, t) {
                    t || (t = {}), i.isArray(e) || (e = [e]);
                    for (var n = 0, r = e.length; n < r; n++) this._remove(e[n], t);
                    return this
                },
                get: function (e) {
                    return e == null ? null : this._byId[e.id != null ? e.id : e]
                },
                getByCid: function (e) {
                    return e && this._byCid[e.cid || e]
                },
                at: function (e) {
                    return this.models[e]
                },
                sort: function (e) {
                    e || (e = {});
                    if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
                    return this.comparator.length == 1 ? this.models = this.sortBy(this.comparator) : this.models.sort(this.comparator), e.silent || this.trigger("reset", this, e), this
                },
                pluck: function (e) {
                    return i.map(this.models, function (t) {
                        return t.get(e)
                    })
                },
                reset: function (e, t) {
                    return e || (e = []), t || (t = {}), this.each(this._removeReference), this._reset(), this.add(e, {
                            silent: !0,
                            parse: t.parse
                        }), t.silent || this.trigger("reset", this, t), this
                },
                fetch: function (e) {
                    e || (e = {}), e.parse === undefined && (e.parse = !0);
                    var t = this,
                        n = e.success;
                    return e.success = function (r, i, s) {
                        t[e.add ? "add" : "reset"](t.parse(r, s), e), n && n(t, r)
                    }, e.error = E(e.error, t, e), (this.sync || r.sync).call(this, "read", this, e)
                },
                create: function (e, t) {
                    var n = this;
                    t || (t = {}), e = this._prepareModel(e, t);
                    if (!e) return !1;
                    var r = t.success;
                    return t.success = function (e, i, s) {
                        n.add(e, t), r && r(e, i, s)
                    }, e.save(null, t), e
                },
                parse: function (e, t) {
                    return e
                },
                chain: function () {
                    return i(this.models).chain()
                },
                _reset: function (e) {
                    this.length = 0, this.models = [], this._byId = {}, this._byCid = {}
                },
                _prepareModel: function (e, t) {
                    if (e instanceof r.Model) e.collection || (e.collection = this);
                    else {
                        var n = e;
                        e = new this.model(n, {
                                collection: this,
                                parse: t.parse
                            }), e.validate && !e._performValidation(e.attributes, t) && (e = !1)
                    }
                    return e
                },
                _add: function (e, t) {
                    e = this._prepareModel(e, t);
                    if (!e) return !1;
                    var n = this.getByCid(e);
                    if (n) throw new Error(["Can't add the same model to a set twice", n.id]);
                    return this._byId[e.id] = e, this._byCid[e.cid] = e, t.at != null ? this.models.splice(t.at, 0, e) : this.models.push(e), e.bind("all", this._onModelEvent), this.length++, e
                },
                _remove: function (e, t) {
                    e = this.getByCid(e) || this.get(e);
                    if (!e) return null;
                    delete this._byId[e.id], delete this._byCid[e.cid];
                    var n = this.indexOf(e);
                    return this.models.splice(n, 1), this.length--, t.silent || e.trigger("remove", e, this, t), this._removeReference(e), e
                },
                _removeReference: function (e) {
                    this == e.collection && delete e.collection, e.unbind("all", this._onModelEvent)
                },
                _onModelEvent: function (e, t, n, r) {
                    if ((e == "add" || e == "remove") && n != this) return;
                    e == "destroy" && this._remove(t, r), t && e === "change:" + t.idAttribute && (delete this._byId[t.previous(t.idAttribute)], this._byId[t.id] = t), this.trigger.apply(this, arguments)
                }
            });
        var o = ["forEach", "each", "map", "reduce", "reduceRight", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "sortBy", "sortedIndex", "toArray", "size", "first", "rest", "last", "without", "indexOf", "lastIndexOf", "isEmpty", "groupBy"];
        i.each(o, function (e) {
            r.Collection.prototype[e] = function () {
                return i[e].apply(i, [this.models].concat(i.toArray(arguments)))
            }
        }), r.Router = function (e) {
            e || (e = {}), e.routes && (this.routes = e.routes), this._bindRoutes(), this.initialize.apply(this, arguments)
        };
        var u = /:\w+/g,
            a = /\*\w+/g,
            f = /[-[\]{}()+?.,\\^$|#\s]/g;
        i.extend(r.Router.prototype, r.Events, {
                initialize: function () {},
                route: function (e, t, n) {
                    r.history || (r.history = new r.History), i.isRegExp(e) || (e = this._routeToRegExp(e)), r.history.route(e, i.bind(function (r) {
                                var i = this._extractParameters(e, r);
                                n && n.apply(this, i), this.trigger.apply(this, ["route:" + t].concat(i))
                            }, this))
                },
                navigate: function (e, t) {
                    r.history.navigate(e, t)
                },
                _bindRoutes: function () {
                    if (!this.routes) return;
                    var e = [];
                    for (var t in this.routes) e.unshift([t, this.routes[t]]);
                    for (var n = 0, r = e.length; n < r; n++) this.route(e[n][0], e[n][1], this[e[n][1]])
                },
                _routeToRegExp: function (e) {
                    return e = e.replace(f, "\\$&").replace(u, "([^/]*)").replace(a, "(.*?)"), new RegExp("^" + e + "$")
                },
                _extractParameters: function (e, t) {
                    return e.exec(t).slice(1)
                }
            }), r.History = function () {
            this.handlers = [], i.bindAll(this, "checkUrl")
        };
        var l = /^#/,
            c = /msie [\w.]+/,
            h = !1;
        i.extend(r.History.prototype, {
                interval: 50,
                getFragment: function (e, t) {
                    if (e == null)
                        if (this._hasPushState || t) {
                            e = window.location.pathname;
                            var n = window.location.search;
                            n && (e += n)
                        } else e = window.location.hash;
                    return e = decodeURIComponent(e.replace(l, "")), e.indexOf(this.options.root) || (e = e.substr(this.options.root.length)), e
                },
                start: function (e) {
                    if (h) throw new Error("Backbone.history has already been started");
                    this.options = i.extend({}, {
                            root: "/"
                        }, this.options, e), this._wantsPushState = !! this.options.pushState, this._hasPushState = !! (this.options.pushState && window.history && window.history.pushState);
                    var t = this.getFragment(),
                        n = document.documentMode,
                        r = c.exec(navigator.userAgent.toLowerCase()) && (!n || n <= 7);
                    r && (this.iframe = s('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow, this.navigate(t)), this._hasPushState ? s(window).bind("popstate", this.checkUrl) : "onhashchange" in window && !r ? s(window).bind("hashchange", this.checkUrl) : setInterval(this.checkUrl, this.interval), this.fragment = t, h = !0;
                    var o = window.location,
                        u = o.pathname == this.options.root;
                    if (this._wantsPushState && !this._hasPushState && !u) return this.fragment = this.getFragment(null, !0), window.location.replace(this.options.root + "#" + this.fragment), !0;
                    this._wantsPushState && this._hasPushState && u && o.hash && (this.fragment = o.hash.replace(l, ""), window.history.replaceState({}, document.title, o.protocol + "//" + o.host + this.options.root + this.fragment));
                    if (!this.options.silent) return this.loadUrl()
                },
                route: function (e, t) {
                    this.handlers.unshift({
                            route: e,
                            callback: t
                        })
                },
                checkUrl: function (e) {
                    var t = this.getFragment();
                    t == this.fragment && this.iframe && (t = this.getFragment(this.iframe.location.hash));
                    if (t == this.fragment || t == decodeURIComponent(this.fragment)) return !1;
                    this.iframe && this.navigate(t), this.loadUrl() || this.loadUrl(window.location.hash)
                },
                loadUrl: function (e) {
                    var t = this.fragment = this.getFragment(e),
                        n = i.any(this.handlers, function (e) {
                            if (e.route.test(t)) return e.callback(t), !0
                        });
                    return n
                },
                navigate: function (e, t) {
                    if (!t || t === !0) t = {
                        trigger: t
                    };
                    var n = (e || "").replace(l, "");
                    if (this.fragment == n || this.fragment == decodeURIComponent(n)) return;
                    this._hasPushState ? (n.indexOf(this.options.root) != 0 && (n = this.options.root + n), this.fragment = n, window.history[t.replace ? "replaceState" : "pushState"]({}, document.title, n)) : (this.fragment = n, this._updateHash(window.location, n, t.replace), this.iframe && n != this.getFragment(this.iframe.location.hash) && (t.replace || this.iframe.document.open().close(), this._updateHash(this.iframe.location, n, t.replace))), t.trigger && this.loadUrl(e)
                },
                _updateHash: function (e, t, n) {
                    n ? e.replace(e.toString().replace(/(javascript:|#).*$/, "") + "#" + t) : e.hash = t
                }
            }), r.View = function (e) {
            this.cid = i.uniqueId("view"), this._configure(e || {}), this._ensureElement(), this.delegateEvents(), this.initialize.apply(this, arguments)
        };
        var p = /^(\S+)\s*(.*)$/,
            d = ["model", "collection", "el", "id", "attributes", "className", "tagName"];
        i.extend(r.View.prototype, r.Events, {
                tagName: "div",
                $: function (e) {
                    return e == null ? s(this.el) : s(e, this.el)
                },
                initialize: function () {},
                render: function () {
                    return this
                },
                remove: function () {
                    return s(this.el).remove(), this
                },
                make: function (e, t, n) {
                    var r = document.createElement(e);
                    return t && s(r).attr(t), n && s(r).html(n), r
                },
                delegateEvents: function (e) {
                    if (!e && !(e = b(this, "events"))) return;
                    this.undelegateEvents();
                    for (var t in e) {
                        var n = this[e[t]];
                        if (!n) throw new Error('Event "' + e[t] + '" does not exist');
                        var r = t.match(p),
                            o = r[1],
                            u = r[2];
                        n = i.bind(n, this), o += ".delegateEvents" + this.cid, u === "" ? s(this.el).bind(o, n) : s(this.el).delegate(u, o, n)
                    }
                },
                undelegateEvents: function () {
                    s(this.el).unbind(".delegateEvents" + this.cid)
                },
                _configure: function (e) {
                    this.options && (e = i.extend({}, this.options, e));
                    for (var t = 0, n = d.length; t < n; t++) {
                        var r = d[t];
                        e[r] && (this[r] = e[r])
                    }
                    this.options = e
                },
                _ensureElement: function () {
                    if (!this.el) {
                        var e = this.attributes || {};
                        this.id && (e.id = this.id), this.className && (e["class"] = this.className), this.el = this.make(this.tagName, e)
                    } else i.isString(this.el) && (this.el = s(this.el).get(0))
                }
            });
        var v = function (e, t) {
            var n = y(this, e, t);
            return n.extend = this.extend, n
        };
        r.Model.extend = r.Collection.extend = r.Router.extend = r.View.extend = v;
        var m = {
            create: "POST",
            update: "PUT",
            "delete": "DELETE",
            read: "GET"
        };
        r.sync = function (e, t, n) {
            var o = m[e],
                u = {
                    type: o,
                    dataType: "json"
                };
            return n.url || (u.url = b(t, "url") || w()), !n.data && t && (e == "create" || e == "update") && (u.contentType = "application/json", u.data = JSON.stringify(t.toJSON())), r.emulateJSON && (u.contentType = "application/x-www-form-urlencoded", u.data = u.data ? {
                    model: u.data
                } : {}), r.emulateHTTP && (o === "PUT" || o === "DELETE") && (r.emulateJSON && (u.data._method = o), u.type = "POST", u.beforeSend = function (e) {
                    e.setRequestHeader("X-HTTP-Method-Override", o)
                }), u.type !== "GET" && !r.emulateJSON && (u.processData = !1), s.ajax(i.extend(u, n))
        };
        var g = function () {}, y = function (e, t, n) {
                var r;
                return t && t.hasOwnProperty("constructor") ? r = t.constructor : r = function () {
                    return e.apply(this, arguments)
                }, i.extend(r, e), g.prototype = e.prototype, r.prototype = new g, t && i.extend(r.prototype, t), n && i.extend(r, n), r.prototype.constructor = r, r.__super__ = e.prototype, r
            }, b = function (e, t) {
                return !e || !e[t] ? null : i.isFunction(e[t]) ? e[t]() : e[t]
            }, w = function () {
                throw new Error('A "url" property or function must be specified')
            }, E = function (e, t, n) {
                return function (r, i) {
                    var i = r === t ? i : r;
                    e ? e(r, i, n) : t.trigger("error", r, i, n)
                }
            }
    }.call(this),
    function () {
        window.Stacker = {
            cacheSheets: !0,
            stubTimeout: 500,
            initialize: function (e) {
                var t;
                e == null && (e = "#workspace");
                if (!(t = $(e).get(0))) return;
                return this.workspace = new Stacker.Workspace(t)
            },
            isSameOrigin: function (e) {
                var t, n;
                return t = document.createElement("a"), t.href = e, n = t.href.split("/", 3).join("/"), !window.location.href.indexOf(n)
            },
            isStandardClick: function (e) {
                return e.isTrigger || e.which === 1 && !e.metaKey && !e.ctrlKey
            },
            normalizePath: function (e) {
                var t, n;
                return t = document.createElement("a"), t.href = e, n = t.pathname + t.search, n.replace(/^\/*/, "/")
            }
        }
    }.call(this),
    function () {
        Stacker.history = "pushState" in window.history ? function () {
            var e, t, n, r, i;
            return t = 0, e = 0, i = {
                0: {}
            }, r = function (e, r, s, o) {
                return i[++t] = e != null ? e : {}, o == null && (o = window.location.toString()), window.history[r]({
                        _stacker: {
                            id: t,
                            title: s,
                            url: o
                        }
                    }, s, o), n(t)
            }, n = function (t) {
                var n;
                if (!(n = i[t])) return;
                return e = t, $(document).trigger("stacker:statechange", [n])
            }, window.addEventListener("popstate", function (e) {
                var t, r;
                if (!(t = (r = e.state) != null ? r._stacker : void 0)) return;
                return n(t.id)
            }, !1), {
                pushState: function (e, t, n) {
                    return r(e, "pushState", t, n)
                },
                replaceState: function (e, t, n) {
                    return r(e, "replaceState", t, n)
                },
                getState: function (t) {
                    return i[t != null ? t : e]
                }
            }
        }() : void 0
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["stacker/templates/404"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="panel sheet error not_found">\n  <header>\n    <h1>Oops!</h1>\n  </header>\n\n  <div class="sheet_body">\n    <h2>We can\'t find that page</h2>\n    <p>The link you clicked doesn\'t look quite right. Check to make <br>sure the spelling, capitalization, etc. are exactly right.</p>\n    <p><a href="#" onclick="history.back(); return false" class="button">&larr; Back to the previous page</a></p>\n  </div>\n</div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["stacker/templates/500"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="panel sheet error internal_server_error">\n  <header>\n    <h1>Oops! Something isn\'t working.</h1>\n  </header>\n\n  <div class="sheet_body">\n    <h2>This is our fault, not yours. We\'re sorry.</h2>\n    <p>It\'s likely this is a temporary glitch that will be fixed within <br>a few minutes. If you continue to see this error:</p>\n\n    <ul>\n      <li><a href="http://status.37signals.com" target="_blank" class="decorated">Check out status site for an update</a></li>\n      <li><a href="http://help.37signals.com/tickets/new" class="decorated">Tell us about this problem</a></li>\n      '), Stacker.env === "development" && (t.push('\n        <li><a href="#" data-response-text="'), t.push(r(this.responseText)), t.push('" onclick="(function(document){document.write(this.getAttribute(\'data-response-text\'));document.close()}).call(this,window.open().document);return false" class="decorated">View server response</a></li>\n      ')), t.push('\n    </ul>\n\n    <p><a href="#" onclick="history.back(); return false" class="button">&larr; Back to the previous page</a></p>\n  </div>\n</div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        var e = [].slice;
        Stacker.Panel = function () {
            function t(e, t) {
                this.el = e, this.container = t, this.status = 200, this.hasLoaded = !1, this.initialize()
            }
            return t.stubInnerHTML = "", t.stubOuterHTML = '<div class="panel stub">', t.extract = function (e, t) {
                var n;
                return t == null && (t = "div.panel"), n = $("<div>" + e).find(t), n.get(0)
            }, t.createStubElement = function (e) {
                var t;
                return t = $(this.stubOuterHTML + this.stubInnerHTML), t.attr("data-path", e), t.get(0)
            }, t.createStub = function (e, t) {
                return new this(this.createStubElement(e), t)
            }, t.prototype.initialize = function () {
                var e, t, n;
                return e = (t = $(this.el).attr("data-path")) != null ? t : location.pathname + location.search, (n = this.path) == null && (this.path = Stacker.normalizePath(e)), this.title = $(this.el).find("title").text()
            }, t.prototype.notify = function () {
                var t, n, r;
                return n = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [], (r = this.container) != null ? typeof r[n] == "function" ? r[n].apply(r, [this].concat(e.call(t))) : void 0 : void 0
            }, t.prototype.request = function (e, t) {
                var n, r, i = this;
                r = e.responseText, n = e.preventReload;
                if (r) return this.handleSuccessResponse(this.status = 200, r), this.hasLoaded = !0, typeof t == "function" ? t() : void 0;
                if (!this.hasLoaded || !n && !! this.canBeReloaded()) return $(this.el).addClass("loading"), $.ajax({
                        url: this.path,
                        data: {
                            from_workspace: 1
                        },
                        dataType: "html",
                        beforeSend: function (e) {
                            return e.stacker = !0
                        },
                        complete: function (e) {
                            var n, r;
                            r = e.status, n = e.responseText, $(i.el).removeClass("loading");
                            if (!i.canBeReplaced()) return;
                            return r === 200 || r === 304 ? i.handleSuccessResponse(r, n) : r > 0 && i.handleErrorResponse(r, n), i.status = r, typeof t == "function" ? t() : void 0
                        }
                    });
                if (this.canBeReplaced()) return this.replace(this.el), typeof t == "function" ? t() : void 0
            }, t.prototype.handleSuccessResponse = function (e, t) {
                return this.replace(this.constructor.extract(t)), this.hasLoaded = !0
            }, t.prototype.handleErrorResponse = function (e, t) {
                var n;
                return e === 404 ? n = JST["stacker/templates/404"] : n = JST["stacker/templates/500"], this.replace(this.constructor.extract(n({
                                status: e,
                                responseText: t
                            })))
            }, t.prototype.replace = function (e) {
                return e !== this.el && ($(this.el).replaceWith(e), this.el = e), this.initialize(), this.notify("didReplacePanel")
            }, t.prototype.canBeReplaced = function () {
                return !0
            }, t.prototype.canBeReloaded = function () {
                return !$(this.el).is("[data-behavior~=prevent_reload]")
            }, t.prototype.isStub = function () {
                return $(this.el).hasClass("stub")
            }, t.prototype.isLoading = function () {
                return $(this.el).hasClass("loading")
            }, t
        }()
    }.call(this),
    function () {
        Stacker.ExclusiveCallback = function () {
            function e() {
                this.reset()
            }
            return e.prototype.define = function (e) {
                var t = this;
                return this.callback = e,
                function () {
                    if (t.callback === e) return e(), t.reset()
                }
            }, e.prototype.timeout = function (e, t) {
                var n;
                return n = this.define(t), setTimeout(n, e), n
            }, e.prototype.reset = function () {
                return this.callback = null
            }, e
        }()
    }.call(this),
    function () {
        var e = [].slice;
        Stacker.Container = function () {
            function r(e, t) {
                this.el = e, this.workspace = t, this.id = ++n, this.loadCallback = new Stacker.ExclusiveCallback, this.initialize()
            }
            var t, n;
            return n = 0, t = {}, r.panelConstructor = Stacker.Panel, r.createStubElement = function () {
                var e;
                return e = $("<div class=container>"), e.addClass(this.className), e.get(0)
            }, r.createStub = function (e) {
                return new this(this.createStubElement(), e)
            }, r.getPanelCache = function () {
                var e, n;
                return (n = t[e = this.className]) != null ? n : t[e] = {}
            }, r.cachePanel = function (e) {
                var t;
                return t = this.getPanelCache(), t[e.path] = e
            }, r.findPanelForPath = function (e) {
                var n, r, i;
                for (n in t) {
                    i = t[n];
                    if (r = i[e]) return r
                }
            }, r.findPanelForElement = function (e) {
                var n, r, i, s;
                for (n in t) {
                    i = t[n];
                    for (s in i) {
                        r = i[s];
                        if (r.el === e) return r
                    }
                }
            }, r.findOrCreatePanelForPathAndContainer = function (e, t) {
                var n, r;
                return n = this.getPanelCache(), (r = n[e]) != null ? r : n[e] = this.panelConstructor.createStub(e, t)
            }, r.extract = function (e, t) {
                var n, r;
                return t == null && (t = "div.container"), n = $("<div>" + e).find(t), (r = n.get(0)) != null ? r.childNodes : void 0
            }, r.prototype.initialize = function () {
                var e;
                return this.setTitle((e = this.panel) != null ? e.title : void 0), $(this.el).attr("data-container-id", this.id), this.layout()
            }, r.prototype.notify = function () {
                var t, n, r;
                return n = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [], (r = this.workspace) != null ? typeof r[n] == "function" ? r[n].apply(r, [this].concat(e.call(t))) : void 0 : void 0
            }, r.prototype.findOrCreatePanelForPath = function (e) {
                return this.constructor.findOrCreatePanelForPathAndContainer(e, this)
            }, r.prototype.createPanelForElement = function (e) {
                var t;
                return t = new this.constructor.panelConstructor(e, this), this.constructor.cachePanel(t)
            }, r.prototype.createStubPanelForPath = function (e) {
                return this.constructor.panelConstructor.createStub(e, this)
            }, r.prototype.load = function (e, t, n) {
                var r, i, s, o = this;
                return $.isFunction(t) && (n = t, t = {}), n == null && (n = $.noop), s = t.response, i = this.shouldPreventReload(e, t), e.isStub() ? (r = this.loadCallback.timeout(Stacker.stubTimeout, function () {
                            return o.show(e, t), n(o, e, t)
                        }), e.request({
                            responseText: s,
                            preventReload: i
                        }, r)) : (this.loadCallback.reset(), this.show(e, t), e.request({
                            responseText: s,
                            preventReload: i
                        }), n(this, e, t))
            }, r.prototype.loadPathWithDefaultStack = function (e, t, n) {
                var r;
                return r = this.constructor.panelConstructor.createStub(e, this), this.request(e, t, n)
            }, r.prototype.show = function (e, t) {
                return e !== this.panel && (this.display(e, t), e.container = this, this.panel = e), this.notify("didShowPanel", e)
            }, r.prototype.display = function (e, t) {}, r.prototype.request = function (e, t, n) {
                var r = this;
                return $.isFunction(t) && (n = t, t = {}), n == null && (n = $.noop), $.ajax({
                        url: e,
                        data: {
                            from_workspace: 1
                        },
                        dataType: "html",
                        success: function (e, i) {
                            return r.replace(r.constructor.extract(e)), typeof n == "function" ? n(r, r.panel, t) : void 0
                        }
                    })
            }, r.prototype.replace = function (e) {
                return $(this.el).html(e), this.initialize()
            }, r.prototype.didReplacePanel = function (e) {
                return this.setTitle(e.title), this.layout(), this.notify("didReplacePanel", e)
            }, r.prototype.setTitle = function (e) {
                return this.title = e, this.notify("didChangeTitle", this.title)
            }, r.prototype.layout = function () {}, r.prototype.shouldPreventReload = function (e) {
                return !1
            }, r
        }()
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        Stacker.FlatContainer = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.className = "flat_container", n.prototype.initialize = function () {
                var e;
                if (e = this.getPanelElement()) this.panel = this.createPanelForElement(e);
                return n.__super__.initialize.apply(this, arguments)
            }, n.prototype.getPanelElement = function () {
                return $(this.el).find("> div.panel").get(0)
            }, n.prototype.display = function (e) {
                return $(this.el).html(e.el)
            }, n
        }(Stacker.Container)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        Stacker.Sheet = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.stubInnerHTML = "<header><h1><a data-restore-position>", n.extract = function (e, t) {
                return t == null && (t = "div.sheet:not(.inactive):last"), Stacker.Panel.extract.call(this, e, t)
            }, n.createStubElement = function (e) {
                var t;
                return t = Stacker.Panel.createStubElement.call(this, e), $(t).addClass("sheet").find("a").attr("href", e), t
            }, n.prototype.initialize = function () {
                var e, t, r;
                return t = $(this.el), r = t.find("> header > h1"), e = r.find("> a"), t.attr("data-path") || t.attr("data-path", e.attr("href")), n.__super__.initialize.apply(this, arguments), this.header = r
            }, n.prototype.canBeReplaced = function () {
                return this.isActive() || this.isStub()
            }, n.prototype.canBeReloadedWhenStacked = function () {
                return !$(this.el).is("[data-behavior~=prevent_reload_when_stacked]")
            }, n.prototype.isActive = function () {
                return !$(this.el).hasClass("inactive")
            }, n.prototype.isStub = function () {
                return n.__super__.isStub.apply(this, arguments) || !this.isActive() && !this.isCached()
            }, n.prototype.isCached = function () {
                return this.cachedEl != null
            }, n.prototype.save = function () {
                return Stacker.cacheSheets && this.status === 200 ? ($(this.el).trigger("beforeSheetSave", this), this.cachedEl = this.el.cloneNode(!0)) : (this.cachedEl = null, this.header = null)
            }, n.prototype.restore = function () {
                if (this.isActive()) return;
                return this.isCached() ? this.replace(this.cachedEl) : ($(this.el).find("> div.sheet").remove(), $(this.el).removeClass("inactive"), $(this.el).addClass("stub"))
            }, n.prototype.expireCache = function () {
                return this.isCached() && (this.cachedEl = null), this.hasLoaded = !1
            }, n.prototype.deactivate = function () {
                var e;
                if (this.isActive()) return e = this.header.text(), this.save(), $(this.el).html(this.constructor.stubInnerHTML).addClass("inactive").find("a").attr("href", this.path).text(e)
            }, n
        }(Stacker.Panel)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            }, n = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        Stacker.StackContainer = function (e) {
            function r() {
                return r.__super__.constructor.apply(this, arguments)
            }
            return t(r, e), r.panelConstructor = Stacker.Sheet, r.className = "stack_container", r.prototype.initialize = function () {
                var e, t, n, i;
                this.stack = [], i = this.getSheetElements();
                for (t = 0, n = i.length; t < n; t++) e = i[t], this.stack.push(this.createPanelForElement(e));
                return this.panel = this.getActiveSheet(), r.__super__.initialize.apply(this, arguments)
            }, r.prototype.display = function (e, t) {
                var r;
                t == null && (t = {});
                if (n.call(this.stack, e) >= 0) {
                    r = [];
                    while (this.panel !== e) r.push(this.pop());
                    return r
                }
                return t.replaceSheet && this.pop(!0), this.push(e)
            }, r.prototype.load = function (e, t, n) {
                return t.forceReload && e.expireCache(), r.__super__.load.apply(this, arguments)
            }, r.prototype.push = function (e) {
                return this.panel ? (this.panel.deactivate(), $(this.panel.el).append(e.el)) : $(this.el).html(e.el), this.stack.push(e), e.restore(), this.layout()
            }, r.prototype.pop = function (e) {
                var t, n;
                e == null && (e = !1);
                if (!(t = this.panel)) return;
                return this.stack.pop(), t.deactivate(), this.panel = this.getActiveSheet(), e ? $(t.el).remove() : ((n = this.panel) != null && n.restore(), this.layout()), t
            }, r.prototype.clear = function () {
                var e;
                e = [];
                while (this.panel) e.push(this.pop());
                return e
            }, r.prototype.indexOf = function (e) {
                var t, n, r, i, s;
                s = this.stack;
                for (t = r = 0, i = s.length; r < i; t = ++r) {
                    n = s[t];
                    if (n.path === e) return t
                }
                return -1
            }, r.prototype.getSheetElements = function () {
                return $(this.el).find("div.sheet")
            }, r.prototype.getActiveSheet = function () {
                var e;
                if (e = this.stack.length) return this.stack[e - 1]
            }, r.prototype.layout = function () {
                var e, t, n, r;
                e = $(this.el), t = this.getSheetElements(), e.css({
                        width: ""
                    });
                if (n = t.length) return r = e.width(), r += 20 * (t.length - 1), t.each(function (e) {
                    return e !== 0 && $(this).css({
                            marginLeft: "20px",
                            marginBottom: "-20px"
                        }), $(this).toggleClass("inactive", e !== n - 1)
                }), e.css({
                        width: r
                    })
            }, r.prototype.shouldPreventReload = function (e) {
                return n.call(this.stack, e) >= 0 && e.container === this && e.isCached() && !e.canBeReloadedWhenStacked()
            }, r
        }(Stacker.Container)
    }.call(this),
    function () {
        var e = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, t = [].slice;
        Stacker.Workspace = function () {
            function o(t) {
                this.el = t, this.containerLoadedPanel = e(this.containerLoadedPanel, this), this.didChangeState = e(this.didChangeState, this), this.didClickLink = e(this.didClickLink, this), $("a[href]").live("click", this.didClickLink), $(document).bind("stacker:statechange", this.didChangeState), this.states = {}, this.containers = {}, this.positions = {}, this.initialize(), this.id = 0
            }
            var n, r, i, s;
            return o.prototype.initialize = function () {
                var e, t;
                t = $(this.el), e = t.children().first();
                if (!e.is("div.container")) return e.is("div.sheet") ? e.wrap(Stacker.StackContainer.createStubElement()) : t.wrapInner(Stacker.FlatContainer.createStubElement()), this.initialize();
                e.is(".stack_container") ? this.register(this.container = new Stacker.StackContainer(e.get(0))) : this.register(this.container = new Stacker.FlatContainer(e.get(0))), this.updateTitle(this.container.title), t.removeClass("loading");
                if (Stacker.history) return this.replaceState({
                        cid: this.container.id
                    }, this.title, this.container.path)
            }, o.prototype.pushState = function (e, t, n) {
                return Stacker.history.pushState(e, t, n)
            }, o.prototype.replaceState = function (e, t, n) {
                return Stacker.history.replaceState(e, t, n)
            }, o.prototype.getState = function () {
                return {
                    url: Stacker.normalizePath(window.location),
                    options: Stacker.history.getState()
                }
            }, o.prototype.register = function (e) {
                return this.containers[e.id] = e, e.workspace = this
            }, o.prototype.didClickLink = function (e) {
                var t, n, i;
                if (this.matchLinkClickEvent(e)) {
                    n = e.currentTarget, i = r(n), t = jQuery.Event("stackerLinkClicked"), $(n).trigger(t, [i]);
                    if (!t.isDefaultPrevented()) return this.visit(n.href, i), e.preventDefault(), e.stopPropagation()
                }
            }, o.prototype.matchLinkClickEvent = function (e) {
                var t;
                return t = e.target.href, Stacker.isSameOrigin(t) && Stacker.isStandardClick(e)
            }, o.prototype.didChangeState = function (e) {
                var t, n, r;
                if (this.initialized) {
                    if (n = this.getState()) r = n.url, t = n.options, this.load(r, t)
                } else this.initialized = !0;
                return this.path = Stacker.normalizePath(window.location)
            }, o.prototype.show = function (e) {
                if (this.container !== e) return this.container = e, $(this.el).html(this.container.el), this.container.layout(), this.updateTitle(this.container.title)
            }, o.prototype.visit = function (e, t) {
                var n, r;
                return t == null && (t = {}), Stacker.history ? (this.positions[Stacker.normalizePath(window.location)] = this.getScrollPosition(), r = Stacker.normalizePath(e), n = this.container.panel, t = s(t), r === (n != null ? n.path : void 0) ? n.request({
                            responseText: t.response
                        }) : this.pushState(t, null, e)) : window.location = e
            }, o.prototype.load = function (e, t) {
                var n, r, i;
                return t == null && (t = {}), n = this.findOrCreateContainerForOptions(t), i = Stacker.normalizePath(e), t.defaultStack ? r = n.createStubPanelForPath(i) : r = n.findOrCreatePanelForPath(i), $(this.el).trigger("workspace:beforeload", {
                        location: e,
                        path: i,
                        container: n,
                        panel: r
                    }), $(r.el).trigger("panelLoading", r), t.defaultStack ? n.loadPathWithDefaultStack(i, t, this.containerLoadedPanel) : n.load(r, t, this.containerLoadedPanel)
            }, o.prototype.findOrCreateContainerForOptions = function (e) {
                var t, r;
                return e.cid || (t = n(e), t === this.container.constructor && !e.replaceStack ? r = this.container : this.register(r = t.createStub(this)), e.cid = r.id), this.containers[e.cid]
            }, o.prototype.findPanel = function (e) {
                var t, n;
                if (!e) return;
                if (_.isString(e)) return n = Stacker.normalizePath(e), Stacker.Container.findPanelForPath(n);
                if (e.jquery && e.get) return t = e.get(0), this.findPanel(t);
                if (_.isElement(e)) return Stacker.Container.findPanelForElement(e)
            }, o.prototype.containerLoadedPanel = function (e, t, n) {
                var r, i;
                return this.show(e), r = (i = n.restorePosition ? this.positions[t.path] : void 0) != null ? i : 0, delete n.restorePosition, $.scrollTo(r), this.scrollToAnchor(), $(t.el).trigger("panelDisplayed", t), $(this.el).trigger("workspace:load", {
                        container: e,
                        panel: t
                    })
            }, o.prototype.getScrollPosition = function () {
                return $(window).scrollTop()
            }, o.prototype.scrollToAnchor = function () {
                var e, t;
                if (this.getScrollPosition() === 0 && (t = window.location.hash)) {
                    e = $(t);
                    if (e.length) return $.scrollTo(e)
                }
            }, o.prototype.didReplacePanel = function (e, t) {
                var n;
                if (((n = this.container) != null ? n.panel : void 0) === t) return this.scrollToAnchor(), $(t.el).trigger("panelReplaced", t)
            }, o.prototype.didChangeTitle = function (e, t) {
                if (e === this.container) return this.updateTitle(t)
            }, o.prototype.updateTitle = function (e) {
                if (e) return document.title = this.title = e
            }, s = function (e) {
                var t;
                return t = $.extend({}, e), t.replaceStack || (t.replaceStack = t.defaultStack), t
            }, r = function (e) {
                return {
                    bareWorkspace: i(e, "data-bare-workspace"),
                    defaultStack: i(e, "data-default-stack"),
                    replaceStack: i(e, "data-replace-stack"),
                    replaceSheet: i(e, "data-replace-sheet"),
                    restorePosition: i(e, "data-restore-position"),
                    forceReload: i(e, "data-force-reload")
                }
            }, i = function () {
                var e, n, r, i, s, o, u;
                i = arguments[0], r = 2 <= arguments.length ? t.call(arguments, 1) : [], e = $(i);
                for (o = 0, u = r.length; o < u; o++) {
                    n = r[o], s = e.attr(n);
                    if (s != null && s !== "no" && s !== "false") return !0
                }
                return !1
            }, n = function (e) {
                return e.bareWorkspace ? Stacker.FlatContainer : Stacker.StackContainer
            }, o
        }()
    }.call(this),
    function () {
        Stacker.env = "production", $(function () {
            return setTimeout(function () {
                return Stacker.initialize()
            }, 10)
        }), $("a[data-remote], a[data-method], a[href^=#], a[target], a[data-stacker=false]").live("stackerLinkClicked", function (e) {
            return e.preventDefault()
        })
    }.call(this),
    function () {
        $(document).bind("page:change", function () {
            var e;
            if (e = location.pathname.match(/^\/(\d{7,})/)) return bcx.currentAccountSlug = e[1]
        }), $(document).ajaxSend(function (e, t, n) {
            if (!n.url.match(/^\/(\d{7,})/) && bcx.currentAccountSlug) return n.url = "/" + bcx.currentAccountSlug + n.url
        })
    }.call(this),
    function () {
        var e, t, n = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, r = {}.hasOwnProperty,
            i = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var n in t) r.call(t, n) && (e[n] = t[n]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        e = function () {
            function e(e) {
                var t = this;
                this.el = e, this.resetHeight = n(this.resetHeight, this), this.adjustHeight = n(this.adjustHeight, this), this.watchForChanges = n(this.watchForChanges, this), this.makeTestContainer = n(this.makeTestContainer, this), this.preventScrollBars = n(this.preventScrollBars, this), this.sourceContents = n(this.sourceContents, this), this.source = n(this.source, this), this.$el = $(this.el).css({
                        resize: "none"
                    }), this.heightLimit = this.$el.data("autoresize-limit"), this.$source = this.source(), this.originalHeight = this.$el.height(), this.$testContainer = this.makeTestContainer(), this.preventScrollBars(), setTimeout(function () {
                        return t.adjustHeight(), t.watchForChanges()
                    }, 1)
            }
            return e.prototype.resizeBy = 2, e.install = function (e) {
                if (!$(e).is("[data-autoresize]")) return $(e).attr("data-autoresize", !0), new this(e)
            }, e.prototype.source = function () {
                return this.$el
            }, e.prototype.sourceContents = function () {
                return this.$source.val().replace(/\n/g, "<br>").replace(/</g, "&lt;").replace(/>/g, "&gt;")
            }, e.prototype.preventScrollBars = function () {
                return this.$source.css("overflow", "hidden")
            }, e.prototype.makeTestContainer = function () {
                var e, t, n, r, i;
                e = $("<div>").css({
                        position: "absolute",
                        left: -9999,
                        top: 0,
                        "word-wrap": "break-word"
                    }), e.addClass("formatted_content hidden"), t = ["fontSize", "fontFamily", "fontWeight", "letterSpacing", "lineHeight", "textDecoration", "padding", "text-rendering"];
                for (r = 0, i = t.length; r < i; r++) n = t[r], e.css(n, this.$source.css(n));
                return e.insertBefore(this.$el)
            }, e.prototype.watchForChanges = function () {
                var e = this;
                return this
                    .$source.bind("keyup keydown paste change focus", _.throttle(function () {
                            return e.adjustHeight()
                        }, $.browser.mobile ? 300 : 5)), this.$el.closest("form").bind("reset", function () {
                        return e.resetHeight()
                    })
            }, e.prototype.adjustHeight = function () {
                var e, t, n, r, i;
                return this.$testContainer.width(this.$source.width()), i = this.$testContainer.html("X").height(), this.$testContainer.html(this.sourceContents()), r = parseInt(this.$el.data("rows") || this.$el.attr("rows")) || !1, n = r === 1 ? 1 : this.resizeBy * i, e = r ? i * r + 1 : this.originalHeight, t = this.$testContainer.height() + n, this.heightLimit && t > this.heightLimit && (t = this.heightLimit), t < e && (t = e), t = Math.round(t), this.$el.css("min-height", t)
            }, e.prototype.resetHeight = function () {
                return this.$el.css("min-height", this.originalHeight)
            }, e
        }(), t = function (e) {
            function t() {
                return this.preventScrollBars = n(this.preventScrollBars, this), this.sourceContents = n(this.sourceContents, this), this.source = n(this.source, this), t.__super__.constructor.apply(this, arguments)
            }
            return i(t, e), t.prototype.source = function () {
                return this.$el.contents().find("body")
            }, t.prototype.sourceContents = function () {
                return this.$source.html()
            }, t.prototype.preventScrollBars = function () {
                return this.$source.parent("html").css({
                        overflow: "hidden"
                    })
            }, t
        }(e), $.fn.autoResize = function () {
            return this.each(function () {
                return this.tagName.toLowerCase() === "iframe" ? t.install(this) : e.install(this)
            })
        }
    }.call(this),
    function () {
        Backbone.Collection.prototype.addOrUpdate = function (e) {
            var t;
            return (t = this.get(e.id)) ? t.set(e) : this.add(e)
        }, Backbone.Collection.prototype.getOrAdd = function (e) {
            var t;
            return (t = this.get(e)) ? t : (this.add({
                        id: e
                    }), this.get(e))
        }, Backbone.Collection.prototype.merge = function (e) {
            var t, n, r, i;
            i = [];
            for (n = 0, r = e.length; n < r; n++) t = e[n], i.push(this.addOrUpdate(t));
            return i
        }
    }.call(this),
    function () {
        window.LRUCache = function () {
            function e(e) {
                this.size = e, this.keys = [], this.values = {}
            }
            return e.prototype.has = function (e) {
                return e in this.values
            }, e.prototype.read = function (e) {
                return this.values[e]
            }, e.prototype.touch = function (e) {
                var t;
                return t = this.keys.indexOf(e), this.keys.splice(t, 1), this.keys.unshift(e)
            }, e.prototype.get = function (e) {
                var t;
                return t = this.read(e), this.touch(e), t
            }, e.prototype.put = function (e, t) {
                return this.values[e] = t, this.keys.unshift(e), this.trim(), t
            }, e.prototype.fetch = function (e, t) {
                return this.has(e) ? this.get(e) : this.put(e, t())
            }, e.prototype.trim = function () {
                var e, t, n, r, i;
                r = this.keys.splice(this.size), i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(delete this.values[e]);
                return i
            }, e
        }()
    }.call(this),
    function () {
        this.CalendarDateTime = function () {
            function t(e, t) {
                this.calendarDate = e, this.calendarTime = t, this.year = this.calendarDate.year, this.month = this.calendarDate.month, this.day = this.calendarDate.day, this.hour = this.calendarTime.hour, this.minute = this.calendarTime.minute, this.second = this.calendarTime.second
            }
            var e;
            return t.iso8601Pattern = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.\d+)?(Z|[-+]?[\d:]+)$/, t.parse = function (e, t) {
                var n, r;
                return n = CalendarDate.parse(e), r = CalendarTime.parse(t), new this(n, r)
            }, t.prototype.toLocalDate = function () {
                return new Date(this.year, this.month - 1, this.day, this.hour, this.minute, this.second, 0)
            }, t.prototype.toUTCDate = function () {
                return new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second))
            }, t.prototype.toLocalString = function () {
                return e(this.toLocalDate())
            }, t.prototype.toUTCString = function () {
                return e(this.toUTCDate())
            }, t.prototype.toString = function () {
                return this.toLocalString()
            }, e = function (e) {
                return JSON.parse(JSON.stringify(e))
            }, t
        }()
    }.call(this),
    function () {
        this.CalendarDate = function () {
            function e(e, t, n) {
                this.date = new Date(Date.UTC(e, t - 1)), this.date.setUTCDate(n), this.year = this.date.getUTCFullYear(), this.month = this.date.getUTCMonth() + 1, this.day = this.date.getUTCDate(), this.value = this.date.getTime()
            }
            return e.monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], e.abbreviatedMonthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], e.weekdayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], e.abbreviatedWeekdayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], e.firstDayOfWeek = 0, e.cache = new LRUCache(512), e.today = function () {
                return this.parse(new Date)
            }, e.parse = function (e) {
                var t, n = this;
                return e == null && (e = ""), t = "" + e, this.cache.fetch(t, function () {
                    var r, i, s;
                    return e instanceof Date ? new n(e.getFullYear(), e.getMonth() + 1, e.getDate()) : $.isArray(e) ? (s = e[0], i = e[1], r = e[2], new n(s, i, r)) : t.trim() ? t.match(CalendarDateTime.iso8601Pattern) ? n.parse(new Date(Date.parse(t))) : n.parse(t.split("-")) : n.today()
                })
            }, e.prototype.beginningOfYear = function () {
                return new this.constructor(this.year, 1, 1)
            }, e.prototype.beginningOfMonth = function () {
                return new this.constructor(this.year, this.month, 1)
            }, e.prototype.beginningOfWeek = function (e) {
                var t;
                return e == null && (e = this.constructor.firstDayOfWeek), t = this.date.getUTCDay() - e, t < 0 && (t += 7), this.previous(t)
            }, e.prototype.nextMonth = function (e, t) {
                var n, r;
                e == null && (e = 1), t == null && (t = 1);
                if (e === 0) return this.beginningOfMonth();
                n = this.month + e, r = this.year;
                while (n > 12) n -= 12, r++;
                while (n < 1) n += 12, r--;
                return new this.constructor(r, n, t)
            }, e.prototype.previousMonth = function (e) {
                return e == null && (e = 1), this.nextMonth(-e)
            }, e.prototype.next = function (e) {
                return e == null && (e = 1), e === 0 ? this : new this.constructor(this.year, this.month, this.day + e)
            }, e.prototype.previous = function (e) {
                return e == null && (e = 1), e === 0 ? this : this.next(-e)
            }, e.prototype.equals = function (e) {
                return (e != null ? e.value : void 0) === this.value
            }, e.prototype.is = function (e) {
                return this.equals(e)
            }, e.prototype.isnt = function (e) {
                return !this.equals(e)
            }, e.prototype.fallsOnSameYearAs = function (e) {
                return this.year === (e != null ? e.year : void 0)
            }, e.prototype.occursThisYear = function () {
                return this.fallsOnSameYearAs(this.constructor.today())
            }, e.prototype.fallsOnSameMonthAs = function (e) {
                return this.beginningOfMonth().equals(e != null ? e.beginningOfMonth() : void 0)
            }, e.prototype.fallsOnSameWeekAs = function (e) {
                return this.beginningOfWeek().equals(e != null ? e.beginningOfWeek() : void 0)
            }, e.prototype.occursThisWeek = function () {
                return this.fallsOnSameWeekAs(this.constructor.today())
            }, e.prototype.isToday = function () {
                return this.equals(this.constructor.today())
            }, e.prototype.isWeekend = function () {
                var e;
                return (e = this.date.getUTCDay()) === 0 || e === 6
            }, e.prototype.daysSince = function (e) {
                if (e) return (this.date - e.date) / 864e5
            }, e.prototype.weeksSince = function (e) {
                if (e) return this.beginningOfWeek().daysSince(e.beginningOfWeek()) / 7
            }, e.prototype.getWeekNumber = function () {
                return this.beginningOfWeek()
            }, e.prototype.getMonthName = function () {
                return this.constructor.monthNames[this.month - 1]
            }, e.prototype.getAbbreviatedMonthName = function () {
                return this.constructor.abbreviatedMonthNames[this.month - 1]
            }, e.prototype.getWeekdayName = function () {
                return this.constructor.weekdayNames[this.date.getUTCDay()]
            }, e.prototype.getAbbreviatedWeekdayName = function () {
                return this.constructor.abbreviatedWeekdayNames[this.date.getUTCDay()]
            }, e.prototype.getLocalDate = function () {
                return new Date(this.year, this.month - 1, this.day)
            }, e.prototype.compareTo = function (e) {
                return this.date > (e != null ? e.date : void 0) ? 1 : this.date < (e != null ? e.date : void 0) ? -1 : 0
            }, e.prototype.shortWithYear = function () {
                return "" + this.getAbbreviatedMonthName() + " " + this.day + ", " + this.year
            }, e.prototype.longWithYear = function () {
                return "" + this.getMonthName() + " " + this.day + ", " + this.year
            }, e.prototype.abbreviatedShortWithWeekday = function () {
                return "" + this.getAbbreviatedWeekdayName() + ", " + this.getAbbreviatedMonthName() + " " + this.day
            }, e.prototype.toString = function () {
                var e, t, n, r;
                return (r = this.stringValue) != null ? r : this.stringValue = (n = this.year, t = this.month < 10 ? "0" + this.month : this.month, e = this.day < 10 ? "0" + this.day : this.day, "" + n + "-" + t + "-" + e)
            }, e
        }()
    }.call(this),
    function () {
        this.CalendarTime = function () {
            function t(e, t, n) {
                var r, i, s;
                this.hour = e != null ? e : 0, this.minute = t != null ? t : 0, this.second = n != null ? n : 0;
                if (!(0 <= (r = this.hour) && r <= 23 && 0 <= (i = this.minute) && i <= 59 && 0 <= (s = this.second) && s <= 59)) throw Error("invalid time (" + this.hour + ", " + this.minute + ", " + this.second + ")");
                this.ampm = this.hour < 12 ? "am" : "pm", this.hour === 0 ? this.hour12 = 12 : this.hour > 12 ? this.hour12 = this.hour - 12 : this.hour12 = this.hour
            }
            var e;
            return t.pattern = /^\s*(\d{1,2})(?:[.:]?([0-5]\d?)?)?(?:[.:]?([0-5]\d?)?)?(?:\s*([ap])(?:\.?m\.?)?|\s*[h]?)?\s*$/i, t.parse = function (e) {
                var t, n, r, i, s, o, u, a, f;
                a = "" + e;
                if (e instanceof Date) return r = e.getHours(), s = e.getMinutes(), u = e.getSeconds(), new this(r, s, u);
                if (a.match(CalendarDateTime.iso8601Pattern)) return this.parse(new Date(Date.parse(a)));
                if (i = a.match(this.pattern)) return f = i[0], r = i[1], s = i[2], u = i[3], n = i[4], r = parseInt(r, 10), s = parseInt(s != null ? s : "0", 10), u = parseInt(u != null ? u : "0", 10), t = n != null ? n.match(/a/i) : void 0, o = n != null ? n.match(/p/i) : void 0, 1 <= r && r <= 11 && o && (r += 12), r === 12 && t && (r = 0), new this(r, s, u);
                throw Error("invalid time (" + e + ")")
            }, t.isValid = function (e) {
                try {
                    return this.parse(e), !0
                } catch (t) {
                    return !1
                }
            }, t.prototype.toString = function (t) {
                var n;
                return t == null && (t = {}), n = [e(this.minute), e(this.second)], t.short && this.second === 0 && (n.pop(), this.minute === 0 && n.pop()), n.length && (n = ":" + n.join(":")), t[12] ? "" + this.hour12 + n + this.ampm : "" + this.hour + n
            }, t.prototype.toFriendlyString = function () {
                return this.toString({
                        12: !0,
                        "short": !0
                    })
            }, e = function (e) {
                return e < 10 ? "0" + e : "" + e
            }, t
        }()
    }.call(this),
    function () {
        var e = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        $.fn.fadeOutAndRemove = function (t) {
            var n, r;
            return t == null && (t = {}), t.collapse ? _.isArray(t.collapse) ? (r = e.call(t.collapse, "width") >= 0, n = e.call(t.collapse, "height") >= 0) : (r = t.collapse === "width", n = t.collapse === "height") : (r = !1, n = !0), $(this).animate({
                    opacity: 0
                }, 200, "linear", function () {
                    var e, i, s;
                    return e = {
                        marginTop: 0,
                        marginBottom: 0,
                        paddingTop: 0,
                        paddingBottom: 0
                    }, r && (e.width = 0), n && (e.height = 0), i = t.duration || Math.sqrt($(this).height()) * 35, s = t.easing || "easeOutQuad", $(this).animate(e, i, s, function () {
                        return $(this).remove()
                    })
                })
        }, $.fn.bounce = function () {
            return $(this).effect("bounce", {
                    times: 3
                }, 150)
        }, $.fn.pulsate = function () {
            return $(this).effect("pulsate", {
                    times: 3
                }, 200)
        }, $.fn.highlight = function () {
            return $(this).effect("highlight", {}, 1500)
        }
    }.call(this),
    function () {
        var e, t;
        isNaN(Date.parse("2011-01-01T12:00:00-05:00")) && (t = Date.parse, e = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|[-+]?[\d:]+)$/, Date.parse = function (n) {
            var r, i, s, o, u, a, f, l, c, h;
            n = n.toString();
            if (s = n.match(e)) h = s[0], l = s[1], u = s[2], r = s[3], i = s[4], o = s[5], f = s[6], c = s[7], c !== "Z" && (a = c.replace(":", "")), n = "" + l + "/" + u + "/" + r + " " + i + ":" + o + ":" + f + " GMT" + [a];
            return t(n)
        })
    }.call(this),
    function () {
        $.fn.computedStyle = function () {
            var e, t, n, r, i, s, o, u;
            if (!(e = this.get(0))) return {};
            r = {};
            if (window.getComputedStyle) {
                i = window.getComputedStyle(e, null);
                for (o = 0, u = i.length; o < u; o++) n = i[o], t = n.replace(/-([a-z])/g, function (e, t) {
                    return t.toUpperCase()
                }), r[t] = i.getPropertyValue(n)
            } else if (i = e.currentStyle)
                for (n in i) s = i[n], r[n] = s;
            return r
        }
    }.call(this),
    function () {
        $.fn.containsPoint = function (e, t) {
            var n, r, i, s, o;
            return e.pageX && e.pageY ? this.containsPoint(e.pageX, e.pageY) : this.length ? (o = this.offset(), s = o.top, r = o.left, n = s + this.outerHeight(), i = r + this.outerWidth(), r <= e && e <= i && s <= t && t <= n) : !1
        }
    }.call(this),
    function () {
        $(function () {
            return $("meta[name=csrf-token]").attr("content", $.cookie("csrf-token")), $("meta[name=csrf-param]").attr("content", $.cookie("csrf-param"))
        })
    }.call(this),
    function () {
        $.fn.markAsClean = function () {
            return $(this).data("clean", $(this).find(":input").serialize())
        }, $.fn.isClean = function () {
            return $(this).find(":input").serialize() === $(this).data("clean")
        }, $.fn.isDirty = function () {
            return !$(this).isClean()
        }
    }.call(this),
    function () {
        var e = [].slice;
        $.fn.dispatch = function () {
            var t, n, r;
            return r = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [], n = $.Event(r), this.trigger(n, t), n
        }
    }.call(this),
    function () {}.call(this),
    function () {
        var e, t, n, r, i, s, o;
        s = "[data-behavior~=expandable]", n = "[data-behavior~=expand_exclusively]", i = "" + s + " [data-behavior~=expand_on_click]", t = "" + s + " [data-behavior~=collapse_on_click]", r = function (e) {
            return $(this).expand() || $(this).collapse(), e.preventDefault()
        }, e = function (e) {
            return $(this).collapse(), e.preventDefault()
        }, $(function () {
            var s, o, u, a;
            return $.support.touch && ($(i).live("touchstart", r), $(t).live("touchstart", e)), $(i).live("mousedown", function (e) {
                return r.call(this, e), e.preventDefault()
            }), $(i).live("click", function (e) {
                return e.preventDefault()
            }), $(t).live("click", function (t) {
                return e.call(this, t), t.preventDefault()
            }), s = "exclusively_expanded", u = null, o = null, $(n).live("beforeexpand", function (e) {
                var t, n;
                return n = $(this).get(0), u && u !== n && $(u).removeClass(s).collapse(), $(n).addClass(s), u = n, t = a, $(document).bind("click.exclusiveExpandable", function (e) {
                    if (t === a) return;
                    if (!$(e.target).closest(u).length) return $(u).collapse()
                })
            }), a = 0, window.addEventListener("mousedown", function () {
                return a++
            }, !0), $(n).live("beforecollapse", function () {
                return $(document).unbind(".exclusiveExpandable"), u = null
            })
        }), $("div.sheet").live("beforeSheetSave", function () {
            return $("" + s + ".expanded").collapse()
        }), o = function (e, t) {
            var n;
            return n = e.dispatch(t), !n.isDefaultPrevented()
        }, $.fn.expandable = function () {
            return $(this).closest(s)
        }, $.fn.expand = function () {
            var e;
            return e = $(this).expandable(), e.is(":not(.expanded)") && o(e, "beforeexpand") && (e.addClass("expanded"), e.trigger("expand")), e
        }, $.fn.collapse = function () {
            var e;
            return e = $(this).expandable(), e.is(".expanded") && o(e, "beforecollapse") && (e.removeClass("expanded"), e.trigger("collapse")), e
        }
    }.call(this),
    function () {
        var e;
        e = 70, $("span.pill[data-behavior~=expandable]:has(.balloon)").live("expand", function (t) {
            var n, r, i, s, o;
            n = $(t.target).find(".balloon"), n.data("original-class") && (n.removeClass("left_side right_side").addClass(n.data("original-class")), n.data("original-class", null)), n.data("moved-up") && (n.css({
                        marginTop: 0
                    }), n.find(".arrow").css({
                        marginTop: 0
                    }), n.data("moved-up", !1)), r = n.offset().top + n.outerHeight() - ($(window).height() + $(window).scrollTop()), o = n.offset().top - $(window).scrollTop() - n.outerHeight() + e, r > 20 && o > 0 && (s = n.outerHeight() - e, n.css({
                        marginTop: "-" + s + "px"
                    }), n.find(".arrow").css({
                        marginTop: s
                    }), n.data("moved-up", !0));
            if (n.hasClass("right_side")) {
                i = n.offset().left + n.outerWidth() - ($(window).width() + $(window).scrollLeft());
                if (i > 0) return n.removeClass("right_side").addClass("left_side"), n.data("original-class", "right_side")
            } else if (n.hasClass("left_side") && n.offset().left < 0) return n.removeClass("left_side").addClass("right_side"), n.data("original-class", "left_side")
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        t = null, e = null, a = "[data-behavior~=file_drop_target]", i = 0, $(window).bind("dragenter", function (n) {
            var u, f;
            r(n);
            if (!s(n)) return;
            u = $(n.target).closest(a);
            if (!u.length) return;
            return u.is(t) ? i++ : (o(), i = 1, f = u.dispatch("file:dragenter"), t = u, e = f.isDefaultPrevented() ? null : u)
        }), $(window).bind("dragover", function (e) {
            return r(e)
        }), $(window).bind("dragleave", function (e) {
            var n;
            r(e), n = $(e.target).closest(a);
            if (!n.length) return;
            if (n.is(t) && --i === 0) return o()
        }), $(window).bind("drop", function (n) {
            var i;
            r(n);
            if (!s(n)) return;
            i = $(n.target).closest(a);
            if (!i.length) return;
            if (i.is(e)) return i.trigger("file:drop", [_(n.originalEvent.dataTransfer.files).toArray()]), i.trigger("file:dragleave"), t = null, e = null
        }), $(document).bind("page:update expand", function () {
            return _.defer(function () {
                return $("" + a + " iframe").install("behavior for dropping files on an iframe", function (e) {
                    return e.each(function () {
                        var e, t;
                        try {
                            return e = $(this), t = e.closest(a), e.contents().bind("dragenter", function (t) {
                                if (!s(t)) return;
                                return n(e)
                            }), t.bind("file:dragenter", function () {
                                return n(e)
                            }), t.bind("file:drop file:dragleave", function () {
                                return u(t)
                            })
                        } catch (r) {
                            return console.error("an error occurred while trying to find events to iframe (" + r + ")")
                        }
                    })
                })
            })
        }), o = function () {
            if (t) return t.trigger("file:dragleave"), t = null, e = null
        }, s = function (e) {
            var t, n;
            return f.call((t = (n = e.originalEvent.dataTransfer) != null ? n.types : void 0) != null ? t : [], "Files") >= 0
        }, r = function (e) {
            return e.stopPropagation(), e.preventDefault()
        }, n = function (e) {
            var t, n, r, i, s, o;
            return r = 1, i = e.position(), n = i.left - r, s = i.top - r, o = e.outerWidth() + r * 2, t = e.outerHeight() + r * 2, i = "absolute", e.before($('<div class="iframe_blanket">').css({
                        left: n,
                        top: s,
                        width: o,
                        height: t,
                        position: i
                    }))
        }, u = function (e) {
            return e.find(".iframe_blanket").remove()
        }
    }.call(this),
    function () {
        var e;
        e = function (t) {
            var n, r, i, s, o, u;
            r = t.cloneNode(!1), r.id = "", r.className = "", n = $(r), n.css($(t).computedStyle()), u = t.childNodes;
            for (s = 0, o = u.length; s < o; s++) i = u[s], i.nodeType === 1 ? r.appendChild(e(i)) : i.nodeType === 3 && r.appendChild(i.cloneNode(!1));
            return r
        }, $.fn.ghost = function () {
            return this.length ? $(e(this.get(0))).css({
                    position: "absolute",
                    zIndex: 999
                }).offset(this.offset()).appendTo("body") : this
        }
    }.call(this),
    function () {
        var e;
        e = function (e) {
            var t, n;
            return t = $(e), (n = t.data("installed behaviors")) || t.data("installed behaviors", n = {}), n
        }, $.fn.install = function (t, n) {
            var r;
            r = this.filter(function () {
                return !e(this)[t]
            });
            if (r.length) return n(r), r.each(function () {
                return e(this)[t] = !0
            })
        }
    }.call(this),
    function (e) {
        e.fn.autoGrowInput = function (t) {
            return t = e.extend({
                    maxWidth: 1e3,
                    minWidth: 0,
                    comfortZone: 70
                }, t), this.filter("input:text").each(function () {
                    var n = t.minWidth || e(this).width(),
                        r = "",
                        i = e(this),
                        s = e("<tester/>").css({
                                position: "absolute",
                                top: -9999,
                                left: -9999,
                                width: "auto",
                                fontSize: i.css("fontSize"),
                                fontFamily: i.css("fontFamily"),
                                fontWeight: i.css("fontWeight"),
                                letterSpacing: i.css("letterSpacing"),
                                whiteSpace: "nowrap"
                            }),
                        u = function () {
                            if (r === (r = i.val())) return;
                            var e = r.replace(/&/g, "&amp;").replace(/\s/g, "&nbsp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
                            s.html(e);
                            var u = s.width(),
                                a = u + t.comfortZone >= n ? t.maxWidth : n,
                                f = i.width(),
                                l = a < f && a >= n || a > n && a <= t.maxWidth;
                            l && i.stop().animate({
                                    width: a
                                }, "fast")
                        };
                    s.insertAfter(i), e(this).bind("keyup keydown blur update", _.throttle(u, 1e3))
                }), this
        }
    }(jQuery),
    function () {
        $.rails.href = function (e) {
            return e.data("url") || e.attr("href")
        }
    }.call(this),
    function () {
        $.support.touch = "ontouchstart" in document.documentElement, $.browser.mobile = /iPhone|iP[ao]d|Android|Windows Phone|BlackBerry/.test(navigator.userAgent), $.support.placeholder = document.createElement("input").placeholder != null
    }.call(this),
    function () {
        var e, t, n;
        e = jQuery, e.fn.truncate = function (e) {
            var n;
            return n = this, n.each(function () {
                var n;
                return n = this, new t(n, e)
            })
        }, t = function () {
            function t(t, n) {
                this.opts = e.extend({}, this.defaults, n), this.full_node = t, this.textShouldBeTruncated() && (this.trailing_whitespace = !0, this.truncated_node = this.truncate(this.full_node, this.opts.max_length), this.install())
            }
            return t.prototype.defaults = {
                allowable_overage: 50,
                max_length: 100,
                more: "more",
                less: "less",
                css_more_class: "truncator-link truncator-more",
                css_less_class: "truncator-link truncator-less"
            }, t.prototype.textShouldBeTruncated = function () {
                return this.charactersOverTheLimit() > this.opts.allowable_overage
            }, t.prototype.contentLength = function (t) {
                return e.trim(n(e(t).text())).length
            }, t.prototype.charactersOverTheLimit = function () {
                return this.contentLength(this.full_node) - this.opts.max_length
            }, t.prototype.install = function () {
                return e(this.full_node).hide(), this.truncated_node.insertAfter(e(this.full_node)), this.installMoreLink(), this.installLessLink()
            }, t.prototype.installMoreLink = function () {
                var t = this;
                return this.findNodeForMore(this.truncated_node).append(' <a href="#show more content" class="' + this.opts.css_more_class + '">' + this.opts.more + "</a>"), this.truncated_node.find("a:last").click(function () {
                    return t.truncated_node.hide(), e(t.full_node).show(), !1
                })
            }, t.prototype.installLessLink = function () {
                var t = this;
                return this.findNodeForLess(e(this.full_node)).append(' <a href="#show less content" class="' + this.opts.css_less_class + '">' + this.opts.less + "</a>"), e(this.full_node).find("a:last").click(function () {
                    return t.truncated_node.show(), e(t.full_node).hide(), !1
                })
            }, t.prototype.truncate = function (t, n) {
                var r, i = this;
                return t.nodeType === 3 ? this.truncateText(t, n) : (r = e(t).clone().empty(), e(t).contents().each(function (e, t) {
                            var s, o;
                            s = n - r.text().length;
                            if (s === 0) return;
                            o = i.truncate(t, s);
                            if (o) return r.append(o)
                        }), r)
            }, t.prototype.truncateText = function (t, r) {
                var i;
                return i = n(t.data), this.trailing_whitespace && (i = i.replace(/^ /, "")), i = i.slice(0, r), e("<div/>").text(i).html()
            }, t.prototype.findNodeForMore = function (t) {
                var n, r, i;
                return n = e(t), i = n.children(":last"), i ? (r = i.css("display"), !r || r === "inline" ? n : this.findNodeForMore(i)) : t
            }, t.prototype.findNodeForLess = function (t) {
                var n, r;
                return n = e(t), r = n.children(":last"), r && r.is("p") ? r : t
            }, t
        }(), n = function (e) {
            return e.replace(/\s+/g, " ")
        }
    }.call(this),
    function () {
        var e, t, n, r;
        e = $(document), t = !1, r = !1, n = function (t) {
            var n, r, i, s;
            r = (new Date).getTime(), i = (s = window.localStorage) != null ? s.profilePageEvents : void 0, i && console.profile(t), e.trigger(t), i && console.profileEnd(), n = (new Date).getTime();
            if (Stacker.env === "development") return console.warn("" + t + " (" + (n - r) + "ms)")
        }, e.ready(function () {
            return n("page:change"), n("page:update")
        }), e.bind("panelDisplayed", function (e, r) {
            return r.isLoading() ? (n("page:beforechange"), t = !0) : (n("page:change"), n("page:update"), t = !1)
        }), e.bind("workspace:load", function () {
            return r = !0
        }), e.bind("panelReplaced", function (e, i) {
            if (t || !r) t = !1, n("page:change");
            return r = !1, n("page:update")
        }), e.bind("ajaxSuccess", function (e, r, i) {
            if (t) return;
            if (r.stacker) return;
            if (!$.trim(r.responseText)) return;
            return n("page:update")
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        e = jQuery, u = "placeholding", f = [p = 33, h = 34, s = 35, o = 36, a = 37, g = 38, d = 39, i = 40], l = f.concat([t = 8, m = 9, v = 16, r = 17, c = 18, n = 91]), x = function (e, t, n) {
            var r;
            if (e.setSelectionRange) return e.focus(), e.setSelectionRange(t, n);
            if (e.createTextRange) return r = e.createTextRange(), r.collapse(!0), r.moveEnd("character", n), r.moveStart("character", t), r.select()
        }, S = function () {
            var e = this;
            if (w(this)) return setTimeout(function () {
                try {
                    return e.setSelectionRange(0, 0)
                } catch (t) {}
            }, 0)
        }, y = function (t) {
            var n, r;
            if (w(this))
                if (n = t.which, T.call(l, n) >= 0) {
                    if (r = t.which, T.call(f, r) >= 0) return S.apply(this)
                } else {
                    e(this).val("").removeClass(u);
                    if (this.getAttribute("data-type") === "password") return this.type = "password"
                }
        }, E = function () {
            var t;
            if (this.value.length === 0) {
                t = e(this), t.addClass(u).val(this.getAttribute("data-placeholder")), this.type === "password" && (this.type = "text");
                if (t.is(":focus")) return S.apply(this)
            }
        }, b = function () {
            return e(this).find("[data-placeholder]").each(function () {
                if (w(this)) return e(this).val("")
            })
        }, w = function (e) {
            return e.value === e.getAttribute("data-placeholder")
        }, e.fn.placeholder = function (t) {
            var n;
            return t == null && (t = {
                    clearOnSubmit: !0
                }), n = this, n.each(function () {
                    var n;
                    n = e(this), this.setAttribute("data-type", this.type), this.setAttribute("data-placeholder", this.getAttribute("placeholder")), this.removeAttribute("placeholder"), E.apply(this), n.bind("focus drop click", S), n.bind("keydown", y), n.bind("keyup blur", E);
                    if (t.clearOnSubmit) return e(this.form).submit(b)
                })
        }
    }.call(this),
    function () {
        $.fn.preserveScrollOffset = function (e) {
            var t;
            return this.length ? (t = this.offset().top - $(window).scrollTop(), e.call(this), window.scrollTo(0, this.offset().top - t)) : e.call(this)
        }
    }.call(this),
    function () {
        $.fn.repositionAt = function (e) {
            var t, n;
            return t = this.parent(), this.remove(), (n = t.children().get(e - 1)) ? this.insertBefore(n) : this.appendTo(t)
        }
    }.call(this),
    function () {
        $.fn.resetForm = function () {
            return this.removeClass("submitting").get(0).reset(), this
        }
    }.call(this),
    function () {
        $.fn.slideIntoView = function (e) {
            var t, n, r, i, s, o, u, a, f, l = this;
            e == null && (e = {});
            if ($(this).data("slidingIntoView")) return this;
            r = (a = e.margin) != null ? a : 15, i = this.offset().top - r, n = this.outerHeight() + r, t = i + n, u = $(window).scrollTop(), o = $(window).height(), s = u + o, (f = e.duration) == null && (e.duration = "fast"), e.onAfter = function () {
                return $(l).data("slidingIntoView", !1)
            };
            if (i <= u) return e.offset = {
                top: -r
            }, $.scrollTo(this, e), $(this).data("slidingIntoView", !0);
            if (t > s) return e.offset = {
                top: n - o
            }, $.scrollTo(this, e), $(this).data("slidingIntoView", !0)
        }
    }.call(this),
    function () {
        this.StorageAdapter = function () {
            function i(e, t) {
                this.store = e, this.namespace = t
            }
            var e, t, n, r;
            return n = function (e) {
                var t, n;
                return n = (new Date).getTime(), t = JSON.stringify(e), "" + n + "\n" + t
            }, t = function (e) {
                return e != null ? e.split("\n", 2) : []
            }, r = function (e) {
                var n, r, i;
                i = t(e), r = i[0], n = i[1];
                if (n) return JSON.parse(n)
            }, e = function (e) {
                var n, r, i;
                i = t(e), r = i[0], n = i[1];
                if (r) return new Date(parseInt(r, 10))
            }, i.prototype.get = function (e) {
                try {
                    return r(this.store.getItem("" + this.namespace + ":" + e))
                } catch (t) {}
            }, i.prototype.set = function (e, t) {
                try {
                    return this.store.setItem("" + this.namespace + ":" + e, n(t))
                } catch (r) {}
            }, i.prototype.unset = function (e) {
                try {
                    return this.store.removeItem("" + this.namespace + ":" + e)
                } catch (t) {}
            }, i.prototype.has = function (e) {
                try {
                    return this.store.getItem("" + this.namespace + ":" + e) != null
                } catch (t) {}
            }, i.prototype.ageOf = function (t) {
                try {
                    return e(this.store.getItem("" + this.namespace + ":" + t))
                } catch (n) {}
            }, i.prototype.touch = function (e) {
                return this.set(e, this.get(e))
            }, i.prototype.keys = function () {
                var e, t, n, r, i, s;
                try {
                    n = "" + this.namespace + ":", t = n.length, i = this.store, s = [];
                    for (e in i) r = i[e], e.slice(0, t) === n && s.push(e.slice(t));
                    return s
                } catch (o) {
                    return []
                }
            }, i.prototype.clear = function () {
                var e, t, n, r, i;
                r = this.keys(), i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(this.unset(e));
                return i
            }, i
        }()
    }.call(this),
    function () {
        $(document).live("touchstart", function () {
            var e, t;
            return e = !1, t = new Date, $(this).one("touchmove", function () {
                return e = !0
            }), $(this).one("touchcancel", function () {
                return e = !0
            }), $(this).one("touchend", function () {
                if (e) return;
                if (new Date - t < 500) return $(event.target).trigger("tap")
            })
        })
    }.call(this),
    function () {
        var e, t, n, r, i = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        t = {
            fast: 200,
            slow: 600
        }, n = null, r = null, e = null, $(function () {
            var t;
            t = document.body.style;
            if ("WebkitTransition" in t) return n = "WebkitTransition", r = "webkitTransitionEnd", e = "webkitAnimationEnd";
            if ("MozTransition" in t) return n = "MozTransition", r = "transitionend", e = "animationend"
        }), $.fn.transition = function (e, i) {
            var s, o, u, a, f, l, c, h = this;
            return i == null && (i = {}), s = (f = i.duration) != null ? f : "fast", s in t && (s = t[s]), u = function () {
                var t;
                return h.css(e), n ? (t = !1, h.one(r, function () {
                            return t = !0, h.css(n, ""), typeof i.complete == "function" ? i.complete() : void 0
                        }), setTimeout(function () {
                            if (!t) return h.trigger(r)
                        }, s + 800)) : typeof i.complete == "function" ? i.complete() : void 0
            }, n ? (a = function () {
                var t;
                t = [];
                for (o in e) t.push(o);
                return t
            }(), e["" + n + "Property"] = a.join(", "), e["" + n + "Duration"] = "" + s + "ms", e["" + n + "TimingFunction"] = (l = i.timing) != null ? l : "ease-in-out", e["" + n + "Delay"] = (c = i.delay) != null ? c : 0, setTimeout(u, 1)) : u(), this
        }, $.fn.onTransitionEnd = function (t, s) {
            return s == null && (s = t, t = null), n ? this.one("" + r + " " + e, function (e) {
                var n;
                if (!t || (n = e.originalEvent.propertyName, i.call(t.split(" "), n) >= 0)) return s()
            }) : s(), this
        }
    }.call(this),
    function () {
        _.debounceConditionally = function (e, t, n) {
            var r;
            return r = _.debounce(e, t),
            function () {
                return n.apply(this, arguments) ? r.apply(this, arguments) : e.apply(this, arguments)
            }
        }
    }.call(this),
    function () {
        this.BucketProcessor = function () {
            function BucketProcessor(e) {
                this.operation = e
            }
            return BucketProcessor.prototype.pollLimit = 60, BucketProcessor.prototype.pollCount = 0, BucketProcessor.prototype.pollInterval = 1e3, BucketProcessor.prototype.showProgressMessageAfter = 3e3, BucketProcessor.prototype.run = function () {
                var e = this;
                return this.watchForProgress(), this.operation.save({}, {
                        error: function () {
                            return e.operationFailed()
                        },
                        success: function () {
                            return e.operationReloaded()
                        }
                    })
            }, BucketProcessor.prototype.watchForProgress = function () {
                var e = this;
                return setTimeout(function () {
                    if (e.operation.isStillRunning()) return e.trigger("processor:progress")
                }, this.showProgressMessageAfter)
            }, BucketProcessor.prototype.pollForOperationStatus = function () {
                var e = this;
                this.pollCount += 1;
                if (this.pollCount > this.pollLimit) {
                    this.operationFailed();
                    return
                }
                return this.operation.fetch({
                        error: function () {
                            return e.operationFailed()
                        },
                        success: function () {
                            return e.operationReloaded()
                        }
                    })
            }, BucketProcessor.prototype.operationReloaded = function () {
                var xhr, _this = this;
                return this.operation.isStillRunning() ? setTimeout(function () {
                    return _this.pollForOperationStatus()
                }, this.pollInterval) : this.operation.isSuccessful() ? (xhr = new XMLHttpRequest, xhr.open("GET", "/" + bcx.currentAccountSlug + this.operation.completionUrl(), !0), xhr.setRequestHeader("X-CSRF-Token", bcx.authenticityToken), xhr.setRequestHeader("Accept", "text/javascript"), xhr.onload = function () {
                    return eval(xhr.responseText), _this.trigger("processor:finished")
                }, xhr.send(), this.trigger("processor:success")) : this.trigger("processor:failed")
            }, BucketProcessor.prototype.operationFailed = function () {
                return console.warn("failure!"), this.trigger("processor:failed")
            }, BucketProcessor.prototype.on = function (e, t) {
                return document.addEventListener(e, t)
            }, BucketProcessor.prototype.trigger = function (e) {
                var t;
                return t = document.createEvent("Events"), t.initEvent(e, !0, !1), t.defaultPrevented = !document.dispatchEvent(t), t
            }, BucketProcessor
        }()
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        this.CopyProcessor = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.startWatching = function () {
                return this.watchForProgress(), this.operationReloaded()
            }, n
        }(BucketProcessor)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        this.MoveProcessor = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n
        }(BucketProcessor)
    }.call(this),
    function () {
        var e, t;
        t = /\/([^\/]+)\/(\d+)[^\/]*$/, e = function (e) {
            var n, r, i, s, o;
            return o = (s = $(e).url()) != null ? s.match(t) : void 0, i = o[0], n = o[1], r = o[2], {
                collection: n,
                id: r
            }
        }, $.fn.url = function () {
            return $(this).data("url")
        }, $.fn.collection = function () {
            return e(this).collection
        }, $.fn.id = function () {
            return e(this).id
        }
    }.call(this),
    function () {
        window.FileIcons = {
            LIB: {
                AI: "AI",
                AIFF: "AIFF",
                ASP: "WEB",
                CFM: "WEB",
                CGI: "WEB",
                CSV: "CSV",
                DMG: "DMG",
                DELETED: "Deleted",
                DOC: "DOC",
                DOCX: "DOCX",
                EPS: "EPS",
                FLA: "FLA",
                GIF: "GIF",
                GZ: "TGZ",
                HTML: "HTML",
                HTM: "HTM",
                INDD: "INDD",
                JPG: "JPG",
                JPEG: "JPEG",
                JSP: "WEB",
                KEY: "KEY",
                LINK: "WEB",
                M4A: "M4A",
                M4V: "M4V",
                MOV: "MOV",
                MP3: "MP3",
                MPEG: "MPEG",
                MPG: "MPG",
                NUMBERS: "NUMBERS",
                ODP: "ODP",
                ODS: "ODS",
                ODT: "ODT",
                PAGES: "PAGES",
                PDF: "PDF",
                PHP: "WEB",
                PL: "WEB",
                PNG: "PNG",
                POT: "POT",
                PPT: "PPT",
                PPTX: "PPTX",
                PS: "EPS",
                PSD: "PSD",
                RAR: "RAR",
                RM: "RM",
                RTF: "RTF",
                SIT: "SIT",
                SWF: "SWF",
                TAR: "TAR",
                TGZ: "TGZ",
                TIF: "TIF",
                TIFF: "TIFF",
                TXT: "TXT",
                VSD: "VSD",
                WAV: "WAV",
                WEB: "WEB",
                WMA: "WMA",
                WMV: "WMV",
                XLS: "XLS",
                XLSX: "XLSX",
                XLSM: "XLS",
                ZIP: "ZIP"
            },
            SIZES: {
                small: "24x18",
                big: "32x32",
                jumbo: "86x100"
            },
            URLS: {
                "AIFF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AIFF_big-39d93987eb082a1194f5557f7636bb7f.png",
                "AIFF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AIFF_jumbo-6a2acea75790aedd94a6b111e023193c.png",
                "AIFF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AIFF_small-331f33eea47807f7c9ce21b1662157f3.png",
                "AI_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AI_big-99a762fbf44d6697c6d7a5869e86c2cd.png",
                "AI_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AI_jumbo-db4652265f682ed1f6528e9cbf7c29a9.png",
                "AI_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AI_small-6cbdeacb52e94b48951715c7db45bb0d.png",
                "CSV_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/CSV_big-84390c9d9a08127104dff46d668953b6.png",
                "CSV_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/CSV_jumbo-613e30a8bf879cf836f84fb202974ce7.png",
                "CSV_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/CSV_small-0a2d34e258439729a3fd41f89cc2b803.png",
                "DMG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DMG_big-ae64f3c392f7d94f2cfd084d2afdee86.png",
                "DMG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DMG_jumbo-34b05e74fd1e0302073c5305183effd4.png",
                "DMG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DMG_small-552e80c3f120fbecd1342fd9abee601e.png",
                "DOCX_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOCX_big-e564de0e076933ad46333687ee53cd57.png",
                "DOCX_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOCX_jumbo-65b55c012f86f9f720c4966d3412af54.png",
                "DOCX_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOCX_small-2a3abfd9d6c3218e751b29f1e0b7f94c.png",
                "DOC_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOC_big-5e4938d81b16da5e9bb6529fcb874e8c.png",
                "DOC_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOC_jumbo-75d254944e2a896e39043711b870e126.png",
                "DOC_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOC_small-af0479d15202cf63ae8d6d696ee813e5.png",
                "Deleted_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Deleted_big-5d53c2e6c1110a974094718f6432658f.png",
                "Deleted_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Deleted_jumbo-21528f8a71a27f456b7794e5defa5333.png",
                "EPS_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/EPS_big-387fb538d167d78220667cf651587787.png",
                "EPS_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/EPS_jumbo-5945abd9e125ed012e7bdf477ac46288.png",
                "EPS_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/EPS_small-a5c71c4e0872e69bf4bddfd6f8eedd3a.png",
                "FLA_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/FLA_big-df96e673315725e179618d0fde95a372.png",
                "FLA_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/FLA_jumbo-4c0faf0c53c6945404cbe6ea23b8e28b.png",
                "FLA_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/FLA_small-97ffe7639c8278eab9e8635c2b369f49.png",
                "GIF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/GIF_big-3d75c6f34ccc8a69292102f04cd7fc97.png",
                "GIF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/GIF_jumbo-31e7b9776eef2bb5389cbeeef52f0268.png",
                "GIF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/GIF_small-316acd8f9343891233b59e967bcd47f2.png",
                "Generic_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Generic_big-d6375b362757d90dc6e610f909af738e.png",
                "Generic_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Generic_jumbo-05577238f610e46a134a7a66baa80157.png",
                "Generic_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Generic_small-982c0597e129c6eff395170656746904.png",
                "HTML_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTML_big-eb1ae8916582a1c6c9b6e2b65a4a20d7.png",
                "HTML_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTML_jumbo-c51b66c54da06aa79a9c96a8c71c4461.png",
                "HTML_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTML_small-c787890460ae5b5a40974b98721ce083.png",
                "HTM_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTM_big-8ffaf8c5d2955ac480a808ef388fb082.png",
                "HTM_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTM_jumbo-117dd929a93e4cf60fcceae16cfc5359.png",
                "HTM_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTM_small-761625427c232874bc31522df45b0d8b.png",
                "INDD_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/INDD_big-d125c3c55dc7b7161d2ab8869d6e1fe8.png",
                "INDD_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/INDD_jumbo-52150e144c65e184a95f43cc87784f08.png",
                "INDD_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/INDD_small-c09ee28f59fd049a5d3d41806fbb1a23.png",
                "JPEG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPEG_big-c7aa586c6034a453b101b70066bf34e6.png",
                "JPEG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPEG_jumbo-299bc52c723f298423b3b8c5380ee736.png",
                "JPEG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPEG_small-78c043e20b1ba602a4a25d176dead2a1.png",
                "JPG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPG_big-e29d5155eec46c2125373a788073941f.png",
                "JPG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPG_jumbo-f7aafdfa253192213c5c0f4b845a413e.png",
                "JPG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPG_small-60b7ee7dbae462fc1a64ba3057028918.png",
                "KEY_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/KEY_big-69aa1741d1d25eb55cd960ae3e150548.png",
                "KEY_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/KEY_jumbo-d5b6da5609db0e68b175970e5a7b6206.png",
                "KEY_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/KEY_small-b66f076255256bef0e3ebfbc132b02d8.png",
                "LINK_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/LINK_big-85b3f6749dfb38a25481883660a6a029.png",
                "LINK_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/LINK_jumbo-9a6aa3df96a82f93c3d346ebd84a3049.png",
                "LINK_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/LINK_small-f73296bc4cc2d71e9b0bc1e406d7bc96.png",
                "M4A_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4A_big-4517a3b80789604d447ee8c90a36d6b1.png",
                "M4A_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4A_jumbo-1875e5fd0081975f64197d5578360156.png",
                "M4A_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4A_small-4ca7e168cfc4bfbedd205798a49bb788.png",
                "M4V_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4V_big-edbdc44a6074707d0bfd93ee8136d307.png",
                "M4V_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4V_jumbo-262fc5603554ed2421be281039d87443.png",
                "M4V_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4V_small-a573b3c3c521a2a24de10b5581b9281f.png",
                "MOV_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MOV_big-ee0a43312871d4d1a5b95acd89760705.png",
                "MOV_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MOV_jumbo-02ae1df3bd27db9af79732f5bb17edaf.png",
                "MOV_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MOV_small-c4d695ef01da76f24589cfa04664e977.png",
                "MP3_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MP3_big-684c96e0b56d9c16dfaae1686789ffd2.png",
                "MP3_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MP3_jumbo-4f7bac3b1197246d3fd559101c9792fc.png",
                "MP3_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MP3_small-8e6f3834dd1b555b78815df08d808c0d.png",
                "MPEG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPEG_big-51c60210b4e0dd20be0cbf2d01ed5838.png",
                "MPEG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPEG_jumbo-5c431eebd927fccd5288e53d0bc68302.png",
                "MPEG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPEG_small-8be7373b1242666a87f57bc1b4d5681e.png",
                "MPG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPG_big-7116dfb0d32dd2c886f9ce8e0d01fc1f.png",
                "MPG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPG_jumbo-2696aac6f01b83aea7c52d0c95d9d3d5.png",
                "MPG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPG_small-c582750ff6c448f6ae046ed77c303b60.png",
                "NUMBERS_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/NUMBERS_big-9a5880c08f45c79ae3ca4eeca91e0014.png",
                "NUMBERS_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/NUMBERS_jumbo-0eb8e7117e21a2b87bbd478171073a82.png",
                "NUMBERS_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/NUMBERS_small-24370bf2d393a83dd1456f4bc8eb4fca.png",
                "ODP_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODP_big-a7c66e8640fddeb51fa79d87d7331897.png",
                "ODP_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODP_jumbo-ecd8f84ac3b16b59e531883358468bd2.png",
                "ODP_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODP_small-82bc5abc39eace6eb51bfe14bad0fde7.png",
                "ODS_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODS_big-d8fdccb255de43f03f74f5511d2434d2.png",
                "ODS_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODS_jumbo-eb70e8217a10a688c800a6482cd8c4e0.png",
                "ODS_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODS_small-1852028d6a81456838771dd1642089c8.png",
                "ODT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODT_big-b592044b6337537f885e0f2ced8e3cf4.png",
                "ODT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODT_jumbo-865a6ef482ce42906cadceb35f9a8d94.png",
                "ODT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODT_small-f4efac1a61cbbef54a84bb2b4f766039.png",
                "PAGES_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PAGES_big-42b044a1235748c214568e547a2e8f9a.png",
                "PAGES_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PAGES_jumbo-580565a2a30212644af382fe06ea6d18.png",
                "PAGES_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PAGES_small-715144a8a7d49552357f581355ceab6e.png",
                "PDF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PDF_big-dd7d01dd5ddae4443b645e0ea62df4bb.png",
                "PDF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PDF_jumbo-6daeff8a984a84eb66605a3e9e18a0c1.png",
                "PDF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PDF_small-874242210d3a0112d96607ef046cf7ff.png",
                "PNG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PNG_big-4bf5692ecf39888c3ddc4d5230c841cf.png",
                "PNG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PNG_jumbo-59de75c1c959c212181a5f0e98622a4f.png",
                "PNG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PNG_small-5ccde720bafbd4018efc356648dcab71.png",
                "POT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/POT_big-9839b7f90a9afc213c013e6b8f7d6e2c.png",
                "POT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/POT_jumbo-8aef4a96855c760d2fd2bbc073eeb0f7.png",
                "POT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/POT_small-bdecd69aba04e41f57f528a17ec3479d.png",
                "PPTX_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPTX_big-33fe5fa2c69d2ce3cfcf374ae9a67fb8.png",
                "PPTX_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPTX_jumbo-89e59d39de67ec9619071f450c611b33.png",
                "PPTX_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPTX_small-1c2b5a3c8f3e8885292d1791a300d2c6.png",
                "PPT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPT_big-fce105362d22a715b303c5168784c357.png",
                "PPT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPT_jumbo-b34b9ab5d15791ffb4e4667b38695603.png",
                "PPT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPT_small-2c483f46e9fdcb673f513345e4d635ac.png",
                "PSD_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PSD_big-50e283ebb8f3799576b9bf1cdfff4366.png",
                "PSD_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PSD_jumbo-ccfed6b99eb5d809d3e00b582115f767.png",
                "PSD_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PSD_small-148c68232f6006aad3a392aef92d5769.png",
                "RAR_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RAR_big-4dae42b3e00f2d0c019c236a387ee3ea.png",
                "RAR_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RAR_jumbo-011a01dd246b69799bec8775f44cd67b.png",
                "RAR_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RAR_small-03389c05f6817589c4f38096749cfccf.png",
                "RM_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RM_big-816dae2acf18a9f4cf97d82d73b44275.png",
                "RM_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RM_jumbo-be8143a6783ba068a69e08f1db6ca8f4.png",
                "RM_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RM_small-792f39e1c6d418b2dd3b9c51fe6c48dd.png",
                "RTF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RTF_big-46ccb2ee04c21a2e3239b101e732a39d.png",
                "RTF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RTF_jumbo-46aedfcf00203c8a070e539201406c4b.png",
                "RTF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RTF_small-7fe14a3a4e43e070883c3ff42ffa1ae9.png",
                "SIT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SIT_big-e37ce99248eee5d55c4e34a3118234e1.png",
                "SIT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SIT_jumbo-a7b6d7b87f0a3db415a868f0750aa417.png",
                "SIT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SIT_small-02f10e402b4fdf4ffd08c52d75566c4a.png",
                "SWF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SWF_big-73a02c0ed02e540f33bb7a771c3d9404.png",
                "SWF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SWF_jumbo-7bb8bbb8ca69c52b31864eda6acacb84.png",
                "SWF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SWF_small-9840126e9a0b6106e54842a598016dfc.png",
                "TAR_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TAR_big-3bc4aa445c0a59b78ab82a5787921047.png",
                "TAR_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TAR_jumbo-59825fc6a1d89d82ce400f47ba05b18e.png",
                "TAR_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TAR_small-83975ae8c708ab328ad40a59b2a0facb.png",
                "TGZ_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TGZ_big-27ad0c00b12160c126fa6453fbbdaf96.png",
                "TGZ_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TGZ_jumbo-74823bd072606bc8f0c6bd49e34ab129.png",
                "TGZ_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TGZ_small-d7483fc103e9f65c1dfd85abad0cc713.png",
                "TIFF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIFF_big-9d24df5fb07ec94808410e2af05bd5b3.png",
                "TIFF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIFF_jumbo-85311fdab5b35be6f4e61aab1186b4a3.png",
                "TIFF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIFF_small-acce77679af4dc3de87327e09d29d136.png",
                "TIF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIF_big-001c007e98397c8588cdbcc4e12c8cee.png",
                "TIF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIF_jumbo-7cb9278501b253e0e2aa00f34a722a12.png",
                "TIF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIF_small-0dedb3baa3a95b514bde425f451ab16d.png",
                "TXT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TXT_big-847688a06dcd003a5760a5344eff248c.png",
                "TXT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TXT_jumbo-62cf3dabfb063f9e696fdcac564ed721.png",
                "TXT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TXT_small-9cdd6fa61fd59678ac19a9bb40c9adb4.png",
                "VSD_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/VSD_big-92a2f292c4e2b997e12c82f2a15ab014.png",
                "VSD_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/VSD_jumbo-29bfac092e6804b5baf273cec008534b.png",
                "VSD_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/VSD_small-3663c97b8f470658b045e6714079178f.png",
                "WAV_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WAV_big-853c70ac994ad9c62ba22960337632e7.png",
                "WAV_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WAV_jumbo-dc0725baba5fad1ed9481cfaa52cd23f.png",
                "WAV_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WAV_small-8ae17305b1737584f70b8ada74231fd0.png",
                "WEB_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WEB_big-85b3f6749dfb38a25481883660a6a029.png",
                "WEB_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WEB_jumbo-b0f8821e1642e59b30582c0c356c5715.png",
                "WEB_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WEB_small-f73296bc4cc2d71e9b0bc1e406d7bc96.png",
                "WMA_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMA_big-209ebaa39636434686d17e39f941fec5.png",
                "WMA_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMA_jumbo-7e695bebb52939ad4aff8c32ab8e1ec0.png",
                "WMA_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMA_small-3224c64b6d0eb8c0e582f0126006ecf2.png",
                "WMV_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMV_big-672e0740db3be24c6fb4391953789682.png",
                "WMV_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMV_jumbo-c6367d6c6a1e5a9c33f41f171a1e339c.png",
                "WMV_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMV_small-a19d1e04472bff5bdc7d99b558610c40.png",
                "XLSX_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLSX_big-303845249e3037a13be6586d3736280c.png",
                "XLSX_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLSX_jumbo-c17a89061d43d2991695da204da74676.png",
                "XLSX_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLSX_small-d0b802c365a91549256201a2257ecf7c.png",
                "XLS_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLS_big-563a42a0b9efe43daa944ac6ea847b58.png",
                "XLS_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLS_jumbo-41803872347887d64947c66e130e243b.png",
                "XLS_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLS_small-cc6980bcdd56c5d5953e7c1c7139c614.png",
                "ZIP_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ZIP_big-973bd650129933d06a5e1c0542c88c29.png",
                "ZIP_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ZIP_jumbo-608a414944353d4576e45083cd212ce3.png",
                "ZIP_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ZIP_small-4f0cfdea055d6f49ebcebb5be3d4ffab.png",
                "google_document_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_document_big-a68d51e2bbb3f04e97a03cd35c61b61b.png",
                "google_document_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_document_jumbo-cd7745c22dfa39f04bcd116d10b1219b.png",
                "google_document_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_document_small-3b73739b9f838b959616815909691866.png",
                "google_drawing_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_drawing_big-505f2128eab74abeef717da2da7ca544.png",
                "google_drawing_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_drawing_jumbo-d2cbd8f1656c74a4a4cb3fbe85409ccc.png",
                "google_drawing_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_drawing_small-d390149ae904883b72cb12ac3fde4e03.png",
                "google_form_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_form_big-3d02dab99c96297a77fb4a0de867eea9.png",
                "google_form_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_form_jumbo-6e6ec777d1733e8e661dee8fea966afc.png",
                "google_form_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_form_small-a5fbd8bc3685e5cbcf21d4b0462d815f.png",
                "google_presentation_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_presentation_big-9054efeede703d9dbc8d2110b59f35bb.png",
                "google_presentation_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_presentation_jumbo-a0d755cf1e4c85d69b5beba309c61002.png",
                "google_presentation_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_presentation_small-cad952e6c5aa213c3e88136f721148c2.png",
                "google_spreadsheet_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_spreadsheet_big-b33c5fc148dd56b661c94392d6b82deb.png",
                "google_spreadsheet_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_spreadsheet_jumbo-d69a4aaf57e8c08ee0c776e4377ab2eb.png",
                "google_spreadsheet_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_spreadsheet_small-a5fbd8bc3685e5cbcf21d4b0462d815f.png"
            },
            path: function (e, t) {
                return t == null && (t = "small"), FileIcons.asset(FileIcons.find(e), t)
            },
            asset: function (e, t) {
                var n, r;
                return t == null && (t = "small"), n = "" + (e != null ? e : "Generic") + "_" + t + ".png", (r = FileIcons.URLS[n]) != null ? r : FileIcons.asset("Generic", t)
            },
            find: function (e) {
                return FileIcons.LIB[e != null ? e.toUpperCase() : void 0]
            }
        }
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            };
        e = function () {
            function e(e, n) {
                var r, i;
                this.options = n != null ? n : {}, this.stop = t(this.stop, this), this.watchDistanceFromBottom = t(this.watchDistanceFromBottom, this), this.loadNextPage = t(this.loadNextPage, this), this.loadNextPageIfNearBottom = t(this.loadNextPageIfNearBottom, this), this.$container = $(e).addClass("infinite_page"), (i = (r = this.options).triggerDistance) == null && (r.triggerDistance = 350), this.setPage(this.$container.attr("data-infinite-page")), this.ajax = null, this.done = !1, this.options.immediate != null ? this.loadAll() : (this.loadNextPageIfNearBottom(), this.watchDistanceFromBottom())
            }
            return e.install = function (e, t) {
                if (!$(e).data("infinitePageInstalled")) return new this(e, t), $(e).data("infinitePageInstalled", !0)
            }, e.prototype.loadAll = function () {
                var e, t = this;
                return this.loadNextPage(e = function () {
                    if (!t.done) return t.loadNextPage(e)
                })
            }, e.prototype.distanceFromBottom = function () {
                return $(document).height() - $(window).height() - $(window).scrollTop()
            }, e.prototype.loadNextPageIfNearBottom = function () {
                if (this.distanceFromBottom() < this.options.triggerDistance) return this.$container.is(":visible") ? this.loadNextPage() : this.stop()
            }, e.prototype.setPage = function (e) {
                return e == null && (e = 2), this.page = parseInt(e), this.$container.attr("data-infinite-page", this.page)
            }, e.prototype.loadNextPage = function (e) {
                var t = this;
                if (this.ajax && this.ajax.readyState < 4 && this.ajax.readyState > 0) return;
                return this.$container.addClass("busy").trigger("infinite_page:start"), this.ajax = $.ajax({
                        type: "GET",
                        dataType: "html",
                        url: "" + window.location.pathname + ".js" + window.location.search,
                        data: {
                            page: this.page
                        },
                        success: function (n) {
                            return t.$container.removeClass("busy"), $.trim(n) || t.stop(), t.$container.append(n).trigger("infinite_page:load"), t.setPage(t.page + 1), typeof e == "function" ? e() : void 0
                        },
                        error: function () {
                            return t.stop()
                        }
                    })
            }, e.prototype.watchDistanceFromBottom = function () {
                var e = this;
                return this.throttledLoadNextPageIfNearBottom = _.throttle(function () {
                    return e.loadNextPageIfNearBottom()
                }, 100), $(window).bind("scroll", this.throttledLoadNextPageIfNearBottom)
            }, e.prototype.stop = function () {
                this.done = !0, this.$container.removeClass("infinite_page busy").trigger("infinite_page:stop");
                if (this.throttledLoadNextPageIfNearBottom != null) return $(window).unbind("scroll", this.throttledLoadNextPageIfNearBottom)
            }, e
        }(), $.fn.infinitePage = function (t) {
            return this.each(function () {
                return e.install(this, t)
            })
        }
    }.call(this);
    var wysihtml5 = {
        version: "0.4.0pre",
        commands: {},
        dom: {},
        quirks: {},
        toolbar: {},
        lang: {},
        selection: {},
        views: {},
        INVISIBLE_SPACE: "",
        EMPTY_FUNCTION: function () {},
        ELEMENT_NODE: 1,
        TEXT_NODE: 3,
        BACKSPACE_KEY: 8,
        ENTER_KEY: 13,
        ESCAPE_KEY: 27,
        SPACE_KEY: 32,
        DELETE_KEY: 46
    };
    window.rangy = function () {
        function u(n, r) {
            var i = typeof n[r];
            return i == t || i == e && !! n[r] || i == "unknown"
        }

        function a(t, n) {
            return typeof t[n] == e && !! t[n]
        }

        function f(e, t) {
            return typeof e[t] != n
        }

        function l(e) {
            return function (t, n) {
                var r = n.length;
                while (r--)
                    if (!e(t, n[r])) return !1;
                return !0
            }
        }

        function d(e) {
            return e && c(e, o) && p(e, s)
        }

        function m(e) {
            window.alert("Rangy not supported in your browser. Reason: " + e), v.initialized = !0, v.supported = !1
        }

        function g(e) {
            var t = "Rangy warning: " + e;
            v.config.alertOnWarn ? window.alert(t) : typeof window.console != n && typeof window.console.log != n && window.console.log(t)
        }

        function w() {
            if (v.initialized) return;
            var e, t = !1,
                n = !1;
            u(document, "createRange") && (e = document.createRange(), c(e, i) && p(e, r) && (t = !0), e.detach());
            var s = a(document, "body") ? document.body : document.getElementsByTagName("body")[0];
            s && u(s, "createTextRange") && (e = s.createTextRange(), d(e) && (n = !0)), !t && !n && m("Neither Range nor TextRange are implemented"), v.initialized = !0, v.features = {
                implementsDomRange: t,
                implementsTextRange: n
            };
            var o = b.concat(y);
            for (var f = 0, l = o.length; f < l; ++f) try {
                o[f](v)
            } catch (h) {
                a(window, "console") && u(window.console, "log") && window.console.log("Init listener threw an exception. Continuing.", h)
            }
        }

        function S(e) {
            e = e || window, w();
            for (var t = 0, n = E.length; t < n; ++t) E[t](e)
        }

        function x(e) {
            this.name = e, this.initialized = !1, this.supported = !1
        }
        var e = "object",
            t = "function",
            n = "undefined",
            r = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed", "commonAncestorContainer", "START_TO_START", "START_TO_END", "END_TO_START", "END_TO_END"],
            i = ["setStart", "setStartBefore", "setStartAfter", "setEnd", "setEndBefore", "setEndAfter", "collapse", "selectNode", "selectNodeContents", "compareBoundaryPoints", "deleteContents", "extractContents", "cloneContents", "insertNode", "surroundContents", "cloneRange", "toString", "detach"],
            s = ["boundingHeight", "boundingLeft", "boundingTop", "boundingWidth", "htmlText", "text"],
            o = ["collapse", "compareEndPoints", "duplicate", "getBookmark", "moveToBookmark", "moveToElementText", "parentElement", "pasteHTML", "select", "setEndPoint", "getBoundingClientRect"],
            c = l(u),
            h = l(a),
            p = l(f),
            v = {
                version: "1.2.2",
                initialized: !1,
                supported: !0,
                util: {
                    isHostMethod: u,
                    isHostObject: a,
                    isHostProperty: f,
                    areHostMethods: c,
                    areHostObjects: h,
                    areHostProperties: p,
                    isTextRange: d
                },
                features: {},
                modules: {},
                config: {
                    alertOnWarn: !1,
                    preferTextRange: !1
                }
            };
        v.fail = m, v.warn = g, {}.hasOwnProperty ? v.util.extend = function (e, t) {
            for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
        } : m("hasOwnProperty not supported");
        var y = [],
            b = [];
        v.init = w, v.addInitListener = function (e) {
            v.initialized ? e(v) : y.push(e)
        };
        var E = [];
        v.addCreateMissingNativeApiListener = function (e) {
            E.push(e)
        }, v.createMissingNativeApi = S, x.prototype.fail = function (e) {
            throw this.initialized = !0, this.supported = !1, new Error("Module '" + this.name + "' failed to load: " + e)
        }, x.prototype.warn = function (e) {
            v.warn("Module " + this.name + ": " + e)
        }, x.prototype.createError = function (e) {
            return new Error("Error in Rangy " + this.name + " module: " + e)
        }, v.createModule = function (e, t) {
            var n = new x(e);
            v.modules[e] = n, b.push(function (e) {
                t(e, n), n.initialized = !0, n.supported = !0
            })
        }, v.requireModules = function (e) {
            for (var t = 0, n = e.length, r, i; t < n; ++t) {
                i = e[t], r = v.modules[i];
                if (!r || !(r instanceof x)) throw new Error("Module '" + i + "' not found");
                if (!r.supported) throw new Error("Module '" + i + "' not supported")
            }
        };
        var T = !1,
            N = function (e) {
                T || (T = !0, v.initialized || w())
            };
        if (typeof window == n) {
            m("No window found");
            return
        }
        if (typeof document == n) {
            m("No document found");
            return
        }
        return u(document, "addEventListener") && document.addEventListener("DOMContentLoaded", N, !1), u(window, "addEventListener") ? window.addEventListener("load", N, !1) : u(window, "attachEvent") ? window.attachEvent("onload", N) : m("Window does not have required addEventListener or attachEvent method"), v
    }(), rangy.createModule("DomUtil", function (e, t) {
        function u(e) {
            var t;
            return typeof e.namespaceURI == n || (t = e.namespaceURI) === null || t == "http://www.w3.org/1999/xhtml"
        }

        function a(e) {
            var t = e.parentNode;
            return t.nodeType == 1 ? t : null
        }

        function f(e) {
            var t = 0;
            while (e = e.previousSibling) t++;
            return t
        }

        function l(e) {
            var t;
            return d(e) ? e.length : (t = e.childNodes) ? t.length : 0
        }

        function c(e, t) {
            var n = [],
                r;
            for (r = e; r; r = r.parentNode) n.push(r);
            for (r = t; r; r = r.parentNode)
                if (o(n, r)) return r;
            return null
        }

        function h(e, t, n) {
            var r = n ? t : t.parentNode;
            while (r) {
                if (r === e) return !0;
                r = r.parentNode
            }
            return !1
        }

        function p(e, t, n) {
            var r, i = n ? e : e.parentNode;
            while (i) {
                r = i.parentNode;
                if (r === t) return i;
                i = r
            }
            return null
        }

        function d(e) {
            var t = e.nodeType;
            return t == 3 || t == 4 || t == 8
        }

        function v(e, t) {
            var n = t.nextSibling,
                r = t.parentNode;
            return n ? r.insertBefore(e, n) : r.appendChild(e), e
        }

        function m(e, t) {
            var n = e.cloneNode(!1);
            return n.deleteData(0, t), e.deleteData(t, e.length - t), v(n, e), n
        }

        function g(e) {
            if (e.nodeType == 9) return e;
            if (typeof e.ownerDocument != n) return e.ownerDocument;
            if (typeof e.document != n) return e.document;
            if (e.parentNode) return g(e.parentNode);
            throw new Error("getDocument: no document found for node")
        }

        function y(e) {
            var t = g(e);
            if (typeof t.defaultView != n) return t.defaultView;
            if (typeof t.parentWindow != n) return t.parentWindow;
            throw new Error("Cannot get a window object for node")
        }

        function b(e) {
            if (typeof e.contentDocument != n) return e.contentDocument;
            if (typeof e.contentWindow != n) return e.contentWindow.document;
            throw new Error("getIframeWindow: No Document object found for iframe element")
        }

        function w(e) {
            if (typeof e.contentWindow != n) return e.contentWindow;
            if (typeof e.contentDocument != n) return e.contentDocument.defaultView;
            throw new Error("getIframeWindow: No Window object found for iframe element")
        }

        function E(e) {
            return r.isHostObject(e, "body") ? e.body : e.getElementsByTagName("body")[0]
        }

        function S(e) {
            var t;
            while (t = e.parentNode) e = t;
            return e
        }

        function x(e, t, n, r) {
            var i, s, o, u, a;
            if (e == n) return t === r ? 0 : t < r ? -1 : 1;
            if (i = p(n, e, !0)) return t <= f(i) ? -1 : 1;
            if (i = p(e, n, !0)) return f(i) < r ? -1 : 1;
            s = c(e, n), o = e === s ? s : p(e, s, !0), u = n === s ? s : p(n, s, !0);
            if (o === u) throw new Error("comparePoints got to case 4 and childA and childB are the same!");
            a = s.firstChild;
            while (a) {
                if (a === o) return -1;
                if (a === u) return 1;
                a = a.nextSibling
            }
            throw new Error("Should not be here!")
        }

        function T(e) {
            var t = g(e).createDocumentFragment(),
                n;
            while (n = e.firstChild) t.appendChild(n);
            return t
        }

        function N(e) {
            if (!e) return "[No node]";
            if (d(e)) return '"' + e.data + '"';
            if (e.nodeType == 1) {
                var t = e.id ? ' id="' + e.id + '"' : "";
                return "<" + e.nodeName + t + ">[" + e.childNodes.length + "]"
            }
            return e.nodeName
        }

        function C(e) {
            this.root = e, this._next = e
        }

        function k(e) {
            return new C(e)
        }

        function L(e, t) {
            this.node = e, this.offset = t
        }

        function A(e) {
            this.code = this[e], this.codeName = e, this.message = "DOMException: " + this.codeName
        }
        var n = "undefined",
            r = e.util;
        r.areHostMethods(document, ["createDocumentFragment", "createElement", "createTextNode"]) || t.fail("document missing a Node creation method"), r.isHostMethod(document, "getElementsByTagName") || t.fail("document missing getElementsByTagName method");
        var i = document.createElement("div");
        r.areHostMethods(i, ["insertBefore", "appendChild", "cloneNode"] || !r.areHostObjects(i, ["previousSibling", "nextSibling", "childNodes", "parentNode"])) || t.fail("Incomplete Element implementation"), r.isHostProperty(i, "innerHTML") || t.fail("Element is missing innerHTML property");
        var s = document.createTextNode("test");
        r.areHostMethods(s, ["splitText", "deleteData", "insertData", "appendData", "cloneNode"] || !r.areHostObjects(i, ["previousSibling", "nextSibling", "childNodes", "parentNode"]) || !r.areHostProperties(s, ["data"])) || t.fail("Incomplete Text Node implementation");
        var o = function (e, t) {
            var n = e.length;
            while (n--)
                if (e[n] === t) return !0;
            return !1
        };
        C.prototype = {
            _current: null,
            hasNext: function () {
                return !!this._next
            },
            next: function () {
                var e = this._current = this._next,
                    t, n;
                if (this._current) {
                    t = e.firstChild;
                    if (t) this._next = t;
                    else {
                        n = null;
                        while (e !== this.root && !(n = e.nextSibling)) e = e.parentNode;
                        this._next = n
                    }
                }
                return this._current
            },
            detach: function () {
                this._current = this._next = this.root = null
            }
        }, L.prototype = {
            equals: function (e) {
                return this.node === e.node & this.offset == e.offset
            },
            inspect: function () {
                return "[DomPosition(" + N(this.node) + ":" + this.offset + ")]"
            }
        }, A.prototype = {
            INDEX_SIZE_ERR: 1,
            HIERARCHY_REQUEST_ERR: 3,
            WRONG_DOCUMENT_ERR: 4,
            NO_MODIFICATION_ALLOWED_ERR: 7,
            NOT_FOUND_ERR: 8,
            NOT_SUPPORTED_ERR: 9,
            INVALID_STATE_ERR: 11
        }, A.prototype.toString = function () {
            return this.message
        }, e.dom = {
            arrayContains: o,
            isHtmlNamespace: u,
            parentElement: a,
            getNodeIndex: f,
            getNodeLength: l,
            getCommonAncestor: c,
            isAncestorOf: h,
            getClosestAncestorIn: p,
            isCharacterDataNode: d,
            insertAfter: v,
            splitDataNode: m,
            getDocument: g,
            getWindow: y,
            getIframeWindow: w,
            getIframeDocument: b,
            getBody: E,
            getRootContainer: S,
            comparePoints: x,
            inspectNode: N,
            fragmentFromNodeChildren: T,
            createIterator: k,
            DomPosition: L
        }, e.DOMException = A
    }), rangy.createModule("DomRange", function (e, t) {
        function s(e, t) {
            return e.nodeType != 3 && (n.isAncestorOf(e, t.startContainer, !0) || n.isAncestorOf(e, t.endContainer, !0))
        }

        function o(e) {
            return n.getDocument(e.startContainer)
        }

        function u(e, t, n) {
            var r = e._listeners[t];
            if (r)
                for (var i = 0, s = r.length; i < s; ++i) r[i].call(e, {
                        target: e,
                        args: n
                    })
        }

        function a(e) {
            return new r(e.parentNode, n.getNodeIndex(e))
        }

        function f(e) {
            return new r(e.parentNode, n.getNodeIndex(e) + 1)
        }

        function l(e, t, r) {
            var i = e.nodeType == 11 ? e.firstChild : e;
            return n.isCharacterDataNode(t) ? r == t.length ? n.insertAfter(e, t) : t.parentNode.insertBefore(e, r == 0 ? t : n.splitDataNode(t, r)) : r >= t.childNodes.length ? t.appendChild(e) : t.insertBefore(e, t.childNodes[r]), i
        }

        function c(e) {
            var t;
            for (var n, r = o(e.range).createDocumentFragment(), s; n = e.next();) {
                t = e.isPartiallySelectedSubtree(), n = n.cloneNode(!t), t && (s = e.getSubtreeIterator(), n.appendChild(c(s)), s.detach(!0));
                if (n.nodeType == 10) throw new i("HIERARCHY_REQUEST_ERR");
                r.appendChild(n)
            }
            return r
        }

        function h(e, t, r) {
            var i, s;
            r = r || {
                stop: !1
            };
            for (var o, u; o = e.next();)
                if (e.isPartiallySelectedSubtree()) {
                    if (t(o) === !1) {
                        r.stop = !0;
                        return
                    }
                    u = e.getSubtreeIterator(), h(u, t, r), u.detach(!0);
                    if (r.stop) return
                } else {
                    i = n.createIterator(o);
                    while (s = i.next())
                        if (t(s) === !1) {
                            r.stop = !0;
                            return
                        }
                }
        }

        function p(e) {
            var t;
            while (e.next()) e.isPartiallySelectedSubtree() ? (t = e.getSubtreeIterator(), p(t), t.detach(!0)) : e.remove()
        }

        function d(e) {
            for (var t, n = o(e.range).createDocumentFragment(), r; t = e.next();) {
                e.isPartiallySelectedSubtree() ? (t = t.cloneNode(!1), r = e.getSubtreeIterator(), t.appendChild(d(r)), r.detach(!0)) : e.remove();
                if (t.nodeType == 10) throw new i("HIERARCHY_REQUEST_ERR");
                n.appendChild(t)
            }
            return n
        }

        function v(e, t, n) {
            var r = !! t && !! t.length,
                i, s = !! n;
            r && (i = new RegExp("^(" + t.join("|") + ")$"));
            var o = [];
            return h(new g(e, !1), function (e) {
                (!r || i.test(e.nodeType)) && (!s || n(e)) && o.push(e)
            }), o
        }

        function m(e) {
            var t = typeof e.getName == "undefined" ? "Range" : e.getName();
            return "[" + t + "(" + n.inspectNode(e.startContainer) + ":" + e.startOffset + ", " + n.inspectNode(e.endContainer) + ":" + e.endOffset + ")]"
        }

        function g(e, t) {
            this.range = e, this.clonePartiallySelectedTextNodes = t;
            if (!e.collapsed) {
                this.sc = e.startContainer, this.so = e.startOffset, this.ec = e.endContainer, this.eo = e.endOffset;
                var r = e.commonAncestorContainer;
                this.sc === this.ec && n.isCharacterDataNode(this.sc) ? (this.isSingleCharacterDataNode = !0, this._first = this._last =
                    this._next = this.sc) : (this._first = this._next = this.sc === r && !n.isCharacterDataNode(this.sc) ? this.sc.childNodes[this.so] : n.getClosestAncestorIn(this.sc, r, !0), this._last = this.ec === r && !n.isCharacterDataNode(this.ec) ? this.ec.childNodes[this.eo - 1] : n.getClosestAncestorIn(this.ec, r, !0))
            }
        }

        function y(e) {
            this.code = this[e], this.codeName = e, this.message = "RangeException: " + this.codeName
        }

        function b(e, t, n) {
            this.nodes = v(e, t, n), this._next = this.nodes[0], this._position = 0
        }

        function N(e) {
            return function (t, r) {
                var i, s = r ? t : t.parentNode;
                while (s) {
                    i = s.nodeType;
                    if (n.arrayContains(e, i)) return s;
                    s = s.parentNode
                }
                return null
            }
        }

        function O(e, t) {
            if (A(e, t)) throw new y("INVALID_NODE_TYPE_ERR")
        }

        function M(e) {
            if (!e.startContainer) throw new i("INVALID_STATE_ERR")
        }

        function _(e, t) {
            if (!n.arrayContains(t, e.nodeType)) throw new y("INVALID_NODE_TYPE_ERR")
        }

        function D(e, t) {
            if (t < 0 || t > (n.isCharacterDataNode(e) ? e.length : e.childNodes.length)) throw new i("INDEX_SIZE_ERR")
        }

        function P(e, t) {
            if (k(e, !0) !== k(t, !0)) throw new i("WRONG_DOCUMENT_ERR")
        }

        function H(e) {
            if (L(e, !0)) throw new i("NO_MODIFICATION_ALLOWED_ERR")
        }

        function B(e, t) {
            if (!e) throw new i(t)
        }

        function j(e) {
            return !n.arrayContains(E, e.nodeType) && !k(e, !0)
        }

        function F(e, t) {
            return t <= (n.isCharacterDataNode(e) ? e.length : e.childNodes.length)
        }

        function I(e) {
            M(e);
            if (j(e.startContainer) || j(e.endContainer) || !F(e.startContainer, e.startOffset) || !F(e.endContainer, e.endOffset)) throw new Error("Range error: Range is no longer valid after DOM mutation (" + e.inspect() + ")")
        }

        function Z() {}

        function et(e) {
            e.START_TO_START = X, e.START_TO_END = V, e.END_TO_END = $, e.END_TO_START = J, e.NODE_BEFORE = K, e.NODE_AFTER = Q, e.NODE_BEFORE_AND_AFTER = G, e.NODE_INSIDE = Y
        }

        function tt(e) {
            et(e), et(e.prototype)
        }

        function nt(e, t) {
            return function () {
                I(this);
                var r = this.startContainer,
                    i = this.startOffset,
                    s = this.commonAncestorContainer,
                    o = new g(this, !0),
                    u, a;
                r !== s && (u = n.getClosestAncestorIn(r, s, !0), a = f(u), r = a.node, i = a.offset), h(o, H), o.reset();
                var l = e(o);
                return o.detach(), t(this, r, i, r, i), l
            }
        }

        function rt(t, r, i) {
            function o(e, t) {
                return function (n) {
                    M(this), _(n, w), _(C(n), E);
                    var r = (e ? a : f)(n);
                    (t ? u : l)(this, r.node, r.offset)
                }
            }

            function u(e, t, i) {
                var s = e.endContainer,
                    o = e.endOffset;
                if (t !== e.startContainer || i !== e.startOffset) {
                    if (C(t) != C(s) || n.comparePoints(t, i, s, o) == 1) s = t, o = i;
                    r(e, t, i, s, o)
                }
            }

            function l(e, t, i) {
                var s = e.startContainer,
                    o = e.startOffset;
                if (t !== e.endContainer || i !== e.endOffset) {
                    if (C(t) != C(s) || n.comparePoints(t, i, s, o) == -1) s = t, o = i;
                    r(e, s, o, t, i)
                }
            }

            function c(e, t, n) {
                (t !== e.startContainer || n !== e.startOffset || t !== e.endContainer || n !== e.endOffset) && r(e, t, n, t, n)
            }
            t.prototype = new Z, e.util.extend(t.prototype, {
                    setStart: function (e, t) {
                        M(this), O(e, !0), D(e, t), u(this, e, t)
                    },
                    setEnd: function (e, t) {
                        M(this), O(e, !0), D(e, t), l(this, e, t)
                    },
                    setStartBefore: o(!0, !0),
                    setStartAfter: o(!1, !0),
                    setEndBefore: o(!0, !1),
                    setEndAfter: o(!1, !1),
                    collapse: function (e) {
                        I(this), e ? r(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset) : r(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset)
                    },
                    selectNodeContents: function (e) {
                        M(this), O(e, !0), r(this, e, 0, e, n.getNodeLength(e))
                    },
                    selectNode: function (e) {
                        M(this), O(e, !1), _(e, w);
                        var t = a(e),
                            n = f(e);
                        r(this, t.node, t.offset, n.node, n.offset)
                    },
                    extractContents: nt(d, r),
                    deleteContents: nt(p, r),
                    canSurroundContents: function () {
                        I(this), H(this.startContainer), H(this.endContainer);
                        var e = new g(this, !0),
                            t = e._first && s(e._first, this) || e._last && s(e._last, this);
                        return e.detach(), !t
                    },
                    detach: function () {
                        i(this)
                    },
                    splitBoundaries: function () {
                        I(this);
                        var e = this.startContainer,
                            t = this.startOffset,
                            i = this.endContainer,
                            s = this.endOffset,
                            o = e === i;
                        n.isCharacterDataNode(i) && s > 0 && s < i.length && n.splitDataNode(i, s), n.isCharacterDataNode(e) && t > 0 && t < e.length && (e = n.splitDataNode(e, t), o ? (s -= t, i = e) : i == e.parentNode && s >= n.getNodeIndex(e) && s++, t = 0), r(this, e, t, i, s)
                    },
                    normalizeBoundaries: function () {
                        I(this);
                        var e = this.startContainer,
                            t = this.startOffset,
                            i = this.endContainer,
                            s = this.endOffset,
                            o = function (e) {
                                var t = e.nextSibling;
                                t && t.nodeType == e.nodeType && (i = e, s = e.length, e.appendData(t.data), t.parentNode.removeChild(t))
                            }, u = function (r) {
                                var o = r.previousSibling;
                                if (o && o.nodeType == r.nodeType) {
                                    e = r;
                                    var u = r.length;
                                    t = o.length, r.insertData(0, o.data), o.parentNode.removeChild(o);
                                    if (e == i) s += t, i = e;
                                    else if (i == r.parentNode) {
                                        var a = n.getNodeIndex(r);
                                        s == a ? (i = r, s = u) : s > a && s--
                                    }
                                }
                            }, a = !0;
                        if (n.isCharacterDataNode(i)) i.length == s && o(i);
                        else {
                            if (s > 0) {
                                var f = i.childNodes[s - 1];
                                f && n.isCharacterDataNode(f) && o(f)
                            }
                            a = !this.collapsed
                        } if (a) {
                            if (n.isCharacterDataNode(e)) t == 0 && u(e);
                            else if (t < e.childNodes.length) {
                                var l = e.childNodes[t];
                                l && n.isCharacterDataNode(l) && u(l)
                            }
                        } else e = i, t = s;
                        r(this, e, t, i, s)
                    },
                    collapseToPoint: function (e, t) {
                        M(this), O(e, !0), D(e, t), c(this, e, t)
                    }
                }), tt(t)
        }

        function it(e) {
            e.collapsed = e.startContainer === e.endContainer && e.startOffset === e.endOffset, e.commonAncestorContainer = e.collapsed ? e.startContainer : n.getCommonAncestor(e.startContainer, e.endContainer)
        }

        function st(e, t, n, r, i) {
            var s = e.startContainer !== t || e.startOffset !== n,
                o = e.endContainer !== r || e.endOffset !== i;
            e.startContainer = t, e.startOffset = n, e.endContainer = r, e.endOffset = i, it(e), u(e, "boundarychange", {
                    startMoved: s,
                    endMoved: o
                })
        }

        function ot(e) {
            M(e), e.startContainer = e.startOffset = e.endContainer = e.endOffset = null, e.collapsed = e.commonAncestorContainer = null, u(e, "detach", null), e._listeners = null
        }

        function ut(e) {
            this.startContainer = e, this.startOffset = 0, this.endContainer = e, this.endOffset = 0, this._listeners = {
                boundarychange: [],
                detach: []
            }, it(this)
        }
        e.requireModules(["DomUtil"]);
        var n = e.dom,
            r = n.DomPosition,
            i = e.DOMException;
        g.prototype = {
            _current: null,
            _next: null,
            _first: null,
            _last: null,
            isSingleCharacterDataNode: !1,
            reset: function () {
                this._current = null, this._next = this._first
            },
            hasNext: function () {
                return !!this._next
            },
            next: function () {
                var e = this._current = this._next;
                return e && (this._next = e !== this._last ? e.nextSibling : null, n.isCharacterDataNode(e) && this.clonePartiallySelectedTextNodes && (e === this.ec && (e = e.cloneNode(!0)).deleteData(this.eo, e.length - this.eo), this._current === this.sc && (e = e.cloneNode(!0)).deleteData(0, this.so))), e
            },
            remove: function () {
                var e = this._current,
                    t, r;
                !n.isCharacterDataNode(e) || e !== this.sc && e !== this.ec ? e.parentNode && e.parentNode.removeChild(e) : (t = e === this.sc ? this.so : 0, r = e === this.ec ? this.eo : e.length, t != r && e.deleteData(t, r - t))
            },
            isPartiallySelectedSubtree: function () {
                var e = this._current;
                return s(e, this.range)
            },
            getSubtreeIterator: function () {
                var e;
                if (this.isSingleCharacterDataNode) e = this.range.cloneRange(), e.collapse();
                else {
                    e = new ut(o(this.range));
                    var t = this._current,
                        r = t,
                        i = 0,
                        s = t,
                        u = n.getNodeLength(t);
                    n.isAncestorOf(t, this.sc, !0) && (r = this.sc, i = this.so), n.isAncestorOf(t, this.ec, !0) && (s = this.ec, u = this.eo), st(e, r, i, s, u)
                }
                return new g(e, this.clonePartiallySelectedTextNodes)
            },
            detach: function (e) {
                e && this.range.detach(), this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null
            }
        }, y.prototype = {
            BAD_BOUNDARYPOINTS_ERR: 1,
            INVALID_NODE_TYPE_ERR: 2
        }, y.prototype.toString = function () {
            return this.message
        }, b.prototype = {
            _current: null,
            hasNext: function () {
                return !!this._next
            },
            next: function () {
                return this._current = this._next, this._next = this.nodes[++this._position], this._current
            },
            detach: function () {
                this._current = this._next = this.nodes = null
            }
        };
        var w = [1, 3, 4, 5, 7, 8, 10],
            E = [2, 9, 11],
            S = [5, 6, 10, 12],
            x = [1, 3, 4, 5, 7, 8, 10, 11],
            T = [1, 3, 4, 5, 7, 8],
            C = n.getRootContainer,
            k = N([9, 11]),
            L = N(S),
            A = N([6, 10, 12]),
            q = document.createElement("style"),
            R = !1;
        try {
            q.innerHTML = "<b>x</b>", R = q.firstChild.nodeType == 3
        } catch (U) {}
        e.features.htmlParsingConforms = R;
        var z = R ? function (e) {
                var t = this.startContainer,
                    r = n.getDocument(t);
                if (!t) throw new i("INVALID_STATE_ERR");
                var s = null;
                return t.nodeType == 1 ? s = t : n.isCharacterDataNode(t) && (s = n.parentElement(t)), s === null || s.nodeName == "HTML" && n.isHtmlNamespace(n.getDocument(s).documentElement) && n.isHtmlNamespace(s) ? s = r.createElement("body") : s = s.cloneNode(!1), s.innerHTML = e, n.fragmentFromNodeChildren(s)
            } : function (e) {
                M(this);
                var t = o(this),
                    r = t.createElement("body");
                return r.innerHTML = e, n.fragmentFromNodeChildren(r)
            }, W = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed", "commonAncestorContainer"],
            X = 0,
            V = 1,
            $ = 2,
            J = 3,
            K = 0,
            Q = 1,
            G = 2,
            Y = 3;
        Z.prototype = {
            attachListener: function (e, t) {
                this._listeners[e].push(t)
            },
            compareBoundaryPoints: function (e, t) {
                I(this), P(this.startContainer, t.startContainer);
                var r, i, s, o, u = e == J || e == X ? "start" : "end",
                    a = e == V || e == X ? "start" : "end";
                return r = this[u + "Container"], i = this[u + "Offset"], s = t[a + "Container"], o = t[a + "Offset"], n.comparePoints(r, i, s, o)
            },
            insertNode: function (e) {
                I(this), _(e, x), H(this.startContainer);
                if (n.isAncestorOf(e, this.startContainer, !0)) throw new i("HIERARCHY_REQUEST_ERR");
                var t = l(e, this.startContainer, this.startOffset);
                this.setStartBefore(t)
            },
            cloneContents: function () {
                I(this);
                var e, t;
                if (this.collapsed) return o(this).createDocumentFragment();
                if (this.startContainer === this.endContainer && n.isCharacterDataNode(this.startContainer)) return e = this.startContainer.cloneNode(!0), e.data = e.data.slice(this.startOffset, this.endOffset), t = o(this).createDocumentFragment(), t.appendChild(e), t;
                var r = new g(this, !0);
                return e = c(r), r.detach(), e
            },
            canSurroundContents: function () {
                I(this), H(this.startContainer), H(this.endContainer);
                var e = new g(this, !0),
                    t = e._first && s(e._first, this) || e._last && s(e._last, this);
                return e.detach(), !t
            },
            surroundContents: function (e) {
                _(e, T);
                if (!this.canSurroundContents()) throw new y("BAD_BOUNDARYPOINTS_ERR");
                var t = this.extractContents();
                if (e.hasChildNodes())
                    while (e.lastChild) e.removeChild(e.lastChild);
                l(e, this.startContainer, this.startOffset), e.appendChild(t), this.selectNode(e)
            },
            cloneRange: function () {
                I(this);
                var e = new ut(o(this)),
                    t = W.length,
                    n;
                while (t--) n = W[t], e[n] = this[n];
                return e
            },
            toString: function () {
                I(this);
                var e = this.startContainer;
                if (e === this.endContainer && n.isCharacterDataNode(e)) return e.nodeType == 3 || e.nodeType == 4 ? e.data.slice(this.startOffset, this.endOffset) : "";
                var t = [],
                    r = new g(this, !0);
                return h(r, function (e) {
                    (e.nodeType == 3 || e.nodeType == 4) && t.push(e.data)
                }), r.detach(), t.join("")
            },
            compareNode: function (e) {
                I(this);
                var t = e.parentNode,
                    r = n.getNodeIndex(e);
                if (!t) throw new i("NOT_FOUND_ERR");
                var s = this.comparePoint(t, r),
                    o = this.comparePoint(t, r + 1);
                return s < 0 ? o > 0 ? G : K : o > 0 ? Q : Y
            },
            comparePoint: function (e, t) {
                return I(this), B(e, "HIERARCHY_REQUEST_ERR"), P(e, this.startContainer), n.comparePoints(e, t, this.startContainer, this.startOffset) < 0 ? -1 : n.comparePoints(e, t, this.endContainer, this.endOffset) > 0 ? 1 : 0
            },
            createContextualFragment: z,
            toHtml: function () {
                I(this);
                var e = o(this).createElement("div");
                return e.appendChild(this.cloneContents()), e.innerHTML
            },
            intersectsNode: function (e, t) {
                I(this), B(e, "NOT_FOUND_ERR");
                if (n.getDocument(e) !== o(this)) return !1;
                var r = e.parentNode,
                    i = n.getNodeIndex(e);
                B(r, "NOT_FOUND_ERR");
                var s = n.comparePoints(r, i, this.endContainer, this.endOffset),
                    u = n.comparePoints(r, i + 1, this.startContainer, this.startOffset);
                return t ? s <= 0 && u >= 0 : s < 0 && u > 0
            },
            isPointInRange: function (e, t) {
                return I(this), B(e, "HIERARCHY_REQUEST_ERR"), P(e, this.startContainer), n.comparePoints(e, t, this.startContainer, this.startOffset) >= 0 && n.comparePoints(e, t, this.endContainer, this.endOffset) <= 0
            },
            intersectsRange: function (e, t) {
                I(this);
                if (o(e) != o(this)) throw new i("WRONG_DOCUMENT_ERR");
                var r = n.comparePoints(this.startContainer, this.startOffset, e.endContainer, e.endOffset),
                    s = n.comparePoints(this.endContainer, this.endOffset, e.startContainer, e.startOffset);
                return t ? r <= 0 && s >= 0 : r < 0 && s > 0
            },
            intersection: function (e) {
                if (this.intersectsRange(e)) {
                    var t = n.comparePoints(this.startContainer, this.startOffset, e.startContainer, e.startOffset),
                        r = n.comparePoints(this.endContainer, this.endOffset, e.endContainer, e.endOffset),
                        i = this.cloneRange();
                    return t == -1 && i.setStart(e.startContainer, e.startOffset), r == 1 && i.setEnd(e.endContainer, e.endOffset), i
                }
                return null
            },
            union: function (e) {
                if (this.intersectsRange(e, !0)) {
                    var t = this.cloneRange();
                    return n.comparePoints(e.startContainer, e.startOffset, this.startContainer, this.startOffset) == -1 && t.setStart(e.startContainer, e.startOffset), n.comparePoints(e.endContainer, e.endOffset, this.endContainer, this.endOffset) == 1 && t.setEnd(e.endContainer, e.endOffset), t
                }
                throw new y("Ranges do not intersect")
            },
            containsNode: function (e, t) {
                return t ? this.intersectsNode(e, !1) : this.compareNode(e) == Y
            },
            containsNodeContents: function (e) {
                return this.comparePoint(e, 0) >= 0 && this.comparePoint(e, n.getNodeLength(e)) <= 0
            },
            containsRange: function (e) {
                return this.intersection(e).equals(e)
            },
            containsNodeText: function (e) {
                var t = this.cloneRange();
                t.selectNode(e);
                var n = t.getNodes([3]);
                if (n.length > 0) {
                    t.setStart(n[0], 0);
                    var r = n.pop();
                    t.setEnd(r, r.length);
                    var i = this.containsRange(t);
                    return t.detach(), i
                }
                return this.containsNodeContents(e)
            },
            createNodeIterator: function (e, t) {
                return I(this), new b(this, e, t)
            },
            getNodes: function (e, t) {
                return I(this), v(this, e, t)
            },
            getDocument: function () {
                return o(this)
            },
            collapseBefore: function (e) {
                M(this), this.setEndBefore(e), this.collapse(!1)
            },
            collapseAfter: function (e) {
                M(this), this.setStartAfter(e), this.collapse(!0)
            },
            getName: function () {
                return "DomRange"
            },
            equals: function (e) {
                return ut.rangesEqual(this, e)
            },
            inspect: function () {
                return m(this)
            }
        }, rt(ut, st, ot), e.rangePrototype = Z.prototype, ut.rangeProperties = W, ut.RangeIterator = g, ut.copyComparisonConstants = tt, ut.createPrototypeRange = rt, ut.inspect = m, ut.getRangeDocument = o, ut.rangesEqual = function (e, t) {
            return e.startContainer === t.startContainer && e.startOffset === t.startOffset && e.endContainer === t.endContainer && e.endOffset === t.endOffset
        }, e.DomRange = ut, e.RangeException = y
    }), rangy.createModule("WrappedRange", function (e, t) {
        function o(e) {
            var t = e.parentElement(),
                n = e.duplicate();
            n.collapse(!0);
            var i = n.parentElement();
            n = e.duplicate(), n.collapse(!1);
            var s = n.parentElement(),
                o = i == s ? i : r.getCommonAncestor(i, s);
            return o == t ? o : r.getCommonAncestor(t, o)
        }

        function u(e) {
            return e.compareEndPoints("StartToEnd", e) == 0
        }

        function a(e, t, n, s) {
            var o = e.duplicate();
            o.collapse(n);
            var u = o.parentElement();
            r.isAncestorOf(t, u, !0) || (u = t);
            if (!u.canHaveHTML) return new i(u.parentNode, r.getNodeIndex(u));
            var a = r.getDocument(u).createElement("span"),
                f, l = n ? "StartToStart" : "StartToEnd",
                c, h, p, d;
            do u.insertBefore(a, a.previousSibling), o.moveToElementText(a); while ((f = o.compareEndPoints(l, e)) > 0 && a.previousSibling);
            d = a.nextSibling;
            if (f == -1 && d && r.isCharacterDataNode(d)) {
                o.setEndPoint(n ? "EndToStart" : "EndToEnd", e);
                var v;
                if (/[\r\n]/.test(d.data)) {
                    var m = o.duplicate(),
                        g = m.text.replace(/\r\n/g, "\r").length;
                    v = m.moveStart("character", g);
                    while ((f = m.compareEndPoints("StartToEnd", m)) == -1) v++, m.moveStart("character", 1)
                } else v = o.text.length;
                p = new i(d, v)
            } else c = (s || !n) && a.previousSibling, h = (s || n) && a.nextSibling, h && r.isCharacterDataNode(h) ? p = new i(h, 0) : c && r.isCharacterDataNode(c) ? p = new i(c, c.length) : p = new i(u, r.getNodeIndex(a));
            return a.parentNode.removeChild(a), p
        }

        function f(e, t) {
            var n, i, s = e.offset,
                o = r.getDocument(e.node),
                u, a, f = o.body.createTextRange(),
                l = r.isCharacterDataNode(e.node);
            return l ? (n = e.node, i = n.parentNode) : (a = e.node.childNodes, n = s < a.length ? a[s] : null, i = e.node), u = o.createElement("span"), u.innerHTML = "&#feff;", n ? i.insertBefore(u, n) : i.appendChild(u), f.moveToElementText(u), f.collapse(!t), i.removeChild(u), l && f[t ? "moveStart" : "moveEnd"]("character", s), f
        }
        e.requireModules(["DomUtil", "DomRange"]);
        var n, r = e.dom,
            i = r.DomPosition,
            s = e.DomRange;
        if (e.features.implementsDomRange && (!e.features.implementsTextRange || !e.config.preferTextRange))(function () {
            function u(e) {
                var t = i.length,
                    n;
                while (t--) n = i[t], e[n] = e.nativeRange[n]
            }

            function a(e, t, n, r, i) {
                var s = e.startContainer !== t || e.startOffset != n,
                    o = e.endContainer !== r || e.endOffset != i;
                if (s || o) e.setEnd(r, i), e.setStart(t, n)
            }

            function f(e) {
                e.nativeRange.detach(), e.detached = !0;
                var t = i.length,
                    n;
                while (t--) n = i[t], e[n] = null
            }
            var t, i = s.rangeProperties,
                o, l;
            n = function (e) {
                if (!e) throw new Error("Range must be specified");
                this.nativeRange = e, u(this)
            }, s.createPrototypeRange(n, a, f), t = n.prototype, t.selectNode = function (e) {
                this.nativeRange.selectNode(e), u(this)
            }, t.deleteContents = function () {
                this.nativeRange.deleteContents(), u(this)
            }, t.extractContents = function () {
                var e = this.nativeRange.extractContents();
                return u(this), e
            }, t.cloneContents = function () {
                return this.nativeRange.cloneContents()
            }, t.surroundContents = function (e) {
                this.nativeRange.surroundContents(e), u(this)
            }, t.collapse = function (e) {
                this.nativeRange.collapse(e), u(this)
            }, t.cloneRange = function () {
                return new n(this.nativeRange.cloneRange())
            }, t.refresh = function () {
                u(this)
            }, t.toString = function () {
                return this.nativeRange.toString()
            };
            var c = document.createTextNode("test");
            r.getBody(document).appendChild(c);
            var h = document.createRange();
            h.setStart(c, 0), h.setEnd(c, 0);
            try {
                h.setStart(c, 1), o = !0, t.setStart = function (e, t) {
                    this.nativeRange.setStart(e, t), u(this)
                }, t.setEnd = function (e, t) {
                    this.nativeRange.setEnd(e, t), u(this)
                }, l = function (e) {
                    return function (t) {
                        this.nativeRange[e](t), u(this)
                    }
                }
            } catch (p) {
                o = !1, t.setStart = function (e, t) {
                    try {
                        this.nativeRange.setStart(e, t)
                    } catch (n) {
                        this.nativeRange.setEnd(e, t), this.nativeRange.setStart(e, t)
                    }
                    u(this)
                }, t.setEnd = function (e, t) {
                    try {
                        this.nativeRange.setEnd(e, t)
                    } catch (n) {
                        this.nativeRange.setStart(e, t), this.nativeRange.setEnd(e, t)
                    }
                    u(this)
                }, l = function (e, t) {
                    return function (n) {
                        try {
                            this.nativeRange[e](n)
                        } catch (r) {
                            this.nativeRange[t](n), this.nativeRange[e](n)
                        }
                        u(this)
                    }
                }
            }
            t.setStartBefore = l("setStartBefore", "setEndBefore"), t.setStartAfter = l("setStartAfter", "setEndAfter"), t.setEndBefore = l("setEndBefore", "setStartBefore"), t.setEndAfter = l("setEndAfter", "setStartAfter"), h.selectNodeContents(c), h.startContainer == c && h.endContainer == c && h.startOffset == 0 && h.endOffset == c.length ? t.selectNodeContents = function (e) {
                this.nativeRange.selectNodeContents(e), u(this)
            } : t.selectNodeContents = function (e) {
                this.setStart(e, 0), this.setEnd(e, s.getEndOffset(e))
            }, h.selectNodeContents(c), h.setEnd(c, 3);
            var d = document.createRange();
            d.selectNodeContents(c), d.setEnd(c, 4), d.setStart(c, 2), h.compareBoundaryPoints(h.START_TO_END, d) == -1 & h.compareBoundaryPoints(h.END_TO_START, d) == 1 ? t.compareBoundaryPoints = function (e, t) {
                return t = t.nativeRange || t, e == t.START_TO_END ? e = t.END_TO_START : e == t.END_TO_START && (e = t.START_TO_END), this.nativeRange.compareBoundaryPoints(e, t)
            } : t.compareBoundaryPoints = function (e, t) {
                return this.nativeRange.compareBoundaryPoints(e, t.nativeRange || t)
            }, e.util.isHostMethod(h, "createContextualFragment") && (t.createContextualFragment = function (e) {
                return this.nativeRange.createContextualFragment(e)
            }), r.getBody(document).removeChild(c), h.detach(), d.detach()
        })(), e.createNativeRange = function (e) {
            return e = e || document, e.createRange()
        };
        else if (e.features.implementsTextRange) {
            n = function (e) {
                this.textRange = e, this.refresh()
            }, n.prototype = new s(document), n.prototype.refresh = function () {
                var e, t, n = o(this.textRange);
                u(this.textRange) ? t = e = a(this.textRange, n, !0, !0) : (e = a(this.textRange, n, !0, !1), t = a(this.textRange, n, !1, !1)), this.setStart(e.node, e.offset), this.setEnd(t.node, t.offset)
            }, s.copyComparisonConstants(n);
            var l = function () {
                return this
            }();
            typeof l.Range == "undefined" && (l.Range = n), e.createNativeRange = function (e) {
                return e = e || document, e.body.createTextRange()
            }
        }
        e.features.implementsTextRange && (n.rangeToTextRange = function (e) {
            if (e.collapsed) {
                var t = f(new i(e.startContainer, e.startOffset), !0);
                return t
            }
            var n = f(new i(e.startContainer, e.startOffset), !0),
                s = f(new i(e.endContainer, e.endOffset), !1),
                o = r.getDocument(e.startContainer).body.createTextRange();
            return o.setEndPoint("StartToStart", n), o.setEndPoint("EndToEnd", s), o
        }), n.prototype.getName = function () {
            return "WrappedRange"
        }, e.WrappedRange = n, e.createRange = function (t) {
            return t = t || document, new n(e.createNativeRange(t))
        }, e.createRangyRange = function (e) {
            return e = e || document, new s(e)
        }, e.createIframeRange = function (t) {
            return e.createRange(r.getIframeDocument(t))
        }, e.createIframeRangyRange = function (t) {
            return e.createRangyRange(r.getIframeDocument(t))
        }, e.addCreateMissingNativeApiListener(function (t) {
            var n = t.document;
            typeof n.createRange == "undefined" && (n.createRange = function () {
                return e.createRange(this)
            }), n = t = null
        })
    }), rangy.createModule("WrappedSelection", function (e, t) {
        function p(e) {
            return (e || window).getSelection()
        }

        function d(e) {
            return (e || window).document.selection
        }

        function L(e, t, n) {
            var r = n ? "end" : "start",
                i = n ? "start" : "end";
            e.anchorNode = t[r + "Container"], e.anchorOffset = t[r + "Offset"], e.focusNode = t[i + "Container"], e.focusOffset = t[i + "Offset"]
        }

        function A(e) {
            var t = e.nativeSelection;
            e.anchorNode = t.anchorNode, e.anchorOffset = t.anchorOffset, e.focusNode = t.focusNode, e.focusOffset = t.focusOffset
        }

        function O(e) {
            e.anchorNode = e.focusNode = null, e.anchorOffset = e.focusOffset = 0, e.rangeCount = 0, e.isCollapsed = !0, e._ranges.length = 0
        }

        function M(t) {
            var n;
            return t instanceof o ? (n = t._selectionNativeRange, n || (n = e.createNativeRange(i.getDocument(t.startContainer)), n.setEnd(t.endContainer, t.endOffset), n.setStart(t.startContainer, t.startOffset), t._selectionNativeRange = n, t.attachListener("detach", function () {
                            this._selectionNativeRange = null
                        }))) : t instanceof u ? n = t.nativeRange : e.features.implementsDomRange && t instanceof i.getWindow(t.startContainer).Range && (n = t), n
        }

        function _(e) {
            if (!e.length || e[0].nodeType != 1) return !1;
            for (var t = 1, n = e.length; t < n; ++t)
                if (!i.isAncestorOf(e[0], e[t])) return !1;
            return !0
        }

        function D(e) {
            var t = e.getNodes();
            if (!_(t)) throw new Error("getSingleElementFromRange: range " + e.inspect() + " did not consist of a single element");
            return t[0]
        }

        function P(e) {
            return !!e && typeof e.text != "undefined"
        }

        function H(e, t) {
            var n = new u(t);
            e._ranges = [n], L(e, n, !1), e.rangeCount = 1, e.isCollapsed = n.collapsed
        }

        function B(t) {
            t._ranges.length = 0;
            if (t.docSelection.type == "None") O(t);
            else {
                var n = t.docSelection.createRange();
                if (P(n)) H(t, n);
                else {
                    t.rangeCount = n.length;
                    var r, s = i.getDocument(n.item(0));
                    for (var o = 0; o < t.rangeCount; ++o) r = e.createRange(s), r.selectNode(n.item(o)), t._ranges.push(r);
                    t.isCollapsed = t.rangeCount == 1 && t._ranges[0].collapsed, L(t, t._ranges[t.rangeCount - 1], !1)
                }
            }
        }

        function j(e, t) {
            var n = e.docSelection.createRange(),
                r = D(t),
                s = i.getDocument(n.item(0)),
                o = i.getBody(s).createControlRange();
            for (var u = 0, a = n.length; u < a; ++u) o.add(n.item(u));
            try {
                o.add(r)
            } catch (f) {
                throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")
            }
            o.select(), B(e)
        }

        function I(e, t, n) {
            this.nativeSelection = e, this.docSelection = t, this._ranges = [], this.win = n, this.refresh()
        }

        function R(e, t) {
            var n = i.getDocument(t[0].startContainer),
                r = i.getBody(n).createControlRange();
            for (var s = 0, o; s < rangeCount; ++s) {
                o = D(t[s]);
                try {
                    r.add(o)
                } catch (u) {
                    throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")
                }
            }
            r.select(), B(e)
        }

        function V(e, t) {
            if (e.anchorNode && i.getDocument(e.anchorNode) !== i.getDocument(t)) throw new a("WRONG_DOCUMENT_ERR")
        }

        function $(e) {
            var t = [],
                n = new f(e.anchorNode, e.anchorOffset),
                r = new f(e.focusNode, e.focusOffset),
                i = typeof e.getName == "function" ? e.getName() : "Selection";
            if (typeof e.rangeCount != "undefined")
                for (var s = 0, u = e.rangeCount; s < u; ++s) t[s] = o.inspect(e.getRangeAt(s));
            return "[" + i + "(Ranges: " + t.join(", ") + ")(anchor: " + n.inspect() + ", focus: " + r.inspect() + "]"
        }
        e.requireModules(["DomUtil", "DomRange", "WrappedRange"]), e.config.checkSelectionRanges = !0;
        var n = "boolean",
            r = "_rangySelection",
            i = e.dom,
            s = e.util,
            o = e.DomRange,
            u = e.WrappedRange,
            a = e.DOMException,
            f = i.DomPosition,
            l, c, h = "Control",
            v = e.util.isHostMethod(window, "getSelection"),
            m = e.util.isHostObject(document, "selection"),
            g = m && (!v || e.config.preferTextRange);
        g ? (l = d, e.isSelectionValid = function (e) {
            var t = (e || window).document,
                n = t.selection;
            return n.type != "None" || i.getDocument(n.createRange().parentElement()) == t
        }) : v ? (l = p, e.isSelectionValid = function () {
            return !0
        }) : t.fail("Neither document.selection or window.getSelection() detected."), e.getNativeSelection = l;
        var y = l(),
            b = e.createNativeRange(document),
            w = i.getBody(document),
            E = s.areHostObjects(y, ["anchorNode", "focusNode"] && s.areHostProperties(y, ["anchorOffset", "focusOffset"]));
        e.features.selectionHasAnchorAndFocus = E;
        var S = s.isHostMethod(y, "extend");
        e.features.selectionHasExtend = S;
        var x = typeof y.rangeCount == "number";
        e.features.selectionHasRangeCount = x;
        var T = !1,
            N = !0;
        s.areHostMethods(y, ["addRange", "getRangeAt", "removeAllRanges"]) && typeof y.rangeCount == "number" && e.features.implementsDomRange && function () {
            var e = document.createElement("iframe");
            w.appendChild(e);
            var t = i.getIframeDocument(e);
            t.open(), t.write("<html><head></head><body>12</body></html>"), t.close();
            var n = i.getIframeWindow(e).getSelection(),
                r = t.documentElement,
                s = r.lastChild,
                o = s.firstChild,
                u = t.createRange();
            u.setStart(o, 1), u.collapse(!0), n.addRange(u), N = n.rangeCount == 1, n.removeAllRanges();
            var a = u.cloneRange();
            u.setStart(o, 0), a.setEnd(o, 2), n.addRange(u), n.addRange(a), T = n.rangeCount == 2, u.detach(), a.detach(), w.removeChild(e)
        }(), e.features.selectionSupportsMultipleRanges = T, e.features.collapsedNonEditableSelectionsSupported = N;
        var C = !1,
            k;
        w && s.isHostMethod(w, "createControlRange") && (k = w.createControlRange(), s.areHostProperties(k, ["item", "add"]) && (C = !0)), e.features.implementsControlRange = C, E ? c = function (e) {
            return e.anchorNode === e.focusNode && e.anchorOffset === e.focusOffset
        } : c = function (e) {
            return e.rangeCount ? e.getRangeAt(e.rangeCount - 1).collapsed : !1
        };
        var F;
        s.isHostMethod(y, "getRangeAt") ? F = function (e, t) {
            try {
                return e.getRangeAt(t)
            } catch (n) {
                return null
            }
        } : E && (F = function (t) {
            var n = i.getDocument(t.anchorNode),
                r = e.createRange(n);
            return r.setStart(t.anchorNode, t.anchorOffset), r.setEnd(t.focusNode, t.focusOffset), r.collapsed !== this.isCollapsed && (r.setStart(t.focusNode, t.focusOffset), r.setEnd(t.anchorNode, t.anchorOffset)), r
        }), e.getSelection = function (e) {
            e = e || window;
            var t = e[r],
                n = l(e),
                i = m ? d(e) : null;
            return t ? (t.nativeSelection = n, t.docSelection = i, t.refresh(e)) : (t = new I(n, i, e), e[r] = t), t
        }, e.getIframeSelection = function (t) {
            return e.getSelection(i.getIframeWindow(t))
        };
        var q = I.prototype;
        if (!g && E && s.areHostMethods(y, ["removeAllRanges", "addRange"])) {
            q.removeAllRanges = function () {
                this.nativeSelection.removeAllRanges(), O(this)
            };
            var U = function (t, n) {
                var r = o.getRangeDocument(n),
                    i = e.createRange(r);
                i.collapseToPoint(n.endContainer, n.endOffset), t.nativeSelection.addRange(M(i)), t.nativeSelection.extend(n.startContainer, n.startOffset), t.refresh()
            };
            x ? q.addRange = function (t, n) {
                if (C && m && this.docSelection.type == h) j(this, t);
                else if (n && S) U(this, t);
                else {
                    var r;
                    T ? r = this.rangeCount : (this.removeAllRanges(), r = 0), this.nativeSelection.addRange(M(t)), this.rangeCount = this.nativeSelection.rangeCount;
                    if (this.rangeCount == r + 1) {
                        if (e.config.checkSelectionRanges) {
                            var i = F(this.nativeSelection, this.rangeCount - 1);
                            i && !o.rangesEqual(i, t) && (t = new u(i))
                        }
                        this._ranges[this.rangeCount - 1] = t, L(this, t, X(this.nativeSelection)), this.isCollapsed = c(this)
                    } else this.refresh()
                }
            } : q.addRange = function (e, t) {
                t && S ? U(this, e) : (this.nativeSelection.addRange(M(e)), this.refresh())
            }, q.setRanges = function (e) {
                if (C && e.length > 1) R(this, e);
                else {
                    this.removeAllRanges();
                    for (var t = 0, n = e.length; t < n; ++t) this.addRange(e[t])
                }
            }
        } else {
            if (!(s.isHostMethod(y, "empty") && s.isHostMethod(b, "select") && C && g)) return t.fail("No means of selecting a Range or TextRange was found"), !1;
            q.removeAllRanges = function () {
                try {
                    this.docSelection.empty();
                    if (this.docSelection.type != "None") {
                        var e;
                        if (this.anchorNode) e = i.getDocument(this.anchorNode);
                        else if (this.docSelection.type == h) {
                            var t = this.docSelection.createRange();
                            t.length && (e = i.getDocument(t.item(0)).body.createTextRange())
                        }
                        if (e) {
                            var n = e.body.createTextRange();
                            n.select(), this.docSelection.empty()
                        }
                    }
                } catch (r) {}
                O(this)
            }, q.addRange = function (e) {
                this.docSelection.type == h ? j(this, e) : (u.rangeToTextRange(e).select(), this._ranges[0] = e, this.rangeCount = 1, this.isCollapsed = this._ranges[0].collapsed, L(this, e, !1))
            }, q.setRanges = function (e) {
                this.removeAllRanges();
                var t = e.length;
                t > 1 ? R(this, e) : t && this.addRange(e[0])
            }
        }
        q.getRangeAt = function (e) {
            if (e < 0 || e >= this.rangeCount) throw new a("INDEX_SIZE_ERR");
            return this._ranges[e]
        };
        var z;
        if (g) z = function (t) {
            var n;
            e.isSelectionValid(t.win) ? n = t.docSelection.createRange() : (n = i.getBody(t.win.document).createTextRange(), n.collapse(!0)), t.docSelection.type == h ? B(t) : P(n) ? H(t, n) : O(t)
        };
        else if (s.isHostMethod(y, "getRangeAt") && typeof y.rangeCount == "number") z = function (t) {
            if (C && m && t.docSelection.type == h) B(t);
            else {
                t._ranges.length = t.rangeCount = t.nativeSelection.rangeCount;
                if (t.rangeCount) {
                    for (var n = 0, r = t.rangeCount; n < r; ++n) t._ranges[n] = new e.WrappedRange(t.nativeSelection.getRangeAt(n));
                    L(t, t._ranges[t.rangeCount - 1], X(t.nativeSelection)), t.isCollapsed = c(t)
                } else O(t)
            }
        };
        else {
            if (!E || typeof y.isCollapsed != n || typeof b.collapsed != n || !e.features.implementsDomRange) return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"), !1;
            z = function (e) {
                var t, n = e.nativeSelection;
                n.anchorNode ? (t = F(n, 0), e._ranges = [t], e.rangeCount = 1, A(e), e.isCollapsed = c(e)) : O(e)
            }
        }
        q.refresh = function (e) {
            var t = e ? this._ranges.slice(0) : null;
            z(this);
            if (e) {
                var n = t.length;
                if (n != this._ranges.length) return !1;
                while (n--)
                    if (!o.rangesEqual(t[n], this._ranges[n])) return !1;
                return !0
            }
        };
        var W = function (e, t) {
            var n = e.getAllRanges(),
                r = !1;
            e.removeAllRanges();
            for (var i = 0, s = n.length; i < s; ++i) r || t !== n[i] ? e.addRange(n[i]) : r = !0;
            e.rangeCount || O(e)
        };
        C ? q.removeRange = function (e) {
            if (this.docSelection.type == h) {
                var t = this.docSelection.createRange(),
                    n = D(e),
                    r = i.getDocument(t.item(0)),
                    s = i.getBody(r).createControlRange(),
                    o, u = !1;
                for (var a = 0, f = t.length; a < f; ++a) o = t.item(a), o !== n || u ? s.add(t.item(a)) : u = !0;
                s.select(), B(this)
            } else W(this, e)
        } : q.removeRange = function (e) {
            W(this, e)
        };
        var X;
        !g && E && e.features.implementsDomRange ? (X = function (e) {
            var t = !1;
            return e.anchorNode && (t = i.comparePoints(e.anchorNode, e.anchorOffset, e.focusNode, e.focusOffset) == 1), t
        }, q.isBackwards = function () {
            return X(this)
        }) : X = q.isBackwards = function () {
            return !1
        }, q.toString = function () {
            var e = [];
            for (var t = 0, n = this.rangeCount; t < n; ++t) e[t] = "" + this._ranges[t];
            return e.join("")
        }, q.collapse = function (t, n) {
            V(this, t);
            var r = e.createRange(i.getDocument(t));
            r.collapseToPoint(t, n), this.removeAllRanges(), this.addRange(r), this.isCollapsed = !0
        }, q.collapseToStart = function () {
            if (!this.rangeCount) throw new a("INVALID_STATE_ERR");
            var e = this._ranges[0];
            this.collapse(e.startContainer, e.startOffset)
        }, q.collapseToEnd = function () {
            if (!this.rangeCount) throw new a("INVALID_STATE_ERR");
            var e = this._ranges[this.rangeCount - 1];
            this.collapse(e.endContainer, e.endOffset)
        }, q.selectAllChildren = function (t) {
            V(this, t);
            var n = e.createRange(i.getDocument(t));
            n.selectNodeContents(t), this.removeAllRanges(), this.addRange(n)
        }, q.deleteFromDocument = function () {
            if (C && m && this.docSelection.type == h) {
                var e = this.docSelection.createRange(),
                    t;
                while (e.length) t = e.item(0), e.remove(t), t.parentNode.removeChild(t);
                this.refresh()
            } else if (this.rangeCount) {
                var n = this.getAllRanges();
                this.removeAllRanges();
                for (var r = 0, i = n.length; r < i; ++r) n[r].deleteContents();
                this.addRange(n[i - 1])
            }
        }, q.getAllRanges = function () {
            return this._ranges.slice(0)
        }, q.setSingleRange = function (e) {
            this.setRanges([e])
        }, q.containsNode = function (e, t) {
            for (var n = 0, r = this._ranges.length; n < r; ++n)
                if (this._ranges[n].containsNode(e, t)) return !0;
            return !1
        }, q.toHtml = function () {
            var e = "";
            if (this.rangeCount) {
                var t = o.getRangeDocument(this._ranges[0]).createElement("div");
                for (var n = 0, r = this._ranges.length; n < r; ++n) t.appendChild(this._ranges[n].cloneContents());
                e = t.innerHTML
            }
            return e
        }, q.getName = function () {
            return "WrappedSelection"
        }, q.inspect = function () {
            return $(this)
        }, q.detach = function () {
            this.win[r] = null, this.win = this.anchorNode = this.focusNode = null
        }, I.inspect = $, e.Selection = I, e.selectionPrototype = q, e.addCreateMissingNativeApiListener(function (t) {
            typeof t.getSelection == "undefined" && (t.getSelection = function () {
                return e.getSelection(this)
            }), t = null
        })
    });
    var Base = function () {};
    Base.extend = function (e, t) {
        var n = Base.prototype.extend;
        Base._prototyping = !0;
        var r = new this;
        n.call(r, e), r.base = function () {}, delete Base._prototyping;
        var i = r.constructor,
            s = r.constructor = function () {
                if (!Base._prototyping)
                    if (this._constructing || this.constructor == s) this._constructing = !0, i.apply(this, arguments), delete this._constructing;
                    else if (arguments[0] != null) return (arguments[0].extend || n).call(arguments[0], r)
            };
        return s.ancestor = this, s.extend = this.extend, s.forEach = this.forEach, s.implement = this.implement, s.prototype = r, s.toString = this.toString, s.valueOf = function (e) {
            return e == "object" ? s : i.valueOf()
        }, n.call(s, t), typeof s.init == "function" && s.init(), s
    }, Base.prototype = {
        extend: function (e, t) {
            if (arguments.length > 1) {
                var n = this[e];
                if (n && typeof t == "function" && (!n.valueOf || n.valueOf() != t.valueOf()) && /\bbase\b/.test(t)) {
                    var r = t.valueOf();
                    t = function () {
                        var e = this.base || Base.prototype.base;
                        this.base = n;
                        var t = r.apply(this, arguments);
                        return this.base = e, t
                    }, t.valueOf = function (e) {
                        return e == "object" ? t : r
                    }, t.toString = Base.toString
                }
                this[e] = t
            } else if (e) {
                var i = Base.prototype.extend;
                !Base._prototyping && typeof this != "function" && (i = this.extend || i);
                var s = {
                    toSource: null
                }, o = ["constructor", "toString", "valueOf"],
                    u = Base._prototyping ? 0 : 1;
                while (a = o[u++]) e[a] != s[a] && i.call(this, a, e[a]);
                for (var a in e) s[a] || i.call(this, a, e[a])
            }
            return this
        }
    }, Base = Base.extend({
            constructor: function () {
                this.extend(arguments[0])
            }
        }, {
            ancestor: Object,
            version: "1.1",
            forEach: function (e, t, n) {
                for (var r in e) this.prototype[r] === undefined && t.call(n, e[r], r, e)
            },
            implement: function () {
                for (var e = 0; e < arguments.length; e++) typeof arguments[e] == "function" ? arguments[e](this.prototype) : this.prototype.extend(arguments[e]);
                return this
            },
            toString: function () {
                return String(this.valueOf())
            }
        }), wysihtml5.browser = function () {
        function u(e) {
            return +(/ipad|iphone|ipod/.test(e) && e.match(/ os (\d+).+? like mac os x/) || [, 0])[1]
        }

        function a(e) {
            return +(e.match(/android (\d+)/) || [, 0])[1]
        }
        var e = navigator.userAgent,
            t = document.createElement("div"),
            n = e.indexOf("MSIE") !== -1 && e.indexOf("Opera") === -1,
            r = e.indexOf("Gecko") !== -1 && e.indexOf("KHTML") === -1,
            i = e.indexOf("AppleWebKit/") !== -1,
            s = e.indexOf("Chrome/") !== -1,
            o = e.indexOf("Opera/") !== -1;
        return {
            USER_AGENT: e,
            supported: function () {
                var e = this.USER_AGENT.toLowerCase(),
                    n = "contentEditable" in t,
                    r = document.execCommand && document.queryCommandSupported && document.queryCommandState,
                    i = document.querySelector && document.querySelectorAll,
                    s = this.isIos() && u(e) < 5 || this.isAndroid() && a(e) < 4 || e.indexOf("opera mobi") !== -1 || e.indexOf("hpwos/") !== -1;
                return n && r && i && !s
            },
            isTouchDevice: function () {
                return this.supportsEvent("touchmove")
            },
            isIos: function () {
                return /ipad|iphone|ipod/i.test(this.USER_AGENT)
            },
            isAndroid: function () {
                return this.USER_AGENT.indexOf("Android") !== -1
            },
            supportsSandboxedIframes: function () {
                return n
            },
            throwsMixedContentWarningWhenIframeSrcIsEmpty: function () {
                return !("querySelector" in document)
            },
            displaysCaretInEmptyContentEditableCorrectly: function () {
                return n
            },
            hasCurrentStyleProperty: function () {
                return "currentStyle" in t
            },
            hasHistoryIssue: function () {
                return r && navigator.platform.substr(0, 3) === "Mac"
            },
            insertsLineBreaksOnReturn: function () {
                return r
            },
            supportsPlaceholderAttributeOn: function (e) {
                return "placeholder" in e
            },
            supportsEvent: function (e) {
                return "on" + e in t || function () {
                    return t.setAttribute("on" + e, "return;"), typeof t["on" + e] == "function"
                }()
            },
            supportsEventsInIframeCorrectly: function () {
                return !o
            },
            supportsHTML5Tags: function (e) {
                var t = e.createElement("div"),
                    n = "<article>foo</article>";
                return t.innerHTML = n, t.innerHTML.toLowerCase() === n
            },
            supportsCommand: function () {
                var e = {
                    formatBlock: n,
                    insertUnorderedList: n || i,
                    insertOrderedList: n || i
                }, t = {
                        insertHTML: r
                    };
                return function (n, r) {
                    var i = e[r];
                    if (!i) {
                        try {
                            return n.queryCommandSupported(r)
                        } catch (s) {}
                        try {
                            return n.queryCommandEnabled(r)
                        } catch (o) {
                            return !!t[r]
                        }
                    }
                    return !1
                }
            }(),
            doesAutoLinkingInContentEditable: function () {
                return n
            },
            canDisableAutoLinking: function () {
                return this.supportsCommand(document, "AutoUrlDetect")
            },
            clearsContentEditableCorrectly: function () {
                return r || o || i
            },
            supportsGetAttributeCorrectly: function () {
                var e = document.createElement("td");
                return e.getAttribute("rowspan") != "1"
            },
            canSelectImagesInContentEditable: function () {
                return r || n || o
            },
            autoScrollsToCaret: function () {
                return !i
            },
            autoClosesUnclosedTags: function () {
                var e = t.cloneNode(!1),
                    n, r;
                return e.innerHTML = "<p><div></div>", r = e.innerHTML.toLowerCase(), n = r === "<p></p><div></div>" || r === "<p><div></div></p>", this.autoClosesUnclosedTags = function () {
                    return n
                }, n
            },
            supportsNativeGetElementsByClassName: function () {
                return String(document.getElementsByClassName).indexOf("[native code]") !== -1
            },
            supportsSelectionModify: function () {
                return "getSelection" in window && "modify" in window.getSelection()
            },
            needsSpaceAfterLineBreak: function () {
                return o
            },
            supportsSpeechApiOn: function (t) {
                var n = e.match(/Chrome\/(\d+)/) || [, 0];
                return n[1] >= 11 && ("onwebkitspeechchange" in t || "speech" in t)
            },
            crashesWhenDefineProperty: function (e) {
                return n && (e === "XMLHttpRequest" || e === "XDomainRequest")
            },
            doesAsyncFocus: function () {
                return n
            },
            hasProblemsSettingCaretAfterImg: function () {
                return n
            },
            hasUndoInContextMenu: function () {
                return r || s || o
            },
            hasInsertNodeIssue: function () {
                return o
            },
            hasIframeFocusIssue: function () {
                return n
            }
        }
    }(), wysihtml5.lang.array = function (e) {
        return {
            contains: function (t) {
                if (e.indexOf) return e.indexOf(t) !== -1;
                for (var n = 0, r = e.length; n < r; n++)
                    if (e[n] === t) return !0;
                return !1
            },
            without: function (t) {
                t = wysihtml5.lang.array(t);
                var n = [],
                    r = 0,
                    i = e.length;
                for (; r < i; r++) t.contains(e[r]) || n.push(e[r]);
                return n
            },
            get: function () {
                var t = 0,
                    n = e.length,
                    r = [];
                for (; t < n; t++) r.push(e[t]);
                return r
            }
        }
    }, wysihtml5.lang.Dispatcher = Base.extend({
            on: function (e, t) {
                return this.events = this.events || {}, this.events[e] = this.events[e] || [], this.events[e].push(t), this
            },
            off: function (e, t) {
                this.events = this.events || {};
                var n = 0,
                    r, i;
                if (e) {
                    r = this.events[e] || [], i = [];
                    for (; n < r.length; n++) r[n] !== t && t && i.push(r[n]);
                    this.events[e] = i
                } else this.events = {};
                return this
            },
            fire: function (e, t) {
                this.events = this.events || {};
                var n = this.events[e] || [],
                    r = 0;
                for (; r < n.length; r++) n[r].call(this, t);
                return this
            },
            observe: function () {
                return this.on.apply(this, arguments)
            },
            stopObserving: function () {
                return this.off.apply(this, arguments)
            }
        }), wysihtml5.lang.object = function (e) {
        return {
            merge: function (t) {
                for (var n in t) e[n] = t[n];
                return this
            },
            get: function () {
                return e
            },
            clone: function () {
                var t = {}, n;
                for (n in e) t[n] = e[n];
                return t
            },
            isArray: function () {
                return Object.prototype.toString.call(e) === "[object Array]"
            }
        }
    },
    function () {
        var e = /^\s+/,
            t = /\s+$/,
            n = /[&<>"]/g,
            r = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;"
            };
        wysihtml5.lang.string = function (i) {
            return i = String(i), {
                trim: function () {
                    return i.replace(e, "").replace(t, "")
                },
                interpolate: function (e) {
                    for (var t in e) i = this.replace("#{" + t + "}").by(e[t]);
                    return i
                },
                replace: function (e) {
                    return {
                        by: function (t) {
                            return i.split(e).join(t)
                        }
                    }
                },
                escapeHTML: function () {
                    return i.replace(n, function (e) {
                        return r[e]
                    })
                }
            }
        }
    }(),
    function (e) {
        function o(e) {
            return l(e) ? e : (e === e.ownerDocument.documentElement && (e = e.ownerDocument.body), c(e))
        }

        function u(e) {
            return e.replace(n, function (e, t) {
                var n = (t.match(r) || [])[1] || "",
                    o = s[n];
                t = t.replace(r, ""), t.split(o).length > t.split(n).length && (t += n, n = "");
                var u = t,
                    a = t;
                return t.length > i && (a = a.substr(0, i) + "..."), u.substr(0, 4) === "www." && (u = "http://" + u), '<a href="' + u + '">' + a + "</a>" + n
            })
        }

        function a(e) {
            var t = e._wysihtml5_tempElement;
            return t || (t = e._wysihtml5_tempElement = e.createElement("div")), t
        }

        function f(t) {
            var n = t.parentNode,
                r = e.lang.string(t.data).escapeHTML(),
                i = a(n.ownerDocument);
            i.innerHTML = "<span></span>" + u(r), i.removeChild(i.firstChild);
            while (i.firstChild) n.insertBefore(i.firstChild, t);
            n.removeChild(t)
        }

        function l(e) {
            var n;
            while (e.parentNode) {
                e = e.parentNode, n = e.nodeName;
                if (t.contains(n)) return !0;
                if (n === "body") return !1
            }
            return !1
        }

        function c(r) {
            if (t.contains(r.nodeName)) return;
            if (r.nodeType === e.TEXT_NODE && r.data.match(n)) {
                f(r);
                return
            }
            var i = e.lang.array(r.childNodes).get(),
                s = i.length,
                o = 0;
            for (; o < s; o++) c(i[o]);
            return r
        }
        var t = e.lang.array(["CODE", "PRE", "A", "SCRIPT", "HEAD", "TITLE", "STYLE"]),
            n = /((https?:\/\/|www\.)[^\s<]{3,})/gi,
            r = /([^\w\/\-](,?))$/i,
            i = 100,
            s = {
                ")": "(",
                "]": "[",
                "}": "{"
            };
        e.dom.autoLink = o, e.dom.autoLink.URL_REG_EXP = n
    }(wysihtml5),
    function (e) {
        var t = e.dom;
        t.addClass = function (e, n) {
            var r = e.classList;
            if (r) return r.add(n);
            if (t.hasClass(e, n)) return;
            e.className += " " + n
        }, t.removeClass = function (e, t) {
            var n = e.classList;
            if (n) return n.remove(t);
            e.className = e.className.replace(new RegExp("(^|\\s+)" + t + "(\\s+|$)"), " ")
        }, t.hasClass = function (e, t) {
            var n = e.classList;
            if (n) return n.contains(t);
            var r = e.className;
            return r.length > 0 && (r == t || (new RegExp("(^|\\s)" + t + "(\\s|$)")).test(r))
        }
    }(wysihtml5), wysihtml5.dom.contains = function () {
        var e = document.documentElement;
        if (e.contains) return function (e, t) {
            return t.nodeType !== wysihtml5.ELEMENT_NODE && (t = t.parentNode), e !== t && e.contains(t)
        };
        if (e.compareDocumentPosition) return function (e, t) {
            return !!(e.compareDocumentPosition(t) & 16)
        }
    }(), wysihtml5.dom.convertToList = function () {
        function e(e, t) {
            var n = e.createElement("li");
            return t.appendChild(n), n
        }

        function t(e, t) {
            return e.createElement(t)
        }

        function n(n, r) {
            if (n.nodeName === "UL" || n.nodeName === "OL" || n.nodeName === "MENU") return n;
            var i = n.ownerDocument,
                s = t(i, r),
                o = n.querySelectorAll("br"),
                u = o.length,
                a, f, l, c, h, p, d, v, m;
            for (m = 0; m < u; m++) {
                c = o[m];
                while ((h = c.parentNode) && h !== n && h.lastChild === c) {
                    if (wysihtml5.dom.getStyle("display").from(h) === "block") {
                        h.removeChild(c);
                        break
                    }
                    wysihtml5.dom.insert(c).after(c.parentNode)
                }
            }
            a = wysihtml5.lang.array(n.childNodes).get(), f = a.length;
            for (m = 0; m < f; m++) {
                v = v || e(i, s), l = a[m], p = wysihtml5.dom.getStyle("display").from(l) === "block", d = l.nodeName === "BR";
                if (p) {
                    v = v.firstChild ? e(i, s) : v, v.appendChild(l), v = null;
                    continue
                }
                if (d) {
                    v = v.firstChild ? null : v;
                    continue
                }
                v.appendChild(l)
            }
            return a.length === 0 && e(i, s), n.parentNode.replaceChild(s, n), s
        }
        return n
    }(), wysihtml5.dom.copyAttributes = function (e) {
        return {
            from: function (t) {
                return {
                    to: function (n) {
                        var r, i = 0,
                            s = e.length;
                        for (; i < s; i++) r = e[i], typeof t[r] != "undefined" && t[r] !== "" && (n[r] = t[r]);
                        return {
                            andTo: arguments.callee
                        }
                    }
                }
            }
        }
    },
    function (e) {
        var t = ["-webkit-box-sizing", "-moz-box-sizing", "-ms-box-sizing", "box-sizing"],
            n = function (t) {
                return r(t) ? parseInt(e.getStyle("width").from(t), 10) < t.offsetWidth : !1
            }, r = function (n) {
                var r = 0,
                    i = t.length;
                for (; r < i; r++)
                    if (e.getStyle(t[r]).from(n) === "border-box") return t[r]
            };
        e.copyStyles = function (r) {
            return {
                from: function (i) {
                    n(i) && (r = wysihtml5.lang.array(r).without(t));
                    var s = "",
                        o = r.length,
                        u = 0,
                        a;
                    for (; u < o; u++) a = r[u], s += a + ":" + e.getStyle(a).from(i) + ";";
                    return {
                        to: function (t) {
                            return e.setStyles(s).on(t), {
                                andTo: arguments.callee
                            }
                        }
                    }
                }
            }
        }
    }(wysihtml5.dom),
    function (e) {
        e.dom.delegate = function (t, n, r, i) {
            return e.dom.observe(t, r, function (r) {
                var s = r.target,
                    o = e.lang.array(t.querySelectorAll(n));
                while (s && s !== t) {
                    if (o.contains(s)) {
                        i.call(s, r);
                        break
                    }
                    s = s.parentNode
                }
            })
        }
    }(wysihtml5), wysihtml5.dom.getAsDom = function () {
        var e = function (e, t) {
            var n = t.createElement("div");
            n.style.display = "none", t.body.appendChild(n);
            try {
                n.innerHTML = e
            } catch (r) {}
            return t.body.removeChild(n), n
        }, t = function (e) {
                if (e._wysihtml5_supportsHTML5Tags) return;
                for (var t = 0, r = n.length; t < r; t++) e.createElement(n[t]);
                e._wysihtml5_supportsHTML5Tags = !0
            }, n = ["abbr", "article", "aside", "audio", "bdi", "canvas", "command", "datalist", "details", "figcaption", "figure", "footer", "header", "hgroup", "keygen", "mark", "meter", "nav", "output", "progress", "rp", "rt", "ruby", "svg", "section", "source", "summary", "time", "track", "video", "wbr"];
        return function (n, r) {
            r = r || document;
            var i;
            return typeof n == "object" && n.nodeType ? (i = r.createElement("div"), i.appendChild(n)) : wysihtml5.browser.supportsHTML5Tags(r) ? (i = r.createElement("div"), i.innerHTML = n) : (t(r), i = e(n, r)), i
        }
    }(), wysihtml5.dom.getParentElement = function () {
        function e(e, t) {
            return !t || !t.length ? !0 : typeof t == "string" ? e === t : wysihtml5.lang.array(t).contains(e)
        }

        function t(e) {
            return e.nodeType === wysihtml5.ELEMENT_NODE
        }

        function n(e, t, n) {
            var r = (e.className || "").match(n) || [];
            return t ? r[r.length - 1] === t : !! r.length
        }

        function r(t, n, r) {
            while (r-- && t && t.nodeName !== "BODY") {
                if (e(t.nodeName, n)) return t;
                t = t.parentNode
            }
            return null
        }

        function i(r, i, s, o, u) {
            while (u-- && r && r.nodeName !== "BODY") {
                if (t(r) && e(r.nodeName, i) && n(r, s, o)) return r;
                r = r.parentNode
            }
            return null
        }
        return function (e, t, n) {
            return n = n || 50, t.className || t.classRegExp ? i(e, t.nodeName, t.className, t.classRegExp, n) : r(e, t.nodeName, n)
        }
    }(), wysihtml5.dom.getStyle = function () {
        function n(e) {
            return e.replace(t, function (e) {
                return e.charAt(1).toUpperCase()
            })
        }
        var e = {
            "float": "styleFloat" in document.createElement("div").style ? "styleFloat" : "cssFloat"
        }, t = /\-[a-z]/g;
        return function (t) {
            return {
                from: function (r) {
                    if (r.nodeType !== wysihtml5.ELEMENT_NODE) return;
                    var i = r.ownerDocument,
                        s = e[t] || n(t),
                        o = r.style,
                        u = r.currentStyle,
                        a = o[s];
                    if (a) return a;
                    if (u) try {
                        return u[s]
                    } catch (f) {}
                    var l = i.defaultView || i.parentWindow,
                        c = (t === "height" || t === "width") && r.nodeName === "TEXTAREA",
                        h, p;
                    if (l.getComputedStyle) return c && (h = o.overflow, o.overflow = "hidden"), p = l.getComputedStyle(r, null).getPropertyValue(t), c && (o.overflow = h || ""), p
                }
            }
        }
    }(), wysihtml5.dom.hasElementWithTagName = function () {
        function n(e) {
            return e._wysihtml5_identifier || (e._wysihtml5_identifier = t++)
        }
        var e = {}, t = 1;
        return function (t, r) {
            var i = n(t) + ":" + r,
                s = e[i];
            return s || (s = e[i] = t.getElementsByTagName(r)), s.length > 0
        }
    }(),
    function (e) {
        function r(e) {
            return e._wysihtml5_identifier || (e._wysihtml5_identifier = n++)
        }
        var t = {}, n = 1;
        e.dom.hasElementWithClassName = function (n, i) {
            if (!e.browser.supportsNativeGetElementsByClassName()) return !!n.querySelector("." + i);
            var s = r(n) + ":" + i,
                o = t[s];
            return o || (o = t[s] = n.getElementsByClassName(i)), o.length > 0
        }
    }(wysihtml5), wysihtml5.dom.insert = function (e) {
        return {
            after: function (t) {
                t.parentNode.insertBefore(e, t.nextSibling)
            },
            before: function (t) {
                t.parentNode.insertBefore(e, t)
            },
            into: function (t) {
                t.appendChild(e)
            }
        }
    }, wysihtml5.dom.insertCSS = function (e) {
        return e = e.join("\n"), {
            into: function (t) {
                var n = t.createElement("style");
                n.type = "text/css", n.styleSheet ? n.styleSheet.cssText = e : n.appendChild(t.createTextNode(e));
                var r = t.querySelector("head link");
                if (r) {
                    r.parentNode.insertBefore(n, r);
                    return
                }
                var i = t.querySelector("head");
                i && i.appendChild(n)
            }
        }
    }, wysihtml5.dom.observe = function (e, t, n) {
        t = typeof t == "string" ? [t] : t;
        var r, i, s = 0,
            o = t.length;
        for (; s < o; s++) i = t[s], e.addEventListener ? e.addEventListener(i, n, !1) : (r = function (t) {
            "target" in t || (t.target = t.srcElement), t.preventDefault = t.preventDefault || function () {
                this.returnValue = !1
            }, t.stopPropagation = t.stopPropagation || function () {
                this.cancelBubble = !0
            }, n.call(e, t)
        }, e.attachEvent("on" + i, r));
        return {
            stop: function () {
                var i, s = 0,
                    o = t.length;
                for (; s < o; s++) i = t[s], e.removeEventListener ? e.removeEventListener(i, n, !1) : e.detachEvent("on" + i, r)
            }
        }
    }, wysihtml5.dom.parse = function () {
        function s(e, t, n, s) {
            wysihtml5.lang.object(i).merge(r).merge(t).get(), n = n || e.ownerDocument || document;
            var u = n.createDocumentFragment(),
                a = typeof e == "string",
                f, l, c;
            a ? f = wysihtml5.dom.getAsDom(e, n) : f = e;
            while (f.firstChild) c = f.firstChild, l = o(c, s), f.removeChild(c), l && u.appendChild(l);
            return f.innerHTML = "", f.appendChild(u), a ? wysihtml5.quirks.getCorrectInnerHTML(f) : f
        }

        function o(n, r) {
            var i = n.nodeType,
                s = n.childNodes,
                u = s.length,
                a = e[i],
                f = 0,
                l, c, h;
            c = a && a(n);
            if (!c) return null;
            for (f = 0; f < u; f++) h = o(s[f], r), h && c.appendChild(h);
            if (r && c.nodeName.toLowerCase() === t && (!c.childNodes.length || !c.attributes.length)) {
                l = c.ownerDocument.createDocumentFragment();
                while (c.firstChild) l.appendChild(c.firstChild);
                return l
            }
            return c
        }

        function u(e) {
            var n, r, s = i.tags,
                o = e.nodeName.toLowerCase(),
                u = e.scopeName;
            if (e._wysihtml5) return null;
            e._wysihtml5 = 1;
            if (e.className === "wysihtml5-temp") return null;
            u && u != "HTML" && (o = u + ":" + o), "outerHTML" in e && !wysihtml5.browser.autoClosesUnclosedTags() && e.nodeName === "P" && e.outerHTML.slice(-4).toLowerCase() !== "</p>" && (o = "div");
            if (o in s) {
                n = s[o];
                if (!n || n.remove) return null;
                n = typeof n == "string" ? {
                    rename_tag: n
                } : n
            } else {
                if (!e.firstChild) return null;
                n = {
                    rename_tag: t
                }
            }
            return r = e.ownerDocument.createElement(n.rename_tag || o), a(e, r, n), e = null, r
        }

        function a(e, t, r) {
            var s = {}, o = r.set_class,
                u = r.add_class,
                a = r.set_attributes,
                f = r.check_attributes,
                c = i.classes,
                h = 0,
                p = [],
                m = [],
                g = [],
                y = [],
                b, w, E, S, x, T, N;
            a && (s = wysihtml5.lang.object(a).clone());
            if (f)
                for (x in f) {
                    N = d[f[x]];
                    if (!N) continue;
                    T = N(l(e, x)), typeof T == "string" && (s[x] = T)
            }
            o && p.push(o);
            if (u)
                for (x in u) {
                    N = v[u[x]];
                    if (!N) continue;
                    S = N(l(e, x)), typeof S == "string" && p.push(S)
            }
            c["_wysihtml5-temp-placeholder"] = 1, y = e.getAttribute("class"), y && (p = p.concat(y.split(n))), b = p.length;
            for (; h < b; h++) E = p[h], c[E] && m.push(E);
            w = m.length;
            while (w--) E = m[w], wysihtml5.lang.array(g).contains(E) || g.unshift(E);
            g.length && (s["class"] = g.join(" "));
            for (x in s) try {
                t.setAttribute(x, s[x])
            } catch (C) {}
            s.src && (typeof s.width != "undefined" && t.setAttribute("width", s.width), typeof s.height != "undefined" && t.setAttribute("height", s.height))
        }

        function l(e, t) {
            t = t.toLowerCase();
            var n = e.nodeName;
            if (n == "IMG" && t == "src" && c(e) === !0) return e.src;
            if (f && "outerHTML" in e) {
                var r = e.outerHTML.toLowerCase(),
                    i = r.indexOf(" " + t + "=") != -1;
                return i ? e.getAttribute(t) : null
            }
            return e.getAttribute(t)
        }

        function c(e) {
            try {
                return e.complete && !e.mozMatchesSelector(":-moz-broken")
            } catch (t) {
                if (e.complete && e.readyState === "complete") return !0
            }
        }

        function p(e) {
            var t = e.nextSibling;
            if (!t || t.nodeType !== wysihtml5.TEXT_NODE) {
                var n = e.data.replace(h, "");
                return e.ownerDocument.createTextNode(n)
            }
            t.data = e.data + t.data
        }
        var e = {
            1: u,
            3: p
        }, t = "span",
            n = /\s+/,
            r = {
                tags: {},
                classes: {}
            }, i = {}, f = !wysihtml5.browser.supportsGetAttributeCorrectly(),
            h = /\uFEFF/g,
            d = {
                url: function () {
                    var e = /^https?:\/\//i;
                    return function (t) {
                        return !t || !t.match(e) ? null : t.replace(e, function (e) {
                            return e.toLowerCase()
                        })
                    }
                }(),
                src: function () {
                    var e = /^(\/|https?:\/\/)/i;
                    return function (t) {
                        return !t || !t.match(e) ? null : t.replace(e, function (e) {
                            return e.toLowerCase()
                        })
                    }
                }(),
                href: function () {
                    var e = /^(\/|https?:\/\/|mailto:)/i;
                    return function (t) {
                        return !t || !t.match(e) ? null : t.replace(e, function (e) {
                            return e.toLowerCase()
                        })
                    }
                }(),
                alt: function () {
                    var e = /[^ a-z0-9_\-]/gi;
                    return function (t) {
                        return t ? t.replace(e, "") : ""
                    }
                }(),
                numbers: function () {
                    var e = /\D/g;
                    return function (t) {
                        return t = (t || "").replace(e, ""), t || null
                    }
                }()
            }, v = {
                align_img: function () {
                    var e = {
                        left: "wysiwyg-float-left",
                        right: "wysiwyg-float-right"
                    };
                    return function (t) {
                        return e[String(t).toLowerCase()]
                    }
                }(),
                align_text: function () {
                    var e = {
                        left: "wysiwyg-text-align-left",
                        right: "wysiwyg-text-align-right",
                        center: "wysiwyg-text-align-center",
                        justify: "wysiwyg-text-align-justify"
                    };
                    return function (t) {
                        return e[String(t).toLowerCase()]
                    }
                }(),
                clear_br: function () {
                    var e = {
                        left: "wysiwyg-clear-left",
                        right: "wysiwyg-clear-right",
                        both: "wysiwyg-clear-both",
                        all: "wysiwyg-clear-both"
                    };
                    return function (t) {
                        return e[String(t).toLowerCase()]
                    }
                }(),
                size_font: function () {
                    var e = {
                        1: "wysiwyg-font-size-xx-small",
                        2: "wysiwyg-font-size-small",
                        3: "wysiwyg-font-size-medium",
                        4: "wysiwyg-font-size-large",
                        5: "wysiwyg-font-size-x-large",
                        6: "wysiwyg-font-size-xx-large",
                        7: "wysiwyg-font-size-xx-large",
                        "-": "wysiwyg-font-size-smaller",
                        "+": "wysiwyg-font-size-larger"
                    };
                    return function (t) {
                        return e[String(t).charAt(0)]
                    }
                }()
            };
        return s
    }(), wysihtml5.dom.removeEmptyTextNodes = function (e) {
        var t, n = wysihtml5.lang.array(e.childNodes).get(),
            r = n.length,
            i = 0;
        for (; i < r; i++) t = n[i], t.nodeType === wysihtml5.TEXT_NODE && t.data === "" && t.parentNode.removeChild(t)
    }, wysihtml5.dom.renameElement = function (e, t) {
        var n = e.ownerDocument.createElement(t),
            r;
        while (r = e.firstChild) n.appendChild(r);
        return wysihtml5.dom.copyAttributes(["align", "className"]).from(e).to(n), e.parentNode.replaceChild(n, e), n
    }, wysihtml5.dom.replaceWithChildNodes = function (e) {
        if (!e.parentNode) return;
        if (!e.firstChild) {
            e.parentNode.removeChild(e);
            return
        }
        var t = e.ownerDocument.createDocumentFragment();
        while (e.firstChild) t.appendChild(e.firstChild);
        e.parentNode.replaceChild(t, e), e = t = null
    },
    function (e) {
        function t(t) {
            return e.getStyle("display").from(t) === "block"
        }

        function n(e) {
            return e.nodeName === "BR"
        }

        function r(e) {
            var t = e.ownerDocument.createElement("br");
            e.appendChild(t)
        }

        function i(e, i) {
            if (!e.nodeName.match(/^(MENU|UL|OL)$/)) return;
            var s = e.ownerDocument,
                o = s.createDocumentFragment(),
                u = e.previousElementSibling || e.previousSibling,
                a, f, l, c, h, p;
            if (i) {
                u && !t(u) && r(o);
                while (p = e.firstElementChild || e.firstChild) {
                    f = p.lastChild;
                    while (a = p.firstChild) l = a === f, c = l && !t(a) && !n(a), o.appendChild(a), c && r(o);
                    p.parentNode.removeChild(p)
                }
            } else
                while (p = e.firstElementChild || e.firstChild) {
                    if (p.querySelector && p.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))
                        while (a = p.firstChild) o.appendChild(a);
                    else {
                        h = s.createElement("p");
                        while (a = p.firstChild) h.appendChild(a);
                        o.appendChild(h)
                    }
                    p.parentNode.removeChild(p)
            }
            e.parentNode.replaceChild(o, e)
        }
        e.resolveList = i
    }(wysihtml5.dom),
    function (e) {
        var t = document,
            n = ["parent", "top", "opener", "frameElement", "frames", "localStorage", "globalStorage", "sessionStorage", "indexedDB"],
            r = ["open", "close", "openDialog", "showModalDialog", "alert", "confirm", "prompt", "openDatabase", "postMessage", "XMLHttpRequest", "XDomainRequest"],
            i = ["referrer", "write", "open", "close"];
        e.dom.Sandbox = Base.extend({
                constructor: function (t, n) {
                    this.callback = t || e.EMPTY_FUNCTION, this.config = e.lang.object({}).merge(n).get(), this.iframe = this._createIframe()
                },
                insertInto: function (e) {
                    typeof e == "string" && (e = t.getElementById(e)), e.appendChild(this.iframe)
                },
                getIframe: function () {
                    return this.iframe
                },
                getWindow: function () {
                    this._readyError()
                },
                getDocument: function () {
                    this._readyError()
                },
                destroy: function () {
                    var e = this.getIframe();
                    e.parentNode.removeChild(e)
                },
                _readyError: function () {
                    throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")
                },
                _createIframe: function () {
                    var n = this,
                        r = t.createElement("iframe");
                    return r.className = "wysihtml5-sandbox", e.dom.setAttributes({
                            security: "restricted",
                            allowtransparency: "true",
                            frameborder: 0,
                            width: 0,
                            height: 0,
                            marginwidth: 0,
                            marginheight: 0
                        }).on(r), e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty() && (r.src = "javascript:'<html></html>'"), r.onload = function () {
                        r.onreadystatechange = r.onload = null, n._onLoadIframe(r)
                    }, r.onreadystatechange = function () {
                        /loaded|complete/.test(r.readyState) && (r.onreadystatechange = r.onload = null, n._onLoadIframe(r))
                    }, r
                },
                _onLoadIframe: function (s) {
                    if (!e.dom.contains(t.documentElement, s)) return;
                    var o = this,
                        u = s.contentWindow,
                        a = s.contentWindow.document,
                        f = t.characterSet || t.charset || "utf-8",
                        l = this._getHtml({
                                charset: f,
                                stylesheets: this.config.stylesheets
                            });
                    a.open("text/html", "replace"), a.write(l), a.close(), this.getWindow = function () {
                        return s.contentWindow
                    }, this.getDocument = function () {
                        return s.contentWindow.document
                    }, u.onerror = function (e, t, n) {
                        throw new Error("wysihtml5.Sandbox: " + e, t, n)
                    };
                    if (!e.browser.supportsSandboxedIframes()) {
                        var c, h;
                        for (c = 0, h = n.length; c < h; c++) this._unset(u, n[c]);
                        for (c = 0, h = r.length; c < h; c++) this._unset(u, r[c], e.EMPTY_FUNCTION);
                        for (c = 0, h = i.length; c < h; c++) this._unset(a, i[c]);
                        this._unset(a, "cookie", "", !0)
                    }
                    this.loaded = !0, setTimeout(function () {
                        o.callback(o)
                    }, 0)
                },
                _getHtml: function (t) {
                    var n = t.stylesheets,
                        r = "",
                        i = 0,
                        s;
                    n = typeof n == "string" ? [n] : n;
                    if (n) {
                        s = n.length;
                        for (; i < s; i++) r += '<link rel="stylesheet" href="' + n[i] + '">'
                    }
                    return t.stylesheets = r, e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)
                },
                _unset: function (t, n, r, i) {
                    try {
                        t[n] = r
                    } catch (s) {}
                    try {
                        t.__defineGetter__(n, function () {
                            return r
                        })
                    } catch (s) {}
                    if (i) try {
                        t.__defineSetter__(n, function () {})
                    } catch (s) {}
                    if (!e.browser.crashesWhenDefineProperty(n)) try {
                        var o = {
                            get: function () {
                                return r
                            }
                        };
                        i && (o.set = function () {}), Object.defineProperty(t, n, o)
                    } catch (s) {}
                }
            })
    }(wysihtml5),
    function () {
        var e = {
            className: "class"
        };
        wysihtml5.dom.setAttributes = function (t) {
            return {
                on: function (n) {
                    for (var r in t) n.setAttribute(e[r] || r, t[r])
                }
            }
        }
    }(), wysihtml5.dom.setStyles = function (e) {
        return {
            on: function (t) {
                var n = t.style;
                if (typeof e == "string") {
                    n.cssText += ";" + e;
                    return
                }
                for (var r in e) r === "float" ? (n.cssFloat = e[r], n.styleFloat = e[r]) : n[r] = e[r]
            }
        }
    },
    function (e) {
        e.simulatePlaceholder = function (t, n, r) {
            var i = "placeholder",
                s = function () {
                    n.hasPlaceholderSet() && n.clear(), n.placeholderSet = !1, e.removeClass(n.element, i)
                }, o = function () {
                    n.isEmpty() && (n.placeholderSet = !0, n.setValue(r), e.addClass(n.element, i))
                };
            t.on("set_placeholder", o).on("unset_placeholder", s).on("focus:composer", s).on("paste:composer", s).on("blur:composer", o), o()
        }
    }(wysihtml5.dom),
    function (e) {
        var t = document.documentElement;
        "textContent" in t ? (e.setTextContent = function (e, t) {
            e.textContent = t
        }, e.getTextContent = function (e) {
            return e.textContent
        }) : "innerText" in t ? (e.setTextContent = function (e, t) {
            e.innerText = t
        }, e.getTextContent = function (e) {
            return e.innerText
        }) : (e.setTextContent = function (e, t) {
            e.nodeValue = t
        }, e.getTextContent = function (e) {
            return e.nodeValue
        })
    }(wysihtml5.dom), wysihtml5.quirks.cleanPastedHTML = function () {
        function t(t, n, r) {
            n = n || e, r = r || t.ownerDocument || document;
            var i, s = typeof t == "string",
                o, u, a, f, l = 0;
            s ? i = wysihtml5.dom.getAsDom(t, r) : i = t;
            for (f in n) {
                u = i.querySelectorAll(f), o = n[f], a = u.length;
                for (; l < a; l++) o(u[l])
            }
            return u = t = n = null, s ? i.innerHTML : i
        }
        var e = {
            "a u": wysihtml5.dom.replaceWithChildNodes
        };
        return t
    }(), wysihtml5.quirks.ensureProperClearing = function () {
        var e = function () {
            var e = this;
            setTimeout(function () {
                var t = e.innerHTML.toLowerCase();
                if (t == "<p>&nbsp;</p>" || t == "<p>&nbsp;</p><p>&nbsp;</p>") e.innerHTML = ""
            }, 0)
        };
        return function (t) {
            wysihtml5.dom.observe(t.element, ["cut", "keydown"], e)
        }
    }(),
    function (e) {
        var t = "%7E";
        e.quirks.getCorrectInnerHTML = function (n) {
            var r = n.innerHTML;
            if (r.indexOf(t) === -1) return r;
            var i = n.querySelectorAll("[href*='~'], [src*='~']"),
                s, o, u, a;
            for (a = 0, u = i.length; a < u; a++) s = i[a].href || i[a].src, o = e.lang.string(s).replace("~").by(t), r = e.lang.string(r).replace(o).by(s);
            return r
        }
    }(wysihtml5),
    function (e) {
        var t = "wysihtml5-quirks-redraw";
        e.quirks.redraw = function (n) {
            e.dom.addClass(n, t), e.dom.removeClass(n, t);
            try {
                var r = n.ownerDocument;
                r.execCommand("italic", !1, null), r.execCommand("italic", !1, null)
            } catch (i) {}
        }
    }(wysihtml5),
    function (e) {
        function n(e) {
            var t = 0;
            if (e.parentNode)
                do t += e.offsetTop || 0, e = e.offsetParent; while (e);
            return t
        }
        var t = e.dom;
        e.Selection = Base.extend({
                constructor: function (e) {
                    window.rangy.init(), this.editor = e, this.composer = e.composer, this.doc = this.composer.doc
                },
                getBookmark: function () {
                    var e = this.getRange();
                    return e && e.cloneRange()
                },
                setBookmark: function (e) {
                    if (!e) return;
                    this.setSelection(e)
                },
                setBefore: function (e) {
                    var t = rangy.createRange(this.doc);
                    return t.setStartBefore(e), t.setEndBefore(e), this.setSelection(t)
                },
                setAfter: function (e) {
                    var t = rangy.createRange(this.doc);
                    return t.setStartAfter(e), t.setEndAfter(e), this.setSelection(t)
                },
                selectNode: function (n, r) {
                    var i = rangy.createRange(this.doc),
                        s = n.nodeType === e.ELEMENT_NODE,
                        o = "canHaveHTML" in n ? n.canHaveHTML : n.nodeName !== "IMG",
                        u = s ? n.innerHTML : n.data,
                        a = u === "" || u === e.INVISIBLE_SPACE,
                        f = t.getStyle("display").from(n),
                        l = f === "block" || f === "list-item";
                    if (a && s && o && !r) try {
                        n.innerHTML = e.INVISIBLE_SPACE
                    } catch (c) {}
                    o ? i.selectNodeContents(n) : i.selectNode(n), o && a && s ? i.collapse(l) : o && a && (i.setStartAfter(n), i.setEndAfter(n)), this.setSelection(i)
                },
                getSelectedNode: function (e) {
                    var t, n;
                    if (e && this.doc.selection && this.doc.selection.type === "Control") {
                        n = this.doc.selection.createRange();
                        if (n && n.length) return n.item(0)
                    }
                    return t = this.getSelection(this.doc), t.focusNode === t.anchorNode ? t.focusNode : (n = this.getRange(this.doc), n ? n.commonAncestorContainer : this.doc.body)
                },
                executeAndRestore: function (n, r) {
                    var i = this.doc.body,
                        s = r && i.scrollTop,
                        o = r && i.scrollLeft,
                        u = "_wysihtml5-temp-placeholder",
                        a = '<span class="' + u + '">' + e.INVISIBLE_SPACE + "</span>",
                        f = this.getRange(this.doc),
                        l, c, h, p, d;
                    if (!f) {
                        n(i, i);
                        return
                    }
                    e.browser.hasInsertNodeIssue() ? this.doc.execCommand("insertHTML", !1, a) : (p = f.createContextualFragment(a), f.insertNode(p));
                    try {
                        n(f.startContainer, f.endContainer)
                    } catch (v) {
                        setTimeout(function () {
                            throw v
                        }, 0)
                    }
                    l = this.doc.querySelector("." + u), l ? (d = rangy.createRange(this.doc), h = l.nextSibling, e.browser.hasInsertNodeIssue() && h && h.nodeName === "BR" ? (c = this.doc.createTextNode(e.INVISIBLE_SPACE), t.insert(c).after(l), d.setStartBefore(c), d.setEndBefore(c)) : (d.selectNode(l), d.deleteContents()), this.setSelection(d)) : i.focus(), r && (i.scrollTop = s, i.scrollLeft = o);
                    try {
                        l.parentNode.removeChild(l)
                    } catch (m) {}
                },
                executeAndRestoreSimple: function (e) {
                    var t = this.getRange(),
                        n = this.doc.body,
                        r, i, s, o, u;
                    if (!t) {
                        e(n, n);
                        return
                    }
                    o = t.getNodes([3]), i = o[0] || t.startContainer, s = o[o.length - 1] || t.endContainer, u = {
                        collapsed: t.collapsed,
                        startContainer: i,
                        startOffset: i === t.startContainer ? t.startOffset : 0,
                        endContainer: s,
                        endOffset: s === t.endContainer ? t.endOffset : s.length
                    };
                    try {
                        e(t.startContainer, t.endContainer)
                    } catch (a) {
                        setTimeout(function () {
                            throw a
                        }, 0)
                    }
                    r = rangy.createRange(this.doc);
                    try {
                        r.setStart(u.startContainer, u.startOffset)
                    } catch (f) {}
                    try {
                        r.setEnd(u.endContainer, u.endOffset)
                    } catch (l) {}
                    try {
                        this.setSelection(r)
                    } catch (c) {}
                },
                set: function (e, t) {
                    var n = rangy.createRange(this.doc);
                    n.setStart(e, t || 0), this.setSelection(n)
                },
                insertHTML: function (e) {
                    var t = rangy.createRange(this.doc),
                        n = t.createContextualFragment(e),
                        r = n.lastChild;
                    this.insertNode(n), r && this.setAfter(r)
                },
                insertNode: function (e) {
                    var t = this.getRange();
                    t && t.insertNode(e)
                },
                surround: function (e) {
                    var t = this.getRange();
                    if (!t) return;
                    try {
                        t.surroundContents(e), this.selectNode(e)
                    } catch (n) {
                        e.appendChild(t.extractContents()), t.insertNode(e)
                    }
                },
                scrollIntoView: function () {
                    var t = this.doc,
                        r = 5,
                        i = t.documentElement.scrollHeight > t.documentElement.offsetHeight,
                        s = t._wysihtml5ScrollIntoViewElement = t._wysihtml5ScrollIntoViewElement || function () {
                            var n = t.createElement("span");
                            return n.innerHTML = e.INVISIBLE_SPACE, n
                        }(),
                        o;
                    i && (this.insertNode(s), o = n(s), s.parentNode.removeChild(s), o >= t.body.scrollTop + t.documentElement.offsetHeight - r && (t.body.scrollTop = o))
                },
                selectLine: function () {
                    e.browser.supportsSelectionModify() ? this._selectLine_W3C() : this.doc.selection && this._selectLine_MSIE()
                },
                _selectLine_W3C: function () {
                    var e = this.doc.defaultView,
                        t = e.getSelection();
                    t.modify("extend", "left", "lineboundary"), t.modify("extend", "right", "lineboundary")
                },
                _selectLine_MSIE: function () {
                    var e = this.doc.selection.createRange(),
                        t = e.boundingTop,
                        n = this.doc.body.scrollWidth,
                        r, i, s, o, u;
                    if (!e.moveToPoint) return;
                    t === 0 && (s = this.doc.createElement("span"), this.insertNode(s), t = s.offsetTop, s.parentNode.removeChild(s)), t += 1;
                    for (o = -10; o < n; o += 2) try {
                        e.moveToPoint(o, t);
                        break
                    } catch (a) {}
                    r = t, i = this.doc.selection.createRange();
                    for (u = n; u >= 0; u--) try {
                        i.moveToPoint(u, r);
                        break
                    } catch (f) {}
                    e.setEndPoint("EndToEnd", i), e.select()
                },
                getText: function () {
                    var e = this.getSelection();
                    return e ? e.toString() : ""
                },
                getNodes: function (e, t) {
                    var n = this.getRange();
                    return n ? n.getNodes([e], t) : []
                },
                getRange: function () {
                    var e = this.getSelection();
                    return e && e.rangeCount && e.getRangeAt(0)
                },
                getSelection: function () {
                    return rangy.getSelection(this.doc.defaultView || this.doc.parentWindow)
                },
                setSelection: function (e) {
                    var t = this.doc.defaultView || this.doc.parentWindow,
                        n = rangy.getSelection(t);
                    return n.setSingleRange(e)
                }
            })
    }(wysihtml5),
    function (e, t) {
        function i(e, t, n) {
            if (!e.className) return !1;
            var r = e.className.match(n) || [];
            return r[r.length - 1] === t
        }

        function s(e, t, n) {
            e.className ? (o(e, n), e.className += " " + t) : e.className = t
        }

        function o(e, t) {
            e.className && (e.className = e.className.replace(t, ""))
        }

        function u(e, t) {
            return e.className.replace(r, " ") == t.className.replace(r, " ")
        }

        function a(e) {
            var t = e.parentNode;
            while (e.firstChild) t.insertBefore(e.firstChild, e);
            t.removeChild(e)
        }

        function f(e, t) {
            if (e.attributes.length != t.attributes.length) return !1;
            for (var n = 0, r = e.attributes.length, i, s, o; n < r; ++n) {
                i = e.attributes[n], o = i.name;
                if (o != "class") {
                    s = t.attributes.getNamedItem(o);
                    if (i.specified != s.specified) return !1;
                    if (i.specified && i.nodeValue !== s.nodeValue) return !1
                }
            }
            return !0
        }

        function l(e, n) {
            return t.dom.isCharacterDataNode(e) ? n == 0 ? !! e.previousSibling : n == e.length ? !! e.nextSibling : !0 : n > 0 && n < e.childNodes.length
        }

        function c(e, n, r) {
            var i;
            t.dom.isCharacterDataNode(n) && (r == 0 ? (r = t.dom.getNodeIndex(n), n = n.parentNode) : r == n.length ? (r = t.dom.getNodeIndex(n) + 1, n = n.parentNode) : i = t.dom.splitDataNode(n, r));
            if (!i) {
                i = n.cloneNode(!1), i.id && i.removeAttribute("id");
                var s;
                while (s = n.childNodes[r]) i.appendChild(s);
                t.dom.insertAfter(i, n)
            }
            return n == e ? i : c(e, i.parentNode, t.dom.getNodeIndex(i))
        }

        function h(t) {
            this.isElementMerge = t.nodeType == e.ELEMENT_NODE, this.firstTextNode = this.isElementMerge ? t.lastChild : t, this.textNodes = [this.firstTextNode]
        }

        function p(e, t, r, i) {
            this.tagNames = e || [n], this.cssClass = t || "", this.similarClassRegExp = r, this.normalize = i, this.applyToAnyTagName = !1
        }
        var n = "span",
            r = /\s+/g;
        h.prototype = {
            doMerge: function () {
                var e = [],
                    t, n, r;
                for (var i = 0, s = this.textNodes.length; i < s; ++i) t = this.textNodes[i], n = t.parentNode, e[i] = t.data, i && (n.removeChild(t), n.hasChildNodes() || n.parentNode.removeChild(n));
                return this.firstTextNode.data = r = e.join(""), r
            },
            getLength: function () {
                var e = this.textNodes.length,
                    t = 0;
                while (e--) t += this.textNodes[e].length;
                return t
            },
            toString: function () {
                var e = [];
                for (var t = 0, n = this.textNodes.length; t < n; ++t) e[t] = "'" + this.textNodes[t].data + "'";
                return "[Merge(" + e.join(",") + ")]"
            }
        }, p.prototype = {
            getAncestorWithClass: function (n) {
                var r;
                while (n) {
                    r = this.cssClass ? i(n, this.cssClass, this.similarClassRegExp) : !0;
                    if (n.nodeType == e.ELEMENT_NODE && t.dom.arrayContains(this.tagNames, n.tagName.toLowerCase()) && r) return n;
                    n = n.parentNode
                }
                return !1
            },
            postApply: function (e, t) {
                var n = e[0],
                    r = e[e.length - 1],
                    i = [],
                    s, o = n,
                    u = r,
                    a = 0,
                    f = r.length,
                    l, c;
                for (var p = 0, d = e.length; p < d; ++p) l = e[p], c = this.getAdjacentMergeableTextNode(l.parentNode, !1), c ? (s || (s = new h(c), i.push(s)), s.textNodes.push(l), l === n && (o = s.firstTextNode, a = o.length), l === r && (u = s.firstTextNode, f = s.getLength())) : s = null;
                var v = this.getAdjacentMergeableTextNode(r.parentNode, !0);
                v && (s || (s = new h(r), i.push(s)), s.textNodes.push(v));
                if (i.length) {
                    for (p = 0, d = i.length; p < d; ++p) i[p].doMerge();
                    t.setStart(o, a), t.setEnd(u, f)
                }
            },
            getAdjacentMergeableTextNode: function (t, n) {
                var r = t.nodeType == e.TEXT_NODE,
                    i = r ? t.parentNode : t,
                    s, o = n ? "nextSibling" : "previousSibling";
                if (r) {
                    s = t[o];
                    if (s && s.nodeType == e.TEXT_NODE) return s
                } else {
                    s = i[o];
                    if (s && this.areElementsMergeable(t, s)) return s[n ? "firstChild" : "lastChild"]
                }
                return null
            },
            areElementsMergeable: function (e, n) {
                return t.dom.arrayContains(this.tagNames, (e.tagName || "").toLowerCase()) && t.dom.arrayContains(this.tagNames, (n.tagName || "").toLowerCase()) && u(e, n) && f(e, n)
            },
            createContainer: function (e) {
                var t = e.createElement(this.tagNames[0]);
                return this.cssClass && (t.className = this.cssClass), t
            },
            applyToTextNode: function (e) {
                var n = e.parentNode;
                if (n.childNodes.length == 1 && t.dom.arrayContains(this.tagNames, n.tagName.toLowerCase())) this.cssClass && s(n, this.cssClass, this.similarClassRegExp);
                else {
                    var r = this.createContainer(t.dom.getDocument(e));
                    e.parentNode.insertBefore(r, e), r.appendChild(e)
                }
            },
            isRemovable: function (n) {
                return t.dom.arrayContains(this.tagNames, n.tagName.toLowerCase()) && e.lang.string(n.className).trim() == this.cssClass
            },
            undoToTextNode: function (e, t, n) {
                if (!t.containsNode(n)) {
                    var r = t.cloneRange();
                    r.selectNode(n), r.isPointInRange(t.endContainer, t.endOffset) && l(t.endContainer, t.endOffset) && (c(n, t.endContainer, t.endOffset), t.setEndAfter(n)), r.isPointInRange(t.startContainer, t.startOffset) && l(t.startContainer, t.startOffset) && (n = c(n, t.startContainer, t.startOffset))
                }
                this.similarClassRegExp && o(n, this.similarClassRegExp), this.isRemovable(n) && a(n)
            },
            applyToRange: function (t) {
                var n = t.getNodes([e.TEXT_NODE]);
                if (!n.length) try {
                    var r = this.createContainer(t.endContainer.ownerDocument);
                    t.surroundContents(r), this.selectNode(t, r);
                    return
                } catch (i) {}
                t.splitBoundaries(), n = t.getNodes([e.TEXT_NODE]);
                if (n.length) {
                    var s;
                    for (var o = 0, u = n.length; o < u; ++o) s = n[o], this.getAncestorWithClass(s) || this.applyToTextNode(s);
                    t.setStart(n[0], 0), s = n[n.length - 1], t.setEnd(s, s.length), this.normalize && this.postApply(n, t)
                }
            },
            undoToRange: function (t) {
                var n = t.getNodes([e.TEXT_NODE]),
                    r, i;
                if (n.length) t.splitBoundaries(), n = t.getNodes([e.TEXT_NODE]);
                else {
                    var s = t.endContainer.ownerDocument,
                        o = s.createTextNode(e.INVISIBLE_SPACE);
                    t.insertNode(o), t.selectNode(o), n = [o]
                }
                for (var u = 0, a = n.length; u < a; ++u) r = n[u], i = this.getAncestorWithClass(r), i && this.undoToTextNode(r, t, i);
                a == 1 ? this.selectNode(t, n[0]) : (t.setStart(n[0], 0), r = n[n.length - 1], t.setEnd(r, r.length), this.normalize && this.postApply(n, t))
            },
            selectNode: function (t, n) {
                var r = n.nodeType === e.ELEMENT_NODE,
                    i = "canHaveHTML" in n ? n.canHaveHTML : !0,
                    s = r ? n.innerHTML : n.data,
                    o = s === "" || s === e.INVISIBLE_SPACE;
                if (o && r && i) try {
                    n.innerHTML = e.INVISIBLE_SPACE
                } catch (u) {}
                t.selectNodeContents(n), o && r ? t.collapse(!1) : o && (t.setStartAfter(n), t.setEndAfter(n))
            },
            getTextSelectedByRange: function (e, t) {
                var n = t.cloneRange();
                n.selectNodeContents(e);
                var r = n.intersection(t),
                    i = r ? r.toString() : "";
                return n.detach(), i
            },
            isAppliedToRange: function (t) {
                var n = [],
                    r, i = t.getNodes([e.TEXT_NODE]);
                if (!i.length) return r = this.getAncestorWithClass(t.startContainer), r ? [r] : !1;
                for (var s = 0, o = i.length, u; s < o; ++s) {
                    u = this.getTextSelectedByRange(i[s], t), r = this.getAncestorWithClass(i[s]);
                    if (u != "" && !r) return !1;
                    n.push(r)
                }
                return n
            },
            toggleRange: function (e) {
                this.isAppliedToRange(e) ? this.undoToRange(e) : this.applyToRange(e)
            }
        }, e.selection.HTMLApplier = p
    }(wysihtml5, rangy), wysihtml5.Commands = Base.extend({
            constructor: function (e) {
                this.editor = e, this.composer = e.composer, this.doc = this.composer.doc
            },
            support: function (e) {
                return wysihtml5.browser.supportsCommand(this.doc, e)
            },
            exec: function (e, t) {
                var n = wysihtml5.commands[e],
                    r = wysihtml5.lang.array(arguments).get(),
                    i = n && n.exec,
                    s = null;
                this.editor.fire("beforecommand:composer");
                if (i) r.unshift(this.composer), s = i.apply(n, r);
                else try {
                    s = this.doc.execCommand(e, !1, t)
                } catch (o) {}
                return this.editor.fire("aftercommand:composer"), s
            },
            state: function (e, t) {
                var n = wysihtml5.commands[e],
                    r = wysihtml5.lang.array(arguments).get(),
                    i = n && n.state;
                if (i) return r.unshift(this.composer), i.apply(n, r);
                try {
                    return this.doc.queryCommandState(e)
                } catch (s) {
                    return !1
                }
            }
        }), wysihtml5.commands.bold = {
        exec: function (e, t) {
            return wysihtml5.commands.formatInline.exec(e, t, "b")
        },
        state: function (e, t) {
            return wysihtml5.commands.formatInline.state(e, t, "b")
        }
    },
    function (e) {
        function i(e, t) {
            var n = t.length,
                i = 0,
                s, o, u;
            for (; i < n; i++) s = t[i], o = r.getParentElement(s, {
                    nodeName: "code"
                }), u = r.getTextContent(s), u.match(r.autoLink.URL_REG_EXP) && !o ? o = r.renameElement(s, "code") : r.replaceWithChildNodes(s)
        }

        function s(i, s) {
            var o = i.doc,
                u = "_wysihtml5-temp-" + +(new Date),
                a = /non-matching-class/g,
                f = 0,
                l, c, h, p, d, v, m, g, y;
            e.commands.formatInline.exec(i, t, n, u, a), c = o.querySelectorAll(n + "." + u), l = c.length;
            for (; f < l; f++) {
                h = c[f], h.removeAttribute("class");
                for (y in s) h.setAttribute(y, s[y])
            }
            v = h, l === 1 && (m = r.getTextContent(h), p = !! h.querySelector("*"), d = m === "" || m === e.INVISIBLE_SPACE, !p && d && (r.setTextContent(h, s.text || h.href), g = o.createTextNode(" "), i.selection.setAfter(h), r.insert(g).after(h), v = g)), i.selection.setAfter(v)
        }
        var t, n = "A",
            r = e.dom;
        e.commands.createLink = {
            exec: function (e, t, n) {
                var r = this.state(e, t);
                r ? e.selection.executeAndRestore(function () {
                    i(e, r)
                }) : (n = typeof n == "object" ? n : {
                        href: n
                    }, s(e, n))
            },
            state: function (t, n) {
                return e.commands.formatInline.state(t, n, "A")
            }
        }
    }(wysihtml5),
    function (e) {
        var t = /wysiwyg-font-size-[0-9a-z\-]+/g;
        e.commands.fontSize = {
            exec: function (n, r, i) {
                return e.commands.formatInline.exec(n, r, "span", "wysiwyg-font-size-" + i, t)
            },
            state: function (n, r, i) {
                return e.commands.formatInline.state(n, r, "span", "wysiwyg-font-size-" + i, t)
            }
        }
    }(wysihtml5),
    function (e) {
        var t = /wysiwyg-color-[0-9a-z]+/g;
        e.commands.foreColor = {
            exec: function (n, r, i) {
                return e.commands.formatInline.exec(n, r, "span", "wysiwyg-color-" + i, t)
            },
            state: function (n, r, i) {
                return e.commands.formatInline.state(n, r, "span", "wysiwyg-color-" + i, t)
            }
        }
    }(wysihtml5),
    function (e) {
        function r(e, t, n) {
            e.className ? (i(e, n), e.className += " " + t) : e.className = t
        }

        function i(e, t) {
            e.className = e.className.replace(t, "")
        }

        function s(t) {
            return t.nodeType === e.TEXT_NODE && !e.lang.string(t.data).trim()
        }

        function o(e) {
            var t = e.previousSibling;
            while (t && s(t)) t = t.previousSibling;
            return t
        }

        function u(e) {
            var t = e.nextSibling;
            while (t && s(t)) t = t.nextSibling;
            return t
        }

        function a(e) {
            var t = e.ownerDocument,
                n = u(e),
                r = o(e);
            n && !h(n) && e.parentNode.insertBefore(t.createElement("br"), n), r && !h(r) && e.parentNode.insertBefore(t.createElement("br"), e)
        }

        function f(e) {
            var t = u(e),
                n = o(e);
            t && c(t) && t.parentNode.removeChild(t), n && c(n) && n.parentNode.removeChild(n)
        }

        function l(e) {
            var t = e.lastChild;
            t && c(t) && t.parentNode.removeChild(t)
        }

        function c(e) {
            return e.nodeName === "BR"
        }

        function h(e) {
            return c(e) ? !0 : t.getStyle("display").from(e) === "block" ? !0 : !1
        }

        function p(n, r, i, s) {
            if (s) var o = t.observe(n, "DOMNodeInserted", function (n) {
                var r = n.target,
                    i;
                if (r.nodeType !== e.ELEMENT_NODE) return;
                i = t.getStyle("display").from(r), i.substr(0, 6) !== "inline" && (r.className += " " + s)
            });
            n.execCommand(r, !1, i), o && o.stop()
        }

        function d(t, n) {
            t.selection.selectLine(), t.selection.surround(n), f(n), l(n), t.selection.selectNode(n, e.browser.displaysCaretInEmptyContentEditableCorrectly())
        }

        function v(t) {
            return !!e.lang.string(t.className).trim()
        }
        var t = e.dom,
            n = ["H1", "H2", "H3", "H4", "H5", "H6", "P", "BLOCKQUOTE", "DIV"];
        e.commands.formatBlock = {
            exec: function (e, t, n, r, i) {
                var s = this.exec2(e, t, n, r, i);
                return s || (s = this.exec2(e, t, "pre", r, i)), s
            },
            exec2: function (s, o, u, f, l) {
                var c = s.doc,
                    h = this.state(s, o, u, f, l),
                    m = s.config.useLineBreaks,
                    g = m ? "DIV" : "P",
                    y;
                u = typeof u == "string" ? u.toUpperCase() : u;
                if (h) {
                    s.selection.executeAndRestoreSimple(function () {
                        l && i(h, l);
                        var e = v(h);
                        !e && (m || u === "P") ? (a(h), t.replaceWithChildNodes(h)) : t.renameElement(h, u === "P" ? "DIV" : g)
                    });
                    return
                }
                if (u === null || e.lang.array(n).contains(u)) {
                    y = s.selection.getSelectedNode(), h = t.getParentElement(y, {
                            nodeName: n
                        });
                    if (h) {
                        s.selection.executeAndRestore(function () {
                            u && (h = t.renameElement(h, u)), f && r(h, f, l)
                        });
                        return
                    }
                }
                if (s.commands.support(o)) {
                    p(c, o, u || g, f);
                    return
                }
                h = c.createElement(u || g), f && (h.className = f), d(s, h)
            },
            state: function (e, n, r, i, s) {
                r = typeof r == "string" ? r.toUpperCase() : r;
                var o = e.selection.getSelectedNode();
                return t.getParentElement(o, {
                        nodeName: r,
                        className: i,
                        classRegExp: s
                    })
            }
        }
    }(wysihtml5),
    function (e) {
        function r(e) {
            var n = t[e];
            return n ? [e.toLowerCase(), n.toLowerCase()] : [e.toLowerCase()]
        }

        function i(t, i, s) {
            var o = t + ":" + i;
            return n[o] || (n[o] = new e.selection.HTMLApplier(r(t), i, s, !0)), n[o]
        }
        var t = {
            strong: "b",
            em: "i",
            b: "strong",
            i: "em"
        }, n = {};
        e.commands.formatInline = {
            exec: function (e, t, n, r, s) {
                var o = e.selection.getRange();
                if (!o) return !1;
                i(n, r, s).toggleRange(o), e.selection.setSelection(o)
            },
            state: function (n, r, s, o, u) {
                var a = n.doc,
                    f = t[s] || s,
                    l;
                return !e.dom.hasElementWithTagName(a, s) && !e.dom.hasElementWithTagName(a, f) ? !1 : o && !e.dom.hasElementWithClassName(a, o) ? !1 : (l = n.selection.getRange(), l ? i(s, o, u).isAppliedToRange(l) : !1)
            }
        }
    }(wysihtml5), wysihtml5.commands.insertHTML = {
        exec: function (e, t, n) {
            e.commands.support(t) ? e.doc.execCommand(t, !1, n) : e.selection.insertHTML(n)
        },
        state: function () {
            return !1
        }
    },
    function (e) {
        var t = "IMG";
        e.commands.insertImage = {
            exec: function (n, r, i) {
                i = typeof i == "object" ? i : {
                    src: i
                };
                var s = n.doc,
                    o = this.state(n),
                    u, a;
                if (o) {
                    n.selection.setBefore(o), a = o.parentNode, a.removeChild(o), e.dom.removeEmptyTextNodes(a), a.nodeName === "A" && !a.firstChild && (n.selection.setAfter(a), a.parentNode.removeChild(a)), e.quirks.redraw(n.element);
                    return
                }
                o = s.createElement(t);
                for (var f in i) o.setAttribute(f === "className" ? "class" : f, i[f]);
                n.selection.insertNode(o), e.browser.hasProblemsSettingCaretAfterImg() ? (u = s.createTextNode(e.INVISIBLE_SPACE), n.selection.insertNode(u), n.selection.setAfter(u)) : n.selection.setAfter(o)
            },
            state: function (n) {
                var r = n.doc,
                    i, s, o;
                return e.dom.hasElementWithTagName(r, t) ? (i = n.selection.getSelectedNode(), i ? i.nodeName === t ? i : i.nodeType !== e.ELEMENT_NODE ? !1 : (s = n.selection.getText(), s = e.lang.string(s).trim(), s ? !1 : (o = n.selection.getNodes(e.ELEMENT_NODE, function (e) {
                                    return e.nodeName === "IMG"
                                }), o.length !== 1 ? !1 : o[0])) : !1) : !1
            }
        }
    }(wysihtml5),
    function (e) {
        var t = "<br>" + (e.browser.needsSpaceAfterLineBreak() ? " " : "");
        e.commands.insertLineBreak = {
            exec: function (n, r) {
                n.commands.support(r) ? (n.doc.execCommand(r, !1, null), e.browser.autoScrollsToCaret() || n.selection.scrollIntoView()) : n.commands.exec("insertHTML", t)
            },
            state: function () {
                return !1
            }
        }
    }(wysihtml5), wysihtml5.commands.insertOrderedList = {
        exec: function (e, t) {
            var n = e.doc,
                r = e.selection.getSelectedNode(),
                i = wysihtml5.dom.getParentElement(r, {
                        nodeName: "OL"
                    }),
                s = wysihtml5.dom.getParentElement(r, {
                        nodeName: "UL"
                    }),
                o = "_wysihtml5-temp-" + (new Date).getTime(),
                u, a;
            if (!i && !s && e.commands.support(t)) {
                n.execCommand(t, !1, null);
                return
            }
            i ? e.selection.executeAndRestore(function () {
                wysihtml5.dom.resolveList(i, e.config.useLineBreaks)
            }) : s ? e.selection.executeAndRestore(function () {
                wysihtml5.dom.renameElement(s, "ol")
            }) : (e.commands.exec("formatBlock", "div", o), a = n.querySelector("." + o), u = a.innerHTML === "" || a.innerHTML === wysihtml5.INVISIBLE_SPACE || a.innerHTML === "<br>", e.selection.executeAndRestore(function () {
                        i = wysihtml5.dom.convertToList(a, "ol")
                    }), u && e.selection.selectNode(i.querySelector("li"), !0))
        },
        state: function (e) {
            var t = e.selection.getSelectedNode();
            return wysihtml5.dom.getParentElement(t, {
                    nodeName: "OL"
                })
        }
    }, wysihtml5.commands.insertUnorderedList = {
        exec: function (e, t) {
            var n = e.doc,
                r = e.selection.getSelectedNode(),
                i = wysihtml5.dom.getParentElement(r, {
                        nodeName: "UL"
                    }),
                s = wysihtml5.dom.getParentElement(r, {
                        nodeName: "OL"
                    }),
                o = "_wysihtml5-temp-" + (new Date).getTime(),
                u, a;
            if (!i && !s && e.commands.support(t)) {
                n.execCommand(t, !1, null);
                return
            }
            i ? e.selection.executeAndRestore(function () {
                wysihtml5.dom.resolveList(i, e.config.useLineBreaks)
            }) : s ? e.selection.executeAndRestore(function () {
                wysihtml5.dom.renameElement(s, "ul")
            }) : (e.commands.exec("formatBlock", "div", o), a = n.querySelector("." + o), u = a.innerHTML === "" || a.innerHTML === wysihtml5.INVISIBLE_SPACE || a.innerHTML === "<br>", e.selection.executeAndRestore(function () {
                        i = wysihtml5.dom.convertToList(a, "ul")
                    }), u && e.selection.selectNode(i.querySelector("li"), !0))
        },
        state: function (e) {
            var t = e.selection.getSelectedNode();
            return wysihtml5.dom.getParentElement(t, {
                    nodeName: "UL"
                })
        }
    }, wysihtml5.commands.italic = {
        exec: function (e, t) {
            return wysihtml5.commands.formatInline.exec(e, t, "i")
        },
        state: function (e, t) {
            return wysihtml5.commands.formatInline.state(e, t, "i")
        }
    },
    function (e) {
        var t = "wysiwyg-text-align-center",
            n = /wysiwyg-text-align-[0-9a-z]+/g;
        e.commands.justifyCenter = {
            exec: function (r, i) {
                return e.commands.formatBlock.exec(r, "formatBlock", null, t, n)
            },
            state: function (r, i) {
                return e.commands.formatBlock.state(r, "formatBlock", null, t, n)
            }
        }
    }(wysihtml5),
    function (e) {
        var t = "wysiwyg-text-align-left",
            n = /wysiwyg-text-align-[0-9a-z]+/g;
        e.commands.justifyLeft = {
            exec: function (r, i) {
                return e.commands.formatBlock.exec(r, "formatBlock", null, t, n)
            },
            state: function (r, i) {
                return e.commands.formatBlock.state(r, "formatBlock", null, t, n)
            }
        }
    }(wysihtml5),
    function (e) {
        var t = "wysiwyg-text-align-right",
            n = /wysiwyg-text-align-[0-9a-z]+/g;
        e.commands.justifyRight = {
            exec: function (r, i) {
                return e.commands.formatBlock.exec(r, "formatBlock", null, t, n)
            },
            state: function (r, i) {
                return e.commands.formatBlock.state(r, "formatBlock", null, t, n)
            }
        }
    }(wysihtml5),
    function (e) {
        var t = "wysiwyg-text-align-justify",
            n = /wysiwyg-text-align-[0-9a-z]+/g;
        e.commands.justifyFull = {
            exec: function (r, i) {
                return e.commands.formatBlock.exec(r, "formatBlock", null, t, n)
            },
            state: function (r, i) {
                return e.commands.formatBlock.state(r, "formatBlock", null, t, n)
            }
        }
    }(wysihtml5), wysihtml5.commands.redo = {
        exec: function (e) {
            return e.undoManager.redo()
        },
        state: function (e) {
            return !1
        }
    }, wysihtml5.commands.underline = {
        exec: function (e, t) {
            return wysihtml5.commands.formatInline.exec(e, t, "u")
        },
        state: function (e, t) {
            return wysihtml5.commands.formatInline.state(e, t, "u")
        }
    }, wysihtml5.commands.undo = {
        exec: function (e) {
            return e.undoManager.undo()
        },
        state: function (e) {
            return !1
        }
    },
    function (e) {
        function c(e) {
            var t;
            while (t = e.querySelector("._wysihtml5-temp")) t.parentNode.removeChild(t)
        }
        var t = 90,
            n = 89,
            r = 8,
            i = 46,
            s = 25,
            o = "data-wysihtml5-selection-node",
            u = "data-wysihtml5-selection-offset",
            a = '<span id="_wysihtml5-undo" class="_wysihtml5-temp">' + e.INVISIBLE_SPACE + "</span>",
            f = '<span id="_wysihtml5-redo" class="_wysihtml5-temp">' + e.INVISIBLE_SPACE + "</span>",
            l = e.dom;
        e.UndoManager = e.lang.Dispatcher.extend({
                constructor: function (e) {
                    this.editor = e, this.composer = e.composer, this.element = this.composer.element, this.position = 0, this.historyStr = [], this.historyDom = [], this.transact(), this._observe()
                },
                _observe: function () {
                    var s = this,
                        o = this.composer.sandbox.getDocument(),
                        u;
                    l.observe(this.element, "keydown", function (e) {
                        if (e.altKey || !e.ctrlKey && !e.metaKey) return;
                        var r = e.keyCode,
                            i = r === t && !e.shiftKey,
                            o = r === t && e.shiftKey || r === n;
                        i ? (s.undo(), e.preventDefault()) : o && (s.redo(), e.preventDefault())
                    }), l.observe(this.element, "keydown", function (e) {
                        var t = e.keyCode;
                        if (t === u) return;
                        u = t, (t === r || t === i) && s.transact()
                    });
                    if (e.browser.hasUndoInContextMenu()) {
                        var h, p, d = function () {
                                c(o), clearInterval(h)
                            };
                        l.observe(this.element, "contextmenu", function () {
                            d(), s.composer.selection.executeAndRestoreSimple(function () {
                                s.element.lastChild && s.composer.selection.setAfter(s.element.lastChild), o.execCommand("insertHTML", !1, a), o.execCommand("insertHTML", !1, f), o.execCommand("undo", !1, null)
                            }), h = setInterval(function () {
                                o.getElementById("_wysihtml5-redo") ? (d(), s.redo()) : o.getElementById("_wysihtml5-undo") || (d(), s.undo())
                            }, 400), p || (p = !0, l.observe(document, "mousedown", d), l.observe(o, ["mousedown", "paste", "cut", "copy"], d))
                        })
                    }
                    this.editor.on("newword:composer", function () {
                        s.transact()
                    }).on("beforecommand:composer", function () {
                        s.transact()
                    })
                },
                transact: function () {
                    var t = this.historyStr[this.position - 1],
                        n = this.composer.getValue();
                    if (n === t) return;
                    var r = this.historyStr.length = this.historyDom.length = this.position;
                    r > s && (this.historyStr.shift(), this.historyDom.shift(), this.position--), this.position++;
                    var i = this.composer.selection.getRange(),
                        a = i.startContainer || this.element,
                        f = i.startOffset || 0,
                        l, c;
                    a.nodeType === e.ELEMENT_NODE ? l = a : (l = a.parentNode, c = this.getChildNodeIndex(l, a)), l.setAttribute(u, f), typeof c != "undefined" && l.setAttribute(o, c);
                    var h = this.element.cloneNode( !! n);
                    this.historyDom.push(h), this.historyStr.push(n), l.removeAttribute(u), l.removeAttribute(o)
                },
                undo: function () {
                    this.transact();
                    if (!this.undoPossible()) return;
                    this.set(this.historyDom[--this.position - 1]), this.editor.fire("undo:composer")
                },
                redo: function () {
                    if (!this.redoPossible()) return;
                    this.set(this.historyDom[++this.position - 1]), this.editor.fire("redo:composer")
                },
                undoPossible: function () {
                    return this.position > 1
                },
                redoPossible: function () {
                    return this.position < this.historyStr.length
                },
                set: function (e) {
                    this.element.innerHTML = "";
                    var t = 0,
                        n = e.childNodes,
                        r = e.childNodes.length;
                    for (; t < r; t++) this.element.appendChild(n[t].cloneNode(!0));
                    var i, s, a;
                    e.hasAttribute(u) ? (i = e.getAttribute(u), a = e.getAttribute(o), s = this.element) : (s = this.element.querySelector("[" + u + "]") || this.element, i = s.getAttribute(u), a = s.getAttribute(o), s.removeAttribute(u), s.removeAttribute(o)), a !== null && (s = this.getChildNodeByIndex(s, +a)), this.composer.selection.set(s, i)
                },
                getChildNodeIndex: function (e, t) {
                    var n = 0,
                        r = e.childNodes,
                        i = r.length;
                    for (; n < i; n++)
                        if (r[n] === t) return n
                },
                getChildNodeByIndex: function (e, t) {
                    return e.childNodes[t]
                }
            })
    }(wysihtml5), wysihtml5.views.View = Base.extend({
            constructor: function (e, t, n) {
                this.parent = e, this.element = t, this.config = n, this._observeViewChange()
            },
            _observeViewChange: function () {
                var e = this;
                this.parent.on("beforeload", function () {
                    e.parent.on("change_view", function (t) {
                        t === e.name ? (e.parent.currentView = e, e.show(), setTimeout(function () {
                                    e.focus()
                                }, 0)) : e.hide()
                    })
                })
            },
            focus: function () {
                if (this.element.ownerDocument.querySelector(":focus") === this.element) return;
                try {
                    this.element.focus()
                } catch (e) {}
            },
            hide: function () {
                this.element.style.display = "none"
            },
            show: function () {
                this.element.style.display = ""
            },
            disable: function () {
                this.element.setAttribute("disabled", "disabled")
            },
            enable: function () {
                this.element.removeAttribute("disabled")
            }
        }),
    function (e) {
        var t = e.dom,
            n = e.browser;
        e.views.Composer = e.views.View.extend({
                name: "composer",
                CARET_HACK: "<br>",
                constructor: function (e, t, n) {
                    this.base(e, t, n), this.textarea = this.parent.textarea, this._initSandbox()
                },
                clear: function () {
                    this.element.innerHTML = n.displaysCaretInEmptyContentEditableCorrectly() ? "" : this.CARET_HACK
                },
                getValue: function (t) {
                    var n = this.isEmpty() ? "" : e.quirks.getCorrectInnerHTML(this.element);
                    return t && (n = this.parent.parse(n)), n
                },
                setValue: function (e, t) {
                    t && (e = this.parent.parse(e));
                    try {
                        this.element.innerHTML = e
                    } catch (n) {
                        this.element.innerText = e
                    }
                },
                show: function () {
                    this.iframe.style.display = this._displayStyle || "", this.textarea.element.disabled || (this.disable(), this.enable())
                },
                hide: function () {
                    this._displayStyle = t.getStyle("display").from(this.iframe), this._displayStyle === "none" && (this._displayStyle = null), this.iframe.style.display = "none"
                },
                disable: function () {
                    this.parent.fire("disable:composer"), this.element.removeAttribute("contentEditable")
                },
                enable: function () {
                    this.parent.fire("enable:composer"), this.element.setAttribute("contentEditable", "true")
                },
                focus: function (t) {
                    e.browser.doesAsyncFocus() && this.hasPlaceholderSet() && this.clear(), this.base();
                    var n = this.element.lastChild;
                    t && n && (n.nodeName === "BR" ? this.selection.setBefore(this.element.lastChild) : this.selection.setAfter(this.element.lastChild))
                },
                getTextContent: function () {
                    return t.getTextContent(this.element)
                },
                hasPlaceholderSet: function () {
                    return this.getTextContent() == this.textarea.element.getAttribute("placeholder") && this.placeholderSet
                },
                isEmpty: function () {
                    var e = this.element.innerHTML.toLowerCase();
                    return e === "" || e === "<br>" || e === "<p></p>" || e === "<p><br></p>" || this.hasPlaceholderSet()
                },
                _initSandbox: function () {
                    var e = this;
                    this.sandbox = new t.Sandbox(function () {
                        e._create()
                    }, {
                        stylesheets: this.config.stylesheets
                    }), this.iframe = this.sandbox.getIframe();
                    var n = this.textarea.element;
                    t.insert(this.iframe).after(n);
                    if (n.form) {
                        var r = document.createElement("input");
                        r.type = "hidden", r.name = "_wysihtml5_mode", r.value = 1, t.insert(r).after(n)
                    }
                },
                _create: function () {
                    var r = this;
                    this.doc = this.sandbox.getDocument(), this.element = this.doc.body, this.textarea = this.parent.textarea, this.element.innerHTML = this.textarea.getValue(!0), this.selection = new e.Selection(this.parent), this.commands = new e.Commands(this.parent), t.copyAttributes(["className", "spellcheck", "title", "lang", "dir", "accessKey"]).from(this.textarea.element).to(this.element), t.addClass(this.element, this.config.composerClassName), this.config.style && this.style(), this.observe();
                    var i = this.config.name;
                    i && (t.addClass(this.element, i), t.addClass(this.iframe, i)), this.enable(), this.textarea.element.disabled && this.disable();
                    var s = typeof this.config.placeholder == "string" ? this.config.placeholder : this.textarea.element.getAttribute("placeholder");
                    s && t.simulatePlaceholder(this.parent, this, s), this.commands.exec("styleWithCSS", !1), this._initAutoLinking(), this._initObjectResizing(), this._initUndoManager(), this._initLineBreaking(), (this.textarea.element.hasAttribute("autofocus") || document.querySelector(":focus") == this.textarea.element) && !n.isIos() && setTimeout(function () {
                        r.focus(!0)
                    }, 100), n.clearsContentEditableCorrectly() || e.quirks.ensureProperClearing(this), this.initSync && this.config.sync && this.initSync(), this.textarea.hide(), this.parent.fire("beforeload").fire("load")
                },
                _initAutoLinking: function () {
                    var r = this,
                        i = n.canDisableAutoLinking(),
                        s = n.doesAutoLinkingInContentEditable();
                    i && this.commands.exec("autoUrlDetect", !1);
                    if (!this.config.autoLink) return;
                    if (!s || s && i) this.parent.on("newword:composer", function () {
                        t.getTextContent(r.element).match(t.autoLink.URL_REG_EXP) && r.selection.executeAndRestore(function (e, n) {
                            t.autoLink(n.parentNode)
                        })
                    }), t.observe(this.element, "blur", function () {
                        t.autoLink(r.element)
                    });
                    var o = this.sandbox.getDocument().getElementsByTagName("a"),
                        u = t.autoLink.URL_REG_EXP,
                        a = function (n) {
                            var r = e.lang.string(t.getTextContent(n)).trim();
                            return r.substr(0, 4) === "www." && (r = "http://" + r), r
                        };
                    t.observe(this.element, "keydown", function (e) {
                        if (!o.length) return;
                        var n = r.selection.getSelectedNode(e.target.ownerDocument),
                            i = t.getParentElement(n, {
                                    nodeName: "A"
                                }, 4),
                            s;
                        if (!i) return;
                        s = a(i), setTimeout(function () {
                            var e = a(i);
                            if (e === s) return;
                            e.match(u) && i.setAttribute("href", e)
                        }, 0)
                    })
                },
                _initObjectResizing: function () {
                    this.commands.exec("enableObjectResizing", !0);
                    if (n.supportsEvent("resizeend")) {
                        var r = ["width", "height"],
                            i = r.length,
                            s = this.element;
                        t.observe(s, "resizeend", function (t) {
                            var n = t.target || t.srcElement,
                                o = n.style,
                                u = 0,
                                a;
                            if (n.nodeName !== "IMG") return;
                            for (; u < i; u++) a = r[u], o[a] && (n.setAttribute(a, parseInt(o[a], 10)), o[a] = "");
                            e.quirks.redraw(s)
                        })
                    }
                },
                _initUndoManager: function () {
                    this.undoManager = new e.UndoManager(this.parent)
                },
                _initLineBreaking: function () {
                    function o(e) {
                        var n = t.getParentElement(e, {
                                nodeName: ["P", "DIV"]
                            }, 2);
                        n && r.selection.executeAndRestore(function () {
                            r.config.useLineBreaks ? t.replaceWithChildNodes(n) : n.nodeName !== "P" && t.renameElement(n, "p")
                        })
                    }
                    var r = this,
                        i = ["LI", "P", "H1", "H2", "H3", "H4", "H5", "H6"],
                        s = ["UL", "OL", "MENU"];
                    this.config.useLineBreaks || t.observe(this.element, ["focus", "keydown"], function () {
                        if (r.isEmpty()) {
                            var e = r.doc.createElement("P");
                            r.element.innerHTML = "", r.element.appendChild(e), n.displaysCaretInEmptyContentEditableCorrectly() ? r.selection.selectNode(e, !0) : (e.innerHTML = "<br>", r.selection.setBefore(e.firstChild))
                        }
                    }), t.observe(this.doc, "keydown", function (n) {
                        var u = n.keyCode;
                        if (n.shiftKey) return;
                        if (u !== e.ENTER_KEY && u !== e.BACKSPACE_KEY) return;
                        var a = t.getParentElement(r.selection.getSelectedNode(), {
                                nodeName: i
                            }, 4);
                        if (a) {
                            setTimeout(function () {
                                var n = r.selection.getSelectedNode(),
                                    i;
                                if (a.nodeName === "LI") {
                                    if (!n) return;
                                    i = t.getParentElement(n, {
                                            nodeName: s
                                        }, 2), i || o(n)
                                }
                                u === e.ENTER_KEY && a.nodeName.match(/^H[1-6]$/) && o(n)
                            }, 0);
                            return
                        }
                        r.config.useLineBreaks && u === e.ENTER_KEY && !e.browser.insertsLineBreaksOnReturn() && (r.commands.exec("insertLineBreak"), n.preventDefault())
                    })
                }
            })
    }(wysihtml5),
    function (e) {
        var t = e.dom,
            n = document,
            r = window,
            i = n.createElement("div"),
            s = ["background-color", "color", "cursor", "font-family", "font-size", "font-style", "font-variant", "font-weight", "line-height", "letter-spacing", "text-align", "text-decoration", "text-indent", "text-rendering", "word-break", "word-wrap", "word-spacing"],
            o = ["background-color", "border-collapse", "border-bottom-color", "border-bottom-style", "border-bottom-width", "border-left-color", "border-left-style", "border-left-width", "border-right-color", "border-right-style", "border-right-width", "border-top-color", "border-top-style", "border-top-width", "clear", "display", "float", "margin-bottom", "margin-left", "margin-right", "margin-top", "outline-color", "outline-offset", "outline-width", "outline-style", "padding-left", "padding-right", "padding-top", "padding-bottom", "position", "top", "left", "right", "bottom", "z-index", "vertical-align", "text-align", "-webkit-box-sizing", "-moz-box-sizing", "-ms-box-sizing", "box-sizing", "-webkit-box-shadow", "-moz-box-shadow", "-ms-box-shadow", "box-shadow", "-webkit-border-top-right-radius", "-moz-border-radius-topright", "border-top-right-radius", "-webkit-border-bottom-right-radius", "-moz-border-radius-bottomright", "border-bottom-right-radius", "-webkit-border-bottom-left-radius", "-moz-border-radius-bottomleft", "border-bottom-left-radius", "-webkit-border-top-left-radius", "-moz-border-radius-topleft", "border-top-left-radius", "width", "height"],
            u = ["html                 { height: 100%; }", "body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }", "body > p:first-child { margin-top: 0; }", "._wysihtml5-temp     { display: none; }", e.browser.isGecko ? "body.placeholder { color: graytext !important; }" : "body.placeholder { color: #a9a9a9 !important; }", "img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],
            a = function (e) {
                if (e.setActive) try {
                    e.setActive()
                } catch (i) {} else {
                    var s = e.style,
                        o = n.documentElement.scrollTop || n.body.scrollTop,
                        u = n.documentElement.scrollLeft || n.body.scrollLeft,
                        a = {
                            position: s.position,
                            top: s.top,
                            left: s.left,
                            WebkitUserSelect: s.WebkitUserSelect
                        };
                    t.setStyles({
                            position: "absolute",
                            top: "-99999px",
                            left: "-99999px",
                            WebkitUserSelect: "none"
                        }).on(e), e.focus(), t.setStyles(a).on(e), r.scrollTo && r.scrollTo(u, o)
                }
            };
        e.views.Composer.prototype.style = function () {
            var r = this,
                f = n.querySelector(":focus"),
                l = this.textarea.element,
                c = l.hasAttribute("placeholder"),
                h = c && l.getAttribute("placeholder"),
                p = l.style.display,
                d = l.disabled,
                v;
            this.focusStylesHost = i.cloneNode(!1), this.blurStylesHost = i.cloneNode(!1), this.disabledStylesHost = i.cloneNode(!1), c && l.removeAttribute("placeholder"), l === f && l.blur(), l.disabled = !1, l.style.display = v = "none";
            if (l.getAttribute("rows") && t.getStyle("height").from(l) === "auto" || l.getAttribute("cols") && t.getStyle("width").from(l) === "auto") l.style.display = v = p;
            t.copyStyles(o).from(l).to(this.iframe).andTo(this.blurStylesHost), t.copyStyles(s).from(l).to(this.element).andTo(this.blurStylesHost), t.insertCSS(u).into(this.element.ownerDocument), l.disabled = !0, t.copyStyles(o).from(l).to(this.disabledStylesHost), t.copyStyles(s).from(l).to(this.disabledStylesHost), l.disabled = d, l.style.display = p, a(l), l.style.display = v, t.copyStyles(o).from(l).to(this.focusStylesHost), t.copyStyles(s).from(l).to(this.focusStylesHost), l.style.display = p, t.copyStyles(["display"]).from(l).to(this.iframe);
            var m = e.lang.array(o).without(["display"]);
            return f ? f.focus() : l.blur(), c && l.setAttribute("placeholder", h), this.parent.on("focus:composer", function () {
                t.copyStyles(m).from(r.focusStylesHost).to(r.iframe), t.copyStyles(s).from(r.focusStylesHost).to(r.element)
            }), this.parent.on("blur:composer", function () {
                t.copyStyles(m).from(r.blurStylesHost).to(r.iframe), t.copyStyles(s).from(r.blurStylesHost).to(r.element)
            }), this.parent.observe("disable:composer", function () {
                t.copyStyles(m).from(r.disabledStylesHost).to(r.iframe), t.copyStyles(s).from(r.disabledStylesHost).to(r.element)
            }), this.parent.observe("enable:composer", function () {
                t.copyStyles(m).from(r.blurStylesHost).to(r.iframe), t.copyStyles(s).from(r.blurStylesHost).to(r.element)
            }), this
        }
    }(wysihtml5),
    function (e) {
        var t = e.dom,
            n = e.browser,
            r = {
                66: "bold",
                73: "italic",
                85: "underline"
            };
        e.views.Composer.prototype.observe = function () {
            var i = this,
                s = this.getValue(),
                o = this.sandbox.getIframe(),
                u = this.element,
                a = n.supportsEventsInIframeCorrectly() ? u : this.sandbox.getWindow(),
                f = ["drop", "paste"];
            t.observe(o, "DOMNodeRemoved", function () {
                clearInterval(l), i.parent.fire("destroy:composer")
            });
            var l = setInterval(function () {
                t.contains(document.documentElement, o) || (clearInterval(l), i.parent.fire("destroy:composer"))
            }, 250);
            t.observe(a, "focus", function () {
                i.parent.fire("focus").fire("focus:composer"), setTimeout(function () {
                    s = i.getValue()
                }, 0)
            }), t.observe(a, "blur", function () {
                s !== i.getValue() && i.parent.fire("change").fire("change:composer"), i.parent.fire("blur").fire("blur:composer")
            }), t.observe(u, "dragenter", function () {
                i.parent.fire("unset_placeholder")
            }), t.observe(u, f, function () {
                setTimeout(function () {
                    i.parent.fire("paste").fire("paste:composer")
                }, 0)
            }), t.observe(u, "keyup", function (t) {
                var n = t.keyCode;
                (n === e.SPACE_KEY || n === e.ENTER_KEY) && i.parent.fire("newword:composer")
            }), this.parent.on("paste:composer", function () {
                setTimeout(function () {
                    i.parent.fire("newword:composer")
                }, 0)
            }), n.canSelectImagesInContentEditable() || t.observe(u, "mousedown", function (e) {
                var t = e.target;
                t.nodeName === "IMG" && (i.selection.selectNode(t), e.preventDefault())
            }), n.hasHistoryIssue() && n.supportsSelectionModify() && t.observe(u, "keydown", function (e) {
                if (!e.metaKey && !e.ctrlKey) return;
                var t = e.keyCode,
                    n = u.ownerDocument.defaultView,
                    r = n.getSelection();
                if (t === 37 || t === 39) t === 37 && (r.modify("extend", "left", "lineboundary"), e.shiftKey || r.collapseToStart()), t === 39 && (r.modify("extend", "right", "lineboundary"), e.shiftKey || r.collapseToEnd()), e.preventDefault()
            }), t.observe(u, "keydown", function (e) {
                var t = e.keyCode,
                    n = r[t];
                (e.ctrlKey || e.metaKey) && !e.altKey && n && (i.commands.exec(n), e.preventDefault())
            }), t.observe(u, "keydown", function (t) {
                var n = i.selection.getSelectedNode(!0),
                    r = t.keyCode,
                    s;
                n && n.nodeName === "IMG" && (r === e.BACKSPACE_KEY || r === e.DELETE_KEY) && (s = n.parentNode, s.removeChild(n), s.nodeName === "A" && !s.firstChild && s.parentNode.removeChild(s), setTimeout(function () {
                            e.quirks.redraw(u)
                        }, 0), t.preventDefault())
            }), n.hasIframeFocusIssue() && (t.observe(this.iframe, "focus", function () {
                        setTimeout(function () {
                            i.doc.querySelector(":focus") !== i.element && i.focus()
                        }, 0)
                    }), t.observe(this.element, "blur", function () {
                        setTimeout(function () {
                            i.selection.getSelection().removeAllRanges()
                        }, 0)
                    }));
            var c = {
                IMG: "Image: ",
                A: "Link: "
            };
            t.observe(u, "mouseover", function (e) {
                var t = e.target,
                    n = t.nodeName,
                    r;
                if (n !== "A" && n !== "IMG") return;
                var i = t.hasAttribute("title");
                i || (r = c[n] + (t.getAttribute("href") || t.getAttribute("src")), t.setAttribute("title", r))
            })
        }
    }(wysihtml5),
    function (e) {
        var t = 400;
        e.views.Synchronizer = Base.extend({
                constructor: function (e, t, n) {
                    this.editor = e, this.textarea = t, this.composer = n, this._observe()
                },
                fromComposerToTextarea: function (t) {
                    this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(), t)
                },
                fromTextareaToComposer: function (e) {
                    var t = this.textarea.getValue();
                    t ? this.composer.setValue(t, e) : (this.composer.clear(), this.editor.fire("set_placeholder"))
                },
                sync: function (e) {
                    this.editor.currentView.name === "textarea" ? this.fromTextareaToComposer(e) : this.fromComposerToTextarea(e)
                },
                _observe: function () {
                    var n, r = this,
                        i = this.textarea.element.form,
                        s = function () {
                            n = setInterval(function () {
                                r.fromComposerToTextarea()
                            }, t)
                        }, o = function () {
                            clearInterval(n), n = null
                        };
                    s(), i && (e.dom.observe(i, "submit", function () {
                                r.sync(!0)
                            }), e.dom.observe(i, "reset", function () {
                                setTimeout(function () {
                                    r.fromTextareaToComposer()
                                }, 0)
                            })), this.editor.on("change_view", function (e) {
                            e === "composer" && !n ? (r.fromTextareaToComposer(!0), s()) : e === "textarea" && (r.fromComposerToTextarea(!0), o())
                        }), this.editor.on("destroy:composer", o)
                }
            })
    }(wysihtml5), wysihtml5.views.Textarea = wysihtml5.views.View.extend({
            name: "textarea",
            constructor: function (e, t, n) {
                this.base(e, t, n), this._observe()
            },
            clear: function () {
                this.element.value = ""
            },
            getValue: function (e) {
                var t = this.isEmpty() ? "" : this.element.value;
                return e && (t = this.parent.parse(t)), t
            },
            setValue: function (e, t) {
                t && (e = this.parent.parse(e)), this.element.value = e
            },
            hasPlaceholderSet: function () {
                var e = wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),
                    t = this.element.getAttribute("placeholder") || null,
                    n = this.element.value,
                    r = !n;
                return e && r || n === t
            },
            isEmpty: function () {
                return !wysihtml5.lang.string(this.element.value).trim() || this.hasPlaceholderSet()
            },
            _observe: function () {
                var e = this.element,
                    t = this.parent,
                    n = {
                        focusin: "focus",
                        focusout: "blur"
                    }, r = wysihtml5.browser.supportsEvent("focusin") ? ["focusin", "focusout", "change"] : ["focus", "blur", "change"];
                t.on("beforeload", function () {
                    wysihtml5.dom.observe(e, r, function (e) {
                        var r = n[e.type] || e.type;
                        t.fire(r).fire(r + ":textarea")
                    }), wysihtml5.dom.observe(e, ["paste", "drop"], function () {
                        setTimeout(function () {
                            t.fire("paste").fire("paste:textarea")
                        }, 0)
                    })
                })
            }
        }),
    function (e) {
        var t = e.dom,
            n = "wysihtml5-command-dialog-opened",
            r = "input, select, textarea",
            i = "[data-wysihtml5-dialog-field]",
            s = "data-wysihtml5-dialog-field";
        e.toolbar.Dialog = e.lang.Dispatcher.extend({
                constructor: function (e, t) {
                    this.link = e, this.container = t
                },
                _observe: function () {
                    if (this._observed) return;
                    var i = this,
                        s = function (e) {
                            var t = i._serialize();
                            t == i.elementToChange ? i.fire("edit", t) : i.fire("save", t), i.hide(), e.preventDefault(), e.stopPropagation()
                        };
                    t.observe(i.link, "click", function () {
                        t.hasClass(i.link, n) && setTimeout(function () {
                            i.hide()
                        }, 0)
                    }), t.observe(this.container, "keydown", function (t) {
                        var n = t.keyCode;
                        n === e.ENTER_KEY && s(t), n === e.ESCAPE_KEY && (i.fire("cancel"), i.hide())
                    }), t.delegate(this.container, "[data-wysihtml5-dialog-action=save]", "click", s), t.delegate(this.container, "[data-wysihtml5-dialog-action=cancel]", "click", function (e) {
                        i.fire("cancel"), i.hide(), e.preventDefault(), e.stopPropagation()
                    });
                    var o = this.container.querySelectorAll(r),
                        u = 0,
                        a = o.length,
                        f = function () {
                            clearInterval(i.interval)
                        };
                    for (; u < a; u++) t.observe(o[u], "change", f);
                    this._observed = !0
                },
                _serialize: function () {
                    var e = this.elementToChange || {}, t = this.container.querySelectorAll(i),
                        n = t.length,
                        r = 0;
                    for (; r < n; r++) e[t[r].getAttribute(s)] = t[r].value;
                    return e
                },
                _interpolate: function (e) {
                    var t, n, r, o = document.querySelector(":focus"),
                        u = this.container.querySelectorAll(i),
                        a = u.length,
                        f = 0;
                    for (; f < a; f++) {
                        t = u[f];
                        if (t === o) continue;
                        if (e && t.type === "hidden") continue;
                        n = t.getAttribute(s), r = this.elementToChange ? this.elementToChange[n] || "" : t.defaultValue, t.value = r
                    }
                },
                show: function (e) {
                    if (t.hasClass(this.link, n)) return;
                    var i = this,
                        s = this.container.querySelector(r);
                    this.elementToChange = e, this._observe(), this._interpolate(), e && (this.interval = setInterval(function () {
                                i._interpolate(!0)
                            }, 500)), t.addClass(this.link, n), this.container.style.display = "", this.fire("show");
                    if (s && !e) try {
                        s.focus()
                    } catch (o) {}
                },
                hide: function () {
                    clearInterval(this.interval), this.elementToChange = null, t.removeClass(this.link, n), this.container.style.display = "none", this.fire("hide")
                }
            })
    }(wysihtml5),
    function (e) {
        var t = e.dom,
            n = {
                position: "relative"
            }, r = {
                left: 0,
                margin: 0,
                opacity: 0,
                overflow: "hidden",
                padding: 0,
                position: "absolute",
                top: 0,
                zIndex: 1
            }, i = {
                cursor: "inherit",
                fontSize: "50px",
                height: "50px",
                marginTop: "-25px",
                outline: 0,
                padding: 0,
                position: "absolute",
                right: "-4px",
                top: "50%"
            }, s = {
                "x-webkit-speech": "",
                speech: ""
            };
        e.toolbar.Speech = function (o, u) {
            var a = document.createElement("input");
            if (!e.browser.supportsSpeechApiOn(a)) {
                u.style.display = "none";
                return
            }
            var f = o.editor.textarea.element.getAttribute("lang");
            f && (s.lang = f);
            var l = document.createElement("div");
            e.lang.object(r).merge({
                    width: u.offsetWidth + "px",
                    height: u.offsetHeight + "px"
                }), t.insert(a).into(l), t.insert(l).into(u), t.setStyles(i).on(a), t.setAttributes(s).on(a), t.setStyles(r).on(l), t.setStyles(n).on(u);
            var c = "onwebkitspeechchange" in a ? "webkitspeechchange" : "speechchange";
            t.observe(a, c, function () {
                o.execCommand("insertText", a.value), a.value = ""
            }), t.observe(a, "click", function (e) {
                t.hasClass(u, "wysihtml5-command-disabled") && e.preventDefault(), e.stopPropagation()
            })
        }
    }(wysihtml5),
    function (e) {
        var t = "wysihtml5-command-disabled",
            n = "wysihtml5-commands-disabled",
            r = "wysihtml5-command-active",
            i = "wysihtml5-action-active",
            s = e.dom;
        e.toolbar.Toolbar = Base.extend({
                constructor: function (t, n) {
                    this.editor = t, this.container = typeof n == "string" ? document.getElementById(n) : n, this.composer = t.composer, this._getLinks("command"), this._getLinks("action"), this._observe(), this.show();
                    var r = this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),
                        i = r.length,
                        s = 0;
                    for (; s < i; s++) new e.toolbar.Speech(this, r[s])
                },
                _getLinks: function (t) {
                    var n = this[t + "Links"] = e.lang.array(this.container.querySelectorAll("[data-wysihtml5-" + t + "]")).get(),
                        r = n.length,
                        i = 0,
                        s = this[t + "Mapping"] = {}, o, u, a, f, l;
                    for (; i < r; i++) o = n[i], a = o.getAttribute("data-wysihtml5-" + t), f = o.getAttribute("data-wysihtml5-" + t + "-value"), u = this.container.querySelector("[data-wysihtml5-" + t + "-group='" + a + "']"), l = this._getDialog(o, a), s[a + ":" + f] = {
                        link: o,
                        group: u,
                        name: a,
                        value: f,
                        dialog: l,
                        state: !1
                    }
                },
                _getDialog: function (t, n) {
                    var r = this,
                        i = this.container.querySelector("[data-wysihtml5-dialog='" + n + "']"),
                        s, o;
                    return i && (s = new e.toolbar.Dialog(t, i), s.on("show", function () {
                                o = r.composer.selection.getBookmark(), r.editor.fire("show:dialog", {
                                        command: n,
                                        dialogContainer: i,
                                        commandLink: t
                                    })
                            }), s.on("save", function (e) {
                                o && r.composer.selection.setBookmark(o), r._execCommand(n, e), r.editor.fire("save:dialog", {
                                        command: n,
                                        dialogContainer: i,
                                        commandLink: t
                                    })
                            }), s.on("cancel", function () {
                                r.editor.focus(!1), r.editor.fire("cancel:dialog", {
                                        command: n,
                                        dialogContainer: i,
                                        commandLink: t
                                    })
                            })), s
                },
                execCommand: function (e, t) {
                    if (this.commandsDisabled) return;
                    var n = this.commandMapping[e + ":" + t];
                    n && n.dialog && !n.state ? n.dialog.show() : this._execCommand(e, t)
                },
                _execCommand: function (e, t) {
                    this.editor.focus(!1), this.composer.commands.exec(e, t), this._updateLinkStates()
                },
                execAction: function (e) {
                    var t = this.editor;
                    e === "change_view" && (t.currentView === t.textarea ? t.fire("change_view", "composer") : t.fire("change_view", "textarea"))
                },
                _observe: function () {
                    var e = this,
                        t = this.editor,
                        r = this.container,
                        i = this.commandLinks.concat(this.actionLinks),
                        o = i.length,
                        u = 0;
                    for (; u < o; u++) i[u].nodeName === "A" ? s.setAttributes({
                            href: "javascript:;",
                            unselectable: "on"
                        }).on(i[u]) : s.setAttributes({
                            unselectable: "on"
                        }).on(i[u]);
                    s.delegate(r, "[data-wysihtml5-command], [data-wysihtml5-action]", "mousedown", function (e) {
                        e.preventDefault()
                    }), s.delegate(r, "[data-wysihtml5-command]", "click", function (t) {
                        var n = this,
                            r = n.getAttribute("data-wysihtml5-command"),
                            i = n.getAttribute("data-wysihtml5-command-value");
                        e.execCommand(r, i), t.preventDefault()
                    }), s.delegate(r, "[data-wysihtml5-action]", "click", function (t) {
                        var n = this.getAttribute("data-wysihtml5-action");
                        e.execAction(n), t.preventDefault()
                    }), t.on("focus:composer", function () {
                        e.bookmark = null, clearInterval(e.interval), e.interval = setInterval(function () {
                            e._updateLinkStates()
                        }, 500)
                    }), t.on("blur:composer", function () {
                        clearInterval(e.interval)
                    }), t.on("destroy:composer", function () {
                        clearInterval(e.interval)
                    }), t.on("change_view", function (t) {
                        setTimeout(function () {
                            e.commandsDisabled = t !== "composer", e._updateLinkStates(), e.commandsDisabled ? s.addClass(r, n) : s.removeClass(r, n)
                        }, 0)
                    })
                },
                _updateLinkStates: function () {
                    var n = this.commandMapping,
                        o = this.actionMapping,
                        u, a, f, l;
                    for (u in n) {
                        l = n[u], this.commandsDisabled ? (a = !1, s.removeClass(l.link, r), l.group && s.removeClass(l.group, r), l.dialog && l.dialog.hide()) : (a = this.composer.commands.state(l.name, l.value), e.lang.object(a).isArray() && (a = a.length === 1 ? a[0] : !0), s.removeClass(l.link, t), l.group && s.removeClass(l.group, t));
                        if (l.state === a) continue;
                        l.state = a, a ? (s.addClass(l.link, r), l.group && s.addClass(l.group, r), l.dialog && (typeof a == "object" ? l.dialog.show(a) : l.dialog.hide())) : (s.removeClass(l.link, r), l.group && s.removeClass(l.group, r), l.dialog && l.dialog.hide())
                    }
                    for (u in o) f = o[u], f.name === "change_view" && (f.state = this.editor.currentView === this.editor.textarea, f.state ? s.addClass(f.link, i) : s.removeClass(f.link, i))
                },
                show: function () {
                    this.container.style.display = ""
                },
                hide: function () {
                    this.container.style.display = "none"
                }
            })
    }(wysihtml5),
    function (e) {
        var t, n = {
                name: t,
                style: !0,
                toolbar: t,
                autoLink: !0,
                parserRules: {
                    tags: {
                        br: {},
                        span: {},
                        div: {},
                        p: {}
                    },
                    classes: {}
                },
                parser: e.dom.parse,
                composerClassName: "wysihtml5-editor",
                bodyClassName: "wysihtml5-supported",
                useLineBreaks: !0,
                stylesheets: [],
                placeholderText: t,
                supportTouchDevices: !0,
                cleanUp: !0
            };
        e.Editor = e.lang.Dispatcher.extend({
                constructor: function (t, r) {
                    this.textareaElement = typeof t == "string" ? document.getElementById(t) : t, this.config = e.lang.object({}).merge(n).merge(r).get(), this.textarea = new e.views.Textarea(this, this.textareaElement, this.config), this.currentView = this.textarea, this._isCompatible = e.browser.supported();
                    if (!this._isCompatible || !this.config.supportTouchDevices && e.browser.isTouchDevice()) {
                        var i = this;
                        setTimeout(function () {
                            i.fire("beforeload").fire("load")
                        }, 0);
                        return
                    }
                    e.dom.addClass(document.body, this.config.bodyClassName), this.composer = new e.views.Composer(this, this.textareaElement, this.config), this.currentView = this.composer, typeof this.config.parser == "function" && this._initParser(), this.on("beforeload", function () {
                        this.synchronizer = new e.views.Synchronizer(this, this.textarea, this.composer), this.config.toolbar && (this.toolbar = new e.toolbar.Toolbar(this, this.config.toolbar))
                    });
                    try {
                        console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")
                    } catch (s) {}
                },
                isCompatible: function () {
                    return this._isCompatible
                },
                clear: function () {
                    return this.currentView.clear(), this
                },
                getValue: function (e) {
                    return this.currentView.getValue(e)
                },
                setValue: function (e, t) {
                    return this.fire("unset_placeholder"), e ? (this.currentView.setValue(e, t), this) : this.clear()
                },
                focus: function (e) {
                    return this.currentView.focus(e), this
                },
                disable: function () {
                    return this.currentView.disable(), this
                },
                enable: function () {
                    return this.currentView.enable(), this
                },
                isEmpty: function () {
                    return this.currentView.isEmpty()
                },
                hasPlaceholderSet: function () {
                    return this.currentView.hasPlaceholderSet()
                },
                parse: function (t) {
                    var n = this.config.parser(t, this.config.parserRules, this.composer.sandbox.getDocument(), this.config.cleanUp);
                    return typeof t == "object" && e.quirks.redraw(t), n
                },
                _initParser: function () {
                    this.on("paste:composer", function () {
                        var t = !0,
                            n = this;
                        n.composer.selection.executeAndRestore(function () {
                            e.quirks.cleanPastedHTML(n.composer.element), n.parse(n.composer.element)
                        }, t)
                    })
                }
            })
    }(wysihtml5), Braintree = function () {
        function e(t, n) {
            t instanceof e ? (this.enc = t.enc, this.pos = t.pos) : (this.enc = t, this.pos = n)
        }

        function t(e, t, n, r, i) {
            this.stream = e, this.header = t, this.length = n, this.tag = r, this.sub = i
        }

        function i(e) {
            var t, i, s = "";
            for (t = 0; t + 3 <= e.length; t += 3) i = parseInt(e.substring(t, t + 3), 16), s += n.charAt(i >> 6) + n.charAt(i & 63);
            t + 1 == e.length ? (i = parseInt(e.substring(t, t + 1), 16), s += n.charAt(i << 2)) : t + 2 == e.length && (i = parseInt(e.substring(t, t + 2), 16), s += n.charAt(i >> 2) + n.charAt((i & 3) << 4));
            while ((s.length & 3) > 0) s += r;
            return s
        }

        function s(e) {
            var t = "",
                i, s = 0,
                o;
            for (i = 0; i < e.length; ++i) {
                if (e.charAt(i) == r) break;
                v = n.indexOf(e.charAt(i));
                if (v < 0) continue;
                s == 0 ? (t += E(v >> 2), o = v & 3, s = 1) : s == 1 ? (t += E(o << 2 | v >> 4), o = v & 15, s = 2) : s == 2 ? (t += E(o), t += E(v >> 2), o = v & 3, s = 3) : (t += E(o << 2 | v >> 4), t += E(v & 15), s = 0)
            }
            return s == 1 && (t += E(o << 2)), t
        }

        function o(e) {
            var t = s(e),
                n, r = new Array;
            for (n = 0; 2 * n < t.length; ++n) r[n] = parseInt(t.substring(2 * n, 2 * n + 2), 16);
            return r
        }

        function l(e, t, n) {
            e != null && ("number" == typeof e ? this.fromNumber(e, t, n) : t == null && "string" != typeof e ? this.fromString(e, 256) : this.fromString(e, t))
        }

        function c() {
            return new l(null)
        }

        function h(e, t, n, r, i, s) {
            while (--s >= 0) {
                var o = t * this[e++] + n[r] + i;
                i = Math.floor(o / 67108864), n[r++] = o & 67108863
            }
            return i
        }

        function p(e, t, n, r, i, s) {
            var o = t & 32767,
                u = t >> 15;
            while (--s >= 0) {
                var a = this[e] & 32767,
                    f = this[e++] >> 15,
                    l = u * a + f * o;
                a = o * a + ((l & 32767) << 15) + n[r] + (i & 1073741823), i = (a >>> 30) + (l >>> 15) + u * f + (i >>> 30), n[r++] = a & 1073741823
            }
            return i
        }

        function d(e, t, n, r, i, s) {
            var o = t & 16383,
                u = t >> 14;
            while (--s >= 0) {
                var a = this[e] & 16383,
                    f = this[e++] >> 14,
                    l = u * a + f * o;
                a = o * a + ((l & 16383) << 14) + n[r] + i, i = (a >> 28) + (l >> 14) + u * f, n[r++] = a & 268435455
            }
            return i
        }

        function E(e) {
            return g.charAt(e)
        }

        function S(e, t) {
            var n = y[e.charCodeAt(t)];
            return n == null ? -1 : n
        }

        function x(e) {
            for (var t = this.t - 1; t >= 0; --t) e[t] = this[t];
            e.t = this.t, e.s = this.s
        }

        function T(e) {
            this.t = 1, this.s = e < 0 ? -1 : 0, e > 0 ? this[0] = e : e < -1 ? this[0] = e + DV : this.t = 0
        }

        function N(e) {
            var t = c();
            return t.fromInt(e), t
        }

        function C(e, t) {
            var n;
            if (t == 16) n = 4;
            else if (t == 8) n = 3;
            else if (t == 256) n = 8;
            else if (t == 2) n = 1;
            else if (t == 32) n = 5;
            else {
                if (t != 4) {
                    this.fromRadix(e, t);
                    return
                }
                n = 2
            }
            this.t = 0, this.s = 0;
            var r = e.length,
                i = !1,
                s = 0;
            while (--r >= 0) {
                var o = n == 8 ? e[r] & 255 : S(e, r);
                if (o < 0) {
                    e.charAt(r) == "-" && (i = !0);
                    continue
                }
                i = !1, s == 0 ? this[this.t++] = o : s + n > this.DB ? (this[this.t - 1] |= (o & (1 << this.DB - s) - 1) << s, this[this.t++] = o >> this.DB - s) : this[this.t - 1] |= o << s, s += n, s >= this.DB && (s -= this.DB)
            }
            n == 8 && (e[0] & 128) != 0 && (this.s = -1, s > 0 && (this[this.t - 1] |= (1 << this.DB - s) - 1 << s)), this.clamp(), i && l.ZERO.subTo(this, this)
        }

        function L() {
            var e = this.s & this.DM;
            while (this.t > 0 && this[this.t - 1] == e)--this.t
        }

        function A(e) {
            if (this.s < 0) return "-" + this.negate().toString(e);
            var t;
            if (e == 16) t = 4;
            else if (e == 8) t = 3;
            else if (e == 2) t = 1;
            else if (e == 32) t = 5;
            else {
                if (e != 4) return this.toRadix(e);
                t = 2
            }
            var n = (1 << t) - 1,
                r, i = !1,
                s = "",
                o = this.t,
                u = this.DB - o * this.DB % t;
            if (o-- > 0) {
                u < this.DB && (r = this[o] >> u) > 0 && (i = !0, s = E(r));
                while (o >= 0) u < t ? (r = (this[o] & (1 << u) - 1) << t - u, r |= this[--o] >> (u += this.DB - t)) : (r = this[o] >> (u -= t) & n, u <= 0 && (u += this.DB, --o)), r > 0 && (i = !0), i && (s += E(r))
            }
            return i ? s : "0"
        }

        function O() {
            var e = c();
            return l.ZERO.subTo(this, e), e
        }

        function M() {
            return this.s < 0 ? this.negate() : this
        }

        function _(e) {
            var t = this.s - e.s;
            if (t != 0) return t;
            var n = this.t;
            t = n - e.t;
            if (t != 0) return this.s < 0 ? -t : t;
            while (--n >= 0)
                if ((t = this[n] - e[n]) != 0) return t;
            return 0
        }

        function D(e) {
            var t = 1,
                n;
            return (n = e >>> 16) != 0 && (e = n, t += 16), (n = e >> 8) != 0 && (e = n, t += 8), (n = e >> 4) != 0 && (e = n, t += 4), (n = e >> 2) != 0 && (e = n, t += 2), (n = e >> 1) != 0 && (e = n, t += 1), t
        }

        function P() {
            return this.t <= 0 ? 0 : this.DB * (this.t - 1) + D(this[this.t - 1] ^ this.s & this.DM)
        }

        function H(e, t) {
            var n;
            for (n = this.t - 1; n >= 0; --n) t[n + e] = this[n];
            for (n = e - 1; n >= 0; --n) t[n] = 0;
            t.t = this.t + e, t.s = this.s
        }

        function B(e, t) {
            for (var n = e; n < this.t; ++n) t[n - e] = this[n];
            t.t = Math.max(this.t - e, 0), t.s = this.s
        }

        function j(e, t) {
            var n = e % this.DB,
                r = this.DB - n,
                i = (1 << r) - 1,
                s = Math.floor(e / this.DB),
                o = this.s << n & this.DM,
                u;
            for (u = this.t - 1; u >= 0; --u) t[u + s + 1] = this[u] >> r | o, o = (this[u] & i) << n;
            for (u = s - 1; u >= 0; --u) t[u] = 0;
            t[s] = o, t.t = this.t + s + 1, t.s = this.s, t.clamp()
        }

        function F(e, t) {
            t.s = this.s;
            var n = Math.floor(e / this.DB);
            if (n >= this.t) {
                t.t = 0;
                return
            }
            var r = e % this.DB,
                i = this.DB - r,
                s = (1 << r) - 1;
            t[0] = this[n] >> r;
            for (var o = n + 1; o < this.t; ++o) t[o - n - 1] |= (this[o] & s) << i, t[o - n] = this[o] >> r;
            r > 0 && (t[this.t - n - 1] |= (this.s & s) << i), t.t = this.t - n, t.clamp()
        }

        function I(e, t) {
            var n = 0,
                r = 0,
                i = Math.min(e.t, this.t);
            while (n < i) r += this[n] - e[n], t[n++] = r & this.DM, r >>= this.DB;
            if (e.t < this.t) {
                r -= e.s;
                while (n < this.t) r += this[n], t[n++] = r & this.DM, r >>= this.DB;
                r += this.s
            } else {
                r += this.s;
                while (n < e.t) r -= e[n], t[n++] = r & this.DM, r >>= this.DB;
                r -= e.s
            }
            t.s = r < 0 ? -1 : 0, r < -1 ? t[n++] = this.DV + r : r > 0 && (t[n++] = r), t.t = n, t.clamp()
        }

        function q(e, t) {
            var n = this.abs(),
                r = e.abs(),
                i = n.t;
            t.t = i + r.t;
            while (--i >= 0) t[i] = 0;
            for (i = 0; i < r.t; ++i) t[i + n.t] = n.am(0, r[i], t, i, 0, n.t);
            t.s = 0, t.clamp(), this.s != e.s && l.ZERO.subTo(t, t)
        }

        function R(e) {
            var t = this.abs(),
                n = e.t = 2 * t.t;
            while (--n >= 0) e[n] = 0;
            for (n = 0; n < t.t - 1; ++n) {
                var r = t.am(n, t[n], e, 2 * n, 0, 1);
                (e[n + t.t] += t.am(n + 1, 2 * t[n], e, 2 * n + 1, r, t.t - n - 1)) >= t.DV && (e[n + t.t] -= t.DV, e[n + t.t + 1] = 1)
            }
            e.t > 0 && (e[e.t - 1] += t.am(n, t[n], e, 2 * n, 0, 1)), e.s = 0, e.clamp()
        }

        function U(e, t, n) {
            var r = e.abs();
            if (r.t <= 0) return;
            var i = this.abs();
            if (i.t < r.t) {
                t != null && t.fromInt(0), n != null && this.copyTo(n);
                return
            }
            n == null && (n = c());
            var s = c(),
                o = this.s,
                u = e.s,
                a = this.DB - D(r[r.t - 1]);
            a > 0 ? (r.lShiftTo(a, s), i.lShiftTo(a, n)) : (r.copyTo(s), i.copyTo(n));
            var f = s.t,
                h = s[f - 1];
            if (h == 0) return;
            var p = h * (1 << this.F1) + (f > 1 ? s[f - 2] >> this.F2 : 0),
                d = this.FV / p,
                v = (1 << this.F1) / p,
                m = 1 << this.F2,
                g = n.t,
                y = g - f,
                b = t == null ? c() : t;
            s.dlShiftTo(y, b), n.compareTo(b) >= 0 && (n[n.t++] = 1, n.subTo(b, n)), l.ONE.dlShiftTo(f, b), b.subTo(s, s);
            while (s.t < f) s[s.t++] = 0;
            while (--y >= 0) {
                var w = n[--g] == h ? this.DM : Math.floor(n[g] * d + (n[g - 1] + m) * v);
                if ((n[g] += s.am(0, w, n, y, 0, f)) < w) {
                    s.dlShiftTo(y, b), n.subTo(b, n);
                    while (n[g] < --w) n.subTo(b, n)
                }
            }
            t != null && (n.drShiftTo(f, t), o != u && l.ZERO.subTo(t, t)), n.t = f, n.clamp(), a > 0 && n.rShiftTo(a, n), o < 0 && l.ZERO.subTo(n, n)
        }

        function z(e) {
            var t = c();
            return this.abs().divRemTo(e, null, t), this.s < 0 && t.compareTo(l.ZERO) > 0 && e.subTo(t, t), t
        }

        function W(e) {
            this.m = e
        }

        function X(e) {
            return e.s < 0 || e.compareTo(this.m) >= 0 ? e.mod(this.m) : e
        }

        function V(e) {
            return e
        }

        function $(e) {
            e.divRemTo(this.m, null, e)
        }

        function J(e, t, n) {
            e.multiplyTo(t, n), this.reduce(n)
        }

        function K(e, t) {
            e.squareTo(t), this.reduce(t)
        }

        function Q() {
            if (this.t < 1) return 0;
            var e = this[0];
            if ((e & 1) == 0) return 0;
            var t = e & 3;
            return t = t * (2 - (e & 15) * t) & 15, t = t * (2 - (e & 255) * t) & 255, t = t * (2 - ((e & 65535) * t & 65535)) & 65535, t = t * (2 - e * t % this.DV) % this.DV, t > 0 ? this.DV - t : -t
        }

        function G(e) {
            this.m = e, this.mp = e.invDigit(), this.mpl = this.mp & 32767, this.mph = this.mp >> 15, this.um = (1 << e.DB - 15) - 1, this.mt2 = 2 * e.t
        }

        function Y(e) {
            var t = c();
            return e.abs().dlShiftTo(this.m.t, t), t.divRemTo(this.m, null, t), e.s < 0 && t.compareTo(l.ZERO) > 0 && this.m.subTo(t, t), t
        }

        function Z(e) {
            var t = c();
            return e.copyTo(t), this.reduce(t), t
        }

        function et(e) {
            while (e.t <= this.mt2) e[e.t++] = 0;
            for (var t = 0; t < this.m.t; ++t) {
                var n = e[t] & 32767,
                    r = n * this.mpl + ((n * this.mph + (e[t] >> 15) * this.mpl & this.um) << 15) & e.DM;
                n = t + this.m.t, e[n] += this.m.am(0, r, e, t, 0, this.m.t);
                while (e[n] >= e.DV) e[n] -= e.DV, e[++n]++
            }
            e.clamp(), e.drShiftTo(this.m.t, e), e.compareTo(this.m) >= 0 && e.subTo(this.m, e)
        }

        function tt(e, t) {
            e.squareTo(t), this.reduce(t)
        }

        function nt(e, t, n) {
            e.multiplyTo(t, n), this.reduce(n)
        }

        function rt() {
            return (this.t > 0 ? this[0] & 1 : this.s) == 0
        }

        function it(e, t) {
            if (e > 4294967295 || e < 1) return l.ONE;
            var n = c(),
                r = c(),
                i = t.convert(this),
                s = D(e) - 1;
            i.copyTo(n);
            while (--s >= 0) {
                t.sqrTo(n, r);
                if ((e & 1 << s) > 0) t.mulTo(r, i, n);
                else {
                    var o = n;
                    n = r, r = o
                }
            }
            return t.revert(n)
        }

        function st(e, t) {
            var n;
            return e < 256 || t.isEven() ? n = new W(t) : n = new G(t), this.exp(e, n)
        }

        function ot(e, t) {
            return new l(e, t)
        }

        function ut(e, t) {
            var n = "",
                r = 0;
            while (r + t < e.length) n += e.substring(r, r + t) + "\n", r += t;
            return n + e.substring(r, e.length)
        }

        function at(e) {
            return e < 16 ? "0" + e.toString(16) : e.toString(16)
        }

        function ft(e, t) {
            if (t < e.length + 11) return alert("Message too long for RSA"), null;
            var n = new Array,
                r = e.length - 1;
            while (r >= 0 && t > 0) {
                var i = e.charCodeAt(r--);
                i < 128 ? n[--t] = i : i > 127 && i < 2048 ? (n[--t] = i & 63 | 128, n[--t] = i >> 6 | 192) : (n[--t] = i & 63 | 128, n[--t] = i >> 6 & 63 | 128, n[--t] = i >> 12 | 224)
            }
            n[--t] = 0;
            var s = 0,
                o = 0,
                u = 0;
            while (t > 2) u == 0 && (o = vt.random.randomWords(1, 0)[0]), s = o >> u & 255, u = (u + 8) % 32, s != 0 && (n[--t] = s);
            return n[--t] = 2, n[--t] = 0, new l(n)
        }

        function lt() {
            this.n = null, this.e = 0, this.d = null, this.p = null, this.q = null, this.dmp1 = null, this.dmq1 = null, this.coeff = null
        }

        function ct(e, t) {
            e != null && t != null && e.length > 0 && t.length > 0 ? (this.n = ot(e, 16), this.e = parseInt(t, 16)) : alert("Invalid RSA public key")
        }

        function ht(e) {
            return e.modPowInt(this.e, this.n)
        }

        function pt(e) {
            var t = ft(e, this.n.bitLength() + 7 >> 3);
            if (t == null) return null;
            var n = this.doPublic(t);
            if (n == null) return null;
            var r = n.toString(16);
            return (r.length & 1) == 0 ? r : "0" + r
        }

        function dt(e) {
            var t = this.encrypt(e);
            return t ? i(t) : null
        }
        e.prototype.get = function (e) {
            e == undefined && (e = this.pos++);
            if (e >= this.enc.length) throw "Requesting byte offset " + e + " on a stream of length " + this.enc.length;
            return this.enc[e]
        }, e.prototype.hexDigits = "0123456789ABCDEF", e.prototype.hexByte = function (e) {
            return this.hexDigits.charAt(e >> 4 & 15) + this.hexDigits.charAt(e & 15)
        }, e.prototype.hexDump = function (e, t) {
            var n = "";
            for (var r = e; r < t; ++r) {
                n += this.hexByte(this.get(r));
                switch (r & 15) {
                case 7:
                    n += "  ";
                    break;
                case 15:
                    n += "\n";
                    break;
                default:
                    n += " "
                }
            }
            return n
        }, e.prototype.parseStringISO = function (e, t) {
            var n = "";
            for (var r = e; r < t; ++r) n += String.fromCharCode(this.get(r));
            return n
        }, e.prototype.parseStringUTF = function (e, t) {
            var n = "",
                r = 0;
            for (var i = e; i < t;) {
                var r = this.get(i++);
                r < 128 ? n += String.fromCharCode(r) : r > 191 && r < 224 ? n += String.fromCharCode((r & 31) << 6 | this.get(i++) & 63) : n += String.fromCharCode((r & 15) << 12 | (this.get(i++) & 63) << 6 | this.get(i++) & 63)
            }
            return n
        }, e.prototype.reTime = /^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/, e.prototype.parseTime = function (e, t) {
            var n = this.parseStringISO(e, t),
                r = this.reTime.exec(n);
            return r ? (n = r[1] + "-" + r[2] + "-" + r[3] + " " + r[4], r[5] && (n += ":" + r[5], r[6] && (n += ":" + r[6], r[7] && (n += "." + r[7]))), r[8] && (n += " UTC", r[8] != "Z" && (n += r[8], r[9] && (n += ":" + r[9]))), n) : "Unrecognized time: " + n
        }, e.prototype.parseInteger = function (e, t) {
            var n = t - e;
            if (n > 4) {
                n <<= 3;
                var r = this.get(e);
                if (r == 0) n -= 8;
                else
                    while (r < 128) r <<= 1, --n;
                return "(" + n + " bit)"
            }
            var i = 0;
            for (var s = e; s < t; ++s) i = i << 8 | this.get(s);
            return i
        }, e.prototype.parseBitString = function (e, t) {
            var n = this.get(e),
                r = (t - e - 1 << 3) - n,
                i = "(" + r + " bit)";
            if (r <= 20) {
                var s = n;
                i += " ";
                for (var o = t - 1; o > e; --o) {
                    var u = this.get(o);
                    for (var a = s; a < 8; ++a) i += u >> a & 1 ? "1" : "0";
                    s = 0
                }
            }
            return i
        }, e.prototype.parseOctetString = function (e, t) {
            var n = t - e,
                r = "(" + n + " byte) ";
            n > 20 && (t = e + 20);
            for (var i = e; i < t; ++i) r += this.hexByte(this.get(i));
            return n > 20 && (r += String.fromCharCode(8230)), r
        }, e.prototype.parseOID = function (e, t) {
            var n, r = 0,
                i = 0;
            for (var s = e; s < t; ++s) {
                var o = this.get(s);
                r = r << 7 | o & 127, i += 7, o & 128 || (n == undefined ? n = parseInt(r / 40) + "." + r % 40 : n += "." + (i >= 31 ? "bigint" : r), r = i = 0), n += String.fromCharCode()
            }
            return n
        }, t.prototype.typeName = function () {
            if (this.tag == undefined) return "unknown";
            var e = this.tag >> 6,
                t = this.tag >> 5 & 1,
                n = this.tag & 31;
            switch (e) {
            case 0:
                switch (n) {
                case 0:
                    return "EOC";
                case 1:
                    return "BOOLEAN";
                case 2:
                    return "INTEGER";
                case 3:
                    return "BIT_STRING";
                case 4:
                    return "OCTET_STRING";
                case 5:
                    return "NULL";
                case 6:
                    return "OBJECT_IDENTIFIER";
                case 7:
                    return "ObjectDescriptor";
                case 8:
                    return "EXTERNAL";
                case 9:
                    return "REAL";
                case 10:
                    return "ENUMERATED";
                case 11:
                    return "EMBEDDED_PDV";
                case 12:
                    return "UTF8String";
                case 16:
                    return "SEQUENCE";
                case 17:
                    return "SET";
                case 18:
                    return "NumericString";
                case 19:
                    return "PrintableString";
                case 20:
                    return "TeletexString";
                case 21:
                    return "VideotexString";
                case 22:
                    return "IA5String";
                case 23:
                    return "UTCTime";
                case 24:
                    return "GeneralizedTime";
                case 25:
                    return "GraphicString";
                case 26:
                    return "VisibleString";
                case 27:
                    return "GeneralString";
                case 28:
                    return "UniversalString";
                case 30:
                    return "BMPString";
                default:
                    return "Universal_" + n.toString(16)
                };
            case 1:
                return "Application_" + n.toString(16);
            case 2:
                return "[" + n + "]";
            case 3:
                return "Private_" + n.toString(16)
            }
        }, t.prototype.content = function () {
            if (this.tag == undefined) return null;
            var e = this.tag >> 6;
            if (e != 0) return this.sub == null ? null : "(" + this.sub.length + ")";
            var t = this.tag & 31,
                n = this.posContent(),
                r = Math.abs(this.length);
            switch (t) {
            case 1:
                return this.stream.get(n) == 0 ? "false" : "true";
            case 2:
                return this.stream.parseInteger(n, n + r);
            case 3:
                return this.sub ? "(" + this.sub.length + " elem)" : this.stream.parseBitString(n, n + r);
            case 4:
                return this.sub ? "(" + this.sub.length + " elem)" : this.stream.parseOctetString(n, n + r);
            case 6:
                return this.stream.parseOID(n, n + r);
            case 16:
            case 17:
                return "(" + this.sub.length + " elem)";
            case 12:
                return this.stream.parseStringUTF(n, n + r);
            case 18:
            case 19:
            case 20:
            case 21:
            case 22:
            case 26:
                return this.stream.parseStringISO(n, n + r);
            case 23:
            case 24:
                return this.stream.parseTime(n, n + r)
            }
            return null
        }, t.prototype.toString = function () {
            return this.typeName() + "@" + this.stream.pos + "[header:" + this.header + ",length:" + this.length + ",sub:" + (this.sub == null ? "null" : this.sub.length) + "]"
        }, t.prototype.print = function (e) {
            e == undefined && (e = ""), document.writeln(e + this);
            if (this.sub != null) {
                e += "  ";
                for (var t = 0, n = this.sub.length; t < n; ++t) this.sub[t].print(e)
            }
        }, t.prototype.toPrettyString = function (e) {
            e == undefined && (e = "");
            var t = e + this.typeName() + " @" + this.stream.pos;
            this.length >= 0 && (t += "+"), t += this.length, this.tag & 32 ? t += " (constructed)" : (this.tag == 3 || this.tag == 4) && this.sub != null && (t += " (encapsulates)"), t += "\n";
            if (this.sub != null) {
                e += "  ";
                for (var n = 0, r = this.sub.length; n < r; ++n) t += this.sub[n].toPrettyString(e)
            }
            return t
        }, t.prototype.posStart = function () {
            return this.stream.pos
        }, t.prototype.posContent = function () {
            return this.stream.pos + this.header
        }, t.prototype.posEnd = function () {
            return this.stream.pos + this.header + Math.abs(this.length)
        }, t.decodeLength = function (e) {
            var t = e.get(),
                n = t & 127;
            if (n == t) return n;
            if (n > 3) throw "Length over 24 bits not supported at position " + (e.pos - 1);
            if (n == 0) return -1;
            t = 0;
            for (var r = 0; r < n; ++r) t = t << 8 | e.get();
            return t
        }, t.hasContent = function (n, r, i) {
            if (n & 32) return !0;
            if (n < 3 || n > 4) return !1;
            var s = new e(i);
            n == 3 && s.get();
            var o = s.get();
            if (o >> 6 & 1) return !1;
            try {
                var u = t.decodeLength(s);
                return s.pos - i.pos + u == r
            } catch (a) {
                return !1
            }
        }, t.decode = function (n) {
            n instanceof e || (n = new e(n, 0));
            var r = new e(n),
                i = n.get(),
                s = t.decodeLength(n),
                o = n.pos - r.pos,
                u = null;
            if (t.hasContent(i, s, n)) {
                var a = n.pos;
                i == 3 && n.get(), u = [];
                if (s >= 0) {
                    var f = a + s;
                    while (n.pos < f) u[u.length] = t.decode(n);
                    if (n.pos != f) throw "Content size is not correct for container starting at offset " + a
                } else try {
                    for (;;) {
                        var l = t.decode(n);
                        if (l.tag == 0) break;
                        u[u.length] = l
                    }
                    s = a - n.pos
                } catch (c) {
                    throw "Exception while decoding undefined length content: " + c
                }
            } else n.pos += s;
            return new t(r, o, s, i, u)
        };
        var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
            r = "=",
            u, a = 0xdeadbeefcafe,
            f = (a & 16777215) == 15715070;
        f && navigator.appName == "Microsoft Internet Explorer" ? (l.prototype.am = p, u = 30) : f && navigator.appName != "Netscape" ? (l.prototype.am = h, u = 26) : (l.prototype.am = d, u = 28), l.prototype.DB = u, l.prototype.DM = (1 << u) - 1, l.prototype.DV = 1 << u;
        var m = 52;
        l.prototype.FV = Math.pow(2, m), l.prototype.F1 = m - u, l.prototype.F2 = 2 * u - m;
        var g = "0123456789abcdefghijklmnopqrstuvwxyz",
            y = new Array,
            b, w;
        b = "0".charCodeAt(0);
        for (w = 0; w <= 9; ++w) y[b++] = w;
        b = "a".charCodeAt(0);
        for (w = 10; w < 36; ++w) y[b++] = w;
        b = "A".charCodeAt(0);
        for (w = 10; w < 36; ++w) y[b++] = w;
        W.prototype.convert = X, W.prototype.revert = V, W.prototype.reduce = $, W.prototype.mulTo = J, W.prototype.sqrTo = K, G.prototype.convert = Y, G.prototype.revert = Z, G.prototype.reduce = et, G.prototype.mulTo = nt, G.prototype.sqrTo = tt, l.prototype.copyTo = x, l.prototype.fromInt = T, l.prototype.fromString = C, l.prototype.clamp = L, l.prototype.dlShiftTo = H, l.prototype.drShiftTo = B, l.prototype.lShiftTo = j, l.prototype.rShiftTo = F, l.prototype.subTo = I, l.prototype.multiplyTo = q, l.prototype.squareTo = R, l.prototype.divRemTo = U, l.prototype.invDigit = Q, l.prototype.isEven = rt, l.prototype.exp = it, l.prototype.toString = A, l.prototype.negate = O, l.prototype.abs = M, l.prototype.compareTo = _, l.prototype.bitLength = P, l.prototype.mod = z, l.prototype.modPowInt = st, l.ZERO = N(0), l.ONE = N(1), lt.prototype.doPublic = ht, lt.prototype.setPublic = ct, lt.prototype.encrypt = pt, lt.prototype.encrypt_b64 = dt, "use strict";
        var vt = {
            cipher: {},
            hash: {},
            keyexchange: {},
            mode: {},
            misc: {},
            codec: {},
            exception: {
                corrupt: function (e) {
                    this.toString = function () {
                        return "CORRUPT: " + this.message
                    }, this.message = e
                },
                invalid: function (e) {
                    this.toString = function () {
                        return "INVALID: " + this.message
                    }, this.message = e
                },
                bug: function (e) {
                    this.toString = function () {
                        return "BUG: " + this.message
                    }, this.message = e
                },
                notReady: function (e) {
                    this.toString = function () {
                        return "NOT READY: " + this.message
                    }, this.message = e
                }
            }
        };
        typeof module != "undefined" && module.exports && (module.exports = vt), vt.cipher.aes = function (e) {
            this._tables[0][0][0] || this._precompute();
            var t, n, r, i, s, o = this._tables[0][4],
                u = this._tables[1],
                a = e.length,
                f = 1;
            if (a !== 4 && a !== 6 && a !== 8) throw new vt.exception.invalid("invalid aes key size");
            this._key = [i = e.slice(0), s = []];
            for (t = a; t < 4 * a + 28; t++) {
                r = i[t - 1];
                if (t % a === 0 || a === 8 && t % a === 4) r = o[r >>> 24] << 24 ^ o[r >> 16 & 255] << 16 ^ o[r >> 8 & 255] << 8 ^ o[r & 255], t % a === 0 && (r = r << 8 ^ r >>> 24 ^ f << 24, f = f << 1 ^ (f >> 7) * 283);
                i[t] = i[t - a] ^ r
            }
            for (n = 0; t; n++, t--) r = i[n & 3 ? t : t - 4], t <= 4 || n < 4 ? s[n] = r : s[n] = u[0][o[r >>> 24]] ^ u[1][o[r >> 16 & 255]] ^ u[2][o[r >> 8 & 255]] ^ u[3][o[r & 255]]
        }, vt.cipher.aes.prototype = {
            encrypt: function (e) {
                return this._crypt(e, 0)
            },
            decrypt: function (e) {
                return this._crypt(e, 1)
            },
            _tables: [
                [
                    [],
                    [],
                    [],
                    [],
                    []
                ],
                [
                    [],
                    [],
                    [],
                    [],
                    []
                ]
            ],
            _precompute: function () {
                var e = this._tables[0],
                    t = this._tables[1],
                    n = e[4],
                    r = t[4],
                    i, s, o, u = [],
                    a = [],
                    f, l, c, h, p, d;
                for (i = 0; i < 256; i++) a[(u[i] = i << 1 ^ (i >> 7) * 283) ^ i] = i;
                for (s = o = 0; !n[s]; s ^= f || 1, o = a[o] || 1) {
                    h = o ^ o << 1 ^ o << 2 ^ o << 3 ^ o << 4, h = h >> 8 ^ h & 255 ^ 99, n[s] = h, r[h] = s, c = u[l = u[f = u[s]]], d = c * 16843009 ^ l * 65537 ^ f * 257 ^ s * 16843008, p = u[h] * 257 ^ h * 16843008;
                    for (i = 0; i < 4; i++) e[i][s] = p = p << 24 ^ p >>> 8, t[i][h] = d = d << 24 ^ d >>> 8
                }
                for (i = 0; i < 5; i++) e[i] = e[i].slice(0), t[i] = t[i].slice(0)
            },
            _crypt: function (e, t) {
                if (e.length !== 4) throw new vt.exception.invalid("invalid aes block size");
                var n = this._key[t],
                    r = e[0] ^ n[0],
                    i = e[t ? 3 : 1] ^ n[1],
                    s = e[2] ^ n[2],
                    o = e[t ? 1 : 3] ^ n[3],
                    u, a, f, l = n.length / 4 - 2,
                    c, h = 4,
                    p = [0, 0, 0, 0],
                    d = this._tables[t],
                    v = d[0],
                    m = d[1],
                    g = d[2],
                    y = d[3],
                    b = d[4];
                for (c = 0; c < l; c++) u = v[r >>> 24] ^ m[i >> 16 & 255] ^ g[s >> 8 & 255] ^ y[o & 255] ^ n[h], a = v[i >>> 24] ^ m[s >> 16 & 255] ^ g[o >> 8 & 255] ^ y[r & 255] ^ n[h + 1], f = v[s >>> 24] ^ m[o >> 16 & 255] ^ g[r >> 8 & 255] ^ y[i & 255] ^ n[h + 2], o = v[o >>> 24] ^ m[r >> 16 & 255] ^ g[i >> 8 & 255] ^ y[s & 255] ^ n[h + 3], h += 4, r = u, i = a, s = f;
                for (c = 0; c < 4; c++) p[t ? 3 & -c : c] = b[r >>> 24] << 24 ^ b[i >> 16 & 255] << 16 ^ b[s >> 8 & 255] << 8 ^ b[o & 255] ^ n[h++], u = r, r = i, i = s, s = o, o = u;
                return p
            }
        }, vt.bitArray = {
            bitSlice: function (e, t, n) {
                return e = vt.bitArray._shiftRight(e.slice(t / 32), 32 - (t & 31)).slice(1), n === undefined ? e : vt.bitArray.clamp(e, n - t)
            },
            extract: function (e, t, n) {
                var r, i = Math.floor(-t - n & 31);
                return (t + n - 1 ^ t) & -32 ? r = e[t / 32 | 0] << 32 - i ^ e[t / 32 + 1 | 0] >>> i : r = e[t / 32 | 0] >>> i, r & (1 << n) - 1
            },
            concat: function (e, t) {
                if (e.length === 0 || t.length === 0) return e.concat(t);
                var n, r, i = e[e.length - 1],
                    s = vt.bitArray.getPartial(i);
                return s === 32 ? e.concat(t) : vt.bitArray._shiftRight(t, s, i | 0, e.slice(0, e.length - 1))
            },
            bitLength: function (e) {
                var t = e.length,
                    n;
                return t === 0 ? 0 : (n = e[t - 1], (t - 1) * 32 + vt.bitArray.getPartial(n))
            },
            clamp: function (e, t) {
                if (e.length * 32 < t) return e;
                e = e.slice(0, Math.ceil(t / 32));
                var n = e.length;
                return t &= 31, n > 0 && t && (e[n - 1] = vt.bitArray.partial(t, e[n - 1] & 2147483648 >> t - 1, 1)), e
            },
            partial: function (e, t, n) {
                return e === 32 ? t : (n ? t | 0 : t << 32 - e) + e * 1099511627776
            },
            getPartial: function (e) {
                return Math.round(e / 1099511627776) || 32
            },
            equal: function (e, t) {
                if (vt.bitArray.bitLength(e) !== vt.bitArray.bitLength(t)) return !1;
                var n = 0,
                    r;
                for (r = 0; r < e.length; r++) n |= e[r] ^ t[r];
                return n === 0
            },
            _shiftRight: function (e, t, n, r) {
                var i, s = 0,
                    o;
                r === undefined && (r = []);
                for (; t >= 32; t -= 32) r.push(n), n = 0;
                if (t === 0) return r.concat(e);
                for (i = 0; i < e.length; i++) r.push(n | e[i] >>> t), n = e[i] << 32 - t;
                return s = e.length ? e[e.length - 1] : 0, o = vt.bitArray.getPartial(s), r.push(vt.bitArray.partial(t + o & 31, t + o > 32 ? n : r.pop(), 1)), r
            },
            _xor4: function (e, t) {
                return [e[0] ^ t[0], e[1] ^ t[1], e[2] ^ t[2], e[3] ^ t[3]]
            }
        }, vt.codec.hex = {
            fromBits: function (e) {
                var t = "",
                    n, r;
                for (n = 0; n < e.length; n++) t += ((e[n] | 0) + 0xf00000000000).toString(16).substr(4);
                return t.substr(0, vt.bitArray.bitLength(e) / 4)
            },
            toBits: function (e) {
                var t, n = [],
                    r;
                e = e.replace(/\s|0x/g, ""), r = e.length, e += "00000000";
                for (t = 0; t < e.length; t += 8) n.push(parseInt(e.substr(t, 8), 16) ^ 0);
                return vt.bitArray.clamp(n, r * 4)
            }
        }, vt.codec.utf8String = {
            fromBits: function (e) {
                var t = "",
                    n = vt.bitArray.bitLength(e),
                    r, i;
                for (r = 0; r < n / 8; r++)(r & 3) === 0 && (i = e[r / 4]), t += String.fromCharCode(i >>> 24), i <<= 8;
                return decodeURIComponent(escape(t))
            },
            toBits: function (e) {
                e = unescape(encodeURIComponent(e));
                var t = [],
                    n, r = 0;
                for (n = 0; n < e.length; n++) r = r << 8 | e.charCodeAt(n), (n & 3) === 3 && (t.push(r), r = 0);
                return n & 3 && t.push(vt.bitArray.partial(8 * (n & 3), r)), t
            }
        }, vt.codec.base64 = {
            _chars: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
            fromBits: function (e, t, n) {
                var r = "",
                    i, s = 0,
                    o = vt.codec.base64._chars,
                    u = 0,
                    a = vt.bitArray.bitLength(e);
                n && (o = o.substr(0, 62) + "-_");
                for (i = 0; r.length * 6 < a;) r += o.charAt((u ^ e[i] >>> s) >>> 26), s < 6 ? (u = e[i] << 6 - s, s += 26, i++) : (u <<= 6, s -= 6);
                while (r.length & 3 && !t) r += "=";
                return r
            },
            toBits: function (e, t) {
                e = e.replace(/\s|=/g, "");
                var n = [],
                    r, i = 0,
                    s = vt.codec.base64._chars,
                    o = 0,
                    u;
                t && (s = s.substr(0, 62) + "-_");
                for (r = 0; r < e.length; r++) {
                    u = s.indexOf(e.charAt(r));
                    if (u < 0) throw new vt.exception.invalid("this isn't base64!");
                    i > 26 ? (i -= 26, n.push(o ^ u >>> i), o = u << 32 - i) : (i += 6, o ^= u << 32 - i)
                }
                return i & 56 && n.push(vt.bitArray.partial(i & 56, o, 1)), n
            }
        }, vt.codec.base64url = {
            fromBits: function (e) {
                return vt.codec.base64.fromBits(e, 1, 1)
            },
            toBits: function (e) {
                return vt.codec.base64.toBits(e, 1)
            }
        }, vt.beware === undefined && (vt.beware = {}), vt.beware["CBC mode is dangerous because it doesn't protect message integrity."] = function () {
            vt.mode.cbc = {
                name: "cbc",
                encrypt: function (e, t, n, r) {
                    if (r && r.length) throw new vt.exception.invalid("cbc can't authenticate data");
                    if (vt.bitArray.bitLength(n) !== 128) throw new vt.exception.invalid("cbc iv must be 128 bits");
                    var i, s = vt.bitArray,
                        o = s._xor4,
                        u = s.bitLength(t),
                        a = 0,
                        f = [];
                    if (u & 7) throw new vt.exception.invalid("pkcs#5 padding only works for multiples of a byte");
                    for (i = 0; a + 128 <= u; i += 4, a += 128) n = e.encrypt(o(n, t.slice(i, i + 4))), f.splice(i, 0, n[0], n[1], n[2], n[3]);
                    return u = (16 - (u >> 3 & 15)) * 16843009, n = e.encrypt(o(n, s.concat(t, [u, u, u, u]).slice(i, i + 4))), f.splice(i, 0, n[0], n[1], n[2], n[3]), f
                },
                decrypt: function (e, t, n, r) {
                    if (r && r.length) throw new vt.exception.invalid("cbc can't authenticate data");
                    if (vt.bitArray.bitLength(n) !== 128) throw new vt.exception.invalid("cbc iv must be 128 bits");
                    if (vt.bitArray.bitLength(t) & 127 || !t.length) throw new vt.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");
                    var i, s = vt.bitArray,
                        o = s._xor4,
                        u, a, f = [];
                    r = r || [];
                    for (i = 0; i < t.length; i += 4) u = t.slice(i, i + 4), a = o(n, e.decrypt(u)), f.splice(i, 0, a[0], a[1], a[2], a[3]), n = u;
                    u = f[i - 1] & 255;
                    if (u == 0 || u > 16) throw new vt.exception.corrupt("pkcs#5 padding corrupt");
                    a = u * 16843009;
                    if (!s.equal(s.bitSlice([a, a, a, a], 0, u * 8), s.bitSlice(f, f.length * 32 - u * 8, f.length * 32))) throw new vt.exception.corrupt("pkcs#5 padding corrupt");
                    return s.bitSlice(f, 0, f.length * 32 - u * 8)
                }
            }
        }, vt.misc.hmac = function (e, t) {
            this._hash = t = t || vt.hash.sha256;
            var n = [
                [],
                []
            ],
                r, i = t.prototype.blockSize / 32;
            this._baseHash = [new t, new t], e.length > i && (e = t.hash(e));
            for (r = 0; r < i; r++) n[0][r] = e[r] ^ 909522486, n[1][r] = e[r] ^ 1549556828;
            this._baseHash[0].update(n[0]), this._baseHash[1].update(n[1])
        }, vt.misc.hmac.prototype.encrypt = vt.misc.hmac.prototype.mac = function (e, t) {
            var n = (new this._hash(this._baseHash[0])).update(e, t).finalize();
            return (new this._hash(this._baseHash[1])).update(n).finalize()
        }, vt.hash.sha256 = function (e) {
            this._key[0] || this._precompute(), e ? (this._h = e._h.slice(0), this._buffer = e._buffer.slice(0), this._length = e._length) : this.reset()
        }, vt.hash.sha256.hash = function (e) {
            return (new vt.hash.sha256).update(e).finalize()
        }, vt.hash.sha256.prototype = {
            blockSize: 512,
            reset: function () {
                return this._h = this._init.slice(0), this._buffer = [], this._length = 0, this
            },
            update: function (e) {
                typeof e == "string" && (e = vt.codec.utf8String.toBits(e));
                var t, n = this._buffer = vt.bitArray.concat(this._buffer, e),
                    r = this._length,
                    i = this._length = r + vt.bitArray.bitLength(e);
                for (t = 512 + r & -512; t <= i; t += 512) this._block(n.splice(0, 16));
                return this
            },
            finalize: function () {
                var e, t = this._buffer,
                    n = this._h;
                t = vt.bitArray.concat(t, [vt.bitArray.partial(1, 1)]);
                for (e = t.length + 2; e & 15; e++) t.push(0);
                t.push(Math.floor(this._length / 4294967296)), t.push(this._length | 0);
                while (t.length) this._block(t.splice(0, 16));
                return this.reset(), n
            },
            _init: [],
            _key: [],
            _precompute: function () {
                function r(e) {
                    return (e - Math.floor(e)) * 4294967296 | 0
                }
                var e = 0,
                    t = 2,
                    n;
                e: for (; e < 64; t++) {
                    for (n = 2; n * n <= t; n++)
                        if (t % n === 0) continue e;
                    e < 8 && (this._init[e] = r(Math.pow(t, .5))), this._key[e] = r(Math.pow(t, 1 / 3)), e++
                }
            },
            _block: function (e) {
                var t, n, r, i, s = e.slice(0),
                    o = this._h,
                    u = this._key,
                    a = o[0],
                    f = o[1],
                    l = o[2],
                    c = o[3],
                    h = o[4],
                    p = o[5],
                    d = o[6],
                    v = o[7];
                for (t = 0; t < 64; t++) t < 16 ? n = s[t] : (r = s[t + 1 & 15], i = s[t + 14 & 15], n = s[t & 15] = (r >>> 7 ^ r >>> 18 ^ r >>> 3 ^ r << 25 ^ r << 14) + (i >>> 17 ^ i >>> 19 ^ i >>> 10 ^ i << 15 ^ i << 13) + s[t & 15] + s[t + 9 & 15] | 0), n = n + v + (h >>> 6 ^ h >>> 11 ^ h >>> 25 ^ h << 26 ^ h << 21 ^ h << 7) + (d ^ h & (p ^ d)) + u[t], v = d, d = p, p = h, h = c + n | 0, c = l, l = f, f = a, a = n + (f & l ^ c & (f ^ l)) + (f >>> 2 ^ f >>> 13 ^ f >>> 22 ^ f << 30 ^ f << 19 ^ f << 10) | 0;
                o[0] = o[0] + a | 0, o[1] = o[1] + f | 0, o[2] = o[2] + l | 0, o[3] = o[3] + c | 0, o[4] = o[4] + h | 0, o[5] = o[5] + p | 0, o[6] = o[6] + d | 0, o[7] = o[7] + v | 0
            }
        }, vt.random = {
            randomWords: function (e, t) {
                var n = [],
                    r, i = this.isReady(t),
                    s;
                if (i === this._NOT_READY) throw new vt.exception.notReady("generator isn't seeded");
                i & this._REQUIRES_RESEED && this._reseedFromPools(!(i & this._READY));
                for (r = 0; r < e; r += 4)(r + 1) % this._MAX_WORDS_PER_BURST === 0 && this._gate(), s = this._gen4words(), n.push(s[0], s[1], s[2], s[3]);
                return this._gate(), n.slice(0, e)
            },
            setDefaultParanoia: function (e) {
                this._defaultParanoia = e
            },
            addEntropy: function (e, t, n) {
                n = n || "user";
                var r, i, s, o = (new Date).valueOf(),
                    u = this._robins[n],
                    a = this.isReady(),
                    f = 0;
                r = this._collectorIds[n], r === undefined && (r = this._collectorIds[n] = this._collectorIdNext++), u === undefined && (u = this._robins[n] = 0), this._robins[n] = (this._robins[n] + 1) % this._pools.length;
                switch (typeof e) {
                case "number":
                    t === undefined && (t = 1), this._pools[u].update([r, this._eventId++, 1, t, o, 1, e | 0]);
                    break;
                case "object":
                    var l = Object.prototype.toString.call(e);
                    if (l === "[object Uint32Array]") {
                        s = [];
                        for (i = 0; i < e.length; i++) s.push(e[i]);
                        e = s
                    } else {
                        l !== "[object Array]" && (f = 1);
                        for (i = 0; i < e.length && !f; i++) typeof e[i] != "number" && (f = 1)
                    } if (!f) {
                        if (t === undefined) {
                            t = 0;
                            for (i = 0; i < e.length; i++) {
                                s = e[i];
                                while (s > 0) t++, s >>>= 1
                            }
                        }
                        this._pools[u].update([r, this._eventId++, 2, t, o, e.length].concat(e))
                    }
                    break;
                case "string":
                    t === undefined && (t = e.length), this._pools[u].update([r, this._eventId++, 3, t, o, e.length]), this._pools[u].update(e);
                    break;
                default:
                    f = 1
                }
                if (f) throw new vt.exception.bug("random: addEntropy only supports number, array of numbers or string");
                this._poolEntropy[u] += t, this._poolStrength += t, a === this._NOT_READY && (this.isReady() !== this._NOT_READY && this._fireEvent("seeded", Math.max(this._strength, this._poolStrength)), this._fireEvent("progress", this.getProgress()))
            },
            isReady: function (e) {
                var t = this._PARANOIA_LEVELS[e !== undefined ? e : this._defaultParanoia];
                return this._strength && this._strength >= t ? this._poolEntropy[0] > this._BITS_PER_RESEED && (new Date).valueOf() > this._nextReseed ? this._REQUIRES_RESEED | this._READY : this._READY : this._poolStrength >= t ? this._REQUIRES_RESEED | this._NOT_READY : this._NOT_READY
            },
            getProgress: function (e) {
                var t = this._PARANOIA_LEVELS[e ? e : this._defaultParanoia];
                return this._strength >= t ? 1 : this._poolStrength > t ? 1 : this._poolStrength / t
            },
            startCollectors: function () {
                if (this._collectorsStarted) return;
                if (window.addEventListener) window.addEventListener("load", this._loadTimeCollector, !1), window.addEventListener("mousemove", this._mouseCollector, !1);
                else {
                    if (!document.attachEvent) throw new vt.exception.bug("can't attach event");
                    document.attachEvent("onload", this._loadTimeCollector), document.attachEvent("onmousemove", this._mouseCollector)
                }
                this._collectorsStarted = !0
            },
            stopCollectors: function () {
                if (!this._collectorsStarted) return;
                window.removeEventListener ? (window.removeEventListener("load", this._loadTimeCollector, !1), window.removeEventListener("mousemove", this._mouseCollector, !1)) : window.detachEvent && (window.detachEvent("onload", this._loadTimeCollector), window.detachEvent("onmousemove", this._mouseCollector)), this._collectorsStarted = !1
            },
            addEventListener: function (e, t) {
                this._callbacks[e][this._callbackI++] = t
            },
            removeEventListener: function (e, t) {
                var n, r, i = this._callbacks[e],
                    s = [];
                for (r in i) i.hasOwnProperty(r) && i[r] === t && s.push(r);
                for (n = 0; n < s.length; n++) r = s[n], delete i[r]
            },
            _pools: [new vt.hash.sha256],
            _poolEntropy: [0],
            _reseedCount: 0,
            _robins: {},
            _eventId: 0,
            _collectorIds: {},
            _collectorIdNext: 0,
            _strength: 0,
            _poolStrength: 0,
            _nextReseed: 0,
            _key: [0, 0, 0, 0, 0, 0, 0, 0],
            _counter: [0, 0, 0, 0],
            _cipher: undefined,
            _defaultParanoia: 6,
            _collectorsStarted: !1,
            _callbacks: {
                progress: {},
                seeded: {}
            },
            _callbackI: 0,
            _NOT_READY: 0,
            _READY: 1,
            _REQUIRES_RESEED: 2,
            _MAX_WORDS_PER_BURST: 65536,
            _PARANOIA_LEVELS: [0, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024],
            _MILLISECONDS_PER_RESEED: 3e4,
            _BITS_PER_RESEED: 80,
            _gen4words: function () {
                for (var e = 0; e < 4; e++) {
                    this._counter[e] = this._counter[e] + 1 | 0;
                    if (this._counter[e]) break
                }
                return this._cipher.encrypt(this._counter)
            },
            _gate: function () {
                this._key = this._gen4words().concat(this._gen4words()), this._cipher = new vt.cipher.aes(this._key)
            },
            _reseed: function (e) {
                this._key = vt.hash.sha256.hash(this._key.concat(e)), this._cipher = new vt.cipher.aes(this._key);
                for (var t = 0; t < 4; t++) {
                    this._counter[t] = this._counter[t] + 1 | 0;
                    if (this._counter[t]) break
                }
            },
            _reseedFromPools: function (e) {
                var t = [],
                    n = 0,
                    r;
                this._nextReseed = t[0] = (new Date).valueOf() + this._MILLISECONDS_PER_RESEED;
                for (r = 0; r < 16; r++) t.push(Math.random() * 4294967296 | 0);
                for (r = 0; r < this._pools.length; r++) {
                    t = t.concat(this._pools[r].finalize()), n += this._poolEntropy[r], this._poolEntropy[r] = 0;
                    if (!e && this._reseedCount & 1 << r) break
                }
                this._reseedCount >= 1 << this._pools.length && (this._pools.push(new vt.hash.sha256), this._poolEntropy.push(0)), this._poolStrength -= n, n > this._strength && (this._strength = n), this._reseedCount++, this._reseed(t)
            },
            _mouseCollector: function (e) {
                var t = e.x || e.clientX || e.offsetX || 0,
                    n = e.y || e.clientY || e.offsetY || 0;
                vt.random.addEntropy([t, n], 2, "mouse")
            },
            _loadTimeCollector: function (e) {
                vt.random.addEntropy((new Date).valueOf(), 2, "loadtime")
            },
            _fireEvent: function (e, t) {
                var n, r = vt.random._callbacks[e],
                    i = [];
                for (n in r) r.hasOwnProperty(n) && i.push(r[n]);
                for (n = 0; n < i.length; n++) i[n](t)
            }
        },
        function () {
            try {
                var e = new Uint32Array(32);
                crypto.getRandomValues(e), vt.random.addEntropy(e, 1024, "crypto.getRandomValues")
            } catch (t) {}
        }();
        for (k in vt.beware) vt.beware.hasOwnProperty(k) && vt.beware[k]();
        return Braintree = {
            sjcl: vt,
            version: "1.2.0"
        }, Braintree.create = function (e) {
            var n = {
                publicKey: e
            }, r = function () {
                    return {
                        key: vt.random.randomWords(8, 0),
                        encrypt: function (e) {
                            return this.encryptWithIv(e, vt.random.randomWords(4, 0))
                        },
                        encryptWithIv: function (e, t) {
                            var n = new vt.cipher.aes(this.key),
                                r = vt.codec.utf8String.toBits(e),
                                i = vt.mode.cbc.encrypt(n, r, t),
                                s = vt.bitArray.concat(t, i);
                            return vt.codec.base64.fromBits(s)
                        }
                    }
                }, i = function () {
                    return {
                        key: vt.random.randomWords(8, 0),
                        sign: function (e) {
                            var t = new vt.misc.hmac(this.key, vt.hash.sha256),
                                n = t.encrypt(e);
                            return vt.codec.base64.fromBits(n)
                        }
                    }
                }, s = function (e) {
                    var t = [];
                    if (e.typeName() == "INTEGER") {
                        var n = e.posContent(),
                            r = e.posEnd(),
                            i = e.stream.hexDump(n, r).replace(/[ \n]/g, "");
                        t.push(i)
                    }
                    if (e.sub != null)
                        for (var o = 0; o < e.sub.length; o++) t = t.concat(s(e.sub[o]));
                    return t
                }, u = function (e) {
                    var n = o(e),
                        r = t.decode(n),
                        i = s(r);
                    if (i.length != 2) throw "Malformed public key";
                    var u = i[0],
                        a = i[1],
                        f = new lt;
                    return f.setPublic(u, a), f
                }, a = function (e) {
                    var t = u(n.publicKey),
                        s = r(),
                        o = i(),
                        a = s.encrypt(e),
                        f = o.sign(vt.codec.base64.toBits(a)),
                        l = vt.bitArray.concat(s.key, o.key),
                        c = vt.codec.base64.fromBits(l),
                        h = t.encrypt_b64(c),
                        p = "$bt4|javascript_" + Braintree.version.replace(/\./g, "_") + "$";
                    return p + h + "$" + a + "$" + f
                }, f = new function () {
                    this.encrypt = a, this.generateAesKey = r, this.generateRsaKey = u, this.publicKey = n.publicKey, this.version = Braintree.version, this.formEncrypter = new Braintree.FormEncrypter(this), this.onSubmitEncryptForm = this.formEncrypter.onSubmitEncryptForm
                };
            return vt.random.startCollectors(), f
        },
        function () {
            var e, t = function (e, t) {
                    return function () {
                        return e.apply(t, arguments)
                    }
                };
            e = function () {
                function e(e) {
                    this.bt = e, this.onSubmitEncryptForm = t(this.onSubmitEncryptForm, this), this.encryptForm = t(this.encryptForm, this)
                }
                return e.prototype.create = function (e, t) {
                    var n, r, i;
                    t == null && (t = {}), n = document.createElement(e);
                    for (r in t) i = t[r], n.setAttribute(r, i);
                    return n
                }, e.prototype.inputElements = function (e) {
                    var t, n;
                    return n = [], t = function (e) {
                        var r, i, s, o, u;
                        o = e.children, u = [];
                        for (i = 0, s = o.length; i < s; i++) r = o[i], r.attributes["data-encrypted-name"] ? u.push(n.push(r)) : u.push(t(r));
                        return u
                    }, t(e), n
                }, e.prototype.encryptForm = function (e) {
                    var t, n, r, i, s, o, u, a;
                    u = this.inputElements(e), a = [];
                    for (s = 0, o = u.length; s < o; s++) t = u[s], r = t.getAttribute("data-encrypted-name"), n = this.bt.encrypt(t.value), t.removeAttribute("name"), i = this.create("input", {
                            value: n,
                            type: "hidden",
                            name: r
                        }), a.push(e.appendChild(i));
                    return a
                }, e.prototype.extractForm = function (e) {
                    return window.jQuery && e instanceof jQuery ? e[0] : e instanceof Object ? e : document.getElementById(e)
                }, e.prototype.onSubmitEncryptForm = function (e, t) {
                    var n, r = this;
                    t == null && (t = function (e) {
                        return e
                    }), e = this.extractForm(e), n = function (n) {
                        return r.encryptForm(e), t(n)
                    };
                    if (window.jQuery) return window.jQuery(e).submit(n);
                    if (e.addEventListener) return e.addEventListener("submit", n, !1);
                    if (e.attachEvent) return e.attachEvent("onsubmit", n)
                }, e
            }(), Braintree.FormEncrypter = e
        }.call(this), Braintree
    }();
    var Queenbee = {
        DOM: {
            select: function (e) {
                return window.jQuery ? jQuery(e) : $$(e)
            },
            ready: function (e) {
                window.jQuery ? jQuery(document).ready(e) : document.on("dom:loaded", e)
            }
        },
        Gateway: {
            configure: function () {
                var e = function (e) {
                    var t = Queenbee.DOM.select("meta[name=" + e + "]")[0];
                    return t ? t.content : null
                };
                Queenbee.Gateway.environment = e("qb-environment"), Queenbee.Gateway.publicKey = e("qb-public-encryption-key"), Queenbee.Gateway.instance = Braintree.create(Queenbee.Gateway.publicKey)
            }
        },
        CreditCard: {
            testNumbers: ["378282246310005", "371449635398431", "378734493671000", "30569309025904", "38520000023237", "4111111111111111", "4012888888881881", "4222222222222", "4242424242424242", "5555555555554444", "5105105105105100", "6011111111111117", "6011000990139424"],
            isTestNumber: function (e) {
                for (var t = 0; t < Queenbee.CreditCard.testNumbers.length; t++)
                    if (Queenbee.CreditCard.testNumbers[t] == e) return !0;
                return !1
            },
            validateNumber: function (e) {
                if (String(e).replace(/\s+/g, "").length == 0) return !1;
                if (Queenbee.Gateway.environment.match(/^production/) && Queenbee.CreditCard.isTestNumber(e)) return !1;
                var t = 0;
                for (var n = 0; n < e.length; n++) {
                    var r = (parseInt(e.substr(e.length - n - 1, 1)) * (1 + n % 2)).toString();
                    for (var i = 0; i < r.length; i++) t += parseInt(r.substr(i, 1))
                }
                return t % 10 == 0
            },
            validateCVV: function (e) {
                return /^\d{3,4}$/.test(e)
            },
            validateZipCode: function (e) {
                return /\w+/.test(e)
            },
            encryptForm: function (e) {
                Queenbee.Gateway.instance.formEncrypter.encryptForm(e)
            }
        }
    };
    Queenbee.DOM.ready(Queenbee.Gateway.configure),
    function () {
        var e;
        (e = window.bcx) == null && (window.bcx = {}), _.extend(bcx, {
                models: {},
                collections: {},
                views: {},
                helpers: {},
                env: "production",
                bucketColors: ["3185c5", "000099", "3B9E93", "009900", "aa0000", "ec61a2", "cc6633", "666666", "000000", "660099", "ff9c00", "e207c1", "a5460d", "650606", "482a15", "2c5322", "b3a543", "46647c"],
                storage: new StorageAdapter(window.localStorage, bcx.storageNamespace),
                trivialChange: 0
            })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f, l, c = [].slice;
        n = (f = window.localStorage) != null ? f.debug : void 0, r = {}, (t = (l = window.chrome) != null ? l.csi : void 0) ? s = function (e, n, r) {
            var i, s;
            return s = t().pageT, e.apply(n, r), i = t().pageT - s, Math.round(i * 100) / 100
        } : s = function (e, t, n) {
            var r;
            return r = (new Date).getTime(), e.apply(t, n), (new Date).getTime() - r
        }, a = function (e) {
            return o ? u.push(e) : e()
        }, i = function (e) {
            return function () {
                var t, i, o, u, f, l, h, p;
                t = 1 <= arguments.length ? c.call(arguments, 0) : [], n && a(function () {
                    return console.group("[%s]", e)
                }), h = r[e], u = function (e, r) {
                    return a(function () {
                        var i;
                        try {
                            i = s(e, this, t);
                            if (n) return console.log("%sms: %s", i, r)
                        } catch (o) {
                            if (n) return console.error("%s raised:\n%s", r, o)
                        }
                    })
                };
                for (f = 0, l = h.length; f < l; f++) p = h[f], o = p[0], i = p[1], u(o, i);
                if (n) return a(function () {
                    return console.groupEnd("[%s]", e)
                })
            }
        }, e = function (e, t, n) {
            var s, o;
            return n == null && (n = "(anonymous)"), s = [t, n], (o = r[e]) ? o.push(s) : (r[e] = [s], $(document).bind(e, i(e)))
        }, o = !1, u = [], _.extend(bcx, {
                on: function (t, n, r) {
                    var i, s, o, u, a;
                    r == null && (r = n, n = null), u = t.split(" "), a = [];
                    for (s = 0, o = u.length; s < o; s++) i = u[s], a.push(e(i, r, n));
                    return a
                },
                trigger: function (e) {
                    return $(document).trigger(e)
                },
                pause: function () {
                    return o = !0
                },
                resume: function () {
                    return this.flush(), o = !1
                },
                flush: function () {
                    var e;
                    e = [];
                    while (this.step()) e.push(!0);
                    return e
                },
                step: function () {
                    var e;
                    if (e = u.shift()) return e(), !0
                },
                debug: function () {
                    n = !0;
                    try {
                        return window.localStorage.setItem("debug", !0)
                    } catch (e) {}
                },
                stopDebugging: function () {
                    n = !1;
                    try {
                        return window.localStorage.removeItem("debug")
                    } catch (e) {}
                }
            })
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.Model = function (e) {
            function n() {
                var e = this;
                n.__super__.constructor.apply(this, arguments), this.bind("change", function () {
                    return e.memos = {}
                }), this.memos = {}
            }
            return t(n, e), n.memoize = function (e) {
                var t, n, r;
                return (r = (n = this.memoize).index) == null && (n.index = 0), t = this.memoize.index++,
                function () {
                    var n, r;
                    return (r = (n = this.memos)[t]) != null ? r : n[t] = e.apply(this, arguments)
                }
            }, n.prototype.sync = function (e, t, n) {
                return n == null && (n = {}), n.dataType = "script", e === "trash" ? this._trash(n) : Backbone.sync(e, t, n)
            }, n.prototype.parse = function (e, t) {
                try {
                    return JSON.parse(e)
                } catch (n) {
                    return {}
                }
            }, n.prototype.trash = function (e) {
                return this.sync("trash", this, e)
            }, n.prototype._trash = function (e) {
                var t, n, r = this;
                return n = typeof this.url == "function" ? this.url() : this.url, n += "/trash", e.url = n, e.type = "POST", t = e.success, e.success = function () {
                    return r.trigger("destroy"), r.trigger("sync"), typeof t == "function" ? t() : void 0
                }, $.ajax(e)
            }, n.prototype.calendarDate = function (e) {
                var t;
                if (t = this.get(e)) return CalendarDate.parse(t)
            }, n.prototype.calendarTime = function (e) {
                var t;
                if (t = this.get(e)) return CalendarTime.parse(t)
            }, n.prototype.date = function (e) {
                var t;
                if (t = this.get(e)) return Date.parse(t)
            }, n
        }(Backbone.Model)
    }.call(this),
    function () {
        bcx.helpers.EmojiHelper = function () {
            function e() {}
            return e.prototype.emojify = function (e) {
                return this.safe(Emoji.emojify(this.escape(e)))
            }, e
        }()
    }.call(this),
    function () {
        bcx.helpers.HumanNameHelper = function () {
            function e() {}
            return e.prototype.humanize = function (e) {
                return e === "calendar_event" ? "event" : e
            }, e
        }()
    }.call(this),
    function () {
        bcx.helpers.PluralizeHelper = function () {
            function e() {}
            return e.prototype.pluralize = function (e, t, n) {
                return n == null && (n = "" + t + "s"), (e != null ? e.length : void 0) != null && (e = e.length), e === 1 ? "" + e + " " + t : "" + e + " " + n
            }, e
        }()
    }.call(this),
    function () {
        bcx.helpers.TruncateHelper = function () {
            function e() {}
            return e.prototype.truncateWord = function (e, t) {
                var n;
                return n = e.split(" "), n.length > t ? n.splice(0, t).join(" ") + "" : e
            }, e
        }()
    }.call(this),
    function () {}.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            }, n = [].slice;
        bcx.View = function (e) {
            function o() {
                o.__super__.constructor.apply(this, arguments), typeof this.setup == "function" && this.setup()
            }
            var r, i, s;
            t(o, e), o.include = function () {
                var e, t, r, i, s, o, u, a, f;
                t = 1 <= arguments.length ? n.call(arguments, 0) : [], f = [];
                for (u = 0, a = t.length; u < a; u++) e = t[u], i = this.prototype.setup, r = this.prototype.constructor, s = this.prototype, _.extend(this.prototype, e.prototype), _.extend(this, e), i && i !== this.prototype.setup && (o = this.prototype.setup, this.prototype.setup = function () {
                    return i(), o()
                }), r && r !== this.prototype.constructor && (this.prototype.constructor = r), s && s !== this.prototype ? f.push(this.prototype = s) : f.push(void 0);
                return f
            }, s = bcx.helpers;
            for (i in s) r = s[i], o.include(r);
            return o.templatePrefix = "templates/", o.prototype.withContext = function (e) {
                return e == null && (e = {}), _.extend(_.extend({}, this), e)
            }, o.prototype.renderTemplate = function (e, t) {
                var n;
                return t == null && (t = this), n = new String(JST["" + this.constructor.templatePrefix + e](t)), n.ecoSafe = !0, n
            }, o
        }(Backbone.View)
    }.call(this),
    function () {
        bcx.EmailAddressHelper = {
            looksLikeEmailAddress: function (e) {
                return /@/.test(e)
            },
            validEmailAddress: function (e) {
                return /^[\/+'a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e)
            },
            extractEmailAddressesFrom: function (e) {
                return _.uniq(e.match(/([\/+'a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6})/g))
            }
        }
    }.call(this),
    function () {
        var e, t, n, r, i = {}.hasOwnProperty,
            s = function (e, t) {
                function r() {
                    this.constructor = e
                }
                for (var n in t) i.call(t, n) && (e[n] = t[n]);
                return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
            };
        r = bcx.EmailAddressHelper, n = r.validEmailAddress, t = r.looksLikeEmailAddress, bcx.models.PersonOrGroup = function (r) {
            function i() {
                return i.__super__.constructor.apply(this, arguments)
            }
            return s(i, r), i.prototype.setInput = function (e) {
                var n;
                return this.clear({
                        silent: !0
                    }), e = e.trim(), n = {
                    input: e
                }, e.length && (t(e) ? n.email_address = e : n.name = e), this.set(n)
            }, i.prototype.isBlank = function () {
                return this.isNew() && (this.has("input") === !1 || this.get("input") === "")
            }, i.prototype.hasUnknownName = function () {
                return this.has("name") && this.isNew()
            }, i.prototype.hasInvalidEmailAddress = function () {
                return this.has("email_address") && !this.hasValidEmailAddress()
            }, i.prototype.hasValidEmailAddress = function () {
                return this.has("email_address") && n(this.get("email_address"))
            }, i.prototype.isGroup = function () {
                return this.has("member_ids")
            }, i.prototype.isSubgroup = function () {
                return this.isGroup() && this.has("parent_id")
            }, i.prototype.isPerson = function () {
                return !this.isGroup()
            }, i.prototype.isNewlyInvitedPerson = function () {
                return this.isPerson() && !this.has("name") && this.hasValidEmailAddress()
            }, i.prototype.emailAddressAlphanumeric = function () {
                return this.get("email_address").replace(/\W/g, "-")
            }, i.prototype.members = function () {
                var t, n;
                if (this.isGroup() && this.collection) return n = function () {
                    var e, n, r, i;
                    r = this.get("member_ids"), i = [];
                    for (e = 0, n = r.length; e < n; e++) t = r[e], i.push(this.collection.get(t));
                    return i
                }.call(this), new e(n)
            }, i.prototype.subgroups = function () {
                var e, t = this;
                if (!this.isSubgroup() && !this.isPerson()) return e = this.collection.filter(function (e) {
                    return e.get("parent_id") === t.get("group_id")
                }), new bcx.collections.PeopleAndGroups(e)
            }, i.prototype.group = function () {
                var e = this;
                if (this.isSubgroup()) return this.collection.find(function (t) {
                    return t.get("group_id") === e.get("parent_id")
                })
            }, i.prototype.isEnabled = function () {
                return this.isDisabled() === !1
            }, i.prototype.isDisabled = function () {
                var e;
                return ((e = this.collection) != null ? e.isDisabled : void 0) ? this.collection.isDisabled(this) : !1
            }, i.prototype.mailbox = function () {
                if (this.has("email_address")) return this.get("email_address").split("@")[0]
            }, i
        }(Backbone.Model), e = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return s(t, e), t.prototype.comparator = function (e) {
                return e.get("name")
            }, t.prototype.enabled = function () {
                return this.filter(function (e) {
                    return e.isEnabled()
                })
            }, t.prototype.disabled = function () {
                return this.filter(function (e) {
                    return e.isDisabled()
                })
            }, t
        }(Backbone.Collection)
    }.call(this),
    function () {
        var e, t, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            }, i = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        t = bcx.EmailAddressHelper.looksLikeEmailAddress, bcx.collections.PeopleAndGroups = function (n) {
            function s() {
                return s.__super__.constructor.apply(this, arguments)
            }
            return r(s, n), s.prototype.model = bcx.models.PersonOrGroup, s.prototype.initialize = function (e, t) {
                return t == null && (t = {}), this.disabledIds = t.disabledIds || []
            }, s.prototype.isDisabled = function (e) {
                var t;
                return t = e.id, i.call(this.disabledIds, t) >= 0
            }, s.prototype.comparator = function (e) {
                return e.get("name")
            }, s.prototype.search = function (e) {
                var t, n, r, i, s, o, u, a, f, l, c, h, p;
                e = e.trim(), r = this.createPatternMatchFor(e), s = [], p = this.models;
                for (f = 0, c = p.length; f < c; f++) o = p[f], a = r(o), a !== void 0 && s.push({
                        score: a,
                        option: o
                    });
                u = function () {
                    var e, t, n, r;
                    n = s.sort(function (e, t) {
                        return e.score - t.score
                    }), r = [];
                    for (e = 0, t = n.length; e < t; e++) i = n[e], r.push(i.option);
                    return r
                }(), n = [], t = [];
                for (l = 0, h = u.length; l < h; l++) o = u[l], o.isDisabled() ? t.push(o) : n.push(o);
                return {
                    enabledOptions: n,
                    disabledOptions: t
                }
            }, s.prototype.createPatternMatchFor = function (n) {
                var r;
                return r = new RegExp(e(n), "i"), t(n) ? function (e) {
                    var t;
                    return (t = r.exec(e.get("email_address"))) != null ? t.index : void 0
                } : function (e) {
                    var t;
                    return (t = r.exec(e.get("name")) || r.exec(e.mailbox())) != null ? t.index : void 0
                }
            }, s
        }(Backbone.Collection), e = function (e) {
            return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")
        }, bcx.peopleAndGroups = new bcx.collections.PeopleAndGroups, bcx.peopleAndGroups.loadedWithAccesses = !1, bcx.peopleAndGroups.loadWithAccesses = function () {
            if (!bcx.peopleAndGroups.loadedWithAccesses) return $.when($.getJSON("/people_and_groups.json"), $.getJSON("/buckets/accesses.json")).done(function (e, t) {
                return bcx.peopleAndGroups.loadedWithAccesses = !0, bcx.bucketAccesses.addOrUpdate(t[0]), bcx.peopleAndGroups.reset(e[0]), bcx.peopleAndGroups.trigger("loaded:withAccess", bcx.peopleAndGroups)
            })
        }, bcx.peopleAndGroups.loadCurrentProjectParticipants = function () {
            return $.getJSON("/projects/" + bcx.currentBucket.id + "/participants.json", function (e) {
                return bcx.peopleAndGroups.merge(e), bcx.peopleAndGroups.trigger("loaded:projectParticipants", bcx.peopleAndGroups)
            })
        }
    }.call(this),
    function () {
        var e, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            };
        bcx.views.AutocompletePeopleSuggestions = function (t) {
            function r() {
                return r.__super__.constructor.apply(this, arguments)
            }
            return n(r, t), r.prototype.displayElement = "[data-role~=suggestions_view]", r.prototype.template = "templates/autocomplete_people_suggestions", r.prototype.initialize = function () {
                var t = this;
                return this.model.bind("change", function () {
                    return t.render()
                }), this.suggestions = new e, this.suggestions.bind("selection:changed", function () {
                    return t.update()
                })
            }, r.prototype.events = {
                "focus input": "render",
                "keydown input": "onKeyPress",
                "touchstart [data-behavior~=select_suggestion]": "onSelectSuggestion",
                "mouseenter [data-behavior~=select_suggestion]": "onSelectSuggestion",
                "click [data-behavior~=select_suggestion]": "onClickSuggestion",
                clickoutside: "clear"
            }, r.prototype.render = function (e) {
                return this.suggestions.generate(this.model.get("input"), this.collection), this.suggestions.selectFirst(), this.$(this.displayElement).html(JST[this.template](this.withContext({
                                results: this.suggestions.results,
                                selected: this.suggestions.selected(),
                                showInvalidMessage: e && this.model.hasInvalidEmailAddress(),
                                showUnknownMessage: e && this.model.hasUnknownName()
                            })))
            }, r.prototype.update = function () {
                var e;
                return this.$("[data-suggestion-id].selected").removeClass("selected"), this.$("[data-suggestion-id=" + ((e = this.suggestions.selected()) != null ? e.id : void 0) + "]").addClass("selected")
            }, r.prototype.clear = function () {
                return this.$(this.displayElement).html("")
            }, r.prototype.commit = function (e, t) {
                var n, r, i, s;
                if (s = this.suggestions.selected()) {
                    n = jQuery.Event("suggestions:commit", {
                            triggeredBy: e
                        }), i = function () {
                        var e, t, n, i;
                        if (s.isGroup()) {
                            n = s.get("member_ids"), i = [];
                            for (e = 0, t = n.length; e < t; e++) r = n[e], i.push(this.collection.get(r));
                            return i
                        }
                        return [s]
                    }.call(this), $(this.el).trigger(n, [{
                                suggestion: s,
                                people: i
                            }
                        ]);
                    if (n.isDefaultPrevented()) return t.preventDefault()
                }
            }, r.prototype.cancel = function () {
                var e;
                return e = this.$("input[type=text]"), e.val() ? e.val("") : e.blur(), this.clear()
            }, r.prototype.onKeyPress = function (e) {
                switch (e.which) {
                case $.ui.keyCode.TAB:
                    return this.commit("tabKey", e);
                case $.ui.keyCode.ENTER:
                    return this.commit("enterKey", e);
                case $.ui.keyCode.ESCAPE:
                    return this.cancel(), e.preventDefault();
                case $.ui.keyCode.DOWN:
                    return this.suggestions.selectNext(), e.preventDefault();
                case $.ui.keyCode.UP:
                    return this.suggestions.selectPrevious(), e.preventDefault()
                }
            }, r.prototype.onSelectSuggestion = function (e) {
                return this.suggestions.selectById($(e.currentTarget).data("suggestion-id"))
            }, r.prototype.onClickSuggestion = function (e) {
                return this.commit("click", e)
            }, r
        }(bcx.View), e = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return n(t, e), t.prototype.minInputLength = 2, t.prototype.maxNumberOfResults = 10, t.prototype.comparator = function (e) {
                return e.get("name")
            }, t.prototype.generate = function (e, t) {
                return this.input = (e || "").trim(), this.input.length < this.minInputLength ? (this.results = {}, this.reset([])) : (this.results = t.search(e), this.results.enabledOptions = _.sortBy(this.results.enabledOptions.slice(0, this.maxNumberOfResults), this.comparator), this.results.disabledOptions = _.sortBy(this.results.disabledOptions.slice(0, this.maxNumberOfResults), this.comparator), this.reset(this.results.enabledOptions))
            }, t.prototype.selected = function () {
                return this.models[this.selectedIndex]
            }, t.prototype.selectById = function (e) {
                var t;
                return t = this.detect(function (t) {
                    return t.id === e
                }), this.changeSelection(this.models.indexOf(t))
            }, t.prototype.selectFirst = function () {
                return this.changeSelection(0)
            }, t.prototype.selectLast = function () {
                return this.changeSelection(this.models.length - 1)
            }, t.prototype.selectNext = function () {
                var e;
                return e = this.selectedIndex + 1, this.models[e] ? this.changeSelection(e) : this.selectFirst()
            }, t.prototype.selectPrevious = function () {
                var e;
                return e = this.selectedIndex - 1, this.models[e] ? this.changeSelection(e) : this.selectLast()
            }, t.prototype.changeSelection = function (e) {
                return this.selectedIndex = e, this.trigger("selection:changed"), this.selected()
            }, t
        }(Backbone.Collection)
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        e = bcx.EmailAddressHelper.extractEmailAddressesFrom, bcx.views.InviteeField = function (n) {
            function i() {
                return this.remove = t(this.remove, this), this.replace = t(this.replace, this), this.appendTo = t(this.appendTo, this), this.modelRemoved = t(this.modelRemoved, this), this.modelReplaced = t(this.modelReplaced, this), i.__super__.constructor.apply(this, arguments)
            }
            return r(i, n), i.prototype.className = "person invitee field", i.prototype.template = "templates/invitee_field", i.prototype.events = {
                "focus input": "inputFocused",
                "input:change input": "inputChanged",
                "paste input": "inputPasted",
                "suggestions:commit": "suggestionPicked",
                "click [data-behavior~=remove_invitee]": "removeControlClicked"
            }, i.prototype.initialize = function () {
                return this.selection = this.options.selection, this.install(), this.suggestionsView = new bcx.views.AutocompletePeopleSuggestions({
                        el: this.el,
                        model: this.model,
                        collection: this.collection
                    })
            }, i.prototype.install = function () {
                return this.model.bind("replace", this.modelReplaced), this.model.bind("remove", this.modelRemoved)
            }, i.prototype.uninstall = function () {
                return this.model.unbind("replace", this.modelReplaced), this.model.unbind("remove", this.modelRemoved), this.unbind(), this.removeFromNewSuperpowersForm()
            }, i.prototype.render = function () {
                return $(this.el).html(JST[this.template](this)), this.updateHiddenInputs(), this.updateAllClassNames(), this.addToNewSuperpowersForm()
            }, i.prototype.update = function () {
                return this.updateHiddenInputs(), this.updateBlankClassName(), this.model.hasInvalidEmailAddress() || $(this.el).removeClass("invalid"), $(this.el).removeClass("unknown")
            }, i.prototype.updateHiddenInputs = function () {
                return this.$("[data-role~=email_address_input]").val(this.model.get("email_address"))
            }, i.prototype.updateAllClassNames = function () {
                return this.updateBlankClassName(), this.updateInvalidClassName(), this.updateUnknownClassName(), this.updateDisabledClassName()
            }, i.prototype.updateBlankClassName = function () {
                return $(this.el).toggleClass("blank", this.model.isBlank())
            }, i.prototype.updateInvalidClassName = function () {
                return $(this.el).toggleClass("invalid", this.model.hasInvalidEmailAddress())
            }, i.prototype.updateUnknownClassName = function () {
                return $(this.el).toggleClass("unknown", this.model.hasUnknownName())
            }, i.prototype.updateDisabledClassName = function () {
                return $(this.el).toggleClass("disabled", this.model.isDisabled())
            }, i.prototype.inputFocused = function () {
                var e;
                return e = $(this.el).closest("[data-behavior~=invitees]"), e.hasClass("loading") ? ($(this.el).attr("readonly", "readonly"), !1) : ($(this.el).addClass("focused"), this.events.clickoutside = "inputLostFocus", this.events.focusoutside = "inputLostFocus", this.delegateEvents(), $(this.el).trigger("invitee:focus"))
            }, i.prototype.inputLostFocus = function () {
                return $(this.el).removeClass("focused"), delete this.events.clickoutside, delete this.events.focusoutside, this.delegateEvents(), this.render(), $(this.el).trigger("invitee:blur")
            }, i.prototype.inputChanged = function (e, t) {
                return this.model.setInput(t.currentValue)
            }, i.prototype.inputPasted = function (t) {
                var n;
                return n = $(t.currentTarget), n.bind("input", function (t) {
                    var r;
                    return r = e(n.val()), r.length && n.val(r[0]), n.unbind("input", arguments.callee)
                })
            }, i.prototype.suggestionPicked = function (e, t) {
                return e.preventDefault(), this.selection.replace(this.model, t.suggestion)
            }, i.prototype.removeControlClicked = function (e) {
                return $(e.target).addClass("activated"), this.selection.remove(this.model)
            }, i.prototype.modelReplaced = function (e) {
                return this.trigger("replace", this, e)
            }, i.prototype.modelRemoved = function () {
                return this.remove()
            }, i.prototype.appendTo = function (e) {
                return this.render(), $(e).append(this.el)
            }, i.prototype.replace = function (e) {
                return this.render(), $(e).replaceWith(this.el)
            }, i.prototype.remove = function () {
                var e = this;
                return this.uninstall(), $(this.el).delay(50).animate({
                        opacity: 0
                    }, 200, "linear", function () {
                        return $(e.el).animate({
                                height: 0
                            }, Math.sqrt($(e.el).height()) * 50, "easeOutQuad", function () {
                                return $(e.el).remove(), $(document).trigger("invitee:removed")
                            })
                    })
            }, i.prototype.addToNewSuperpowersForm = function () {
                if (this.model.isNewlyInvitedPerson() && this.removable()) return $("#new_superpowers").append(JST["templates/new_superpowers"]({
                            invitee: this.model
                        }))
            }, i.prototype.removeFromNewSuperpowersForm = function () {
                return $("#new_superpowers #invitee-" + this.model.emailAddressAlphanumeric()).remove()
            }, i.prototype.readOnly = function () {
                return this.model.has("id") || this.model.hasValidEmailAddress()
            }, i.prototype.removable = function () {
                return this.readOnly() && this.model.isEnabled()
            }, i
        }(bcx.View)
    }.call(this),
    function () {
        var e = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            };
        bcx.views.InviteeFieldGroup = function (t) {
            function r() {
                return this.memberRemoved = e(this.memberRemoved, this), this.groupRemoved = e(this.groupRemoved, this), r.__super__.constructor.apply(this, arguments)
            }
            return n(r, t), r.prototype.className = "", r.prototype.template = "templates/invitee_field_group", r.prototype.events = {
                "click [data-behavior~=remove_group]": "removeControlClicked"
            }, r.prototype.initialize = function () {
                return this.group = this.model, this.members = _.clone(this.group.members().models), this.selection = this.options.selection, this.views = [], this.install()
            }, r.prototype.install = function () {
                var e, t, n, r, i;
                this.group.bind("remove", this.groupRemoved), r = this.members, i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.bind("remove", this.memberRemoved));
                return i
            }, r.prototype.uninstall = function () {
                var e, t, n, r, i, s, o, u;
                this.group.unbind("remove", this.groupRemoved), o = this.members;
                for (n = 0, i = o.length; n < i; n++) e = o[n], e.unbind("remove", this.memberRemoved);
                u = this.views;
                for (r = 0, s = u.length; r < s; r++) t = u[r], t.uninstall();
                return this.unbind()
            }, r.prototype.render = function () {
                return this.enabled = this.group.members().enabled(), this.disabled = this.group.members().disabled(), $(this.el).html(JST[this.template](this)), this.renderCollection("enabled", this.enabled), this.renderCollection("disabled", this.disabled)
            }, r.prototype.renderCollection = function (e, t) {
                var n, r, i;
                return n = function () {
                    var e, n, s;
                    s = [];
                    for (e = 0, n = t.length; e < n; e++) r = t[e], i = this.createView(r), i.render(), s.push(i.el);
                    return s
                }.call(this), this.$("[data-role=" + e + "_invitees]").append(n)
            }, r.prototype.createView = function (e) {
                var t;
                return t = new bcx.views.InviteeField({
                        model: e,
                        collection: this.collection,
                        selection: this.selection,
                        className: "grouped person invitee field"
                    }), this.views.push(t), t
            }, r.prototype.removeControlClicked = function (e) {
                return $(e.target).addClass("activated"), this.selection.remove(this.group), this.selection.remove(this.members, {
                        silent: !0
                    })
            }, r.prototype.groupRemoved = function () {
                return this.remove()
            }, r.prototype.memberRemoved = function (e) {
                return e.unbind("remove", this.memberRemoved), this.members = _(this.members).without(e)
            }, r.prototype.replace = function (e) {
                return this.render(), $(e).replaceWith(this.el)
            }, r.prototype.remove = function () {
                var e = this;
                return this.uninstall(), $(this.el).delay(50).animate({
                        opacity: 0
                    }, 200, "linear", function () {
                        return $(e.el).animate({
                                height: 0
                            }, Math.min(Math.sqrt($(e.el).height()) * 35, 400), "easeOutQuad", function () {
                                return $(e.el).remove(), $(document).trigger("invitee:removed")
                            })
                    })
            }, r
        }(bcx.View)
    }.call(this),
    function () {
        var e, t, n, r, i = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, s = {}.hasOwnProperty,
            o = function (e, t) {
                function r() {
                    this.constructor = e
                }
                for (var n in t) s.call(t, n) && (e[n] = t[n]);
                return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
            };
        n = bcx.collections.PeopleAndGroups, e = bcx.views.InviteeField, t = bcx.views.InviteeFieldGroup, bcx.views.InviteeFieldList = function (s) {
            function u() {
                return this.inviteeBlur = i(this.inviteeBlur, this), this.updateNewSuperpowersPrompt = i(this.updateNewSuperpowersPrompt, this), this.resetView = i(this.resetView, this), this.replaceView = i(this.replaceView, this), this.addView = i(this.addView, this), u.__super__.constructor.apply(this, arguments)
            }
            return o(u, s), u.prototype.firsthumanInput = "[data-role~=human_input]:first", u.prototype.events = {
                "invitee:focus": "lastFieldFocused",
                "invitee:blur": "inviteeBlur",
                reset: "reset"
            }, u.prototype.initialize = function () {
                var e, t;
                return t = $(this.el).data("disabled-people-ids"), e = $(this.el).data("disabled-group-ids"), this.disabledIds = t.concat(e), this.collection = new n($(this.el).data("people"), {
                        disabledIds: this.disabledIds
                    }), this.selection = new r([new this.collection.model, new this.collection.model, new this.collection.model]), this.selection.each(this.addView), this.selection.bind("add", this.addView), this.selection.bind("reset", this.resetView)
            }, u.prototype.flushAndReplaceSelection = function (e) {
                var t, n;
                return n = function () {
                    var n, r, i;
                    i = [];
                    for (n = 0, r = e.length; n < r; n++) t = e[n], i.push(this.collection.get("person_" + t));
                    return i
                }.call(this), n.push(new this.collection.model, new this.collection.model, new this.collection.model), this.selection.reset(n)
            }, u.prototype.viewConstructorFor = function (n) {
                return n.isGroup() ? t : e
            }, u.prototype.createView = function (e) {
                var t, n;
                return t = this.viewConstructorFor(e), n = new t({
                        model: e,
                        collection: this.collection,
                        selection: this.selection,
                        parent: this
                    }), n.bind("replace", this.replaceView)
            }, u.prototype.addView = function (e) {
                var t;
                return t = this.createView(e), t.appendTo(this.el)
            }, u.prototype.replaceView = function (e, t) {
                var n;
                return n = this.createView(t), n.replace(e.el), this.focusNextField(n.el)
            }, u.prototype.resetView = function () {
                return $(this.el).html(""), this.selection.each(this.addView)
            }, u.prototype.updateNewSuperpowersPrompt = function () {
                return bcx.currentPerson.isAdmin() && _.any(this.selection.newPeople()) ? $(this.el).next("#new_superpowers_prompt").show() : $(this.el).next("#new_superpowers_prompt").hide()
            }, u.prototype.lastFieldFocused = function (e) {
                if (this.$("div.blank.field").size() === 1) return this.selection.add(new this.collection.model)
            }, u.prototype.inviteeBlur = function () {
                return this.updateNewSuperpowersPrompt(), this.lastFieldFocused()
            }, u.prototype.focusNextField = function (e) {
                return $(e).next("div.field").find(this.firsthumanInput).focus()
            }, u.prototype.focus = function () {
                return this.$(this.firsthumanInput).focus()
            }, u.prototype.reset = function () {
                return this.selection.reset([new this.collection.model, new this.collection.model, new this.collection.model])
            }, u.prototype.reload = function () {
                return this.collection = new n($(this.el).data("people"), {
                        disabledIds: this.disabledIds
                    }), this.reset()
            }, u
        }(bcx.View), r = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return o(t, e), t.prototype.add = function (e, n) {
                var r, i, s, o;
                n == null && (n = {}), _.isArray(e) || (e = [e]);
                for (s = 0, o = e.length; s < o; s++) i = e[s], (r = this.getByCid(i.cid)) && this.remove(r, n);
                return t.__super__.add.call(this, e, n)
            }, t.prototype.replace = function (e, t) {
                return this.remove(t), this.remove(e, {
                        silent: !0
                    }), this.add(t, {
                        silent: !0
                    }), t.isGroup() && this.add(t.members().enabled(), {
                        silent: !0
                    }), e.trigger("replace", t), this.trigger("replace", e, t)
            }, t.prototype.newPeople = function () {
                return _.select(this.models, function (e) {
                    return e.isNewlyInvitedPerson()
                })
            }, t
        }(Backbone.Collection)
    }.call(this),
    function () {
        $("[data-behavior~=access-toggle] input:checkbox").live("change", function (e) {
            var t, n, r, i, s, o, u, a, f, l, c, h;
            t = $(this), u = t.closest(".self").length > 0, s = t.is(":checked"), h = s ? "grant" : "revoke", n = t.closest("[data-bucket-id]"), o = n.attr("data-group-type"), r = n.attr("data-bucket-id"), i = o === "project_template" ? "project" : o, c = n.closest("[data-person-id]").attr("data-person-id"), l = "/" + i + "s/" + r + "/accesses", n.addClass("busy");
            if (!s && !confirm("This person will no longer be able to access this " + o.replace(/_/, " ") + ". Is this what you want?")) {
                t[0].checked = !0, n.removeClass("busy");
                return
            }
            return a = function (e, r, i) {
                return n.removeClass("busy"), t[0].checked = !s, alert("The " + h + ' operation failed. Please try again.\n\nThe error was "' + i + '" (' + r + ")")
            }, f = function (e, t, r) {
                return u && h === "revoke" ? n.remove() : n.removeClass("busy")
            }, h === "grant" ? $.ajax(l, {
                    data: {
                        invitees: [{
                                id: c
                            }
                        ]
                    },
                    type: "POST",
                    error: a,
                    success: f
                }) : $.ajax("" + l + "/null?person_id=" + c, {
                    type: "DELETE",
                    error: a,
                    success: f
                })
        }), $("[data-behavior~=grant-all]").live("click", function (e) {
            var t, n, r, i, s, o;
            return e.preventDefault(), r = $(this), i = r.attr("href"), n = r.data("group-type"), t = $("table.accesses tr[data-group-type~=" + n + "]"), t.addClass("busy"), s = function (e, n, r) {
                return alert('Access could not be granted. Please try again.\n\nThe error was "' + r + '" (' + n + ")"), t.removeClass("busy")
            }, o = function (e, n, r) {
                return t.removeClass("busy"), t.find("input:checkbox").prop("checked", !0)
            }, $.ajax(i, {
                    type: "POST",
                    error: s,
                    success: o
                })
        }), $("[data-behavior~=revoke-all]").live("click", function (e) {
            var t, n, r, i, s, o, u;
            return e.preventDefault(), r = $(this), s = r.closest(".self").length > 0, i = r.attr("href"), n = r.data("group-type"), t = $("table.accesses tr[data-group-type~=" + n + "]"), t.addClass("busy"), o = function (e, n, r) {
                return alert('Access could not be revoked. Please try again.\n\nThe error was "' + r + '" (' + n + ")"), t.removeClass("busy")
            }, u = function (e, n, r) {
                return t.removeClass("busy"), s ? t.remove() : t.find("input:checkbox").prop("checked", !1)
            }, $.ajax(i, {
                    type: "DELETE",
                    error: o,
                    success: u
                })
        }), bcx.on("page:update", "install invitee field lists", function () {
            return $("form[data-behavior~=invite] [data-behavior~=invitees]").install("behavior for invitee fields", function (e) {
                return e.each(function (e, t) {
                    var n;
                    return n = new bcx.views.InviteeFieldList({
                            el: t
                        }), n.render(), n.focus(), $(t).data("view", n)
                })
            })
        }), bcx.on("page:change", "lazily load invitees", function () {
            var e;
            e = $("form[data-behavior~=invite]:not([data-behavior~=email-only]) [data-behavior~=invitees]");
            if (e.length > 0) return e.addClass("loading"), $.getJSON("/invitees.json", function (t) {
                var n, r, i, s;
                e.removeClass("loading"), (n = e.data("people", t).data("view")) != null && n.reload();
                if (((r = (i = document.activeElement) != null ? i.tagName : void 0) != null ? r : "BODY") === "BODY") return (s = e.data("people", t).data("view")) != null ? s.focus() : void 0
            })
        }), $("article.access [data-behavior~=invite]").live("click", function (e) {
            var t, n, r;
            r = $(this), t = r.closest("article.access"), n = t.find("[data-role~=invite_display]");
            if (r.is(".activated")) return;
            return r.data("deactivated_html", r.html()), r.html(r.attr("data-activated-text")), r.addClass("activated"), r.bind("ajax:success", function (e, t) {
                var i, s;
                return r.unbind("ajax:success", arguments.callee), r.animate({
                        opacity: 0
                    }, 150, "linear", function () {
                        return r.html(r.data("deactivated_html")), r.removeClass("activated"), r.delay(1e3).animate({
                                opacity: 1
                            }, 300, "linear")
                    }), s = n.find("div:first-child"), i = s.clone(!0), i.find("time").replaceWith(t), n.append(i), s.delay(300).animate({
                        "margin-top": -s.height()
                    }, 300, "easeOutQuad", function () {
                        return s.remove()
                    })
            })
        }), $("article.access [data-behavior~=revoke]").live("ajax:before", function (e) {
            var t;
            return t = $(this).closest("article.access"), t.addClass("revoking")
        }), bcx.on("page:update", 'apply "many" class to section.accesses', function () {
            var e;
            e = $("section.accesses > div.added");
            if (e.size() === 0) return;
            return e.find("> article").size() > 1 ? e.addClass("many") : e.removeClass("many")
        }), bcx.on("page:update", "install superpower slider", function () {
            return $("[data-behavior~=slider]:visible").slider()
        }), $("[data-behavior~=invite] [data-behavior~=slider]").live("slider:slide", function (e) {
            return $("form[data-behavior~=invite]").focus().blur()
        })
    }.call(this),
    function () {
        var e;
        bcx.on("page:update", "watch unfinished exports", function () {
            return $("[data-behavior~=export_status]").each(function () {
                var t;
                t = $(this);
                if (t.data("status") === "processing" && !t.data("watching")) return e(t)
            })
        }), $("[data-behavior=start_export]").live("click", function (t) {
            var n;
            return t.preventDefault(), n = $(this).closest("[data-behavior~=export_status]"), n.attr("data-status", "processing"), $.post($(this).data("url"), function (t) {
                return n.data("url", t.url), e(n)
            })
        }), e = function (e) {
            var t;
            return e.data("watching", !0), setTimeout(t = function () {
                var n = this;
                return $.getJSON(e.data("url")).done(function (n) {
                    var r, i;
                    return n.status === "finished" ? (n.chunks < 2 ? (i = "" + n.url + ".zip", r = "false") : (i = n.url, r = "true"), e.find("[data-role=download]").attr("href", i).attr("data-stacker", r), e.attr("data-status", "finished")) : setTimeout(t, 1e4)
                })
            }, 1e4)
        }
    }.call(this),
    function () {
        $("[data-behavior~=account_name]").live("expand", function (e) {
            return $("input[type=text]").focus()
        }), $("form[data-behavior=migrate_account]").on("ajax:before", function (e) {
            return $(this).addClass("busy")
        }), $(document).on("click", "a[data-behavior=unlink_account]", function (e) {
            return $(this).closest("span").addClass("busy")
        }), $("form[data-behavior~=change_plan]").on("ajax:before", function (e) {
            return $(this).addClass("busy")
        }), $("form[data-behavior~=account_upgrade_form]").live("ajax:before", function (e) {
            var t;
            return t = $(this).find("[data-role~=account_upgrade_submit]"), t.html(""), t.addClass("busy")
        }), $("[data-behavior~=account_upgrade_confirmation]").live("click", function (e) {
            return $("[data-role~=account_upgrade_notice]").hide(), $("[data-role~=account_upgrade_wrapper]").fadeIn("fast"), !1
        })
    }.call(this),
    function () {
        var e;
        e = function (e) {
            if (e.keyCode === $.ui.keyCode.ENTER) return e.preventDefault(), $("textarea.body").focus()
        }, $("article.announcement.edit textarea:first, article.message.edit textarea:first").live("keypress", e), $("article.announcement.new").live("expand", function (t) {
            var n;
            return n = $(this).find("textarea").first(), n.focus(), n.bind("keypress", e)
        }).live("collapse", function (e) {
            return $(this).find("form").resetForm(), $(this).find("[data-behavior~=wysiwyg_toolbar]").hide()
        }).live("wysiwyg:focus", function (e) {
            return $(this).find("[data-behavior~=wysiwyg_toolbar]").slideDown("fast")
        }), bcx.on("page:change", "remove new features flag", function () {
            if ($("[data-behavior~=remove_new_features_flag]").length) return $(".announcements_link").remove(), $("nav").removeClass("has_announcements")
        })
    }.call(this),
    function () {
        var e, t, n;
        n = function () {
            return _($("img[src*=asset1]")).each(function (e) {
                return $(e).attr("src", $(e).attr("src").replace(/asset1/, "public"))
            })
        }, e = function () {
            return _($("a[href*=asset1]")).each(function (e) {
                return $(e).attr("href", $(e).attr("href").replace(/asset1/, "public"))
            })
        }, t = function () {
            var e;
            e = $("div.panel").attr("data-behavior");
            if (!/read_only/.test(e)) return $("div.panel").attr("data-behavior", "read_only " + e)
        }, bcx.on("page:update", "turn page anonymous", function () {
            if ($("body.anonymous").length) return n(), e(), t(), bcx.avatars.removeLinks()
        }), $("a.download").live("hover", function () {
            if ($("body.anonymous").length && /asset1/.test($(this).attr("href"))) return $(this).attr("href", $(this).attr("href").replace(/asset1/, "public"))
        })
    }.call(this),
    function () {
        bcx.on("page:change", "annotate active sheet with file_drop_target behavior attribute", function () {
            return $("div.sheet:not(.inactive) [data-behavior~=file_drop_target]").size() === 0 ? $("html").removeBehavior("file_drop_target") : $("html").addBehavior("file_drop_target")
        }), $("article[data-behavior~=file_drop_target]").live("file:drop", function (e, t) {
            return Beanstalk.logEvent("fileAttached", "byDragToMessage"), $(this).find("form").attachFiles(t), $(this).expand(), e.stopPropagation()
        }), $("div.sheet.project > div.sheet_body .has_buttons button, section:has(article.new)").live("file:drop", function (e, t) {
            return Beanstalk.logEvent("fileAttached", "byDragToMessage"), $(this).closest("section").find("form").attachFiles(t), $(this).closest("section").find("article.new").expand(), e.stopPropagation()
        }), $("html").live("file:drop", function (e, t) {
            var n;
            return Beanstalk.logEvent("fileAttached", "byDragToWindow"), $("article.new.expanded").length > 0 ? n = $("article.new.expanded") : $("article.upload.new").length > 0 ? n = $("article.upload.new") : $("article.message.new").length > 0 ? n = $("article.message.new") : $("article.comment.new").length > 0 && (n = $("article.comment.new")), n.show().expand().slideIntoView({
                    duration: "slow"
                }), n.find("form").attachFiles(t)
        }), $(".file_input_button input").live("click", function () {
            return Beanstalk.logEvent("fileAttached", "byManualSelection")
        }), $("[data-behavior~=trashed_attachment_alert]").live("click", function (e) {
            return alert("This file can't be opened because it's in the trash. To open this file, first bring it back from the trash.")
        }), bcx.on("page:change", 'apply "no_thumbs" class to section.attachments.grouped_by_date', function () {
            var e;
            if ($("div.sheet.project > div.sheet_body section.attachments.grouped_by_date").length) {
                e = $("div.sheet.project > div.sheet_body section.attachments.grouped_by_date");
                if (e.find("img.thumbnail").length === 0) return e.addClass("no_thumbs")
            }
        })
    }.call(this),
    function () {
        var e, t, n = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, r = {}.hasOwnProperty,
            i = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var n in t) r.call(t, n) && (e[n] = t[n]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        bcx.Autoview = function (r) {
            function s(e) {
                var t;
                this.identifier = e.identifier, this.render = n(this.render, this), (t = this.className) == null && (this.className = this.name), this.id = this.constructor.idFor(this.identifier), this.subviews = [], s.__super__.constructor.apply(this, arguments), $(this.el).attr("data-autoview", "")
            }
            return i(s, r), s.views = {}, s.constructors = {}, s.viewName = function (e) {
                return this.constructors[e] = this, this.prototype.name = e
            }, s.constructorFor = function (e) {
                return this.constructors[e]
            }, s.get = function (e, t) {
                return t == null && (t = "singleton"), this.views[this.constructorFor(e).idFor(t)]
            }, s.idFor = function (e) {
                return "" + this.prototype.name + "_" + e
            }, s.findOrCreate = function (e) {
                var t, n, r;
                return e == null && (e = "singleton"), (r = (t = this.views)[n = this.idFor(e)]) != null ? r : t[n] = new this({
                        identifier: e
                    })
            }, s.install = function (e) {
                var t, n, r;
                return t = $(e), n = this.constructorFor(t.data("autoview-name")), r = n.findOrCreate(t.data("autoview-identifier")), r.install(e), r
            }, s.uninstall = function (e) {
                var t;
                return (t = this.views[$(e).attr("id")]) != null ? t.uninstall() : void 0
            }, s.prototype.render = function () {
                return this.uninstallSubviews(), $(this.el).html(this.renderContents()), this.installSubviews(), $(this.el).trigger("autoview:render"), this.afterRender(), this
            }, s.prototype.afterRender = function () {}, s.prototype.renderContents = function () {
                return $("<div>").html("" + this.renderTemplate(this.name)).contents()
            }, s.prototype.install = function (e) {
                return this.placeholder && this.uninstall(), this.render(), $(e).replaceWith(this.el), this.delegateEvents(), this.placeholder = e, this.afterInstall()
            }, s.prototype.afterInstall = function () {}, s.prototype.uninstall = function () {
                if (!this.placeholder) return;
                return this.beforeUninstall(), $(this.el).replaceWith(this.placeholder), this.placeholder = null
            }, s.prototype.beforeUninstall = function () {}, s.prototype.unregister = function () {
                return this.uninstall(), delete this.constructor.views[this.constructor.idFor(this.identifier)]
            }, s.prototype.installSubviews = function () {
                return this.subviews = e(this.el)
            }, s.prototype.uninstallSubviews = function () {
                return t(this.el), this.subviews = []
            }, s.prototype.findSubviewByName = function (e) {
                return _.find(this.subviews, function (t) {
                    return t.name === e
                })
            }, s.prototype.findSubviewById = function (e) {
                return _.find(this.subviews, function (t) {
                    return t.id === e
                })
            }, s
        }(bcx.View), e = function (e) {
            var t, n, r, i, s;
            i = $(e).find("[data-autoview-name]"), s = [];
            for (n = 0, r = i.length; n < r; n++) t = i[n], s.push(bcx.Autoview.install(t));
            return s
        }, t = function (e) {
            var t, n, r, i, s;
            i = $(e).find("[data-autoview]"), s = [];
            for (n = 0, r = i.length; n < r; n++) t = i[n], s.push(bcx.Autoview.uninstall(t));
            return s
        }, bcx.on("page:beforechange page:change page:update", "install autoviews", function () {
            return e("body")
        }), $("div.sheet").live("beforeSheetSave", function () {
            return t(this)
        })
    }.call(this),
    function () {
        bcx.avatars = {}, bcx.avatars.removeLinks = function () {
            return _($("img.avatar")).each(function (e) {
                return $(e).parent("a").replaceWith(e)
            })
        }
    }.call(this),
    function () {
        var e;
        e = function () {
            var e, t;
            if (t = $(":hidden[name=recurrence_starts_at]").val()) return e = CalendarDate.parse(t), bcx.calendarEvents.models[0].addRecurrencesInRange(e.previous(), e.next())
        }, $("button[data-behavior~=new_calendar_event]").live("click", function (e) {
            var t, n, r, i;
            return $("div.sheet.calendar_events").removeClass("blank_slate"), r = "" + bcx.currentBucket.constructor.modelName + ":" + bcx.currentBucket.id + "-new_calendar_event", n = (i = bcx.Autoview.get("project_calendar_event_editor", r)) != null ? i : bcx.Autoview.get("template_calendar_event_editor", r), n.renderWithCalendarEvent(new bcx.models.CalendarEvent({
                        summary: "New event"
                    })), t = $("article.calendar_event.new"), t.expand(), n.autofocus(), e.preventDefault()
        }), $("[data-behavior~=trash_calendar_event]").live("click", function (e) {
            return e.preventDefault(), $.ajax($(this).url(), {
                    type: "POST",
                    error: function () {
                        return console.warn("failure!")
                    }
                }), !1
        }), $("[data-behavior~=edit_calendar_event_form]").live("click", function (t) {
            var n, r, i, s, o;
            return $("#calendar_event").hide(), $("#calendar_event_form").show(), e(), r = bcx.calendarEvents.get($(this).data("calendar-event-id")), s = "" + bcx.currentBucket.constructor.modelName + ":" + bcx.currentBucket.get("id") + "-" + r.get("id"), i = (o = bcx.Autoview.get("project_calendar_event_editor", s)) != null ? o : bcx.Autoview.get("template_calendar_event_editor", s), i.renderWithCalendarEvent(r), i.autofocus(), n = $(i.el).find("[data-behavior~=lazy_load_subscribers]"), $.ajax(n.url(), {
                    success: function (e) {
                        return n.html(e), bcx.installAdhocSubscribers()
                    }
                }), !1
        }), $("[data-behavior~=delete_action]").live("click", function (t) {
            var n, r;
            if ($("[data-behavior~=recurring_cancel]").length) return e(), n = bcx.calendarEvents.get($(this).data("calendar-event-id")), r = bcx.Autoview.get("calendar_event_editor/recurrence_prompt"), r.calendarEvent = n, r.destroy()
        }), $("article.calendar_event.new").live("expand", function (e) {
            return $("textarea").live("keypress", function (e) {
                if (e.keyCode === $.ui.keyCode.ENTER) return $(this).attr("name") === "summary" ? $(this).closest("form").find("textarea[name=description]").focus() : $(this).attr("name") === "description" && $(this).closest("form").find("input.date").first().focus().select(), e.preventDefault()
            }), $("section.upcoming_events_blank_slate").hide()
        }), $("article.calendar_event.new").live("collapse", function (e) {
            $("section.upcoming_events_blank_slate").show();
            if (!bcx.currentProject.get("calendar_events_count")) return $("div.sheet.calendar_events").addClass("blank_slate")
        }), bcx.on("page:change", 'click the new calendar event button if the location hash is "#create"', function () {
            if (window.location.hash === "#create") return $("button[data-behavior~=new_calendar_event]").click()
        }), $("button[data-behavior~=jump_to_new_calendar_event]").live("click", function (e) {
            return window.location = $(this).data("url")
        })
    }.call(this),
    function () {}.call(this),
    function () {
        var e;
        e = "div.calendar_event_editor", $("#ui-datepicker-div, .ui-datepicker-next, .ui-datepicker-prev").live("click", function (e) {
            return e.stopImmediatePropagation()
        }), $("aside.calendar_list div.subscribable[data-behavior~=expandable]").live("beforeexpand", function (e) {
            return e.stopImmediatePropagation()
        }), $(".calendar_event_editor_form textarea[name=description]").live("keypress", function (e) {
            if (e.keyCode === $.ui.keyCode.ENTER) return e.preventDefault()
        }), $("section.calendars ul li").live("mouseenter", function (e) {
            return $(this).addClass("zoomable")
        }), $("section.calendars ul li").live("mouseleave", function (e) {
            return $(this).removeClass("zoomable")
        }), $(document).on("panelDisplayed", function (e) {
            return bcx.calendarDisplay.zoomOut()
        }), bcx.on("page:update", 'remove "initial_load" class from .panel.calendar', function () {
            return $("#workspace > .container > .panel.calendar").removeClass("initial_load")
        }), bcx.on("page:change", "ensure peopleAndGroups collection is reloaded after page change", function () {
            return bcx.peopleAndGroups.loadedWithAccesses = !1
        })
    }.call(this),
    function () {
        $("a[data-role~=cancel]").live("click", function (e) {
            return $(this).closest("[data-behavior~=expandable]").collapse(), e.preventDefault()
        })
    }.call(this),
    function () {
        var e;
        $("article.comment.new").live("expand", function (e) {
            var t;
            if (e.target !== this) return;
            $(this).slideIntoView({
                    duration: "slow"
                }), t = $("[data-subscribers]");
            if (t.html() === "") return $.ajax(t.data("subscribers"), {
                    dataType: "html",
                    success: function (e) {
                        return t.hide().html(e), setTimeout(function () {
                            return t.fadeIn()
                        }, 1), bcx.installAdhocSubscribers()
                    }
                })
        }), e = function (e) {
            var t, n, r;
            return r = e.find("textarea").val(), t = e.find("ul.pending_attachments li"), n = e.find("input[type=submit]"), r.match(/^\s*$/) && t.length === 0
        }, $("article.comment.new form").live("ajax:before", function (t) {
            if (e($(t.target))) return console.log("cowardly refusing to save an empty comment"), t.stopPropagation(), !1
        }), $("article.comment span.time > span a").live("click", function () {
            return $(this).closest("span").addClass("busy")
        })
    }.call(this),
    function () {
        bcx.on("page:beforechange page:change", "set bcx.currentBucket", function () {
            var e, t, n, r, i;
            if (r = location.pathname.match(/\/(projects|calendars)\/(\d+)/)) i = [r[1], r[2]], t = i[0], n = i[1], (e = bcx[t].get(n)) || (bcx[t].add({
                        id: n
                    }), e = bcx[t].get(n));
            return bcx.currentBucket = bcx.currentProject = e
        })
    }.call(this),
    function () {
        var e = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        bcx.on("page:update", "update subscribers_sentence content for subscribables", function () {
            var e, t, n = this;
            e = $("div.subscribable[data-behavior~=expandable]");
            if (e.length) {
                if (!(t = e.attr("data-subscribers"))) return;
                return e.find("[data-behavior~=subscribers_sentence]").html(function () {
                    return _.chain(JSON.parse(t)).reject(function (e) {
                        return e.id === bcx.currentPerson.id
                    }).reject(function (e) {
                        return e.wants_notifications === !1
                    }).pluck("name").value().join(", ").replace(/,\s([^,]+)$/, " and $1")
                })
            }
        }), bcx.on("page:update", "replace cached avatar images", function () {
            if (bcx.currentPerson != null) return $("img[data-current-person-avatar]").attr("src", bcx.currentPerson.avatarUrl()).attr("title", bcx.currentPerson.get("name"))
        }), bcx.on("page:update", "remove elements not visible to the current person", function () {
            return $("[data-visible-to]").each(function () {
                var t, n, r;
                n = $(this).attr("data-visible-to").split(/\s/), t = parseInt($(this).closest("[data-creator-id]").data("creator-id"));
                if (_.include(n, "admin") && bcx.currentPerson.isAdmin()) return;
                if (_.include(n, "creator") && bcx.currentPerson.id === t) return;
                if (_.include(n, "accountManager") && bcx.currentPerson.isAccountManager()) return;
                if (_.include(n, "groupMember") && (r = bcx.currentPerson.id, e.call($(this).closest("[data-group-member-ids]").data("group-member-ids"), r) >= 0)) return;
                return $(this).remove()
            }), $("[data-hidden-from]").each(function () {
                var e, t;
                t = $(this).attr("data-hidden-from").split(/\s/), e = parseInt($(this).closest("[data-creator-id]").data("creator-id"));
                if (_.include(t, "admin") && bcx.currentPerson.admin || _.include(t, "creator") && bcx.currentPerson.id === e || _.include(t, "accountManager") && bcx.currentPerson.isAccountManager()) return $(this).remove()
            })
        })
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            };
        e = function () {
            function e(e) {
                var n = this;
                this.$form = e, this.commit = t(this.commit, this), this.unlock = t(this.unlock, this), this.startEditing = t(this.startEditing, this), this.editBody = t(this.editBody, this), this.editTitle = t(this.editTitle, this), this.editing = !1, this.saveBody = _.throttle(this.commit, 500), this.$form.on("change keyup paste", "textarea.body", this.editBody), this.saveTitle = _.debounce(this.commit, 5e3), this.$form.on("change keydown keyup paste", "textarea.name", this.editTitle), this.idle = _.debounce(this.unlock, 2e3), this.$form.on("blur", "textarea", this.idle), this.counterId = (new Date).getTime(), this.counter = 0, window.onbeforeunload = function () {
                    n.unlock()
                }
            }
            return e.prototype.editTitle = function (e) {
                this.startEditing(), this.saveTitle();
                if (e.keyCode === $.ui.keyCode.ENTER) return e.preventDefault(), this.$form.find("textarea.body").focus()
            }, e.prototype.editBody = function () {
                return this.startEditing(), this.saveBody()
            }, e.prototype.startEditing = function () {
                return this.editing = !0, $("[data-pen=dropped-theirs]").hide(), $("[data-pen=holding-theirs]").hide(), $("[data-pen=holding-yours]").show()
            }, e.prototype.unlock = function () {
                if (this.editing) return this.commit({
                        lock: !1
                    }, function () {
                        return $("[data-pen=holding-yours]").hide()
                    })
            }, e.prototype.commit = function (e, t) {
                var n, r, i = this;
                if (this.editing) return this.counter += 1, this.editing = (r = e != null ? e.lock : void 0) != null ? r : !0, n = this.$form.serialize() + ("&lock=" + this.editing + "&cid=" + this.counterId + "&counter=" + this.counter), $.ajax({
                        type: "PUT",
                        url: this.$form.attr("action"),
                        data: n
                    }).done(function () {
                        return i.editing && i.idle(), typeof t == "function" ? t() : void 0
                    })
            }, e
        }(), $(document).on("page:update", function () {
            return $("article.editable_document form").install("editor", function (t) {
                return window.currentDocumentEditor = new e(t), setTimeout(function () {
                    if (window.location.hash === "") return t.find("textarea.name").focus()
                }, 10)
            })
        }), $("section.documents.attachments").on("touchstart", "[data-behavior=link_container]", function () {
            return Stacker.workspace.visit($(this).find("a[href]:first").attr("href")), !1
        }), $("div.sheet.document [data-behavior~=document_version_link]").live("stackerLinkClicked", function (e, t) {
            return t.replaceSheet = !0
        })
    }.call(this),
    function () {
        var e, t, n;
        n = function () {
            var e, t;
            return e = $("[data-behavior~=confirm_dropbox_rekey]"), t = e.find("> div"), e.hide(), t.find("div.rekey_confirm").show(), t.find("div.rekey_success").hide(), t.css({
                    "background-color": ""
                })
        }, $("div.dropbox_notify input[type=checkbox]").live("click", function (e) {
            var t, n;
            return t = $(this).closest("form"), n = t.find("input[type=checkbox]:checked"), n.length ? $("[data-behavior~=notify_selected_button]").attr("disabled", !1) : $("[data-behavior~=notify_selected_button]").attr("disabled", !0)
        }), $("[data-behavior~=notify_all_button]").live("click", function (e) {
            return e.preventDefault(), $(":checkbox").prop("checked", !0), $("form").submit()
        }), $("[data-behavior~=notify_selected_button]").live("click", function (e) {
            var t, n;
            e.preventDefault(), t = $(this).closest("form"), n = t.find("input[type=checkbox]:checked");
            if (n.length) return t.submit()
        }), $("section.tutorial [data-behavior~=select_on_focus]").live("click", function (e) {
            return $(this).select()
        }), $("section.tutorial [data-behavior~=toggle_dropbox_rekey]").live("click", function (e) {
            var t;
            return t = $(this).closest("section").find("[data-behavior~=confirm_dropbox_rekey]"), t.slideToggle(200, "easeOutQuad"), e.preventDefault()
        }), $("section.tutorial [data-behavior~=submit_dropbox_rekey]").live("click", function (e) {
            var t, n, r, i = this;
            return r = $(this).closest("section").find("[data-behavior~=confirm_dropbox_rekey] > div"), t = $(this).closest("section").find("[data-behavior~=dropbox_address]"), n = $(this).closest("p.submit"), n.addClass("busy"), $.ajax($(this).data("path"), {
                    type: "POST",
                    success: function (e, i, s) {
                        return n.removeClass("busy"), r.find("div.rekey_confirm").hide(), r.find("div.rekey_success").show(), r.animate({
                                "background-color": "#390"
                            }), t.highlight(), t.is("input") ? t.val(t.val().replace(/(project-[0-9]+)-[^@]+/, "$1-" + e.dropbox_key)) : t.html(t.html().replace(/(project-[0-9]+)-[^@]+/, "$1-" + e.dropbox_key))
                    }
                }), e.preventDefault()
        }), e = function (e) {
            var t, r;
            return t = $("a[data-tutorial='" + e + "']"), r = $("section[data-tutorial='" + e + "']"), $("[data-behavior~=toggle_tutorial]").removeClass("selected"), t.addClass("selected"), $("section[data-behavior~=tutorial]").hide(), r.fadeIn(), n()
        }, t = function () {
            var t;
            if (!$("div.sheet.dropbox a[data-tutorial]").length) return;
            return window.location.hash ? (t = window.location.hash.slice(1), e(t)) : e("discussions", !1)
        }, $(window).on("hashchange", t), bcx.on("page:change", "load dropbox tutorial from hash", t), $("[data-behavior~=toggle_tutorial]").live("stackerLinkClicked", function () {
            return !1
        })
    }.call(this),
    function () {
        $("a[data-behavior~=edit_identity]").live("click", function (e) {
            return e.preventDefault(), window.location = $(this).attr("href") + ("?origin=" + encodeURIComponent(window.location))
        })
    }.call(this),
    function () {
        var e, t, n, r;
        r = [/.*\.(png|jpg|gif|jpeg)\b/, /.*viewscreencasts.com\/.*/, /.*screenr.com\/.*/, /maps\.google\.com\/maps\?.*/, /maps\.google\.com\/\?.*/, /maps\.google\.com\/maps\/ms\?.*/, /cl\.ly\/.*/, /cl\.ly\/.*\/content/, /d\.pr\/.*/, /.*youtube\.com\/watch.*/, /.*\.youtube\.com\/v\/.*/, /youtu\.be\/.*/, /.*\.youtube\.com\/.*#.*\/.*/, /m\.youtube\.com\/watch.*/, /m\.youtube\.com\/index.*/, /.*\.youtube\.com\/profile.*/, /.*\.youtube\.com\/view_play_list.*/, /.*\.youtube\.com\/playlist.*/, /.*twitch\.tv\/.*/, /.*justin\.tv\/.*\/b\/.*/, /.*justin\.tv\/.*\/w\/.*/, /www\.ustream\.tv\/recorded\/.*/, /www\.ustream\.tv\/channel\/.*/, /www\.ustream\.tv\/.*/, /.*twitvid\.com\/.*/, /blip\.tv\/.*\/.*/, /.*\.blip\.tv\/.*\/.*/, /video\.google\.com\/videoplay\?.*/, /.*revver\.com\/video\/.*/, /video\.yahoo\.com\/watch\/.*\/.*/, /video\.yahoo\.com\/network\/.*/, /sports\.yahoo\.com\/video\/.*/, /.*viddler\.com\/explore\/.*\/videos\/.*/, /www\.vimeo\.com\/groups\/.*\/videos\/.*/, /vimeo\.com\/groups\/.*\/videos\/.*/, /www\.vimeo\.com\/[0-9]+/, /vimeo\.com\/[0-9]+/, /vimeo\.com\/m\/#\/.*/, /streamio\.com\/.*/, /s3m\.io\/.*/], n = new RegExp("https*://" + function () {
            var e, n, i;
            i = [];
            for (e = 0, n = r.length; e < n; e++) t = r[e], i.push(t.source);
            return i
        }().join("|"), "i"), e = /https?:\/\/(?:www\.)?dropbox\.com/i, $.embedly.defaults.key = "c279bf201ad211e1a5be4040d3dc5c07", $.embedly.defaults.maxWidth = 540, $.embedly.defaults.secure = !0, $.embedly.defaults.wmode = "transparent", $.embedly.defaults.urlRe = {
            test: function (t) {
                return e.test(t) ? !1 : n.test(t)
            }
        }, bcx.on("page:update", "load embed.ly content", function () {
            return $("[data-embeddable]").install("embed.ly content", function (e) {
                return e.find("a").each(function () {
                    if (!$(this).parents("pre").length) return $(this).embedly()
                })
            })
        })
    }.call(this);
    var Emoji = {
        names: ["+1", "-1", "100", "1234", "8ball", "a", "ab", "abc", "abcd", "accept", "aerial_tramway", "airplane", "alarm_clock", "alien", "ambulance", "anchor", "angel", "anger", "angry", "anguished", "ant", "apple", "aquarius", "aries", "arrow_backward", "arrow_double_down", "arrow_double_up", "arrow_down", "arrow_down_small", "arrow_forward", "arrow_heading_down", "arrow_heading_up", "arrow_left", "arrow_lower_left", "arrow_lower_right", "arrow_right", "arrow_right_hook", "arrow_up", "arrow_up_down", "arrow_up_small", "arrow_upper_left", "arrow_upper_right", "arrows_clockwise", "arrows_counterclockwise", "art", "articulated_lorry", "astonished", "athletic_shoe", "atm", "b", "baby", "baby_bottle", "baby_chick", "baby_symbol", "back", "baggage_claim", "balloon", "ballot_box_with_check", "bamboo", "banana", "bangbang", "bank", "bar_chart", "barber", "baseball", "basketball", "bath", "bathtub", "battery", "bear", "bee", "beer", "beers", "beetle", "beginner", "bell", "bento", "bicyclist", "bike", "bikini", "bird", "birthday", "black_circle", "black_joker", "black_large_square", "black_medium_small_square", "black_medium_square", "black_nib", "black_small_square", "black_square_button", "blossom", "blowfish", "blue_book", "blue_car", "blue_heart", "blush", "boar", "boat", "bomb", "book", "bookmark", "bookmark_tabs", "books", "boom", "boot", "bouquet", "bow", "bowling", "bowtie", "boy", "bread", "bride_with_veil", "bridge_at_night", "briefcase", "broken_heart", "bug", "bulb", "bullettrain_front", "bullettrain_side", "bus", "busstop", "bust_in_silhouette", "busts_in_silhouette", "cactus", "cake", "calendar", "calling", "camel", "camera", "cancer", "candy", "capital_abcd", "capricorn", "car", "card_index", "carousel_horse", "cat", "cat2", "cd", "chart", "chart_with_downwards_trend", "chart_with_upwards_trend", "checkered_flag", "cherries", "cherry_blossom", "chestnut", "chicken", "children_crossing", "chocolate_bar", "christmas_tree", "church", "cinema", "circus_tent", "city_sunrise", "city_sunset", "cl", "clap", "clapper", "clipboard", "clock1", "clock10", "clock1030", "clock11", "clock1130", "clock12", "clock1230", "clock130", "clock2", "clock230", "clock3", "clock330", "clock4", "clock430", "clock5", "clock530", "clock6", "clock630", "clock7", "clock730", "clock8", "clock830", "clock9", "clock930", "closed_book", "closed_lock_with_key", "closed_umbrella", "cloud", "clubs", "cn", "cocktail", "coffee", "cold_sweat", "collision", "computer", "confetti_ball", "confounded", "confused", "congratulations", "construction", "construction_worker", "convenience_store", "cookie", "cool", "cop", "copyright", "corn", "couple", "couple_with_heart", "couplekiss", "cow", "cow2", "credit_card", "crescent_moon", "crocodile", "crossed_flags", "crown", "cry", "crying_cat_face", "crystal_ball", "cupid", "curly_loop", "currency_exchange", "curry", "custard", "customs", "cyclone", "dancer", "dancers", "dango", "dart", "dash", "date", "de", "deciduous_tree", "department_store", "diamond_shape_with_a_dot_inside", "diamonds", "disappointed", "disappointed_relieved", "dizzy", "dizzy_face", "do_not_litter", "dog", "dog2", "dollar", "dolls", "dolphin", "door", "doughnut", "dragon", "dragon_face", "dress", "dromedary_camel", "droplet", "dvd", "e-mail", "ear", "ear_of_rice", "earth_africa", "earth_americas", "earth_asia", "egg", "eggplant", "eight", "eight_pointed_black_star", "eight_spoked_asterisk", "electric_plug", "elephant", "email", "end", "envelope", "envelope_with_arrow", "es", "euro", "european_castle", "european_post_office", "evergreen_tree", "exclamation", "expressionless", "eyeglasses", "eyes", "facepunch", "factory", "fallen_leaf", "family", "fast_forward", "fax", "fearful", "feelsgood", "feet", "ferris_wheel", "file_folder", "finnadie", "fire", "fire_engine", "fireworks", "first_quarter_moon", "first_quarter_moon_with_face", "fish", "fish_cake", "fishing_pole_and_fish", "fist", "five", "flags", "flashlight", "floppy_disk", "flower_playing_cards", "flushed", "foggy", "football", "footprints", "fork_and_knife", "fountain", "four", "four_leaf_clover", "fr", "free", "fried_shrimp", "fries", "frog", "frowning", "fuelpump", "full_moon", "full_moon_with_face", "game_die", "gb", "gem", "gemini", "ghost", "gift", "gift_heart", "girl", "globe_with_meridians", "goat", "goberserk", "godmode", "golf", "grapes", "green_apple", "green_book", "green_heart", "grey_exclamation", "grey_question", "grimacing", "grin", "grinning", "guardsman", "guitar", "gun", "haircut", "hamburger", "hammer", "hamster", "hand", "handbag", "hankey", "hash", "hatched_chick", "hatching_chick", "headphones", "hear_no_evil", "heart", "heart_decoration", "heart_eyes", "heart_eyes_cat", "heartbeat", "heartpulse", "hearts", "heavy_check_mark", "heavy_division_sign", "heavy_dollar_sign", "heavy_exclamation_mark", "heavy_minus_sign", "heavy_multiplication_x", "heavy_plus_sign", "helicopter", "herb", "hibiscus", "high_brightness", "high_heel", "hocho", "honey_pot", "honeybee", "horse", "horse_racing", "hospital", "hotel", "hotsprings", "hourglass", "hourglass_flowing_sand", "house", "house_with_garden", "hurtrealbad", "hushed", "ice_cream", "icecream", "id", "ideograph_advantage", "imp", "inbox_tray", "incoming_envelope", "information_desk_person", "information_source", "innocent", "interrobang", "iphone", "it", "izakaya_lantern", "jack_o_lantern", "japan", "japanese_castle", "japanese_goblin", "japanese_ogre", "jeans", "joy", "joy_cat", "jp", "key", "keycap_ten", "kimono", "kiss", "kissing", "kissing_cat", "kissing_closed_eyes", "kissing_heart", "kissing_smiling_eyes", "koala", "koko", "kr", "lantern", "large_blue_circle", "large_blue_diamond", "large_orange_diamond", "last_quarter_moon", "last_quarter_moon_with_face", "laughing", "leaves", "ledger", "left_luggage", "left_right_arrow", "leftwards_arrow_with_hook", "lemon", "leo", "leopard", "libra", "light_rail", "link", "lips", "lipstick", "lock", "lock_with_ink_pen", "lollipop", "loop", "loudspeaker", "love_hotel", "love_letter", "low_brightness", "m", "mag", "mag_right", "mahjong", "mailbox", "mailbox_closed", "mailbox_with_mail", "mailbox_with_no_mail", "man", "man_with_gua_pi_mao", "man_with_turban", "mans_shoe", "maple_leaf", "mask", "massage", "meat_on_bone", "mega", "melon", "memo", "mens", "metal", "metro", "microphone", "microscope", "milky_way", "minibus", "minidisc", "mobile_phone_off", "money_with_wings", "moneybag", "monkey", "monkey_face", "monorail", "moon", "mortar_board", "mount_fuji", "mountain_bicyclist", "mountain_cableway", "mountain_railway", "mouse", "mouse2", "movie_camera", "moyai", "muscle", "mushroom", "musical_keyboard", "musical_note", "musical_score", "mute", "nail_care", "name_badge", "neckbeard", "necktie", "negative_squared_cross_mark", "neutral_face", "new", "new_moon", "new_moon_with_face", "newspaper", "ng", "nine", "no_bell", "no_bicycles", "no_entry", "no_entry_sign", "no_good", "no_mobile_phones", "no_mouth", "no_pedestrians", "no_smoking", "non-potable_water", "nose", "notebook", "notebook_with_decorative_cover", "notes", "nut_and_bolt", "o", "o2", "ocean", "octocat", "octopus", "oden", "office", "ok", "ok_hand", "ok_woman", "older_man", "older_woman", "on", "oncoming_automobile", "oncoming_bus", "oncoming_police_car", "oncoming_taxi", "one", "open_book", "open_file_folder", "open_hands", "open_mouth", "ophiuchus", "orange_book", "outbox_tray", "ox", "package", "page_facing_up", "page_with_curl", "pager", "palm_tree", "panda_face", "paperclip", "parking", "part_alternation_mark", "partly_sunny", "passport_control", "paw_prints", "peach", "pear", "pencil", "pencil2", "penguin", "pensive", "performing_arts", "persevere", "person_frowning", "person_with_blond_hair", "person_with_pouting_face", "phone", "pig", "pig2", "pig_nose", "pill", "pineapple", "pisces", "pizza", "point_down", "point_left", "point_right", "point_up", "point_up_2", "police_car", "poodle", "poop", "post_office", "postal_horn", "postbox", "potable_water", "pouch", "poultry_leg", "pound", "pouting_cat", "pray", "princess", "punch", "purple_heart", "purse", "pushpin", "put_litter_in_its_place", "question", "rabbit", "rabbit2", "racehorse", "radio", "radio_button", "rage", "rage1", "rage2", "rage3", "rage4", "railway_car", "rainbow", "raised_hand", "raised_hands", "raising_hand", "ram", "ramen", "rat", "recycle", "red_car", "red_circle", "registered", "relaxed", "relieved", "repeat", "repeat_one", "restroom", "revolving_hearts", "rewind", "ribbon", "rice", "rice_ball", "rice_cracker", "rice_scene", "ring", "rocket", "roller_coaster", "rooster", "rose", "rotating_light", "round_pushpin", "rowboat", "ru", "rugby_football", "runner", "running", "running_shirt_with_sash", "sa", "sagittarius", "sailboat", "sake", "sandal", "santa", "satellite", "satisfied", "saxophone", "school", "school_satchel", "scissors", "scorpius", "scream", "scream_cat", "scroll", "seat", "secret", "see_no_evil", "seedling", "seven", "shaved_ice", "sheep", "shell", "ship", "shipit", "shirt", "shit", "shoe", "shower", "signal_strength", "six", "six_pointed_star", "ski", "skull", "sleeping", "sleepy", "slot_machine", "small_blue_diamond", "small_orange_diamond", "small_red_triangle", "small_red_triangle_down", "smile", "smile_cat", "smiley", "smiley_cat", "smiling_imp", "smirk", "smirk_cat", "smoking", "snail", "snake", "snowboarder", "snowflake", "snowman", "sob", "soccer", "soon", "sos", "sound", "space_invader", "spades", "spaghetti", "sparkle", "sparkler", "sparkles", "sparkling_heart", "speak_no_evil", "speaker", "speech_balloon", "speedboat", "squirrel", "star", "star2", "stars", "station", "statue_of_liberty", "steam_locomotive", "stew", "straight_ruler", "strawberry", "stuck_out_tongue", "stuck_out_tongue_closed_eyes", "stuck_out_tongue_winking_eye", "sun_with_face", "sunflower", "sunglasses", "sunny", "sunrise", "sunrise_over_mountains", "surfer", "sushi", "suspect", "suspension_railway", "sweat", "sweat_drops", "sweat_smile", "sweet_potato", "swimmer", "symbols", "syringe", "tada", "tanabata_tree", "tangerine", "taurus", "taxi", "tea", "telephone", "telephone_receiver", "telescope", "tennis", "tent", "thought_balloon", "three", "thumbsdown", "thumbsup", "ticket", "tiger", "tiger2", "tired_face", "tm", "toilet", "tokyo_tower", "tomato", "tongue", "top", "tophat", "tractor", "traffic_light", "train", "train2", "tram", "triangular_flag_on_post", "triangular_ruler", "trident", "triumph", "trolleybus", "trollface", "trophy", "tropical_drink", "tropical_fish", "truck", "trumpet", "tshirt", "tulip", "turtle", "tv", "twisted_rightwards_arrows", "two", "two_hearts", "two_men_holding_hands", "two_women_holding_hands", "u5272", "u5408", "u55b6", "u6307", "u6708", "u6709", "u6e80", "u7121", "u7533", "u7981", "u7a7a", "uk", "umbrella", "unamused", "underage", "unlock", "up", "us", "v", "vertical_traffic_light", "vhs", "vibration_mode", "video_camera", "video_game", "violin", "virgo", "volcano", "vs", "walking", "waning_crescent_moon", "waning_gibbous_moon", "warning", "watch", "water_buffalo", "watermelon", "wave", "wavy_dash", "waxing_crescent_moon", "waxing_gibbous_moon", "wc", "weary", "wedding", "whale", "whale2", "wheelchair", "white_check_mark", "white_circle", "white_flower", "white_large_square", "white_medium_small_square", "white_medium_square", "white_small_square", "white_square_button", "wind_chime", "wine_glass", "wink", "wolf", "woman", "womans_clothes", "womans_hat", "womens", "worried", "wrench", "x", "yellow_heart", "yen", "yum", "zap", "zero", "zzz"],
        paths: {
            "+1": "https://d3dma7a8zw52bz.cloudfront.net/emoji/+1.png",
            "-1": "https://d3dma7a8zw52bz.cloudfront.net/emoji/-1.png",
            100: "https://d3dma7a8zw52bz.cloudfront.net/emoji/100.png",
            1234: "https://d3dma7a8zw52bz.cloudfront.net/emoji/1234.png",
            "8ball": "https://d3dma7a8zw52bz.cloudfront.net/emoji/8ball.png",
            a: "https://d3dma7a8zw52bz.cloudfront.net/emoji/a.png",
            ab: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ab.png",
            abc: "https://d3dma7a8zw52bz.cloudfront.net/emoji/abc.png",
            abcd: "https://d3dma7a8zw52bz.cloudfront.net/emoji/abcd.png",
            accept: "https://d3dma7a8zw52bz.cloudfront.net/emoji/accept.png",
            aerial_tramway: "https://d3dma7a8zw52bz.cloudfront.net/emoji/aerial_tramway.png",
            airplane: "https://d3dma7a8zw52bz.cloudfront.net/emoji/airplane.png",
            alarm_clock: "https://d3dma7a8zw52bz.cloudfront.net/emoji/alarm_clock.png",
            alien: "https://d3dma7a8zw52bz.cloudfront.net/emoji/alien.png",
            ambulance: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ambulance.png",
            anchor: "https://d3dma7a8zw52bz.cloudfront.net/emoji/anchor.png",
            angel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/angel.png",
            anger: "https://d3dma7a8zw52bz.cloudfront.net/emoji/anger.png",
            angry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/angry.png",
            anguished: "https://d3dma7a8zw52bz.cloudfront.net/emoji/anguished.png",
            ant: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ant.png",
            apple: "https://d3dma7a8zw52bz.cloudfront.net/emoji/apple.png",
            aquarius: "https://d3dma7a8zw52bz.cloudfront.net/emoji/aquarius.png",
            aries: "https://d3dma7a8zw52bz.cloudfront.net/emoji/aries.png",
            arrow_backward: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_backward.png",
            arrow_double_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_double_down.png",
            arrow_double_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_double_up.png",
            arrow_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_down.png",
            arrow_down_small: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_down_small.png",
            arrow_forward: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_forward.png",
            arrow_heading_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_heading_down.png",
            arrow_heading_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_heading_up.png",
            arrow_left: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_left.png",
            arrow_lower_left: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_lower_left.png",
            arrow_lower_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_lower_right.png",
            arrow_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_right.png",
            arrow_right_hook: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_right_hook.png",
            arrow_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_up.png",
            arrow_up_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_up_down.png",
            arrow_up_small: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_up_small.png",
            arrow_upper_left: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_upper_left.png",
            arrow_upper_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_upper_right.png",
            arrows_clockwise: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrows_clockwise.png",
            arrows_counterclockwise: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrows_counterclockwise.png",
            art: "https://d3dma7a8zw52bz.cloudfront.net/emoji/art.png",
            articulated_lorry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/articulated_lorry.png",
            astonished: "https://d3dma7a8zw52bz.cloudfront.net/emoji/astonished.png",
            athletic_shoe: "https://d3dma7a8zw52bz.cloudfront.net/emoji/athletic_shoe.png",
            atm: "https://d3dma7a8zw52bz.cloudfront.net/emoji/atm.png",
            b: "https://d3dma7a8zw52bz.cloudfront.net/emoji/b.png",
            baby: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baby.png",
            baby_bottle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baby_bottle.png",
            baby_chick: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baby_chick.png",
            baby_symbol: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baby_symbol.png",
            back: "https://d3dma7a8zw52bz.cloudfront.net/emoji/back.png",
            baggage_claim: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baggage_claim.png",
            balloon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/balloon.png",
            ballot_box_with_check: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ballot_box_with_check.png",
            bamboo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bamboo.png",
            banana: "https://d3dma7a8zw52bz.cloudfront.net/emoji/banana.png",
            bangbang: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bangbang.png",
            bank: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bank.png",
            bar_chart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bar_chart.png",
            barber: "https://d3dma7a8zw52bz.cloudfront.net/emoji/barber.png",
            baseball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baseball.png",
            basketball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/basketball.png",
            bath: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bath.png",
            bathtub: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bathtub.png",
            battery: "https://d3dma7a8zw52bz.cloudfront.net/emoji/battery.png",
            bear: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bear.png",
            bee: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bee.png",
            beer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/beer.png",
            beers: "https://d3dma7a8zw52bz.cloudfront.net/emoji/beers.png",
            beetle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/beetle.png",
            beginner: "https://d3dma7a8zw52bz.cloudfront.net/emoji/beginner.png",
            bell: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bell.png",
            bento: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bento.png",
            bicyclist: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bicyclist.png",
            bike: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bike.png",
            bikini: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bikini.png",
            bird: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bird.png",
            birthday: "https://d3dma7a8zw52bz.cloudfront.net/emoji/birthday.png",
            black_circle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_circle.png",
            black_joker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_joker.png",
            black_large_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_large_square.png",
            black_medium_small_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_medium_small_square.png",
            black_medium_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_medium_square.png",
            black_nib: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_nib.png",
            black_small_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_small_square.png",
            black_square_button: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_square_button.png",
            blossom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blossom.png",
            blowfish: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blowfish.png",
            blue_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blue_book.png",
            blue_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blue_car.png",
            blue_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blue_heart.png",
            blush: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blush.png",
            boar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boar.png",
            boat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boat.png",
            bomb: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bomb.png",
            book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/book.png",
            bookmark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bookmark.png",
            bookmark_tabs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bookmark_tabs.png",
            books: "https://d3dma7a8zw52bz.cloudfront.net/emoji/books.png",
            boom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boom.png",
            boot: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boot.png",
            bouquet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bouquet.png",
            bow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bow.png",
            bowling: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bowling.png",
            bowtie: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bowtie.png",
            boy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boy.png",
            bread: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bread.png",
            bride_with_veil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bride_with_veil.png",
            bridge_at_night: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bridge_at_night.png",
            briefcase: "https://d3dma7a8zw52bz.cloudfront.net/emoji/briefcase.png",
            broken_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/broken_heart.png",
            bug: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bug.png",
            bulb: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bulb.png",
            bullettrain_front: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bullettrain_front.png",
            bullettrain_side: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bullettrain_side.png",
            bus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bus.png",
            busstop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/busstop.png",
            bust_in_silhouette: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bust_in_silhouette.png",
            busts_in_silhouette: "https://d3dma7a8zw52bz.cloudfront.net/emoji/busts_in_silhouette.png",
            cactus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cactus.png",
            cake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cake.png",
            calendar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/calendar.png",
            calling: "https://d3dma7a8zw52bz.cloudfront.net/emoji/calling.png",
            camel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/camel.png",
            camera: "https://d3dma7a8zw52bz.cloudfront.net/emoji/camera.png",
            cancer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cancer.png",
            candy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/candy.png",
            capital_abcd: "https://d3dma7a8zw52bz.cloudfront.net/emoji/capital_abcd.png",
            capricorn: "https://d3dma7a8zw52bz.cloudfront.net/emoji/capricorn.png",
            car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/car.png",
            card_index: "https://d3dma7a8zw52bz.cloudfront.net/emoji/card_index.png",
            carousel_horse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/carousel_horse.png",
            cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cat.png",
            cat2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cat2.png",
            cd: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cd.png",
            chart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chart.png",
            chart_with_downwards_trend: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chart_with_downwards_trend.png",
            chart_with_upwards_trend: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chart_with_upwards_trend.png",
            checkered_flag: "https://d3dma7a8zw52bz.cloudfront.net/emoji/checkered_flag.png",
            cherries: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cherries.png",
            cherry_blossom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cherry_blossom.png",
            chestnut: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chestnut.png",
            chicken: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chicken.png",
            children_crossing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/children_crossing.png",
            chocolate_bar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chocolate_bar.png",
            christmas_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/christmas_tree.png",
            church: "https://d3dma7a8zw52bz.cloudfront.net/emoji/church.png",
            cinema: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cinema.png",
            circus_tent: "https://d3dma7a8zw52bz.cloudfront.net/emoji/circus_tent.png",
            city_sunrise: "https://d3dma7a8zw52bz.cloudfront.net/emoji/city_sunrise.png",
            city_sunset: "https://d3dma7a8zw52bz.cloudfront.net/emoji/city_sunset.png",
            cl: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cl.png",
            clap: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clap.png",
            clapper: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clapper.png",
            clipboard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clipboard.png",
            clock1: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock1.png",
            clock10: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock10.png",
            clock1030: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock1030.png",
            clock11: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock11.png",
            clock1130: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock1130.png",
            clock12: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock12.png",
            clock1230: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock1230.png",
            clock130: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock130.png",
            clock2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock2.png",
            clock230: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock230.png",
            clock3: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock3.png",
            clock330: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock330.png",
            clock4: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock4.png",
            clock430: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock430.png",
            clock5: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock5.png",
            clock530: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock530.png",
            clock6: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock6.png",
            clock630: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock630.png",
            clock7: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock7.png",
            clock730: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock730.png",
            clock8: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock8.png",
            clock830: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock830.png",
            clock9: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock9.png",
            clock930: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock930.png",
            closed_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/closed_book.png",
            closed_lock_with_key: "https://d3dma7a8zw52bz.cloudfront.net/emoji/closed_lock_with_key.png",
            closed_umbrella: "https://d3dma7a8zw52bz.cloudfront.net/emoji/closed_umbrella.png",
            cloud: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cloud.png",
            clubs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clubs.png",
            cn: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cn.png",
            cocktail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cocktail.png",
            coffee: "https://d3dma7a8zw52bz.cloudfront.net/emoji/coffee.png",
            cold_sweat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cold_sweat.png",
            collision: "https://d3dma7a8zw52bz.cloudfront.net/emoji/collision.png",
            computer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/computer.png",
            confetti_ball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/confetti_ball.png",
            confounded: "https://d3dma7a8zw52bz.cloudfront.net/emoji/confounded.png",
            confused: "https://d3dma7a8zw52bz.cloudfront.net/emoji/confused.png",
            congratulations: "https://d3dma7a8zw52bz.cloudfront.net/emoji/congratulations.png",
            construction: "https://d3dma7a8zw52bz.cloudfront.net/emoji/construction.png",
            construction_worker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/construction_worker.png",
            convenience_store: "https://d3dma7a8zw52bz.cloudfront.net/emoji/convenience_store.png",
            cookie: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cookie.png",
            cool: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cool.png",
            cop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cop.png",
            copyright: "https://d3dma7a8zw52bz.cloudfront.net/emoji/copyright.png",
            corn: "https://d3dma7a8zw52bz.cloudfront.net/emoji/corn.png",
            couple: "https://d3dma7a8zw52bz.cloudfront.net/emoji/couple.png",
            couple_with_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/couple_with_heart.png",
            couplekiss: "https://d3dma7a8zw52bz.cloudfront.net/emoji/couplekiss.png",
            cow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cow.png",
            cow2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cow2.png",
            credit_card: "https://d3dma7a8zw52bz.cloudfront.net/emoji/credit_card.png",
            crescent_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crescent_moon.png",
            crocodile: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crocodile.png",
            crossed_flags: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crossed_flags.png",
            crown: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crown.png",
            cry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cry.png",
            crying_cat_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crying_cat_face.png",
            crystal_ball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crystal_ball.png",
            cupid: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cupid.png",
            curly_loop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/curly_loop.png",
            currency_exchange: "https://d3dma7a8zw52bz.cloudfront.net/emoji/currency_exchange.png",
            curry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/curry.png",
            custard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/custard.png",
            customs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/customs.png",
            cyclone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cyclone.png",
            dancer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dancer.png",
            dancers: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dancers.png",
            dango: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dango.png",
            dart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dart.png",
            dash: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dash.png",
            date: "https://d3dma7a8zw52bz.cloudfront.net/emoji/date.png",
            de: "https://d3dma7a8zw52bz.cloudfront.net/emoji/de.png",
            deciduous_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/deciduous_tree.png",
            department_store: "https://d3dma7a8zw52bz.cloudfront.net/emoji/department_store.png",
            diamond_shape_with_a_dot_inside: "https://d3dma7a8zw52bz.cloudfront.net/emoji/diamond_shape_with_a_dot_inside.png",
            diamonds: "https://d3dma7a8zw52bz.cloudfront.net/emoji/diamonds.png",
            disappointed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/disappointed.png",
            disappointed_relieved: "https://d3dma7a8zw52bz.cloudfront.net/emoji/disappointed_relieved.png",
            dizzy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dizzy.png",
            dizzy_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dizzy_face.png",
            do_not_litter: "https://d3dma7a8zw52bz.cloudfront.net/emoji/do_not_litter.png",
            dog: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dog.png",
            dog2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dog2.png",
            dollar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dollar.png",
            dolls: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dolls.png",
            dolphin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dolphin.png",
            door: "https://d3dma7a8zw52bz.cloudfront.net/emoji/door.png",
            doughnut: "https://d3dma7a8zw52bz.cloudfront.net/emoji/doughnut.png",
            dragon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dragon.png",
            dragon_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dragon_face.png",
            dress: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dress.png",
            dromedary_camel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dromedary_camel.png",
            droplet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/droplet.png",
            dvd: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dvd.png",
            "e-mail": "https://d3dma7a8zw52bz.cloudfront.net/emoji/e-mail.png",
            ear: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ear.png",
            ear_of_rice: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ear_of_rice.png",
            earth_africa: "https://d3dma7a8zw52bz.cloudfront.net/emoji/earth_africa.png",
            earth_americas: "https://d3dma7a8zw52bz.cloudfront.net/emoji/earth_americas.png",
            earth_asia: "https://d3dma7a8zw52bz.cloudfront.net/emoji/earth_asia.png",
            egg: "https://d3dma7a8zw52bz.cloudfront.net/emoji/egg.png",
            eggplant: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eggplant.png",
            eight: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eight.png",
            eight_pointed_black_star: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eight_pointed_black_star.png",
            eight_spoked_asterisk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eight_spoked_asterisk.png",
            electric_plug: "https://d3dma7a8zw52bz.cloudfront.net/emoji/electric_plug.png",
            elephant: "https://d3dma7a8zw52bz.cloudfront.net/emoji/elephant.png",
            email: "https://d3dma7a8zw52bz.cloudfront.net/emoji/email.png",
            end: "https://d3dma7a8zw52bz.cloudfront.net/emoji/end.png",
            envelope: "https://d3dma7a8zw52bz.cloudfront.net/emoji/envelope.png",
            envelope_with_arrow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/envelope_with_arrow.png",
            es: "https://d3dma7a8zw52bz.cloudfront.net/emoji/es.png",
            euro: "https://d3dma7a8zw52bz.cloudfront.net/emoji/euro.png",
            european_castle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/european_castle.png",
            european_post_office: "https://d3dma7a8zw52bz.cloudfront.net/emoji/european_post_office.png",
            evergreen_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/evergreen_tree.png",
            exclamation: "https://d3dma7a8zw52bz.cloudfront.net/emoji/exclamation.png",
            expressionless: "https://d3dma7a8zw52bz.cloudfront.net/emoji/expressionless.png",
            eyeglasses: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eyeglasses.png",
            eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eyes.png",
            facepunch: "https://d3dma7a8zw52bz.cloudfront.net/emoji/facepunch.png",
            factory: "https://d3dma7a8zw52bz.cloudfront.net/emoji/factory.png",
            fallen_leaf: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fallen_leaf.png",
            family: "https://d3dma7a8zw52bz.cloudfront.net/emoji/family.png",
            fast_forward: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fast_forward.png",
            fax: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fax.png",
            fearful: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fearful.png",
            feelsgood: "https://d3dma7a8zw52bz.cloudfront.net/emoji/feelsgood.png",
            feet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/feet.png",
            ferris_wheel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ferris_wheel.png",
            file_folder: "https://d3dma7a8zw52bz.cloudfront.net/emoji/file_folder.png",
            finnadie: "https://d3dma7a8zw52bz.cloudfront.net/emoji/finnadie.png",
            fire: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fire.png",
            fire_engine: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fire_engine.png",
            fireworks: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fireworks.png",
            first_quarter_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/first_quarter_moon.png",
            first_quarter_moon_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/first_quarter_moon_with_face.png",
            fish: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fish.png",
            fish_cake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fish_cake.png",
            fishing_pole_and_fish: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fishing_pole_and_fish.png",
            fist: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fist.png",
            five: "https://d3dma7a8zw52bz.cloudfront.net/emoji/five.png",
            flags: "https://d3dma7a8zw52bz.cloudfront.net/emoji/flags.png",
            flashlight: "https://d3dma7a8zw52bz.cloudfront.net/emoji/flashlight.png",
            floppy_disk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/floppy_disk.png",
            flower_playing_cards: "https://d3dma7a8zw52bz.cloudfront.net/emoji/flower_playing_cards.png",
            flushed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/flushed.png",
            foggy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/foggy.png",
            football: "https://d3dma7a8zw52bz.cloudfront.net/emoji/football.png",
            footprints: "https://d3dma7a8zw52bz.cloudfront.net/emoji/footprints.png",
            fork_and_knife: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fork_and_knife.png",
            fountain: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fountain.png",
            four: "https://d3dma7a8zw52bz.cloudfront.net/emoji/four.png",
            four_leaf_clover: "https://d3dma7a8zw52bz.cloudfront.net/emoji/four_leaf_clover.png",
            fr: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fr.png",
            free: "https://d3dma7a8zw52bz.cloudfront.net/emoji/free.png",
            fried_shrimp: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fried_shrimp.png",
            fries: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fries.png",
            frog: "https://d3dma7a8zw52bz.cloudfront.net/emoji/frog.png",
            frowning: "https://d3dma7a8zw52bz.cloudfront.net/emoji/frowning.png",
            fuelpump: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fuelpump.png",
            full_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/full_moon.png",
            full_moon_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/full_moon_with_face.png",
            game_die: "https://d3dma7a8zw52bz.cloudfront.net/emoji/game_die.png",
            gb: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gb.png",
            gem: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gem.png",
            gemini: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gemini.png",
            ghost: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ghost.png",
            gift: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gift.png",
            gift_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gift_heart.png",
            girl: "https://d3dma7a8zw52bz.cloudfront.net/emoji/girl.png",
            globe_with_meridians: "https://d3dma7a8zw52bz.cloudfront.net/emoji/globe_with_meridians.png",
            goat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/goat.png",
            goberserk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/goberserk.png",
            godmode: "https://d3dma7a8zw52bz.cloudfront.net/emoji/godmode.png",
            golf: "https://d3dma7a8zw52bz.cloudfront.net/emoji/golf.png",
            grapes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grapes.png",
            green_apple: "https://d3dma7a8zw52bz.cloudfront.net/emoji/green_apple.png",
            green_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/green_book.png",
            green_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/green_heart.png",
            grey_exclamation: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grey_exclamation.png",
            grey_question: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grey_question.png",
            grimacing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grimacing.png",
            grin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grin.png",
            grinning: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grinning.png",
            guardsman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/guardsman.png",
            guitar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/guitar.png",
            gun: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gun.png",
            haircut: "https://d3dma7a8zw52bz.cloudfront.net/emoji/haircut.png",
            hamburger: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hamburger.png",
            hammer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hammer.png",
            hamster: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hamster.png",
            hand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hand.png",
            handbag: "https://d3dma7a8zw52bz.cloudfront.net/emoji/handbag.png",
            hankey: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hankey.png",
            hash: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hash.png",
            hatched_chick: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hatched_chick.png",
            hatching_chick: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hatching_chick.png",
            headphones: "https://d3dma7a8zw52bz.cloudfront.net/emoji/headphones.png",
            hear_no_evil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hear_no_evil.png",
            heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heart.png",
            heart_decoration: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heart_decoration.png",
            heart_eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heart_eyes.png",
            heart_eyes_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heart_eyes_cat.png",
            heartbeat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heartbeat.png",
            heartpulse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heartpulse.png",
            hearts: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hearts.png",
            heavy_check_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_check_mark.png",
            heavy_division_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_division_sign.png",
            heavy_dollar_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_dollar_sign.png",
            heavy_exclamation_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_exclamation_mark.png",
            heavy_minus_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_minus_sign.png",
            heavy_multiplication_x: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_multiplication_x.png",
            heavy_plus_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_plus_sign.png",
            helicopter: "https://d3dma7a8zw52bz.cloudfront.net/emoji/helicopter.png",
            herb: "https://d3dma7a8zw52bz.cloudfront.net/emoji/herb.png",
            hibiscus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hibiscus.png",
            high_brightness: "https://d3dma7a8zw52bz.cloudfront.net/emoji/high_brightness.png",
            high_heel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/high_heel.png",
            hocho: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hocho.png",
            honey_pot: "https://d3dma7a8zw52bz.cloudfront.net/emoji/honey_pot.png",
            honeybee: "https://d3dma7a8zw52bz.cloudfront.net/emoji/honeybee.png",
            horse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/horse.png",
            horse_racing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/horse_racing.png",
            hospital: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hospital.png",
            hotel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hotel.png",
            hotsprings: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hotsprings.png",
            hourglass: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hourglass.png",
            hourglass_flowing_sand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hourglass_flowing_sand.png",
            house: "https://d3dma7a8zw52bz.cloudfront.net/emoji/house.png",
            house_with_garden: "https://d3dma7a8zw52bz.cloudfront.net/emoji/house_with_garden.png",
            hurtrealbad: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hurtrealbad.png",
            hushed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hushed.png",
            ice_cream: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ice_cream.png",
            icecream: "https://d3dma7a8zw52bz.cloudfront.net/emoji/icecream.png",
            id: "https://d3dma7a8zw52bz.cloudfront.net/emoji/id.png",
            ideograph_advantage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ideograph_advantage.png",
            imp: "https://d3dma7a8zw52bz.cloudfront.net/emoji/imp.png",
            inbox_tray: "https://d3dma7a8zw52bz.cloudfront.net/emoji/inbox_tray.png",
            incoming_envelope: "https://d3dma7a8zw52bz.cloudfront.net/emoji/incoming_envelope.png",
            information_desk_person: "https://d3dma7a8zw52bz.cloudfront.net/emoji/information_desk_person.png",
            information_source: "https://d3dma7a8zw52bz.cloudfront.net/emoji/information_source.png",
            innocent: "https://d3dma7a8zw52bz.cloudfront.net/emoji/innocent.png",
            interrobang: "https://d3dma7a8zw52bz.cloudfront.net/emoji/interrobang.png",
            iphone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/iphone.png",
            it: "https://d3dma7a8zw52bz.cloudfront.net/emoji/it.png",
            izakaya_lantern: "https://d3dma7a8zw52bz.cloudfront.net/emoji/izakaya_lantern.png",
            jack_o_lantern: "https://d3dma7a8zw52bz.cloudfront.net/emoji/jack_o_lantern.png",
            japan: "https://d3dma7a8zw52bz.cloudfront.net/emoji/japan.png",
            japanese_castle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/japanese_castle.png",
            japanese_goblin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/japanese_goblin.png",
            japanese_ogre: "https://d3dma7a8zw52bz.cloudfront.net/emoji/japanese_ogre.png",
            jeans: "https://d3dma7a8zw52bz.cloudfront.net/emoji/jeans.png",
            joy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/joy.png",
            joy_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/joy_cat.png",
            jp: "https://d3dma7a8zw52bz.cloudfront.net/emoji/jp.png",
            key: "https://d3dma7a8zw52bz.cloudfront.net/emoji/key.png",
            keycap_ten: "https://d3dma7a8zw52bz.cloudfront.net/emoji/keycap_ten.png",
            kimono: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kimono.png",
            kiss: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kiss.png",
            kissing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing.png",
            kissing_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing_cat.png",
            kissing_closed_eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing_closed_eyes.png",
            kissing_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing_heart.png",
            kissing_smiling_eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing_smiling_eyes.png",
            koala: "https://d3dma7a8zw52bz.cloudfront.net/emoji/koala.png",
            koko: "https://d3dma7a8zw52bz.cloudfront.net/emoji/koko.png",
            kr: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kr.png",
            lantern: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lantern.png",
            large_blue_circle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/large_blue_circle.png",
            large_blue_diamond: "https://d3dma7a8zw52bz.cloudfront.net/emoji/large_blue_diamond.png",
            large_orange_diamond: "https://d3dma7a8zw52bz.cloudfront.net/emoji/large_orange_diamond.png",
            last_quarter_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/last_quarter_moon.png",
            last_quarter_moon_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/last_quarter_moon_with_face.png",
            laughing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/laughing.png",
            leaves: "https://d3dma7a8zw52bz.cloudfront.net/emoji/leaves.png",
            ledger: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ledger.png",
            left_luggage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/left_luggage.png",
            left_right_arrow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/left_right_arrow.png",
            leftwards_arrow_with_hook: "https://d3dma7a8zw52bz.cloudfront.net/emoji/leftwards_arrow_with_hook.png",
            lemon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lemon.png",
            leo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/leo.png",
            leopard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/leopard.png",
            libra: "https://d3dma7a8zw52bz.cloudfront.net/emoji/libra.png",
            light_rail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/light_rail.png",
            link: "https://d3dma7a8zw52bz.cloudfront.net/emoji/link.png",
            lips: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lips.png",
            lipstick: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lipstick.png",
            lock: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lock.png",
            lock_with_ink_pen: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lock_with_ink_pen.png",
            lollipop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lollipop.png",
            loop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/loop.png",
            loudspeaker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/loudspeaker.png",
            love_hotel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/love_hotel.png",
            love_letter: "https://d3dma7a8zw52bz.cloudfront.net/emoji/love_letter.png",
            low_brightness: "https://d3dma7a8zw52bz.cloudfront.net/emoji/low_brightness.png",
            m: "https://d3dma7a8zw52bz.cloudfront.net/emoji/m.png",
            mag: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mag.png",
            mag_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mag_right.png",
            mahjong: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mahjong.png",
            mailbox: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mailbox.png",
            mailbox_closed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mailbox_closed.png",
            mailbox_with_mail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mailbox_with_mail.png",
            mailbox_with_no_mail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mailbox_with_no_mail.png",
            man: "https://d3dma7a8zw52bz.cloudfront.net/emoji/man.png",
            man_with_gua_pi_mao: "https://d3dma7a8zw52bz.cloudfront.net/emoji/man_with_gua_pi_mao.png",
            man_with_turban: "https://d3dma7a8zw52bz.cloudfront.net/emoji/man_with_turban.png",
            mans_shoe: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mans_shoe.png",
            maple_leaf: "https://d3dma7a8zw52bz.cloudfront.net/emoji/maple_leaf.png",
            mask: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mask.png",
            massage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/massage.png",
            meat_on_bone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/meat_on_bone.png",
            mega: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mega.png",
            melon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/melon.png",
            memo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/memo.png",
            mens: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mens.png",
            metal: "https://d3dma7a8zw52bz.cloudfront.net/emoji/metal.png",
            metro: "https://d3dma7a8zw52bz.cloudfront.net/emoji/metro.png",
            microphone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/microphone.png",
            microscope: "https://d3dma7a8zw52bz.cloudfront.net/emoji/microscope.png",
            milky_way: "https://d3dma7a8zw52bz.cloudfront.net/emoji/milky_way.png",
            minibus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/minibus.png",
            minidisc: "https://d3dma7a8zw52bz.cloudfront.net/emoji/minidisc.png",
            mobile_phone_off: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mobile_phone_off.png",
            money_with_wings: "https://d3dma7a8zw52bz.cloudfront.net/emoji/money_with_wings.png",
            moneybag: "https://d3dma7a8zw52bz.cloudfront.net/emoji/moneybag.png",
            monkey: "https://d3dma7a8zw52bz.cloudfront.net/emoji/monkey.png",
            monkey_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/monkey_face.png",
            monorail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/monorail.png",
            moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/moon.png",
            mortar_board: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mortar_board.png",
            mount_fuji: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mount_fuji.png",
            mountain_bicyclist: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mountain_bicyclist.png",
            mountain_cableway: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mountain_cableway.png",
            mountain_railway: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mountain_railway.png",
            mouse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mouse.png",
            mouse2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mouse2.png",
            movie_camera: "https://d3dma7a8zw52bz.cloudfront.net/emoji/movie_camera.png",
            moyai: "https://d3dma7a8zw52bz.cloudfront.net/emoji/moyai.png",
            muscle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/muscle.png",
            mushroom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mushroom.png",
            musical_keyboard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/musical_keyboard.png",
            musical_note: "https://d3dma7a8zw52bz.cloudfront.net/emoji/musical_note.png",
            musical_score: "https://d3dma7a8zw52bz.cloudfront.net/emoji/musical_score.png",
            mute: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mute.png",
            nail_care: "https://d3dma7a8zw52bz.cloudfront.net/emoji/nail_care.png",
            name_badge: "https://d3dma7a8zw52bz.cloudfront.net/emoji/name_badge.png",
            neckbeard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/neckbeard.png",
            necktie: "https://d3dma7a8zw52bz.cloudfront.net/emoji/necktie.png",
            negative_squared_cross_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/negative_squared_cross_mark.png",
            neutral_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/neutral_face.png",
            "new": "https://d3dma7a8zw52bz.cloudfront.net/emoji/new.png",
            new_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/new_moon.png",
            new_moon_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/new_moon_with_face.png",
            newspaper: "https://d3dma7a8zw52bz.cloudfront.net/emoji/newspaper.png",
            ng: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ng.png",
            nine: "https://d3dma7a8zw52bz.cloudfront.net/emoji/nine.png",
            no_bell: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_bell.png",
            no_bicycles: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_bicycles.png",
            no_entry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_entry.png",
            no_entry_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_entry_sign.png",
            no_good: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_good.png",
            no_mobile_phones: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_mobile_phones.png",
            no_mouth: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_mouth.png",
            no_pedestrians: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_pedestrians.png",
            no_smoking: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_smoking.png",
            "non-potable_water": "https://d3dma7a8zw52bz.cloudfront.net/emoji/non-potable_water.png",
            nose: "https://d3dma7a8zw52bz.cloudfront.net/emoji/nose.png",
            notebook: "https://d3dma7a8zw52bz.cloudfront.net/emoji/notebook.png",
            notebook_with_decorative_cover: "https://d3dma7a8zw52bz.cloudfront.net/emoji/notebook_with_decorative_cover.png",
            notes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/notes.png",
            nut_and_bolt: "https://d3dma7a8zw52bz.cloudfront.net/emoji/nut_and_bolt.png",
            o: "https://d3dma7a8zw52bz.cloudfront.net/emoji/o.png",
            o2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/o2.png",
            ocean: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ocean.png",
            octocat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/octocat.png",
            octopus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/octopus.png",
            oden: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oden.png",
            office: "https://d3dma7a8zw52bz.cloudfront.net/emoji/office.png",
            ok: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ok.png",
            ok_hand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ok_hand.png",
            ok_woman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ok_woman.png",
            older_man: "https://d3dma7a8zw52bz.cloudfront.net/emoji/older_man.png",
            older_woman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/older_woman.png",
            on: "https://d3dma7a8zw52bz.cloudfront.net/emoji/on.png",
            oncoming_automobile: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oncoming_automobile.png",
            oncoming_bus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oncoming_bus.png",
            oncoming_police_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oncoming_police_car.png",
            oncoming_taxi: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oncoming_taxi.png",
            one: "https://d3dma7a8zw52bz.cloudfront.net/emoji/one.png",
            open_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/open_book.png",
            open_file_folder: "https://d3dma7a8zw52bz.cloudfront.net/emoji/open_file_folder.png",
            open_hands: "https://d3dma7a8zw52bz.cloudfront.net/emoji/open_hands.png",
            open_mouth: "https://d3dma7a8zw52bz.cloudfront.net/emoji/open_mouth.png",
            ophiuchus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ophiuchus.png",
            orange_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/orange_book.png",
            outbox_tray: "https://d3dma7a8zw52bz.cloudfront.net/emoji/outbox_tray.png",
            ox: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ox.png",
            "package": "https://d3dma7a8zw52bz.cloudfront.net/emoji/package.png",
            page_facing_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/page_facing_up.png",
            page_with_curl: "https://d3dma7a8zw52bz.cloudfront.net/emoji/page_with_curl.png",
            pager: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pager.png",
            palm_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/palm_tree.png",
            panda_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/panda_face.png",
            paperclip: "https://d3dma7a8zw52bz.cloudfront.net/emoji/paperclip.png",
            parking: "https://d3dma7a8zw52bz.cloudfront.net/emoji/parking.png",
            part_alternation_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/part_alternation_mark.png",
            partly_sunny: "https://d3dma7a8zw52bz.cloudfront.net/emoji/partly_sunny.png",
            passport_control: "https://d3dma7a8zw52bz.cloudfront.net/emoji/passport_control.png",
            paw_prints: "https://d3dma7a8zw52bz.cloudfront.net/emoji/paw_prints.png",
            peach: "https://d3dma7a8zw52bz.cloudfront.net/emoji/peach.png",
            pear: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pear.png",
            pencil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pencil.png",
            pencil2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pencil2.png",
            penguin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/penguin.png",
            pensive: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pensive.png",
            performing_arts: "https://d3dma7a8zw52bz.cloudfront.net/emoji/performing_arts.png",
            persevere: "https://d3dma7a8zw52bz.cloudfront.net/emoji/persevere.png",
            person_frowning: "https://d3dma7a8zw52bz.cloudfront.net/emoji/person_frowning.png",
            person_with_blond_hair: "https://d3dma7a8zw52bz.cloudfront.net/emoji/person_with_blond_hair.png",
            person_with_pouting_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/person_with_pouting_face.png",
            phone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/phone.png",
            pig: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pig.png",
            pig2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pig2.png",
            pig_nose: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pig_nose.png",
            pill: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pill.png",
            pineapple: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pineapple.png",
            pisces: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pisces.png",
            pizza: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pizza.png",
            point_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_down.png",
            point_left: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_left.png",
            point_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_right.png",
            point_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_up.png",
            point_up_2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_up_2.png",
            police_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/police_car.png",
            poodle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/poodle.png",
            poop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/poop.png",
            post_office: "https://d3dma7a8zw52bz.cloudfront.net/emoji/post_office.png",
            postal_horn: "https://d3dma7a8zw52bz.cloudfront.net/emoji/postal_horn.png",
            postbox: "https://d3dma7a8zw52bz.cloudfront.net/emoji/postbox.png",
            potable_water: "https://d3dma7a8zw52bz.cloudfront.net/emoji/potable_water.png",
            pouch: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pouch.png",
            poultry_leg: "https://d3dma7a8zw52bz.cloudfront.net/emoji/poultry_leg.png",
            pound: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pound.png",
            pouting_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pouting_cat.png",
            pray: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pray.png",
            princess: "https://d3dma7a8zw52bz.cloudfront.net/emoji/princess.png",
            punch: "https://d3dma7a8zw52bz.cloudfront.net/emoji/punch.png",
            purple_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/purple_heart.png",
            purse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/purse.png",
            pushpin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pushpin.png",
            put_litter_in_its_place: "https://d3dma7a8zw52bz.cloudfront.net/emoji/put_litter_in_its_place.png",
            question: "https://d3dma7a8zw52bz.cloudfront.net/emoji/question.png",
            rabbit: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rabbit.png",
            rabbit2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rabbit2.png",
            racehorse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/racehorse.png",
            radio: "https://d3dma7a8zw52bz.cloudfront.net/emoji/radio.png",
            radio_button: "https://d3dma7a8zw52bz.cloudfront.net/emoji/radio_button.png",
            rage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage.png",
            rage1: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage1.png",
            rage2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage2.png",
            rage3: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage3.png",
            rage4: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage4.png",
            railway_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/railway_car.png",
            rainbow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rainbow.png",
            raised_hand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/raised_hand.png",
            raised_hands: "https://d3dma7a8zw52bz.cloudfront.net/emoji/raised_hands.png",
            raising_hand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/raising_hand.png",
            ram: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ram.png",
            ramen: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ramen.png",
            rat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rat.png",
            recycle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/recycle.png",
            red_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/red_car.png",
            red_circle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/red_circle.png",
            registered: "https://d3dma7a8zw52bz.cloudfront.net/emoji/registered.png",
            relaxed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/relaxed.png",
            relieved: "https://d3dma7a8zw52bz.cloudfront.net/emoji/relieved.png",
            repeat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/repeat.png",
            repeat_one: "https://d3dma7a8zw52bz.cloudfront.net/emoji/repeat_one.png",
            restroom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/restroom.png",
            revolving_hearts: "https://d3dma7a8zw52bz.cloudfront.net/emoji/revolving_hearts.png",
            rewind: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rewind.png",
            ribbon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ribbon.png",
            rice: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rice.png",
            rice_ball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rice_ball.png",
            rice_cracker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rice_cracker.png",
            rice_scene: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rice_scene.png",
            ring: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ring.png",
            rocket: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rocket.png",
            roller_coaster: "https://d3dma7a8zw52bz.cloudfront.net/emoji/roller_coaster.png",
            rooster: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rooster.png",
            rose: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rose.png",
            rotating_light: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rotating_light.png",
            round_pushpin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/round_pushpin.png",
            rowboat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rowboat.png",
            ru: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ru.png",
            rugby_football: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rugby_football.png",
            runner: "https://d3dma7a8zw52bz.cloudfront.net/emoji/runner.png",
            running: "https://d3dma7a8zw52bz.cloudfront.net/emoji/running.png",
            running_shirt_with_sash: "https://d3dma7a8zw52bz.cloudfront.net/emoji/running_shirt_with_sash.png",
            sa: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sa.png",
            sagittarius: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sagittarius.png",
            sailboat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sailboat.png",
            sake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sake.png",
            sandal: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sandal.png",
            santa: "https://d3dma7a8zw52bz.cloudfront.net/emoji/santa.png",
            satellite: "https://d3dma7a8zw52bz.cloudfront.net/emoji/satellite.png",
            satisfied: "https://d3dma7a8zw52bz.cloudfront.net/emoji/satisfied.png",
            saxophone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/saxophone.png",
            school: "https://d3dma7a8zw52bz.cloudfront.net/emoji/school.png",
            school_satchel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/school_satchel.png",
            scissors: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scissors.png",
            scorpius: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scorpius.png",
            scream: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scream.png",
            scream_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scream_cat.png",
            scroll: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scroll.png",
            seat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/seat.png",
            secret: "https://d3dma7a8zw52bz.cloudfront.net/emoji/secret.png",
            see_no_evil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/see_no_evil.png",
            seedling: "https://d3dma7a8zw52bz.cloudfront.net/emoji/seedling.png",
            seven: "https://d3dma7a8zw52bz.cloudfront.net/emoji/seven.png",
            shaved_ice: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shaved_ice.png",
            sheep: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sheep.png",
            shell: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shell.png",
            ship: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ship.png",
            shipit: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shipit.png",
            shirt: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shirt.png",
            shit: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shit.png",
            shoe: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shoe.png",
            shower: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shower.png",
            signal_strength: "https://d3dma7a8zw52bz.cloudfront.net/emoji/signal_strength.png",
            six: "https://d3dma7a8zw52bz.cloudfront.net/emoji/six.png",
            six_pointed_star: "https://d3dma7a8zw52bz.cloudfront.net/emoji/six_pointed_star.png",
            ski: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ski.png",
            skull: "https://d3dma7a8zw52bz.cloudfront.net/emoji/skull.png",
            sleeping: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sleeping.png",
            sleepy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sleepy.png",
            slot_machine: "https://d3dma7a8zw52bz.cloudfront.net/emoji/slot_machine.png",
            small_blue_diamond: "https://d3dma7a8zw52bz.cloudfront.net/emoji/small_blue_diamond.png",
            small_orange_diamond: "https://d3dma7a8zw52bz.cloudfront.net/emoji/small_orange_diamond.png",
            small_red_triangle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/small_red_triangle.png",
            small_red_triangle_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/small_red_triangle_down.png",
            smile: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smile.png",
            smile_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smile_cat.png",
            smiley: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smiley.png",
            smiley_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smiley_cat.png",
            smiling_imp: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smiling_imp.png",
            smirk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smirk.png",
            smirk_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smirk_cat.png",
            smoking: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smoking.png",
            snail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snail.png",
            snake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snake.png",
            snowboarder: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snowboarder.png",
            snowflake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snowflake.png",
            snowman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snowman.png",
            sob: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sob.png",
            soccer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/soccer.png",
            soon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/soon.png",
            sos: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sos.png",
            sound: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sound.png",
            space_invader: "https://d3dma7a8zw52bz.cloudfront.net/emoji/space_invader.png",
            spades: "https://d3dma7a8zw52bz.cloudfront.net/emoji/spades.png",
            spaghetti: "https://d3dma7a8zw52bz.cloudfront.net/emoji/spaghetti.png",
            sparkle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sparkle.png",
            sparkler: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sparkler.png",
            sparkles: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sparkles.png",
            sparkling_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sparkling_heart.png",
            speak_no_evil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/speak_no_evil.png",
            speaker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/speaker.png",
            speech_balloon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/speech_balloon.png",
            speedboat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/speedboat.png",
            squirrel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/squirrel.png",
            star: "https://d3dma7a8zw52bz.cloudfront.net/emoji/star.png",
            star2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/star2.png",
            stars: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stars.png",
            station: "https://d3dma7a8zw52bz.cloudfront.net/emoji/station.png",
            statue_of_liberty: "https://d3dma7a8zw52bz.cloudfront.net/emoji/statue_of_liberty.png",
            steam_locomotive: "https://d3dma7a8zw52bz.cloudfront.net/emoji/steam_locomotive.png",
            stew: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stew.png",
            straight_ruler: "https://d3dma7a8zw52bz.cloudfront.net/emoji/straight_ruler.png",
            strawberry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/strawberry.png",
            stuck_out_tongue: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stuck_out_tongue.png",
            stuck_out_tongue_closed_eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stuck_out_tongue_closed_eyes.png",
            stuck_out_tongue_winking_eye: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stuck_out_tongue_winking_eye.png",
            sun_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sun_with_face.png",
            sunflower: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunflower.png",
            sunglasses: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunglasses.png",
            sunny: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunny.png",
            sunrise: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunrise.png",
            sunrise_over_mountains: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunrise_over_mountains.png",
            surfer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/surfer.png",
            sushi: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sushi.png",
            suspect: "https://d3dma7a8zw52bz.cloudfront.net/emoji/suspect.png",
            suspension_railway: "https://d3dma7a8zw52bz.cloudfront.net/emoji/suspension_railway.png",
            sweat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sweat.png",
            sweat_drops: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sweat_drops.png",
            sweat_smile: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sweat_smile.png",
            sweet_potato: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sweet_potato.png",
            swimmer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/swimmer.png",
            symbols: "https://d3dma7a8zw52bz.cloudfront.net/emoji/symbols.png",
            syringe: "https://d3dma7a8zw52bz.cloudfront.net/emoji/syringe.png",
            tada: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tada.png",
            tanabata_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tanabata_tree.png",
            tangerine: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tangerine.png",
            taurus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/taurus.png",
            taxi: "https://d3dma7a8zw52bz.cloudfront.net/emoji/taxi.png",
            tea: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tea.png",
            telephone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/telephone.png",
            telephone_receiver: "https://d3dma7a8zw52bz.cloudfront.net/emoji/telephone_receiver.png",
            telescope: "https://d3dma7a8zw52bz.cloudfront.net/emoji/telescope.png",
            tennis: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tennis.png",
            tent: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tent.png",
            thought_balloon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/thought_balloon.png",
            three: "https://d3dma7a8zw52bz.cloudfront.net/emoji/three.png",
            thumbsdown: "https://d3dma7a8zw52bz.cloudfront.net/emoji/thumbsdown.png",
            thumbsup: "https://d3dma7a8zw52bz.cloudfront.net/emoji/thumbsup.png",
            ticket: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ticket.png",
            tiger: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tiger.png",
            tiger2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tiger2.png",
            tired_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tired_face.png",
            tm: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tm.png",
            toilet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/toilet.png",
            tokyo_tower: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tokyo_tower.png",
            tomato: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tomato.png",
            tongue: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tongue.png",
            top: "https://d3dma7a8zw52bz.cloudfront.net/emoji/top.png",
            tophat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tophat.png",
            tractor: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tractor.png",
            traffic_light: "https://d3dma7a8zw52bz.cloudfront.net/emoji/traffic_light.png",
            train: "https://d3dma7a8zw52bz.cloudfront.net/emoji/train.png",
            train2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/train2.png",
            tram: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tram.png",
            triangular_flag_on_post: "https://d3dma7a8zw52bz.cloudfront.net/emoji/triangular_flag_on_post.png",
            triangular_ruler: "https://d3dma7a8zw52bz.cloudfront.net/emoji/triangular_ruler.png",
            trident: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trident.png",
            triumph: "https://d3dma7a8zw52bz.cloudfront.net/emoji/triumph.png",
            trolleybus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trolleybus.png",
            trollface: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trollface.png",
            trophy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trophy.png",
            tropical_drink: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tropical_drink.png",
            tropical_fish: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tropical_fish.png",
            truck: "https://d3dma7a8zw52bz.cloudfront.net/emoji/truck.png",
            trumpet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trumpet.png",
            tshirt: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tshirt.png",
            tulip: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tulip.png",
            turtle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/turtle.png",
            tv: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tv.png",
            twisted_rightwards_arrows: "https://d3dma7a8zw52bz.cloudfront.net/emoji/twisted_rightwards_arrows.png",
            two: "https://d3dma7a8zw52bz.cloudfront.net/emoji/two.png",
            two_hearts: "https://d3dma7a8zw52bz.cloudfront.net/emoji/two_hearts.png",
            two_men_holding_hands: "https://d3dma7a8zw52bz.cloudfront.net/emoji/two_men_holding_hands.png",
            two_women_holding_hands: "https://d3dma7a8zw52bz.cloudfront.net/emoji/two_women_holding_hands.png",
            u5272: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u5272.png",
            u5408: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u5408.png",
            u55b6: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u55b6.png",
            u6307: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u6307.png",
            u6708: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u6708.png",
            u6709: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u6709.png",
            u6e80: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u6e80.png",
            u7121: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u7121.png",
            u7533: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u7533.png",
            u7981: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u7981.png",
            u7a7a: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u7a7a.png",
            uk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/uk.png",
            umbrella: "https://d3dma7a8zw52bz.cloudfront.net/emoji/umbrella.png",
            unamused: "https://d3dma7a8zw52bz.cloudfront.net/emoji/unamused.png",
            underage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/underage.png",
            unlock: "https://d3dma7a8zw52bz.cloudfront.net/emoji/unlock.png",
            up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/up.png",
            us: "https://d3dma7a8zw52bz.cloudfront.net/emoji/us.png",
            v: "https://d3dma7a8zw52bz.cloudfront.net/emoji/v.png",
            vertical_traffic_light: "https://d3dma7a8zw52bz.cloudfront.net/emoji/vertical_traffic_light.png",
            vhs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/vhs.png",
            vibration_mode: "https://d3dma7a8zw52bz.cloudfront.net/emoji/vibration_mode.png",
            video_camera: "https://d3dma7a8zw52bz.cloudfront.net/emoji/video_camera.png",
            video_game: "https://d3dma7a8zw52bz.cloudfront.net/emoji/video_game.png",
            violin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/violin.png",
            virgo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/virgo.png",
            volcano: "https://d3dma7a8zw52bz.cloudfront.net/emoji/volcano.png",
            vs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/vs.png",
            walking: "https://d3dma7a8zw52bz.cloudfront.net/emoji/walking.png",
            waning_crescent_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/waning_crescent_moon.png",
            waning_gibbous_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/waning_gibbous_moon.png",
            warning: "https://d3dma7a8zw52bz.cloudfront.net/emoji/warning.png",
            watch: "https://d3dma7a8zw52bz.cloudfront.net/emoji/watch.png",
            water_buffalo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/water_buffalo.png",
            watermelon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/watermelon.png",
            wave: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wave.png",
            wavy_dash: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wavy_dash.png",
            waxing_crescent_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/waxing_crescent_moon.png",
            waxing_gibbous_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/waxing_gibbous_moon.png",
            wc: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wc.png",
            weary: "https://d3dma7a8zw52bz.cloudfront.net/emoji/weary.png",
            wedding: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wedding.png",
            whale: "https://d3dma7a8zw52bz.cloudfront.net/emoji/whale.png",
            whale2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/whale2.png",
            wheelchair: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wheelchair.png",
            white_check_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_check_mark.png",
            white_circle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_circle.png",
            white_flower: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_flower.png",
            white_large_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_large_square.png",
            white_medium_small_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_medium_small_square.png",
            white_medium_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_medium_square.png",
            white_small_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_small_square.png",
            white_square_button: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_square_button.png",
            wind_chime: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wind_chime.png",
            wine_glass: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wine_glass.png",
            wink: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wink.png",
            wolf: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wolf.png",
            woman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/woman.png",
            womans_clothes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/womans_clothes.png",
            womans_hat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/womans_hat.png",
            womens: "https://d3dma7a8zw52bz.cloudfront.net/emoji/womens.png",
            worried: "https://d3dma7a8zw52bz.cloudfront.net/emoji/worried.png",
            wrench: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wrench.png",
            x: "https://d3dma7a8zw52bz.cloudfront.net/emoji/x.png",
            yellow_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/yellow_heart.png",
            yen: "https://d3dma7a8zw52bz.cloudfront.net/emoji/yen.png",
            yum: "https://d3dma7a8zw52bz.cloudfront.net/emoji/yum.png",
            zap: "https://d3dma7a8zw52bz.cloudfront.net/emoji/zap.png",
            zero: "https://d3dma7a8zw52bz.cloudfront.net/emoji/zero.png",
            zzz: "https://d3dma7a8zw52bz.cloudfront.net/emoji/zzz.png"
        },
        emojify: function (e) {
            return e.replace(/:([a-z0-9\+\-_]+):/g, function (e, t) {
                return Emoji.names.indexOf(t) >= 0 ? '<img alt="' + t + '" height="20" src="' + Emoji.paths[t] + '" style="vertical-align:middle" width="20" />' : ":" + t + ":"
            })
        }
    };
    (function () {
        $("a[data-behavior~=reveal_event_subscribers]").live("click", function (e) {
            return $(this).next("span").toggle(), e.preventDefault()
        }), bcx.on("page:update", "remove redundant restore links", function () {
            var e;
            return e = $("[data-trashed-comment-id]"), e.each(function () {
                var e;
                e = $(this).parent().find("[data-trashed-comment-id~=" + $(this).data("trashed-comment-id") + "]");
                if (e.length > 1) return e.each(function (t) {
                    if (t + 1 !== e.length) return $(this).find("[data-behavior~=restore_comment]").remove()
                })
            })
        })
    }).call(this),
    function () {}.call(this),
    function () {
        bcx.on("page:change", "prepare feedback button", function () {
            var e, t;
            e = $("div.contact_support_button");
            if ($.browser.mobile) return;
            return t = "u=" + document.location.href, bcx.currentPerson != null && (t += "&e=" + bcx.currentPerson.get("email_address") + "&f=" + bcx.currentPerson.get("name") + "&c=" + bcx.currentPerson.get("has_classic_account")), e.find("a").attr("href", "http://basecamp.com/help?" + t), e.show()
        })
    }.call(this),
    function () {
        bcx.Busy = function () {
            function e(e) {
                this.form = $(e)
            }
            return e.prototype.start = function () {
                return this.form.addClass("busy")
            }, e.prototype.stop = function () {
                return this.form.removeClass("busy")
            }, e.prototype.end = function () {
                return this.stop().resetForm()
            }, e
        }(), $("form:not([data-skip_busy])").live("ajax:beforeSend", function (e) {
            return $(this).hasClass("busy") ? !1 : (new bcx.Busy(this)).start()
        }), $("form:not([data-skip_busy])").live("ajax:error", function (e) {
            return (new bcx.Busy(this)).stop(), alert("Sorry, something went wrong. Please try again.")
        }), $("form:not([data-skip_busy]):not([data-behavior~=no_reset])").live("ajax:success", function (e) {
            return (new bcx.Busy(this)).end()
        }), $(document).ready(function () {
            return $("article.edit a.cancel, li.edit_mode a.cancel, div.edit_links a, div.nubbin a").live("click", function () {
                return (new bcx.Busy($(this).parent())).start()
            })
        }), bcx.on("page:update", "stop form-busy animation", function () {
            return (new bcx.Busy($(".busy:not([data-skip_busy])"))).stop()
        })
    }.call(this),
    function () {
        var e;
        e = function () {
            return $("[data-behavior~=appear_on_resize]").show().addClass("showing"), $("[data-behavior~=busy_until_resize]").removeClass("busy"), $("[data-behavior~=resize_to_fit]").contents().find("a").bind("click", function (e) {
                return window.open(this.href), e.preventDefault()
            })
        }, bcx.on("page:beforechange", "hide iframe content until ready", function () {
            return $("[data-behavior~=appear_on_resize]").hide()
        }), bcx.on("page:change", "resize iframe to fit email", function () {
            var t = this;
            return setTimeout(function () {
                return $("[data-behavior~=busy_until_resize]").addClass("busy")
            }, 10), $("[data-behavior~=resize_to_fit]").iframeAutoHeight({
                    debug: !1,
                    minHeight: 100,
                    callback: e
                })
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f, l;
        t = "677854858412", e = null, n = !1, r = {
            client_id: t,
            scope: ["https://www.googleapis.com/auth/drive"]
        }, this.googleClientLoaded = function () {
            var t;
            return t = _.extend(r, {
                    immediate: !0
                }), gapi.auth.authorize(t, function (t) {
                    n = !0;
                    if (t != null ? t.access_token : void 0) e = t.access_token;
                    return f()
                })
        }, this.loadPicker = function () {
            return o("loadPicker", function () {
                return google.load("picker", "1", {
                        callback: function () {
                            return i(u)
                        }
                    })
            })
        }, s = function () {
            return e ? loadPicker() : a(function (t) {
                return (t != null ? t.access_token : void 0) ? (e = t.access_token, loadPicker()) : window.clickedPickerElement = null
            })
        }, l = function () {
            return e = null, gapi.auth.setToken(null), picker.setVisible(!1), s()
        }, u = function (e) {
            var t, n, r, i;
            switch (e.action) {
            case google.picker.Action.PICKED:
                i = e.docs;
                for (n = 0, r = i.length; n < r; n++) t = i[n], t.fileId = t.id;
                return window.clickedPickerElement.attachGoogleDocs(e.docs), window.clickedPickerElement = null;
            case google.picker.Action.CANCEL:
                return window.clickedPickerElement = null
            }
        }, a = function (e) {
            var t;
            return t = _.extend(r, {
                    immediate: !1,
                    approval_prompt: "force",
                    authuser: -1
                }), gapi.auth.authorize(t, e)
        }, i = function (n) {
            var r;
            return r = (new google.picker.PickerBuilder).setAppId(t).setOAuthToken(e).addView(new google.picker.View(google.picker.ViewId.DOCS)).enableFeature(google.picker.Feature.NAV_HIDDEN).setCallback(n).build(), r.setVisible(!0), $("div.picker-dialog").prepend($("[data-behavior~=picker_account_switcher]").first())
        }, o = function (e, t) {
            var n;
            return $("#google-loader-script").length ? t() : (n = document.createElement("script"), n.id = "google-loader-script", n.src = "https://www.google.com/jsapi?callback=" + e, n.type = "text/javascript", document.getElementsByTagName("head")[0].appendChild(n))
        }, f = function () {
            return $("[data-role~=google_file_picker_container]").fadeIn("fast")
        }, $(document).on("click", "[data-behavior~=google_file_picker]", function (e) {
            return window.clickedPickerElement == null && (window.clickedPickerElement = $(this), s()), e.preventDefault()
        }), $(document).on("click", "[data-behavior~=google_account_switcher]", function (e) {
            return l(), e.preventDefault()
        }), $(document).on("click", "[data-behavior~=google_account_connector]", function (e) {
            return $("[data-behavior~=google_connector]").show(), e.preventDefault()
        }), $(document).on("click", "[data-behavior~=cancel_google_connect]", function (e) {
            return $("[data-behavior~=google_connector]").hide(), e.preventDefault()
        })
    }.call(this),
    function () {
        var e, t;
        e = function (e) {
            return e.resetForm().find(".invitees").trigger("reset")
        }, t = function (e, t) {
            return e.addClass("shake"), e.onTransitionEnd(function () {
                e.removeClass("shake");
                if (t) return t.focus()
            }), !1
        }, $("[data-behavior~=new_group]").live("click", function (e) {
            var t = this;
            return $.getJSON("/everyone.json", function (e) {
                return $("[data-behavior~=members]").data("people", e).data("view").reload()
            }), $("article.groups.new").expand(), $("article.groups.new").find("textarea").first().focus().get(0).select(), $("article.groups_blank_slate, div.groups_blank_slate_arrow").hide(), $("div.panel.people_index").removeClass("groups_blank_slate"), e.preventDefault()
        }), $("article.groups.new a[data-behavior=cancel]").live("click", function (t) {
            return e($("article.groups.new form")), $("section.groups > article.group").length === 0 && ($("article.groups_blank_slate, div.groups_blank_slate_arrow").show(), $("div.panel.people_index").addClass("groups_blank_slate")), t.preventDefault()
        }), $("article.membership [data-behavior~=remove]").live("ajax:before", function (e) {
            var t;
            return t = $(this).closest("article.membership"), t.addClass("removing")
        }).live("ajax:success", function (e) {
            var t;
            return t = $(this).closest("article.membership"), t.animate({
                    opacity: 0
                }, 300, "linear", function () {
                    return t.animate({
                            height: 0
                        }, Math.sqrt(t.height()) * 35, "easeOutQuad", function () {
                            return t.remove()
                        })
                })
        }), $("form[data-behavior~=save_group]").live("ajax:before", function (e) {
            var n, r, i, s, o;
            n = $(this), s = n.find("textarea"), i = n.find("div.invitee:not(.blank)"), r = n.find("div.invitee input[type=text]").first(), o = r.parents("div.person"), s.val().trim() === "" && t(s, s);
            if (i.length === 0) return t(o, r)
        }), $("[data-behavior~=rename_group]").live("expand", function (e) {
            return $(this).find(".submit").slideDown(100), $(this).find("textarea").focus().keydown().select()
        }).live("collapse", function () {
            return $(this).find(".submit").hide(), $(this).find("form").resetForm()
        }).find("[data-behavior~=editable_field_prompt]").live("mouseover", function () {
            return $(this).delay(300).animate({
                    borderColor: "#b3b3b3"
                }, 100), $(this).animate({
                    width: 370
                }, 100)
        }).live("mouseout", function () {
            return $(this).stop(!0, !0).css({
                    width: "auto",
                    borderColor: "transparent"
                })
        }), $("[data-behavior~=new_subgroup]").live("expand", function () {
            return $(this).find("textarea").focus().get(0).select()
        }).live("ajax:before", function (e) {
            var n, r, i, s, o;
            n = $(this), o = n.find("textarea"), i = n.find("input[type=checkbox]:checked"), s = $(e.target).attr("data-method"), r = n.find("section.invite h2");
            if (s !== "delete") {
                o.val().trim() === "" && t(o, o);
                if (i.length === 0) return t(r)
            }
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f, l, c, h;
        f = null, t = null, a = null, u = !1, o = "g", c = function () {
            return f = n("a[data-hotkey]"), t = n("input[data-hotkey]")
        }, bcx.on("page:update", "find hotkey elements", c), $(function () {
            return setTimeout(c, 100)
        }), $(window).bind("keypress", function (e) {
            if (e.altKey || e.ctrlKey || e.metaKey) return;
            return s(e)
        }), $(window).bind("keydown", function (e) {
            if (e.keyCode !== $.ui.keyCode.ESCAPE) return;
            if (e.isDefaultPrevented()) return;
            return i(e)
        }), h = function (e) {
            return e == null && (e = !1), u = e
        }, i = function (e) {
            var t, n, r, i, s, o;
            s = $(e.target).filter(":focus");
            if (s.is("input[data-hotkey]")) s.blur();
            else if ((n = (t = s.closest("article")).find("a[data-role~=cancel]")).length) {
                if (t.isDirty()) return !1;
                n.click()
            } else if ((i = s.closest("[data-behavior~=expandable]:not([data-behavior~=ignore_collapse_hotkey]).expanded")).length) {
                if (i.isDirty()) return !1;
                i.collapse()
            } else if ((i = $("[data-behavior~=expandable]:not([data-behavior~=ignore_collapse_hotkey]).expanded")).length) {
                if (i.isDirty()) return !1;
                i.collapse()
            } else(n = (r = $("[data-behavior~=new_project_dialog]:visible")).find("a[data-role~=cancel]")).length && n.click();
            return (o = s.get(0)) != null && o.blur(), !1
        }, s = function (n) {
            var i, s, a, c;
            if ($(n.target).closest("input, select, textarea, [contenteditable]").length) return;
            a = n.charCode, 26 >= a && a >= 1 && (a += 96), c = String.fromCharCode(a);
            if (!u && c !== o) return;
            c === o && !u && (h(!0), setTimeout(h, 2e3));
            if (i = t[c]) return l(i, r);
            if (s = f[c]) return l(s, e)
        }, n = function (e) {
            var t;
            return t = {}, $(e).each(function () {
                var e, n;
                return e = $(this), n = e.data("hotkey"), t[n] = e
            }), t
        }, l = function (t, n) {
            var r, i;
            return h(), i = t.data("hotkey"), r = t.dispatch("hotkey"), r.isDefaultPrevented() ? (a = null, !1) : ((a != null ? a.key : void 0) === i && (a != null ? a.action : void 0) === e ? (history.back(), a = null) : ($.scrollTo(t, {
                            offset: -60,
                            axis: "y",
                            duration: 100,
                            onAfter: n
                        }), a = {
                        key: i,
                        action: n
                    }), !1)
        }, r = function (e) {
            var t;
            return t = e.get(0), t.focus(), t.select()
        }, e = function (e) {
            return e.effect("pulsate", {
                    times: 3,
                    duration: 150
                }), e.click()
        }
    }.call(this),
    function () {
        var e;
        e = function () {
            function r(r) {
                var i, s, o, u;
                i = $(r), s = new e(i), o = new t(i), u = new n(i)
            }
            var e, t, n;
            return t = function () {
                function e(e) {
                    var t = this;
                    this.$container = e, this.$container.find("input[type=text]").focus(function (e) {
                        return t.onFocus(e)
                    }).keyup(function (e) {
                        return t.onKeyUp(e)
                    }).keydown(function (e) {
                        return t.onKeyDown(e)
                    }).bind("clickoutside", function (e) {
                        return t.onClickOutside(e)
                    }), this.$container.bind("jumpto:cancel", function (e) {
                        return t.onCancel(e)
                    }), this.$container.bind("jumpto:visit", function (e) {
                        return t.onVisit(e)
                    }), navigator.userAgent.match(/MSIE/) && this.$container.find("[data-behavior~=placeholder]").placeholder()
                }
                return e.prototype.keyEventFor = function (e) {
                    switch (e) {
                    case $.ui.keyCode.TAB:
                        return "jumpto:down";
                    case $.ui.keyCode.UP:
                        return "jumpto:up";
                    case $.ui.keyCode.DOWN:
                        return "jumpto:down";
                    case $.ui.keyCode.ENTER:
                        return "jumpto:pick";
                    case $.ui.keyCode.ESCAPE:
                        return "jumpto:cancel";
                    case $.ui.keyCode.HOME:
                        return "jumpto:first";
                    case $.ui.keyCode.END:
                        return "jumpto:last";
                    case $.ui.keyCode.PAGE_UP:
                        return "jumpto:first";
                    case $.ui.keyCode.PAGE_DOWN:
                        return "jumpto:last";
                    default:
                        return null
                    }
                }, e.prototype.onFocus = function (e) {
                    return $(e.currentTarget).trigger("jumpto:focus")
                }, e.prototype.onKeyUp = function (e) {
                    var t;
                    if (!this.keyEventFor(e.which)) return t = $(e.currentTarget), t.trigger("jumpto:update", $.trim(t.val()))
                }, e.prototype.onKeyDown = function (e) {
                    var t;
                    if (t = this.keyEventFor(e.which)) return $(e.currentTarget).trigger(t), e.preventDefault()
                }, e.prototype.onClickOutside = function (e) {
                    return $(e.currentTarget).blur(), $(e.currentTarget).trigger("jumpto:blur")
                }, e.prototype.onCancel = function (e) {
                    var t;
                    t = this.$container.find("input[type=text]");
                    if (t.val()) return t.val("")
                }, e.prototype.onVisit = function (e) {
                    return this.$container.find("input[type=text]").blur().val(""), this.$container.trigger("jumpto:blur")
                }, e
            }(), n = function () {
                function e(e) {
                    var t = this;
                    this.$container = e, this.$container.bind("jumpto:results", function (e, n) {
                        return t.onResults(e, n)
                    }).bind("jumpto:update", function (e, n) {
                        return t.onUpdate(e, n)
                    }).bind("jumpto:cancel", function (e) {
                        return t.onCancel(e)
                    }).bind("jumpto:focus", function (e) {
                        return t.onFocus(e)
                    }).bind("jumpto:blur", function (e) {
                        return t.onBlur(e)
                    }).bind("jumpto:pick", function (e) {
                        return t.onPick(e)
                    }).bind("jumpto:up", function (e) {
                        return t.onUp(e)
                    }).bind("jumpto:down", function (e) {
                        return t.onDown(e)
                    }).bind("jumpto:first", function (e) {
                        return t.onFirst(e)
                    }).bind("jumpto:last", function (e) {
                        return t.onLast(e)
                    }), this.$container.find("[data-search-result]").live("hover", function (e) {
                        return t.onHover(e)
                    })
                }
                return e.prototype.onResults = function (e, t) {
                    var n, r, i;
                    return i = t.query, r = t.content, n = this.$resultsPageFor(i), n.length ? n = n.replaceWith(r) : this.$container.find("dl:last").after(r), this.selectFirstResult(), this.$container.trigger("jumpto:focus")
                }, e.prototype.onUpdate = function (e, t) {
                    var n;
                    return t ? (n = this.$resultsPageFor(t), n.length ? this.$container.trigger("jumpto:focus") : this.$container.trigger("jumpto:query", t), this.selectFirstResult()) : this.$container.trigger("jumpto:cancel")
                }, e.prototype.onCancel = function (e) {
                    return this.deselectAll(), this.$container.find("dl").hide()
                }, e.prototype.onFocus = function (e) {
                    var t;
                    this.$container.find("dl").hide(), this.deselectInactive(), t = this.$activeResults();
                    if (t.length) return t.show(), this.$container.trigger("jumpto:activate")
                }, e.prototype.onBlur = function (e) {
                    return this.$container.find("dl").hide()
                }, e.prototype.onPick = function (e) {
                    var t;
                    return this.$activeSelection().length ? this.visit(this.$activeSelection().find("a").attr("href")) : this.$activeResults().find("dd").length === 1 ? (this.select(this.$activeResults().find("dd")), $(e.currentTarget).trigger("jumpto:pick")) : this.$activeResults().length ? this.visit(this.$activeResults().find("a").attr("href")) : (t = this.$container.find("input[type=text]").val(), this.visit("/" + bcx.currentAccountSlug + "/search?q=" + encodeURIComponent(t)))
                }, e.prototype.onUp = function (e) {
                    var t, n;
                    return t = this.$activeSelection(), t.length ? (n = t.prev("dd"), n.length || (n = t.prev("dt").prev("dd")), n.length ? this.select(n) : $(e.currentTarget).trigger("jumpto:last")) : $(e.currentTarget).trigger("jumpto:last")
                }, e.prototype.onDown = function (e) {
                    var t, n;
                    return n = this.$activeSelection(), n.length ? (t = n.next("dd"), t.length || (t = n.next("dt").next("dd")), t.length || (t = n.next("dt")), t.length ? this.select(t) : $(e.currentTarget).trigger("jumpto:first")) : $(e.currentTarget).trigger("jumpto:first")
                }, e.prototype.onFirst = function (e) {
                    return this.select(this.$activeResults().find("dd:first"))
                }, e.prototype.onLast = function (e) {
                    return this.select(this.$activeResults().find("dt:last"))
                }, e.prototype.onHover = function (e) {
                    return this.select($(e.target).closest("[data-search-result]"))
                }, e.prototype.$resultsPageFor = function (e) {
                    return this.$container.find("dl[data-query=" + $.md5(e) + "]")
                }, e.prototype.activeQuery = function () {
                    return $.md5($.trim(this.$container.find("input[type=text]").val()))
                }, e.prototype.$activeResults = function () {
                    return this.$container.find("dl[data-query=" + this.activeQuery() + "]")
                }, e.prototype.$inactiveResults = function () {
                    return this.$container.find("dl[data-query!=" + this.activeQuery() + "]")
                }, e.prototype.$activeSelection = function () {
                    return this.$activeResults().find(".selected")
                }, e.prototype.deselect = function (e) {
                    return e.removeClass("selected")
                }, e.prototype.deselectAll = function () {
                    return this.deselect(this.$container.find("dl > *"))
                }, e.prototype.deselectInactive = function () {
                    return this.deselect(this.$inactiveResults().find("dd"))
                }, e.prototype.selectFirstResult = function () {
                    return this.select(this.$activeResults().find("[data-search-result]:first"))
                }, e.prototype.select = function (e) {
                    if (e.length > 0) return this.deselectAll(), e.addClass("selected")
                }, e.prototype.visit = function (e) {
                    return Stacker.workspace.visit(e, {
                            defaultStack: !0
                        }), this.$container.trigger("jumpto:visit")
                }, e
            }(), e = function () {
                function e(e) {
                    var t = this;
                    this.$container = e, $(document).bind("page:change", function () {
                        return t.$container.trigger("jumpto:cancel")
                    }), this.$container.bind("jumpto:query", function (e, n) {
                        return t.onQuery(e, n)
                    }).bind("jumpto:activate", function () {
                        return t.stopWaiting()
                    }).bind("jumpto:cancel", function () {
                        return t.stopWaiting()
                    }).bind("jumpto:visit", function () {
                        return t.stopWaiting()
                    })
                }
                return e.blindWaitThreshold = 300, e.prototype.onQuery = function (e, t) {
                    return this.startWaiting(), $.ajax("/jumpto", {
                            data: {
                                q: t,
                                t: +(new Date)
                            }
                        })
                }, e.prototype.startWaiting = function () {
                    var e, t = this;
                    return (e = this.waitTimeout) != null ? e : this.waitTimeout = setTimeout(function () {
                        return t.$container.addClass("waiting")
                    }, this.constructor.blindWaitThreshold)
                }, e.prototype.stopWaiting = function () {
                    return this.waitTimeout != null && (clearTimeout(this.waitTimeout), this.waitTimeout = null), this.$container.removeClass("waiting")
                }, e
            }(), r
        }.call(this), $(function () {
            return new e("[data-behavior~=jumpto]")
        })
    }.call(this);
    var Launchbar = {
        initialize: function (e) {
            this.addBodyClass(), this.rememberLocation(), this.installBehaviors(e)
        },
        addBodyClass: function () {
            $(document.body).addClass("with_launchbar")
        },
        rememberLocation: function () {
            try {
                var e = 3,
                    t = new Date;
                t.setTime(t.getTime() + e * 36e5), document.cookie = "return_to=" + encodeURIComponent(window.location.href) + "; expires=" + t.toUTCString()
            } catch (n) {}
        },
        installBehaviors: function (e) {
            var t = $(e),
                n = ".menus > .menu";
            t.on("mouseenter", n, Launchbar.behaviors.mouseEnter).on("mouseleave", n, Launchbar.behaviors.mouseLeave), $.support.touch && t.on("touchstart", n, Launchbar.behaviors.touchStart)
        },
        openMenu: function (e) {
            var t = $(e).find(".items"),
                n = Launchbar.closeMenu(!1),
                r = function () {
                    t.addClass("menu_active").show()
                };
            n ? r() : t.delay(500).queue(r)
        },
        closeMenu: function (e) {
            $("#launchbar .items").stop(!0, !0);
            var t = $("#launchbar .menu_active");
            if (t.length) return e === !1 ? t.hide().removeClass("menu_active") : t.delay(500).fadeOut(100).queue(function () {
                $(this).removeClass("menu_active")
            }), !0
        },
        behaviors: {
            mouseEnter: function () {
                Launchbar.openMenu(this)
            },
            mouseLeave: function () {
                Launchbar.closeMenu()
            },
            touchStart: function (e) {
                if ($(e.target).closest(".account").length) return;
                return Launchbar.openMenu(this), $(window).one("touchstart", function (e) {
                    $(this).closest("#launchbar").length == 0 && Launchbar.closeMenu()
                }), !1
            }
        }
    };
    $(function () {
        var e = $("#launchbar");
        e.length && Launchbar.initialize(e)
    }),
    function () {
        $(function () {
            var e;
            if ($("#launchbar").length) return;
            return e = "<div id=launchbar class=fake><ul class=menus><li class=menu></li></ul><div style='clear: both'></div></div>", Launchbar.initialize($(e).hide().prependTo("body"))
        }), bcx.on("page:change", "set Launchbar links not to load in the current stack", function () {
            return $("div#launchbar").find("a").attr("data-stacker", !1)
        })
    }.call(this),
    function () {
        bcx.on("page:update", "install member field list behavior", function () {
            return $("form[data-behavior~=member] [data-behavior~=members]").install("behavior for member fields", function (e) {
                return e.each(function (e, t) {
                    var n;
                    return n = new bcx.views.MemberFieldList({
                            el: t
                        }), n.render(), n.focus(), $(t).data("view", n)
                })
            })
        })
    }.call(this),
    function () {
        $("article.message.edit").live("wysiwyg:focus", function (e) {
            return $(this).find("[data-behavior~=wysiwyg_toolbar]").slideDown("fast")
        }), $("div.sheet.message.new article textarea:not(.body)").live("keypress", function (e) {
            if (e.keyCode === $.ui.keyCode.ENTER) return $("textarea.body").focus(), e.preventDefault()
        }), $("[data-behavior~=check_all_subscribers]").live("click", function (e) {
            return $("[data-behavior~=subscriber_select_all]").trigger("click"), $(this).closest("[data-behavior~=expandable]").collapse()
        }), $("[data-behavior~=uncheck_all_subscribers]").live("click", function (e) {
            return $("[data-behavior~=subscriber_select_none]").trigger("click"), $(this).closest("[data-behavior~=expandable]").collapse()
        }), $("[data-behavior~=toggle_subscribers_list]").live("click", function (e) {
            return $("[data-role~=subscribers_list]").toggle(), e.preventDefault()
        }), $("[data-behavior~=expand_on_check]").live("click", function (e) {
            if ($(this).find(":checked").length) return $(this).closest("[data-behavior~=expandable]").expand()
        }), $("[data-behavior~=clear_selections_on_expand]").live("mousedown", function (e) {
            if (!$(this).closest("[data-behavior~=expandable]").find(".expanded_content:visible").length) return $("[data-behavior~=subscriber_select_none]").trigger("click")
        }), bcx.on("page:change", "trigger load subscribers", function () {
            if ($("article.message.new").length) return $("article.message.new").expand()
        }), bcx.on("page:change", "focus message title and enable placeholders in IE", function () {
            return setTimeout(function () {
                return $.browser.msie ? $("article.message.new textarea").first().focus().placeholder() : $("article.message.new textarea").first().focus()
            }, 1)
        })
    }.call(this),
    function () {
        $("div.current_user_links").find("a").live("click", function () {
            return $(this).closest("div.current_user_links").collapse()
        }), $("[data-behavior~=hover_global_nav]").live("hover", function (e) {
            return $(this).find("div.global_links").toggleClass("active")
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C;
        t = null, e = !1, bcx.on("page:update", "extract new project dialog", function () {
            var e;
            e = $("#workspace [data-behavior~=new_project_dialog]");
            if (e.length) return e.remove(), t = e.get(0), c(), e.detach()
        }), bcx.on("page:change", "hide new dialog", function () {
            if ($("#new_project_dialog").is(":visible")) return bcx.cancelNewProject()
        }), $(document).bind("workspace:beforeload", function () {
            if ($("#new_project_dialog").is(":visible")) return g()
        }), $("[data-behavior~=new_project]").live("click", function () {
            return o(), u(function () {
                return S(function () {
                    return E(), r(), f(), p(), d(), N()
                })
            }), !1
        }), $("[data-behavior~=cancel_new_project]").live("click", function () {
            return bcx.cancelNewProject()
        }), bcx.cancelNewProject = function () {
            return i(), n(), b(), v(), d(), s(function () {
                return x(), T()
            }), !1
        }, $("form[data-behavior~=create_project]").live("submit", function () {
            return e = !0
        }).live("ajax:before", function (t) {
            var n;
            n = $(t.target).find("textarea:first");
            if (n.val().match(/^\s*$/)) return n.val(n.prop("placeholder")).focus().select(), e = !1, !1
        }).live("ajax:error", function () {
            return e = !1
        }).live("ajax:success", function () {
            return a(), i(), n(), b(), v(), w(function () {
                return C(), y(), h(), $(t).detach(), x(), e = !1
            })
        }), $("article.card [data-behavior~=create_draft_project]").live("click", function () {
            var t, n;
            if (!e) {
                t = $(this).parents("article.card").addClass("loading"), n = $("article.card:not(.loading)").addClass("inactive");
                if (t.filter("[data-behavior~=expandable]").length) return t.collapse()
            }
        }).live("ajax:before", function (t) {
            if (e) return !1
        }).live("ajax:error", function () {
            return e = !1
        }).live("create_draft:success", function () {
            var r;
            return r = $(this).parents("article.card"), r.filter("[data-behavior~=expandable]").length ? e = !1 : (i(), a(), n(), w(function () {
                        return C(), y(), h(), $(t).detach(), x(), e = !1
                    }))
        }), $("[data-behavior~=create_draft_project]").live("click", function (t) {
            var n;
            t.preventDefault(), t.stopImmediatePropagation();
            if (!e) return e = !0, n = $(this), $.ajax({
                    url: n.attr("href"),
                    type: "POST",
                    success: function (e) {
                        var t, r = this;
                        return t = new CopyProcessor(new bcx.CopyOperation(e)), t.on("processor:finished", function () {
                            return n.trigger("create_draft:success"), bcx.trigger("animate_draft:on")
                        }), t.startWatching()
                    }
                })
        }), $(document).bind("workspace:load", function () {
            if (!e && $("div.project_index").length) return h(), $(t).detach(), y(), m()
        }), c = function () {
            return $(t).attr("id", "new_project_dialog").find("[data-behavior~=lazy_invitees]").attr("data-behavior", "invitees")
        }, f = function (e) {
            var n;
            return n = $(t).find("[data-behavior~=invitees]"), n.addClass("loading"), n.install("behavior for invitee fields", function (e) {
                return e.each(function () {
                    var e;
                    return e = new bcx.views.InviteeFieldList({
                            el: this
                        }), e.render(), $(this).data("view", e)
                })
            }), setTimeout(function () {
                return $.getJSON("/invitees.json", function (t) {
                    var r;
                    return n.data("people", t), n.removeClass("loading"), r = n.data("view"), r != null && r.reload(), typeof e == "function" ? e() : void 0
                })
            }, 10)
        }, o = function (e) {
            return $("body > header").transition({
                    opacity: 0
                }, {
                    duration: 200,
                    timing: "ease-in",
                    complete: e
                })
        }, u = function (e) {
            return $("#workspace > .container").transition({
                    opacity: 0
                }, {
                    duration: 200,
                    timing: "ease-in"
                }), $("section.projects:first").transition({
                    "padding-top": 100
                }, {
                    duration: 300,
                    timing: "ease-in",
                    complete: e
                })
        }, x = function (e) {
            return $("body > header").transition({
                    opacity: 1
                }, {
                    duration: 200,
                    timing: "ease-out",
                    complete: e
                })
        }, m = function () {
            return $("body > header").css({
                    opacity: 1
                })
        }, T = function (e) {
            return $("#workspace > .container").transition({
                    opacity: 1
                }, {
                    duration: 200,
                    timing: "ease-out"
                }), $("section.projects:first").transition({
                    "padding-top": 0
                }, {
                    duration: 300,
                    timing: "ease-out",
                    complete: e
                })
        }, a = function () {
            return $("#workspace").css({
                    visibility: "hidden"
                })
        }, C = function () {
            return $("#workspace").css({
                    visibility: "visible"
                })
        }, y = function () {
            return $("#workspace > .container").css({
                    opacity: 1
                }), g()
        }, g = function () {
            return $("section.projects:first").css({
                    "padding-top": 0
                })
        }, S = function (e) {
            return $("body").append(t), h(), $("#new_project_dialog").show().css({
                    padding: "200px 0"
                }).transition({
                    padding: "0"
                }, {
                    duration: 350,
                    timing: "ease-out"
                }), $("#new_project_dialog > article.new").transition({
                    width: 640,
                    height: 300,
                    opacity: 1
                }, {
                    duration: 350,
                    timing: "ease-out",
                    complete: e
                })
        }, s = function (e) {
            return $("#new_project_dialog").transition({
                    padding: "200px 0"
                }, {
                    duration: 350,
                    timing: "ease-in"
                }), $("#new_project_dialog > article.new").transition({
                    width: 0,
                    height: 0,
                    opacity: 0
                }, {
                    duration: 350,
                    timing: "ease-in",
                    complete: function () {
                        return h(), $(t).detach(), typeof e == "function" ? e() : void 0
                    }
                })
        }, E = function () {
            return $("#new_project_dialog > article.new form").css({
                    visibility: "visible"
                }), $("#new_project_dialog section.project_templates").css({
                    opacity: 1
                })
        }, i = function () {
            return $("#new_project_dialog > article.new form").css({
                    visibility: "hidden"
                }), $("#new_project_dialog section.project_templates").css({
                    opacity: 0
                })
        }, r = function () {
            return $("#new_project_dialog > article.new").css({
                    overflow: "hidden",
                    height: "auto"
                })
        }, n = function () {
            return $("#new_project_dialog > article.new").css({
                    overflow: "",
                    height: l()
                })
        }, b = function () {
            return $("a[data-behavior~=slide].done_editing:visible").trigger("mousedown")
        }, v = function () {
            return $("#new_superpowers").html("")
        }, w = function (e) {
            return setTimeout(function () {
                return $("#new_project_dialog > article.new").transition({
                        width: 900,
                        height: 900,
                        margin: "90px auto"
                    }, {
                        duration: 600,
                        timing: "ease-in-out",
                        complete: e
                    })
            }, 200)
        }, h = function () {
            return !e && $(t).is(":visible") && i(), b(), v(), $(t).hide().find("form[data-behavior~=create_project]").resetForm().find(".invitees").trigger("reset"), $(t).find("> article.new").css({
                    width: "",
                    height: "",
                    margin: ""
                }), $(t).find("p#new_superpowers_prompt").css({
                    display: ""
                }), $(t).find("article.card").removeClass("inactive loading")
        }, p = function () {
            var e, t, n;
            return e = $("form[data-behavior~=create_project]"), e.find("textarea[name~='project[name]']").html("Name the project"), e.find("textarea[name~='project[description]']").html(""), e.find("input[name~=project_template_id]").val(""), t = (n = $("[data-behavior~=invitees]")) != null ? n.data("view") : void 0, t != null ? t.flushAndReplaceSelection([]) : void 0
        }, d = function () {
            return bcx.currentAccount.canCreateProjects() ? ($("[data-role~=limit_projects_reached]").hide(), $("[data-role~=account_upgrade_notice]").hide(), $("[data-role~=account_upgrade_wrapper]").show()) : ($("[data-role~=limit_projects_reached]").show(), $("[data-role~=account_upgrade_wrapper]").hide())
        }, N = function () {
            var e, t, n, r;
            e = $("#new_project_dialog > article.new"), n = e.find("form.project_template"), t = e.find("form.new_project");
            if (n.length) return t.hide(), n.show();
            (r = t.show().find("textarea").focus().get(0)) != null && r.select();
            if (!$("div.create_first_template_pitch").length) return e.find("div.project_gallery").show()
        }, l = function () {
            return $("#new_project_dialog > article.new").height()
        }, $("[data-behavior~=start_blank_project]").live("click", function (e) {
            var t, n, r;
            return t = $("#new_project_dialog > article.new"), r = t.find("form.project_template"), n = t.find("form.new_project"), e.preventDefault(), r.hide(), n.fadeIn("fast", function () {
                return $(this).find("textarea").focus().get(0).select()
            }), t.find("div.blank_project").show(), t.find("div.project_gallery").show(), $("[data-behavior~=slider]:visible").slider()
        })
    }.call(this),
    function (e) {
        var t = {
            EventEmitter: function () {}
        }, n = e.EventEmitter = t.EventEmitter,
            r = Array.isArray;
        n.prototype.emit = function (e) {
            if (e === "error")
                if (!this._events || !this._events.error || r(this._events.error) && !this._events.error.length) throw arguments[1] instanceof Error ? arguments[1] : new Error("Uncaught, unspecified 'error' event.");
            if (!this._events) return !1;
            var t = this._events[e];
            if (!t) return !1;
            if (typeof t == "function") {
                switch (arguments.length) {
                case 1:
                    t.call(this);
                    break;
                case 2:
                    t.call(this, arguments[1]);
                    break;
                case 3:
                    t.call(this, arguments[1], arguments[2]);
                    break;
                default:
                    var n = Array.prototype.slice.call(arguments, 1);
                    t.apply(this, n)
                }
                return !0
            }
            if (r(t)) {
                var n = Array.prototype.slice.call(arguments, 1),
                    i = t.slice();
                for (var s = 0, o = i.length; s < o; s++) i[s].apply(this, n);
                return !0
            }
            return !1
        }, n.prototype.addListener = function (e, t) {
            if ("function" != typeof t) throw new Error("addListener only takes instances of Function");
            return this._events || (this._events = {}), this.emit("newListener", e, t), this._events[e] ? r(this._events[e]) ? this._events[e].push(t) : this._events[e] = [this._events[e], t] : this._events[e] = t, this
        }, n.prototype.on = n.prototype.addListener, n.prototype.once = function (e, t) {
            var n = this;
            n.on(e, function r() {
                n.removeListener(e, r), t.apply(this, arguments)
            })
        }, n.prototype.removeListener = function (e, t) {
            if ("function" != typeof t) throw new Error("removeListener only takes instances of Function");
            if (!this._events || !this._events[e]) return this;
            var n = this._events[e];
            if (r(n)) {
                var i = n.indexOf(t);
                if (i < 0) return this;
                n.splice(i, 1), n.length == 0 && delete this._events[e]
            } else this._events[e] === t && delete this._events[e];
            return this
        }, n.prototype.removeAllListeners = function (e) {
            return e && this._events && this._events[e] && (this._events[e] = null), this
        }, n.prototype.listeners = function (e) {
            return this._events || (this._events = {}), this._events[e] || (this._events[e] = []), r(this._events[e]) || (this._events[e] = [this._events[e]]), this._events[e]
        }
    }(typeof exports == "undefined" ? window : exports),
    function () {
        var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, m = {}.hasOwnProperty,
            g = function (e, t) {
                function r() {
                    this.constructor = e
                }
                for (var n in t) m.call(t, n) && (e[n] = t[n]);
                return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
            };
        u = function () {
            function e() {
                this.process = v(this.process, this);
                var e = this;
                this.pendingAttachments = [], window.onbeforeunload = function () {
                    if ($("[data-behavior~=pending_attachments] ul.pending_attachments li").length) return "Your uploaded files will not be saved if you close this window."
                }
            }
            return e.prototype.queue = function (e) {
                return this.pendingAttachments.push(e), e.on("end", this.process), e.on("error", this.process), setTimeout(this.process, 1)
            }, e.prototype.remove = function (e) {
                return this.pendingAttachments = _(this.pendingAttachments).without(e), e.stop()
            }, e.prototype.process = function () {
                var e, t;
                if (((e = this.processing) != null ? e.state : void 0) === "uploading") return;
                return this.processing = this.pendingAttachments.shift(), (t = this.processing) != null ? t.start() : void 0
            }, e
        }(), e = function (e) {
            function t(e) {
                this.file = e, this.initialize(), t.__super__.constructor.call(this)
            }
            return g(t, e), t.prototype.initialize = function () {
                return delete this.state, this.setupImageState()
            }, t.prototype.setupImageState = function () {
                var e, t;
                return this.isImage = /^image\/(?!x-|vnd|tiff?)/.test(this.file.type), this.extension = (e = this.file.name) != null ? (t = e.match(/\.([A-Za-z0-9]+?)$/)) != null ? t[1] : void 0 : void 0, this.iconPath = FileIcons.path(this.extension, "big")
            }, t.prototype.getImage = function (e) {
                if (!this.isImage) return;
                return this.loadImage(e)
            }, t.prototype.prepareThumbnail = function () {
                var e = this;
                return this.getImage(function (t) {
                    return e.$item.prepend($(t).addClass("thumbnail")), e.$item.addClass("image")
                })
            }, t.prototype.loadImage = function (e) {}, t.prototype.remove = function () {
                return this.$item.remove()
            }, t.prototype.render = function () {
                var e = this;
                return this.$item = $(JST["templates/pending_attachment"](this)), this.prepareThumbnail(), this.$item.delegate("a[data-behavior~=remove]", "click", function (t) {
                    return e.remove(), !1
                }), this.$item
            }, t
        }(EventEmitter), r = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return g(t, e), t.prototype.initialize = function () {
                return t.__super__.initialize.call(this), delete this.file.id, this.file.link = {
                    url: this.file.url,
                    source: this.file.linkSource,
                    key: this.file.linkKey,
                    size: 0
                }
            }, t.prototype.remove = function () {
                var e;
                return (e = this.$item.closest("form[data-behavior~=attachments_required]")).length && e.find("ul.pending_attachments > li[data-dirty]").length <= 1 && e.find("input[type=submit]").prop("disabled", !0), t.__super__.remove.call(this)
            }, t
        }(e), t = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return g(t, e), t.prototype.initialize = function () {
                return this.file.docType = this.file.type, this.file.type = this.file.mimeType, this.file.linkSource = "google", this.file.linkKey = this.file.id, this.setAuthkeyPermissions(), t.__super__.initialize.call(this)
            }, t.prototype.setupImageState = function () {
                var e;
                return this.isImage = !1, e = "" + this.file.linkSource + "_" + this.file.docType, this.iconPath = FileIcons.asset(e, "big")
            }, t.prototype.loadImage = function (e) {
                var t;
                return t = new Image, t.src = this.file.thumbnails[this.file.thumbnails.length - 1].url, e(t)
            }, t.prototype.setAuthkeyPermissions = function () {
                var e = this;
                return gapi.client.load("drive", "v2", function () {
                    var t, n;
                    return t = {
                        name: "Basecamp Attachment",
                        type: "anyone",
                        role: "writer",
                        withLink: !0
                    }, n = gapi.client.request({
                            method: "POST",
                            path: "/drive/v2/files/" + e.file.fileId + "/permissions",
                            body: JSON.stringify(t)
                        }), n.execute(function (e) {
                            return null
                        })
                })
            }, t
        }(r), o = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return g(t, e), t.prototype.loadImage = function (e) {
                var t;
                return t = new Image, t.src = this.file.thumbnailURL, e(t)
            }, t.prototype.remove = function () {
                return this.$item.find("input[type=hidden][name*=_destroy]").val("1"), this.$item.hide()
            }, t
        }(e), i = function (e) {
            function t(e, n) {
                this.uploader = n, t.__super__.constructor.call(this, e), this.on("error", function () {
                    return alert('There was a problem uploading the file "' + this.file.name + '".\nPlease try adding that file again.'), this.remove()
                })
            }
            return g(t, e), t.prototype.remove = function () {
                var e;
                return (e = this.$item.closest("form[data-behavior~=attachments_required]")).length && e.find("ul.pending_attachments > li[data-dirty]").length <= 1 && e.find("input[type=submit]").prop("disabled", !0), t.__super__.remove.call(this), this.uploader.remove(this)
            }, t.prototype.render = function () {
                var e;
                return t.__super__.render.call(this), e = this.$item.find("[data-behavior~=progress] > div"), this.on("progress", function (t) {
                    return e.css({
                            width: "" + t + "%"
                        })
                }), this.on("end", function (e) {
                    return this.$item.find("input[type=hidden][name*=token]").attr("value", e), this.$item.removeClass("uploading")
                }), this.$item.addClass("uploading")
            }, t
        }(e), n = function (e) {
            function n() {
                return this.onProgress = v(this.onProgress, this), this.onReadyStateChange = v(this.onReadyStateChange, this), n.__super__.constructor.apply(this, arguments)
            }
            var t;
            return g(n, e), n.prototype.initialize = function () {
                var e = this;
                return n.__super__.initialize.call(this), this.xhr = new XMLHttpRequest, this.xhr.open("POST", "/" + bcx.currentAccountSlug + "/attachments/stage", !0), this.xhr.setRequestHeader("Content-Type", "application/octet-stream"), this.isImage && !window.FileReader && this.xhr.setRequestHeader("X-Return-Content", !0), this.xhr.onreadystatechange = this.onReadyStateChange, this.xhr.upload.onprogress = this.onProgress, this.on("end", function () {
                    if (!window.FileReader) return e.prepareThumbnail()
                })
            }, n.prototype.loadImage = function (e) {
                var t, n;
                if (window.FileReader) return n = new FileReader, n.onload = function (t) {
                    var n;
                    return n = new Image, n.src = t.target.result, e(n)
                }, n.readAsDataURL(this.file);
                if (this.file.content) return t = new Image, t.src = "data:" + this.file.type + ";base64," + this.file.content, e(t)
            }, n.prototype.start = function () {
                if (!this.state) return this.state = "uploading", this.xhr.send(this.file)
            }, n.prototype.stop = function () {
                if (this.state === "uploading") return this.xhr.abort()
            }, n.prototype.onReadyStateChange = function () {
                var e, n, r;
                if (this.xhr.readyState === 4) return this.xhr.status === 200 ? (e = t(this.xhr)) ? (this.token = e.token, (r = (n = this.file).content) == null && (n.content = e.content), this.state = "completed", this.emit("end", this.token)) : (this.state = "failed", this.emit("error", this.xhr)) : (this.state = "failed", this.emit("error", this.xhr))
            }, n.prototype.onProgress = function (e) {
                var t;
                return t = e.loaded / e.total * 100, this.emit("progress", t)
            }, t = function (e) {
                var t;
                try {
                    return t = e.responseText, JSON.parse(t)
                } catch (n) {}
            }, n
        }(i), s = function (e) {
            function n(e, t) {
                var r;
                this.$input = $(e), r = {
                    name: this.extractName(),
                    type: "application/octet-stream"
                }, n.__super__.constructor.call(this, r, t)
            }
            var t;
            return g(n, e), t = 0, n.prototype.initialize = function () {
                var e = this;
                return n.__super__.initialize.call(this), this.id = "upload_frame_hack_" + (t += 1), this.$engine = $("<div style='width: 0px; height: 0px; visibility: hidden;'><iframe name='" + this.id + "' id='" + this.id + "'></iframe><form action='/" + bcx.currentAccountSlug + "/attachments/stage' method='post' enctype='multipart/form-data' target='" + this.id + "'></form></div>"), $(document.body).append(this.$engine), this.$target = this.$engine.find("iframe"), this.$form = this.$engine.find("form"), this.$form.append(this.$input), this.stop(), this.on("end", function (t) {
                    e.setupImageState(), e.$item.find("input[type=hidden][name*=content_type]").attr("value", e.file.type);
                    if (e.file.content != null) return e.prepareThumbnail()
                }), this.$target.load(function () {
                    return e.extractResponse() ? (e.state = "completed", e.emit("end", e.token)) : (e.state = "failed", e.emit("error")), e.$engine.remove()
                })
            }, n.prototype.render = function () {
                return n.__super__.render.call(this), this.on("end", function (e) {
                    return this.$item.removeClass("busy")
                }), this.$item.addClass("busy")
            }, n.prototype.loadImage = function (e) {
                var t;
                if (!this.file.content) return;
                return t = new Image, t.src = "data:" + this.file.type + ";base64," + this.file.content, e(t)
            }, n.prototype.start = function () {
                if (!this.state) {
                    this.state = "uploading";
                    try {
                        return this.$form.submit()
                    } catch (e) {
                        return console.error(e), typeof console.trace == "function" && console.trace(), this.state = "failed", this.emit("error")
                    }
                }
            }, n.prototype.stop = function () {
                var e, t;
                if (this.$target[0].stop != null) return this.$target[0].stop();
                if (e = this.$target[0].contentWindow) {
                    if (e.stop != null) return e.stop();
                    if (((t = e.document) != null ? t.execCommand : void 0) != null) return e.document.execCommand("Stop")
                }
            }, n.prototype.extractName = function () {
                var e;
                return (e = this.$input.val().match(/[^\/\\]+$/)) != null ? e[0] : void 0
            }, n.prototype.extractResponse = function () {
                var e, t;
                try {
                    return e = this.$target[0].contentWindow.document.body.innerText, t = JSON.parse(e), this.token = t.token, this.file = {
                        name: t.name,
                        type: t.type,
                        content: t.content
                    }
                } catch (n) {}
            }, n
        }(i), h = new u, f = "[data-behavior~=pending_attachments]", $.fn.attachFiles = function (e) {
            var t, r;
            t = $(this).closest("form"), r = t.find("" + f + " > ul");
            if (!r.length) return;
            return _.each(e, function (e) {
                var i;
                return i = new n(e, h), r.append(i.render()), a(t, i)
            })
        }, $.fn.attachSelf = function () {
            var e, t, n;
            e = $(this).closest("form"), t = e.find("" + f + " > ul");
            if (!t.length) return;
            return n = new s(this, h), t.append(n.render()), a(e, n)
        }, $.fn.attachGoogleDocs = function (e) {
            var n, r, i, s, o, u, a;
            n = $(this).closest("form"), r = n.find("" + f + " > ul");
            if (!r.length) return;
            a = [];
            for (o = 0, u = e.length; o < u; o++) s = e[o], i = new t(s), r.append(i.render()), a.push(n.find("input[type=submit]").prop("disabled", null));
            return a
        }, a = function (e, t) {
            var n, r;
            return h.queue(t), n = (r = e.data("queuedAttachmentCount")) != null ? r : 0, n === 0 && e.trigger("upload:start"), e.data("queuedAttachmentCount", n + 1), t.on("error", function () {
                return c(e)
            }), t.on("end", function () {
                return c(e)
            })
        }, c = function (e, t) {
            var n;
            return n = e.data("queuedAttachmentCount") - 1, n === 0 && e.trigger("upload:finish"), e.data("queuedAttachmentCount", n)
        }, p = !navigator.userAgent.match(/MSIE/), d = function (e) {
            return $(e).after("<input name='file' type='file' multiple onchange='$(document).trigger(\"ie:change\", this)'>"), p ? ($(e).attachFiles(e.files), $(e).remove()) : $(e).attachSelf()
        }, p || $(document).live("ie:change", function (e, t) {
            return d(t)
        }), $("" + f + " input[type=file]").live("change", function (e) {
            return d(e.target)
        }), $("form").live("attachments:link", function (e, t) {
            var n;
            n = $(e.target).find("" + f + " ul");
            try {
                return _.each(t, function (e) {
                    var t;
                    return t = new o(e), n.append(t.render())
                })
            } catch (r) {
                return console.error(r), typeof console.trace == "function" ? console.trace() : void 0
            }
        }), $("form").live("reset", function (e) {
            return $(this).find("" + f + " > ul").html("")
        }), bcx.on("page:update", "make pending attachments sortable", function () {
            return $("" + f + "[data-sortable~=true] > ul").sortable({
                    axis: "y",
                    tolerance: "pointer",
                    cancel: "div.taggings"
                })
        }), $("form").live("upload:start", function (e) {
            var t;
            return t = $(this).find("input[type=submit]"), t.data("originalValue", t.val()).val("Uploading...").prop("disabled", "true")
        }), $("form").live("upload:finish", function (e) {
            var t;
            return t = $(this).find("input[type=submit]"), t.val(t.data("originalValue")).prop("disabled", null)
        }), l = 0, $("" + f + " > ul > li").live("tagging:add", function (e, t, n) {
            var r;
            return l += 1, r = $(JST["templates/pending_tagging"]({
                        tagName: t,
                        taggingId: l
                    })), r.appendTo($(this).find("[data-behavior~=taggings] > ul")), e.preventDefault(), n.refresh()
        }).live("tagging:remove", function (e, t, n) {
            var r;
            return r = $(this).find("[data-url='" + t + "']"), r.fadeOutAndRemove({
                    collapse: ["width", "height"]
                }), r.attr("data-deleted", !0), n.refresh()
        })
    }.call(this),
    function () {
        $("a[data-behavior~=add_to_all_projects]").live("click", function (e) {
            var t;
            return e.preventDefault(), t = $("[data-display~=invite_projects] :checkbox"), t.attr("checked", t.length !== t.filter(":checked").length)
        }), $("a[data-behavior~=add_to_all_calendars]").live("click", function (e) {
            var t;
            return e.preventDefault(), t = $("[data-display~=invite_calendars] :checkbox"), t.attr("checked", t.length !== t.filter(":checked").length)
        }), $("form[data-behavior~=email_preferences]").live("change", function () {
            return $(this).submit(), $(this).find(":input").attr("disabled", !0)
        }), $("form[data-behavior~=email_preferences]").live("ajax:before", function () {
            return $(this).find("[data-display~=status]").addClass("busy")
        }), $("form[data-behavior~=email_preferences]").live("ajax:success", function () {
            var e = this;
            return setTimeout(function () {
                return $(e).find("[data-display~=status]").removeClass("busy"), $(e).find(":input").attr("disabled", !1), $(e).closest("form").removeClass("busy")
            }, 300)
        }), $("form[data-behavior~=notification_email]").live("ajax:before", function () {
            var e, t, n, r;
            return (r = $(this).find(".message")) != null && r.remove(), e = $(this).find("input[type=text]"), n = e.val(), bcx.EmailAddressHelper.validEmailAddress(n) ? $(this).find("[data-display~=status]").addClass("busy") : (t = $("<span class='message error'>You need to enter a valid email address.</span>"), $(this).find("[data-display~=status]").after(t), e.focus().select(), !1)
        }), $("form[data-behavior~=notification_email]").live("ajax:success", function () {
            var e, t;
            return t = $(this).find("[data-display~=status]"), t.removeClass("busy"), e = $("<span class='message'>Saved!</span>"), t.after(e.delay(1e3).fadeOutAndRemove())
        }), bcx.on("page:change", "truncate event summaries on person permapage", function () {
            return $("div.sheet.person article.event span.summary").truncate({
                    max_length: 60,
                    more: "..."
                })
        }), $("header div.resend_invite [data-behavior~=select_on_focus]").live("click", function (e) {
            return $(this).select()
        }), $("a[data-behavior~=resend_invitation]").live("click", function (e) {
            var t, n, r, i, s, o = this;
            return e.preventDefault(), r = $(this), n = r.closest("header"), t = n.find("[data-role~=invite_display]"), i = n.find("[data-role~=invite_status]"), s = i.find("time"), t.data("deactivated_html", t.html()), t.html(t.attr("data-activated-text")), t.animate({
                    opacity: 1
                }, 150, "linear"), r.one("ajax:success", function () {
                    return setTimeout(function () {
                        return t.html(t.data("deactivated_html")), s.html("a moment ago"), s.highlight(), t.delay(1e3).animate({
                                opacity: 0
                            }, 300, "linear", function () {
                                return s.attr("datetime", new Date)
                            })
                    }, 500)
                })
        }), $("[data-behavior~=projects_select_all]").live("click", function (e) {
            var t, n;
            return e.preventDefault(), n = $(this), n.addClass("busy"), t = $("[data-display~=projects_list] :checkbox"), t.attr("disabled", !0), $.ajax($(this).data("path"), {
                    type: "POST",
                    success: function (e) {
                        var r = this;
                        return t.attr("checked", t.length), t.removeAttr("disabled"), setTimeout(function () {
                            return n.removeClass("busy")
                        }, 300)
                    }
                })
        }), $("[data-behavior~=projects_select_none]").live("click", function (e) {
            var t, n;
            return e.preventDefault(), n = $(this), n.addClass("busy"), t = $("[data-display~=projects_list] :checkbox"), t.attr("disabled", !0), $.ajax($(this).data("path"), {
                    type: "POST",
                    success: function (e) {
                        var r = this;
                        return t.removeAttr("checked", t.length), t.removeAttr("disabled"), setTimeout(function () {
                            return n.removeClass("busy")
                        }, 300)
                    }
                })
        }), $("[data-behavior~=expand_project_selection]").live("click", function (e) {
            var t;
            if ($(this).find(":checked").length) return t = $("[data-display~=projects_list] :checkbox"), t.attr("checked", t.length), $(this).closest("[data-behavior~=expandable]").expand()
        }), $("[data-behavior~=collapse_project_selection]").live("click", function (e) {
            var t;
            t = $(this).find("input[type=radio]"), t.closest("label").addClass("busy"), $(this).closest("[data-behavior~=expandable]").collapse();
            if (t.closest(":checked").length) return $.ajax(t.data("path"), {
                    type: "POST",
                    success: function (e) {
                        var n = this;
                        return setTimeout(function () {
                            return t.closest("label").removeClass("busy")
                        }, 300)
                    }
                })
        })
    }.call(this),
    function () {
        bcx.on("page:change", "disable checkbox for current person's permissions", function () {
            if (bcx.currentPerson != null) return $("[data-behavior~=change_permissions][data-person-id=" + bcx.currentPerson.id + "] :checkbox").prop("disabled", !0)
        }), $(":checkbox[data-behavior~=admin_permission]").live("change", function () {
            var e, t, n;
            return n = $(this).parents("[data-behavior~=set_permission_checkboxes]"), e = n.find(":checkbox[data-behavior~=can_create_projects_permission]"), t = e.siblings("input(:hidden)"), t.prop("disabled", !1), $(this).is(":checked") ? (e.prop("checked", !0), e.prop("disabled", !0)) : e.prop("disabled", !1)
        }), $("[data-behavior~=change_permissions] :checkbox").live("change", function () {
            return $(this).closest("form").submit()
        })
    }.call(this),
    function () {
        var e, t;
        bcx.on("page:update", "install behavior for plan autoloading", function () {
            return $("[data-subscription][data-subscription-path]").install("behavior for plan autoloading", function (e) {
                return $.get(e.data("subscription-path")).done(function () {
                    if ($("[data-subscription] .expanded_content form").length) return;
                    return e.find("input[type=text]:first").focus()
                })
            })
        }), bcx.on("page:change", "re-expand the previously selected plan", function () {
            var e;
            e = $("[data-subscription] .expanded_content form");
            if (!e.length) return;
            return e.expandable().expand(), $.scrollTo(e.closest("section").find(".alert"), function () {
                return e.find("input[type=text]:first").focus()
            })
        }), $("form[data-behavior~=change_plan] a[data-behavior~=submit]").live("click", function () {
            return $(this).closest("form").submit(), !1
        }), $("form[data-behavior~=change_plan]").on("ajax:before", function () {
            return $(this).addClass("busy")
        }), $("form[data-behavior~=cc-form]:not([data-behavior~=pay_by_check])").live("submit", function (e) {
            var t, n, r, i, s, o;
            r = $(this).find("input.cc-number"), i = $(this).find("input.cc-zip-code"), n = [], Queenbee.CreditCard.validateNumber(r.val()) || n.push(r), Queenbee.CreditCard.validateZipCode(i.val()) || n.push(i);
            if (n.length) {
                for (s = 0, o = n.length; s < o; s++) t = n[s], $(t).addClass("invalid");
                return e.preventDefault()
            }
            return $(this).addClass("busy").find(":submit").prop("disabled", !0), Queenbee.CreditCard.encryptForm(this)
        }), $("form[data-behavior~=pay_by_check]").live("submit", function (e) {
            var t;
            return $(this).find(":input").removeClass("invalid"), t = $(this).find(':input[data-required][value=""]'), t.length ? (t.addClass("invalid"), t[0].focus(), e.preventDefault()) : $(this).addClass("busy").find(":submit").prop("disabled", !0)
        }), $("a[data-behavior~=pay_by_check]").live("click", function (e) {
            var n;
            return e.preventDefault(), t(), n = $(this).closest("form"), n.addBehavior("pay_by_check"), n.find("[data-role=pay_by_check]").show().find(":input").prop("disabled", !1), n.find("[data-role=pay_by_cc]").hide().find(":input").prop("disabled", !0)
        }), $("a[data-behavior~=pay_by_cc]").live("click", function (e) {
            var n;
            return e.preventDefault(), t(), n = $(this).closest("form"), n.removeBehavior("pay_by_check"), n.find("[data-role=pay_by_check]").hide().find(":input").prop("disabled", !0), n.find("[data-role=pay_by_cc]").show().find(":input").prop("disabled", !1)
        }), t = function () {
            return $("[data-role=payment_options]").hide()
        }, e = function () {
            var e, t, n, r, i;
            (n = $("[data-plan]").data("plan")) && n !== "trial" ? (e = $("#plans div.option[data-plan-name=" + n + "]"), e.siblings(".selected").removeClass("selected"), e.hasClass("selected") || e.addClass("selected"), $("[data-plan]").data("plan", null)) : e = $("div.build_a_plan article#plans div.selected"), t = e.data("plan-daily-price"), $("[data-role=num_projects]").text(e.data("plan-projects") === "Infinity" ? "unlimited" : "up to " + e.data("plan-projects")), r = e.data("plan-storage-human"), $("[data-role=total_storage]").text(r), i = e.data("plan-name"), i === "yearly" ? $("[data-role~=confirmation]").hide() : $("[data-role~=confirmation]").show();
            if (!$("div.alert").length) return $("[data-role=daily_price]").text("$" + t), $("[data-role=monthly_price]").text("$" + 30 * t), $("[data-subscription=" + i + "] form[data-behavior=change_plan]").submit()
        }, $("div.build_a_plan div.option:not([data-behavior~=yearly_option])").live("click", function () {
            if (!$(this).hasClass("disqualified")) return $(this).siblings(".selected").removeClass("selected"), $(this).hasClass("selected") || $(this).addClass("selected"), e()
        }), $("div.build_a_plan div.option[data-behavior~=yearly_option]").live("click", function () {
            return $(this).find("a:first").click()
        }), bcx.on("page:change", "install behavior for new plan mix selection form", function () {
            if ($("div.build_a_plan").length) return e()
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        r = function () {
            var e;
            return (e = function () {
                try {
                    return JSON.parse(window.localStorage.pluginDomains)
                } catch (e) {}
            }()) != null ? e : []
        }, s = function () {
            try {
                return window.localStorage.pluginDomains = JSON.stringify(n)
            } catch (e) {}
        }, i = function () {
            return window.location.reload()
        }, n = r(), t = function (e) {
            var t, n, r;
            return r = document.createElement("script"), r.setAttribute("type", "text/javascript"), r.setAttribute("src", "//" + e + "/assets/plugin.js"), n = document.createElement("link"), n.setAttribute("rel", "stylesheet"), n.setAttribute("href", "//" + e + "/assets/plugin.css"), t = document.getElementsByTagName("head")[0], t.appendChild(n), t.appendChild(r)
        }, bcx.plugins = {
            add: function (e) {
                if (a.call(n, e) < 0) return n.push(e), s(), t(e), !0
            },
            remove: function (e) {
                var t;
                t = n.indexOf(e);
                if (t !== -1) return n.splice(t, 1), s(), i()
            },
            clear: function () {
                return n = [], s(), i()
            }
        };
        for (o = 0, u = n.length; o < u; o++) e = n[o], t(e)
    }.call(this),
    function () {
        (new Image).src = "https://d3dma7a8zw52bz.cloudfront.net/assets/spinners/dots-white-e96879334a9337c2b06e2f7d4c5f7416.gif", (new Image).src = "https://d3dma7a8zw52bz.cloudfront.net/assets/spinners/dots-white@2x-8b57e7fcf5823f4e4340c1847f89738c.gif", (new Image).src = "https://d3dma7a8zw52bz.cloudfront.net/assets/icons/trash-fbf9dc0a42738ad91f3af06f0ba2c767.gif"
    }.call(this),
    function () {
        var e;
        bcx.watchCachingClassicProjects = function () {
            return setTimeout(function () {
                var e;
                if ((e = $("[data-behavior~=caching_classic_projects]")).length) return $.getJSON(e.url()).done(function (t) {
                    if (e.is(":visible")) return t.caching_classic_projects ? bcx.watchCachingClassicProjects() : window.location.reload()
                })
            }, 5e3)
        }, e = function (e) {
            var t, n;
            if (!e.hasClass("import_in_progress")) return;
            return t = e.attr("data-import-url"), setTimeout(n = function () {
                return $.getJSON(t).done(function (t) {
                    return t.finished_at ? (e.find("[data-status=finished] a").attr("href", "/" + bcx.currentAccountSlug + "/projects/" + t.project_id), e.removeClass("import_in_progress").addClass("import_finished")) : t.started_at == null ? e.removeClass("import_in_progress").addClass("import_error") : setTimeout(n, 5e3)
                })
            }, 5e3)
        }, bcx.ensureCurrentAccountCanImportProjects = function () {
            return bcx.currentAccount.canCreateProjects() ? ($("[data-behavior~=can-create-project-imports]").show(), $("[data-behavior~=cant-create-project-imports]").hide()) : ($("[data-behavior~=can-create-project-imports]").hide(), $("[data-behavior~=cant-create-project-imports]").show())
        }, $(document).on("click", "[data-behavior~=start_import]", function (t) {
            var n;
            return n = $(this).closest("article"), n.removeClass("import_available").addClass("import_in_progress").collapse(), $.ajax({
                    type: "POST",
                    url: n.attr("data-import-url")
                }).success(function (t) {
                    return e(n), bcx.currentAccount.fetch({
                            success: bcx.ensureCurrentAccountCanImportProjects
                        })
                }).fail(function (e) {
                    return n.removeClass("import_in_progress").addClass("import_error")
                }), t.preventDefault()
        }), $("div.project_imports article.project[data-behavior~=expandable]").on("expand", function (e) {
            return $(this).slideIntoView({
                    duration: "slow"
                })
        }), $(document).on("page:update", function () {
            return bcx.ensureCurrentAccountCanImportProjects(), $("article.project.import_in_progress").install("watch import progress", function (t) {
                return e(t)
            })
        })
    }.call(this),
    function () {
        var e, t, n;
        e = !1, $("article.card [data-behavior~=show_template_actions]").live("click", function (e) {
            return $(this).parents("article.card").first().expand(), e.preventDefault()
        }), $("article.card [data-behavior~=confirm_delete]").live("click", function (e) {
            var t;
            return t = $(this).parents("article.card"), e.preventDefault(), e.stopImmediatePropagation(), n(t)
        }), $("article.card [data-behavior~=cancel_delete]").live("click", function (e) {
            return $(this).parents("article.card").first().collapse(), e.preventDefault()
        }), $("article.card[data-behavior~=expandable]").live("beforeexpand", function () {
            return $(this).find("div.actions").css({
                    "margin-top": "30px",
                    opacity: 0
                })
        }).live("expand", function () {
            return $(this).find("div.actions").transition({
                    "margin-top": "0",
                    opacity: 1
                }, {
                    duration: 200,
                    timing: "ease-in-out"
                })
        }).live("collapse", function () {
            var e;
            return e = $(this), t(e)
        }), n = function (e) {
            return e.find("div.actions > ul").hide(), e.find("div.actions > div").show().transition({
                    opacity: 1
                })
        }, t = function (e) {
            return e.find("div.actions > ul").show(), e.find("div.actions > div").hide().css({
                    opacity: 0
                })
        }
    }.call(this),
    function () {
        var e;
        e = "[data-behavior~=change_project_view]", $(e).live("click", function (t) {
            var n, r;
            return r = $(this), n = r.parents(".project_view"), !r.hasClass("on") && !n.hasClass("busy") && ($(e).removeClass("on"), n.addClass("busy"), $.cookie("project_view", null, {
                        path: "/"
                    }), $.cookie("project_view", r.attr("class"), {
                        expires: 5e3,
                        path: "/" + bcx.currentAccountSlug
                    }), $.get("/projects.js", function () {
                        return n.removeClass("busy")
                    }), r.toggleClass("on")), t.preventDefault()
        })
    }.call(this),
    function () {
        bcx.on("page:update", "apply read-only behavior", function () {
            return $("div.sheet[data-behavior~=read_only] input[type='checkbox'], div.project[data-behavior~=read_only] article.document textarea").attr("disabled", !0), $("div.sheet[data-behavior~=read_only] div[data-behavior~=edit_project_header]").attr("data-behavior", "expandable"), $("div.sheet[data-behavior~=read_only] > header div.header_links a:first-child span.link").html("People on this project")
        })
    }.call(this),
    function () {
        bcx.on("page:update", "turn page single project", function () {
            if ($("body.single_project_account").length) return bcx.avatars.removeLinks(), $(".access[data-person-id] a.person_name").each(function () {
                return $(this).parent().html($(this).text())
            })
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a;
        r = "div.project[data-behavior~=read_only], div.sheet.global.todolists", e = "div.sheet:not(.inactive)", o = "[data-behavior~=sortable_container]", u = {
            defaults: {
                tolerance: "pointer",
                handle: "[data-behavior~=sortable_handle]",
                revert: 200,
                distance: 2
            },
            todo: {
                axis: "y",
                containment: e,
                connectWith: "" + o + "[data-sortable-type=todo]"
            },
            todolist: {
                axis: "y",
                containment: e,
                opacity: .8
            }
        }, i = function (e) {
            var t, n, r;
            return n = e.data("sortable-type"), t = $.extend({}, u.defaults, (r = u[n]) != null ? r : {}), e.sortable(t)
        }, document.addEventListener("mousedown", function (e) {
            var t, n;
            n = $(e.target).closest(o);
            if (!n.length) return;
            t = n.closest(o), t.closest(r).length || i(t);
            if (e.ctrlKey && e.button === 0) return e.preventDefault(), e.stopPropagation()
        }, !0), $("[data-behavior~=sortable_container]").live("sortstart", function (e, t) {
            var n, r, s, u;
            return s = e.currentTarget, n = $(s), u = n.data("sortable-type"), r = $("" + o + "[data-sortable-type='" + u + "']"), r.each(function () {
                if (this !== s) return i($(this))
            }), n.sortable("refresh")
        }), s = !1, a = function (e) {
            return setTimeout(function () {
                return s || e(), s = !1
            }, 1)
        }, $(o).live("sortreceive", function (e, t) {
            return s = !0, e.stopPropagation()
        }), $(o).live("sortupdate", function (e, t) {
            var r = this;
            return a(function () {
                var e, r, i, s, u;
                return i = $(t.item.context), e = i.closest(o), r = e.closest("[data-behavior~=sortable]"), u = e.data("sortable-type"), s = n(e, i), i.trigger("" + u + ":move", [s, r.get(0)])
            }), e.stopPropagation()
        }), n = function (e, t) {
            var n, r, i, s;
            return n = null, i = t.get(0), s = e.data("sortable-type"), r = "[data-behavior~=sortable][data-sortable-type='" + s + "']", e.find(r).each(function (e) {
                if (this === i) return n = e + 1
            }), n
        }, $(o).live("sortstart", function (e, n) {
            return t(n), e.stopPropagation()
        }), $(o).live("sortbeforestop", function (e, n) {
            return t(n), e.stopPropagation()
        }), t = function (e) {
            var t, n;
            t = e.originalPosition.top < 0, n = navigator.userAgent.indexOf("Firefox") >= 0;
            if (!t && !n) return;
            return e.item.data("margin-top-compensation") ? (e.item.css("margin-top", "-=" + e.item.data("margin-top-compensation")), e.item.data("margin-top-compensation", null)) : (e.item.data("margin-top-compensation", $(window).scrollTop()), e.item.css("margin-top", "+=" + e.item.data("margin-top-compensation")))
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/stage_switcher"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s;
                    t.push('<ul class="menus">\n  <li class="menu">\n    <a class="application" href="#">'), t.push(r(this.stage)), t.push('<input type="hidden" data-hotkey="`"></a>\n    <div class="items">\n      <ul class="items">\n        '), s = this.stages;
                    for (n = 0, i = s.length; n < i; n++) e = s[n], t.push('\n          <li class="item'), this.stage === e && t.push(r(" active")), t.push('">\n            <a href="#" data-stage="'), t.push(r(e)), t.push('">'), t.push(r(e)), t.push("</a>\n            "), this.stage === e && t.push("<span></span>"), t.push("\n          </li>\n        ");
                    t.push('\n      </ul>\n    </div>\n  </li>\n</ul>\n<span><a class="cancel" data-behavior="cancel">&#215;</a></span>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u;
        if (t = $.cookie("stage")) o = $.trim(t.replace(/\.$/, ""));
        u = ["production", "rollout", "beta1", "beta2", "beta3", "beta4", "beta5"], e = $("<div class=stage_switcher>"), i = function () {
            return e.html(JST["templates/stage_switcher"]({
                        stage: o,
                        stages: u
                    }))
        }, r = function () {
            return $.get("/" + bcx.currentAccountSlug + "/stage.txt", function (e) {
                return o = $.trim(e), i()
            })
        }, s = function () {
            return $.cookie("stage_switcher", "1"), e.addClass("active"), $("#launchbar.fake").show()
        }, n = function () {
            return $.cookie("stage_switcher", null), e.removeClass("active"), $("#launchbar.fake").hide()
        }, $(function () {
            $("#launchbar").prepend(e), i();
            if ($.cookie("stage") && $.cookie("stage_switcher")) return s(), r()
        }), $("#launchbar .stage_switcher:not(.active)").live("mousedown", function () {
            return r()
        }), $("#launchbar .stage_switcher:not(.active)").live("hotkey", function () {
            return s(), r(), !1
        }), $("#launchbar .stage_switcher:not(.active)").live("click", function (e) {
            if (e.shiftKey) return s(), !1
        }), $("#launchbar .stage_switcher [data-stage]").live("click", function (e) {
            return o = $(e.currentTarget).data("stage"), $.cookie("stage", "" + o + ".", {
                    domain: "." + window.location.hostname,
                    path: "/"
                }), i(), setTimeout(function () {
                    return window.location.reload()
                }, 1), !1
        }), $("#launchbar .stage_switcher a").live("click", function (e) {
            return !1
        }), $("#launchbar .stage_switcher a[data-behavior~=cancel]").live("click", function (e) {
            return n(), !1
        })
    }.call(this),
    function () {
        var e, t;
        e = null, t = function (t) {
            var n, r, i, s, o, u, a, f;
            return n = $(this), s = n.data("project-id"), r = $("[data-behavior~=project_star][data-project-id=" + s + "]"), i = "/projects/" + s + "/stars", a = t.data, (f = bcx.currentProject) != null && f[a.action](), r.toggleClass("on", a.toggle), a.toggle ? r.removeBehavior("hover_content") : r.addBehavior("hover_content").trigger("mouseenter"), n.parent().hasClass("card") && r.trigger("mouseleave"), o = $.cookie("project_view") === "starred" && n.data("refresh-project-view") !== !1, u = $.cookie("project_view") === "list" && n.data("refresh-project-view") !== !1, $.ajax(i, {
                    type: a.verb,
                    data: {
                        refresh_project_cards: o,
                        refresh_project_list: u
                    },
                    success: function (t) {
                        var r, i, s, f;
                        if (o) {
                            if ((i = $("section.projects.cards")).length) {
                                r = n.closest("article"), r.preserveScrollOffset(function () {
                                    return i.html(t)
                                });
                                if (a.toggle) return s = $(".starred_project_notification"), s.show().offset({
                                        top: r.offset().top - parseInt(s.height() / 2)
                                    }), e != null && clearTimeout(e), e = setTimeout(function () {
                                        return s.fadeOut(), e = null
                                    }, 4e3)
                            }
                        } else if (u && (f = $("div.stars_list")).length) return r = n.closest("article"), r.preserveScrollOffset(function () {
                            return f.html(t)
                        })
                    }
                }), t.preventDefault()
        }, $(".on[data-behavior~=project_star]").live("click tap", {
                verb: "DELETE",
                action: "unstar",
                toggle: !1
            }, t), $("[data-behavior~=project_star]:not(.on)").live("click tap", {
                verb: "POST",
                action: "star",
                toggle: !0
            }, t), bcx.on("page:update", 'apply "on" class to current project star', function () {
                var e, t;
                if ((t = bcx.currentProject) != null ? t.starred : void 0)
                    if ((e = $("div.sheet.project [data-behavior~=project_star]:not(.on)")).length > 0) return e.addClass("on")
            }), bcx.on("page:change", "request current project star state", function () {
                var e;
                if ((e = $("div.sheet.project [data-behavior~=project_star]")).length > 0) return $.ajax("/projects/" + e.attr("data-project-id") + "/stars", {
                        success: function (e) {
                            var t, n;
                            return e === "on" ? (t = bcx.currentProject) != null ? t.star() : void 0 : (n = bcx.currentProject) != null ? n.unstar() : void 0
                        }
                    })
            })
    }.call(this),
    function () {
        $("article.message.new, article.upload.new, article.calendar_event.new").live("expand", function (e) {
            var t;
            if (e.target !== this) return;
            t = $(this).find("[data-behavior~=lazy_load_subscribers]");
            if (t.html() === "") return $.ajax(t.url(), {
                    success: function (e) {
                        return t.html(e)
                    }
                })
        }), $("div.ad-hoc.subscribers").live("expand", function (e) {
            return $(this).find("[data-role~=human_input]:first").focus()
        }), bcx.installAdhocSubscribers = function () {
            return $(".subscribers[data-behavior~=expandable] [data-behavior~=adhoc_subscribers]").install("behavior for ad-hoc subscriber fields", function (e) {
                return $.getJSON("/everyone.json", function (t) {
                    var n;
                    return e.data("people", t), n = new bcx.views.AdhocSubscriberList({
                            el: e.get(0)
                        }), n.render(), n.focus()
                })
            })
        }, bcx.installAdhocSubscriberValidation = function () {
            var e, t;
            return e = $("[data-behavior~=adhoc_subscribers]").parents("form"), t = e.attr("data-behavior") || "", e.attr("data-behavior", "adhoc_subscriber_validation " + t)
        }, $("article.comment.new, .subscribers[data-behavior~=expandable]").live("expand", function () {
            return bcx.installAdhocSubscribers(), bcx.installAdhocSubscriberValidation()
        }), bcx.on("page:update", "install subscriber list behavior", function () {
            return $("[data-behavior~=subscriber_list]").install("behavior for subscriber fields", function (e) {
                var t;
                return t = new bcx.views.SubscriberList({
                        el: e.get(0)
                    }), t.render()
            })
        })
    }.call(this),
    function () {
        $("a[data-behavior~=resubscribe]").live("click", function () {
            return event.preventDefault(), $(this).parent().addClass("busy"), $.post($(this).url())
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o;
        (function () {
            var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T;
            return t = null, e = null, o = null, s = null, r = null, g = null, m = null, n = null, a =
                null, u = function () {
                return t = $("[data-behavior~=format_timeline]"), a ? n = t.filter("[data-event-id='" + a + "']") : n = null
            }, i = function (t, n) {
                return e = t, o = CalendarDate.parse(e.data("datetime")), s = e.data("bucket-identifier"), typeof n == "function" && n(), r = e, g = o, m = s
            }, w = function () {
                return r = null, g = null, m = null
            }, d = function (e, t) {
                var n, r, s, o;
                o = [];
                for (r = 0, s = e.length; r < s; r++) n = e[r], o.push(i($(n), t));
                return o
            }, l = function (e) {
                return w(), d(t, e)
            }, c = function (e) {
                var r, s;
                if (!n) return;
                s = t.index(n);
                if (s !== -1) return r = $(t.slice(0, s).toArray().reverse()), i(n), d(r, e)
            }, y = function () {
                return t.parent().find(".day").remove()
            }, h = function () {
                return t.parent().find(".project").hide()
            }, b = function () {
                if ((r != null ? r.data("event-id") : void 0) === e.data("event-id")) return e.remove()
            }, p = function () {
                if (o.isnt(g)) return e.parent().prepend(JST["templates/timeline_day_bubble"]({
                            date: o
                        }))
            }, S = function () {
                if (s !== m || o.isnt(g)) return e.prev("div.project").show()
            }, E = function () {
                return e.parent().show()
            }, f = function (e) {
                return e === "left" ? "right" : "left"
            }, T = function () {
                var t, n;
                if (e.data("side") == null) {
                    t = (n = r != null ? r.data("side") : void 0) != null ? n : "right";
                    if (s !== m || o.isnt(g)) t = f(t);
                    return e.attr("data-side", t), e.parent().find(".chiral").removeClass("left right").addClass(t)
                }
            }, x = function () {
                return t.scaleImages()
            }, v = function (e) {
                return $(window).scrollTop() < 50 || !n ? e() : n.preserveScrollOffset(e)
            }, bcx.on("page:update", "format timeline", function () {
                if ($("[data-behavior~=timeline]").length) {
                    u();
                    if (!t.filter(":not([data-side])").length) return;
                    return v(function () {
                        return y(), h(), l(function () {
                            return b(), p(), S(), E()
                        }), c(function () {
                            return T()
                        }), l(function () {
                            return T()
                        }), x()
                    }), a = t.first().data("event-id")
                }
            })
        })(), s = 0, i = !1, $(window).focus(function () {
            if ($("[data-behavior~=timeline]").length) return document.title = "Daily Progress", s = 0, i = !1
        }), $(window).blur(function () {
            return i = !0
        }), bcx.on("page:update", "show count in title when timeline changes", function () {
            var t;
            if ($("[data-behavior~=timeline]").length) {
                t = (new Date).getTime(), $("section.global_activity section.stream").find("article.event").each(function (n) {
                    var r, o, u;
                    u = Date.parse($(this).find("time").attr("datetime")), o = t < u + e() + 1e3, r = parseInt($(this).find("span.creator").attr("data-creator-id"));
                    if (o && r !== bcx.currentPerson.id) {
                        $(this).pulsate();
                        if (i) return s += 1
                    }
                });
                if (i && s > 0) return document.title = "(" + s + ") Daily Progress"
            }
        }), o = null, e = function () {
            return bcx.progress.period = 1e3 * Math.min(30, 5 + 4 * Math.log(bcx.progress.idleCount + 1))
        }, t = function () {
            var n;
            return n = $("section.stream").find("article.event"), n.length && $.get("/progress.js", {
                    after: n.data("event-id"),
                    since: n.data("datetime")
                }), o = setTimeout(t, e())
        }, n = function () {
            if (o == null) return bcx.progress = {
                idleCount: 0
            }, t()
        }, r = function () {
            if (o != null) return clearTimeout(o), o = null
        }, bcx.on("page:change", "poll for timeline changes", function () {
            return $("[data-behavior~=timeline]").length ? n() : r()
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f;
        t = "select[data-behavior=todos_date_filter]", e = "select[data-behavior=todos_assignee_filter]", u = "li.todo:not([data-behavior~=complete])", r = $.support.touch && $.browser.mobile ? "touchstart" : "focus", $(e).live("" + r + " update", function (e, t) {
            var r, i, o, u = this;
            return i = $(this).val(), $(this).find("option[value!=]").remove(), o = n.settings().dueDate, o && (r = f(o)), _.each($(this).data("options"), function (e) {
                var t;
                t = s(e.value, r);
                if (t.length !== 0) return $(u).append('<option value="' + e.value + '">' + e.option + " (" + t.length + ")</option>")
            }), $(this).val(t || i)
        }), window.bcx.todosDateFilterAction = function (e, t) {
            var r, i, s, u = this;
            return s = e.val(), e.find("option[value!=]").remove(), i = n.settings().assigneeCode, i && (r = a(i)), _.each(e.data("options"), function (t) {
                var n;
                n = o(t.value, r);
                if (n.length !== 0) return e.append('<option value="' + t.value + '">' + t.option + " (" + n.length + ")</option>")
            }), e.val(t || s)
        }, $(t).live("" + r + " update", function (e, t) {
            return window.bcx.todosDateFilterAction($(this), t)
        }), $("" + e + ", " + t).live("change", function () {
            return $(document).trigger("todofilter:settingschange")
        }), $("a[data-behavior~=show_all_todos]").live("click", function (e) {
            return n.reset(), e.preventDefault()
        }), i = function () {
            var e;
            return "" + (((e = bcx.currentProject) != null ? e.id : void 0) || window.location.pathname) + ":todoFilters"
        }, $(document).bind("todofilter:change todofilter:reset", function () {
            return bcx.storage.set(i(), n.settings())
        }), bcx.on("page:change", "load todo filter settings from storage", function () {
            n.updateFromStorage();
            if (!n.noneSet()) return $(document).trigger("todofilter:settingschange")
        }), $(document).bind("todofilter:settingschange todolists:loadmore todos:update", function () {
            if ($(e).length || $(t).length) return n.apply(), n.updateFromStorage()
        }), n = {
            settings: function () {
                return {
                    assigneeCode: $(e).val(),
                    dueDate: $(t).val()
                }
            },
            noneSet: function () {
                return _.compact(_.values(n.settings())).length === 0
            },
            reset: function () {
                return $("section.todos").removeClass("filtered"), $("ul.todolists > li").show(), $(u).show(), $(t).val(""), $(e).val(""), $(document).trigger("todofilter:reset")
            },
            updateFromStorage: function () {
                var n;
                if ($("" + e + ", " + t).length)
                    if (n = bcx.storage.get(i())) {
                        n.assigneeCode && $(e).trigger("update", n.assigneeCode);
                        if (n.dueDate) return $(t).trigger("update", n.dueDate)
                    }
            },
            apply: function () {
                var e, t, r, i, s;
                return i = n.settings().assigneeCode, s = n.settings().dueDate, n.noneSet() ? n.reset() : (n.displayHeader(), $("section.todos").addClass("filtered"), $("ul.todolists > li").show(), r = $(u).hide(), i && (e = a(i)), s && (t = f(s)), e && t ? $(_.intersect(e, t)).show() : e ? e.show() : t && t.show(), $("ul.todolists > li").each(function () {
                            if (!$(this).find("ul.todos li.todo:visible").length && !$(this).find("article.todolist").hasClass("new")) return $(this).hide()
                        }), $(document).trigger("todofilter:change"))
            },
            displayHeader: function () {
                var r, i, s, o, u;
                r = $("[data-behavior~=todo_filter_header]"), r.find("span").hide();
                if (i = n.settings().assigneeCode) s = _.detect($(e).data("options"), function (e) {
                    return e.value.toString() === i
                }).option;
                if (u = u = n.settings().dueDate) o = _.detect($(t).data("options"), function (e) {
                    return e.value === u
                }).option;
                if (s && o) return r.find("[data-behavior=assigned_to]").show().find("[data-behavior=value]").html(s).show(), r.find("[data-behavior=filter_and]").show(), r.find("[data-behavior=filter_due]").show().find("[data-behavior=value]").html(o.toLowerCase()).show();
                if (s) return r.find("[data-behavior=assigned_to]").show().find("[data-behavior=value]").html(s).show();
                if (o) return r.find("[data-behavior=filter_due]").show().find("[data-behavior=value]").html(o.toLowerCase()).show()
            }
        }, a = function (e) {
            return e === "unassigned" ? $("" + u + ":not([data-assignee-code])") : $("" + u + ":[data-assignee-code=" + e + "]")
        }, f = function (e) {
            return e === "never" ? $("" + u + ":not([data-due-datetime])") : $("" + u + ":[data-due-datetime]").filter(function () {
                var t;
                t = CalendarDate.parse($(this).data("due-datetime"));
                switch (e) {
                case "today":
                    return t.equals(CalendarDate.today());
                case "tomorrow":
                    return t.equals(CalendarDate.today().next());
                case "week":
                    return CalendarDate.today().fallsOnSameWeekAs(t);
                case "nextweek":
                    return CalendarDate.today().next(7).fallsOnSameWeekAs(t);
                case "later":
                    return t.compareTo(CalendarDate.today().beginningOfWeek().next(14)) === 1;
                case "past":
                    return t.compareTo(CalendarDate.today()) === -1
                }
            })
        }, s = function (e, t) {
            var n;
            return n = a(e), t ? _.intersect(n, t) : n
        }, o = function (e, t) {
            var n;
            return n = f(e), t ? _.intersect(t, n) : n
        }
    }.call(this),
    function () {
        var e, t, n = this;
        t = function (e) {
            var t, n;
            return t = e.data("collection-name"), ((n = bcx.currentProject) != null ? n.get("" + t + "_count") : void 0) === 0
        }, e = !1, $("div.sheet.global.todolists [data-behavior~=sortable_handle]").live("mousedown", function (t) {
            return e = !0
        }).live("mouseup", function (t) {
            return e = !1
        }).live("mousemove", function (t) {
            if (e) return e = !1, alert("You cannot reorder on this view")
        }), $("[data-behavior~=new_todolist]").live("click", function (e) {
            return $("article.todolist.new").expand(), e.preventDefault()
        }), $("article.todolist [data-behavior=edit]").live("click", function (e) {
            return $(this).closest("article.todolist").expand(), e.preventDefault()
        }), $("div.sheet.todolist aside [data-behavior=edit]").live("click", function (e) {
            return $(this).closest("div.sheet").find("article.todolist").expand(), e.preventDefault()
        }), $("section.todos article.todolist[data-behavior~=expandable]").live("expand", function (e) {
            var t;
            if (e.target !== this) return;
            return t = $(this), $("div.sheet.todolists").removeClass("blank_slate"), setTimeout(function () {
                return t.find("input[type=text]").first().focus().get(0).select(), t.find("textarea").keydown()
            }, 10)
        }).live("collapse", function (e) {
            var n, r;
            if (e.target !== this) return;
            return n = $(this), n.find("form").resetForm(), r = $(this).closest("section"), t(r) && $("div.sheet.todolists").addClass("blank_slate"), n.closest("article.todolist").find("div.nubbin").removeClass("busy")
        }), $("form.edit_todolist, form.new_todolist").live("ajax:before", function () {
            var e, t;
            e = $(this);
            if ((t = e.find(':input[name="todolist[name]"]')).length && !$.trim(t.val())) return e.removeClass("submitting"), t.get(0).focus(), !1
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u;
        $(document).bind("todo:move", function (e, t, n) {
            var r, i;
            return r = $(n).find("> article.todolist"), r.find("ul.empty").removeClass("empty"), i = {
                context: "move",
                todo: {
                    position: t
                }
            }, r.length && (i.todo.todolist_id = r.id()), $.ajax({
                    url: $(e.target).url(),
                    type: "PUT",
                    data: i
                })
        }), $(document).bind("todolist:move", function (e, t) {
            var n;
            return n = $(e.target).find("> article.todolist"), $.ajax({
                    url: n.url(),
                    type: "PUT",
                    data: {
                        context: "move",
                        todolist: {
                            position: t
                        }
                    }
                })
        }), $("article.todolist li [data-behavior~=toggle], :checkbox[data-behavior~=toggle_todo]").live("click", function () {
            return $.ajax({
                    url: $(this).url(),
                    type: "POST"
                })
        }), $("article.todolist ul.new").live("expand", function (e) {
            var t;
            if (e.target !== this) return;
            return t = $(this), t.find("textarea").first().focus(), setTimeout(function () {
                return t.find(".busy").removeClass("busy")
            }, 10)
        }), $(document).bind("keydown.todo_content", function (e) {
            var t;
            if ($(e.target).parents("li.edit_mode").length === 0 || $(e.target).parents("span.pill").length > 0) return;
            t = $(e.target).closest("form");
            switch (e.which) {
            case $.ui.keyCode.ESCAPE:
                return t.find("a[data-behavior=cancel]").click();
            case $.ui.keyCode.TAB:
                return setTimeout(function () {
                    return t.find("span[data-behavior~=expandable]").expand()
                }, 10)
            }
        }), $("span[data-behavior~=expandable]:has([data-behavior~=relative_date_picker])").live("beforeexpand", function () {
            var e, t, n;
            return e = $(this).find("[data-behavior~=relative_date_picker]"), t = e.closest("form"), n = new bcx.views.RelativeDatePicker({
                    el: e,
                    due_week: t.find('input[name~="todo[due_week]"]').val(),
                    due_wday: t.find('input[name~="todo[due_wday]"]').val(),
                    onDatePick: function (n, r) {
                        var i;
                        return i = e.closest("span.pill"), t.find('input[name~="todo[due_week]"]').val(n), t.find('input[name~="todo[due_wday]"]').val(r), t.hasBehavior("new_todo") ? (i.find("time").text("Week " + (n + 1) + " " + CalendarDate.weekdayNames[r]), t.find("textarea").last().focus()) : (i.addClass("busy"), t.submit()), i.collapse()
                    }
                }), n.render()
        }), $("span[data-behavior~=expandable]:has([data-behavior~=date_picker])").live("beforeexpand", function () {
            var e, t, n;
            return t = $(this).find("[data-behavior~=date_picker]"), e = t.prev("[data-behavior~=alt_date_field]"), n = e.val(), t.closest("form").hasBehavior("new_todo") && $(this).closest("span.pill").removeClass("blank"), t.datepicker({
                    altField: e,
                    dateFormat: "yy-mm-dd",
                    altFormat: "yy-mm-dd",
                    firstDay: CalendarDate.firstDayOfWeek,
                    onSelect: function () {
                        var e, n, r;
                        return e = t.closest("form"), n = $(this).closest("span.pill"), e.hasBehavior("new_todo") ? (r = t.datepicker("getDate"), n.find("time").text(CalendarDate.parse(r).abbreviatedShortWithWeekday()), e.find("textarea").last().focus()) : (n.addClass("busy"), e.submit()), n.collapse()
                    }
                }), n ? t.datepicker("setDate", n) : (t.datepicker("setDate", null), t.find(".ui-state-active").removeClass("ui-state-active"))
        }), $(".ui-datepicker-next, .ui-datepicker-prev").live("click", function (e) {
            return e.stopImmediatePropagation()
        }), $("footer a[data-behavior~=no_due_date]").live("click", function (e) {
            var t, n, r;
            return e.preventDefault(), n = $(this).closest("form"), n.find("[data-behavior~=alt_date_field]").val(""), r = n.find("span.pill"), n.hasBehavior("new_todo") ? (t = r.find("time"), t.text(t.data("blank-text")), n.find("textarea").last().focus()) : (r.addClass("busy"), n.submit()), r.collapse()
        }), e = function () {
            function e(e) {
                this.selects = $(e)
            }
            return e.prototype.watch = function (e) {
                return this.selects.live("keydown", function (t) {
                    var n;
                    return n = $(this), t.keyCode === $.ui.keyCode.ENTER ? e.call(this, n) : n.data("assignee-changing", !0)
                }), this.selects.live("change", function () {
                    var t;
                    t = $(this), t.data("assignee-changed", !0);
                    if (!t.data("assignee-changing")) return e.call(this, t)
                }), this.selects.live("mouseover blur", function () {
                    return $(this).data("assignee-changing", !1)
                }), this.selects.live("blur", function () {
                    var t;
                    t = $(this);
                    if (t.data("assignee-changed")) return e.call(this, t)
                })
            }, e
        }(), n = new e("article.todolist li.edit_mode select"), n.watch(function (e) {
            var t, n, i;
            return n = e.closest("span.pill"), t = n.find("[data-behavior~=assignee_name]"), t.width(t.width()), e.parents("form").find("textarea").last().focus(), (i = e.val()) ? (e.data("assignee-code", i), n.removeClass("blank"), t.text(e.find(":selected").text()), r(e), s(e)) : (e.data("assignee-code", ""), n.addClass("blank"), t.text(t.data("blank-text"))), e.data("assignee-changing", !1)
        }), i = new e("article.todolist li:not(.edit_mode) select, form[data-behavior~=edit_calendar_todo] select"), i.watch(function (e) {
            return t(e) ? o(e) : u(e)
        }), $("article.todolist li:not(.edit_mode) [data-behavior~=confirm_assignee_change]").live("click", function () {
            return u($(this)), !1
        }), $("article.todolist li:not(.edit_mode) [data-behavior~=cancel_assignee_change]").live("click", function () {
            var e, t;
            return e = $(this).parents("form"), t = e.find("select"), t.val(e.data("original-assignee-code")), e.trigger("reset"), t.focus(), r(t), s(t), !1
        }), t = function (e) {
            return (!bcx.currentBucket || bcx.currentBucket.isActive() && !bcx.currentBucket.justPublished) && e.find(":selected").data("assignee-wants-notifications") === !1
        }, o = function (e) {
            var t;
            return t = e.parents("form"), t.find("[data-display~=no-email-confirmation-on]").show(), t.find("[data-display~=no-email-confirmation-off]").hide(), e.parents("form").find(".exclusively_expanded").trigger("expand")
        }, r = function (e) {
            return e.parents("form").find("[data-display~=no-email-confirmation-on]").hide(), e.parents("form").find("[data-display~=no-email-confirmation-off]").show()
        }, s = function (e) {
            var n;
            return n = e.parents("form"), t(e) ? (n.find("[data-display~=no-email-warning-on]").show(), n.find("[data-display~=no-email-warning-off]").hide()) : (n.find("[data-display~=no-email-warning-on]").hide(), n.find("[data-display~=no-email-warning-off]").show())
        }, u = function (e) {
            var t;
            return t = e.closest("span.pill"), t.collapse().addClass("busy"), t.closest("form").submit(), e.data("assignee-changing", !1), e.data("original-assignee-code", e.val())
        }, $("article.todolist ul.new form").live("reset", function () {
            var e, t, n;
            return n = $(this), n.find("span.pill").addClass("blank"), e = n.find("[data-behavior~=assignee_name]"), e.text(e.data("blank-text")), s(e), t = n.find("[data-behavior~=due_date]"), t.text(t.data("blank-text")), n.find("[data-behavior~=alt_date_field]").val(""), n.find("span.pill[data-behavior~=expandable]:has(.balloon)").collapse(), setTimeout(function () {
                return n.find("textarea").last().focus()
            }, 10)
        }), $("span.pill[data-behavior~=expandable]:has(.balloon)").live("expand", function (e) {
            return $(this).closest("li.todo").addClass("balloon_expanded"), $(this).find("[data-behavior~=assignee_options]").focus()
        }), $("span.pill[data-behavior~=expandable]:has(.balloon)").live("collapse", function (e) {
            return $(this).closest("li.todo").removeClass("balloon_expanded"), $(this).find("[data-behavior~=assignee_name]").width("auto")
        }), bcx.on("page:change", 'show todo pills and add "ignore_hover" class', function () {
            return $("div.sheet.todo span.pill:not(.comments)").show().addClass("ignore_hover")
        }), $("article.todolist form.edit_todo, article.todolist form.new_todo").live("ajax:before", function () {
            var e, t;
            t = $(this);
            if ((e = t.find(':input[name="todo[content]"]')).length && !$.trim(e.val())) return t.removeClass("submitting"), e.get(0).focus(), !1
        }), $("[data-behavior~=load_completed_todos]").live("click", function (e) {
            return e.preventDefault(), e.stopImmediatePropagation(), $(this).closest("p").addClass("busy"), $(this).closest("ul.completed").load($(this).attr("href"))
        })
    }.call(this),
    function () {
        var e;
        e = function (e) {
            var t, n;
            return t = e.data("collection-name"), ((n = bcx.currentProject) != null ? n.get("" + t + "_count") : void 0) === 0
        }, $("form#new_upload").live("ajax:success", function (e) {
            return (new bcx.Busy(this)).end()
        }), $("form#new_upload").live("ajax:error", function (e) {
            return (new bcx.Busy(this)).end(), alert("There was a problem with your upload. Please try again.")
        }), $("[data-behavior~=new_upload]").live("click", function (e) {
            return $("article.upload.new").expand(), e.preventDefault()
        }), $("article.upload.new").live("expand", function (e) {
            if (e.target !== this) return;
            return $("div.sheet.attachments").removeClass("blank_slate")
        }).live("collapse", function (t) {
            var n;
            $(this).find("form").resetForm(), $(this).find("textarea").keydown(), n = $(this).parent().find("section");
            if (e(n)) return $("div.sheet.attachments").addClass("blank_slate")
        })
    }.call(this),
    function () {
        $(document).ready(function () {
            if (navigator.platform.match(/Win32/)) return $(document.body).addClass("windows")
        })
    }.call(this),
    function () {
        bcx.on("page:change", "hide or show account limit notices", function () {
            if (bcx.currentPerson != null) return bcx.currentPerson.attributes.show_storage_prod ? $("div.limit.storage.prod").show() : $("div.limit.storage.prod").hide(), bcx.currentPerson.attributes.account_can_upload ? $("div.limit.storage.reached").hide() : ($("div.limit.storage.reached:not(.thanks)").show(), $("[data-role~=account_upgrade_wrapper]").hide())
        })
    }.call(this),
    function () {
        var e, t;
        e = {}, t = function (e) {
            return e.substring(e.lastIndexOf("/") + 1)
        }, $(function () {
            return _.each($("link[data-asset-path]"), function (n) {
                return e[n.getAttribute("data-asset-path")] = t(n.href)
            }), _.each($("script[data-asset-path]"), function (n) {
                return e[n.getAttribute("data-asset-path")] = t(n.src)
            })
        }), $(document).on("ajaxSuccess", function (t, n, r) {
            var i;
            i = n.getResponseHeader("X-Asset-Paths");
            if (i != null) {
                try {
                    i = JSON.parse(i)
                } catch (s) {
                    i = JSON.parse("[" + i + "]")[0]
                }
                return _.each(i, function (t, n) {
                    if (e[n] !== t) return Stacker.pushState = !1, e[n] = t
                })
            }
        })
    }.call(this),
    function () {
        bcx.on("page:update", "install autoload behavior", function () {
            return $("[data-autoload-url]").install("behavior for autoloading a URL", function (e) {
                var t, n;
                if (n = e.data("autoload-url")) return $.get(n), e.attr("data-autoload-url", ""), t = e.closest("div.sheet"), t.addBehavior("prevent_reload_when_stacked")
            })
        })
    }.call(this),
    function () {
        var e, t;
        t = "[data-behavior~=autoresize]:not([data-behavior~=wysiwyg])", e = function (e) {
            return e.filter(":visible").autoResize()
        }, bcx.on("page:update", "install autoresize behavior on visible elements", function () {
            return e($(t))
        }), $("[data-behavior~=expandable]:has(" + t + ")").live("expand", function () {
            return e($(this).find(t))
        }), $("" + t + ":visible").live("focus", function () {
            return $(this).autoResize()
        })
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            };
        e = function () {
            function e(e) {
                this.clearWhenSubmit = t(this.clearWhenSubmit, this), this.clear = t(this.clear, this), this.save = t(this.save, this), this.watchForChanges = t(this.watchForChanges, this), this.restore = t(this.restore, this), this.generateStorageKey = t(this.generateStorageKey, this), this.$input = $(e), this.form = this.$input.closest("form"), this.storageKey = this.generateStorageKey(), this.restore(), this.watchForChanges(), this.clearWhenSubmit()
            }
            return e.prototype.generateStorageKey = function () {
                var e;
                return e = $.md5([this.$input.attr("name"), this.form.attr("action"), window.location.pathname].join("")), "autosave:" + e
            }, e.prototype.restore = function () {
                var e;
                if (e = bcx.storage.get(this.storageKey))
                    if (!this.$input.val()) return this.$input.val(e)
            }, e.prototype.watchForChanges = function () {
                var e = this;
                return this.$input.bind("change keyup paste", function () {
                    return e.save()
                })
            }, e.prototype.save = function () {
                return bcx.storage.set(this.storageKey, this.$input.val())
            }, e.prototype.clear = function () {
                return bcx.storage.unset(this.storageKey)
            }, e.prototype.clearWhenSubmit = function () {
                var e = this;
                return this.form.bind("submit", function () {
                    return e.form.data("remote") ? e.form.bind("ajaxSuccess." + e.storageKey, function (t, n, r) {
                        if (e.form.attr("action") === r.url) return e.form.unbind("ajaxSuccess." + e.storageKey), e.clear()
                    }) : e.clear()
                })
            }, e
        }(), bcx.on("page:update", "install autosave behavior", function () {
            return $("[data-behavior~=autosave]").install("behavior for autosaving", function (t) {
                return t.each(function () {
                    return new e(this)
                })
            })
        })
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            };
        e = function () {
            function e(e) {
                this.updateAvailability = t(this.updateAvailability, this), this.timeLeftInWords = t(this.timeLeftInWords, this), this.availableUntil = t(this.availableUntil, this), this.isAvailable = t(this.isAvailable, this), this.watchOrRemove = t(this.watchOrRemove, this), this.$el = $(e), this.watchOrRemove()
            }
            return e.prototype.watchOrRemove = function () {
                var e = this;
                return this.isAvailable() ? (this.updateAvailability(), setTimeout(function () {
                            return e.watchOrRemove()
                        }, 5e3)) : this.$el.remove()
            }, e.prototype.isAvailable = function () {
                return new Date < this.availableUntil()
            }, e.prototype.availableUntil = function () {
                return new Date(Date.parse(this.$el.data("available-until")))
            }, e.prototype.timeLeftInWords = function () {
                var e;
                return e = (this.availableUntil() - new Date) / 6e4, e < 1 ? "" + Math.floor(e * 60) + " seconds" : e >= 1 && e < 2 ? "1 minute" : "" + Math.floor(e) + " minutes"
            }, e.prototype.updateAvailability = function () {
                return this.$el.find("[data-display~=available_time_left]").text(this.timeLeftInWords())
            }, e
        }(), bcx.on("page:update", "install availability window behavior", function () {
            return $("[data-available-until]").install("behavior for availability window", function (t) {
                return t.each(function () {
                    return new e(this)
                })
            })
        })
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            };
        e = function () {
            function e(e) {
                this.availableAfter = t(this.availableAfter, this), this.isAvailable = t(this.isAvailable, this), this.watchOrShow = t(this.watchOrShow, this), this.$el = $(e), this.watchOrShow()
            }
            return e.prototype.watchOrShow = function () {
                var e = this;
                return this.isAvailable() ? this.$el.show() : setTimeout(function () {
                    return e.watchOrShow()
                }, 5e3)
            }, e.prototype.isAvailable = function () {
                return new Date > this.availableAfter()
            }, e.prototype.availableAfter = function () {
                return new Date(Date.parse(this.$el.data("available-after")))
            }, e
        }(), bcx.on("page:update", "install available-after behavior", function () {
            return $("[data-available-after]").install("behavior for availabile after", function (t) {
                return t.each(function () {
                    return new e(this)
                })
            })
        })
    }.call(this),
    function () {
        bcx.on("page:update", "load Backbone sync tags", function () {
            var e;
            return e = function (e) {
                var t;
                return t = $(e).remove(), {
                    collection: bcx[t.attr("name")],
                    attributes: JSON.parse(t.attr("value"))
                }
            }, $("input[data-behavior~=backbone_model]").each(function () {
                var t, n, r;
                return r = e(this), n = r.collection, t = r.attributes, n.addOrUpdate(t)
            }), $("input[data-behavior~=backbone_collection]").each(function () {
                var t, n, r;
                return r = e(this), n = r.collection, t = r.attributes, $(this).data("reset-collection") != null && n.reset(), n.merge(t)
            })
        })
    }.call(this),
    function () {
        var e;
        $.fn.addBehavior = function (t) {
            var n;
            return n = e(this), n.push(t), this.attr("data-behavior", _(n).uniq().join(" "))
        }, $.fn.removeBehavior = function (t) {
            var n;
            return n = e(this), this.attr("data-behavior", _(n).without(t).join(" "))
        }, $.fn.hasBehavior = function (t) {
            return _.include(e(this), t)
        }, e = function (e) {
            return (e.attr("data-behavior") || "").split(" ")
        }
    }.call(this),
    function () {
        bcx.CalendarEventsLoader = function () {
            function e(e) {
                this.display = e, this.rows = this.display.get("rows"), this.loadedDateRanges = {}
            }
            return e.prototype.fetch = function (e) {
                var t, n, r, i, s, o = this;
                r = this.determineRanges(e);
                if (r.length) return t = [this.display.getFirstDate(), this.display.getLastDate()], n = this.isDateRangeLoaded(t[0], t[1]), n || this.display.trigger("current_date_range:loading"), s = r[0][0], i = r[r.length - 1][1], $.get("/calendar/fetch_events", {
                        window_start_date: s.toString(),
                        window_end_date: i.toString()
                    }, function () {
                        o.display.calendarEvents.addRecurrencesInRange(o.display.getFirstDate(), o.display.getLastDate()), o.markDateRangesLoaded(r);
                        if (!n) return o.display.trigger("current_date_range:loaded", t[0])
                    })
            }, e.prototype.determineRanges = function (e) {
                var t, n, r, i, s = this;
                i = [], t = [this.display.getFirstDate(), this.display.getLastDate()], i.push(t);
                switch (e) {
                case "forward":
                    n = this.getDateRangeFor(t[1]), i.push(n), i.push(this.getDateRangeFor(n[1]));
                    break;
                case "backward":
                    r = this.getDateRangeFor(t[0].previous()), i.unshift(r), i.unshift(this.getDateRangeFor(r[0].previous()));
                    break;
                default:
                    i.push(this.getDateRangeFor(t[1])), i.unshift(this.getDateRangeFor(t[0].previous()))
                }
                return _(i).filter(function (e) {
                    return !s.isDateRangeLoaded(e[0], e[1])
                })
            }, e.prototype.getDateRangeFor = function (e) {
                var t, n;
                return n = e.beginningOfMonth().beginningOfWeek(), t = n.next(-1 + 7 * this.rows), [n, t]
            }, e.prototype.isDateRangeLoaded = function (e, t) {
                return this.loadedDateRanges[this.rangeKeyFor(e, t)] != null
            }, e.prototype.rangeKeyFor = function (e, t) {
                return "" + e.toString() + ":" + t.toString()
            }, e.prototype.markDateRangesLoaded = function (e) {
                var t, n, r, i;
                i = [];
                for (n = 0, r = e.length; n < r; n++) t = e[n], i.push(this.loadedDateRanges[this.rangeKeyFor(t[0], t[1])] = !0);
                return i
            }, e
        }()
    }.call(this),
    function () {
        var e, t;
        e = "", (t = function () {
            if (navigator.userAgent.match(/iPhone.*Mobile.*Safari/)) return;
            return bcx.currentAccountSlug && window.location.pathname === "/" + bcx.currentAccountSlug + "/calendar" ? $.ajax("/" + bcx.currentAccountSlug + "/calendar_updates?since=" + e, {
                    complete: function (n) {
                        return e = n.getResponseHeader("X-Page-Updated-At"), setTimeout(t, 5e3)
                    }
                }) : (e = "", setTimeout(t, 1e4))
        })()
    }.call(this),
    function () {
        $("a[data-behavior~=close_sheet]").live("click", function (e) {
            var t, n, r;
            if (r = Stacker.workspace.container.stack) return t = r.length, r.length === 1 ? Stacker.workspace.visit("/", {
                    bareWorkspace: !0
                }) : (n = r[r.length - 2], Stacker.workspace.visit(n.path)), e.preventDefault()
        })
    }.call(this),
    function () {
        var e, t;
        e = "form[data-behavior~=confirm]", $("" + e + " a[data-behavior~=start]").live("click", function (n) {
            var r;
            return r = $(this).closest(e), t("confirm", r), r.find("input[type=submit]").focus()
        }), $("" + e + " a[data-behavior~=stop]").live("click", function (n) {
            var r;
            return r = $(this).closest(e), t("intro", r)
        }), $(e).live("ajax:before", function (e) {
            var n;
            return n = $(this), t("request", n)
        }), t = function (e, t) {
            return t.find("> div:visible").hide(), t.find("> div." + e).show()
        }
    }.call(this),
    function () {}.call(this),
    function () {
        bcx.on("page:update", "group by date", function () {
            var e, t, n, r, i, s, o, u, a, f, l, c;
            t = $("section[data-behavior~=group_by_date] article[data-behavior~=group_by_date]");
            if (!t.length) return;
            r = t.closest("section"), a = CalendarDate.today(), u = {}, o = function (e) {
                var t, n;
                return (t = u[e]) ? t : (n = "> div.date_group[datetime='" + e + "']", (t = r.find(n)).length || (r.append($(JST["templates/date_group"]({
                                        today: a,
                                        date: e
                                    }))), t = r.find(n)), u[e] = t)
            }, c = [];
            for (f = 0, l = t.length; f < l; f++) i = t[f], e = $(i), e.removeBehavior("group_by_date"), s = CalendarDate.parse(e.attr("datetime")), n = o(s), c.push(n.append(e));
            return c
        })
    }.call(this),
    function () {
        $.datepicker.setDefaults({
                dateFormat: "d M, yy",
                dayNamesMin: ["S", "M", "T", "W", "T", "F", "S"],
                changeMonth: !1,
                changeYear: !1,
                gotoCurrent: !0,
                prevText: "Previous",
                selectOtherMonths: !0,
                showOtherMonths: !0
            }), $("[data-behavior~=date_picker]").live("focus", function () {
                return $(this).datepicker
            }), $("table.ui-datepicker-calendar td a.ui-state-default").live("click", function (e) {
                return e.stopImmediatePropagation()
            })
    }.call(this),
    function () {
        bcx.on("page:update", "install dirty-tracking behavior", function () {
            return $("[data-behavior~=dirty_tracking]").install("tracking of original value", function (e) {
                return e.each(function () {
                    var e;
                    return e = $(this), e.data("originalValue", e.val())
                })
            })
        }), $("[data-behavior~=dirty_tracking]").live("change keyup paste", _.debounce(function (e) {
                    var t, n;
                    t = $(e.currentTarget), n = t.val() !== t.data("originalValue");
                    if (t.attr("data-dirty")) {
                        if (!n) return t.removeAttr("data-dirty")
                    } else if (n) return t.attr("data-dirty", !0)
                }, 350)), $("form").live("submit reset", function (e) {
                return setTimeout(function () {
                    if (!e.isDefaultPrevented()) return $(e.currentTarget).find("[data-behavior~=dirty_tracking]").removeAttr("data-dirty")
                }, 10)
            }), $.fn.isDirty = function () {
            return $(this).find("[data-dirty]").length > 0
        }
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f;
        t = !1, bcx.on("animate_draft:on", "flag draft creation", function () {
            return t = !0
        }), bcx.on("page:beforechange page:change", "hide or show project draft notice", function () {
            return $("div.sheet.project[data-status=draft]").length ? (s(), r(), bcx.peopleAndGroups.loadWithAccesses(), bcx.peopleAndGroups.bind("loaded:withAccess", f)) : i()
        }), s = function () {
            if (!$("#draft_notice").length) return $("#workspace").before(JST["templates/draft_notice"](this)), u()
        }, f = function () {
            var e, t, n;
            return t = _(bcx.currentBucket.people()).reject(function (e) {
                return e.isPerson() && e.id === "person_" + bcx.currentPerson.id
            }), e = function () {
                switch (t.length) {
                case 0:
                    return "You're the only one on this project. Invite more people so they can join the discussion.";
                case 1:
                    return "" + t[0].get("name") + " has been notified.";
                case 2:
                case 3:
                case 4:
                    return n = t.map(function (e) {
                        return e.get("name")
                    }).sort().join(", ").replace(/,\s([^,]+)$/, " and $1"), "" + n + " have been notified.";
                default:
                    return n = t.slice(0, 3).map(function (e) {
                        return e.get("name")
                    }).sort().join(", "), "" + n + ", and " + (t.length - 3) + " other people have been notified."
                }
            }(), $('p[data-behavior~="recipients_notified_notice"]').html(e)
        }, i = function () {
            return $("#draft_notice").remove()
        }, o = function () {
            return $("#draft_notice").removeClass("initial_load")
        }, u = function () {
            return t ? (e(), t = !1) : o()
        }, e = function () {
            return setTimeout(function () {
                var e;
                return e = $("#draft_notice"), e.css({
                        display: "block",
                        height: 0
                    }), e.transition({
                        height: e.find("> div").height() + 40
                    }, {
                        duration: 250,
                        timing: "ease-in-out",
                        complete: function () {
                            return e.transition({
                                    opacity: 1
                                }, {
                                    duration: 300,
                                    timing: "ease-in-out",
                                    complete: function () {
                                        return e.css({
                                                height: ""
                                            }), e.removeClass("initial_load"), $("[data-behavior~=edit_project_header] h1[data-behavior~=editable_field_prompt]").click()
                                    }
                                })
                        }
                    })
            }, 700)
        }, n = function () {
            var e;
            return e = $("#draft_notice"), e.find("section.draft_description").hide(), e.find("section.draft_confirmation").show().transition({
                    opacity: 1
                }), setTimeout(function () {
                    return e.css({
                            height: e.find("> div").height() + 40
                        }), e.transition({
                            opacity: 0
                        }, {
                            duration: 300,
                            timing: "ease-in-out",
                            complete: function () {
                                return e.transition({
                                        height: 0
                                    }, {
                                        complete: function () {
                                            return e.hide()
                                        }
                                    })
                            }
                        })
                }, 6e3)
        }, a = function () {
            return $("section.project_settings a.settings").show(), $("section.project_settings a.delete").hide()
        }, r = function () {
            return $("section.project_settings a.settings").hide(), $("section.project_settings a.delete").show()
        }, $("[data-behavior~=publish_draft_project]").live("click", function (e) {
            return $(this).closest(".submit").addClass("busy"), $.ajax({
                    url: bcx.currentProject.urlForPublish(),
                    type: "PUT",
                    success: function () {
                        return n(), a(), bcx.currentBucket.justPublished = !0
                    }
                }), e.preventDefault()
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f;
        u = "html > .drag_hover_highlight", a = function () {
            return $(u).show()
        }, i = function () {
            return $(u).hide()
        }, f = 8, t = $("<div class=drag_hover_highlight>").css({
                height: f + "px"
            }), n = $("<div class=drag_hover_highlight>").css({
                height: f + "px"
            }), r = $("<div class=drag_hover_highlight>").css({
                width: f + "px"
            }), e = $("<div class=drag_hover_highlight>").css({
                width: f + "px"
            }), o = function (i) {
            var s, o, u, a, l, c, h, p, d, v, m, g, y, b, w;
            return w = i.offset(), h = w.left, d = w.top, b = i.outerWidth(), o = i.outerHeight(), p = h + b, s = d + o, g = $(window).scrollTop(), m = $(window).scrollLeft(), y = $(window).width(), v = $(window).height(), c = Math.max(0, d - g - f), a = Math.max(0, h - m - f), l = Math.min(y - f, p - m), u = Math.min(v - f, s - g), t.css({
                    width: b + f + "px",
                    left: a + "px",
                    top: c + "px"
                }), n.css({
                    width: b + 2 * f + "px",
                    left: a + "px",
                    top: u + "px"
                }), r.css({
                    height: o + f + "px",
                    left: a + "px",
                    top: c + "px"
                }), e.css({
                    height: o + f + "px",
                    left: l + "px",
                    top: c + "px"
                })
        }, $(document).ready(function () {
            return $("html").append(t, n, r, e), $(u).bind("mouseover", i), i()
        }), s = null, $(document).bind("file:dragenter", function (e) {
            s = $(e.target).dispatch("file:draghighlight"), $(e.target).addClass("drag_hover");
            if (!s.isDefaultPrevented()) return o($(e.target)), a()
        }), $(document).bind("file:dragleave", function (e) {
            return i(), setTimeout(function () {
                return $(e.target).removeClass("drag_hover")
            }, 5)
        }), $(document).bind("file:drop", function (e) {
            return $(e.target).removeClass("drag_hover")
        })
    }.call(this),
    function () {
        var e, t = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        e = function (e) {
            var n, r, i, s;
            return n = $(document.documentElement), r = (i = (s = n.attr("data-features")) != null ? s.split(" ") : void 0) != null ? i : [], t.call(r, e) < 0 && r.push(e), n.attr("data-features", r.join(" "))
        }, window.File && e("files_api")
    }.call(this),
    function () {
        $("[data-behavior~=hide_buttons_on_expand]").live("expand", function (e) {
            return $(this).parents().find(".has_buttons").first().addClass("hide_buttons")
        }).live("collapse", function (e) {
            return $(this).parents().find(".has_buttons").first().removeClass("hide_buttons")
        })
    }.call(this),
    function () {
        var e, t, n, r, i;
        n = "[data-behavior~=has_hover_content]", r = "[data-behavior~=hover_content]:not(.expanded, .ignore_hover)", $.support.touch && $(n).live("tap", function () {
            if ($(this).find(r).filter(function () {
                        return $(this).is(":hidden") || $(this).css("visibility") === "hidden"
                    }).length) return event.preventDefault(), i(this, function (e) {
                    return $(e).addClass("popout")
                })
        }), $(n).live("mouseenter", function () {
            return i(this)
        }), $(n).live("mouseleave", function () {
            return t(this)
        }), i = function (t, n) {
            return $(t).find("" + r + ":not([data-hovercontent-strategy])").each(function () {
                if ($(this).css("visibility") === "hidden") return $(this).attr("data-hovercontent-strategy", "visibility")
            }), $(".hiding").each(function () {
                return e($(this), !1)
            }), $(t).find(r).each(function () {
                $(this).data("hovercontent-strategy") === "visibility" ? ($(this).css("visibility", "visible"), $(this).addClass("showing")) : ($(this).hide(), $(this).show()), $(this).trigger("hovercontent:show");
                if (n) return n(this)
            })
        }, e = function (e, t) {
            var n = this;
            return e.data("hovercontent-strategy") === "visibility" ? t ? (e.addClass("hiding"), setTimeout(function () {
                        return e.css("visibility", "hidden"), e.removeClass("hiding"), e.removeClass("showing")
                    }, 120)) : (e.css("visibility", "hidden"), e.removeClass("showing")) : t ? (e.addClass("hiding"), e.delay(100).fadeOut(100, function () {
                        return $(this).removeClass("hiding")
                    })) : e.hide(), e.trigger("hovercontent:hide")
        }, t = function (t, n) {
            return n == null && (n = !0), $(t).find("" + r + ":visible").each(function () {
                var t;
                t = $(this);
                if (t.css("visibility") === "hidden") return;
                return e(t, n)
            })
        }
    }.call(this),
    function () {
        $("form[data-behavior~=member], form[data-behavior~=invite], form[data-behavior~=adhoc_subscriber_validation]").live("ajax:before", function (e) {
            var t, n, r;
            t = $(this), n = t.find("div.field.invalid");
            if (n.size()) return n.first().find("[data-role~=human_input]").focus(), !1;
            r = t.find("div.field.unknown");
            if (r.size()) return r.first().find("[data-role~=human_input]").focus(), !1
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a, f;
        $(document).ready(function () {
            var e;
            if (e = window.location.hash.match(/\#_enlarge_(\d+)/) || window.location.search.match(/\enlarge=(\d+)/)) return $("[data-behavior~=enlargeable][data-image-id~=" + e[1] + "]").click()
        }), $("[data-behavior~=enlargeable]").live("click", function (t) {
            var n, r, i;
            if (t.metaKey) return;
            t.preventDefault(), t.stopPropagation(), n = $(this).is("img") ? $(this) : $(this).find("img"), r = n.closest("section, html");
            if (i = n.data("image-id")) return new e({
                    activeImageId: i,
                    $thumbnails: r.find("img[data-container-id=" + n.data("container-id") + "]")
                })
        }), e = function () {
            function e(e) {
                var t, n, r;
                e == null && (e = {}), t = e.$thumbnails, n = e.activeImageId, this.images = function () {
                    var e, n, i;
                    i = [];
                    for (e = 0, n = t.length; e < n; e++) r = t[e], i.push(s($(r)));
                    return i
                }(), this.activate(n), this.install()
            }
            return e.prototype.bind = function () {
                var e, t = this;
                return e = $(this.el), e.delegate("[data-behavior~=activate]", "click", function (e) {
                    return t.activate($(e.target).data("image-id")), t.redraw()
                }), e.delegate("[data-behavior~=scroll_forward]", "click", function (e) {
                    if (!$(e.target).is("[disabled]")) return t.nav.scrollForward()
                }), e.delegate("[data-behavior~=scroll_reverse]", "click", function (e) {
                    if (!$(e.target).is("[disabled]")) return t.nav.scrollReverse()
                }), e.bind("click", function (e) {
                    if (!$(e.target).is("a, [data-behavior]")) return t.uninstall()
                }), $(document).bind("keydown.image_enlarger", function (e) {
                    switch (e.which) {
                    case $.ui.keyCode.ESCAPE:
                        return t.uninstall(), e.preventDefault();
                    case $.ui.keyCode.RIGHT:
                        return t.next(), e.preventDefault();
                    case $.ui.keyCode.LEFT:
                        return t.previous(), e.preventDefault();
                    case $.ui.keyCode.UP:
                        return e.preventDefault();
                    case $.ui.keyCode.DOWN:
                        return e.preventDefault()
                    }
                }), $(document).bind("workspace:beforeload.image_enlarger", function () {
                    return t.uninstall({
                            withAnimation: !1
                        })
                }), $(window).bind("resize.image_enlarger", function (e) {
                    return t.resize()
                })
            }, e.prototype.unbind = function () {
                return $(document).unbind(".image_enlarger"), $(window).unbind(".image_enlarger")
            }, e.prototype.install = function () {
                var e, t = this;
                return this.insert(), a(this.el), this.resize(), this.bind(), this.activateShade(), $(this.el).css("visibility", "hidden"), e = r(this.el), f($(this.active.imgInPage), {
                        $to: e,
                        easing: "ease-out"
                    }, function (e) {
                        return e.css("z-index", -1), e.remove(), $(t.el).css("visibility", "visible")
                    })
            }, e.prototype.uninstall = function (e) {
                var t, n, i = this;
                return e == null && (e = {}), this.unbind(), t = r(this.el), n = $.extend({}, {
                        $from: t,
                        $to: $(this.active.imgInPage)
                    }, e), f($(this.active.imgInPage), n, function (e) {
                        return e.css("z-index", -1), e.remove()
                    }), this.remove(), this.deactivateShade()
            }, e.prototype.activate = function (e) {
                return this.active = _(this.images).detect(function (t) {
                    return t.id === e
                })
            }, e.prototype.next = function () {
                if (this.images.length > 1) return this.activate((this.images[this.images.indexOf(this.active) + 1] || this.images[0]).id), this.redraw(), this.nav.scrollActivatedThumbnailIntoView()
            }, e.prototype.previous = function () {
                if (this.images.length > 1) return this.activate((this.images[this.images.indexOf(this.active) - 1] || this.images[this.images.length - 1]).id), this.redraw(), this.nav.scrollActivatedThumbnailIntoView()
            }, e.prototype.render = function () {
                return JST["templates/image_enlarger"]({
                        images: this.images,
                        active: this.active
                    })
            }, e.prototype.insert = function () {
                return $("html").append(this.render()), this.el = $("#image_enlarger")[0], this.nav = new t($(this.el).find("nav:first")[0]), this.nav.center($(this.el).find("nav img.activated")), this.loadActiveImage()
            }, e.prototype.resize = function () {
                return u(this.el), this.nav.resize()
            }, e.prototype.redraw = function () {
                return $(this.el).find("figure:visible").hide(), $(this.el).find("#enlarged_image_" + this.active.id).show(), $(this.el).find("nav img.activated").removeClass("activated"), $(this.el).find("nav img[data-image-id=" + this.active.id + "]").addClass("activated"), this.loadActiveImage()
            }, e.prototype.remove = function () {
                return $(this.el).remove()
            }, e.prototype.activateShade = function () {
                return $("html").addClass("shaded")
            }, e.prototype.deactivateShade = function () {
                return $("html").removeClass("shaded")
            }, e.prototype.loadActiveImage = function () {
                var e, t, n = this;
                if (this.loadingImage) return;
                return e = r(this.el), t = e.data("large-src") || e.data("original-src"), this.loadingImage = new Image, this.loadingImage.onload = function () {
                    return e.attr("src", t), n.loadingImage = null
                }, this.loadingImage.onerror = function () {
                    return n.loadingImage = null
                }, this.loadingImage.src = t
            }, e
        }(), t = function () {
            function e(e) {
                this.el = $(e), this.updateScrollButtons(), this.resize()
            }
            return e.prototype.getView = function () {
                return $(this.el).find("[data-behavior~=scroll_view]:first")
            }, e.prototype.getContent = function () {
                return $(this.el).find("[data-behavior~=scroll_content]:first")
            }, e.prototype.activateScrollButton = function (e) {
                return $(this.el).find("[data-behavior~=scroll_" + e + "]").addClass("active")
            }, e.prototype.deactivateScrollButton = function (e) {
                return $(this.el).find("[data-behavior~=scroll_" + e + "]").removeClass("active")
            }, e.prototype.enableScrollButton = function (e) {
                return $(this.el).find("[data-behavior~=scroll_" + e + "]").attr("disabled", !1)
            }, e.prototype.disableScrollButton = function (e) {
                return $(this.el).find("[data-behavior~=scroll_" + e + "]").attr("disabled", !0)
            }, e.prototype.scrollForward = function () {
                return this.activateScrollButton("forward"), this.scroll(this.distanceToEnd())
            }, e.prototype.scrollReverse = function () {
                return this.activateScrollButton("reverse"), this.scroll(this.distanceToStart())
            }, e.prototype.scrollActivatedThumbnailIntoView = function () {
                var e, t, n, r, s, o, u, a;
                t = this.getView(), e = $(this.el).find("img.activated"), a = i(t), s = i(e), o = a.left, u = a.left + a.width, n = s.left - s.width, r = s.left + s.width + s.width, n < o && this.scroll(n - o);
                if (r > u) return this.scroll(r - u)
            }, e.prototype.center = function (e) {
                var t, n;
                if (this.scrolling()) return n = this.centerPositionFor(e), n = Math.max(this.maxScrollPosition(), n), n = Math.min(this.minScrollPosition(), n), t = this.getContent(), t.css({
                        left: n
                    }), this.updateScrollButtons()
            }, e.prototype.centerPositionFor = function (e) {
                var t, n;
                return t = this.getView(), n = e.position().left + e.width() / 2, -n + t.width() / 2
            }, e.prototype.maxScrollPosition = function () {
                var e, t;
                return t = this.getView(), e = this.getContent(), t.width() - e.width()
            }, e.prototype.minScrollPosition = function () {
                return 0
            }, e.prototype.scroll = function (e) {
                var t, n, r, i, s, o = this;
                return t = this.getContent(), r = parseInt(t.css("left")), n = this.adjustedDistance(e), i = e > 0 ? -1 : 1, s = r + n * i, s = Math.max(this.maxScrollPosition(), s), s = Math.min(this.minScrollPosition(), s), t.animate({
                        left: s
                    }, function () {
                        return o.updateScrollButtons()
                    })
            }, e.prototype.updateScrollButtons = function () {
                return this.deactivateScrollButton("reverse"), this.deactivateScrollButton("forward"), this.distanceToEnd() === 0 ? this.disableScrollButton("forward") : this.enableScrollButton("forward"), this.distanceToStart() === 0 ? this.disableScrollButton("reverse") : this.enableScrollButton("reverse")
            }, e.prototype.resize = function () {
                var e;
                return e = this.getView(), this.scrolling() ? e.addClass("scrolling") : e.removeClass("scrolling")
            }, e.prototype.scrolling = function () {
                var e, t;
                return t = this.getView(), e = this.getContent(), t.width() < e.width()
            }, e.prototype.distanceToEnd = function () {
                var e, t, n, r, i, s;
                return t = this.getView(), e = this.getContent(), s = t.width(), r = e.width(), n = parseInt(e.css("left")), i = r + n - s, Math.max(i, 0)
            }, e.prototype.distanceToStart = function () {
                var e;
                return e = this.getContent(), parseInt(e.css("left"))
            }, e.prototype.adjustedDistance = function (e) {
                return Math.min(this.maxScrollDistance(), Math.abs(e))
            }, e.prototype.maxScrollDistance = function () {
                var e;
                return e = this.getView(), Math.floor(e.width() * .5)
            }, e
        }(), r = function (e) {
            return $(e).find("figure:visible img.enlarged")
        }, u = function (e) {
            var t, n;
            return t = $(e).find("figure:visible"), n = {
                height: t.height(),
                width: t.width()
            }, $(e).find("figure img.enlarged").each(function () {
                var e;
                return e = $(this), e.css(o(e, n))
            })
        }, a = function (e) {
            var t, n;
            return t = $(e).find("nav img"), n = {
                height: t.css("max-height"),
                width: t.css("max-width")
            }, t.each(function () {
                var e;
                return e = $(this), e.css(o(e, n))
            })
        }, s = function (e) {
            return {
                imgInPage: e.get(0),
                thumbnail: e.attr("src"),
                original: e.data("original-src"),
                large: e.data("large-src"),
                filename: e.data("filename"),
                id: e.data("image-id"),
                width: e.attr("width") || e.data("width"),
                height: e.attr("height") || e.data("height")
            }
        }, o = function (e, t) {
            var n, r, i, s, o, u, a, f;
            s = parseInt(e.attr("width") || e.data("width")), r = parseInt(e.attr("height") || e.data("height")), a = parseInt(t.width), o = parseInt(t.height), i = s / r, u = a / o, f = s, n = r;
            if (f > a || n > o) i > u ? (f = a, n = parseInt(f / i)) : (n = o, f = parseInt(n * i));
            return {
                width: f,
                height: n
            }
        }, f = function (e, t, r) {
            var s, o, u;
            t == null && (t = {}), u = i(t.$from || e), o = i(t.$to || window), s = n(e), s.css(u);
            if (t.withAnimation === !1) {
                typeof r == "function" && r(s);
                return
            }
            return $("html").append(s), "onwebkittransitionend" in window ? (setTimeout(function () {
                        return s.css({
                                "-webkit-transition-property": "left right width height",
                                "-webkit-transition-animation": "ease-out",
                                "-webkit-transition-duration": "200ms"
                            }), s.css(o)
                    }), s.bind("webkitTransitionEnd", function (e) {
                        return s.unbind("webkitTransitionEnd"), typeof r == "function" ? r(s) : void 0
                    })) : s.animate(o, 200, "easeOutQuad", function () {
                    return typeof r == "function" ? r(s) : void 0
                })
        }, n = function (e) {
            return e.clone().attr("data-behavior", "").css({
                    "-webkit-transform": "translate3D(0,0,0)",
                    position: "fixed",
                    zIndex: 2e3
                })
        }, i = function (e) {
            var t, n, r, i, s, o, u, a, f, l, c;
            return i = e.offset(), t = parseInt((a = e.css("border-left-width")) != null ? a : 0), s = parseInt((f = e.css("border-top-width")) != null ? f : 0), n = parseInt((l = e.css("padding-left")) != null ? l : 0), o = parseInt((c = e.css("padding-top")) != null ? c : 0), r = $(window).scrollLeft(), u = $(window).scrollTop(), {
                left: i.left + t + n - r,
                top: i.top + s + o - u,
                width: e.width(),
                height: e.height()
            }
        }
    }.call(this),
    function () {
        var e, t;
        $.fn.scaleImages = function () {
            return this.find("figure.proportional img[data-width][data-height]:not([data-scaled]):visible").each(function () {
                var n, r, i, s, o, u, a;
                return n = $(this), a = e(n), u = a[0], r = a[1], i = a[2], u > r ? (o = Math.min(i, u), s = parseInt(o * r / u)) : (s = Math.min(i, r), o = parseInt(s * u / r)), t(n, o, s)
            }), this.find("figure.full_width img[data-width][data-height]:not([data-scaled]):visible").each(function () {
                var n, r, i, s, o, u, a;
                return n = $(this), a = e(n), u = a[0], r = a[1], i = a[2], o = Math.min(i, u), s = parseInt(o * r / u), t(n, o, s)
            }), this.find("div.image_grid_view:not([data-scaled])").each(function () {
                var e, t;
                return e = $(this), t = e.find("td:first").width(), e.find("tr").each(function () {
                    var e, n;
                    return e = $(this), n = [], e.find("figure img[data-scaled]").each(function () {
                        return n.push($(this).height())
                    }), e.find("figure div.background").css({
                            height: _(n).max(),
                            width: t
                        })
                }), e.attr("data-scaled", !0)
            }), this
        }, bcx.on("page:update", "scale images", function () {
            return $(document).scaleImages()
        }), e = function (e) {
            return [parseInt(e.data("width")), parseInt(e.data("height")), e.closest("figure").width()]
        }, t = function (e, t, n) {
            var r, i;
            if (r = parseInt(e.data("max-size"))) i = Math.max(1, t / r, n / r), t = Math.round(t / i), n = Math.round(n / i);
            return e.css({
                    width: t,
                    height: n
                }), e.attr("data-scaled", !0)
        }
    }.call(this),
    function () {
        _.mixin({
                inGroups: function (e, t) {
                    var n, r, i, s, o = this;
                    return n = parseInt(e.length / t), i = e.length % t, r = [], s = 0, _(t).times(function (t) {
                        var o, u;
                        return o = n + ((u = i > 0 && i > t) != null ? u : {
                                1: 0
                            }), r.push(e.slice(s, s + o)), s += o
                    }), r
                }
            })
    }.call(this),
    function () {
        bcx.on("page:change", "install infinite pagination behavior", function () {
            var e, t;
            return e = function (e, n) {
                var r;
                return n == null && (n = {}), e.infinitePage(n), t(e), r = e.closest("div.sheet"), r.addBehavior("prevent_reload_when_stacked")
            }, t = function (e) {
                return e.bind("infinite_page:load", function () {
                    return $(this).find("[data-behavior~=remove_duplicates][data-unique-id]").each(function () {
                        var e, t;
                        if ((e = $("[data-unique-id='" + $(this).data("unique-id") + "']")).length > 1) return t = e.first(), e.each(function () {
                            if ($(this)[0] !== t[0]) return $(this).remove()
                        })
                    })
                })
            }, $("[data-behavior~=infinite_page]").install("behavior for infinite scrolling and pagination", function (t) {
                return e(t)
            }), $("[data-behavior~=immediate_page]").install("loading the full page", function (t) {
                return e(t, {
                        immediate: !0
                    })
            })
        })
    }.call(this),
    function () {
        $("[data-behavior~=input_change_emitter]").live("focus", function (e) {
            var t, n, r, i, s, o;
            return t = $(this), n = o = t.val(), i = function () {
                n = t.val();
                if (n !== o) return t.trigger("input:change", {
                        currentValue: n,
                        previousValue: o
                    }), o = n
            }, s = setInterval(i, 50), r = function () {
                return clearInterval(s), t.unbind("blur", r)
            }, t.bind("blur", r)
        })
    }.call(this),
    function () {
        window.Beanstalk = {
            enablePageviewTracking: !0,
            enablePresenceTracking: !1,
            presenceGranularity: 60,
            dev: location.host.match(/.*?\.dev/),
            uuid: null,
            site_id: null,
            beaconURL: function () {
                var e, t;
                return e = Beanstalk.dev ? "dash.dev" : "dash.37signals.com", t = "" + window.location.protocol + "//" + e + "/beacon.gif?"
            }
        }, Beanstalk.enablePageviewTracking = !Beanstalk.dev
    }.call(this),
    function () {
        var e = [].slice;
        Beanstalk.beacon = {
            params: [],
            enabled: !0,
            log: function (e) {
                var t, n, r;
                r = [];
                for (t in e) n = e[t], r.push(Beanstalk.beacon.params.push([t, n]));
                return r
            },
            send: function () {
                var t, n, r, i, s;
                if (!Beanstalk.beacon.enabled) return;
                r = [], s = Beanstalk.beacon.params;
                for (n in s) i = s[n], typeof i != "function" && r.push("" + encodeURIComponent(i[0]) + "=" + encodeURIComponent(i[1]));
                return r.length && (Beanstalk.uuid && r.unshift("uuid=" + Beanstalk.uuid), Beanstalk.site_id && r.unshift("site_id=" + Beanstalk.site_id), r.unshift("tz=" + (new Date).getTimezoneOffset() / 60), t = new Image, t.src = [Beanstalk.beaconURL()].concat(e.call(r)).join("&"), t.onerror = function () {
                    if (Beanstalk.dev) return Beanstalk.beacon.enabled = !1, console.warn("disabling instrumentation beacon")
                }), Beanstalk.beacon.params = []
            }
        }
    }.call(this),
    function () {
        Beanstalk.logCohort = function (e, t) {
            return Beanstalk.beacon.log({
                    "cohort[][experiment]": e,
                    "cohort[][group]": t
                }), Beanstalk.beacon.send()
        }
    }.call(this),
    function () {
        Beanstalk.logEvent = function (e, t) {
            return Beanstalk.beacon.log({
                    "event[][name]": e,
                    "event[][value]": t
                }), Beanstalk.beacon.send()
        }
    }.call(this),
    function () {
        Beanstalk.logPageview = function () {
            if (Beanstalk.enablePageviewTracking) {
                Beanstalk.beacon.log({
                        "pageview[host]": document.location.host,
                        "pageview[path]": document.location.pathname,
                        "pageview[query]": document.location.search,
                        "pageview[title]": document.title,
                        "pageview[referrer]": document.referrer
                    });
                if (Object.keys(Beanstalk.Timing.times).length === 0) return setTimeout(Beanstalk.beacon.send, 500)
            }
        }, document.addEventListener && document.addEventListener("DOMContentLoaded", function () {
            return Beanstalk.logPageview()
        }, !1)
    }.call(this),
    function () {
        Beanstalk.enablePresenceTracking && setInterval(function () {
            return Beanstalk.beacon.log({
                    presence: !0
                }), Beanstalk.beacon.send()
        }, Beanstalk.presenceGranularity * 1e3)
    }.call(this),
    function () {
        Beanstalk.logSignup = function (e, t) {
            return Beanstalk.beacon.log({
                    "signup[product]": e,
                    "signup[account_id]": t
                }), Beanstalk.beacon.send()
        }
    }.call(this),
    function () {
        var e;
        typeof e == "undefined" && (e = {
                times: {}
            }), Beanstalk.Timing = {
            times: e.times,
            mark: function (e, t) {
                return t || (t = (new Date).getTime()), Beanstalk.Timing.times[e] = t
            },
            init: function (e) {
                return e !== void 0 && (Beanstalk.Timing.times = e), Beanstalk.Timing.findStartTime(), Beanstalk.Timing.addEventListener("beforeunload", Beanstalk.Timing.beforeUnload, !1), Beanstalk.Timing.addEventListener("load", Beanstalk.Timing.onload, !1)
            },
            addEventListener: function (e, t, n) {
                try {
                    if ("undefined" != typeof window.attachEvent) return window.attachEvent("on" + e, t);
                    if (window.addEventListener) return window.addEventListener(e, t, n)
                } catch (r) {}
            },
            onload: function () {
                return Beanstalk.Timing.mark("onload"), Beanstalk.Timing.done()
            },
            findStartTime: function () {
                var e;
                e = Beanstalk.Timing.findStartWebTiming() || Beanstalk.Timing.findStartGToolbar();
                if (e) return Beanstalk.Timing.mark("starttime", e)
            },
            findStartWebTiming: function () {
                var e, t;
                return t = void 0, e = window.performance || window.mozPerformance || window.msPerformance || window.webkitPerformance, "undefined" != typeof e && "undefined" != typeof e.timing && "undefined" != typeof e.timing.navigationStart && (t = e.timing.navigationStart), t
            },
            findStartGToolbar: function () {
                var e;
                return e = void 0, "undefined" != typeof window.external && "undefined" != typeof window.external.pageT ? e = (new Date).getTime() - window.external.pageT : "undefined" != typeof window.gtbExternal && "undefined" != typeof window.gtbExternal.pageT ? e = (new Date).getTime() - window.gtbExternal.pageT() : "undefined" != typeof window.chrome && "undefined" != typeof window.chrome.csi && (e = (new Date).getTime() - window.chrome.csi().pageT), e && Beanstalk.Timing.dprint("Beanstalk.Timing.findStartGToolbar: startTime = " + e), e
            },
            done: function () {
                var e, t, n, r;
                Beanstalk.Timing.mark("done"), t = [], r = Beanstalk.Timing.times;
                for (e in r) n = r[e], t.push("" + e + ":" + n);
                return t = t.join(","), Beanstalk.beacon.log({
                        timing: t
                    }), Beanstalk.Timing.times = {}, setTimeout(Beanstalk.beacon.send, 100)
            }
        }
    }.call(this),
    function () {
        $(function () {
            return Beanstalk.uuid = "bcx/" + bcx.currentPerson.get("id") + ",id/" + bcx.currentIdentityId + ",qb/" + bcx.currentAccountSlug, Beanstalk.site_id = 2
        }), $(document).bind("page:change", function () {
            return Beanstalk.logPageview()
        }), setInterval(Beanstalk.beacon.send, 5e3), $(function () {
            return $(document).ajaxSend(function (e, t, n) {
                if (!(n.url.match(/page_updates/) || n.url.match(/projects\.js/) || n.url.match(/progress\.js/))) return Beanstalk.Timing.mark("ajaxSend")
            }), $(document).ajaxSuccess(function (e, t, n) {
                if (!(n.url.match(/page_updates/) || n.url.match(/projects\.js/) || n.url.match(/progress\.js/))) return Beanstalk.Timing.mark("ajaxSuccess"), $("[data-x-runtime]").attr("data-x-runtime", +t.getResponseHeader("X-Runtime"))
            }), $(document).bind("page:beforechange", function () {
                return Beanstalk.Timing.mark("page:beforechange")
            }), $(document).bind("page:change", function (e) {
                return Beanstalk.Timing.mark("page:change"), Beanstalk.Timing.done()
            })
        })
    }.call(this),
    function () {
        var e;
        e = 75, bcx.on("page:update", "install link truncation behavior", function () {
            return $("a[data-behavior~=truncate]").install("behavior for truncating long links", function (t) {
                return t.each(function () {
                    var t;
                    t = $(this);
                    if (t.text().length > e) {
                        t.html("" + t.html().substring(0, e) + "");
                        if (!t.attr("title")) return t.attr("title", t.attr("href"))
                    }
                })
            })
        })
    }.call(this),
    function () {
        $("[data-behavior~=nubbin]").live("hovercontent:show", function () {
            return $(this).css({
                    display: "inline-block",
                    left: $(this).outerWidth() * -1
                })
        })
    }.call(this),
    function () {
        var e, t;
        t = null, e = [], bcx.on("page:beforechange page:change", "apply body classes from active panel", function () {
            var n, r, i, s;
            return n = $("body"), i = window.location.pathname, t !== i && (_.each(e, function (e) {
                        return n.removeClass(e)
                    }), e = []), t = i, r = ((s = $("div.panel:not(.inactive)").attr("data-body-class")) != null ? s : "").split(/\s/), _.each(r, function (t) {
                    if (!n.hasClass(t)) return n.addClass(t), e.push(t)
                })
        })
    }.call(this),
    function () {
        var e, t, n, r, i;
        this.bcx.poller = {
            bucket: null,
            updatedAt: null,
            idleCount: 0,
            active: window.location.host.split(".")[0] !== "public"
        }, t = function (e) {
            return 1e3 * Math.min(30, 3 + 4 * Math.log(e + 1))
        }, r = function () {
            return bcx.poller.idleCount = 0, e(0)
        }, e = function (e) {
            return e == null && (e = 1), bcx.poller.idleCount += e, i(bcx.poller.period = t(bcx.poller.idleCount))
        }, i = function (e) {
            if (navigator.userAgent.match(/iPhone.*Mobile.*Safari/)) return;
            return setTimeout(n, e)
        }, n = function () {
            var t, n;
            return (n = /(\/(?:projects|calendars)\/[^/]+)/.exec(window.location.pathname)) && bcx.poller.active ? (t = n[1], bcx.poller.bucket !== t && (bcx.poller.bucket = t, bcx.poller.updatedAt = null, bcx.poller.idleCount = 0), $.ajax("" + t + "/page_updates?since=" + bcx.poller.updatedAt, {
                        complete: function (e) {
                            var t;
                            if (t = e.getResponseHeader("X-Page-Updated-At")) return bcx.poller.updatedAt = t
                        },
                        success: function (t) {
                            return t.length === 0 ? e(1) : r()
                        },
                        error: function () {
                            return e(10)
                        }
                    })) : (bcx.poller.updatedAt = null, bcx.poller.bucket = null, r())
        }, r()
    }.call(this),
    function () {
        $("div.sheet.inactive > header").live("click", function (e) {
            var t, n, r, i;
            n = $(e.target);
            if (n.closest("h1 a, div.sheet:not(.inactive)").length) return;
            return t = $(this).find("h1 a"), i = t.attr("href"), r = t.data("bare-workspace") === !0, Stacker.workspace.visit(i, {
                    restorePosition: !0,
                    bareWorkspace: r
                }), !1
        }), $("[data-behavior~=reload_current_sheet]").live("click", function (e) {
            return Stacker.workspace.visit(Stacker.normalizePath(window.location), {
                    replaceSheet: !0
                }), !1
        }), $(function () {
            var e, t;
            return e = $("<style type=text/css>"), $("head").append(e), t = function () {
                var t;
                return t = $(window).height(), e.text("div.panel { min-height: " + t + "px };")
            }, $(window).resize(t), t()
        })
    }.call(this),
    function () {
        var e;
        e = function (e) {
            return e.match(/page_updates/) || e.match(/projects\.js/) || e.match(/stars$/)
        }, $(document).ajaxComplete(function (t, n, r) {
            if (!e(r.url)) return $("#runtime a").attr("href", "https://dash.37signals.com/health/logs/search/BCX?qb_id=" + bcx.currentAccountSlug + "&request_id=" + n.getResponseHeader("X-Request-Id")), $("#runtime a").text("Rendered in " + n.getResponseHeader("X-Runtime") + " seconds"), $("#runtime a").attr("data-x-runtime", n.getResponseHeader("X-Runtime")), $("#runtime").show()
        }), $(document).ajaxSend(function (t, n, r) {
            if (!e(r.url)) return $("#runtime").hide()
        })
    }.call(this),
    function () {
        var e, t, n, r, i, s, o = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        $("[data-behavior~=perma_tools] [data-behavior~=tool_action]").live("click", function (e) {
            var t;
            return t = $(this).closest(".tool"), t.addClass("busy")
        }), $("[data-behavior~=perma_tools] [data-behavior~=confirm_action]").live("click", function (e) {
            var t;
            return e.preventDefault(), $("[data-behavior~=perma_tools] [data-behavior~=tool_cancel]").click(), t = $(this).closest(".tool").addClass("expanded"), t.find("[data-behavior~=confirm_action]").hide(), t.find("[data-role~=confirm_view]").show(), t.find("select").first().focus()
        }), $("[data-behavior~=perma_tools] [data-behavior~=tool_cancel]").live("click", function (e) {
            var t, n;
            return e.preventDefault(), n = $(this).closest(".tool"), n.removeClass("expanded"), (t = n.find("form")).length ? t.resetForm() : n.trigger("reset")
        }), $("[data-behavior~=perma_tools] [data-role~=tool]").live("reset", function (e) {
            return $(this).find("[data-role~=confirm_view], [data-role~=error_view]").hide(), $(this).find("[data-behavior~=confirm_action]").show(), $(this).find("[data-behavior~=bucket_operation_destination_bucket]").attr("disabled", !0), $(this).find(":input[type=submit]").attr("disabled", !0)
        }), $("[data-behavior~=perma_tools] [data-behavior~=bucket_operation_action]").live("click", function (e) {
            var t, n, i, o;
            n = $(this).closest("[data-role~=bucket_operation_tool]"), t = n.find("[data-behavior~=bucket_operation_form]"), i = t.find("[data-behavior~=bucket_operation_destination_bucket]"), o = t.data("bucket-operation-type"), i.attr("disabled") && (r(i, o), bcx.currentPerson.canCreateProjects() && bcx.currentAccount.fetch(), t.show());
            if (o === "Copy") return s(n)
        }), s = function (e) {
            var t, n, r;
            return n = $("article.comment[data-creator-id]").length + $("[data-comments-counter]").length > 0, e.find("[data-behavior~=keep_comments_label]").toggle(n), t = $("[data-behavior~=todo_assignee_present]").length > 0, e.find("[data-behavior~=preserve_todo_assignments_label]").toggle(t), r = $("[data-behavior~=todo_due_date_present]").length > 0, e.find("[data-behavior~=preserve_due_dates_label]").toggle(r)
        }, $("[data-role~=bucket_operation_tool] select").live("change", function (e) {
            var t, n, r;
            r = $(this).closest("[data-role~=bucket_operation_tool]"), n = r.find("[data-behavior~=bucket_operation_form]"), n.find(":input[type=submit]").attr("disabled", !1);
            if ($(e.target).val() === "create_project_option") {
                t = r.find("[data-behavior~=bucket_operation_for_new_project_form]"), n.hide(), t.show().find("input[type=text]").focus().select(), t.find("[data-behavior~=bucket_operation_new_project_name]").keyup();
                if (!bcx.currentAccount.canCreateProjects()) return t.find("input").attr("disabled", !0).blur(), t.find("div.cant_create").show()
            }
        }), $("[data-behavior~=bucket_operation_new_project_name]").live("keyup", function (e) {
            var t;
            return t = $(this).closest("form").find(":input[type=submit]"), $.trim($(this).val()) ? t.attr("disabled", !1) : t.attr("disabled", !0)
        }), $("[data-behavior~=bucket_operation_for_new_project_form] [data-behavior~=tool_cancel]").live("click", function (e) {
            return $(this).closest("form").hide().find("input[type=text]").val("Name the project"), $(this).closest("[data-role~=bucket_operation_tool]").find("[data-behavior~=bucket_operation_form]").show()
        }), n = function (e) {
            switch (e) {
            case "Copy":
                return [CopyProcessor, bcx.CopyOperation];
            case "Move":
                return [MoveProcessor, bcx.MoveOperation]
            }
        }, i = function (e, t) {
            var n, r, i, s, o;
            s = ["keep_comments", "preserve_todo_assignments", "preserve_due_dates"], o = [];
            for (r = 0, i = s.length; r < i; r++) n = s[r], e.find("[data-behavior~=copy_operation_" + n + "]").is(":checked") ? o.push(t.set(n, !0)) : o.push(void 0);
            return o
        }, $("[data-behavior~=bucket_operation_form]").live("submit", function (r) {
            var s, o, u, a, f, l, c, h, p = this;
            return r.preventDefault(), c = $(this).find("[data-behavior~=bucket_operation_destination_bucket]").val().split(":"), a = c[0], u = c[1], h = n($(this).data("bucket-operation-type")), o = h[0], s = h[1], f = new s({
                    source_resource_type: $(this).find("[data-behavior~=bucket_operation_source_resource_type]").val(),
                    source_resource_id: $(this).find("[data-behavior~=bucket_operation_source_resource_id]").val(),
                    destination_bucket_type: a,
                    destination_bucket_id: u
                }), i($(this), f), l = new o(f), l.on("processor:failed", function () {
                    return e(p)
                }), l.on("processor:progress", function () {
                    return t(p)
                }), l.run()
        }), $("[data-behavior~=bucket_operation_for_new_project_form]").live("submit", function (r) {
            var s, o, u, a, f, l = this;
            return r.preventDefault(), f = n($(this).data("bucket-operation-type")), o = f[0], s = f[1], u = new s({
                    source_resource_type: $(this).find("[data-behavior~=bucket_operation_source_resource_type]").val(),
                    source_resource_id: $(this).find("[data-behavior~=bucket_operation_source_resource_id]").val(),
                    new_project_name: $(this).find("[data-behavior~=bucket_operation_new_project_name]").val()
                }), i($(this), u), a = new o(u), a.on("processor:failed", function () {
                    return e(l)
                }), a.on("processor:progress", function () {
                    return t(l)
                }), a.run()
        }), t = function (e) {
            var t;
            return t = $(e).closest(".tool"), t.addClass("still-busy")
        }, e = function (e) {
            var t;
            return t = $(e).closest(".tool"), t.removeClass("busy"), t.removeClass("still-busy"), t.closest("[data-behavior~=perma_tools]").animate({
                    width: "240px"
                }, "fast", function () {
                    return t.find("[data-behavior~=confirm_action]").hide(), t.find("[data-role~=error_view]").show()
                })
        }, r = function (e, t) {
            return $.getJSON("/buckets.json", function (n) {
                var r, i, s, o, u, a, f, l, c, h;
                s = bcx.currentBucket.constructor.modelName, s === "Project" ? (u = n.projects.filter(function (e) {
                            return e.id !== parseInt(bcx.currentBucket.id)
                        }), t === "Copy" && u.unshift({
                            id: bcx.currentBucket.id,
                            name: bcx.currentBucket.get("name")
                        }), i = n.calendars) : (u = n.projects, i = n.calendars.filter(function (e) {
                            return e.id !== parseInt(bcx.currentBucket.id)
                        })), c = bcx.currentPerson.canCreateProjects(), h = u.length > 0, a = i.length > 0 && e.closest("form").find("[data-behavior~=bucket_operation_source_resource_type]").val() === "CalendarEvent", l = c + h + a > 1, f = c + h + a === 0, r = e.closest("form").data("bucket-operation-type");
                if (f) return e.closest("[data-role~=confirm_view]").find("div.change").hide(), e.closest("[data-role~=confirm_view]").find("div.cant_change").show();
                o = "";
                if (l || c) o += "<option disabled selected>" + r + " to&hellip;</option>";
                return c && (o += "<optgroup label='&hellip;a new project'>", o += "<option value='create_project_option'>Start a new project</option>", o += "</optgroup>"), h && (l && c ? o += "<optgroup label='&hellip;an existing project'>" : l ? o += "<optgroup label='&hellip;a project'>" : o += "<option disabled selected>Choose a project&hellip;</option>", _(u).each(function (e) {
                            var t, n;
                            return t = s === "Project" && e.id === parseInt(bcx.currentBucket.id), n = t ? "This project (" + e.name + ")" : e.name, o += "<option value='Project:" + e.id + "'>" + n + "</option>"
                        }), l && (o += "</optgroup>")), a && (l ? o += "<optgroup label='&hellip;a calendar'>" : o += "<option disabled selected>Choose a calendar&hellip;</option>", _(i).each(function (e) {
                            return o += "<option value='Calendar:" + e.id + "'>" + e.name + "</option>"
                        }), l && (o += "</optgroup>")), e.attr("disabled", !1), e.html(o), e.show().focus()
            })
        }, bcx.permaTools = {}, bcx.permaTools.showLinkifAccessible = function (e, t) {
            var n;
            return n = parseInt(t), $.getJSON("/buckets.json", function (t) {
                var r;
                r = e === "Project" ? t.projects : t.calendars;
                if (o.call(_(r).pluck("id"), n) >= 0) return $("[data-behavior~=show_link_if_accessible]").show()
            })
        }, $("[data-role~=just_copied] a[data-behavior~=close_copied_notice]").live("click", function (e) {
            var t;
            return e.preventDefault(), t = $(this).closest("div.copied_notice"), t.closest("div.sheet").removeClass("copied"), t.closest("div.sheet").find("div.sheet_body").animate({
                    opacity: 1
                }, "fast"), t.fadeOut("fast")
        })
    }.call(this),
    function () {
        var e;
        e = function () {
            function e(e) {
                this.projectId = e, this.projectId != null && (this.panel = $("div.panel:first"), this.load())
            }
            return e.prototype.load = function () {
                if (!this.loading()) return this.loaded() ? this.updateSelects() : this.fetch()
            }, e.prototype.loading = function () {
                return this.panel.data("assignee-options-loaded-" + this.projectId) != null && this.options() == null
            }, e.prototype.loaded = function () {
                return this.panel.data("assignee-options-loaded-" + this.projectId) != null && this.options() != null
            }, e.prototype.options = function () {
                return this.panel.data("assignee-options-" + this.projectId)
            }, e.prototype.fetch = function () {
                var e = this;
                return this.panel.attr("data-assignee-options-loaded-" + this.projectId, !0), $.getJSON("/projects/" + this.projectId + "/assignees.json", function (t) {
                    return e.panel.data("assignee-options-" + e.projectId, t), e.updateSelects(t)
                })
            }, e.prototype.updateSelects = function (e) {
                var t = this;
                return e == null && (e = this.options()), $("select[data-behavior~=assignee_options][data-project-id=" + this.projectId + "][data-assignee-options-loaded!=true]").each(function (n, r) {
                    var i, s, o;
                    o = $(r), i = o.data("assignee-code"), s = "p" + bcx.currentPerson.id, o.attr("data-assignee-options-loaded", !0), o.find("option").remove(), o.append("<option value=''>Unassigned</option>"), o.append("<option value='" + s + "'>Me (" + _.escape(bcx.currentPerson.attributes.name) + ")</option>"), o.append("<option value=' '></option>");
                    if ((i != null ? i[0] : void 0) !== "g") return _(e.people).each(function (e) {
                        return e[1] === s ? o.append('<option value="' + e[1] + '" ' + t.selectedAttr(e[1], i) + ">" + _.escape(e[0]) + "</option>") : o.append('<option value="' + e[1] + '" data-assignee-wants-notifications="' + e[2] + '" ' + t.selectedAttr(e[1], i) + ">" + _.escape(e[0]) + "</option>")
                    });
                    o.append(t.optionTags("People", e.people, i));
                    if (e.groups.length > 0) return o.append(t.optionTags("Companies", e.groups, i))
                })
            }, e.prototype.optionTags = function (e, t, n) {
                var r, i = this;
                return r = "<optgroup label='" + e + "'>", _(t).each(function (e) {
                    return r += '<option value="' + e[1] + '" ' + i.selectedAttr(e[1], n) + ">" + _.escape(e[0]) + "</option>"
                }), r += "</optgroup>"
            }, e.prototype.selectedAttr = function (e, t) {
                return e === t ? 'selected="selected"' : ""
            }, e
        }(), $("[data-behavior~=load_assignee_options]").live("mouseenter focus", function () {
            return new e($(this).find("select[data-behavior~=assignee_options]").data("project-id"))
        }), $("a[data-behavior~=load_assignee_options]").live("hover touchstart", function () {
            return new e($(this).parent().parent().find("select[data-behavior~=assignee_options]").data("project-id"))
        }), window.bcx.AssigneeOptionsLoader = e
    }.call(this),
    function () {
        _.mixin({
                rand: function (e) {
                    return e[Math.floor(Math.random() * e.length)]
                }
            })
    }.call(this),
    function () {
        $.fn.createdBy = function (e) {
            return this.trigger("record:create", e), this.trigger("record:change", e)
        }, $.fn.updatedBy = function (e) {
            return this.trigger("record:update", e), this.trigger("record:change", e)
        }, $(document).bind("record:create", function (e) {
            return $(e.target).highlight()
        }), $(document).bind("record:change", function (e) {
            return $(e.target).highlight()
        })
    }.call(this),
    function () {
        var e;
        e = function (e) {
            return $(e).is("body, #workspace, #workspace > div.container")
        }, $("html").bind("mousedown", function (t) {
            if (e(t.target)) return t.preventDefault()
        }), $("html").bind("dblclick", function (t) {
            var n;
            if (e(t.target)) {
                n = parseInt(t.clientY / window.innerHeight * 100);
                if (n < 33) return $.scrollTo(0, 300);
                if (n > 66) return $.scrollTo("max", 300)
            }
        })
    }.call(this),
    function () {
        var e, t;
        $.fn.slider = function (n) {
            return n != null ? this.each(function () {
                var e;
                e = $(this);
                if (e.data("slider")) return t(e, n)
            }) : this.each(function () {
                var t;
                t = $(this);
                if (!t.data("slider")) return e(t)
            })
        }, $("[data-behavior~=slider] [data-behavior~=slide]").live("mousedown", function (e) {
            var n, r, i;
            return i = $(this).closest("[data-slide-index]").data("slide-index"), n = $(this).closest("[data-behavior~=slider]"), r = $(this).data("direction"), r === "forward" ? i++ : i--, t(n, i), !1
        }), e = function (e) {
            var t, n, r, i;
            return n = e.children(":first"), t = e.find("[data-slide-index]"), i = e.width(), r = t.length, n.width("" + 100 * r + "%"), t.width(i).first().addClass("active"), e.data("slider", !0)
        }, t = function (e, t) {
            var n, r, i, s, o, u, a;
            return s = e.children(":first"), i = s.find("[data-slide-index]"), r = i.filter("[data-slide-index].active"), a = r.data("slide-index"), o = t < a ? "backward" : "forward", u = -(t * s.parent().width()), n = i.filter("[data-slide-index=" + t + "]"), e.css({
                    overflow: "hidden"
                }), s.css({
                    height: r.css("height")
                }), o === "backward" && (r.css("margin-left", ""), n.css("margin-left", -u)), n.addClass("active"), s.animate({
                    height: n.css("height"),
                    "margin-left": u
                }, 250, "easeOutExpo", function () {
                    return r.removeClass("active"), r.css("margin-left", ""), n.css("margin-left", -u), e.css({
                            overflow: ""
                        }), s.css({
                            height: ""
                        }), n.trigger("slider:slide")
                }), n.trigger("slider:beforeslide")
        }
    }.call(this),
    function () {
        bcx.on("identity:set", function () {
            var e;
            return (e = function () {
                return CalendarDate.firstDayOfWeek = bcx.currentPerson.get("start_of_week")
            })(), bcx.currentPerson.bind("change:start_of_week", e)
        }), $("[data-behavior~=set_start_of_week]").live("mousedown", function (e) {
            var t, n;
            return t = $(e.currentTarget), n = t.data("day"), e.shiftKey && (n === 0 || n === 1) && n !== bcx.currentPerson.getStartOfWeek() && confirm("Would you like Basecamp to show " + CalendarDate.weekdayNames[n] + " as the first day of the week?") && (bcx.currentPerson.setStartOfWeek(n), $.ajax({
                        url: bcx.currentPerson.url(),
                        type: "PUT",
                        data: {
                            person: {
                                start_of_week: n
                            }
                        }
                    })), !1
        })
    }.call(this),
    function () {
        var e, t, n, r;
        r = null, $("[data-behavior~=edit_taggings]").live("expand", function () {
            var e;
            return e = $(this).closest("[data-behavior~=taggings]"), r != null && r.unregister(), r = new bcx.views.TaggingsView(e.get(0))
        }).live("collapse", function (e) {
            return r != null && r.unregister(), r = null, e.stopPropagation()
        }), $("[data-behavior~=taggings]:not([data-behavior~=pending_taggings])").live("tagging:add", function (e, n, r) {
            return t(), $.ajax({
                    type: "POST",
                    url: $(this).data("url"),
                    data: {
                        "tagging[taggable_type]": $(this).data("taggable-type"),
                        "tagging[taggable_id]": $(this).data("taggable-id"),
                        "tagging[tag_name]": n
                    },
                    complete: function () {
                        return r.refresh()
                    }
                })
        }).live("tagging:remove", function (e, n, r) {
            return $(e.target).addClass("removing"), t(), $.ajax({
                    type: "DELETE",
                    url: n,
                    complete: function () {
                        return r.refresh()
                    }
                })
        }), t = function () {
            var e;
            if (e = Stacker.workspace.findPanel($("div.sheet.attachments.inactive"))) return e.expireCache()
        }, $("div.sheet.attachments.tagged").live("stackerLinkClicked", function (e, t) {
            return t.replaceSheet = !0
        }), $("[data-behavior~=edit_tag] :input[type=radio]").live("click", function (e) {
            var t;
            return t = $(this).val(), $(this).closest("li").find("span.label_color").css("background", "#" + t), $(this).closest("[data-behavior~=expandable]").collapse()
        }), $("[data-behavior~=rename_tag]").live("click", function (e) {
            var t;
            return t = $(this).closest("li"), t.find("[data-behavior~=name_tag]").expand(), t.find("[data-behavior~=edit_tag]").collapse(), e.preventDefault()
        }), $("[data-behavior~=rename_tag_form]").live("ajax:before", function () {
            var e;
            return e = $(this).find("input[type=text]").val(), $.trim(e).length ? ($(this).addClass("busy"), t(), !0) : !1
        }), $("[data-behavior~=name_tag]").live("expand", function (e) {
            return $(this).find(".submit").slideDown(100), $(this).find("input[type=text]").focus().keydown().select()
        }).live("collapse", function () {
            return $(this).find(".submit").hide(), $(this).find("form").resetForm()
        }), $("[data-behavior~=edit_tag] [data-behavior~=confirm_delete]").live("click", function (e) {
            var t;
            return t = $(this).closest("div.wrapper"), t.css("height", 92), t.find("div.actions, div.confirm_delete").css("top", -55), e.preventDefault()
        }), $("[data-behavior~=edit_tag] [data-behavior~=cancel_delete]").live("click", function (e) {
            return $(this).closest("[data-behavior~=edit_tag]").collapse(), e.preventDefault()
        }), $("[data-behavior~=edit_tag]").live("collapse", function () {
            return $(this).trigger("reset")
        }), $("[data-behavior~=edit_tag]").live("reset", function () {
            var e;
            return e = $(this).find("div.wrapper"), e.css("height", 47), e.find("div.actions, div.confirm_delete").css("top", 0)
        }), e = function (e) {
            return $(e).attr("disabled", "disabled"), $(e).val("Add tags")
        }, n = function (e) {
            var t;
            return t = $(e).find("ul.suggestions"), t.children().size() === 1 ? t.hide() : t.show(), $(e).find("ul.ui-menu").hide()
        }
    }.call(this),
    function () {
        var e;
        e = "[data-behavior~=text_input_field]", $(e).live("focus", function (e) {
            var t;
            return t = $(this), t.addClass("focused")
        }), $(e).live("blur", function (e) {
            var t;
            return t = $(this), t.removeClass("focused")
        }), $(e).live("input:change blur", function (e) {
            var t, n;
            return t = $(this), n = $(e.target), n.val().trim() === "" ? t.addClass("blank") : t.removeClass("blank")
        })
    }.call(this),
    function () {
        $("form:not(.submitting) textarea[data-behavior~=submit_on_enter]").live("keypress", function (e) {
            if (e.keyCode === $.ui.keyCode.ENTER) return $(this).closest("form").addClass("submitting").submit(), e.preventDefault()
        }), $("form:not(.submitting) textarea[data-behavior~=submit_on_control_enter]").live("keydown", function (e) {
            if (e.keyCode === $.ui.keyCode.ENTER && (e.ctrlKey || e.metaKey)) return $(this).closest("form").addClass("submitting").submit(), e.preventDefault()
        })
    }.call(this),
    function () {
        bcx.timeConversion = {
            convertTimes: function () {
                var e, t, n, r;
                n = bcx.timeConversion.mappings, r = [];
                for (t in n) e = n[t], r.push($(t).each(function () {
                            var t, n, r;
                            return t = $(this), (r = t.data("date")) || (r = new Date(Date.parse(t.attr("datetime"))), t.data("date", r)), (n = bcx.timeConversion.formats[e](r)) ? t.show().text(n) : t.hide()
                        }));
                return r
            },
            mappings: {
                "time[data-time-ago]": "timeAgo",
                "time[data-days-ago]": "daysAgo",
                "time[data-compact]": "compact",
                "time[data-local-time]": "localTime",
                "time[data-local-date]": "localDate",
                "time[data-local-date-long]": "localDateLong",
                "time[data=weekday]": "weekday",
                "time[data=month]": "month",
                "time[data=short-month]": "shortMonth",
                "time[data=day]": "day",
                "time[data-local-time-with-timezone]": "localTimeWithTimezone"
            },
            formats: {
                localTime: function (e) {
                    return bcx.timeConversion.utcToLocalTime(e)
                },
                localTimeWithTimezone: function (e) {
                    return "" + bcx.timeConversion.utcToLocalTime(e) + " " + bcx.timeConversion.getLocalTimeZone(e)
                },
                localDate: function (e) {
                    return bcx.timeConversion.utcToLocalDate(e)
                },
                localDateLong: function (e) {
                    return bcx.timeConversion.utcToLocalDateLong(e)
                },
                timeAgo: function (e) {
                    var t, n;
                    return (t = bcx.timeConversion.timeElapsed(e)) ? "" + t + " ago" : (n = bcx.timeConversion.relativeDay(e)) ? "" + n + " at " + bcx.timeConversion.formatTime(e) : "on " + bcx.timeConversion.formats.compact(e)
                },
                daysAgo: function (e) {
                    var t;
                    if (t = bcx.timeConversion.relativeDay(e)) return t.charAt(0).toUpperCase() + t.substring(1)
                },
                compact: function (e) {
                    return CalendarDate.today().equals(CalendarDate.parse(e)) ? bcx.timeConversion.formatTime(e) : bcx.timeConversion.formatDate(e)
                },
                weekday: function (e) {
                    return CalendarDate.parse(e).getWeekdayName()
                },
                month: function (e) {
                    return CalendarDate.parse(e).getMonthName()
                },
                shortMonth: function (e) {
                    return CalendarDate.parse(e).getAbbreviatedMonthName()
                },
                day: function (e) {
                    return CalendarDate.parse(e).day
                }
            },
            utcToLocalTime: function (e) {
                return bcx.timeConversion.formatTime(new Date(e))
            },
            utcToLocalDate: function (e) {
                return bcx.timeConversion.formatDate(new Date(e))
            },
            utcToLocalDateLong: function (e) {
                return bcx.timeConversion.formatDateLong(new Date(e))
            },
            getLocalTimeZone: function (e) {
                var t;
                return ((t = e.toString().match(/\((\w+)\)$/)) != null ? t[1] : void 0) || ""
            },
            timeElapsed: function (e) {
                var t, n, r, i;
                return r = (new Date).getTime() - e.getTime(), i = Math.round(r / 1e3), n = Math.round(i / 60), t = Math.round(n / 60), i < 10 ? "a second" : i < 45 ? "" + i + " seconds" : i < 90 ? "a minute" : n < 45 ? "" + n + " minutes" : n < 90 ? "an hour" : t < 24 ? "" + t + " hours" : null
            },
            relativeDay: function (e) {
                var t, n, r;
                return r = CalendarDate.today(), t = CalendarDate.parse(e), n = r.daysSince(t), n > 6 ? null : n === 0 ? "today" : n === 1 ? "yesterday" : t.getWeekdayName()
            },
            formatTime: function (e) {
                var t, n, r, i, s;
                return r = e.getHours(), n = r % 12, n === 0 && (n = 12), s = e.getMinutes(), i = s === 0 ? "" : s < 10 ? ":0" + s : ":" + s, t = r > 11 ? "pm" : "am", "" + n + i + t
            },
            formatDate: function (e) {
                var t, n, r, i;
                return n = CalendarDate.abbreviatedMonthNames[e.getMonth()], t = e.getDate(), i = e.getYear() + 1900, r = "" + n + " " + t, i < CalendarDate.today().year && (r += " " + i.toString().substr(2)), r
            },
            formatDateLong: function (e) {
                var t, n, r, i, s;
                return t = CalendarDate.parse(e), r = t.getMonthName(), i = t.getWeekdayName(), n = e.getDate(), s = e.getYear() + 1900, "" + i + ", " + r + " " + n + ", " + s
            }
        }, $(function () {
            return setInterval(bcx.timeConversion.convertTimes, 6e4)
        }), bcx.on("page:update", "convert time tags", bcx.timeConversion.convertTimes)
    }.call(this),
    function () {
        var e;
        e = function (e) {
            return function (t) {
                return e($data, $text, $entry)
            }
        }, $("[data-behavior~=time_entry]").live("keypress", function (e) {
            if (e.which === $.ui.keyCode.ENTER) return $(e.currentTarget).blur()
        }).live("blur", function (e) {
            var t, n, r, i, s;
            n = $(e.currentTarget), t = n.find("input[type=hidden]"), r = n.find("input[type=text]");
            if (r.val() === r.data("placeholder")) return t.val("");
            try {
                return s = r.val(), s.length ? (i = CalendarTime.parse(s), r.val(i.toFriendlyString()), t.val(i.toString())) : t.val("")
            } catch (o) {
                return r.val(""), t.val(""), r.addClass("shake"), r.onTransitionEnd(function () {
                    return r.removeClass("shake")
                })
            }
        })
    }.call(this),
    function () {
        var e = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        };
        bcx.Toolbar = function () {
            function t(t) {
                this.scroll = e(this.scroll, this);
                var n;
                this.toolbar = t, this.document = this.toolbar.closest("[data-behavior~=wysiwyg_container]"), this.toolbarHeight = this.toolbar.height(), this.followAlways = this.document.hasBehavior("wysiwyg_follow_always"), this.followThreshold = (n = this.document.data("wysiwyg-follow-threshold")) != null ? n : 0
            }
            return t.prototype.toolbarOffset = 5, t.prototype.detached = !1, t.prototype.scroll = function () {
                var e, t, n, r;
                if (!this.toolbar.is(":visible")) return;
                n = this.document.offset().top - this.toolbarOffset, t = this.document.outerHeight(), r = $(window).scrollTop(), e = n + t + this.toolbarOffset - this.toolbarHeight;
                if (e > r && r > n) {
                    if (!this.followAlways && (t <= this.followThreshold || r >= $(document).height() - $(window).height())) return;
                    if (!this.detached) return this.detach()
                } else if (this.detached) return this.attach()
            }, t.prototype.detach = function () {
                var e, t, n;
                return t = $(document).height(), this.toolbar.hide(), e = $(document).height(), this.toolbar.show(), n = t - e, this.document.css({
                        paddingTop: n
                    }), this.toolbar.addBehavior("wysiwyg_follower"), this.detached = !0
            }, t.prototype.attach = function () {
                return this.toolbar.removeBehavior("wysiwyg_follower"), this.document.css({
                        paddingTop: ""
                    }), this.detached = !1
            }, t.toolbars = [], t.install = function () {
                return setTimeout(function () {
                    return $("div[data-behavior~=wysiwyg_toolbar]").install("attaching toolbar", function (e) {
                        var n;
                        return n = new t(e), t.toolbars.push(n), $(window).bind("scroll.documentToolbar", n.scroll)
                    })
                }, 10)
            }, t.uninstall = function () {
                var e, n, r, i;
                i = t.toolbars;
                for (n = 0, r = i.length; n < r; n++) e = i[n], $(window).unbind("scroll.documentToolbar", e.scroll);
                return t.toolbars.clear
            }, t
        }.call(this), bcx.on("page:update", "install the document toolbar positioning behavior", bcx.Toolbar.install), bcx.on("page:change", "uninstall toolbar following", bcx.Toolbar.uninstall)
    }.call(this),
    function () {
        $(window).bind("focus", function (e) {
            if (e.target === window) return window.isFocused = !0
        }), $(window).bind("blur", function (e) {
            if (e.target === window) return window.isFocused = !1
        }), window.isFocused = !0
    }.call(this),
    function () {
        var e, t, n, r = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            };
        wysihtml5.commands.pre = {
            exec: function (e, t) {
                return wysihtml5.commands.formatInline.exec(e, t, "pre")
            },
            state: function (e, t, n) {
                return wysihtml5.commands.formatInline.state(e, t, "pre")
            },
            value: function () {
                return null
            }
        }, e = function () {
            function e(e) {
                this.textarea = e, this.handleUnsupportedBroswers = r(this.handleUnsupportedBroswers, this), this.formatUnformattedContent = r(this.formatUnformattedContent, this), this.containsHtml = r(this.containsHtml, this), this.focusOnExpand = r(this.focusOnExpand, this), this.triggerChangeEvents = r(this.triggerChangeEvents, this), this.addIEClass = r(this.addIEClass, this), this.copyClasses = r(this.copyClasses, this), this.setupAutoResize = r(this.setupAutoResize, this), this.createEditor = r(this.createEditor, this), this.insertToolbar = r(this.insertToolbar, this), this.$textarea = $(e), wysihtml5.browser.supported() && (!$.browser.safari || !$.browser.mobile) ? (this.formatUnformattedContent(), this.editor = this.createEditor(), this.$iframe = $(this.editor.composer.iframe), this.setupAutoResize(), this.copyClasses(), this.addIEClass(), this.focusOnExpand(), this.triggerChangeEvents()) : this.handleUnsupportedBroswers()
            }
            return e.prototype.unsupportedMessage = "This message contains rich formatting, but your web browser only supports editing plain text. Some formatting may be lost.", e.prototype.config = {
                autoLink: !1,
                style: !0,
                bodyClassName: "wysihtml5-supported",
                composerClassName: "wysiwyg_editor",
                stylesheets: ["https://d3dma7a8zw52bz.cloudfront.net/assets/application-417c4f9074157e12c1dfb6ede37ce3e3.css"],
                parserRules: {
                    tags: {
                        strong: {},
                        b: {},
                        em: {},
                        i: {},
                        u: {},
                        br: {},
                        p: {},
                        div: {},
                        span: {},
                        ul: {},
                        ol: {},
                        li: {},
                        a: {
                            check_attributes: {
                                href: "url"
                            }
                        },
                        img: {
                            check_attributes: {
                                src: "url",
                                "class": "alt",
                                alt: "alt"
                            }
                        },
                        pre: {},
                        blockquote: {}
                    }
                },
                indentMatcher: /.*/
            }, e.prototype.insertToolbar = function () {
                var e;
                return e = $(JST["templates/wysiwyg_toolbar"]({})), this.$textarea.before(e), e[0]
            }, e.prototype.createEditor = function () {
                var e, t = this;
                return e = new wysihtml5.Editor(this.textarea, $.extend(this.config, {
                            toolbar: this.insertToolbar()
                        })), e.observe("focus:composer", function () {
                        return t.$textarea.trigger("wysiwyg:focus")
                    }), e.observe("blur:composer", function () {
                        return t.$textarea.trigger("wysiwyg:blur")
                    }), this.$textarea.live("focus", function () {
                        return e.composer.focus()
                    }), e.observe("paste", function (e) {
                        return t.pasted = !0
                    }), e
            }, e.prototype.setupAutoResize = function () {
                var e = this;
                if (!this.$textarea.hasBehavior("autoresize")) return;
                return this.editor.observe("load", function () {
                    return e.$iframe.addBehavior("autoresize"), e.$iframe.data("autoresize-limit", e.$textarea.data("autoresize-limit")), e.$iframe.data("rows", e.$textarea.attr("rows")), e.$iframe.autoResize()
                })
            }, e.prototype.copyClasses = function () {
                var e = this;
                return this.editor.observe("load", function () {
                    var t;
                    e.$iframe.contents().find("html").addClass(e.config.composerClassName);
                    if (t = e.$textarea.data("wysiwyg-class")) return e.$iframe.contents().find("body").addClass(t)
                })
            }, e.prototype.addIEClass = function () {
                var e = this;
                return this.editor.observe("load", function () {
                    if ($.browser.msie) return e.$iframe.contents().find("body").addClass("ie")
                })
            }, e.prototype.triggerChangeEvents = function () {
                var e, t = this;
                return e = this.$iframe.contents().find("body"), _.each(["keyup", "keydown"], function (n) {
                    return e.bind(n, function (e) {
                        return t.$textarea.trigger($.Event(n, {
                                    keyCode: e.keyCode,
                                    ctrlKey: e.ctrlKey,
                                    metaKey: e.metaKey
                                }))
                    })
                }), _.each(["newword:composer", "change"], function (e) {
                    return t.editor.observe(e, function () {
                        return t.$textarea.trigger("change")
                    })
                })
            }, e.prototype.focusOnExpand = function () {
                var e = this;
                return this.$iframe.closest("[data-behavior~=expandable]").bind("expand", function () {
                    if (e.$textarea.attr("autofocus")) return e.$iframe.contents().find("body").focus()
                })
            }, e.prototype.containsHtml = function () {
                return this.$textarea.val() && this.$textarea.val().match(/<\w+>/i)
            }, e.prototype.formatUnformattedContent = function () {
                if (!this.containsHtml()) return this.$textarea.val(this.$textarea.val().replace(/\n/g, "<br>")).trigger("change")
            }, e.prototype.handleUnsupportedBroswers = function () {
                var e = this;
                this.$textarea.removeBehavior("wysiwyg"), this.containsHtml() && (this.$textarea.attr("disabled", !0).css({
                            opacity: .3
                        }), setTimeout(function () {
                            return confirm(e.unsupportedMessage) ? $.post("/content/unformat", {
                                    content: e.$textarea.val()
                                }, function (t) {
                                    return e.$textarea.attr("disabled", !1).css({
                                            opacity: 1
                                        }).val(t).trigger("change").get(0).focus()
                                }) : e.$textarea.closest("form").find("a[data-role~=cancel]").click()
                        }, 100));
                if (this.$textarea.hasBehavior("autoresize")) return this.$textarea.autoResize()
            }, e
        }(), n = "textarea[data-behavior~=wysiwyg]", bcx.on("page:update", "install wysiwyg behavior", function () {
            return t($("" + n + ":visible"))
        }), $("[data-behavior~=expandable]:has(" + n + ")").live("expand", function () {
            return t($(this).find("" + n + ":visible"))
        }), t = function (t) {
            return t.install("behavior for wysiwyg editor", function (t) {
                return t.each(function () {
                    return new e(this)
                })
            })
        }
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.Account = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.url = function () {
                return "/account"
            }, n.prototype.canCreateProjects = function () {
                return this.get("can_create_projects")
            }, n
        }(Backbone.Model)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.collections.Accounts = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.model = bcx.models.Account, n
        }(Backbone.Collection), bcx.accounts = new bcx.collections.Accounts
    }.call(this),
    function () {
        bcx.bootstrap = function (e) {
            var t, n, r, i;
            r = e.personId, n = e.identityId, t = e.hasClassicAccount, bcx.currentIdentityId = n, bcx.currentPerson = bcx.people.get(r), bcx.currentAccount = bcx.currentPerson.getAccount(), bcx.currentPerson.set("has_classic_account", t);
            if (window.localStorage != null) try {
                i = window.localStorage.getItem("currentIdentityId"), i != null && parseInt(i) !== n && window.localStorage.clear(), window.localStorage.setItem("currentIdentityId", n)
            } catch (s) {}
            return this.trigger("identity:set")
        }
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.Bucket = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.getColor = function () {
                var e;
                return (e = this.get("color")) != null ? e : _(bcx.bucketColors).rand()
            }, n.prototype.isUsed = function () {
                return this.get("topics_count") + this.get("attachments_count") > 0
            }, n.prototype.isActive = function () {
                return this.get("status_name") === "active"
            }, n
        }(bcx.Model), bcx.getBucket = function (e, t) {
            var n, r;
            return t == null && (r = e.split(":"), e = r[0], t = r[1]), n = e === "Project" ? bcx.projects : bcx.calendars, n.get(t)
        }
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.BucketAccess = function (e) {
            function r() {
                return r.__super__.constructor.apply(this, arguments)
            }
            var n;
            return t(r, e), r.modelName = "BucketAccess", r.prototype.people = function () {
                var e;
                return e = this.get("accesses"), n(e)
            }, r.prototype.subscribers = function () {
                var e;
                return e = this.get("accesses").filter(function (e) {
                    return e.wants_notifications === !0
                }), n(e)
            }, r.prototype.unsubscribers = function () {
                var e;
                return e = this.get("accesses").filter(function (e) {
                    return e.wants_notifications === !1
                }), n(e)
            }, n = function (e) {
                var t;
                return _(function () {
                    var n, r, i;
                    i = [];
                    for (n = 0, r = e.length; n < r; n++) t = e[n], i.push(bcx.peopleAndGroups.get("person_" + t.person_id));
                    return i
                }()).sortBy(function (e) {
                    return bcx.peopleAndGroups.comparator(e)
                })
            }, r
        }(bcx.Model)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.collections.BucketAccesses = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.model = bcx.models.BucketAccess, n
        }(Backbone.Collection), bcx.bucketAccesses = new bcx.collections.BucketAccesses
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.BucketOperation = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.url = function () {
                return this.isNew() ? this.urlRoot : "" + this.urlRoot + "/" + this.id
            }, n.prototype.completionUrl = function () {
                return "" + this.url() + "/completed"
            }, n.prototype.isStillRunning = function () {
                var e;
                return (e = this.get("status")) === "pending" || e === "processing"
            }, n.prototype.isSuccessful = function () {
                return this.get("status") === "completed"
            }, n
        }(Backbone.Model)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.Calendar = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.modelName = "Calendar", n.prototype.urlRoot = function () {
                return "/" + bcx.currentAccountSlug + "/calendars"
            }, n.prototype.url = function () {
                return this.isNew() ? this.urlRoot() : "" + this.urlRoot() + "/" + this.get("param")
            }, n.prototype.isUsed = function () {
                return n.__super__.isUsed.apply(this, arguments) || this.get("calendar_events_count") > 0
            }, n.prototype.peopleIds = function () {
                var e, t, n, r, i;
                r = this.people(), i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.id);
                return i
            }, n.prototype.peopleNames = function () {
                var e;
                return function () {
                    var t, n, r, i;
                    r = this.people(), i = [];
                    for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.get("name"));
                    return i
                }.call(this).join(", ")
            }, n.prototype.bucketAccess = function () {
                return bcx.bucketAccesses.get("Calendar:" + this.id)
            }, n.prototype.people = function () {
                var e, t;
                return (e = (t = this.bucketAccess()) != null ? t.people() : void 0) != null ? e : []
            }, n.prototype.subscribers = function () {
                var e, t;
                return (e = (t = this.bucketAccess()) != null ? t.subscribers() : void 0) != null ? e : []
            }, n.prototype.unsubscribers = function () {
                var e, t;
                return (e = (t = this.bucketAccess()) != null ? t.unsubscribers() : void 0) != null ? e : []
            }, n.prototype.accesses = function () {
                var e, t;
                return (e = (t = this.bucketAccess()) != null ? t.get("accesses") : void 0) != null ? e : []
            }, n.prototype.calendarEvents = function () {
                var e = this;
                return bcx.calendarEvents.filter(function (t) {
                    return t.isSelectedBucket(e, "Calendar")
                })
            }, n.prototype.isTemplate = function () {
                return !1
            }, n.prototype.isDraft = function () {
                return !1
            }, n
        }(bcx.models.Bucket)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.collections.Calendars = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.model = bcx.models.Calendar, n.prototype.haveNotBeenShared = function () {
                return this.all(function (e) {
                    var t;
                    return t = e.bucketAccess(), t != null && t.get("accesses").length < 2
                })
            }, n.prototype.comparator = function (e) {
                var t;
                return (t = e.get("name")) != null ? t.trim().toLowerCase() : void 0
            }, n
        }(Backbone.Collection), bcx.calendars = new bcx.collections.Calendars
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.CalendarEvent = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.modelName = "CalendarEvent", n.prototype.isAllDay = function () {
                return this.get("all_day")
            }, n.prototype.isTimed = function () {
                return !this.isAllDay()
            }, n.prototype.isSpanned = function () {
                return this.get("all_day") && this.get("ends_at") && this.get("starts_at") !== this.get("ends_at")
            }, n.prototype.doesOccurOn = function (e) {
                var t;
                return this.getStartDate().date <= (t = e.date) && t <= this.getEndDate().date
            }, n.prototype.doesOccurBetween = function (e, t) {
                var n, r;
                return n = this.getStartDate().date, r = this.getEndDate().date, e = e.date, t = t.date, n === e || (n > e ? n <= t : e <= r)
            }, n.prototype.doesOccurOnOrAfter = function (e) {
                var t;
                return t = e.date, this.getStartDate().date >= t || this.getEndDate().date >= t
            }, n.prototype.getStartDate = n.memoize(function () {
                return this.calendarDate("starts_at")
            }), n.prototype.getEndDate = n.memoize(function () {
                var e;
                return (e = this.calendarDate("ends_at")) != null ? e : this.getStartDate()
            }), n.prototype.getSpannedEndDate = n.memoize(function () {
                return this.isSpanned() ? this.calendarDate("ends_at") : this.getStartDate()
            }), n.prototype.getDates = n.memoize(function () {
                var e, t;
                t = [e = this.getStartDate()];
                while (e.isnt(this.getEndDate())) t.push(e = e.next());
                return t
            }), n.prototype.getStartTime = n.memoize(function () {
                if (this.isTimed()) return this.calendarTime("starts_at")
            }), n.prototype.getStartsAt = n.memoize(function () {
                return this.isTimed() ? this.date("starts_at") : this.calendarDate("starts_at").date
            }), n.prototype.getCreatedAt = n.memoize(function () {
                var e;
                return (e = this.date("created_at")) != null ? e : new Date
            }), n.prototype.relativeDateLabelFor = function (e) {
                var t, n;
                return this.isNew() ? "Week 1, " + CalendarDate.weekdayNames[1] : (n = this.get("" + e + "_due_week"), t = this.get("" + e + "_due_wday"), "Week " + (n + 1) + ", " + CalendarDate.weekdayNames[t])
            }, n.prototype.setStartDate = function (e) {
                var t, n, r;
                if (this.isSpanned()) return t = this.getEndDate(), n = t.daysSince(this.getStartDate()), this.set("starts_at", e.toString()), this.set("ends_at", e.next(n).toString());
                if (this.isAllDay()) return r = e.toString(), this.set("starts_at", r), this.set("ends_at", r);
                if (this.isTimed()) return r = (new CalendarDateTime(e, this.getStartTime())).toString(), this.set("starts_at", r), this.set("ends_at", r)
            }, n.prototype.urlRoot = function () {
                return "" + this.getBucketPath() + "/calendar_events"
            }, n.prototype.getBucketPath = function () {
                return this.get("bucket_type") ? "/" + bcx.currentAccountSlug + "/" + this.get("bucket_type").toLowerCase() + "s/" + this.bucket().get("param") : ""
            }, n.prototype.showPath = function () {
                var e;
                if (this.id != null) return e = "" + this.urlRoot() + "/" + this.get("param"), this.isRecurrence() ? "" + e + "/recurrences/" + this.get("recurrence_number") : e
            }, n.prototype.isSelectedBucket = function (e, t) {
                return this.get("bucket_type") === t && this.get("bucket_id") === e.id
            }, n.prototype.summary = function () {
                return this.get("summary")
            }, n.prototype.bucket = n.memoize(function () {
                var e;
                return e = this.get("bucket_type") === "Calendar" ? bcx.calendars : bcx.projects, e.get(this.get("bucket_id"))
            }), n.prototype.subscriberIds = function () {
                var e, t, n, r, i, s;
                i = (r = this.get("subscribers")) != null ? r : [], s = [];
                for (t = 0, n = i.length; t < n; t++) e = i[t], s.push("person_" + e);
                return s
            }, n.prototype.subscribers = function () {
                var e;
                return bcx.peopleAndGroups.length ? _(function () {
                    var t, n, r, i;
                    r = this.subscriberIds(), i = [];
                    for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(bcx.peopleAndGroups.get(e));
                    return i
                }.call(this)).compact() : []
            }, n.prototype.participantsList = function () {
                return _(this.subscribers()).map(function (e) {
                    return e.get("name")
                }).sort().join(", ").replace(/,\s([^,]+)$/, " and $1")
            }, n.prototype.formattedTime = function () {
                return bcx.timeConversion.formatTime(new Date(this.date("starts_at")))
            }, n.prototype.getColor = function () {
                var e, t;
                return (e = (t = this.bucket()) != null ? t.getColor() : void 0) != null ? e : bcx.bucketColors[0]
            }, n.prototype.getBucketType = function () {
                return this.get("bucket_type")
            }, n.prototype.getBucketName = function () {
                var e;
                return (e = this.bucket()) != null ? e.get("name") : void 0
            }, n.prototype.compareTo = function (e) {
                var t, n, r, i;
                return i = this.getStartsAt(), n = e.getStartsAt(), i < n ? -1 : i > n ? 1 : (r = this.getCreatedAt(), t = e.getCreatedAt(), r < t ? -1 : r > t ? 1 : 0)
            }, n.prototype.isRecurring = function () {
                return this.has("freq")
            }, n.prototype.isRecurringInfinitely = function () {
                return this.isRecurring() && !this.has("count") && !this.has("until_date")
            }, n.prototype.isRecurrence = function () {
                return this.has("master_id")
            }, n.prototype.isRepeating = function () {
                return this.isRecurrence() || this.isRecurring()
            }, n.prototype.isLastRecurrence = function () {
                if (this.isRecurrence() && !this.master().isRecurringInfinitely()) return this.master().has("count") ? this.master().get("count") === this.get("recurrence_number") + 1 : this.fromStartDate ? this.master().getUntilDate().is(this.fromStartDate) : this.master().getUntilDate().is(this.getStartDate())
            }, n.prototype.needsRecurrencePrompt = function () {
                return this.isRepeating() && this.fromStartDate
            }, n.prototype.recurrences = function () {
                var e = this;
                return this.collection.select(function (t) {
                    return t.get("master_id") === e.get("id")
                })
            }, n.prototype.master = n.memoize(function () {
                return this.collection.get(this.get("master_id"))
            }), n.prototype.getUntilDate = n.memoize(function () {
                if (this.isRecurring() && this.has("until_date")) return this.calendarDate("until_date")
            }), n.prototype.getFreq = function () {
                return this.isRecurrence() ? this.master().get("freq") : this.get("freq")
            }, n.prototype.cloneAsRecurrence = function (e) {
                var t, n, r, i, s, o, u = this;
                n = this.clone(), n.set({
                        id: "" + this.get("id") + "+" + e,
                        master_id: this.get("id"),
                        recurrence_number: e,
                        comments_count: ((s = this.get("comments_count_by_recurrence")) != null ? s[e] : void 0) || 0
                    }), n.setStartDate(function () {
                        switch (u.get("freq")) {
                        case "daily":
                            return u.getStartDate().next(e);
                        case "weekly":
                            return u.getStartDate().next(e * 7);
                        case "monthly":
                            return u.getStartDate().nextMonth(e, u.getStartDate().day);
                        case "yearly":
                            return u.getStartDate().nextMonth(e * 12, u.getStartDate().day)
                        }
                    }()), o = ["comments_count_by_recurrence", "freq", "count", "until_date"];
                for (r = 0, i = o.length; r < i; r++) t = o[r], n.unset(t);
                return n
            }, n.prototype.addRecurrencesInRange = function (e, t) {
                var n, r, i;
                n = 0, i = [];
                for (;;) {
                    n++;
                    if (!_.contains(this.get("excluded_recurrences"), n)) {
                        r = this.cloneAsRecurrence(n);
                        if (r.getStartDate().date > t.date || this.get("count") && this.get("count") <= n || this.getUntilDate() && this.getUntilDate() < r.getStartDate()) break;
                        r.doesOccurBetween(e, t) ? i.push(this.collection.addOrUpdate(r)) : i.push(void 0)
                    } else i.push(void 0)
                }
                return i
            }, n.prototype.addTemplateRecurrences = function (e) {
                var t, n, r, i, s, o, u;
                o = this.get("start_due_week"), s = this.get("start_due_wday"), n = this.get("end_due_week"), t = this.get("end_due_wday"), r = 0, u = [];
                for (;;) {
                    r++;
                    if (!_.contains(this.get("excluded_recurrences"), r)) {
                        switch (this.get("freq")) {
                        case "daily":
                            s < 6 ? s++ : (o++, s = 0), t < 6 ? t++ : (n++, t = 0);
                            break;
                        case "weekly":
                            o++, n++;
                            break;
                        case "monthly":
                            o += 4, n += 4;
                            break;
                        case "yearly":
                            o += 12, n += 12
                        }
                        i = this.cloneAsRecurrence(r), i.set({
                                start_due_wday: s,
                                start_due_week: o,
                                end_due_wday: t,
                                end_due_week: n
                            });
                        if (this.get("count") && this.get("count") <= r || o > e) break;
                        u.push(this.collection.addOrUpdate(i))
                    } else u.push(void 0)
                }
                return u
            }, n.prototype.excludeRecurrence = function (e) {
                var t;
                return t = e.get("recurrence_number"), e.isLastRecurrence() ? t === 1 ? this.set({
                        freq: null
                    }) : this.set({
                        count: t,
                        until_date: null
                    }) : (this.has("excluded_recurrences") ? this.get("excluded_recurrences").push(t) : this.set("excluded_recurrences", [t]), this.set("excluded_recurrence", t))
            }, n.prototype.excludeRecurrenceAndFutureRecurrences = function (e) {
                var t;
                return t = e.get("recurrence_number"), t === 1 ? (this.set({
                            count: 1
                        }), this.set({
                            freq: null
                        })) : this.set({
                        count: t,
                        until_date: null
                    })
            }, n.prototype.createExcluded = function (e) {
                var t = this;
                return this.master().excludeRecurrence(this), this.master().save({}, {
                        success: function () {
                            return t.unset("id"), t.save({}, {
                                    success: function () {
                                        return t.set("id", bcx.lastCalendarEventId), bcx.lastCalendarEventId = null, t.get("comments_count") ? t.moveRecurrenceComments(master, e) : typeof e == "function" ? e() : void 0
                                    }
                                })
                        }
                    })
            }, n.prototype.createRecurring = function (e) {
                var t, n = this;
                return this.master().get("count") ? this.set("count", this.master().get("count") - this.get("recurrence_number")) : this.set("until_date", this.master().get("until_date")), this.set("freq", this.master().get("freq")), this.master().excludeRecurrenceAndFutureRecurrences(this), t = this.master(), t.save({}, {
                        success: function () {
                            return n.unset("id"), n.save({}, {
                                    success: function () {
                                        return n.set("id", bcx.lastCalendarEventId), bcx.lastCalendarEventId = null, _(_(t.get("comments_count_by_recurrence")).keys()).detect(function (e) {
                                            return e >= n.get("recurrence_number")
                                        }) ? n.moveRecurrenceComments(t, e) : typeof e == "function" ? e() : void 0
                                    }
                                })
                        }
                    })
            }, n.prototype.moveRecurrenceComments = function (e, t) {
                var n, r = this;
                return n = new bcx.MoveProcessor(new bcx.MoveOperation({
                            recurrence: this.get("recurrence_number"),
                            move_future_recurrences: this.isRecurring(),
                            source_resource_type: "CalendarEvent",
                            source_resource_id: e.get("id"),
                            destination_resource_type: "CalendarEvent",
                            destination_resource_id: this.get("id"),
                            destination_bucket_type: this.getBucketType(),
                            destination_bucket_id: this.bucket().get("id")
                        })), n.on("processor:success", function () {
                        return typeof t == "function" ? t() : void 0
                    }), n.run()
            }, n.prototype.exclude = function (e) {
                var t = this;
                return this.master().excludeRecurrence(this), this.master().save({}, {
                        success: function () {
                            return typeof e == "function" ? e() : void 0
                        }
                    })
            }, n.prototype.excludeWithFutureRecurrences = function (e) {
                var t = this;
                return this.master().excludeRecurrenceAndFutureRecurrences(this), this.master().save({}, {
                        success: function () {
                            return typeof e == "function" ? e() : void 0
                        }
                    })
            }, n
        }(bcx.Model)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.collections.CalendarEvents = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.model = bcx.models.CalendarEvent, n.prototype.initialRecurrenceDays = 42, n.prototype.initialTemplateRecurrenceWeeks = 7, n.prototype.initialize = function () {
                return this.bind("add", this.addInitialRecurrences), this.bind("change", this.replaceRecurrences), this.bind("remove", this.removeRecurrences)
            }, n.prototype.comparator = function (e, t) {
                return e.compareTo(t)
            }, n.prototype.getCalendarEventsForRange = function (e, t) {
                return _(this.models).select(function (n) {
                    return n.doesOccurBetween(e, t)
                })
            }, n.prototype.getCalendarEventsForDate = function (e) {
                return _(this.models).select(function (t) {
                    return t.doesOccurOn(e)
                })
            }, n.prototype.getCalendarEventsOccurringOnOrAfter = function (e) {
                return _(this.models).select(function (t) {
                    return t.doesOccurOnOrAfter(e)
                })
            }, n.prototype.addInitialRecurrences = function (e) {
                if (e.isRecurring()) return e.bucket().isTemplate() ? e.addTemplateRecurrences(this.initialTemplateRecurrenceWeeks) : e.addRecurrencesInRange(e.getStartDate(), e.getEndDate().next(this.initialRecurrenceDays))
            }, n.prototype.addRecurrencesInRange = function (e, t) {
                var n = this;
                return _(this.select(function (e) {
                            return e.isRecurring()
                        })).each(function (n) {
                        return n.addRecurrencesInRange(e, t)
                    })
            }, n.prototype.replaceRecurrences = function (e) {
                var t, n, r, i;
                if (!e.getStartDate() || !e.getEndDate()) return;
                (r = e.recurrences()).length && this.remove(r);
                if (e.isRecurring()) return e.bucket().isTemplate() ? e.addTemplateRecurrences(this.initialTemplateRecurrenceWeeks) : (i = e.getStartDate(), t = e.getEndDate().next(this.initialRecurrenceDays), r.length && (n = _(r).last().getEndDate(), n.date > t.date && (t = n)), e.addRecurrencesInRange(i, t))
            }, n.prototype.removeRecurrences = function (e) {
                if (e.isRecurring()) return this.remove(e.recurrences())
            }, n
        }(Backbone.Collection), bcx.calendarEvents = new bcx.collections.CalendarEvents
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.Project = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.modelName = "Project", n.prototype.defaults = {
                topics_count: 0,
                todolists_count: 0,
                documents_count: 0,
                attachments_count: 0,
                forwards_count: 0,
                calendar_events_count: 0
            }, n.prototype.star = function () {
                return this.starred = !0
            }, n.prototype.unstar = function () {
                return this.starred = !1
            }, n.prototype.url = function () {
                return "/" + bcx.currentAccountSlug + "/projects/" + (this.get("param") || this.id)
            }, n.prototype.accessesUrl = function () {
                return "" + this.url() + "/accesses"
            }, n.prototype.isActive = function () {
                return this.get("status_name") === "active"
            }, n.prototype.isDraft = function () {
                return this.get("status_name") === "draft"
            }, n.prototype.isTemplate = function () {
                return this.get("status_name") === "template"
            }, n.prototype.isUsed = function () {
                return n.__super__.isUsed.apply(this, arguments) || this.get("todolists_count") + this.get("documents_count") + this.get("forwards_count") > 0
            }, n.prototype.hasDueTodos = function () {
                var e = this;
                return this.get("remaining_todos_count") > 0 && bcx.todos.any(function (t) {
                    return t.bucket() === e && t.get("due_on")
                })
            }, n.prototype.lastActiveDate = function () {
                var e;
                if (e = this.get("updated_at")) return e.match(/(.*?)T/)[1]
            }, n.prototype.urlForLatestActivity = function () {
                return "" + this.url() + "/events/" + this.lastActiveDate()
            }, n.prototype.urlForTrashOperation = function () {
                return "" + this.url() + "/trash_operation"
            }, n.prototype.urlForPublish = function () {
                return "" + this.url() + "/publish"
            }, n.prototype.urlForTrash = function () {
                return "" + this.url() + "/trash"
            }, n.prototype.bucketAccess = function () {
                return bcx.bucketAccesses.get("Project:" + this.id)
            }, n.prototype.people = function () {
                var e, t;
                return (e = (t = this.bucketAccess()) != null ? t.people() : void 0) != null ? e : []
            }, n.prototype.subscribers = function () {
                var e, t;
                return (e = (t = this.bucketAccess()) != null ? t.subscribers() : void 0) != null ? e : []
            }, n.prototype.unsubscribers = function () {
                var e, t;
                return (e = (t = this.bucketAccess()) != null ? t.unsubscribers() : void 0) != null ? e : []
            }, n.prototype.getTagNames = function () {
                var e;
                return _.sortBy((e = this.get("tag_names")) != null ? e : [], function (e) {
                    return e.trim().toLowerCase()
                })
            }, n.prototype.toJSON = function () {
                return {
                    name: this.get("name"),
                    description: this.get("description"),
                    color: this.getColor()
                }
            }, n
        }(bcx.models.Bucket)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.collections.Projects = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.model = bcx.models.Project, n.prototype.comparator = function (e) {
                var t;
                return (t = e.get("name")) != null ? t.trim().toLowerCase() : void 0
            }, n.prototype.update = function (e) {
                var t, n, r, i, s, o, u, a, f, l;
                r = {};
                for (u = 0, f = e.length; u < f; u++) t = e[u], n = t.id, r[n] = !0, (o = this.get(n)) ? o.set(t) : this.add(t);
                s = this.reject(function (e) {
                    return r[e.id]
                });
                for (a = 0, l = s.length; a < l; a++) i = s[a], this.remove(i);
                return this.sort({
                        silent: !0
                    })
            }, n.prototype.active = function () {
                return this.filter(function (e) {
                    return e.isActive()
                })
            }, n.prototype.draft = function () {
                return this.filter(function (e) {
                    return e.isDraft()
                })
            }, n.prototype.activeOrDraft = function () {
                return this.filter(function (e) {
                    return e.isActive() || e.isDraft()
                })
            }, n.prototype.activeOrDraftWithCalendarItems = function () {
                return this.filter(function (e) {
                    return (e.isActive() || e.isDraft()) && (e.get("calendar_events_count") > 0 || e.hasDueTodos())
                })
            }, n.prototype.remove = function (e) {
                var t;
                return t = bcx.calendarEvents.select(function (t) {
                    return t.bucket() === e
                }), bcx.calendarEvents.remove(t), n.__super__.remove.apply(this, arguments)
            }, n
        }(Backbone.Collection), bcx.projects = new bcx.collections.Projects
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.Person = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.url = function () {
                var e;
                return "/people/" + ((e = this.get("param")) != null ? e : this.id)
            }, n.prototype.avatarUrl = function (e) {
                var t;
                return e == null && (e = "avatar"), (t = this.get("avatar_urls")) != null ? t[e] : void 0
            }, n.prototype.getAccount = function () {
                return bcx.accounts.get(this.get("account_id"))
            }, n.prototype.isAccountManager = function () {
                return this.get("account_owner")
            }, n.prototype.isAdmin = function () {
                return this.get("admin")
            }, n.prototype.canCreateProjects = function () {
                return this.get("can_create_projects")
            }, n.prototype.getStartOfWeek = function () {
                return this.get("start_of_week")
            }, n.prototype.setStartOfWeek = function (e) {
                return this.set("start_of_week", e)
            }, n
        }(Backbone.Model)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.collections.People = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.model = bcx.models.Person, n
        }(Backbone.Collection), bcx.people = new bcx.collections.People
    }.call(this),
    function () {
        var e, t, n = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, r = {}.hasOwnProperty,
            i = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var n in t) r.call(t, n) && (e[n] = t[n]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            }, s = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        bcx.models.CalendarDisplay = function (e) {
            function r() {
                return this.removeEventsFor = n(this.removeEventsFor, this), this.updateBlankSlate = n(this.updateBlankSlate, this), this.startOfWeekChanged = n(this.startOfWeekChanged, this), r.__super__.constructor.apply(this, arguments)
            }
            return i(r, e), r.prototype.defaults = function () {
                return {
                    cursor: CalendarDate.today().beginningOfWeek(),
                    rows: 6,
                    hiddenBucketData: "{}",
                    zoomedIn: !1,
                    zoomedInBucketKey: null,
                    calendarListVisibility: !0,
                    todosSidebarVisibility: !1
                }
            }, r.prototype.initialize = function () {
                var e = this;
                return this.calendarEvents = bcx.calendarEvents, this.calendars = bcx.calendars, this.projects = bcx.projects, this.todos = bcx.todos, this.calendars.bind("all", this.updateBlankSlate), this.projects.bind("all", this.updateBlankSlate), this.todos.bind("all", this.updateBlankSlate), this.updateBlankSlate(), this.calendarEventsLoader = new bcx.CalendarEventsLoader(this), this.calendars.bind("remove", this.removeEventsFor), bcx.currentPerson.bind("change:start_of_week", this.startOfWeekChanged), this.bind("change", function () {
                    if (!e.saving && !e.fetching) return e.save()
                }), this.fetch()
            }, r.prototype.save = function (e) {
                e == null && (e = {});
                try {
                    return this.saving = !0, this.set(e), bcx.storage.set("calendarDisplay", this)
                } catch (t) {} finally {
                    this.saving = !1
                }
            }, r.prototype.fetch = function () {
                try {
                    return this.fetching = !0, this.set(bcx.storage.get("calendarDisplay"))
                } catch (e) {} finally {
                    this.fetching = !1
                }
            }, r.prototype.startOfWeekChanged = function (e, t) {
                var n;
                n = e.previous("start_of_week");
                if (n === 0 && t === 1) return this.set({
                        cursor: this.cursor(1)
                    });
                if (n === 1 && t === 0) return this.set({
                        cursor: this.cursor(-1)
                    })
            }, r.prototype.afterContentChanges = function (e, t) {
                return t == null && (t = !0), t && (e = this.debounce(e)), this.calendarEvents.bind("all", e), this.calendars.bind("all", e), this.projects.bind("all", e), this.todos.bind("all", e)
            }, r.prototype.afterDisplayChanges = function (e, t) {
                return t == null && (t = !0), t && (e = this.debounce(e)), this.bind("all", e)
            }, r.prototype.afterChanges = function (e) {
                return e = this.debounce(e), this.afterContentChanges(e, !1), this.afterDisplayChanges(e, !1)
            }, r.prototype.debounce = function (e) {
                var t = this;
                return _.debounceConditionally(e, 1, function () {
                    return !t.synchronous
                })
            }, r.prototype.cursor = function (e) {
                return e == null && (e = 0), this.get("cursor").next(e)
            }, r.prototype.markCurrentDateRangeLoaded = function () {
                return this.calendarEventsLoader.markDateRangesLoaded([
                        [this.getFirstDate(), this.getLastDate()]
                    ])
            }, r.prototype.loadCurrentDateRange = function (e) {
                return this.calendarEventsLoader.fetch(e)
            }, r.prototype.getWeeks = function () {
                var e, t, n, r, i, s;
                e = this.cursor(-1), s = [];
                for (n = r = 0, i = this.get("rows"); 0 <= i ? r < i : r > i; n = 0 <= i ? ++r : --r) s.push(function () {
                    var n, r;
                    r = [];
                    for (t = n = 0; n < 7; t = ++n) r.push(e = e.next());
                    return r
                }());
                return s
            }, r.prototype.getFirstWeek = function () {
                return this.getWeeks()[0]
            }, r.prototype.getFirstDate = function () {
                return this.cursor()
            }, r.prototype.getFirstSaturday = function () {
                return this.cursor(6)
            }, r.prototype.getLastDate = function () {
                return this.cursor(-1 + 7 * this.get("rows"))
            }, r.prototype.getSignificantDate = function () {
                return this.getFirstSaturday().beginningOfMonth()
            }, r.prototype.firstWeekContainsToday = function () {
                var e;
                return e = CalendarDate.today().toString(), s.call(_.invoke(this.getFirstWeek(), "toString"), e) >= 0
            }, r.prototype.getBeginningOfMonth = function () {
                return this.firstWeekContainsToday() ? CalendarDate.today().beginningOfMonth() : this.getFirstSaturday().beginningOfMonth()
            }, r.prototype.getCalendarEvents = function () {
                var e;
                return e = this, this.calendarEvents.select(function (t) {
                    return e.getBucketVisibility(t.bucket())
                })
            }, r.prototype.getCalendarEventsFor = function (e, t) {
                return t != null ? this.getCalendarEventsForRange(e, t) : this.getCalendarEventsForDate(e)
            }, r.prototype.getCalendarEventsForRange = function (e, t) {
                return _(this.getCalendarEvents()).select(function (n) {
                    return n.doesOccurBetween(e, t)
                })
            }, r.prototype.getCalendarEventsForDate = function (e) {
                return _(this.getCalendarEvents()).select(function (t) {
                    return t.doesOccurOn(e)
                })
            }, r.prototype.getSpannedCalendarEventsFor = function (e, t) {
                return _(this.getCalendarEventsFor(e, t)).select(function (e) {
                    return e.isSpanned()
                })
            }, r.prototype.getAllDayCalendarEventsFor = function (e, t) {
                return _(this.getCalendarEventsFor(e, t)).select(function (e) {
                    return e.isAllDay() && !e.isSpanned()
                })
            }, r.prototype.getTimedCalendarEventsFor = function (e, t) {
                return _(this.getCalendarEventsFor(e, t)).select(function (e) {
                    return e.isTimed()
                })
            }, r.prototype.getTodos = function () {
                var e = this;
                return this.todos.select(function (t) {
                    return e.getBucketVisibility(t.bucket())
                })
            }, r.prototype.getTodosFor = function (e) {
                return _(this.getTodos()).select(function (t) {
                    return t.doesOccurOn(e)
                })
            }, r.prototype.getSpannedLayoutFor = function (e, n) {
                var r;
                return r = this.getSpannedCalendarEventsFor(e, n), t["for"](e, n, r)
            }, r.prototype.getHiddenBucketData = r.memoize(function () {
                return JSON.parse(this.get("hiddenBucketData"))
            }), r.prototype.setHiddenBucketData = function (e) {
                return this.set("hiddenBucketData", JSON.stringify(e))
            }, r.prototype.getBucketVisibilityKey = function (e) {
                return "" + e.constructor.modelName + ":" + e.id
            }, r.prototype.getBucketVisibility = function (e) {
                return this.get("zoomedIn") ? this.getBucketVisibilityKey(e) === this.get("zoomedInBucketKey") : !(this.getBucketVisibilityKey(e) in this.getHiddenBucketData()) && !e.isTemplate()
            }, r.prototype.setBucketVisibility = function (e, t) {
                var n, r;
                return n = this.getHiddenBucketData(), r = this.getBucketVisibilityKey(e), t ? delete n[r] : n[r] = !0, this.setHiddenBucketData(n)
            }, r.prototype.toggleBucketVisibility = function (e) {
                return this.setBucketVisibility(e, !this.getBucketVisibility(e))
            }, r.prototype.getCalendarListVisibility = function () {
                return this.get("calendarListVisibility")
            }, r.prototype.setCalendarListVisibility = function (e) {
                return this.set("calendarListVisibility", e)
            }, r.prototype.zoomIn = function (e) {
                return this.set("zoomedInBucketKey", this.getBucketVisibilityKey(e)), this.set("zoomedIn", !0)
            }, r.prototype.zoomOut = function () {
                if (this.isZoomedIn()) return this.set("zoomedInBucketKey", null), this.set("zoomedIn", !1)
            }, r.prototype.zoomedInBucket = function () {
                if (this.isZoomedIn()) return bcx.getBucket(this.get("zoomedInBucketKey"))
            }, r.prototype.isZoomedIn = function () {
                return this.get("zoomedIn")
            }, r.prototype.toggleCalendarListVisibility = function () {
                return this.setCalendarListVisibility(!this.getCalendarListVisibility())
            }, r.prototype.getTodosSidebarVisibility = function () {
                return this.get("todosSidebarVisibility")
            }, r.prototype.setTodosSidebarVisibility = function (e) {
                return this.set("todosSidebarVisibility", e)
            }, r.prototype.toggleTodosSidebarVisibility = function () {
                return this.setTodosSidebarVisibility(!this.getTodosSidebarVisibility())
            }, r.prototype.getTitle = function () {
                var e;
                return this.firstWeekContainsToday() ? "Next 6 weeks" : (e = this.getFirstSaturday(), "" + e.getMonthName() + " " + e.year)
            }, r.prototype.getZoomedInBucketTitle = function () {
                var e, t;
                if (e = this.zoomedInBucket()) return t = e.get("name"), e.constructor.modelName === "Project" ? "Project: " + t : t
            }, r.prototype.lockNavigation = function () {
                return this.navigationLocked = !0
            }, r.prototype.unlockNavigation = function () {
                return this.navigationLocked = !1
            }, r.prototype.navigateToMonth = function (e) {
                return this.navigationLocked ? !1 : this.set({
                        cursor: e.beginningOfMonth().beginningOfWeek()
                    })
            }, r.prototype.navigateBackward = function () {
                return this.navigateToMonth(this.cursor(-1))
            }, r.prototype.navigateForward = function () {
                return this.navigateToMonth(this.getLastDate())
            }, r.prototype.navigateToToday = function () {
                return this.navigationLocked ? !1 : this.set({
                        cursor: this.defaults().cursor
                    })
            }, r.prototype.isShowingCalendarEvent = function (e) {
                return e.doesOccurBetween(this.getFirstDate(), this.getLastDate())
            }, r.prototype.navigateToCalendarEvent = function (e) {
                if (!this.isShowingCalendarEvent(e)) return this.navigateToMonth(e.getStartDate())
            }, r.prototype.updateBlankSlate = function () {
                var e;
                e = this.blankSlate, this.blankSlate = this.calendars.length === 0 && this.projects.active().length === 0;
                if (this.blankSlate !== e) return this.trigger("change:blankSlate")
            }, r.prototype.reset = function () {
                return this.set(this.defaults()), this.trigger("reset")
            }, r.prototype.removeEventsFor = function (e) {
                return this.calendarEvents.remove(e.calendarEvents())
            }, r.prototype.toJSON = function () {
                return {
                    hiddenBucketData: this.get("hiddenBucketData"),
                    calendarListVisibility: this.get("calendarListVisibility"),
                    todosSidebarVisibility: this.get("todosSidebarVisibility")
                }
            }, r
        }(bcx.Model), bcx.on("identity:set", function () {
            return bcx.calendarDisplay = new bcx.models.CalendarDisplay
        }), t = function () {
            function t(e, t) {
                this.startDate = e, this.endDate = t, this.size = 1 + this.endDate.daysSince(this.startDate), this.rows = []
            }
            return t["for"] = function (e, t, n) {
                var r, i, s, o;
                i = new this(e, t);
                for (s = 0, o = n.length; s < o; s++) r = n[s], i.add(r);
                return i
            }, t.prototype.add = function (t) {
                var n, r, i, s, o;
                r = this.getSlotsFor(t);
                if (!r.length) return !1;
                o = this.rows;
                for (i = 0, s = o.length; i < s; i++) {
                    n = o[i];
                    if (n.occupy(r, t)) return t
                }
                return n = new e(this.size), n.occupy(r, t), this.rows.push(n), t
            }, t.prototype.getSlotHeight = function (e) {
                var t, n, r, i, s, o;
                t = 0, o = this.rows;
                for (n = i = 0, s = o.length; i < s; n = ++i) r = o[n], r.isFreeDuring([e]) || (t = n + 1);
                return t
            }, t.prototype.getSlotsFor = function (e) {
                var t, n, r, i, s;
                r = [], t = this.startDate;
                for (n = i = 0, s = this.size; 0 <= s ? i < s : i > s; n = 0 <= s ? ++i : --i) e.doesOccurOn(t) && r.push(n), t = t.next();
                return r
            }, t
        }(), e = function () {
            function e(e) {
                this.occurrences = Array(e)
            }
            return e.prototype.isFreeDuring = function (e) {
                var t, n, r;
                for (n = 0, r = e.length; n < r; n++) {
                    t = e[n];
                    if (this.occurrences[t]) return !1
                }
                return !0
            }, e.prototype.occupy = function (e, t) {
                var n, r, i, s;
                if (this.isFreeDuring(e)) {
                    n = {
                        calendarEvent: t,
                        width: e.length
                    };
                    for (i = 0, s = e.length; i < s; i++) r = e[i], this.occurrences[r] = n, n = !0;
                    return !0
                }
            }, e.prototype.getOccurrences = function () {
                var e, t, n, r, i, s;
                t = [], s = this.occurrences;
                for (n = r = 0, i = s.length; r < i; n = ++r) e = s[n], e && e !== !0 && t.push(_.extend({
                            slot: n
                        }, e));
                return t
            }, e
        }()
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.CopyOperation = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.urlRoot = "/copy_operations", n
        }(bcx.BucketOperation)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.MoveOperation = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.urlRoot = "/move_operations", n
        }(bcx.BucketOperation)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.ProjectTemplate = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.modelName = "ProjectTemplate", n
        }(bcx.models.Project)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.collections.ProjectTemplates = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.model = bcx.models.ProjectTemplate, n
        }(bcx.collections.Projects), bcx.projectTemplates = new bcx.collections.ProjectTemplates
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.Todo = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.modelName = "Todo", n.prototype.isAllDay = function () {
                return !0
            }, n.prototype.isTimed = function () {
                return !1
            }, n.prototype.urlRoot = function () {
                return "" + this.getBucketPath() + "/todos"
            }, n.prototype.getBucketPath = function () {
                return "/" + bcx.currentAccountSlug + "/projects/" + this.bucket().get("param")
            }, n.prototype.showPath = function () {
                return "" + this.urlRoot() + "/" + this.get("param")
            }, n.prototype.togglePath = function () {
                return "" + this.showPath() + "/toggle"
            }, n.prototype.bucket = n.memoize(function () {
                return bcx.projects.get(this.get("project_id"))
            }), n.prototype.doesOccurOn = function (e) {
                var t;
                return ((t = this.getDueDate()) != null ? t.value : void 0) === e.value
            }, n.prototype.doesOccurOnOrAfter = function (e) {
                var t;
                return ((t = this.getDueDate()) != null ? t.date : void 0) >= e.date
            }, n.prototype.doesOccurBetween = function (e, t) {
                var n, r;
                return e.date <= (n = (r = this.getDueDate()) != null ? r.date : void 0) && n <= t.date
            }, n.prototype.getDueDate = n.memoize(function () {
                return this.calendarDate("due_on")
            }), n.prototype.setDueDate = function (e) {
                return this.set("due_on", e.toString())
            }, n.prototype.getStartDate = function () {
                return this.getDueDate()
            }, n.prototype.setStartDate = function (e) {
                return this.setDueDate(e)
            }, n.prototype.getDates = n.memoize(function () {
                return [this.getDueDate()]
            }), n.prototype.summary = function () {
                return this.get("content")
            }, n.prototype.assignee = n.memoize(function () {
                if (this.get("assignee_id")) return bcx.peopleAndGroups.get("" + this.get("assignee_type").toLowerCase() + "_" + this.get("assignee_id"))
            }), n.prototype.todolist = n.memoize(function () {
                return bcx.todolists.get(this.get("todolist_id"))
            }), n.prototype.toJSON = function () {
                var e;
                return e = n.__super__.toJSON.apply(this, arguments), delete e.due_at, e
            }, n
        }(bcx.Model)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.models.Todolist = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.modelName = "Todolist", n.prototype.bucket = n.memoize(function () {
                return bcx.projects.get(this.get("project_id"))
            }), n.prototype.showPath = function () {
                return "" + this.bucket().url() + "/todolists/" + this.get("param")
            }, n
        }(bcx.Model)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.collections.Todolists = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.model = bcx.models.Todolist, n
        }(Backbone.Collection), bcx.todolists = new bcx.collections.Todolists
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.collections.Todos = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.model = bcx.models.Todo, n.prototype.comparator = function (e) {
                var t, n;
                return "" + ((t = e.bucket()) != null ? t.get("name") : void 0) + "-" + ((n = e.todolist()) != null ? n.get("position") : void 0) + "-" + e.get("position")
            }, n.prototype.overdueTodos = function () {
                var e;
                return e = CalendarDate.today().date, this.select(function (t) {
                    var n;
                    return ((n = t.getDueDate()) != null ? n.date : void 0) < e
                })
            }, n.prototype.upcomingTodos = function () {
                var e;
                return e = CalendarDate.today().date, this.select(function (t) {
                    var n;
                    return ((n = t.getDueDate()) != null ? n.date : void 0) >= e
                })
            }, n.prototype.getTodosForRange = function (e, t) {
                return this.select(function (n) {
                    return n.doesOccurBetween(e, t)
                })
            }, n.prototype.getTodosForDate = function (e) {
                return this.select(function (t) {
                    var n;
                    return ((n = t.getDueDate()) != null ? n.value : void 0) === e.value
                })
            }, n
        }(Backbone.Collection), bcx.todos = new bcx.collections.Todos
    }.call(this),
    function () {
        var e;
        e = function () {
            var e;
            if (!bcx.currentProject) return;
            return e = $("div.sheet.project"), bcx.currentProject.isUsed() ? e.removeClass("blank_slate") : e.addClass("blank_slate")
        }, bcx.on("page:change", 'apply "blank_slate" class to current project sheet', e), bcx.projects.bind("change", function (t) {
            if (t === bcx.currentProject) return e()
        }), $("[data-behavior~=bounce_nav]").live("click", function (e) {
            if (!$(this).hasClass("stars")) return $("[data-behavior~=bounce]").bounce()
        })
    }.call(this),
    function () {
        $("section.projects.cards article.card").live("click", function (e) {
            var t;
            t = $(e.target);
            if (t.is("article.card")) return t.find("a").click()
        })
    }.call(this),
    function () {
        bcx.on("page:update", "make project events visible", function () {
            return $("[data-behavior~=project_events] .event_container").show()
        })
    }.call(this),
    function () {
        var e;
        $("[data-behavior~=edit_project_header]").live("expand", function (e) {
            var t;
            return t = $(this).find("form"), t.find(".submit").slideDown(100), t.find("textarea").keydown()
        }).live("collapse", function () {
            return $(this).find("form").resetForm(), $(this).find(".submit").hide()
        }), e = function () {
            var e, t;
            e = $(this).closest("[data-behavior~=expandable]");
            if (!e.find(".expanded_content").length) return;
            return e.expand(), $(this).closest("h1.field").length ? t = e.find(".expanded_content h1.field textarea") : t = e.find(".expanded_content div.description.field textarea"), t.focus().select()
        }, $("[data-behavior~=edit_project_header] [data-behavior~=editable_field_prompt]").live("click", e).live("tap", e).live("mouseover", function () {
            var e;
            e = $(this).closest("[data-behavior~=expandable]");
            if (!e.find("div.expanded_content").length) return;
            return $(this).delay(300).animate({
                    borderColor: "#b3b3b3"
                }, 100), $(this).animate({
                    width: 600
                }, 100)
        }).live("mouseout", function () {
            return $(this).stop(!0, !0).css({
                    width: "auto",
                    borderColor: "transparent"
                })
        })
    }.call(this),
    function () {
        var e, t, n;
        n = "div.project > div.sheet_body > section[data-collection-name]", t = function (e) {
            var t, n;
            return t = e.data("collection-name"), (((n = bcx.currentProject) != null ? n.get("" + t + "_count") : void 0) === 0 || e.hasClass("empty")) && e.find("article.new.expanded").length < 1
        }, e = function () {
            return $(n).each(function () {
                var e;
                return e = $(this), t(e) ? e.hide() : e.show()
            })
        }, bcx.on("page:change", "hide or show empty project sections", function () {
            return e()
        }), $("" + n + " > article.new[data-behavior~=expandable]").live("beforeexpand", function () {
            var e;
            return e = $(this).closest("section"), e.show()
        }).live("expand", function () {
            return $("div.sheet.project").removeClass("blank_slate")
        }).live("collapse", function () {
            var e;
            e = $(this).closest("section"), t(e) && e.hide();
            if (!bcx.currentProject.isUsed() && $("" + n + " > article.new[data-behavior~=expandable].expanded").length < 1) return $("div.sheet.project").addClass("blank_slate")
        }), bcx.projects.bind("change", function (t) {
            if (t === bcx.currentProject) return e()
        })
    }.call(this),
    function () {
        $("div.project_settings_links a").live("click", function () {
            return $(this).closest("div").addClass("busy")
        }), $("section.project_settings").find("a[data-behavior=cancel]").live("click", function (e) {
            return $("#project_settings").slideUp(300, function () {
                return $("div.project_settings_links").removeClass("busy").fadeIn("fast")
            }), e.preventDefault()
        })
    }.call(this),
    function () {
        var e;
        e = function () {
            return $.ajax({
                    url: bcx.currentProject.urlForTrashOperation(),
                    statusCode: {
                        200: function () {
                            return Stacker.workspace.visit(window.location.pathname, {
                                    replaceSheet: !0
                                })
                        },
                        202: function () {
                            return setTimeout(e, 3e3)
                        }
                    },
                    error: function () {
                        return setTimeout(e, 3e3)
                    }
                })
        }, bcx.on("page:change", "request project trash operation status", function () {
            if ($("[data-behavior~=trash_operation]").length > 0) return e()
        })
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/add_tagging"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="expanded_content balloon top_left_side">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n\n  <input type="text" name="tagging[tag_name]" value="" placeholder="Type to add a new label">\n  <div class="choose_tags"></div>\n\n  <div class="submit">\n    <input type="submit" value="Add label" class="action_button green"> or\n    <a href="#" data-behavior="cancel">I\'m done</a>\n  </div>\n</div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/adhoc_subscriber"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="autocomplete_people">\n  <label class="focused placeholder">Type a name or email address...</label>\n  <label class="blurred placeholder">Add another person...</label>\n  <input type="text" data-behavior="input_change_emitter" data-role="human_input" value="'), t.push(r(this.model.get("name"))), t.push('">\n  <input type="hidden" data-role="email_address_input" name="'), t.push(r(this.subscribable)), t.push('[new_subscriber_emails][]" value="'), t.push(r(this.model.get("email_address"))), t.push('">\n  <input type="hidden" data-role="person_id_input" name="'), t.push(r(this.subscribable)), t.push('[subscribers][]" value="'), t.push(r(this.model.get("person_id"))), t.push('">\n  <div class="suggestions" data-role="suggestions_view">\n    <!-- templates/autocomplete_people_suggestions -->  \n  </div>\n</div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/autocomplete_people_suggestions"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u;
                    t.push('<ol class="suggestions">\n  ');
                    if (((s = this.results.enabledOptions) != null ? s.length : void 0) || ((o = this.results.disabledOptions) != null ? o.length : void 0)) {
                        t.push("\n    ");
                        if (this.results.enabledOptions.length) {
                            t.push("\n      "), u = this.results.enabledOptions;
                            for (n = 0, i = u.length; n < i; n++) e = u[n], t.push('\n        <li class="'), e === this.selected && t.push(r("selected")), t.push(' enabled option suggestion" data-behavior="select_suggestion" data-suggestion-id="'), t.push(r(e.id)), t.push('">\n          '), e.isSubgroup() ? (t.push('\n            <strong class="name">'), t.push(r(e.get("name"))), t.push("</strong> <span>Group at "), t.push(r(e.group().get("name"))), t.push(" with "), t.push(r(this.pluralize(e.get("member_ids"), "person", "people"))), t.push("</span>\n          ")) : e.isGroup() ? (t.push('\n            <strong class="name">'), t.push(r(e.get("name"))), t.push("</strong> <span>Company with "), t.push(r(this.pluralize(e.get("member_ids"), "person", "people"))), t.push("</span>\n          ")) : (t.push('\n            <span class="name">'), t.push(r(e.get("name"))), t.push('</span> <span class="email">'), t.push(r(e.get("email_address"))), t.push("</span>\n          ")), t.push("\n        </li>\n      ");
                            t.push("\n    ")
                        } else t.push('\n      <li class="disabled hint suggestion">\n        '), this.results.disabledOptions[0].isGroup() ? (t.push('\n          Everyone from <span class="name">'), t.push(r(this.results.disabledOptions[0].get("name"))), t.push("</span> is already on the project.\n        ")) : (t.push('\n          <span class="name">'), t.push(r(this.results.disabledOptions[0].get("name"))), t.push("</span> is already on the project.\n        ")), t.push("\n      </li>\n    ");
                        t.push("\n  ")
                    } else t.push("\n    "), this.showInvalidMessage ? t.push('\n      <li class="invalid hint suggestion">\n        This email address isnt formatted properly.\n      </li>\n    ') : (t.push("\n      "), this.showUnknownMessage && t.push('\n        <li class="unknown hint suggestion">\n          This person isnt in the system yet. Please enter their email address instead.\n        </li>\n      '), t.push("\n    ")), t.push("\n  ");
                    t.push("\n</ol>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/bucket_subscribers"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w;
                    i = bcx.peopleAndGroups.get("person_" + bcx.currentPerson.id), t.push("\n"), u = _(_(this.selectedSubscribers).map(function (e) {
                                return e.get("person_id")
                            })), t.push("\n\n"), e = (m = (g = this.bucket) != null ? g.subscribers() : void 0) != null ? m : [], t.push("\n"), n = (y = (b = this.bucket) != null ? b.unsubscribers() : void 0) != null ? y : [], t.push("\n\n"), l = _(e).without(i), t.push("\n"), c = _(n).without(i), t.push("\n\n"), _(e).include(i) && l.unshift(i), t.push("\n"), _(n).include(i) && c.unshift(i), t.push("\n\n"), s = c.length && !l.length, t.push("\n\n"), l.length && t.push('\n  <div class="select_all_or_none">\n    <a href="#" class="decorated select_everyone" data-behavior="subscriber_select_all">Select all</a> |\n    <a href="#" class="decorated select_everyone" data-behavior="subscriber_select_none">Select none</a>\n  </div>\n'), t.push("\n\n"), w = _(_(l).compact()).inGroups(2);
                    for (h = 0, d = w.length; h < d; h++) {
                        f = w[h], t.push('\n  <div class="column">\n    ');
                        for (p = 0, v = f.length; p < v; p++) a = f[p], t.push("\n      "), o = a.get("person_id"), t.push('\n      <label data-subscriber-id="'), t.push(r(o)), t.push('" title="'), t.push(r(a === i ? "Me (" + a.get("name") + ")" : a.get("name"))), t.push('">\n        <input name="message[subscribers][]" type="checkbox" value="'), t.push(r(o)), t.push('" '), u.include(o) && t.push(r('checked="checked"')), t.push(">\n        "), t.push(r(a === i ? "Me (" + a.get("name") + ")" : a.get("name"))), t.push("\n      </label>\n    ");
                        t.push("\n  </div>\n")
                    }
                    t.push("\n\n"), c.length && (t.push('\n  <div class="unsubscribers">\n    <h6>\n      '), s ? t.push("\n        Everyone on this project has\n      ") : c.length > 1 ? t.push("\n        These people have\n      ") : t.push("\n        This person has\n      "), t.push("\n      turned off email reminders:</h6>\n    <p>"), t.push(r(_(c).map(function (e) {
                                        return e.get("name")
                                    }).join(", ").replace(/,\s([^,]+)$/, " and $1"))), t.push("</p>\n  </div>\n")), t.push("\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_accesses"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    bcx.peopleAndGroups.loadedWithAccesses || this.calendar.isNew() ? (t.push('\n  <section>\n    <div class="slider" data-behavior="slider">\n      <ul class="slides">\n        <li class="slide" data-slide-index=\'0\'>\n          '), this.calendar.isNew() || this.calendar.people().length < 2 ? (t.push('\n            <figure>\n              <img src="'), t.push(r(bcx.currentPerson.avatarUrl())), t.push('" class="avatar" alt="Avatar" />\n              <h4>You\'re the only one who can see this calendar.</h4>\n            </figure>\n\n            <div class="subscribable">\n              <div class="invitees">\n                <h4>Invite more people</h4>\n                <p>Type names or email addresses:</p>\n\n                <section class="invite">\n                  <div class="invitees" data-behavior="calendar_invitees" data-disabled-people-ids="" data-disabled-group-ids=""></div>\n                </section>\n              </div>\n            </div>\n          ')) : (t.push("\n            <h4>Who can see this calendar?</h4>\n            <p>"), t.push(r(this.calendar.peopleNames())), t.push(' (<a href="#" data-behavior="slide" data-direction="forward" class="decorated">change</a>)</p>\n          ')), t.push("\n        </li>\n        <li class=\"slide\" data-slide-index='1'>\n          "), this.calendar.isNew() && this.calendar.people().length > 1 || (t.push('\n            <div class="subscribable change_accesses">\n              <div class="invitees">\n                <h4>Invite more people</h4>\n                <p>Type names or email addresses:</p>\n\n                <section class="invite">\n                  <div class="invitees" data-behavior="calendar_invitees" data-disabled-people-ids="" data-disabled-group-ids="" data-selected-people-ids=\''), t.push(r(JSON.stringify(this.calendar.peopleIds()))), t.push("' data-calendar-id='"), t.push(r(this.calendar.id)), t.push("'></div>\n                </section>\n              </div>\n            </div>\n          ")), t.push("\n        </li>\n      </ul>\n    </div>\n  </section>\n")) : t.push('\n  <section class="loading">\n    <!-- loading -->\n  </section>\n'), t.push("\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_blank_slate"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<article class="blank_slate">\n  <div class="blank_slate_arrow"></div>\n  <div class="blank_slate_body can_create_calendars">\n    <h1>Get started by adding your first calendar!</h1>\n    <p>Calendars make it easy to keep everyone on track. Create different calendars for vacations, staff meetings, and more. Any project you create will also have its own calendar.</p>\n  </div>\n</article>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_display"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="right">\n  <div class="sheet">\n    '), t.push(r(this.renderTemplate("calendar_blank_slate"))), t.push('\n\n    <div data-autoview-name="calendar_navigation"></div>\n    <div data-autoview-name="calendar_grid"></div>\n  </div>\n</div>\n\n<div class="left">\n  <aside class="calendar_list">\n    <div data-autoview-name="calendar_list"></div>\n    <div data-autoview-name="calendar_editor"></div>\n    <div data-autoview-name="project_editor"></div>\n  </aside>\n</div>\n\n<div data-autoview-name="calendar_item_editor"></div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_editor"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u;
                    t.push('<div class="balloon top_right_side '), t.push(r(this.calendar.isNew() ? "new" : void 0)), t.push('">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n\n  <form>\n    <header>\n      <fieldset class="calendar_settings">\n        <h3>\n          <textarea name="name" data-behavior="autoresize placeholder submit_on_enter" rows="1" placeholder="Name this calendar">'), t.push(r(this.calendar.get("name"))), t.push('</textarea>\n        </h3>\n\n        <p>Choose a color</p>\n        <div class="swatches">\n          '), e = this.calendar.getColor(), t.push("\n          "), u = bcx.bucketColors;
                    for (i = s = 0, o = u.length; s < o; i = ++s) n = u[i], t.push('\n            <input type="radio" id="'), t.push(r(this.id)), t.push("_swatch_"), t.push(r(i)), t.push('" name="color" value="'), t.push(r(n)), t.push('"'), e === n && t.push(r(" checked")), t.push('>\n            <label class="swatch" for="'), t.push(r(this.id)), t.push("_swatch_"), t.push(r(i)), t.push('" style="background-color: #'), t.push(r(n)), t.push('"></label>\n          ');
                    t.push('\n        </div>\n      </fieldset>\n    </header>\n\n    <div data-behavior="calendar_accesses"></div>\n\n    <footer>\n      <p class="submit">\n        '), this.calendar.isNew() ? t.push('\n          <input type="submit" value="Add this calendar" class="action_button">\n          or <a href="#" class="cancel" data-behavior="cancel">Cancel</a>\n        ') : t.push('\n          <input type="submit" value="Save changes", class="action_button">\n          or <a href="#" class="cancel" data-behavior="cancel">Close</a>\n          <a href="#" class="image delete" data-behavior="delete"></a>\n        '), t.push("\n      </p>\n    </footer>\n  </form>\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_event"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="event" data-id="'), t.push(r(this.calendarEvent.id)), t.push('">\n  <span class="event" style="color: #'), t.push(r(this.calendarEvent.getColor())), t.push('"\n    title="'), this.calendarEvent.isNew() || t.push(r("" + this.calendarEvent.getBucketType() + ": " + this.calendarEvent.getBucketName())), t.push('">\n    &bull;&nbsp;<span class="title">'), t.push(r(this.emojify(this.calendarEvent.get("summary")))), t.push("</span>\n    "), this.calendarEvent.isTimed() && (t.push('\n      <span class="time">'), t.push(r(this.calendarEvent.getStartTime().toFriendlyString())), t.push("</span>\n    ")), t.push("\n  </span>\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e;
                    t.push('<form class="calendar_event_editor_form '), this.calendarEvent.isSpanned() && t.push(r("spanned")), t.push('" data-skip_busy>\n  <div class="expandable" data-behavior="expandable recurrence_prompt">\n    <div class="collapsed_content">\n      <header>\n        '), t.push(JST["templates/calendar_event_editor/name_fields"](this)), t.push('\n      </header>\n      <section>\n        <div class="slider" data-behavior="slider">\n          <ul class="slides">\n            <li class="slide" data-slide-index=\'0\'>\n              '), t.push(JST["templates/calendar_event_editor/bucket_fields"](this)), t.push("\n              "), t.push(JST["templates/calendar_event_editor/date_fields"](this)), t.push("\n              "), t.push(JST["templates/calendar_event_editor/recurrence_fields"](this)), t.push("\n              "), t.push(JST["templates/calendar_event_editor/subscriber_fields"](this)), t.push("\n              "), this.calendarEvent.isNew() || (t.push('\n                <div class="discuss">\n                  '), (e = this.calendarEvent.get("comments_count")) ? (t.push('\n                    <a href="'), t.push(r(this.calendarEvent.showPath())), t.push('" data-default-stack="true"><span class="pill comments">'), t.push(r(e)), t.push(" "), t.push(r(e === 1 ? "comment" : "comments")), t.push("</span></a>\n                  ")) : (t.push('\n                    <p><a href="'), t.push(r(this.calendarEvent.showPath())), t.push('" class="decorated" data-default-stack="true">Discuss this event...</a></p>\n                  ')), t.push("\n                </div>\n              ")), t.push('\n            </li>\n            <li class="slide" data-slide-index=\'1\'>\n              <div class="invitees">\n                <h4>Tell people about this event</h4>\n                <p>\n                  We\'ll send an email reminder now and\n                  <span class="event_type_conditioned timed">30 minutes before</span>\n                  <span class="event_type_conditioned all_day">at 7am the day of</span>\n                  this event.\n                </p>\n\n                <div class="subscribers" data-role="bucket_subscribers">\n                  '), t.push(JST["templates/bucket_subscribers"]({
                                bucket: this.currentBucket,
                                selectedSubscribers: this.getSelectedSubscribers()
                            })), t.push('\n                </div>\n              </div>\n              <p style="margin:20px 0 0 0;font-size:12px;"><a href="#" data-behavior="slide" data-direction="backward" class="decorated done_editing">&larr; I\'m done editing this list</a></p>\n            </li>\n          </ul>\n        </div>\n      </section>\n      <footer>\n        <div data-behavior="calendar_alert" data-succeeded-text="Emails sent!" data-failed-text="Error saving event! Please try again."></div>\n          <p class="submit">\n            '), this.calendarEvent.isNew() ? t.push('\n              <input type="submit" value="Add this event" class="action_button green">\n              or <a href="#" class="cancel" data-role="cancel" data-behavior="cancel">Cancel</a>\n            ') : t.push('\n              <input type="submit" value="Save changes" class="action_button green">\n              or <a href="#" class="cancel" data-role="cancel" data-behavior="cancel">Close</a>\n              <a href="#" class="image delete" data-behavior="delete"></a>\n            '), t.push('\n          </p>\n        </div>\n      </footer>\n    <div class="expanded_content" data-role="expanded_recurrence_prompt">\n      <!-- templates/calendar_event_editor/recurrence_prompt -->\n    </div>\n  </div>\n</form>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/bucket_fields"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f = this;
                    t.push('<fieldset class="event_calendar" data-role="bucket_fields">\n  ');
                    if (this.bucketId != null) t.push('\n    <input type="hidden" name="bucket" value="'), t.push(r(this.bucketType)), t.push(":"), t.push(r(this.bucketId)), t.push('">\n  ');
                    else {
                        t.push("\n    "), s = this.display.zoomedInBucket(), t.push("\n\n    ");
                        if (this.calendarEvent.isNew() && s) t.push('\n      <input type="hidden" name="bucket" value="'), t.push(r(s.constructor.modelName)), t.push(":"), t.push(r(s.id)), t.push('">\n      '), t.push(r("" + s.constructor.modelName + ": " + s.get("name"))), t.push("\n    ");
                        else {
                            t.push("\n      "), i = this.calendarEvent.isNew() ? (a = this.display.zoomedInBucket()) != null ? a : this.lastUsedBucket : this.calendarEvent.bucket(), t.push('\n\n      <table data-role="bucket_container">\n        <tr>\n          <td class="label">\n            <label>Calendar:</label>\n          </td>\n          <td>\n            <select name="bucket" data-behavior=\'bucket_selector\' '), bcx.peopleAndGroups.loadedWithAccesses || t.push(r("disabled")), t.push('>\n              <optgroup label="Calendars">\n                '), bcx.calendars.each(function (e) {
                                return t.push('\n                  <option value="Calendar:'), t.push(r(e.id)), t.push('" '), i === e && t.push(r("selected='selected'")), t.push(">"), t.push(r(e.get("name"))), t.push("</option>\n                ")
                            }), t.push("\n              </optgroup>\n\n              "), n = bcx.projects.activeOrDraft(), t.push("\n              ");
                            if (n.length) {
                                t.push('\n                <optgroup label="Projects">\n                  ');
                                for (o = 0, u = n.length; o < u; o++) e = n[o], t.push('\n                    <option value="Project:'), t.push(r(e.id)), t.push('" '), i === e && t.push(r("selected='selected'")), t.push(">"), t.push(r(e.get("name"))), e.isDraft() && t.push(r(" - unpublished")), t.push("</option>\n                  ");
                                t.push("\n                </optgroup>\n              ")
                            }
                            t.push("\n            </select>\n          </td>\n        </tr>\n      </table>\n    ")
                        }
                        t.push("\n  ")
                    }
                    t.push("\n</fieldset>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/date_fields"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<fieldset class="event_date">\n  <div class="start_date">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="label">\n          <label>Starts:</label>\n        </td>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="starts_at_date" value="'), t.push(r(this.calendarEvent.getStartDate())), t.push('">\n          <input type="text" class="date" readonly tabindex="-1">\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class="end_date">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="label">\n          <label>Ends:</label>\n        </td>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="ends_at_date" value="'), t.push(r(this.calendarEvent.getSpannedEndDate())), t.push('">\n          <input type="text" class="date" readonly tabindex="-1">\n        </td>\n      </tr>\n    </table>\n  </div>\n</fieldset>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/name_fields"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e;
                    t.push('<fieldset class="event_name">\n  <table border="0" cellspacing="0" cellpadding="0">\n    <tr>\n      <td>\n        <strong>\n          <textarea name="summary" data-behavior="autoresize placeholder submit_on_enter dirty_tracking" rows="1" placeholder="Name the event">'), t.push(r(this.calendarEvent.get("summary"))), t.push("</textarea>\n        </strong>\n      </td>\n    </tr>\n  </table>\n</fieldset>\n"), this.isEditorForTemplate() || (t.push('\n  <fieldset class="event_time">\n    <table>\n      <tr>\n        <td class="time" data-behavior="time_entry">\n          <input type="hidden" name="starts_at_time" value="'), t.push(r(this.calendarEvent.getStartTime())), t.push('">\n          <input type="text" data-behavior="placeholder dirty_tracking" value="'), t.push(r((e = this.calendarEvent.getStartTime()) != null ? e.toFriendlyString() : void 0)), t.push('" placeholder="At what time? (9am, 1pm, etc.)">\n        </td>\n      </tr>\n    </table>\n  </fieldset>\n')), t.push('\n<fieldset class="event_note">\n  <table>\n    <tr>\n      <td class="description">\n        <textarea name="description" data-behavior="autoresize placeholder dirty_tracking" rows="1" placeholder="Add an optional note">'), t.push(r(this.calendarEvent.get("description"))), t.push("</textarea>\n      </td>\n    </tr>\n  </table>\n</fieldset>\n\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/recurrence_fields"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u;
                    t.push('<fieldset class="event_recurrence">\n  <table>\n    <tr>\n      <td class="label">\n        <label>Repeats'), t.push(r(this.calendarEvent.isRecurrence() ? ":" : "?")), t.push("</label>\n      </td>\n      <td>\n        ");
                    if (this.calendarEvent.isRecurrence()) t.push("\n          "), t.push(r(this.recurrenceDescription())), t.push("\n        ");
                    else {
                        t.push('\n          <select name="freq">\n            '), o = {
                            No: "",
                            "Every day": "daily",
                            "Every week": "weekly",
                            "Every month": "monthly",
                            "Every year": "yearly"
                        };
                        for (n in o) i = o[n], t.push('\n              <option value="'), t.push(r(i)), t.push('" '), this.calendarEvent.get("freq") === i && t.push(r("selected")), t.push(">"), t.push(r(n)), t.push("</option>\n            ");
                        t.push('\n          </select>\n\n          <div class="recurrence_end" style="'), this.calendarEvent.isRecurring() || t.push(r("display:none")), t.push('">\n            <ul>\n              <li>\n                <label>\n                  <input type="radio" name="event_recurrence_end" value="forever" '), (!this.calendarEvent.isRecurring() || this.calendarEvent.isRecurringInfinitely()) && t.push(r("checked")), t.push('>\n                  <span class="wrapper">Forever</span>\n                </label>\n              </li>\n              <li>\n                <input type="radio" id="event_recurrence_end" name="event_recurrence_end" value="count" '), !this.calendarEvent.isNew() && this.calendarEvent.get("count") && t.push(r("checked")), t.push('>\n                <span class="wrapper">\n                  For\n                  <select name="count">\n                    ');
                        for (e = s = 2; s <= 30; e = ++s) t.push('\n                      <option value="'), t.push(r(e)), t.push('" '), e === this.calendarEvent.get("count") && t.push(r("selected")), t.push(">"), t.push(r(e)), t.push("</option>\n                    ");
                        t.push('\n                  </select>\n                  <label for="event_recurrence_end" data-role="freqtext">'), t.push(r(this.freqText(this.calendarEvent.getFreq()))), t.push("</label>\n                </span>\n              </li>\n              "), this.isEditorForTemplate() || (t.push('\n                <li>\n                  <label>\n                    <input type="radio" name="event_recurrence_end" value="until" '), !this.calendarEvent.isNew() && this.calendarEvent.get("until_date") && t.push(r("checked")), t.push('>\n                    <span class="wrapper" data-behavior="date_entry">Until\n                      <input type="hidden" name="until_date" value="'), t.push(r(this.calendarEvent.get("until_date") || ((u = this.calendarEvent.getSpannedEndDate()) != null ? u.next() : void 0))), t.push('">\n                      <input type="text" class="date" readonly>\n                    </span>\n                  </label>\n                </li>\n              ')), t.push("\n            </ul>\n          </div>\n        ")
                    }
                    t.push("\n      </td>\n    </tr>\n  </table>\n</fieldset>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/recurrence_prompt"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="recurrence_prompt" data-role="recurrence_prompt">\n  <h4>You\'re '), t.push(r(this.verb)), t.push(" a repeating event.<br>Do you want to "), t.push(r(this.action)), t.push(' all future versions of this event too?</h4>\n  <ul>\n    <li>\n      <label>\n        <input type="radio" name="event_recurrence_choice" value="recurring">\n        <span class="button">Yes, '), t.push(r(this.action)), t.push(" all future versions.</span>\n      </label>\n    </li>\n    "), this.calendarEvent.isRecurring() || (t.push('\n      <li>\n        <label>\n          <input type="radio" name="event_recurrence_choice" value="excluded">\n          <span class="button">No, just '), t.push(r(this.action)), t.push(" this one and keep the others as they are.</span>\n        </label>\n      </li>\n    ")), t.push('\n    <li>\n      <label>\n        <input type="radio" name="event_recurrence_choice" value="cancel">\n        <span class="button">Nevermind, don\'t '), t.push(r(this.action)), t.push(" anything.</span>\n      </label>\n    </li>\n  </ul>\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/subscriber_fields"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<fieldset class="event_subscribers" data-role="subscriber_fields">\n  <div class="subscribable" data-behavior="expandable ignore_collapse_hotkey">\n    <div class="content" data-behavior="toggle_subscribers">\n      <span class="wrapper">\n        <label>\n          <input type="checkbox" name="wants_notification" '), this.calendarEvent.get("wants_notification") && t.push(r('checked="checked"')), t.push(" "), bcx.peopleAndGroups.loadedWithAccesses || t.push(r("disabled")), t.push(">\n          <span>\n            "), this.calendarEvent.isNew() ? t.push('\n              Send other people an email now and a reminder\n              <span class="event_type_conditioned timed">30 minutes before</span>\n              <span class="event_type_conditioned all_day">at 7am the day of</span>\n              the event\n            ') : t.push('\n              Send other people a reminder\n              <span class="event_type_conditioned timed">30 minutes before</span>\n              <span class="event_type_conditioned all_day">at 7am the day of</span>\n              the event\n            '), t.push('\n          </span>\n        </label>\n      </span>\n    </div>\n\n    <div class="expanded_content" data-role="subscriber_options">\n      '), t.push(JST["templates/calendar_event_editor/subscriber_options"]({
                                subscribers: this.calendarEvent.subscribers(),
                                unsubscribers: this.currentBucket.unsubscribers(),
                                bucket: this.currentBucket
                            })), t.push("\n    </div>\n  </div>\n</fieldset>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/subscriber_options"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f;
                    bcx.peopleAndGroups.loadedWithAccesses ? (t.push("\n  "), u = _(this.subscribers).without(this.unsubscribers), t.push("\n  "), a = u.length, t.push("\n  "), e = ((f = this.bucket) != null ? f.people().length : void 0) - this.unsubscribers.length, t.push("\n\n  <ul class='"), e < 2 && t.push("empty"), t.push("'>\n    "), n = a === e || a === 0, t.push('\n    <li><span class="wrapper"><label>\n      <input type="radio" name="subscriber[group]" value=\'everyone\' '), n && t.push('checked="checked"'), t.push("> Everyone on this calendar ("), t.push(r(e)), t.push(" people)\n    </label></span></li>\n\n    "), o = !n && a !== 0, t.push('\n    <li><span class="wrapper"><label>\n      '), o ? (t.push('\n        <input type="radio" name="subscriber[group]" value=\'selected\' '), o && t.push('checked="checked"'), t.push(">\n\n        "), a < 5 ? (t.push("\n          "), s = function () {
                                    var e, t, n;
                                    n = [];
                                    for (e = 0, t = u.length; e < t; e++) i = u[e], n.push(i.get("name"));
                                    return n
                                }().sort().join(", ").replace(/,\s([^,]+)$/, " and $1"), t.push("\n        ")) : (t.push("\n          "), s = function () {
                                    var e, t, n, r;
                                    n = u.slice(0, 4), r = [];
                                    for (e = 0, t = n.length; e < t; e++) i = n[e], r.push(i.get("name"));
                                    return r
                                }().sort().join(", ") + (" and " + (a - 4) + " more"), t.push("\n        ")), t.push("\n        <span>\n          <strong>"), t.push(r(a === 1 ? "1 person" : "" + a + " people")), t.push(":</strong> "), t.push(r(s)), t.push('\n          (<a href="#" data-behavior="slide" data-direction="forward" class="decorated change_subscribers">change</a>)\n        </span>\n      ')) : (t.push('\n        <input type="radio" name="subscriber[group]" value=\'selected\' '), o && t.push('checked="checked"'), t.push(' data-behavior="slide" data-direction="forward">\n        <span data-behavior="slide" data-direction="forward">Select people...</span>\n      ')), t.push('\n    </label></span></li>\n  </ul>\n\n  <p class="subscribers_modified">\n    <strong>Note:</strong>\n    '), e > 1 ? t.push("\n      Only some people can see this calendar, so we've changed your email options to reflect that.\n    ") : t.push("\n      You're the only one who can see this calendar, so we'll just send you a reminder.\n    "), t.push("\n  </p>\n")) : t.push("\n  <p>Loading..</p>\n"), t.push("\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_events_blank_slate"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<article class="blank_slate">\n  <header>\n    <img src="https://d3dma7a8zw52bz.cloudfront.net/assets/blank_slates/blank_slate_icon_events-c96eda67460874050b636a98e7d2d160.png" alt="Text Documents" width="234" height="182">\n  </header>\n\n  <div class="blank_slate_body">\n    '), $("div.project:not([data-behavior~=read_only])").length ? t.push("\n      <h1>Let's add the first event to the project.</h1>\n    ") : (t.push("\n      "), $("header.has_buttons").hide(), t.push("\n      <h1>There&rsquo;s nothing scheduled on this project.</h1>\n    ")), t.push("\n\n    <h3>Events help you keep track of deadlines, vacations, and important milestones to keep your project humming along.</h3>\n  </div>\n</article>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_grid"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C, k, L, A, O, M, _, D, P, H, B, j, F, I, q;
                    t.push('<div class="days_of_week">\n  <div class="days">\n    ');
                    for (g = y = 0; y <= 6; g = ++y) t.push("\n      "), a = (g + CalendarDate.firstDayOfWeek) % 7, t.push('\n      <div class="day" data-behavior="set_start_of_week" data-day="'), t.push(r(a)), t.push('">'), t.push(r(CalendarDate.abbreviatedWeekdayNames[a])), t.push("</div>\n    ");
                    t.push('\n  </div>\n</div>\n\n<div class="grid_content"><div class="weeks">\n'), B = this.display.getWeeks();
                    for (b = 0, S = B.length; b < S; b++) {
                        m = B[b], t.push('\n  <div class="week" data-behavior="calendar_event_drag_area" data-date="'), t.push(r(m[0])), t.push('">\n    '), l = this.display.getSpannedLayoutFor(m[0], m[6]), t.push('\n    <div class="events spanned">\n      '), j = l.rows;
                        for (w = 0, x = j.length; w < x; w++) {
                            h = j[w], t.push('\n        <div class="row">\n          '), F = h.getOccurrences();
                            for (E = 0, T = F.length; E < T; E++) c = F[E], t.push("\n            "), i = c.calendarEvent, t.push('\n            <div class="'), t.push(r(this.classesForSpannedEventFrom(c, m))), t.push('" style="background-color: #'), t.push(r(i.getColor())), t.push('" title="'), t.push(r(i.getBucketType())), t.push(": "), t.push(r(i.getBucketName())), t.push('" data-id="'), t.push(r(i.id)), t.push('" >\n              <span class="event">\n                <span class="title">'), t.push(r(this.emojify(i.get("summary")))), t.push("</span>\n              </span>\n            </div>\n          ");
                            t.push('\n        </div>\n        <div class="spacer"></div>\n      ')
                        }
                        t.push('\n    </div>\n\n    <div class="dates_wrapper">\n      <div class="dates">\n        ');
                        for (p = O = 0, N = m.length; O < N; p = ++O) {
                            u = m[p], t.push("\n          "), s = this.display.getTimedCalendarEventsFor(u), t.push("\n          "), e = this.display.getAllDayCalendarEventsFor(u), t.push("\n          "), n = function () {
                                q = [];
                                for (var e = 0, t = l.getSlotHeight(p); 0 <= t ? e < t : e > t; 0 <= t ? e++ : e--) q.push(e);
                                return q
                            }.apply(this), t.push("\n          "), v = this.display.getTodosFor(u), t.push('\n\n          <div class="'), t.push(r(this.classesForDate(u))), t.push('" data-date="'), t.push(r(u)), t.push('">\n            <div class="day">\n              '), u.equals(this.today) ? t.push("\n                Today\n              ") : u.equals(u.beginningOfMonth()) && (t.push("\n                "), t.push(r(u.getMonthName())), t.push("\n              ")), t.push("\n              "), t.push(r(u.day)), t.push('\n            </div>\n\n            <div class="events spanned">\n              ');
                            for (_ = 0, C = n.length; _ < C; _++) f = n[_], t.push('\n                <div class="spacer"></div>\n              ');
                            t.push('\n            </div>\n\n            <div class="events all_day">\n              ');
                            for (D = 0, k = e.length; D < k; D++) i = e[D], t.push("\n                "), t.push(this.renderCalendarEvent(i)), t.push("\n              ");
                            t.push('\n            </div>\n\n            <div class="events timed">\n              ');
                            for (P = 0, L = s.length; P < L; P++) i = s[P], t.push("\n                "), t.push(this.renderCalendarEvent(i)), t.push("\n              ");
                            t.push("\n            </div>\n\n            ");
                            if (o = v.length) {
                                t.push('\n              <div class="events todos '), s.length || e.length || n.length || t.push(r("no_events")), t.push('">\n                <h5>'), t.push(r(this.pluralize(o, "To-do"))), t.push("</h5>\n\n                ");
                                for (H = 0, A = v.length; H < A; H++) d = v[H], t.push("\n                  "), t.push(this.renderTodo(d)), t.push("\n                ");
                                t.push("\n              </div>\n            ")
                            }
                            t.push("\n          </div>\n        ")
                        }
                        t.push("\n      </div>\n    </div>\n\n  </div>\n")
                    }
                    t.push("\n</div></div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_item_editor"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n;
                    t.push('<div class="balloon balloon_expanded left_side '), t.push(r((e = this.calendarItem) != null ? e.constructor.modelName.toLowerCase() : void 0)), t.push(" "), ((n = this.calendarItem) != null ? typeof n.needsRecurrencePrompt == "function" ? n.needsRecurrencePrompt() : void 0 : void 0) && t.push(r("recurrence_prompt")), t.push('">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n  '), this.calendarItem && (t.push("\n    "), this.calendarItem.constructor.modelName === "Todo" ? (t.push("\n      "), t.push(JST["templates/calendar_todo_editor"](this)), t.push("\n    ")) : (t.push("\n      "), this.calendarEvent = this.calendarItem, t.push("\n      "), this.calendarEvent.needsRecurrencePrompt() ? (t.push("\n        <form>\n          "), t.push(this.renderRecurrencePrompt("move")), t.push("\n        </form>\n      ")) : (t.push("\n        "), t.push(JST["templates/calendar_event_editor"](this)), t.push("\n      ")), t.push("\n    ")), t.push("\n  ")), t.push("\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_jump"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a;
                    t.push('<div class="calendar_jump balloon top_left_side">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n\n  <form>\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="nav"><a href="#" data-direction="backward">&#9664;</a></td>\n        <td>\n          '), e = this.getFirstMonth(), t.push("\n          "), a = [0, 1];
                    for (s = 0, u = a.length; s < u; s++) {
                        i = a[s], t.push("\n            <dl>\n              <dt>"), t.push(r(e.year)), t.push("</dt>\n              ");
                        for (n = o = 0; o <= 11; n = ++o) t.push('\n                <dd>\n                  <a href="#" data-date="'), t.push(r(e)), t.push('" class="'), e.fallsOnSameMonthAs(this.display.getSignificantDate()) && t.push(r("selected")), t.push('">\n                    '), t.push(r(e.getAbbreviatedMonthName())), t.push("\n                  </a>\n                </dd>\n                "), e = e.nextMonth(), t.push("\n              ");
                        t.push("\n            </dl>\n          ")
                    }
                    t.push('\n        </td>\n        <td class="nav"><a href="#" data-direction="forward">&#9654;</a></td>\n      </tr>\n    </table>\n  </form>\n</div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_list"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f;
                    i = this.projects.activeOrDraftWithCalendarItems(), t.push('\n\n<section class="calendars">\n  <div class="new_calendar_event">\n    <a href="#" data-behavior="add_calendar" class="decorated">+ Add a calendar</a>\n  </div>\n\n  <h4>Calendars</h4>\n  ');
                    if (this.calendars.length) {
                        t.push('\n    <ul class="'), this.calendars.haveNotBeenShared() && t.push(r("have_not_been_shared")), t.push('">\n      '), f = this.calendars.models;
                        for (s = 0, u = f.length; s < u; s++) e = f[s], t.push('\n        <li class="calendar" id="calendar_'), t.push(r(e.id)), t.push('" data-bucket-type="calendar" data-bucket-id="'), t.push(r(e.id)), t.push('">\n          <span class="swatch" style="background-color: #'), t.push(r(e.getColor())), t.push('"><a href="#" class="'), this.display.getBucketVisibility(e) && t.push(r("active")), t.push('" data-behavior="toggle_bucket"></a></span>\n          <a href="#" data-behavior="zoom_in" title="Only show this calendar">'), t.push(r(this.emojify(e.get("name")))), t.push('</a>\n          <a href="#" data-behavior="edit_bucket" title="Change this calendar\'s name, color, and more">Settings</a>\n        </li>\n      ');
                        t.push("\n    </ul>\n    "), this.calendars.haveNotBeenShared() && t.push('\n      <div class="calendar_list_blank_slate">\n        <div class="blank_slate_arrow"></div>\n        <div>\n          <h5>Share your calendars</h5>\n          <p>Click Settings to share your calendars with other people.</p>\n        </div>\n      </div>\n    '), t.push("\n  ")
                    } else t.push('\n    <div class="calendar_list_blank_slate no_calendars">\n      <div class="blank_slate_arrow"></div>\n      <div>\n        <h5>Add your first calendar</h5>\n        <p>Keep track of events that arent part of a particular project.</p>\n      </div>\n    </div>\n  ');
                    t.push("\n</section>\n\n");
                    if (i.length) {
                        t.push('\n  <section class="calendars">\n    <h4>Projects</h4>\n    <ul>\n      ');
                        for (o = 0, a = i.length; o < a; o++) n = i[o], t.push('\n        <li data-bucket-type="project" data-bucket-id="'), t.push(r(n.id)), t.push('">\n          <span class="swatch" style="background-color: #'), t.push(r(n.getColor())), t.push('"><a href="#" class="'), this.display.getBucketVisibility(n) && t.push(r("active")), t.push('" data-behavior="toggle_bucket"></a></span>\n          <a href="#" data-behavior="zoom_in" title="Only show this calendar">'), t.push(r(this.emojify(n.get("name")))), n.isDraft() && t.push(r(" - unpublished")), t.push('</a>\n          <a href="#" data-behavior="edit_bucket" title="Change this calendar\'s name, color, and more">Settings</a>\n        </li>\n      ');
                        t.push("\n    </ul>\n  </section>\n")
                    }
                    t.push('\n\n<section class="calendar_feeds">\n  <p><a href="/'), t.push(r(bcx.currentAccountSlug)), t.push('/calendar_feeds" class="decorated" data-default-stack="true">Subscribe to iCal</a></p>\n</section>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_navigation"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<button class="toggle_calendar_list hide action_button" data-behavior="toggle_calendar_list">\n  <span class="hide">&#8676; Hide calendar list</span>\n</button>\n\n'), this.display.isZoomedIn() ? t.push('\n  <button class="zoom_out show action_button" data-behavior="zoom_out">\n    <span class="show">Show all calendars</span>\n  </button>\n') : t.push('\n  <button class="toggle_calendar_list show action_button" data-behavior="toggle_calendar_list">\n    <span class="show">Show a list of calendars &#8677;</span>\n  </button>\n'), t.push("\n\n<nav>\n  "), this.display.firstWeekContainsToday() || t.push('\n    <a href="#" data-behavior="navigate calendar_event_drag_area" data-direction="today">Today</a>\n  '), t.push('\n\n  <button data-behavior="navigate calendar_event_drag_area" data-direction="backward" class="action_button">&#9664;</button><button data-behavior="navigate calendar_event_drag_area" data-direction="forward" class="action_button">&#9654;</button>\n</nav>\n\n<h1 data-behavior="expandable" class="calendar_title">\n  <a href="#" data-behavior="jump_to_month">\n    '), this.display.isZoomedIn() ? (t.push("\n      <strong>"), t.push(r(this.display.getZoomedInBucketTitle())), t.push("</strong><br>\n      <span>"), t.push(r(this.display.getTitle())), t.push("</span>\n    ")) : (t.push("\n      "), t.push(r(this.display.getTitle())), t.push("\n    ")), t.push("\n\n    "), this.showingSpinner && t.push('\n      <span class="busy"></span>\n    '), t.push('\n  </a>\n\n  <div data-autoview-name="calendar_jump"></div>\n</h1>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_todo"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="event todo '), this.todo.get("completed") && t.push(r("complete")), t.push('" data-id="'), t.push(r(this.todo.id)), t.push('" data-behavior="calendar_todo">\n  <span class="wrapper event">\n    <input type="checkbox" value="1" '), this.todo.get("completed") && t.push(r('checked="checked"')), t.push(' data-behavior="toggle_todo" data-url="'), t.push(r(this.todo.togglePath())), t.push('">\n\n    <span class="content"\n          title="['), t.push(r(this.todo.bucket().get("name"))), t.push("] "), t.push(r(this.todo.get("content"))), t.push('"\n          style="color:#'), t.push(r(this.todo.bucket().getColor())), t.push('">\n\n      '), t.push(r(this.emojify(this.truncateWord(this.todo.get("content"), 5)))), t.push("\n    </span>\n  </span>\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/calendar_todo_editor"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    this.todo = this.calendarItem, t.push('\n\n<header>\n  <h4>\n    <span>Project: <strong><a href="'), t.push(r(this.todo.bucket().url())), t.push('" data-default-stack="true">'), t.push(r(this.todo.bucket().get("name"))), t.push('</a></strong></span>\n    <span>List: <strong><a href="'), t.push(r(this.todo.todolist().showPath())), t.push('" data-default-stack="true">'), t.push(r(this.todo.todolist().get("name"))), t.push("</a></strong></span>\n  </h4>\n</header>\n\n<section>\n  "), t.push(JST["templates/todo"](this)), t.push("\n</section>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/date_display"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y;
                    t.push('<section class="calendar_events">\n  ');
                    if (this.events.length) {
                        t.push("\n    ");
                        if (this.upcomingEvents.length) {
                            t.push('\n      <div class="upcoming_events">\n        <h2>Upcoming events</h2>\n      </div>\n\n      '), this.upcomingEvents.today && (t.push('\n        <section class="group today upcoming_events">\n          <header>\n            <h2>Today</h2>\n          </header>\n\n          '), t.push(r(this.renderDateAndEvents.apply(this, this.upcomingEvents.today[0]))), t.push("\n        </section>\n      ")), t.push("\n\n      ");
                            if (this.upcomingEvents.thisWeek) {
                                t.push('\n        <section class="calendar_events group this_week upcoming_events">\n          <header>\n            <h2>The rest of the week</h2>\n          </header>\n\n          '), p = this.upcomingEvents.thisWeek;
                                for (u = 0, l = p.length; u < l; u++) d = p[u], e = d[0], n = d[1], t.push("\n            "), t.push(r(this.renderDateAndEvents(e, n))), t.push("\n          ");
                                t.push("\n        </section>\n      ")
                            }
                            t.push("\n\n      ");
                            if (this.upcomingEvents.byMonth) {
                                t.push("\n        "), v = this.upcomingEvents.byMonth;
                                for (i in v) {
                                    o = v[i], t.push("\n          "), s = CalendarDate.parse(i), t.push('\n\n          <section class="calendar_events group month upcoming_events">\n            <header>\n              <h2>\n                '), s.occursThisYear() ? (t.push("\n                  "), t.push(r(s.getMonthName())), t.push("\n                ")) : (t.push("\n                  "), t.push(r(s.getMonthName())), t.push(", "), t.push(r(s.year)), t.push("\n                ")), t.push("\n              </h2>\n            </header>\n\n            ");
                                    for (a = 0, c = o.length; a < c; a++) m = o[a], e = m[0], n = m[1], t.push("\n              "), t.push(r(this.renderDateAndEvents(e, n))), t.push("\n            ");
                                    t.push("\n          </section>\n        ")
                                }
                                t.push("\n      ")
                            }
                            t.push("\n    ")
                        } else t.push("\n      <section class='upcoming_events upcoming_events_blank_slate'>\n        <h2>Upcoming events</h2>\n\n        <div class=\"notice\">\n          <p>Nothing&rsquo;s scheduled right now.</p>\n        </div>\n      </section>\n    ");
                        t.push("\n\n\n    ");
                        if (this.pastEvents.length) {
                            t.push("\n      <div class='past_events'>\n        <h2>Past events</h2>\n      </div>\n\n      "), g = this.pastEvents.byMonth;
                            for (i in g) {
                                o = g[i], t.push("\n        "), s = CalendarDate.parse(i), t.push('\n\n        <section class="calendar_events group month past_events">\n          <header>\n            <h2>\n              '), s.occursThisYear() ? (t.push("\n                "), t.push(r(s.getMonthName())), t.push("\n              ")) : (t.push("\n                "), t.push(r(s.getMonthName())), t.push(", "), t.push(r(s.year)), t.push("\n              ")), t.push("\n            </h2>\n          </header>\n\n          ");
                                for (f = 0, h = o.length; f < h; f++) y = o[f], e = y[0], n = y[1], t.push("\n            "), t.push(r(this.renderDateAndEvents(e, n))), t.push("\n          ");
                                t.push("\n        </section>\n      ")
                            }
                            t.push("\n    ")
                        }
                        t.push("\n  ")
                    } else t.push("\n    "), t.push(JST["templates/calendar_events_blank_slate"]({})), t.push("\n  ");
                    t.push("\n</section>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/date_group"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push("<header>\n  <div>\n    <h2>"), t.push(r(this.date.getMonthName())), t.push(" "), t.push(r(this.date.day)), t.push(" "), this.date.fallsOnSameYearAs(this.today) || t.push(r(this.date.year)), t.push("</h2>\n    "), this.date.is(this.today) ? t.push("\n      Today\n    ") : this.date.is(this.today.previous()) ? t.push("\n      Yesterday\n    ") : this.date.fallsOnSameWeekAs(this.today) && (t.push("\n      "), t.push(r(this.date.getWeekdayName())), t.push("\n    ")), t.push('\n  </div>\n</header>\n\n<div class="date_group" datetime="'), t.push(r(this.date)), t.push('"></div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/day_of_date"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f, l;
                    t.push('<article class="calendar_event">\n  <header>\n    '), this.isTemplate ? (t.push('\n      <time>\n        <span class="day" style="background-color: #'), t.push(r(this.color)), t.push('">'), t.push(r(CalendarDate.abbreviatedWeekdayNames[this.day])), t.push("</span>\n      </time>\n    ")) : (t.push('\n      <time datetime="'), t.push(r(this.day)), t.push('">\n        <span class="day_of_week">'), t.push(r(this.day.getWeekdayName())), t.push('</span><span class="month">'), t.push(r(this.day.getMonthName())), t.push('</span>\n        <span class="day" style="background-color: #'), t.push(r(this.color)), t.push('">'), t.push(r(this.day.day)), t.push("</span>\n      </time>\n    ")), t.push("\n  </header>\n\n  ");
                    if (this.calendarEvents.length) {
                        t.push("\n    <ul>\n      "), f = _(this.calendarEvents).sortBy(function (e) {
                            return !e.isTimed()
                        });
                        for (s = 0, u = f.length; s < u; s++) {
                            n = f[s], t.push("\n        <li id='"), t.push(r(n.constructor.modelName)), t.push("_"), t.push(r(n.id)), t.push("'>\n\n          "), n.isAllDay() || (t.push('\n            <time datetime="'), t.push(r(n.get("starts_at"))), t.push('" style="color: #'), t.push(r(this.color)), t.push('">'), t.push(r(n.formattedTime())), t.push("</time>\n          ")), t.push('\n\n          <a href="'), t.push(n.showPath()), t.push('">'), t.push(r(this.emojify(n.summary()))), t.push("</a>\n\n          ");
                            if (e = n.get("comments_count")) t.push('\n            <span class="pill comments"><a href="'), t.push(r(n.showPath())), t.push('">'), t.push(r(this.pluralize(e, "comment"))), t.push("</a></span>\n          ");
                            t.push("\n        </li>\n      ")
                        }
                        t.push("\n    </ul>\n  ")
                    }
                    t.push("\n\n  ");
                    if (this.todos.length) {
                        t.push('\n    <ul class="todos">\n      <li>\n        <h5>'), t.push(r(this.pluralize(this.todos.length, "To-do"))), t.push("</h5>\n      </li>\n      "), l = _(this.todos).sortBy(function (e) {
                            return bcx.todos.comparator(e)
                        });
                        for (o = 0, a = l.length; o < a; o++) i = l[o], t.push("\n        <li>"), t.push(JST["templates/todo"]({
                                    todo: i,
                                    pluralize: this.pluralize,
                                    emojify: this.emojify,
                                    context: "agenda",
                                    isTemplate: this.isTemplate
                                })), t.push("</li>\n      ");
                        t.push("\n    </ul>\n  ")
                    }
                    t.push("\n</article>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/draft_notice"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div id="draft_notice" class="workspace_notice initial_load">\n  <div>\n    <section class="draft_description">\n      <h1>Ready to publish this project?</h1>\n      <p>\n        Since you\'re using a template, review the project name, adjust the dates if necessary, and invite anybody who\'s missing.\n        When you\'re done, click publish and we\'ll notify the people you invited.\n      </p>\n\n      <div class="submit">\n        <button data-behavior="publish_draft_project" class="action_button green">Publish this project</button> or\n        <a href="'), t.push(r(bcx.currentBucket.urlForTrash())), t.push('" data-confirm="Are you sure you want to completely delete this unpublished project?" data-method="post" data-remote="true" rel="nofollow">Delete it instead</a>\n      </div>\n    </section>\n\n    <section class="draft_confirmation">\n      <h1>Your project is live!</h1>\n      <p data-behavior=\'recipients_notified_notice\'>\n        Everyone added to this project has been notified.\n      </p>\n    </section>\n\n    <span class="arrow"></span>\n    <span class="arrow"></span>\n  </div>\n</div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/form_fields"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f = this;
                    t.push('<fieldset class="event_calendar">\n  ');
                    if (this.bucketId != null) t.push('\n    <input type="hidden" name="bucket" value="'), t.push(r(this.bucketType)), t.push(":"), t.push(r(this.bucketId)), t.push('">\n  ');
                    else {
                        t.push("\n    "), s = this.display.zoomedInBucket(), t.push("\n\n    ");
                        if (this.calendarEvent.isNew() && s) t.push('\n      <input type="hidden" name="bucket" value="'), t.push(r(s.constructor.modelName)), t.push(":"), t.push(r(s.id)), t.push('">\n      '), t.push(r("" + s.constructor.modelName + ": " + s.get("name"))), t.push("\n    ");
                        else {
                            t.push("\n      "), i = this.calendarEvent.isNew() ? (a = this.display.zoomedInBucket()) != null ? a : this.lastUsedBucket : this.calendarEvent.bucket(), t.push("\n\n      <select name=\"bucket\" data-behavior='bucket_selector' "), bcx.peopleAndGroups.loadedWithAccesses || t.push(r("disabled")), t.push('>\n        <optgroup label="Calendars">\n          '), bcx.calendars.each(function (e) {
                                return t.push('\n            <option value="Calendar:'), t.push(r(e.id)), t.push('" '), i === e && t.push(r("selected='selected'")), t.push(">"), t.push(r(e.get("name"))), t.push("</option>\n          ")
                            }), t.push("\n        </optgroup>\n\n        "), n = bcx.projects.activeOrDraft(), t.push("\n        ");
                            if (n.length) {
                                t.push('\n          <optgroup label="Projects">\n            ');
                                for (o = 0, u = n.length; o < u; o++) e = n[o], t.push('\n              <option value="Project:'), t.push(r(e.id)), t.push('" '), i === e && t.push(r("selected='selected'")), t.push(">"), t.push(r(e.get("name"))), e.isDraft() && t.push(r(" - unpublished")), t.push("</option>\n            ");
                                t.push("\n          </optgroup>\n        ")
                            }
                            t.push("\n      </select>\n    ")
                        }
                        t.push("\n  ")
                    }
                    t.push('\n</fieldset>\n\n<fieldset class="event_date">\n  <div class="unspanned_fields">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="starts_at_date" value="'), t.push(r(this.calendarEvent.getStartDate())), t.push('">\n          <input type="text" class="date" readonly>\n        </td>\n      </tr>\n    </table>\n    <p>\n      <a href="#" class="decorated" data-behavior="spanned_toggle">Lasts multiple days</a>\n    </p>\n  </div>\n\n  <div class="spanned_fields">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="spanned_starts_at_date" value="'), t.push(r(this.calendarEvent.getStartDate())), t.push('">\n          <input type="text" class="date" readonly>\n        </td>\n        <td class="divider">to</td>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="spanned_ends_at_date" value="'), t.push(r(this.calendarEvent.getSpannedEndDate())), t.push('">\n          <input type="text" class="date" readonly>\n        </td>\n      </tr>\n    </table>\n    <p>\n      <a href="#" class="decorated" data-behavior="spanned_toggle">Lasts one day</a>\n    </p>\n  </div>\n\n  '), this.calendarEvent.isRecurrence() || t.push('\n    <p>\n      <a href="#" data-behavior="slide" data-direction="forward" data-slide-index="1" class="decorated change_subscribers">Repeats...</a>\n    </p>\n  '), t.push("\n</fieldset>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/image_enlarger"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a;
                    t.push('<div id="image_enlarger" class="'), this.images.length > 1 && t.push(r("with_nav")), t.push('">\n  <button class="close"></button>\n\n  '), u = this.images;
                    for (n = 0, s = u.length; n < s; n++) e = u[n], t.push('\n    <figure id="enlarged_image_'), t.push(r(e.id)), t.push('" style="'), e !== this.active && t.push(r("display:none;")), t.push('">\n      <div class="table_wrapper"><div class="cell_wrapper">\n        <img class="enlarged" data-behavior="enlarged_image" src="'), t.push(r(e.thumbnail)), t.push('" data-large-src="'), t.push(r(e.large)), t.push('" data-original-src="'), t.push(r(e.original)), t.push('" width="'), t.push(r(e.width)), t.push('" height="'), t.push(r(e.height)), t.push('">\n        <figcaption>\n          '), t.push(r(e.filename)), t.push('\n          <a href="'), t.push(r(e.original)), t.push('" class="download simple_outline" data-stacker="false" target="_blank">\n            View full size\n          </a>\n        </figcaption>\n      </div></div>\n    </figure>\n  ');
                    t.push("\n\n  ");
                    if (this.images.length > 1) {
                        t.push('\n    <nav>\n      <div class="images" data-behavior="scroll_view">\n        <table data-behavior="scroll_content">\n          <tr>\n            '), a = this.images;
                        for (i = 0, o = a.length; i < o; i++) e = a[i], t.push('\n              <td>\n                <img\n                  class="'), e === this.active && t.push(r("activated")), t.push('"\n                  src="'), t.push(r(e.thumbnail)), t.push('"\n                  title="'), t.push(r(e.filename)), t.push('"\n                  width="'), t.push(r(e.width)), t.push('"\n                  height="'), t.push(r(e.height)), t.push('"\n                  data-behavior="activate"\n                  data-image-id="'), t.push(r(e.id)), t.push('"\n                >\n              </td>\n            ');
                        t.push('\n          </tr>\n        </table>\n      </div>\n\n      <button class="left arrow" data-behavior="scroll_reverse"></button>\n      <button class="right arrow" data-behavior="scroll_forward"></button>\n    </nav>\n  ')
                    }
                    t.push("\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/invitee_field"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="autocomplete_people">\n  '), this.model.isEnabled() && (t.push("\n    "), this.model.isGroup() ? (t.push('\n      <input type="hidden" name="groups[][id]" value="'), t.push(r(this.model.get("group_id"))), t.push('">\n    ')) : (t.push('\n      <input type="hidden" name="invitees[][email_address]" data-role="email_address_input" value="'), t.push(r(this.model.get("email_address"))), t.push('">\n    ')), t.push("\n  ")), t.push('\n  <div class="icon"></div>\n  <div class="input">\n    '), this.readOnly() ? (t.push('\n      <input type="text" value="'), t.push(r(this.model.get("name") || this.model.get("email_address"))), t.push('" spellcheck="false" readonly>\n      <input type="text" style="background:white; opacity:0;" disabled>\n    ')) : (t.push('\n      <input type="text" value="'), t.push(r(this.model.get("name") || this.model.get("email_address"))), t.push('" data-behavior="input_change_emitter" data-role="human_input" spellcheck="false">\n    ')), t.push('\n  </div>\n  <div class="suggestions" data-role="suggestions_view">\n    <!-- templates/autocomplete_people_suggestions -->\n  </div>\n  '), this.removable() && t.push('\n    <a class="remove" data-behavior="remove_invitee"></a>\n  '), t.push("\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/invitee_field_group"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="group invitee field">\n  <input type="hidden" name="groups[][id]" value="'), t.push(r(this.model.get("group_id"))), t.push('">\n  <div class="icon"></div>\n  <div class="input">\n    <input type="text" value="'), t.push(r(this.model.get("name"))), t.push('" spellcheck="false" readonly>\n    <input type="text" style="background:white; opacity:0;" disabled>\n  </div>\n  <a class="remove" data-behavior="remove_group"></a>\n</div>\n\n'), this.enabled.length && t.push('\n  <div data-role="enabled_invitees"></div>\n'), t.push("\n\n"), this.disabled.length && (t.push("\n  "), this.enabled.length === 0 ? t.push("\n    <h3>Everyone in this group is already on the project</h3>  \n  ") : (t.push("\n    "), this.disabled.length === 1 ? t.push("\n      <h3>One person is already on the project</h3>\n    ") : t.push("\n      <h3>These people are already on the project</h3>\n    "), t.push("\n  ")), t.push('\n  <div data-role="disabled_invitees"></div>\n')), t.push("\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/member_field"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div class="autocomplete_people">\n  <div class="icon"></div>\n  <div class="input">\n    <input type="hidden" name="memberships[][person_id]" value="" data-role="person_id_input">\n\n    '), this.readOnly() ? (t.push('\n      <input type="text" value="'), t.push(r(this.model.get("name"))), t.push('" spellcheck="false" readonly>\n      <input type="text" style="background:white; opacity:0;" disabled>\n    ')) : (t.push('\n      <input type="text" value="'), t.push(r(this.model.get("name"))), t.push('" data-behavior="input_change_emitter" data-role="human_input" spellcheck="false">\n    ')), t.push('\n  </div>\n  <div class="suggestions" data-role="suggestions_view">\n    <!-- templates/autocomplete_people_suggestions -->\n  </div>\n  '), this.removable() && t.push('\n    <a class="remove" data-behavior="remove_member"></a>\n  '), t.push("\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/membership_suggestions"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u;
                    t.push('<ol class="suggestions">\n  ');
                    if (((s = this.results.enabledOptions) != null ? s.length : void 0) || ((o = this.results.disabledOptions) != null ? o.length : void 0)) {
                        t.push("\n    ");
                        if (this.results.enabledOptions.length) {
                            t.push("\n      "), u = this.results.enabledOptions;
                            for (n = 0, i = u.length; n < i; n++) e = u[n], t.push('\n        <li class="'), e === this.selected && t.push(r("selected")), t.push(' option suggestion" data-behavior="select_suggestion" data-suggestion-id="'), t.push(r(e.id)), t.push('">\n          <span class="name">'), t.push(r(e.get("name"))), t.push('</span> <span class="email">'), t.push(r(e.get("email_address"))), t.push("</span>\n        </li>\n      ");
                            t.push("\n    ")
                        } else t.push('\n      <li class="disabled option hint suggestion">\n        <span class="name">'), t.push(r(this.results.disabledOptions[0].get("name"))), t.push("</span> <span>is already in this group</span>\n      </li>\n    ");
                        t.push("\n  ")
                    } else t.push("\n    "), this.showUnknownMessage && t.push('\n      <li class="unknown hint suggestion">\n        This person isnt in the system yet.\n      </li>\n    '), t.push("\n  ");
                    t.push("\n</ol>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/new_superpowers"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<table border="0" cellspacing="0" cellpadding="0" id="invitee-'), t.push(r(this.invitee.emailAddressAlphanumeric())), t.push('">\n  <tr data-behavior="set_permission_checkboxes">\n    <td>\n      <strong>'), t.push(r(this.invitee.get("email_address"))), t.push('</strong>\n    </td>\n\n    <td class="option projects">\n      <input name="permissions['), t.push(r(this.invitee.get("email_address"))), t.push('][can_create_projects]" type="hidden" value="0">\n      <input name="permissions['), t.push(r(this.invitee.get("email_address"))), t.push('][can_create_projects]" data-behavior="can_create_projects_permission" type="checkbox" value="1">\n    </td>\n\n    <td class="option admin">\n      <input name="permissions['), t.push(r(this.invitee.get("email_address"))), t.push('][admin]" type="hidden" value="0">\n      <input name="permissions['), t.push(r(this.invitee.get("email_address"))), t.push('][admin]" data-behavior="admin_permission" type="checkbox" value="1">\n    </td>\n  </tr>\n</table>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/pending_attachment"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<li data-dirty>\n  <a class="remove" data-behavior="remove" href="#"><span>Remove</span></a>\n  <div class="icon"><img src="'), t.push(r(this.iconPath)), t.push('" class="file_icon" width="32" height="32"></div>\n  <span class="name">'), t.push(r(this.file.name)), t.push('</span>\n  <div class="progress" data-behavior="progress"><div></div></div>\n  <input type="hidden" name="attachments[][id]" value="'), t.push(r(this.file.id)), t.push('">\n  <input type="hidden" name="attachments[][_destroy]" value="">\n  <input type="hidden" name="attachments[][name]" value="'), t.push(r(this.file.name)), t.push('">\n  <input type="hidden" name="attachments[][content_type]" value="'), t.push(r(this.file.type)), t.push('">\n  <input type="hidden" name="attachments[][token]" value="">\n  '), this.file.link != null && (t.push('\n    <input type="hidden" name="attachments[][link][source]" value="'), t.push(r(this.file.link.source)), t.push('">\n    <input type="hidden" name="attachments[][link][url]" value="'), t.push(r(this.file.link.url)), t.push('">\n    <input type="hidden" name="attachments[][link][key]" value="'), t.push(r(this.file.link.key)), t.push('">\n    <input type="hidden" name="attachments[][link][size]" value="'), t.push(r(this.file.link.size)), t.push('">\n  ')), t.push('\n\n  <div data-behavior="taggings pending_taggings" class="taggings">\n    <ul class="tags"></ul>\n    <div class="edit_taggings" data-behavior="expandable expand_exclusively edit_taggings">\n      <a href="#" data-behavior="expand_on_click">Label...</a>\n    </div>\n  </div>\n</li>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/pending_invitee"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<li data-email-address="'), t.push(r(this.invitee.get("email_address"))), t.push('">\n  <img class="avatar" src="'), t.push(r(this.invitee.get("avatar_url") || "/assets/icons/avatar.gif")), t.push('">\n  <div class="text">\n    '), t.push(r(this.invitee.get("name") || this.invitee.get("email_address"))), t.push(' <a class="remove" data-behavior="remove"></a>\n  </div>\n  '), this.id ? (t.push('\n    <input type="hidden" name="invitees[][id]" value="'), t.push(r(this.invitee.id)), t.push('">\n  ')) : (t.push('\n    <input type="hidden" name="invitees[][email_address]" value="'), t.push(r(this.invitee.get("email_address"))), t.push('">\n  ')), t.push("\n</li>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/pending_tagging"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<li data-url="'), t.push(r(this.taggingId)), t.push('">\n  <input type="hidden" name="attachments[][tag_names][]" value="'), t.push(r(this.tagName)), t.push('">\n  <span class="label" data-role="tag_name">'), t.push(r(this.tagName)), t.push('</span>\n  <a href="#" data-behavior="remove_tagging" class="remove_tagging"><span>Remove label</span></a>\n  <span class="label_color"></span>\n</li>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/people_suggestions"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s;
                    s = this.suggestions;
                    for (n = 0, i = s.length; n < i; n++) e = s[n], t.push('\n  <li class="'), e === this.selected && t.push(r("selected")), t.push(' suggestion suggestion" data-behavior="select_suggestion" data-suggestion-id="'), t.push(r(e.id)), t.push('">\n    '), e.isGroup() ? (t.push('\n      <strong class="name">'), t.push(r(e.get("name"))), t.push("</strong> <span>Company with "), t.push(r(e.get("person_ids").length)), t.push(" people</span>\n    ")) : (t.push('\n      <span class="name">'), t.push(r(e.get("name"))), t.push('</span> <span class="email">'), t.push(r(e.get("email_address"))), t.push("</span>\n    ")), t.push("\n  </li>\n");
                    t.push("\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/project_calendar_event_editor"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e;
                    this.calendarEvent.isNew() ? t.push('<article class="calendar_event new" data-behavior="expandable hide_buttons_on_expand">') : t.push('<article class="calendar_event edit">'), t.push('\n  <div class="expanded_content bubble">\n    <form class="calendar_event_editor_form '), this.calendarEvent.isSpanned() && t.push(r("spanned")), t.push('">\n      <div data-behavior="expandable recurrence_prompt">\n        <div class="collapsed_content">\n          <header class="text_entry">\n            '), t.push(JST["templates/calendar_event_editor/name_fields"](this)), t.push("\n            "), t.push(JST["templates/calendar_event_editor/bucket_fields"]({
                                calendarEvent: this.calendarEvent,
                                bucketType: this.bucketType,
                                bucketId: this.bucketId
                            })), t.push("\n            "), this.isEditorForTemplate() ? (t.push("\n              "), t.push(JST["templates/template_calendar_event_form_fields"]({
                                    calendarEvent: this.calendarEvent,
                                    bucketType: this.bucketType,
                                    bucketId: this.bucketId
                                })), t.push("\n            ")) : (t.push("\n              "), t.push(JST["templates/calendar_event_editor/date_fields"]({
                                    calendarEvent: this.calendarEvent
                                })), t.push("\n            ")), t.push("\n            "), t.push(JST["templates/calendar_event_editor/recurrence_fields"](this)), t.push("\n          </header>\n          <footer>\n            "), e = this.calendarEvent.isNew() ? "" : "&subscribable_id=" + this.calendarEvent.id, t.push('\n            <div data-behavior="lazy_load_subscribers" data-url="/'), t.push(r("" + this.bucketType.toLowerCase() + "s")), t.push("/"), t.push(r(this.bucketId)), t.push("/subscribers?subscribable_type=CalendarEvent"), t.push(r(e)), t.push('"></div>\n            <p class="submit">\n              '), this.calendarEvent.isNew() ? t.push('\n                <input type="submit" value="Add this event", class=\'action_button green\'>\n              ') : t.push('\n                <input type="submit" value="Save changes", class=\'action_button green\'>\n              '), t.push('\n              or <a href="#" class="cancel" data-role="cancel" data-behavior="cancel">Cancel</a>\n            </p>\n          </footer>\n        </div>\n        <div class="expanded_content" data-role="expanded_recurrence_prompt">\n          '), t.push(JST["templates/calendar_event_editor/recurrence_prompt"](this)), t.push("\n        </div>\n      </div>\n    </form>\n  </div>\n</article>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/project_dates"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f, l, c, h;
                    s = this.truncatedUpcomingEventsGroupedByDate(), t.push("\n\n");
                    if (!_(s).isEmpty()) {
                        t.push('\n  <section class="calendar_events sidebar" data-collection-name=\'calendar_events\'>\n    <article class="note">\n      <div class="note_body">\n        <h1><a href="'), t.push(r((l = bcx.currentProject) != null ? l.url() : void 0)), t.push('/calendar_events">Upcoming Events</a></h1>\n\n        ');
                        for (o = 0, a = s.length; o < a; o++) {
                            e = s[o], t.push("\n          <h5>"), t.push(r(this.dateLabelFor(CalendarDate.parse(e[0])))), t.push('</h5>\n          <ul class="project_dates">\n            '), c = _(e[1]).sortBy(function (e) {
                                return !e.isTimed()
                            });
                            for (u = 0, f = c.length; u < f; u++) n = c[u], t.push('\n              <li><a href="'), t.push(r(n.showPath())), t.push('">'), t.push(r(this.emojify(n.summary()))), t.push("</a> <time>"), n.isTimed() && t.push(r("" + n.formattedTime())), t.push("</time> "), t.push(r(this.untilDateFor(n))), t.push("</li>\n            ");
                            t.push("\n          </ul>\n        ")
                        }
                        t.push("\n\n        "), (i = this.moreUpcomingEventsCount()) > 0 && (t.push('\n          <p class="more_events"><a href="'), t.push(r((h = bcx.currentProject) != null ? h.url() : void 0)), t.push("/calendar_events\" class='decorated'>All upcoming events...</a></p>\n        ")), t.push("\n      </div>\n    </article>\n  </section>\n")
                    }
                    t.push("\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/project_editor"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o;
                    t.push('<div class="balloon top_right_side">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n\n  <form>\n    <header>\n      <fieldset class="calendar_settings">\n        <p>Choose a color</p>\n        <div class="swatches">\n          '), o = bcx.bucketColors;
                    for (n = i = 0, s = o.length; i < s; n = ++i) e = o[n], t.push('\n            <input type="radio" id="'), t.push(r(this.id)), t.push("_swatch_"), t.push(r(n)), t.push('" name="color" value="'), t.push(r(e)), t.push('"'), this.project.getColor() === e && t.push(r(" checked")), t.push('>\n            <label class="swatch" for="'), t.push(r(this.id)), t.push("_swatch_"), t.push(r(n)), t.push('" style="background-color: #'), t.push(r(e)), t.push('"></label>\n          ');
                    t.push('\n        </div>\n      </fieldset>\n    </header>\n    \n    <section>\n      <h4>Who can see this calendar?</h4>\n      <p>Only people who can see this project can see this calendar. You can <a href="'), t.push(r(this.project.accessesUrl())), t.push('" class="decorated" data-stacker=\'false\'>change who has access</a> on the project page.</p>\n    </section>\n    \n    <footer>      \n      <p class="submit">\n        <input type="submit" value="Save changes">\n        or <a href="#" class="cancel" data-behavior="cancel">Close</a>\n      </p>\n    </footer>\n  </form>\n</div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/project_toolbar"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a;
                    t.push('<div class="tools'), this.visibleToolsInProject().length && t.push(r(" has_tools_in_project")), this.visibleToolsNotInProject().length && t.push(r(" has_tools_not_in_project")), t.push('">\n  \n  ');
                    if (this.visibleToolsInProject().length) {
                        t.push('\n    <div class="group in_project">\n      '), u = this.tools;
                        for (n = 0, s = u.length; n < s; n++) e = u[n], t.push("\n        "), e.isInProject() && (t.push('\n          <a href="'), t.push(r(e.url())), t.push('" data-tool-name="'), t.push(r(e.name)), t.push('">\n            <span class=""><strong>'), t.push(r(e.pluralizedCount())), t.push("</strong></span>\n          </a>\n        ")), t.push("\n      ");
                        t.push("\n    </div>\n  ")
                    }
                    t.push("\n\n  ");
                    if (this.visibleToolsNotInProject().length) {
                        t.push('\n    <div class="group not_in_project">\n      <span class="label">Add the first:</span>\n      '), a = this.tools;
                        for (i = 0, o = a.length; i < o; i++) e = a[i], t.push("\n        "), e.isNotInProject() && (t.push('\n          <a href="'), t.push(r(e.url())), t.push('" data-tool-name="'), t.push(r(e.name)), t.push('">\n            <span class="">'), t.push(r(e.pitch)), t.push("</span>\n          </a>\n        ")), t.push("\n      ");
                        t.push("\n    ")
                    }
                    t.push("\n  </div>\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/relative_date_picker"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o;
                    t.push('<header>\n  <a href=\'#\' title="Previous" class="prev" data-behavior=\'previous\'><span>Previous</span></a>\n  <a href=\'#\' title="Next" class="next" data-behavior=\'next\'><span>Next</span></a>\n  <div class="title">Week '), t.push(r(this.current_week + 1)), t.push("</div>\n</header>\n\n<ul>\n  "), o = CalendarDate.weekdayNames;
                    for (n = i = 0, s = o.length; i < s; n = ++i) e = o[n], t.push('\n    <li>\n      <a href="#" class=\''), this.current_week === this.due_week && this.due_wday === n && t.push(r("active")), t.push("' data-wday='"), t.push(r(n)), t.push("'>"), t.push(r(e)), t.push("</a>\n    </li>\n  ");
                    t.push("\n</ul>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/subscribers"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f, l, c, h, p, d = [].indexOf || function (e) {
                            for (var t = 0, n = this.length; t < n; t++)
                                if (t in this && this[t] === e) return t;
                            return -1
                        }, v = this;
                    t.push('<table>\n  <tbody>\n    <tr>\n      <td class="subscribers">\n        '), i = this.people.models, t.push("\n        "), this.showCurrentPerson && i.unshift(this.currentPerson), t.push("\n\n        "), this.project.isTemplate() || this.project.isDraft() ? (t.push("\n          "), o = i, t.push("\n          "), u = [], t.push("\n        ")) : (t.push("\n          "), o = i.filter(function (e) {
                                return e.get("wants_notifications") === !0
                            }), t.push("\n          "), u = i.filter(function (e) {
                                return e.get("wants_notifications") === !1
                            }), t.push("\n          "), n = u.length && !o.length, t.push("\n        ")), t.push("\n\n        "), this.project.isTemplate() ? (t.push("\n          <h4>Who should receive updates?</h4>\n          <p>Since this is a project template, we won't email anyone about this "), t.push(r(this.humanize(this.subscribable))), t.push(" now. People you check below will be notified when new comments are added after the project is published.</p>\n        ")) : this.project.isDraft() ? (t.push("\n          <h4>Who should receive updates?</h4>\n          <p>Since this project isn't published yet, we won't email anyone about this "), t.push(r(this.humanize(this.subscribable))), t.push(" now. People you check below will be notified when new comments are added after the project is published.</p>\n        ")) : o.length && (t.push("\n          <h4>Email this "), t.push(r(this.humanize(this.subscribable))), t.push(" to people on the project:</h4>\n        ")), t.push("\n\n        "), o.length && t.push('\n          <div class="select_all_or_none">\n            <a href="#" class="decorated select_everyone" data-behavior="subscriber_select_all">Select all</a> |\n            <a href="#" class="decorated select_everyone" data-behavior="subscriber_select_none">Select none</a>\n          </div>\n        '), t.push('\n\n        <div class="subscribers">\n          <div>\n            '), h = _(o).inGroups(this.subscribable === "comment" ? 2 : 3);
                    for (a = 0, l = h.length; a < l; a++) {
                        i = h[a], t.push('\n              <div class="column">\n                ');
                        for (f = 0, c = i.length; f < c; f++) s = i[f], t.push('\n                  <label data-subscriber-id="'), t.push(r(s.get("person_id"))), t.push('" title="'), t.push(r(s === this.currentPerson ? "Me (" + s.get("name") + ")" : s.get("name"))), t.push('">\n                    <input name="'), t.push(r(this.subscribable)), t.push('[subscribers][]" type="checkbox" value="'), t.push(r(s.get("person_id"))), t.push('" '), ((p = s.get("person_id"), d.call(this.subscriberIds, p) >= 0) || this.defaultSubscribeAll) && t.push(r(e = "checked")), t.push(">\n                    "), t.push(r(s === this.currentPerson ? "Me (" + s.get("name") + ")" : s.get("name"))), t.push("\n                  </label>\n                ");
                        t.push("\n              </div>\n            ")
                    }
                    t.push("\n          </div>\n        </div>\n\n        "), u.length && (t.push('\n          <div class="unsubscribers">\n            <h6>\n              '), n ? t.push("\n                Everyone on this project has\n              ") : u.length > 1 ? t.push("\n                These people have\n              ") : t.push("\n                This person has\n              "), t.push("\n              turned off email notifications:</h6>\n            <p>"), t.push(r(_(u).map(function (e) {
                                        return e.get("name")
                                    }).join(", ").replace(/,\s([^,]+)$/, " and $1"))), t.push("</p>\n          </div>\n        ")), t.push("\n      </td>\n\n      "), !this.groups.isEmpty() && !n && (t.push('\n        <td class="groups">\n          <h4>Select people from:</h4>\n          <div class="group_options">\n            '), this.groups.reject(function (e) {
                                return e.isSubgroup()
                            }).forEach(function (e) {
                                return t.push('\n              <a href="#" data-member-ids="'), t.push(r(JSON.stringify(v.groupMemberIds(e)))), t.push('" data-group-id="'), t.push(r(e.id)), t.push('">\n                <span>'), t.push(r(e.get("name"))), t.push("</span>\n              </a>\n              "), e.subgroups().isEmpty() || (t.push('\n                <div class="subgroup_options">\n                  '), e.subgroups().forEach(function (n) {
                                            return t.push('\n                    <a href="#" class="subgroup" data-member-ids="'), t.push(r(JSON.stringify(v.groupMemberIds(n)))), t.push('" data-group-id="'), t.push(r(n.id)), t.push('" data-parent-group-id="'), t.push(r(e.id)), t.push('">\n                      <span>'), t.push(r(n.get("name"))), t.push("</span>\n                    </a>\n                  ")
                                        }), t.push("\n                </div>\n              ")), t.push("\n            ")
                            }), t.push("\n          </div>\n        </td>\n      ")), t.push("\n    </tr>\n  </tbody>\n</table>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/template_calendar_event_editor"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push(JST["templates/project_calendar_event_editor"](this)), t.push("\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/template_calendar_event_form_fields"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s;
                    t.push('<fieldset class="event_date">\n  <div class="start_date">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="label">Starts on:</td>\n        <td class="date" data-behavior="date_entry expand_dates">\n          <input type="hidden" data-due-week name="starts_at_due_week" value="'), t.push(r((e = this.calendarEvent.get("start_due_week")) != null ? e : 0)), t.push('">\n          <input type="hidden" data-due-wday name="starts_at_due_wday" value="'), t.push(r((n = this.calendarEvent.get("start_due_wday")) != null ? n : 1)), t.push('">\n\n          <input type="text" data-relative-date class="date" readonly value="'), t.push(r(this.calendarEvent.relativeDateLabelFor("start"))), t.push('">\n\n          <div data-behavior="relative_date_picker" class="notranslate relative_datepicker balloon" data-input=\'starts_at\'></div>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class="end_date">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="label">Ends on:</td>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" data-due-week name="ends_at_due_week" value="'), t.push(r((i = this.calendarEvent.get("end_due_week")) != null ? i : 0)), t.push('">\n          <input type="hidden" data-due-wday name="ends_at_due_wday" value="'), t.push(r((s = this.calendarEvent.get("end_due_wday")) != null ? s : 1)), t.push('">\n\n          <input type="text" data-relative-date class="date" readonly value="'), t.push(r(this.calendarEvent.relativeDateLabelFor("end"))), t.push('">\n\n          <div data-behavior="relative_date_picker" class="notranslate relative_datepicker balloon" data-input=\'ends_at\'></div>\n        </td>\n      </tr>\n    </table>\n  </div>\n</fieldset>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/template_calendar_events_blank_slate"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<article class="blank_slate">\n  <header>\n    <img src="https://d3dma7a8zw52bz.cloudfront.net/assets/blank_slates/blank_slate_icon_events-c96eda67460874050b636a98e7d2d160.png" alt="Text Documents" width="234" height="182">\n  </header>\n\n  <div class="blank_slate_body">\n    '), $("div.project:not([data-behavior~=read_only])").length && t.push("\n      <h1>Let's add the first event to your project template.</h1>\n    "), t.push("\n\n    <h3>We'll add these dates to your project's calendar based on the day you start the project. You can always change them later.</h3>\n  </div>\n</article>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/template_date_display"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n, i, s, o, u, a, f;
                    t.push('<section class="calendar_events">\n  ');
                    if (this.todos.length || this.calendarEvents.length) {
                        t.push("\n\n    "), a = this.eventsGroupedByWeek();
                        for (i = 0, o = a.length; i < o; i++) {
                            n = a[i], t.push('\n      <section class="calendar_events group month upcoming_events">\n        <header>\n          <h2>Week '), t.push(r(parseInt(n[0]) + 1)), t.push("</h2>\n        </header>\n\n        "), f = n[1];
                            for (s = 0, u = f.length; s < u; s++) e = f[s], t.push("\n          "), t.push(this.renderDateAndEvents(e[0], e[1])), t.push("\n        ");
                            t.push("\n\n      </section>\n\n    ")
                        }
                        t.push("\n  ")
                    } else t.push("\n    "), t.push(JST["templates/template_calendar_events_blank_slate"]({})), t.push("\n  ");
                    t.push("\n</section>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/timeline_day_bubble"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e, n;
                    t.push('<div class="day">\n  <a href="/'), t.push(r(bcx.currentAccountSlug)), t.push("/summary/"), t.push(r(this.date)), t.push('" class="decorated" data-default-stack="true">\n    '), e = this.date.getLocalDate(), t.push("\n    "), n = bcx.timeConversion.relativeDay(e), t.push("\n    <span>\n      "), n === "today" || n === "yesterday" ? (t.push("\n        <span>"), t.push(r(bcx.timeConversion.formats.daysAgo(e))), t.push('</span>\n        <time date-days-ago datetime="'), t.push(r(e.toISOString())), t.push('">'), t.push(r(bcx.timeConversion.formatDate(e))), t.push("</time>\n      ")) : (t.push("\n        <span>"), t.push(r(bcx.timeConversion.formatDate(e))), t.push('</span>\n        <time date-days-ago datetime="'), t.push(r(e.toISOString())), t.push('">'), t.push(r(bcx.timeConversion.formats.daysAgo(e))), t.push("</time>\n      ")), t.push("\n    </span>\n  </a>\n</div>\n")
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/todo"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    var e;
                    t.push('<form class="calendar_todo_editor_form" action="'), t.push(r(this.todo.showPath())), t.push('" method="PUT" data-remote="true" data-behavior="edit_calendar_todo has_hover_content">\n  <div>\n    <span class="wrapper '), this.todo.get("completed") && t.push(r("complete")), t.push('">\n      <input type="checkbox" value="1" '), this.todo.get("completed") && t.push(r('checked="checked"')), t.push(' data-behavior="toggle_todo" data-url="'), t.push(r(this.todo.togglePath())), t.push('" '), this.isTemplate && t.push(r('disabled="disabled"')), t.push('>\n\n      <span class="content">\n        <a href="'), t.push(r(this.todo.showPath())), t.push('" '), this.context !== "agenda" && t.push(r('data-default-stack="true"')), t.push(' title="'), this.context === "agenda" && t.push(r("List: " + this.todo.todolist().get("name"))), t.push('">'), t.push(r(this.emojify(this.todo.get("content")))), t.push("</a>\n\n        "), this.todo.get("comments_count") && (t.push('\n          <span class="pill comments">\n            <a href="'), t.push(r(this.todo.showPath())), t.push('" '), this.context !== "agenda" && t.push(r('data-default-stack="true"')), t.push(">"), t.push(r(this.pluralize(this.todo.get("comments_count"), "comment"))), t.push("</a>\n          </span>\n        ")), t.push('\n\n        <span class="pill has_balloon '), this.todo.assignee() || t.push(r("blank")), t.push('" data-behavior="expandable expand_exclusively load_assignee_options '), this.todo.assignee() || t.push(r("hover_content")), t.push('">\n          <a href="#" data-behavior="expand_on_click">\n            <span data-behavior="assignee_name">\n              '), t.push(r(((e = this.todo.assignee()) != null ? e.get("name") : void 0) || "Unassigned")), t.push('\n            </span>\n          </a>\n\n          <span class="balloon right_side expanded_content">\n            <span class="arrow"></span>\n            <span class="arrow"></span>\n\n            <label>\n              <b>Assign this to-do to:</b>\n\n              <select name="todo[assignee_code]"\n                      data-behavior="assignee_options"\n                      data-project-id="'), t.push(r(this.todo.bucket().get("id"))), t.push('"\n                      data-assignee-code="'), t.push(r(this.todo.get("assignee_code"))), t.push('">\n                <option value="">Loading...</option>\n              </select>\n            </label>\n\n            <small><p>The person you select will be notified by email</p></small>\n\n            <label>\n              <b>Set the due date:</b>\n              <hr>\n              '), this.isTemplate ? (t.push('\n                <input type="hidden" name="todo[due_week]" id="alt_date_todo_'), t.push(r(this.todo.get("id"))), t.push('" value="'), t.push(r(this.todo.get("due_week"))), t.push('" data-behavior="alt_date_field">\n                <input type="hidden" name="todo[due_wday]" id="alt_date_todo_'), t.push(r(this.todo.get("id"))), t.push('" value="'), t.push(r(this.todo.get("due_wday"))), t.push('" data-behavior="alt_date_field">\n                <div data-behavior="relative_date_picker" class="notranslate relative_datepicker"></div>\n              ')) : (t.push('\n                <input type="hidden" name="todo[due_on]" id="alt_date_todo_'), t.push(r(this.todo.get("id"))), t.push('" value="'), t.push(r(this.todo.getDueDate())), t.push('" data-behavior="alt_date_field">\n                <div data-behavior="date_picker" class="notranslate"></div>\n              ')), t.push('\n            </label>\n\n            <footer><a href="#" data-behavior="no_due_date" class="no_date">No due date</a></footer>\n          </span>\n        </span>\n      </span>\n    </span>\n  </div>\n</form>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        this.JST || (this.JST = {}), this.JST["templates/wysiwyg_toolbar"] = function (e) {
            e || (e = {});
            var t = [],
                n = function (e) {
                    var n = t,
                        r;
                    return t = [], e.call(this), r = t.join(""), t = n, i(r)
                }, r = function (e) {
                    return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
                }, i, s = e.safe,
                o = e.escape;
            return i = e.safe = function (e) {
                if (e && e.ecoSafe) return e;
                if (typeof e == "undefined" || e == null) e = "";
                var t = new String(e);
                return t.ecoSafe = !0, t
            }, o || (o = e.escape = function (e) {
                return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }),
            function () {
                (function () {
                    t.push('<div data-behavior="wysiwyg_toolbar" style="display: none;">\n  <a tabindex="-1" data-wysihtml5-command="bold" title="CTRL+B">Bold</a>\n  <a tabindex="-1" data-wysihtml5-command="italic" title="CTRL+I">Italic</a>\n  <a tabindex="-1" data-wysihtml5-command="insertUnorderedList">Bullets</a>\n  <a tabindex="-1" data-wysihtml5-command="insertOrderedList">Numbers</a>\n  <a tabindex="-1" data-wysihtml5-command="pre">Quote</a>\n</div>\n')
                }).call(this)
            }.call(e), e.safe = s, e.escape = o, t.join("")
        }
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            }, i = [].slice;
        e = function (e) {
            function o() {
                return this.updateCalendarEventClasses = t(this.updateCalendarEventClasses, this), this.hide = t(this.hide, this), o.__super__.constructor.apply(this, arguments)
            }
            var n, s;
            return r(o, e), n = "MM d, yy", s = function (e) {
                return $.datepicker.formatDate(n, e.getLocalDate())
            }, o.prototype.events = {
                "submit form": "submitForm",
                "click a[data-behavior=cancel]": "cancel",
                "click a[data-behavior=delete]": "destroy",
                change: "updateCalendarEventClasses",
                "change select[name=freq]": "freqChanged",
                "change select[name=count]": "countChanged",
                "change :radio[name=event_recurrence_choice]": "recurrenceOptionChosen"
            }, o.prototype.initialize = function () {
                return this.calendarEvent = new bcx.models.CalendarEvent
            }, o.prototype.render = function () {
                var e = this;
                return o.__super__.render.apply(this, arguments), this.$("[data-behavior~=date_entry]").each(function (t, n) {
                    return e.installDateEntryBehavior(n)
                }), this.updateCalendarEventClasses(), this.originalBucket = this.calendarEvent.isNew() ? null : this.calendarEvent.bucket()
            }, o.prototype.hide = function () {}, o.prototype.updateCalendarEventClasses = function () {
                var e = this;
                return _.defer(function () {
                    return e.isTimed() ? $(e.el).removeClass("all_day").addClass("timed") : $(e.el).removeClass("timed").addClass("all_day"), e.isSpanned() ? $(e.el).find("form").addClass("spanned") : $(e.el).find("form").removeClass("spanned")
                })
            }, o.prototype.installDateEntryBehavior = function (e) {
                var t, r, i, o, u = this;
                return r = $(e), i = r.find("[type=text]"), t = r.find("[type=hidden]"), o = CalendarDate.parse(t.val()), i.val(s(o)).datepicker({
                        altField: t,
                        altFormat: "yy-mm-dd",
                        dateFormat: n,
                        firstDay: CalendarDate.firstDayOfWeek,
                        dayNamesMin: ["S", "M", "T", "W", "T", "F", "S"],
                        changeMonth: !1,
                        changeYear: !1,
                        gotoCurrent: !0,
                        prevText: "Previous",
                        selectOtherMonths: !0,
                        showOtherMonths: !0,
                        showAnim: !1,
                        onSelect: function (e, t) {
                            return u.dateSelected(r, e)
                        },
                        beforeShow: function (e, t) {
                            return u.beforeShowPicker(r, t)
                        }
                    })
            }, o.prototype.beforeShowPicker = function (e, t) {
                t.dpDiv.addClass("calendar_event_picker notranslate"), this.setMinDates();
                if (e.find(":input[name=starts_at_date]").length) return e.attr("data-prev-date", this.dateEntry("starts_at_date", "hidden").val())
            }, o.prototype.setMinDates = function () {
                var e, t;
                return t = this.datePicker("starts_at_date", "getDate"), e = this.datePicker("ends_at_date", "getDate"), this.datePicker("ends_at_date", "option", {
                        minDate: t
                    }), this.datePicker("until_date", "option", {
                        minDate: e
                    })
            }, o.prototype.dateSelected = function (e) {
                return e.attr("data-dirty", !0), e.find(":input[name=starts_at_date]").length && this.shiftEndsAtDate(), this.shiftUntilDate(), this.updateCalendarEventClasses()
            }, o.prototype.shiftEndsAtDate = function () {
                var e, t, n, r;
                r = CalendarDate.parse(this.dateEntry("starts_at_date", "hidden").val()), n = CalendarDate.parse(this.dateEntry("starts_at_date").attr("data-prev-date"));
                if (e = r.daysSince(n)) return t = CalendarDate.parse(this.dateEntry("ends_at_date", "hidden").val()), this.datePicker("ends_at_date", "setDate", s(t.next(e)))
            }, o.prototype.shiftUntilDate = function () {
                var e, t;
                e = this.datePicker("ends_at_date", "getDate"), t = this.datePicker("until_date", "getDate");
                if (e > t) return this.datePicker("until_date", "setDate", e)
            }, o.prototype.field = function (e) {
                return this.$(":input[name='" + e + "']").val()
            }, o.prototype.dateEntry = function (e, t) {
                var n;
                return n = $("[data-behavior~=date_entry]:has([name=" + e + "])"), t != null ? n.find("[type=" + t + "]") : n
            }, o.prototype.datePicker = function () {
                var e, t, n;
                return t = arguments[0], e = 2 <= arguments.length ? i.call(arguments, 1) : [], (n = this.dateEntry(t, "text")).datepicker.apply(n, e)
            }, o.prototype.isTimed = function () {
                return this.field("starts_at_time") && this.field("starts_at_time").length && !this.isSpanned()
            }, o.prototype.isSpanned = function () {
                return this.field("starts_at_date") !== this.field("ends_at_date")
            }, o.prototype.updateCalendarEventAttributes = function () {
                var e, t, n, r, i;
                i = this.$(":input[name=bucket]").val().split(":"), t = i[0], e = i[1], this.calendarEvent.set({
                        summary: this.field("summary"),
                        description: this.field("description"),
                        bucket_type: t,
                        bucket_id: e
                    }), this.isTimed() ? (r = CalendarDateTime.parse(this.field("starts_at_date"), this.field("starts_at_time")), this.calendarEvent.set({
                            all_day: !1,
                            starts_at: r.toString(),
                            ends_at: r.toString()
                        })) : this.isSpanned() ? this.calendarEvent.set({
                        all_day: !0,
                        starts_at: this.field("starts_at_date"),
                        ends_at: this.field("ends_at_date")
                    }) : this.calendarEvent.set({
                        all_day: !0,
                        starts_at: this.field("starts_at_date"),
                        ends_at: this.field("starts_at_date")
                    }), n = this.field("freq") || null, this.calendarEvent.set({
                        freq: n
                    });
                if (n) switch (this.$(":input[name=event_recurrence_end]:checked").val()) {
                case "forever":
                    return this.calendarEvent.set({
                            count: null,
                            until_date: null
                        });
                case "count":
                    return this.calendarEvent.set({
                            count: this.field("count"),
                            until_date: null
                        });
                case "until":
                    return this.calendarEvent.set({
                            count: null,
                            until_date: this.field("until_date")
                        })
                }
            }, o.prototype.submitForm = function (e) {
                var t = this;
                return this.calendarEvent.isRepeating() ? this.calendarEvent.isLastRecurrence() ? (this.markAsBusy(), this.choice = "excluded", this.editRepeatingEvent()) : this.showRecurrencePrompt("change") : (this.markAsBusy(), this.updateCalendarEventAttributes(), this.calendarEvent.save({}, {
                            error: function () {
                                return t.calendarEventRequestFailed()
                            },
                            success: function () {
                                return t.bucketChanged() ? t.moveBuckets() : t.calendarEventRequestSucceeded()
                            }
                        })), !1
            }, o.prototype.bucketChanged = function () {
                var e;
                if (this.originalBucket && (e = this.selectedBucket())) return e !== this.originalBucket
            }, o.prototype.moveBuckets = function (e) {
                var t, n, r = this;
                return e == null && (e = function () {
                    return r.calendarEventRequestSucceeded()
                }), n = this.selectedBucket(), t = new MoveProcessor(new bcx.MoveOperation({
                            source_resource_type: "CalendarEvent",
                            source_resource_id: this.calendarEvent.get("id"),
                            destination_bucket_type: n.constructor.modelName,
                            destination_bucket_id: n.id
                        })), t.on("processor:success", function () {
                        return e()
                    }), t.on("processor:failed", function () {
                        return r.calendarEventRequestFailed()
                    }), t.run()
            }, o.prototype.destroy = function (e) {
                var t, n = this;
                return t = "Are you sure you want to delete this event?", this.calendarEvent.isRepeating() ? this.calendarEvent.isLastRecurrence() ? confirm(t) ? (this.markAsBusy(), this.choice = "excluded", this.destroyRepeatingEvent()) : this.cancelDestroy() : this.showRecurrencePrompt("destroy") : confirm(t) && (this.markAsBusy(), this.calendarEvent.trash({
                            error: function () {
                                return n.calendarEventRequestFailed()
                            },
                            success: function () {
                                return n.calendarEventRequestSucceeded()
                            }
                        })), !1
            }, o.prototype.cancelDestroy = function () {}, o.prototype.cancel = function (e) {
                return this.hide(), !1
            }, o.prototype.calendarEventRequestFailed = function () {
                return console.warn("failure!")
            }, o.prototype.calendarEventRequestSucceeded = function () {
                return this.markAsNotBusy(), this.hide()
            }, o.prototype.calendarEventRecurrenceRequestSucceeded = function () {
                return this.calendarEventRequestSucceeded()
            }, o.prototype.markAsBusy = function () {
                return this.$("form").addClass("busy")
            }, o.prototype.markAsNotBusy = function () {
                return this.$("form").removeClass("busy")
            }, o.prototype.getSelectedSubscribers = function () {
                var e, t;
                return e = bcx.peopleAndGroups.get("person_" + bcx.currentPerson.id), t = this.calendarEvent.subscribers(), e && this.calendarEvent.isNew() && t.push(e), t
            }, o.prototype.isEditorForTemplate = function () {
                return !1
            }, o.prototype.freqChanged = function (e) {
                var t;
                return t = $(e.target).val(), this.$("div.recurrence_end").toggle( !! t), this.$("label[data-role~=freqtext]").text(this.freqText(t))
            }, o.prototype.freqText = function (e) {
                switch (e) {
                case "daily":
                    return "days";
                case "weekly":
                    return "weeks";
                case "monthly":
                    return "months";
                case "yearly":
                    return "years"
                }
            }, o.prototype.recurrenceDescription = function () {
                var e, t, n, r, i, s;
                return n = this.calendarEvent.master(), r = this.freqText(n.getFreq()), i = r.replace(/s$/, ""), t = "Every " + i, (e = n.get("count")) ? t += " for " + e + " " + r + ", starting on " + n.getStartDate().longWithYear() + "." : (s = n.getUntilDate()) ? t += " from " + n.getStartDate().longWithYear() + " to " + s.longWithYear() + "." : t += ", starting on " + n.getStartDate().longWithYear() + "."
            }, o.prototype.countChanged = function (e) {
                return $(e.target).closest("li").find(":radio").attr("checked", !0)
            }, o.prototype.showRecurrencePrompt = function (e) {
                var t;
                return t = this.$("[data-behavior~=recurrence_prompt]"), t.find("[data-role~=expanded_recurrence_prompt]").html(this.renderRecurrencePrompt(e)), t.expand(), t.closest(".balloon").addClass("recurrence_prompt")
            }, o.prototype.renderRecurrencePrompt = function (e) {
                var t;
                return this.recurrenceChangeContext = e, t = _.extend({
                        calendarEvent: this.calendarEvent
                    }, function () {
                        switch (this.recurrenceChangeContext) {
                        case "change":
                            return {
                                action: "change",
                                verb: "changing"
                            };
                        case "move":
                            return this.recurrenceChangeContext = "change", {
                                action: "move",
                                verb: "moving"
                            };
                        case "destroy":
                            return {
                                action: "delete",
                                verb: "deleting"
                            }
                        }
                    }.call(this)), JST["templates/calendar_event_editor/recurrence_prompt"](t)
            }, o.prototype.recurrenceOptionChosen = function (e) {
                this.$(":input").attr("disabled", !0).closest("div").addClass("busy");
                if ((this.choice = $(e.target).val()) === "cancel") return this.hide();
                switch (this.recurrenceChangeContext) {
                case "change":
                    return this.editRepeatingEvent();
                case "destroy":
                    return this.destroyRepeatingEvent()
                }
            }, o.prototype.editRepeatingEvent = function () {
                var e = this;
                this.$("form.calendar_event_editor_form").length && this.updateCalendarEventAttributes();
                switch (this.choice) {
                case "recurring":
                    return this.calendarEvent.isRecurrence() ? this.calendarEvent.createRecurring(function () {
                        return e.calendarEventRecurrenceRequestSucceeded()
                    }) : this.calendarEvent.save({}, {
                            success: function () {
                                return e.calendarEvent.fromStartDate = null, e.bucketChanged() ? e.moveBuckets(function () {
                                    return e.calendarEventRecurrenceRequestSucceeded()
                                }) : e.calendarEventRecurrenceRequestSucceeded()
                            }
                        });
                case "excluded":
                    return this.calendarEvent.createExcluded(function () {
                        return e.calendarEventRecurrenceRequestSucceeded()
                    })
                }
            }, o.prototype.destroyRepeatingEvent = function () {
                var e = this;
                switch (this.choice) {
                case "recurring":
                    return this.calendarEvent.isRecurrence() ? this.calendarEvent.excludeWithFutureRecurrences(function () {
                        return e.calendarEventRecurrenceRequestSucceeded()
                    }) : this.calendarEvent.trash({
                            success: function () {
                                return e.calendarEventRecurrenceRequestSucceeded()
                            }
                        });
                case "excluded":
                    return this.calendarEvent.exclude(function () {
                        return e.calendarEventRecurrenceRequestSucceeded()
                    })
                }
            }, o
        }(bcx.Autoview), bcx.AbstractCalendarEventEditor = e
    }.call(this),
    function () {
        var e = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            }, r = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        bcx.views.AddTaggingView = function (t) {
            function s() {
                return this.autocompleteTagName = e(this.autocompleteTagName, this), s.__super__.constructor.apply(this, arguments)
            }
            var i;
            return n(s, t), s.viewName("add_tagging"), s.prototype.events = {
                "keydown input[type=text]": "keyPressed",
                "click input[type=submit]": "addTagging",
                "click [data-behavior~=cancel]": "cancel"
            }, s.prototype.afterInstall = function () {
                var e;
                return e = this.taggingsView, this.existingTaggings = e.existingTaggings, this.existingTagNames = e.existingTagNames, this.render()
            }, s.prototype.afterRender = function () {
                return this.$input = this.$("input[type=text]"), this.$tags = this.$("div.choose_tags"), this.$submit = this.$("input[type=submit]"), this.$input.placeholder({
                        clearOnSubmit: !1
                    }), this.$input.focus(), this.initializeAutocompletion()
            }, s.prototype.initializeAutocompletion = function () {
                var e = this;
                return this.getTagNamesForAutocompletion(function (t) {
                    return e.$input.autocomplete({
                            appendTo: e.$tags,
                            source: e.autocompleteTagName,
                            delay: 0,
                            open: function () {
                                return e.$tags.find("ul.ui-autocomplete").removeAttr("style")
                            },
                            select: function (t, n) {
                                if (n.item) return e.$input.val(n.item.value)
                            }
                        })
                })
            }, s.prototype.autocompleteTagName = function (e, t) {
                var n, i, s = this;
                return i = e.term.trim(), n = RegExp("(^|\\s)" + $.ui.autocomplete.escapeRegex(i), "i"), this.getTagNamesForAutocompletion(function (e) {
                    return t(_(e).select(function (e) {
                                return n.test(e) && r.call(s.existingTagNames, e) < 0
                            }))
                })
            }, s.prototype.getTagNamesForAutocompletion = function (e) {
                var t = this;
                return this.tagNamesForAutocompletion ? e(this.tagNamesForAutocompletion) : $.ajax({
                        url: "/" + bcx.currentAccountSlug + "/tags.json",
                        dataType: "json",
                        global: !1,
                        success: function (n) {
                            return e(t.tagNamesForAutocompletion = n)
                        }
                    })
            }, s.prototype.hasTagName = function (e) {
                var t;
                return t = i(e), _(this.existingTagNames).detect(function (e) {
                    return t === i(e)
                })
            }, s.prototype.keyPressed = function (e) {
                if (e.keyCode === 13) return this.addTagging()
            }, s.prototype.addTagging = function (e) {
                var t;
                return t = this.$input.val().trim(), t.length && (this.hasTagName(t) || (e = $(this.el).dispatch("tagging:add", t, this), e.isDefaultPrevented() || this.disable())), !1
            }, s.prototype.disable = function () {
                return this.$input.attr("disabled", !0), this.$submit.attr("disabled", !0), this.$submit.val("Adding...")
            }, s.prototype.refresh = function () {
                return this.taggingsView.refresh()
            }, s.prototype.afterRefresh = function () {
                return this.afterInstall()
            }, s.prototype.cancel = function (e) {
                return $(this.el).collapse(), !1
            }, i = function (e) {
                return e.toLowerCase().trim().replace(/\s\s+/, " ")
            }, s
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        e = bcx.EmailAddressHelper.extractEmailAddressesFrom, bcx.views.AdhocSubscriber = function (n) {
            function i() {
                return this.replace = t(this.replace, this), this.appendTo = t(this.appendTo, this), this.deactivate = t(this.deactivate, this), i.__super__.constructor.apply(this, arguments)
            }
            return r(i, n), i.prototype.className = "person field", i.prototype.template = "templates/adhoc_subscriber", i.prototype.events = {
                "focus input": "activate",
                "input:change input": "changeModel",
                "paste input": "inputPasted",
                "suggestions:commit": "suggestionPicked",
                focusoutside: "deactivate",
                clickoutside: "deactivate"
            }, i.prototype.initialize = function () {
                var e = this;
                return this.inputModel = new this.collection.model, this.inputModel.bind("change", function () {
                    return e.update()
                }), this.model || (this.model = this.inputModel), this.subscribable = this.options.subscribable, this.suggestionsView = new bcx.views.AutocompletePeopleSuggestions({
                        el: this.el,
                        model: this.inputModel,
                        collection: this.collection
                    })
            }, i.prototype.render = function () {
                return $(this.el).html(JST[this.template](this)), this.updateHiddenInputs(), this.updateAllClassNames()
            }, i.prototype.activate = function () {
                return $(this.el).addClass("focused")
            }, i.prototype.deactivate = function () {
                return $(this.el).removeClass("focused"), this.updateAllClassNames()
            }, i.prototype.changeModel = function () {
                return this.model = this.inputModel, this.model.setInput(this.getHumanInput())
            }, i.prototype.inputPasted = function (t) {
                var n;
                return n = $(t.currentTarget), n.bind("input", function (t) {
                    var r;
                    return r = e(n.val()), r.length && n.val(r[0]), n.unbind("input", arguments.callee)
                })
            }, i.prototype.suggestionPicked = function (e, t) {
                return e.preventDefault(), this.trigger("replace", this, t.suggestion)
            }, i.prototype.update = function () {
                return this.updateHiddenInputs(), this.updateBlankClassName(), this.model.hasInvalidEmailAddress() || $(this.el).removeClass("invalid"), $(this.el).removeClass("unknown")
            }, i.prototype.updateHiddenInputs = function () {
                return this.$("[data-role~=person_id_input]").val(this.model.get("person_id")), this.$("[data-role~=person_id_input]").attr("disabled", this.model.isNew()), this.$("[data-role~=email_address_input]").val(this.model.get("email_address")), this.$("[data-role~=email_address_input]").attr("disabled", this.model.has("id") || this.model.isBlank())
            }, i.prototype.updateAllClassNames = function () {
                return this.updateBlankClassName(), this.updateInvalidClassName(), this.updateUnknownClassName()
            }, i.prototype.updateBlankClassName = function () {
                return $(this.el).toggleClass("blank", this.model.isBlank())
            }, i.prototype.updateInvalidClassName = function () {
                return $(this.el).toggleClass("invalid", this.model.hasInvalidEmailAddress())
            }, i.prototype.updateUnknownClassName = function () {
                return $(this.el).toggleClass("unknown", this.model.hasUnknownName())
            }, i.prototype.getHumanInput = function () {
                return this.$("[data-role~=human_input]").val()
            }, i.prototype.appendTo = function (e) {
                return this.render(), $(e).append(this.el)
            }, i.prototype.replace = function (e) {
                return this.render(), $(e).replaceWith(this.el)
            }, i
        }(bcx.View)
    }.call(this),
    function () {
        var e, t, n = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, r = {}.hasOwnProperty,
            i = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var n in t) r.call(t, n) && (e[n] = t[n]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        t = bcx.collections.PeopleAndGroups, e = bcx.views.AdhocSubscriber, bcx.views.AdhocSubscriberList = function (r) {
            function s() {
                return this.replaceView = n(this.replaceView, this), this.addView = n(this.addView, this), s.__super__.constructor.apply(this, arguments)
            }
            return i(s, r), s.prototype.firsthumanInput = "[data-role~=human_input]:first", s.prototype.events = {
                "input:change div.field:last-child": "lastFieldChanged"
            }, s.prototype.initialize = function () {
                var e, n, r, i;
                this.collection = new t($(this.el).data("people"), {
                        disabledIds: $(this.el).data("disabled-people-ids")
                    }), this.subscribable = $(this.el).data("subscribable"), i = this.getOutsideSubscribers();
                for (n = 0, r = i.length; n < r; n++) e = i[n], this.addView(e);
                return this.addView()
            }, s.prototype.getOutsideSubscribers = function () {
                var e, t, n, r, i;
                t = $(this.el).data("outside-subscribers") || [], i = [];
                for (n = 0, r = t.length; n < r; n++) e = t[n], i.push(new this.collection.model(e));
                return i
            }, s.prototype.createView = function (t) {
                var n;
                return n = new e({
                        model: t,
                        collection: this.collection,
                        selection: this.selection,
                        subscribable: this.subscribable
                    }), n.bind("replace", this.replaceView)
            }, s.prototype.addView = function (e) {
                var t;
                return e || (e = new this.collection.model), t = this.createView(e), t.appendTo(this.el)
            }, s.prototype.replaceView = function (e, t) {
                var n;
                return n = this.createView(t), n.replace(e.el), $(n.el).is(":last-child") && this.addView(), this.focusNextField(n.el)
            }, s.prototype.lastFieldChanged = function (e, t) {
                if (t.currentValue.length > 5) return this.addView()
            }, s.prototype.focusNextField = function (e) {
                return $(e).next("div.field").find(this.firsthumanInput).focus()
            }, s.prototype.focus = function () {
                return this.$(this.firsthumanInput).focus()
            }, s
        }(bcx.View)
    }.call(this),
    function () {
        bcx.views.Autoresize = function () {
            function e() {}
            return e.prototype.setup = function () {
                var e = this;
                return $(this.el).bind("autoview:render", function () {
                    return e.autoresize()
                })
            }, e.prototype.autoresize = function () {
                return this.$("[data-behavior~=autoresize]").each(function () {
                    return $(this).focus().autoResize()
                })
            }, e
        }()
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        e = function (e) {
            function n() {
                return this.performDragNavigation = t(this.performDragNavigation, this), this.updateBlankSlate = t(this.updateBlankSlate, this), this.updateCalendarListVisibility = t(this.updateCalendarListVisibility, this), n.__super__.constructor.apply(this, arguments)
            }
            return r(n, e), n.viewName("calendar_display"), n.prototype.events = {
                "click [data-behavior~=toggle_calendar_list]": "toggleCalendarListClicked",
                "click [data-behavior~=add_calendar]": "addCalendarClicked",
                "click [data-behavior~=edit_bucket]": "editBucketClicked",
                "click [data-behavior~=toggle_bucket]": "toggleBucketClicked",
                "click [data-behavior~=zoom_in]": "zoomInClicked",
                "click [data-behavior~=zoom_out]": "zoomOutClicked",
                "calendardate:click": "calendarDateClicked",
                "calendaritem:select": "calendarItemSelected",
                "calendaritem:deselect": "calendarItemDeselected",
                "calendaritemeditor:hide": "calendarItemEditorHidden",
                "project_editor:hide": "calendarOrProjectEditorClosed",
                "calendar_editor:hide": "calendarOrProjectEditorClosed",
                "calendaritem:dragstart": "calendarItemStartedDragging",
                "calendaritem:dragmove": "calendarItemMoved",
                "calendaritem:dragend": "calendarItemDropped",
                "calendaritem:dragover [data-behavior~=navigate]": "calendarItemDraggedOverNavigateButton",
                "calendaritem:dragout  [data-behavior~=navigate]": "calendarItemDraggedOutOfNavigateButton",
                "calendargrid:beforeanimate": "lockNavigation",
                "calendargrid:afteranimate": "unlockNavigation"
            }, n.prototype.initialize = function () {
                var e = this;
                return this.display = bcx.calendarDisplay, this.display.bind("reset", function () {
                    return e.calendarItemEditor.unregister(), e.render()
                }), this.display.bind("change:calendarListVisibility", this.updateCalendarListVisibility), this.display.bind("change:zoomedIn", this.updateCalendarListVisibility), this.display.bind("change:blankSlate", this.updateBlankSlate), this.updateCalendarListVisibility()
            }, n.prototype.installSubviews = function () {
                return n.__super__.installSubviews.apply(this, arguments), this.calendarEditor = this.findSubviewByName("calendar_editor"), this.calendarEditor.hide(), this.projectEditor = this.findSubviewByName("project_editor"), this.projectEditor.hide(), this.calendarItemEditor = this.findSubviewByName("calendar_item_editor"), this.calendarItemEditor.hide(), this.calendarGrid = this.findSubviewByName("calendar_grid")
            }, n.prototype.install = function () {
                var e;
                return e = n.__super__.install.apply(this, arguments), this.updateBlankSlate(), e
            }, n.prototype.toggleCalendarListClicked = function (e) {
                return this.calendarItemEditor.hide(), this.display.toggleCalendarListVisibility(), !1
            }, n.prototype.updateCalendarListVisibility = function () {
                return this.display.getCalendarListVisibility() && !this.display.isZoomedIn() ? $(this.el).addClass("calendar_list_visible") : $(this.el).removeClass("calendar_list_visible")
            }, n.prototype.updateBlankSlate = function () {
                var e;
                return e = $(this.el).closest("div.panel"), this.display.blankSlate ? (e.addClass("blank_slate"), this.addCalendarClicked()) : (e.removeClass("blank_slate"), this.calendarEditor.hide())
            }, n.prototype.addCalendarClicked = function (e) {
                var t;
                return this.loadPeopleAndAccesses(), t = this.$("section.calendars h4"), this.calendarEditor.showWith(new bcx.models.Calendar, t.get(0)), !1
            }, n.prototype.editBucketClicked = function (e) {
                var t, n, r;
                return this.loadPeopleAndAccesses(), r = $(e.currentTarget).closest("[data-bucket-type]").get(0), t = this.findBucketByElement(r), n = t.constructor.modelName === "Calendar" ? this.calendarEditor : this.projectEditor, n.isVisibleWith(t) ? n.hide() : (n.showWith(t, r), $(r).addClass("activated")), !1
            }, n.prototype.calendarOrProjectEditorClosed = function (e) {
                var t;
                return t = $(this.el).find("li.activated[data-bucket-type]"), $(t).removeClass("activated")
            }, n.prototype.zoomInClicked = function (e) {
                var t, n;
                return n = $(e.currentTarget).closest("[data-bucket-type]").get(0), t = this.findBucketByElement(n), this.calendarEditor.hide(), this.projectEditor.hide(), this.calendarItemEditor.hide(), this.display.zoomIn(t), !1
            }, n.prototype.zoomOutClicked = function (e) {
                return this.calendarItemEditor.hide(), this.display.zoomOut(), !1
            }, n.prototype.loadPeopleAndAccesses = function () {
                return bcx.peopleAndGroups.loadWithAccesses()
            }, n.prototype.toggleBucketClicked = function (e) {
                var t;
                return t = this.findBucketByElement(e.currentTarget), this.display.toggleBucketVisibility(t), !1
            }, n.prototype.findBucketByElement = function (e) {
                var t, n, r;
                t = $(e).closest("[data-bucket-type]"), r = t.data("bucket-type"), n = t.data("bucket-id");
                if (r === "calendar") return bcx.calendars.get(n);
                if (r === "project") return bcx.projects.get(n)
            }, n.prototype.calendarDateClicked = function (e, t) {
                var n, r;
                return this.calendarItemEditor.visible ? this.calendarItemEditor.hide() : (n = new bcx.models.CalendarEvent({
                            summary: "New event",
                            all_day: !0,
                            starts_at: t.toString(),
                            until_date: t.next().toString()
                        }), (r = this.display.zoomedInBucket()) && n.set({
                            bucket_type: r.constructor.modelName,
                            bucket_id: r.id
                        }), this.calendarItemElement = this.calendarGrid.insertAllDayCalendarEventElement(n), this.calendarGrid.selectCalendarItemElement(this.calendarItemElement, n))
            }, n.prototype.calendarItemSelected = function (e, t) {
                return this.loadPeopleAndAccesses(), this.calendarItemEditor.showWith(t, e.target)
            }, n.prototype.calendarItemDeselected = function () {
                return this.calendarItemElement && $(this.calendarItemElement).remove(), this.calendarItemEditor.hide(!0)
            }, n.prototype.calendarItemEditorHidden = function () {
                return this.calendarGrid.deselectCalendarItemElement()
            }, n.prototype.calendarItemStartedDragging = function (e, t) {
                if (this.calendarItemEditor.visible) return this.calendarItemEditor.hide()
            }, n.prototype.calendarItemMoved = function (e, t) {
                var n, r, i;
                return n = t.calendarItem, r = t.fromStartDate, i = t.offset, n.
                setStartDate(r.next(i))
            }, n.prototype.calendarItemDropped = function (e, t) {
                var n, r;
                return n = t.calendarItem, r = t.fromStartDate, n.constructor.modelName === "CalendarEvent" && n.isRepeating() ? n.getStartDate() !== r && (n.fromStartDate = r, n.isLastRecurrence() ? n.createExcluded() : this.calendarItemEditor.showWith(n, this.calendarGrid.findDraggedElements())) : n.save(), this.resetDragNavigation(), this.display.navigateToCalendarEvent(n)
            }, n.prototype.calendarItemDraggedOverNavigateButton = function (e, t) {
                var n;
                return this.dragNavigationElement = e.currentTarget, (n = this.dragNavigationInterval) != null ? n : this.dragNavigationInterval = window.setInterval(this.performDragNavigation, 500)
            }, n.prototype.calendarItemDraggedOutOfNavigateButton = function (e, t) {
                return this.dragNavigationElement = null
            }, n.prototype.resetDragNavigation = function () {
                if (this.dragNavigationInterval) return window.clearInterval(this.dragNavigationInterval), this.dragNavigationInterval = null, this.dragNavigationElement = null
            }, n.prototype.performDragNavigation = function () {
                return this.dragNavigationElement ? $(this.dragNavigationElement).click() : this.resetDragNavigation()
            }, n.prototype.lockNavigation = function () {
                return this.display.lockNavigation()
            }, n.prototype.unlockNavigation = function () {
                return this.display.unlockNavigation()
            }, n
        }(bcx.Autoview)
    }.call(this),
    function () {
        bcx.views.Popover = function () {
            function e() {}
            return e.recordName = function (e) {
                return this.prototype.recordName = e
            }, e.prototype.recordName = "record", e.prototype.setup = function () {
                var e = this;
                return $(document).bind("popover:show", function (t) {
                    if (t.target !== e.el) return e.hide()
                }), this.visible = !0, this.hide()
            }, e.prototype.showWith = function (e, t) {
                var n;
                return this[this.recordName] = e, n = this.visible, this.hide(!0), this.render(), this.visible = !0, $(this.el).show().trigger("popover:show"), typeof this.afterShow == "function" && this.afterShow(n), t && this.repositionRelativeTo(t), this.bindWindowEvents(), this.autofocus()
            }, e.prototype.show = function () {
                return this.showWith(null)
            }, e.prototype.hide = function (e) {
                e == null && (e = !1);
                if (this.visible) return this.unbindWindowEvents(), $(this.el).trigger("popover:hide").hide(), typeof this.afterHide == "function" && this.afterHide(e), this.visible = !1
            }, e.prototype.repositionRelativeTo = function (e) {
                return $(this.el).offset($(e).offset())
            }, e.prototype.isVisibleWith = function (e) {
                return this.visible && this[this.recordName] === e
            }, e.prototype.isDirty = function () {
                return $(this.el).isDirty()
            }, e.prototype.bindWindowEvents = function () {
                var e = this;
                $(window).bind("click.popover", function (t) {
                    if (!$(t.target).closest("#" + e.id).length) return e.hide(), !1
                }), $(document).bind("keydown.popover", function (t) {
                    if (t.keyCode !== $.ui.keyCode.ESCAPE) return;
                    if (e.visible && !e.isDirty()) return e.hide(), !1
                });
                if (!$.browser.mobile) return $(window).bind("resize.popover", function () {
                    return e.hide()
                })
            }, e.prototype.unbindWindowEvents = function () {
                return $(window).unbind(".popover"), $(document).unbind(".popover")
            }, e.prototype.autofocus = function () {
                return this.$(":input:first").focus()
            }, e
        }()
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        e = function (e) {
            function n() {
                return this.renderAccesses = t(this.renderAccesses, this), this.render = t(this.render, this), n.__super__.constructor.apply(this, arguments)
            }
            return r(n, e), n.viewName("calendar_editor"), n.include(bcx.views.Popover), n.recordName("calendar"), n.prototype.events = {
                "submit form": "submitForm",
                "click [data-behavior~=cancel]": "cancel",
                "click [data-behavior~=delete]": "destroy",
                "click [data-behavior~=select_suggestion]": "onClickSuggestion"
            }, n.prototype.initialize = function () {
                return this.calendar = new bcx.models.Calendar, bcx.peopleAndGroups.bind("loaded:withAccess", this.renderAccesses)
            }, n.prototype.onClickSuggestion = function (e) {
                return e.stopImmediatePropagation()
            }, n.prototype.render = function () {
                var e;
                return e = n.__super__.render.apply(this, arguments), this.renderAccesses(), this.setupPlaceholder(), e
            }, n.prototype.renderAccesses = function () {
                return this.$("[data-behavior~=calendar_accesses]").html("" + this.renderTemplate("calendar_accesses")), this.setupInviteesView(), this.initializeSlider()
            }, n.prototype.afterShow = function () {
                return this.initializeSlider()
            }, n.prototype.setupInviteesView = function () {
                var e, t, n, r, i, s, o;
                if (!bcx.peopleAndGroups.loadedWithAccesses) return;
                s = this.$("[data-behavior~=calendar_invitees]"), o = [];
                for (r = 0, i = s.length; r < i; r++) e = s[r], t = _(bcx.peopleAndGroups.models).reject(function (e) {
                    return e.id === "person_" + bcx.currentPerson.id
                }), $(e).data("people", t), n = new bcx.views.CalendarInviteeFieldList({
                        el: e
                    }), n.render(), n.focus(), o.push($(e).data("view", n));
                return o
            }, n.prototype.setupPlaceholder = function () {
                return $(this.el).find("[data-behavior~=placeholder]").placeholder()
            }, n.prototype.submitForm = function (e) {
                var t = this;
                return this.$("form").addClass("busy"), this.calendar.save(this.getCalendarAttributes(), {
                        success: function () {
                            return t.hide()
                        },
                        error: function () {
                            return console.warn("failure!")
                        }
                    }), !1
            }, n.prototype.getRemovedPeopleFromInviteesView = function () {
                var e, t;
                e = this.$("div.change_accesses [data-behavior~=calendar_invitees]")[0];
                if (e && (t = $(e).data("view"))) return t.removedPeople
            }, n.prototype.getCalendarAttributes = function () {
                var e;
                return {
                    name: this.$("[name=name]").val(),
                    color: this.$("[name=color]:checked").val(),
                    invitees: function () {
                        var t, n, r, i;
                        r = this.$("input[data-role~=email_address_input]"), i = [];
                        for (t = 0, n = r.length; t < n; t++) e = r[t], i.push({
                                email_address: e.value
                            });
                        return i
                    }.call(this),
                    remove_people: this.getRemovedPeopleFromInviteesView()
                }
            }, n.prototype.cancel = function () {
                return this.hide()
            }, n.prototype.afterHide = function (e) {
                if (!e) return $(this.el).trigger("calendar_editor:hide")
            }, n.prototype.initializeSlider = function () {
                return this.$("[data-behavior~=slider]:visible").slider()
            }, n.prototype.destroy = function (e) {
                var t = this;
                return confirm("Are you sure you want to delete this calendar?") && (this.$("form").addClass("busy"), this.calendar.trash({
                            success: function () {
                                return t.hide()
                            },
                            error: function () {
                                return console.warn("failure!")
                            }
                        })), !1
            }, n
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            };
        e = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return n(t, e), t.viewName("calendar_event_editor/recurrence_prompt"), t.prototype.showRecurrencePrompt = function (e) {
                return $(this.el).html(this.renderRecurrencePrompt("destroy"))
            }, t.prototype.markAsBusy = function () {
                return $(this.el).closest(".tool").addClass("busy")
            }, t.prototype.hide = function () {
                var e = this;
                return _.defer(function () {
                    return $(e.el).parent().find("[data-behavior~=recurring_cancel]").click()
                })
            }, t.prototype.cancelDestroy = function () {
                return this.hide()
            }, t.prototype.calendarEventRecurrenceRequestSucceeded = function () {
                return $(".sheet.inactive:last").find("h1 > a").click()
            }, t
        }(bcx.AbstractCalendarEventEditor)
    }.call(this),
    function () {
        var e = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        bcx.views.Locking = function () {
            function t() {}
            return t.prototype.setup = function () {
                return this.lockCount = 0, this.onUnlock = []
            }, t.prototype.retainLock = function () {
                return this.lockCount++
            }, t.prototype.releaseLock = function () {
                var e;
                this.lockCount--;
                if (this.lockCount === 0) {
                    e = [];
                    while (this.onUnlock.length) e.push(this.onUnlock.shift()());
                    return e
                }
            }, t.prototype.whenUnlocked = function (t) {
                if (this.lockCount === 0) return t();
                if (e.call(this.onUnlock, t) < 0) return this.onUnlock.push(t)
            }, t
        }()
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            }, i = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        e = function (e) {
            function n() {
                return this.endDrag = t(this.endDrag, this), this.onKeyPress = t(this.onKeyPress, this), this.onDragInterval = t(this.onDragInterval, this), this.onDragOver = t(this.onDragOver, this), this.performDrag = t(this.performDrag, this), this.cursorChanged = t(this.cursorChanged, this), this.updateToday = t(this.updateToday, this), n.__super__.constructor.apply(this, arguments)
            }
            return r(n, e), n.viewName("calendar_grid"), n.include(bcx.views.Locking), n.prototype.events = {
                "click div.event": "calendarItemClicked",
                "click div.date": "calendarDateClicked",
                "mousedown div.event": "startDrag"
            }, n.prototype.initialize = function () {
                var e = this;
                return this.today = CalendarDate.today(), this.display = bcx.calendarDisplay, this.display.bind("change:cursor", this.cursorChanged), this.display.afterChanges(function () {
                    return e.whenUnlocked(e.render)
                }), this.display.bind("current_date_range:loaded", function (t) {
                    if (e.display.getFirstDate() === t) return e.whenUnlocked(e.render)
                }), this.display.loadCurrentDateRange(), setInterval(this.updateToday, 1e4)
            }, n.prototype.updateToday = function () {
                var e;
                e = CalendarDate.today();
                if (!e.equals(this.today)) return this.today = e, this.whenUnlocked(this.render)
            }, n.prototype.render = function () {
                var e;
                return e = n.__super__.render.apply(this, arguments), this.highlightDraggedCalendarItem(), this.reselectTodoUnlessDateChanged(), e
            }, n.prototype.renderCalendarEvent = function (e) {
                return JST["templates/calendar_event"]({
                        calendarEvent: e,
                        emojify: this.emojify
                    })
            }, n.prototype.renderTodo = function (e) {
                return JST["templates/calendar_todo"]({
                        todo: e,
                        emojify: this.emojify,
                        truncateWord: this.truncateWord
                    })
            }, n.prototype.cursorChanged = function (e, t) {
                var n;
                n = Math.abs(e.previous("cursor").daysSince(t));
                if (!this.shouldAnimateForNavigation() || n === 1) return this.render(), this.display.loadCurrentDateRange();
                switch (t.compareTo(e.previous("cursor"))) {
                case -1:
                    return this.display.loadCurrentDateRange("backward"), this.animate(-1);
                case 1:
                    return this.display.loadCurrentDateRange("forward"), this.animate(1)
                }
            }, n.prototype.shouldAnimateForNavigation = function () {
                return !this.display.synchronous
            }, n.prototype.animate = function (e) {
                var t, n, r, i, s, o, u, a, f, l, c, h, p = this;
                this.retainLock(), $(this.el).trigger("calendargrid:beforeanimate"), t = this.$("div.grid_content"), n = this.$("div.weeks"), o = e === 1 ? "append" : "prepend", s = n.height(), n[o](this.getWeeksForAnimation()), i = n.height(), r = 0, u = e === 1 ? [-6] : [0, 6], h = (c = n.find("div.week")).slice.apply(c, u);
                for (f = 0, l = h.length; f < l; f++) a = h[f], r += $(a).height();
                return t.css({
                        overflow: "hidden",
                        position: "relative",
                        height: s
                    }), n.css({
                        position: "absolute",
                        top: e === 1 ? 0 : s - i,
                        width: "100%"
                    }), t.transition({
                        height: r
                    }, {
                        duration: 600
                    }), n.transition({
                        top: e === 1 ? r - i : 0
                    }, {
                        duration: 600,
                        complete: function () {
                            var r;
                            return u = e === 1 ? [0, -6] : [6], (r = n.find("div.week")).slice.apply(r, u).remove(), t.css({
                                    overflow: "",
                                    position: "",
                                    height: ""
                                }), n.css({
                                    position: "",
                                    top: "",
                                    width: ""
                                }), p.releaseLock(), $(p.el).trigger("calendargrid:afteranimate")
                        }
                    })
            }, n.prototype.getWeeksForAnimation = function () {
                var e, t, n, r, s, o, u;
                e = function () {
                    var e, n, r, i;
                    r = this.$("div.week"), i = [];
                    for (e = 0, n = r.length; e < n; e++) t = r[e], i.push($(t).data("date"));
                    return i
                }.call(this), n = [], o = this.renderContents().find("div.week");
                for (r = 0, s = o.length; r < s; r++) t = o[r], (u = $(t).data("date"), i.call(e, u) < 0) && n.push(t);
                return $(n)
            }, n.prototype.insertAllDayCalendarEventElement = function (e) {
                var t, n, r;
                n = $(this.renderCalendarEvent(e)).get(0), t = CalendarDate.parse(e.get("starts_at"));
                if (r = this.findElementForCalendarDate(t)) return $(r).find("div.events.all_day").append(n), n
            }, n.prototype.calendarItemClicked = function (e) {
                var t;
                if (!$(e.target).is(":input")) return t = $(e.currentTarget).is(".selected"), t && $(e.currentTarget).hasBehavior("calendar_todo") ? this.deselectCalendarItemElement() : t || this.selectCalendarItemElement(e.currentTarget), !1
            }, n.prototype.calendarDateClicked = function (e) {
                var t;
                if (!$(e.target).is(":input")) return t = this.findCalendarDateForElement(e.currentTarget), $(e.currentTarget).trigger("calendardate:click", t), !1
            }, n.prototype.findCalendarItemForElement = function (e) {
                var t;
                return t = $(e).data("id"), $(e).hasBehavior("calendar_todo") ? this.display.todos.get(t) : this.display.calendarEvents.get(t)
            }, n.prototype.findCalendarDateForElement = function (e) {
                return CalendarDate.parse($(e).data("date"))
            }, n.prototype.findElementForCalendarDate = function (e) {
                return this.$("div.date[data-date='" + e + "']").get(0)
            }, n.prototype.selectCalendarItemElement = function (e, t) {
                return this.deselectCalendarItemElement(), this.calendarItemElement = e, this.calendarItem = t != null ? t : this.findCalendarItemForElement(e), $(e).addClass("selected"), $(e).trigger("calendaritem:select", this.calendarItem)
            }, n.prototype.deselectCalendarItemElement = function () {
                if (!this.calendarItemElement) return;
                return $(this.calendarItemElement).removeClass("selected"), $(this.calendarItemElement).trigger("calendaritem:deselect", this.calendarItem), this.calendarItem = this.calendarItemElement = null
            }, n.prototype.reselectTodoUnlessDateChanged = function () {
                var e, t;
                if (!this.calendarItemElement) return;
                if ($(this.calendarItemElement).is("[data-behavior~=calendar_todo]") && (t = $(this.calendarItemElement).data("id"))) return e = $("[data-behavior~=calendar_todo][data-id=" + t + "]").get(0), $(this.calendarItemElement).closest("div.date[data-date]").data("date") === $(e).closest("div.date[data-date]").data("date") ? this.selectCalendarItemElement(e, this.findCalendarItemForElement(e)) : (this.calendarItemElement = e, this.deselectCalendarItemElement())
            }, n.prototype.classesForDate = function (e) {
                var t;
                return t = ["date"], (this.display.firstWeekContainsToday() || e.fallsOnSameMonthAs(this.display.getBeginningOfMonth())) && t.push("current_month"), e.equals(this.today) && t.push("today"), t.join(" ")
            }, n.prototype.classesForSpannedEventFrom = function (e, t) {
                var n, r, s, o, u;
                return r = ["event"], r.push("slot_" + e.slot), r.push("width_" + e.width), t = function () {
                    var e, n, r;
                    r = [];
                    for (e = 0, n = t.length; e < n; e++) s = t[e], r.push(s.toString());
                    return r
                }(), n = e.calendarEvent, (o = n.getStartDate().toString(), i.call(t, o) < 0) && r.push("wraps_prev"), (u = n.getEndDate().toString(), i.call(t, u) < 0) && r.push("wraps_next"), r.join(" ")
            }, n.prototype.startDrag = function (e) {
                var t, n, r, i, s, o;
                if (r = this.detectDateFromMouseEvent(e)) {
                    t = $(e.currentTarget);
                    if (n = this.findCalendarItemForElement(t)) return e.preventDefault(), $(window).one("mouseup", this.endDrag), $(window).bind("mousemove", this.performDrag), $(window).bind("keydown", this.onKeyPress), $(this.el).bind("calendaritem:dragover", this.onDragOver), o = t.offset(), i = o.left, s = o.top, this.dragging = {
                        fromDate: r,
                        fromPageX: e.pageX,
                        fromPageY: e.pageY,
                        fromXOffset: e.pageX - i,
                        fromYOffset: e.pageY - s,
                        fromStartDate: n.getStartDate(),
                        offset: 0,
                        calendarItem: n,
                        originalEl: e.currentTarget
                    }
                }
            }, n.prototype.performDrag = function (e) {
                var t, n;
                return this.dragging.$ghost || (t = Math.abs(e.pageX - this.dragging.fromPageX), n = Math.abs(e.pageY - this.dragging.fromPageY), t + n >= 3 && (this.createDragGhost(), this.createDragInterval(), $(this.el).trigger("calendaritem:dragstart", this.dragging))), this.updateDragging(e), this.updateDragGhost(e)
            }, n.prototype.updateDragging = function (e) {
                var t, n;
                n = this.dragging.dragArea, t = this.detectDragAreaFromMouseEvent(e), n && t !== n && $(n).trigger("calendaritem:dragout", this.dragging), this.dragging.pageX = e.pageX, this.dragging.pageY = e.pageY;
                if (this.dragging.dragArea = t) return $(t).trigger("calendaritem:dragover", this.dragging)
            }, n.prototype.onDragOver = function (e) {
                var t, n;
                if (t = this.detectDateFromDragArea(this.dragging.dragArea, this.dragging)) {
                    (n = this.dragging.toDate) || (this.dragging.toDate = n = t);
                    if (n && !n.equals(t)) return this.dragging.toDate = t, this.dragging.offset = t.daysSince(this.dragging.fromDate), $(this.el).trigger("calendaritem:dragmove", this.dragging)
                }
            }, n.prototype.createDragGhost = function () {
                var e;
                return e = $(this.dragging.originalEl), this.dragging.$ghost = e.ghost().addClass("ghost_event").addClass(e.is(".wraps_prev") ? "wraps_prev" : void 0).addClass(e.is(".wraps_next") ? "wraps_next" : void 0), this.highlightDraggedCalendarItem()
            }, n.prototype.updateDragGhost = function (e) {
                var t;
                return (t = this.dragging.$ghost) != null ? t.offset({
                        left: e.pageX - this.dragging.fromXOffset,
                        top: e.pageY - this.dragging.fromYOffset
                    }) : void 0
            }, n.prototype.findDraggedElements = function () {
                var e, t;
                if (e = (t = this.dragging) != null ? t.calendarItem : void 0) return this.$("div.event[data-id='" + e.id + "']")
            }, n.prototype.highlightDraggedCalendarItem = function () {
                if (this.dragging) return this.findDraggedElements().addClass("dragging")
            }, n.prototype.removeDragGhost = function () {
                var e, t, n, r, i, s, o = this;
                return t = this.findDraggedElements(), this.retainLock(), r = this.dragging.$ghost, e = this.$("div.date[data-date='" + this.dragging.toDate + "']"), n = e.closest("div.week").find("div.event[data-id='" + this.dragging.calendarItem.id + "']"), i = function () {
                    return t.removeClass("dragging"), r.remove(), o.releaseLock()
                }, (s = n.offset()) ? r.transition({
                        top: s.top,
                        left: s.left,
                        width: n.width()
                    }, {
                        timing: "ease-in",
                        complete: i
                    }) : i()
            }, n.prototype.createDragInterval = function () {
                return this.dragging.interval = window.setInterval(this.onDragInterval, 50)
            }, n.prototype.onDragInterval = function () {
                return this.updateDragging(this.dragging)
            }, n.prototype.removeDragInterval = function () {
                return window.clearInterval(this.dragging.interval), this.dragging.interval = null
            }, n.prototype.onKeyPress = function (e) {
                if (e.keyCode === $.ui.keyCode.ESCAPE) return e.preventDefault(), this.dragging.toDate = this.dragging.fromStartDate, this.dragging.offset = 0, $(this.el).trigger("calendaritem:dragmove", this.dragging), this.render(), this.endDrag()
            }, n.prototype.endDrag = function () {
                return this.dragging.$ghost && (this.removeDragInterval(), this.removeDragGhost(), $(this.el).trigger("calendaritem:dragend", this.dragging)), $(window).unbind("mousemove", this.performDrag), $(window).unbind("keydown", this.onKeyPress), $(this.el).unbind("calendaritem:dragover", this.onDragOver), this.dragging = !1
            }, n.prototype.detectDragAreaFromMouseEvent = function (e) {
                return _($("[data-behavior~=calendar_event_drag_area]")).detect(function (t) {
                    return $(t).containsPoint(e)
                })
            }, n.prototype.detectDateFromMouseEvent = function (e) {
                var t;
                if (t = this.detectDragAreaFromMouseEvent(e)) return this.detectDateFromDragArea(t, e)
            }, n.prototype.detectDateFromDragArea = function (e, t) {
                var n, r, i, s, o, u, a;
                n = $(e).closest("div.week");
                if (!n.length) return;
                return s = CalendarDate.parse(n.find("div.date:first").attr("data-date")), o = n.offset().left, u = n.width(), r = u / 7, i = t.pageX - o, a = Math.floor(i / r), s.next(a)
            }, n
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            }, r = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        bcx.views.CalendarInviteeField = function (t) {
            function i() {
                return this.currentPersonCanChangeAccess = e(this.currentPersonCanChangeAccess, this), i.__super__.constructor.apply(this, arguments)
            }
            return n(i, t), i.prototype.removable = function () {
                return this.readOnly() && this.model.isEnabled() && this.currentPersonCanChangeAccess()
            }, i.prototype.currentPersonCanChangeAccess = function () {
                var e, t, n, i, s, o, u = this;
                i = this.options.parent;
                if (bcx.currentPerson.isAdmin() || (s = this.model.id, r.call(i.selectedPeopleIds, s) < 0)) return !0;
                if (n = $(i.el).closest("[data-calendar-id]").data("calendar-id")) return t = (o = bcx.calendars.get(n)) != null ? o.accesses() : void 0, e = _(t).find(function (e) {
                    return e.person_id === u.model.get("person_id")
                }), e && e.creator_id === bcx.currentPerson.id
            }, i
        }(bcx.views.InviteeField)
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        e = bcx.views.CalendarInviteeField, bcx.views.CalendarInviteeFieldList = function (n) {
            function i() {
                return this.isInSelectedPeople = t(this.isInSelectedPeople, this), this.replaceView = t(this.replaceView, this), this.onAddSelection = t(this.onAddSelection, this), this.onRemoveSelection = t(this.onRemoveSelection, this), i.__super__.constructor.apply(this, arguments)
            }
            return r(i, n), i.prototype.initialize = function () {
                var e, t;
                return i.__super__.initialize.apply(this, arguments), this.removedPeople = [], this.selectedPeopleIds = _((t = $(this.el).data("selected-people-ids")) != null ? t : []).reject(function (e) {
                    return e === "person_" + bcx.currentPerson.id
                }), this.selectionPeople = function () {
                    var t, n, r, i;
                    r = this.selectedPeopleIds, i = [];
                    for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(this.collection.get(e));
                    return i
                }.call(this), this.selectionPeople.push(new this.collection.model, new this.collection.model, new this.collection.model), this.selection.reset(this.selectionPeople), this.selection.bind("remove", this.onRemoveSelection)
            }, i.prototype.viewConstructorFor = function (t) {
                return t.isGroup() ? i.__super__.viewConstructorFor.apply(this, arguments) : e
            }, i.prototype.onRemoveSelection = function (e) {
                if (this.isInSelectedPeople(e)) return this.removedPeople.push(e.get("person_id"))
            }, i.prototype.onAddSelection = function (e) {
                if (this.isInSelectedPeople(e)) return this.removedPeople = _(this.removedPeople).without(e.get("person_id"))
            }, i.prototype.replaceView = function (e, t) {
                return i.__super__.replaceView.apply(this, arguments), this.onAddSelection(t)
            }, i.prototype.reset = function () {
                return this.selection.reset(this.selectionPeople)
            }, i.prototype.reload = function () {
                return i.__super__.reload.apply(this, arguments), this.removedPeople = []
            }, i.prototype.isInSelectedPeople = function (e) {
                return e.get("person_id") && this.selectedPeopleIds.indexOf(e.id) >= 0
            }, i
        }(bcx.views.InviteeFieldList)
    }.call(this),
    function () {
        var e = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            };
        bcx.views.CalendarItemEditorView = function (t) {
            function r() {
                return this.finalizePopover = e(this.finalizePopover, this), this.changeSubscribersClicked = e(this.changeSubscribersClicked, this), this.enableBucketAndSubscriberFields = e(this.enableBucketAndSubscriberFields, this), this.render = e(this.render, this), r.__super__.constructor.apply(this, arguments)
            }
            return n(r, t), r.viewName("calendar_item_editor"), r.include(bcx.views.Popover), r.recordName("calendarItem"), r.prototype.initialize = function () {
                return r.__super__.initialize.apply(this, arguments), this.display = bcx.calendarDisplay, this.display.bind("reset", this.hide), bcx.peopleAndGroups.bind("loaded:withAccess", this.enableBucketAndSubscriberFields), $(this.el).bind("popover:show", this.finalizePopover), this.events = _.extend({}, this.events, {
                        "change select[data-behavior~=bucket_selector]": "bucketSelected",
                        "click a.done_editing[data-behavior~=slide]": "doneEditingClicked",
                        "slider:beforeslide li.slide[data-slide-index=1]": "changeSubscribersClicked",
                        "slider:slide": "slideBalloonIntoView",
                        "click [data-behavior~=subscriber_select_all], [data-behavior~=subscriber_select_none]": "toggleAllSubscribers",
                        "click [data-behavior~=toggle_subscribers] input:checkbox": "toggleWantsNotification",
                        "popover:hide": "cancelRecurrenceChange"
                    }), this.delegateEvents()
            }, r.prototype.setCurrentBucket = function () {
                var e, t, n;
                return this.currentBucket = (e = (t = (n = this.calendarEvent.bucket()) != null ? n : this.lastUsedBucket) != null ? t : bcx.calendars.first()) != null ? e : bcx.projects.first()
            }, r.prototype.afterShow = function (e) {
                return this.setupPlaceholder(), this.initializeSlider(), this.setWantsNotification()
            }, r.prototype.afterHide = function (e) {
                if (!e) return $(this.el).trigger("calendaritemeditor:hide")
            }, r.prototype.render = function () {
                return this.setCurrentBucket(), r.__super__.render.apply(this, arguments)
            }, r.prototype.slideBalloonIntoView = function () {
                var e = this;
                return _.defer(function () {
                    return e.$("> div.balloon").slideIntoView()
                })
            }, r.prototype.repositionRelativeTo = function (e) {
                var t, n, r, i, s, o, u, a, f, l;
                return i = $(e), r = $(e).find("> span.event"), n = r.outerWidth() > i.outerWidth() ? i : r, t = this.$("> div.balloon"), l = n.offset(), u = l.left, f = l.top, o = n.width(), s = t.outerWidth() + t.find("> span.arrow").outerWidth(), a = $(document).width(), u + o + s > a ? (this.setArrowOrientation("left"), $(this.el).offset({
                            top: f,
                            left: u
                        })) : (this.setArrowOrientation("right"), $(this.el).offset({
                            top: f,
                            left: u + o
                        })), this.slideBalloonIntoView()
            }, r.prototype.setArrowOrientation = function (e) {
                var t;
                return t = this.$("> div.balloon"), e === "right" ? t.removeClass("left_side").addClass("right_side") : t.removeClass("right_side").addClass("left_side")
            }, r.prototype.autofocus = function () {
                $(":input[name=summary], :input[name=description]").autoResize();
                if (this.calendarEvent.isNew()) return $(":input[name=summary]").focus().select()
            }, r.prototype.setupPlaceholder = function () {
                return $(this.el).find("[data-behavior~=placeholder]").placeholder()
            }, r.prototype.enableBucketAndSubscriberFields = function () {
                var e, t;
                e = this.$("fieldset[data-role=bucket_fields]"), t = this.$("fieldset[data-role=subscriber_fields]");
                if (e.find(":input:disabled").length) {
                    t.replaceWith(JST["templates/calendar_event_editor/subscriber_fields"](this));
                    if (this.currentPersonCanChangeBucket()) return e.replaceWith(JST["templates/calendar_event_editor/bucket_fields"](this))
                }
            }, r.prototype.updateCalendarEventAttributes = function () {
                var e, t, n, i;
                r.__super__.updateCalendarEventAttributes.apply(this, arguments), i = this.$(":input[name~=wants_notification]").is(":checked"), n = function () {
                    var t, n, r, i;
                    r = this.calendarEvent.subscribers(), i = [];
                    for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.get("person_id"));
                    return i
                }.call(this);
                if (i) switch (this.$(":input[name~='subscriber[group]']:checked").val()) {
                case "me":
                    n = [bcx.currentPerson.id];
                    break;
                case "everyone":
                    n = function () {
                        var e, n, r, i;
                        r = this.selectedBucket().people(), i = [];
                        for (e = 0, n = r.length; e < n; e++) t = r[e], i.push(t.get("person_id"));
                        return i
                    }.call(this);
                    break;
                case "selected":
                    n = this.selectedsubscriberIds()
                }
                return this.calendarEvent.set({
                        wants_notification: i,
                        subscribers: n
                    })
            }, r.prototype.initializeSlider = function () {
                return this.$("[data-behavior~=slider]").slider()
            }, r.prototype.setWantsNotification = function () {
                if (this.calendarEvent.get("wants_notification")) return this.toggleWantsNotification()
            }, r.prototype.bucketSelected = function (e) {
                var t, n, r, i, s, o, u, a, f;
                t = this.selectedBucket(), f = [], o = this.$(":input[name~='subscriber[group]']:checked").val();
                if (!this.calendarEvent.isNew() && t === this.calendarEvent.bucket()) f = this.calendarEvent.subscribers();
                else if (o === "everyone" || o === "selected") o === "everyone" ? u = function () {
                    var e, t, n, r;
                    n = this.$(":input[name='message[subscribers][]']"), r = [];
                    for (e = 0, t = n.length; e < t; e++) a = n[e], r.push(a.value);
                    return r
                }.call(this): u = this.selectedsubscriberIds(),
                r = function () {
                    var e, t, n;
                    n = [];
                    for (e = 0, t = u.length; e < t; e++) i = u[e], n.push(bcx.peopleAndGroups.get("person_" + i));
                    return n
                }(),
                n = _(t.people()),
                f = _(r).select(function (e) {
                    return n.include(e)
                });
                this.$("[data-role~=subscriber_options]").html(JST["templates/calendar_event_editor/subscriber_options"]({
                            subscribers: f,
                            unsubscribers: t.unsubscribers(),
                            bucket: t
                        })), this.$("[data-role~=bucket_subscribers]").html(JST["templates/bucket_subscribers"]({
                            bucket: t,
                            selectedSubscribers: f
                        })), r != null && r.length !== f.length && this.$("p.subscribers_modified").fadeIn("300"), s = this.$(":input[name~='subscriber[group]']:checked");
                if (s.val() !== o) return s.closest("label").highlight()
            }, r.prototype.doneEditingClicked = function (e) {
                var t, n, r, i = this;
                return t = this.selectedBucket(), n = _(this.selectedsubscriberIds()), r = _(t.people()).select(function (e) {
                    return n.include("" + e.get("person_id"))
                }), this.$("[data-role~=subscriber_options]").html(JST["templates/calendar_event_editor/subscriber_options"]({
                            subscribers: r,
                            unsubscribers: t.unsubscribers(),
                            bucket: t
                        }))
            }, r.prototype.changeSubscribersClicked = function (e) {
                var t = this;
                return setTimeout(function () {
                    return t.$(":input[name=~'subscriber[group]'][value='selected']").attr("checked", !0)
                }, 1)
            }, r.prototype.toggleWantsNotification = function () {
                var e, t;
                return e = this.$(":input[name~=wants_notification]"), t = this.$("[data-role~=subscriber_options]"), this.$(".slides").css({
                        height: "auto"
                    }), e.is(":checked") ? (t.expand(), this.slideBalloonIntoView()) : t.collapse()
            }, r.prototype.toggleAllSubscribers = function (e) {
                var t, n;
                return e.preventDefault(), t = $(e.currentTarget), n = t.data("behavior") === "subscriber_select_all", this.$('input:checkbox[name~="message[subscribers][]"]').attr("checked", n)
            }, r.prototype.selectedBucket = function () {
                var e;
                if (e = this.$(":input[name=bucket]").val()) return bcx.getBucket(e)
            }, r.prototype.selectedsubscriberIds = function () {
                var e, t, n, r, i;
                r = this.$(":input[name='message[subscribers][]']:checked"), i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.value);
                return i
            }, r.prototype.finalizePopover = function () {
                var e;
                return this.$("input[name~=wants_notification]").removeAttr("disabled"), this.$(":input[name=bucket]").val() != null && this.bucketSelected(), e = this.$("select[name~=bucket]"), this.currentPersonCanChangeBucket() ? e.removeAttr("disabled") : e.closest("[data-role~=bucket_container]").hide()
            }, r.prototype.currentPersonCanChangeBucket = function () {
                return this.calendarEvent.isNew() || bcx.currentPerson.isAdmin() || bcx.currentPerson.id === this.calendarEvent.get("creator_id")
            }, r.prototype.calendarEventRequestSucceeded = function () {
                var e;
                return e = this.calendarEvent.subscribers(), this.display.setBucketVisibility(this.calendarEvent.bucket(), !0), this.calendarEvent.isNew() && e.length && (e.length > 1 || e[0].get("person_id") !== bcx.currentPerson.id) ? this.markAsNotified() : (this.markAsNotBusy(), this.hide())
            }, r.prototype.calendarEventRequestFailed = function () {
                return this.markAsFailed()
            }, r.prototype.markAsNotified = function () {
                var e;
                return e = $(this), this.updateAlertText("data-succeeded-text"), this.$("form").addClass("succeeded").onTransitionEnd(function () {
                    var t = this;
                    return setTimeout(function () {
                        return e.trigger("hide")
                    }, 1e3)
                })
            }, r.prototype.markAsFailed = function () {
                return this.updateAlertText("data-failed-text"), this.$("form").addClass("failed").onTransitionEnd(function () {
                    var e = this;
                    return setTimeout(function () {
                        return e.$("form").removeClass("failed busy")
                    }, 1250)
                })
            }, r.prototype.updateAlertText = function (e) {
                var t;
                return t = this.$("form").find("[data-behavior~=calendar_alert]"), t.html(t.attr(e))
            }, r.prototype.submitForm = function () {
                if (!this.$("form[data-behavior~=edit_calendar_todo]").length) return this.storeLastUsedBucket(), r.__super__.submitForm.apply(this, arguments)
            }, r.prototype.storeLastUsedBucket = function () {
                return this.lastUsedBucket = this.selectedBucket()
            }, r.prototype.cancelRecurrenceChange = function () {
                var e;
                if ((e = this.calendarEvent) != null ? e.fromStartDate : void 0) return this.calendarEvent.setStartDate(this.calendarEvent.fromStartDate), this.calendarEvent.fromStartDate = null
            }, r
        }(bcx.AbstractCalendarEventEditor)
    }.call(this),
    function () {
        var e, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            };
        e = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return n(t, e), t.viewName("calendar_jump"), t.include(bcx.views.Popover), t.recordName("cursor"), t.prototype.className = "position_reference", t.prototype.events = {
                "click [data-direction=backward]": "navigateBackward",
                "click [data-direction=forward]": "navigateForward",
                "click [data-date]": "monthClicked"
            }, t.prototype.initialize = function () {
                return this.display = bcx.calendarDisplay, this.cursor = this.display.getSignificantDate()
            }, t.prototype.getFirstMonth = function () {
                var e;
                return e = CalendarDate.today().year % 2, this.cursor.year % 2 === e ? this.cursor.beginningOfYear() : this.cursor.beginningOfYear().previous().beginningOfYear()
            }, t.prototype.navigateBackward = function () {
                return this.cursor = this.cursor.nextMonth(-24), this.render(), !1
            }, t.prototype.navigateForward = function () {
                return this.cursor = this.cursor.nextMonth(24), this.render(), !1
            }, t.prototype.monthClicked = function (e) {
                var t;
                return t = CalendarDate.parse($(e.currentTarget).data("date")), this.display.navigateToMonth(t), this.hide(), !1
            }, t
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            };
        e = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return n(t, e), t.viewName("calendar_list"), t.prototype.initialize = function () {
                return this.renderLater = _.debounce(this.render), this.calendars = bcx.calendars, this.calendars.bind("all", this.renderLater), this.projects = bcx.projects, this.projects.bind("all", this.renderLater), this.display = bcx.calendarDisplay, this.display.bind("change:hiddenBucketData", this.renderLater), this.display.bind("change:zoomedIn", this.renderLater), bcx.bucketAccesses.bind("all", this.renderLater), bcx.todos.bind("all", this.renderLater)
            }, t
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in
                    t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        e = function (e) {
            function n() {
                return this.hideSpinner = t(this.hideSpinner, this), this.showSpinner = t(this.showSpinner, this), this.cursorChanged = t(this.cursorChanged, this), n.__super__.constructor.apply(this, arguments)
            }
            return r(n, e), n.viewName("calendar_navigation"), n.prototype.tagName = "header", n.prototype.events = {
                "click [data-behavior~=navigate]": "navigationButtonClicked",
                "click [data-behavior~=jump_to_month]": "jumpToMonthLinkClicked"
            }, n.prototype.initialize = function () {
                return this.display = bcx.calendarDisplay, this.display.afterDisplayChanges(this.cursorChanged), this.display.bind("current_date_range:loading", this.showSpinner), this.display.bind("current_date_range:loaded", this.hideSpinner)
            }, n.prototype.installSubviews = function () {
                return n.__super__.installSubviews.apply(this, arguments), this.jump = this.findSubviewByName("calendar_jump")
            }, n.prototype.cursorChanged = function () {
                return this.jump.hide(), this.render()
            }, n.prototype.navigationButtonClicked = function (e) {
                var t;
                t = $(e.currentTarget).data("direction");
                switch (t) {
                case "backward":
                    this.display.navigateBackward();
                    break;
                case "forward":
                    this.display.navigateForward();
                    break;
                case "today":
                    this.display.navigateToToday()
                }
                return !1
            }, n.prototype.jumpToMonthLinkClicked = function (e) {
                return this.jump.showWith(this.display.getSignificantDate()), !1
            }, n.prototype.showSpinner = function () {
                return this.showingSpinner = !0, this.$("span.busy").show()
            }, n.prototype.hideSpinner = function () {
                return this.showingSpinner = !1, this.$("span.busy").hide()
            }, n
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        this.DateDisplayView = function (e) {
            function r() {
                return r.__super__.constructor.apply(this, arguments)
            }
            var n;
            return t(r, e), r.viewName("date_display"), r.prototype.initialize = function () {
                return this.renderLater = _.debounce(this.render, 1), this.bucket = bcx.getBucket(this.identifier), this.calendarEvents = bcx.calendarEvents, this.calendarEvents.bind("all", this.renderLater), this.todos = bcx.todos, this.todos.bind("all", this.renderLater), bcx.peopleAndGroups.bind("loaded:projectParticipants", this.renderLater), bcx.peopleAndGroups.loadCurrentProjectParticipants()
            }, r.prototype.render = function () {
                return this.setEventsForDisplay(), r.__super__.render.apply(this, arguments)
            }, r.prototype.getColor = function () {
                var e, t;
                return (e = (t = bcx.currentProject) != null ? t.getColor() : void 0) != null ? e : bcx.bucketColors[0]
            }, r.prototype.addUpcomingRecurrences = function () {
                var e, t = this;
                return e = this.calendarEvents.select(function (e) {
                    return e.bucket() === t.bucket && e.isRecurring()
                }), _(e).each(function (e) {
                    return e.addRecurrencesInRange(CalendarDate.today(), CalendarDate.today().next(84))
                })
            }, r.prototype.setEventsForDisplay = function () {
                var e = this;
                return this.addUpcomingRecurrences(), this.events = this.calendarEvents.select(function (t) {
                    return t.bucket() === e.bucket
                }).concat(bcx.todos.select(function (t) {
                            return t.bucket() === e.bucket
                        })), this.pastEvents = n(this.events, "past"), this.upcomingEvents = n(this.events, "upcoming")
            }, r.prototype.renderDateAndEvents = function (e, t) {
                var n, r;
                return this.safe(JST["templates/day_of_date"]({
                            day: e,
                            calendarEvents: (n = t.CalendarEvent) != null ? n : [],
                            todos: (r = t.Todo) != null ? r : [],
                            color: this.getColor(),
                            emojify: this.emojify,
                            pluralize: this.pluralize,
                            isTemplate: this.bucket.isTemplate()
                        }))
            }, n = function (e, t) {
                var n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C, k, L, A;
                d = CalendarDate.today(), f = 0, r = t === "upcoming" ? function (e) {
                    return e.date >= d.date
                } : function (e) {
                    return e.date < d.date
                }, o = {};
                for (g = 0, w = e.length; g < w; g++) {
                    s = e[g], x = s.getDates();
                    for (y = 0, E = x.length; y < E; y++) {
                        n = x[y];
                        if (!r(n)) continue;
                        v = s.constructor.modelName, a = n.toString(), p = (T = o[a]) != null ? T : o[a] = {}, (N = p[v]) == null && (p[v] = []), p[v].push(s), f++
                    }
                }
                c = {
                    length: f
                }, i = Object.keys(o).sort(), t === "past" && (i = i.reverse());
                for (b = 0, S = i.length; b < S; b++) a = i[b], u = o[a], n = CalendarDate.parse(a), h = n.is(d) ? (C = c.today) != null ? C : c.today = [] : t === "upcoming" && n.occursThisWeek() ? (k = c.thisWeek) != null ? k : c.thisWeek = [] : (l = n.beginningOfMonth().toString(), (L = c.byMonth) != null ? L : c.byMonth = [], (A = (m = c.byMonth)[l]) != null ? A : m[l] = []), h.push([n, u]);
                return c
            }, r
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            }, r = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            };
        e = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return n(t, e), t.prototype.template = "templates/membership_suggestions", t
        }(bcx.views.AutocompletePeopleSuggestions), bcx.views.MemberField = function (t) {
            function i() {
                return this.remove = r(this.remove, this), this.replace = r(this.replace, this), this.appendTo = r(this.appendTo, this), this.modelRemoved = r(this.modelRemoved, this), this.modelReplaced = r(this.modelReplaced, this), i.__super__.constructor.apply(this, arguments)
            }
            return n(i, t), i.prototype.className = "person invitee member field", i.prototype.template = "templates/member_field", i.prototype.events = {
                "focus input": "inputFocused",
                "input:change input": "inputChanged",
                "suggestions:commit": "suggestionPicked",
                "click [data-behavior~=remove_member]": "removeControlClicked"
            }, i.prototype.initialize = function () {
                return this.selection = this.options.selection, this.install(), this.suggestionsView = new e({
                        el: this.el,
                        model: this.model,
                        collection: this.collection
                    })
            }, i.prototype.install = function () {
                return this.model.bind("replace", this.modelReplaced), this.model.bind("remove", this.modelRemoved)
            }, i.prototype.uninstall = function () {
                return this.model.unbind("replace", this.modelReplaced), this.model.unbind("remove", this.modelRemoved), this.unbind()
            }, i.prototype.render = function () {
                return $(this.el).html(JST[this.template](this)), this.updateHiddenInputs(), this.updateAllClassNames()
            }, i.prototype.update = function () {
                return this.updateHiddenInputs(), this.updateBlankClassName(), $(this.el).removeClass("invalid"), $(this.el).removeClass("unknown")
            }, i.prototype.updateHiddenInputs = function () {
                return this.$("[data-role~=person_id_input]").val(this.model.get("person_id"))
            }, i.prototype.updateAllClassNames = function () {
                return this.updateBlankClassName(), this.updateUnknownClassName(), this.updateDisabledClassName()
            }, i.prototype.updateBlankClassName = function () {
                return $(this.el).toggleClass("blank", this.model.isBlank())
            }, i.prototype.updateUnknownClassName = function () {
                return $(this.el).toggleClass("unknown", this.model.hasUnknownName())
            }, i.prototype.updateDisabledClassName = function () {
                return $(this.el).toggleClass("disabled", this.model.isDisabled())
            }, i.prototype.inputFocused = function () {
                return $(this.el).addClass("focused"), this.events.clickoutside = "inputLostFocus", this.events.focusoutside = "inputLostFocus", this.delegateEvents()
            }, i.prototype.inputLostFocus = function () {
                return $(this.el).removeClass("focused"), delete this.events.clickoutside, delete this.events.focusoutside, this.delegateEvents(), this.render()
            }, i.prototype.inputChanged = function (e, t) {
                return this.model.setInput(t.currentValue)
            }, i.prototype.suggestionPicked = function (e, t) {
                return e.preventDefault(), this.selection.replace(this.model, t.suggestion)
            }, i.prototype.removeControlClicked = function (e) {
                return $(e.target).addClass("activated"), this.selection.remove(this.model)
            }, i.prototype.modelReplaced = function (e) {
                return this.trigger("replace", this, e)
            }, i.prototype.modelRemoved = function () {
                return this.remove()
            }, i.prototype.appendTo = function (e) {
                return this.render(), $(e).append(this.el)
            }, i.prototype.replace = function (e) {
                return this.render(), $(e).replaceWith(this.el)
            }, i.prototype.remove = function () {
                var e = this;
                return this.uninstall(), $(this.el).delay(50).animate({
                        opacity: 0
                    }, 200, "linear", function () {
                        return $(e.el).animate({
                                height: 0
                            }, Math.sqrt($(e.el).height()) * 50, "easeOutQuad", function () {
                                return $(e.el).remove()
                            })
                    })
            }, i.prototype.readOnly = function () {
                return this.model.has("id")
            }, i.prototype.removable = function () {
                return this.readOnly() && this.model.isEnabled()
            }, i
        }(bcx.View)
    }.call(this),
    function () {
        var e, t, n, r = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, i = {}.hasOwnProperty,
            s = function (e, t) {
                function r() {
                    this.constructor = e
                }
                for (var n in t) i.call(t, n) && (e[n] = t[n]);
                return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
            };
        t = bcx.collections.PeopleAndGroups, e = bcx.views.MemberField, bcx.views.MemberFieldList = function (i) {
            function o() {
                return this.resetView = r(this.resetView, this), this.replaceView = r(this.replaceView, this), this.addView = r(this.addView, this), o.__super__.constructor.apply(this, arguments)
            }
            return s(o, i), o.prototype.firsthumanInput = "[data-role~=human_input]:first", o.prototype.events = {
                "focus div.field:last-child": "lastFieldFocused"
            }, o.prototype.initialize = function () {
                return this.disabledIds = $(this.el).data("disabled-ids"), this.collection = new t($(this.el).data("people"), {
                        disabledIds: this.disabledIds
                    }), this.selection = new n([new this.collection.model, new this.collection.model, new this.collection.model]), this.selection.each(this.addView), this.selection.bind("add", this.addView), this.selection.bind("reset", this.resetView)
            }, o.prototype.createView = function (t) {
                var n, r;
                return n = e, r = new n({
                        model: t,
                        collection: this.collection,
                        selection: this.selection
                    }), r.bind("replace", this.replaceView)
            }, o.prototype.addView = function (e) {
                var t;
                return t = this.createView(e), t.appendTo(this.el)
            }, o.prototype.replaceView = function (e, t) {
                var n;
                return n = this.createView(t), n.replace(e.el), this.focusNextField(n.el)
            }, o.prototype.resetView = function () {
                return $(this.el).html(""), this.selection.each(this.addView)
            }, o.prototype.lastFieldFocused = function (e) {
                if (this.$("div.blank.field").size() === 1) return this.selection.add(new this.collection.model)
            }, o.prototype.focusNextField = function (e) {
                return $(e).next("div.field").find(this.firsthumanInput).focus()
            }, o.prototype.focus = function () {
                return this.$(this.firsthumanInput).focus()
            }, o.prototype.reset = function () {
                return this.selection.reset([new this.collection.model, new this.collection.model, new this.collection.model])
            }, o.prototype.reload = function () {
                return this.collection = new t($(this.el).data("people"), {
                        disabledIds: this.disabledIds
                    }), this.reset()
            }, o
        }(bcx.View), n = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return s(t, e), t.prototype.add = function (e, n) {
                var r, i, s, o;
                n == null && (n = {}), _.isArray(e) || (e = [e]);
                for (s = 0, o = e.length; s < o; s++) i = e[s], (r = this.getByCid(i.cid)) && this.remove(r, n);
                return t.__super__.add.call(this, e, n)
            }, t.prototype.replace = function (e, t) {
                return this.remove(t), this.remove(e, {
                        silent: !0
                    }), this.add(t, {
                        silent: !0
                    }), t.isGroup() && this.add(t.members().enabled(), {
                        silent: !0
                    }), e.trigger("replace", t), this.trigger("replace", e, t)
            }, t
        }(Backbone.Collection)
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        e = function (e) {
            function n() {
                return this.hide = t(this.hide, this), n.__super__.constructor.apply(this, arguments)
            }
            return r(n, e), n.viewName("project_calendar_event_editor"), n.include(bcx.views.Autoresize), n.prototype.initialize = function () {
                var e;
                return n.__super__.initialize.apply(this, arguments), e = this.identifier.split("-")[0].split(":"), this.bucketType = e[0], this.bucketId = e[1], e
            }, n.prototype.renderWithCalendarEvent = function (e) {
                return this.calendarEvent = e, this.render(), this.setupPlaceholder()
            }, n.prototype.autofocus = function () {
                var e = this;
                return _.defer(function () {
                    return e.$(":input[name=summary]").focus().get(0).select()
                })
            }, n.prototype.setupPlaceholder = function () {
                return $(this.el).find("[data-behavior~=placeholder]").placeholder()
            }, n.prototype.hide = function () {
                return $(this.el).find("article.calendar_event.new").collapse(), $("#calendar_event").show(), $("#calendar_event_form").hide()
            }, n.prototype.updateCalendarEventAttributes = function () {
                var e, t, r, i, s, o, u;
                n.__super__.updateCalendarEventAttributes.apply(this, arguments), $(":input[name='calendar_event[subscribers][]'][type~=hidden]"), s = function () {
                    var e, t, n, r;
                    n = this.$(":input[name='calendar_event[subscribers][]']:checked"), r = [];
                    for (e = 0, t = n.length; e < t; e++) i = n[e], r.push(i.value);
                    return r
                }.call(this), t = this.$(":input[name='calendar_event[subscribers][]'][type~=hidden]:not([disabled])");
                for (o = 0, u = t.length; o < u; o++) e = t[o], s.push(e.value);
                return this.calendarEvent.set({
                        subscribers: s
                    }), r = function () {
                    var e, t, n, r;
                    n = this.$(":input[name='calendar_event[new_subscriber_emails][]']"), r = [];
                    for (e = 0, t = n.length; e < t; e++) i = n[e], r.push(i.value);
                    return r
                }.call(this), this.calendarEvent.set({
                        new_subscriber_emails: _(r).compact()
                    })
            }, n.prototype.selectedBucket = function () {
                return this.calendarEvent.bucket()
            }, n.prototype.calendarEventRecurrenceRequestSucceeded = function () {
                return Stacker.workspace.visit(this.calendarEvent.url(), {
                        replaceSheet: !0
                    })
            }, n
        }(bcx.AbstractCalendarEventEditor), bcx.ProjectCalendarEventEditorView = e
    }.call(this),
    function () {
        var e, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            };
        e = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return n(t, e), t.viewName("project_dates"), t.prototype.initialize = function () {
                return this.truncationLimit = 5, this.today = CalendarDate.today(), this.project = bcx.projects.get(this.identifier), this.calendarEvents = bcx.calendarEvents, this.calendarEvents.bind("all", _.debounce(this.render))
            }, t.prototype.render = function () {
                return t.__super__.render.apply(this, arguments), this.updateSheetMargin()
            }, t.prototype.truncatedUpcomingEventsGroupedByDate = function () {
                var e, t, n, r, i, s, o, u, a, f;
                r = this.allUpcomingEvents().slice(0, this.truncationLimit - 1), s = {};
                for (u = 0, a = r.length; u < a; u++) e = r[u], o = e.getStartDate(), n = (e.isSpanned() && o.date < this.today.date ? this.today : o).toString(), (f = s[n]) == null && (s[n] = []), s[n].push(e);
                t = [];
                for (e in s) i = s[e], t.push([e, i]);
                return _(t).sortBy(function (e) {
                    return CalendarDate.parse(e[0])
                })
            }, t.prototype.moreUpcomingEventsCount = function () {
                var e;
                return e = this.allUpcomingEvents().length, e > this.truncationLimit ? e - this.truncationLimit : 0
            }, t.prototype.dateLabelFor = function (e) {
                return e.value === this.today.value ? "Today" : e.occursThisYear() ? "" + e.getMonthName() + " " + e.day : "" + e.getMonthName() + " " + e.day + ", " + e.year
            }, t.prototype.untilDateFor = function (e) {
                return e.isSpanned() ? "(until " + this.dateLabelFor(e.getEndDate()) + ")" : ""
            }, t.prototype.updateSheetMargin = function () {
                var e, t;
                return t = this.allUpcomingEvents().length, e = $("div.project > div.sheet_body"), t > 0 ? e.addClass("has_upcoming_events") : e.removeClass("has_upcoming_events")
            }, t.prototype.allUpcomingEvents = function () {
                var e, t = this;
                return e = _(this.calendarEvents.getCalendarEventsOccurringOnOrAfter(this.today)).select(function (e) {
                    return e.bucket() === t.project
                }), _.reject(e, function (e) {
                    return e.isTimed() && e.getStartsAt() < (new Date).getTime()
                })
            }, t
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            };
        e = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return n(t, e), t.viewName("project_editor"), t.include(bcx.views.Popover), t.recordName("project"), t.prototype.events = {
                "submit form": "submitForm",
                "click [data-behavior~=cancel]": "cancel"
            }, t.prototype.initialize = function () {
                return this.project = new bcx.models.Project
            }, t.prototype.submitForm = function () {
                var e = this;
                return this.$("form").addClass("busy"), this.project.save(this.getProjectAttributes(), {
                        success: function () {
                            return e.hide()
                        },
                        error: function () {
                            return console.warn("failure!")
                        }
                    }), !1
            }, t.prototype.getProjectAttributes = function () {
                return {
                    color: this.$("[name=color]:checked").val()
                }
            }, t.prototype.cancel = function () {
                return this.hide()
            }, t.prototype.afterHide = function (e) {
                if (!e) return $(this.el).trigger("project_editor:hide")
            }, t
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e, t, n, r, i, s, o, u, a = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, f = {}.hasOwnProperty,
            l = function (e, t) {
                function r() {
                    this.constructor = e
                }
                for (var n in t) f.call(t, n) && (e[n] = t[n]);
                return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
            };
        u = function () {
            function e(e) {
                var t;
                this.project = e, this.scrollTo = a(this.scrollTo, this), this.selector = "section[data-collection-name=" + this.name + "]", (t = this.counter) == null && (this.counter = "" + this.name + "_count")
            }
            return e.prototype.url = function (e) {
                return e == null && (e = ""), "/" + bcx.currentAccountSlug + "/projects/" + this.project.get("param") + "/" + this.name + e
            }, e.prototype.count = function () {
                return this.project.get(this.counter)
            }, e.prototype.pluralizedCount = function () {
                var e;
                switch (e = this.count()) {
                case 0:
                    return "" + this.title + "s";
                case 1:
                    return "1 " + this.title;
                default:
                    return "" + e + " " + this.title + "s"
                }
            }, e.prototype.isInProject = function () {
                return this.project.get("" + this.name + "_count") !== 0
            }, e.prototype.isNotInProject = function () {
                return this.project.get("" + this.name + "_count") === 0
            }, e.prototype.scrollTo = function () {
                return $.scrollTo(this.selector, 500, {
                        offset: -40
                    })
            }, e.prototype.open = function () {
                return Stacker.workspace.visit(this.url())
            }, e.prototype.create = function () {
                return $("" + this.selector + " > article.new").expand(), setTimeout(this.scrollTo, 10)
            }, e
        }(), t = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return l(t, e), t.prototype.name = "topics", t.prototype.title = "Discussion", t.prototype.pitch = "Discussion", t.prototype.create = function () {
                return Stacker.workspace.visit("/" + bcx.currentAccountSlug + "/projects/" + this.project.get("param") + "/messages/new")
            }, t
        }(u), r = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return l(t, e), t.prototype.name = "attachments", t.prototype.title = "File", t.prototype.pitch = "File", t
        }(u), o = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return l(t, e), t.prototype.name = "todolists", t.prototype.title = "To-do", t.prototype.pitch = "To-do list", t.prototype.counter = "remaining_todos_count", t.prototype.pluralizedCount = function () {
                var e;
                switch (e = this.count()) {
                case 0:
                    switch (e = this.project.get("completed_todos_count")) {
                    case 0:
                        return "" + this.title + "s";
                    case 1:
                        return "1 completed to-do";
                    default:
                        return "" + e + " completed to-dos"
                    }
                    break;
                case 1:
                    return "1 " + this.title;
                default:
                    return "" + e + " " + this.title + "s"
                }
            }, t
        }(u), n = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return l(t, e), t.prototype.name = "documents", t.prototype.title = "Text document", t.prototype.pitch = "Text document", t.prototype.create = function () {
                return $.ajax(this.url(), {
                        type: "POST"
                    })
            }, t
        }(u), i = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return l(t, e), t.prototype.name = "forwards", t.prototype.title = "Forwarded email", t.prototype.pitch = "Forwarded email", t.prototype.isNotInProject = function () {
                return !1
            }, t
        }(u), e = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return l(t, e), t.prototype.name = "calendar_events", t.prototype.title = "Date", t.prototype.pitch = "Date", t.prototype.pluralizedCount = function () {
                return "Dates"
            }, t.prototype.isInProject = function () {
                return t.__super__.isInProject.apply(this, arguments) || this.project.get("completed_todos_count") !== 0 || this.project.get("remaining_todos_count") !== 0
            }, t.prototype.isNotInProject = function () {
                return !this.isInProject()
            }, t.prototype.create = function () {
                return Stacker.workspace.visit(this.url() + "#create")
            }, t
        }(u), s = function (s) {
            function u() {
                return this.toolLinkClicked = a(this.toolLinkClicked, this), u.__super__.constructor.apply(this, arguments)
            }
            return l(u, s), u.viewName("project_toolbar"), u.tools = [t, o, r, n, i, e], u.prototype.events = {
                "click a[data-tool-name]": "toolLinkClicked"
            }, u.prototype.initialize = function () {
                var e;
                return this.project = bcx.projects.getOrAdd(this.identifier), this.project.bind("change", this.render), this.tools = function () {
                    var t, n, r, i;
                    r = this.constructor.tools, i = [];
                    for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(new e(this.project));
                    return i
                }.call(this)
            }, u.prototype.toolLinkClicked = function (e) {
                var t, n, r;
                if (!Stacker.isStandardClick(e)) return;
                return t = $(e.currentTarget), n = t.data("tool-name"), r = this.findTool(n), r.isInProject() ? e.shiftKey ? r.scrollTo() : r.open() : r.create(), !1
            }, u.prototype.findTool = function (e) {
                return _.detect(this.tools, function (t) {
                    return t.name === e
                })
            }, u.prototype.visibleToolsInProject = function () {
                return _.select(this.tools, function (e) {
                    return e.isInProject()
                })
            }, u.prototype.visibleToolsNotInProject = function () {
                return _.select(this.tools, function (e) {
                    return e.isNotInProject()
                })
            }, u
        }(bcx.Autoview)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.views.RelativeDatePicker = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.prototype.template = "templates/relative_date_picker", n.prototype.events = {
                "mousedown a[data-behavior=next]": "nextWeek",
                "mousedown a[data-behavior=previous]": "previousWeek",
                "mousedown a[data-wday]": "onDaySelect"
            }, n.prototype.initialize = function () {
                return this.due_week = this.options.due_week, this.due_week = this.due_week === "" ? 0 : parseInt(this.due_week), this.current_week = this.due_week, this.due_wday = parseInt(this.options.due_wday)
            }, n.prototype.render = function () {
                return $(this.el).html(JST[this.template](this))
            }, n.prototype.onDaySelect = function (e) {
                return e.preventDefault(), e.stopPropagation(), this.due_wday = parseInt($(e.target).data("wday")), this.options.onDatePick && this.options.onDatePick(this.current_week, this.due_wday), this.blurDayField()
            }, n.prototype.setWeekAndDay = function (e, t) {
                this.current_week = e, this.due_wday = t;
                if (this.options.onDatePick) return this.options.onDatePick(this.current_week, this.due_wday)
            }, n.prototype.nextWeek = function (e) {
                return e.preventDefault(), e.stopPropagation(), this.current_week += 1, this.render(), this.blurDayField()
            }, n.prototype.previousWeek = function (e) {
                return e.preventDefault(), e.stopPropagation(), this.current_week > 0 && (this.current_week -= 1), this.render(), this.blurDayField()
            }, n.prototype.blurDayField = function () {
                return setTimeout(function () {
                    return $("input[data-relative-date]").blur()
                }, 10)
            }, n
        }(bcx.View)
    }.call(this),
    function () {
        var e, t = {}.hasOwnProperty,
            n = function (e, n) {
                function i() {
                    this.constructor = e
                }
                for (var r in n) t.call(n, r) && (e[r] = n[r]);
                return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
            }, r = [].indexOf || function (e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        e = bcx.collections.PeopleAndGroups, bcx.views.SubscriberList = function (t) {
            function i() {
                return i.__super__.constructor.apply(this, arguments)
            }
            return n(i, t), i.prototype.template = "templates/subscribers", i.prototype.events = {
                "change input:checkbox": "subscriberChanged",
                "click [data-behavior~=subscriber_select_all], [data-behavior~=subscriber_select_none]": "toggleAll",
                "click [data-group-id]": "toggleGroup"
            }, i.prototype.initialize = function () {
                return this.project = bcx.currentProject, this.people = new e($(this.el).data("people")), this.currentPerson = this.people.get("person_" + bcx.currentPerson.id), this.people.remove(this.currentPerson), this.showCurrentPerson = $(this.el).data("keep-current-person"), this.defaultSubscribeAll = $(this.el).data("default-subscribe-all"), this.groups = new e($(this.el).data("groups")), this.cleanupGroups(), this.subscriberIds = $(this.el).data("subscriber-ids"), this.subscribable = $(this.el).data("subscribable")
            }, i.prototype.render = function () {
                return $(this.el).html(JST[this.template](this)), this.toggleGroupActivation()
            }, i.prototype.subscriberChanged = function (e) {
                var t, n = this;
                return t = parseInt($(e.currentTarget).val()), this.groups.each(function (e) {
                    if (r.call(n.groupMemberIds(e), t) >= 0) return $(n.el).find("[data-group-id~=" + e.id + "]").toggleClass("activated", n.areAllGroupMembersChecked(e))
                })
            }, i.prototype.toggleAll = function (e) {
                var t, n;
                return e.preventDefault(), t = $(e.currentTarget), n = t.data("behavior") === "subscriber_select_all", $(this.el).find(":checkbox").attr("checked", n), $(this.el).find("[data-group-id]").toggleClass("activated", n)
            }, i.prototype.toggleGroup = function (e) {
                var t, n, i;
                e.preventDefault(), t = $(e.currentTarget), t.toggleClass("activated"), $(this.el).find("[data-parent-group-id=" + t.data("group-id") + "]").toggleClass("activated", t.hasClass("activated")), i = t.data("member-ids"), n = $(this.el).find(":checkbox").filter(function () {
                    var e;
                    return e = parseInt(this.value), r.call(i, e) >= 0
                }), n.attr("checked", t.hasClass("activated"));
                if (!t.hasClass("activated")) return this.selectActiveGroupMembers()
            }, i.prototype.groupMemberIds = function (e) {
                var t, n, r, i, s;
                return (i = this.groupMembers) == null && (this.groupMembers = {}), (s = (n = this.groupMembers)[r = e.id]) != null ? s : n[r] = _.map(_.compact(function () {
                            var n, r, i, s;
                            i = e.get("member_ids"), s = [];
                            for (n = 0, r = i.length; n < r; n++) t = i[n], s.push(this.people.get(t));
                            return s
                        }.call(this)), function (e) {
                        return e.get("person_id")
                    })
            }, i.prototype.toggleGroupActivation = function () {
                var e = this;
                return this.groups.each(function (t) {
                    return $(e.el).find("[data-group-id~=" + t.id + "]").toggleClass("activated", e.areAllGroupMembersChecked(t))
                })
            }, i.prototype.areAllGroupMembersChecked = function (e) {
                var t;
                return t = $(this.el).find(":checkbox:checked").map(function () {
                    return parseInt(this.value)
                }).get(), _.all(this.groupMemberIds(e), function (e) {
                    return _.include(t, e)
                })
            }, i.prototype.selectActiveGroupMembers = function () {
                var e;
                return e = $(this.el).find(":checkbox"), $(this.el).find("a.activated[data-group-id]").each(function () {
                    var t, n;
                    return n = $(this).data("member-ids"), t = e.filter(function () {
                        var e;
                        return e = parseInt(this.value), r.call(n, e) >= 0
                    }), t.attr("checked", !0)
                })
            }, i.prototype.cleanupGroups = function () {
                var e, t = this;
                return e = this.groups.filter(function (e) {
                    var n;
                    return n = t.groupMemberIds(e), n.length === 0 || e.isSubgroup() && n.length >= t.people.length
                }), this.groups.remove(e)
            }, i
        }(bcx.View)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        bcx.views.TaggingsView = function (e) {
            function n(e, t) {
                this.el = e, n.__super__.constructor.call(this, t)
            }
            return t(n, e), n.prototype.events = {
                "click [data-behavior~=remove_tagging]": "removeTagging"
            }, n.prototype.initialize = function () {
                return this.setTaggableTypeAndId(), this.installAddTaggingsView(), this.refresh(), $(this.el).addClass("editing")
            }, n.prototype.setTaggableTypeAndId = function () {
                return this.taggableType = $(this.el).data("taggable-type"), this.taggableId = $(this.el).data("taggable-id")
            }, n.prototype.installAddTaggingsView = function () {
                var e, t, n;
                return n = "" + this.taggableType + ":" + this.taggableId, e = $(this.el).find("[data-behavior~=edit_taggings]"), t = $("<div>").appendTo(e), this.addTaggingsView = bcx.views.AddTaggingView.findOrCreate(n), this.addTaggingsView.taggingsView = this, this.addTaggingsView.install(t.get(0))
            }, n.prototype.refresh = function () {
                return this.existingTaggings = this.findExistingTaggings(), this.existingTagNames = this.findExistingTagNames(), this.addTaggingsView.afterRefresh()
            }, n.prototype.unregister = function () {
                return this.addTaggingsView.unregister(), $(this.el).removeClass("editing")
            }, n.prototype.findExistingTaggings = function () {
                var e, t, n, r, i, s;
                t = $(this.el).find("> ul li"), s = [];
                for (r = 0, i = t.length; r < i; r++) {
                    n = t[r], e = $(n);
                    if (e.data("deleted")) continue;
                    s.push({
                            name: e.find("[data-role=tag_name]").text().trim(),
                            url: e.data("url")
                        })
                }
                return s
            }, n.prototype.findExistingTagNames = function () {
                return _(this.findExistingTaggings()).pluck("name")
            }, n.prototype.removeTagging = function (e) {
                var t, n;
                return t = $(e.currentTarget).closest("li"), n = t.data("url"), t.trigger("tagging:remove", [n, this]), !1
            }, n
        }(bcx.View)
    }.call(this),
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            }, n = {}.hasOwnProperty,
            r = function (e, t) {
                function i() {
                    this.constructor = e
                }
                for (var r in t) n.call(t, r) && (e[r] = t[r]);
                return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
            };
        e = function (e) {
            function n() {
                return this.onDocumentMouseDown = t(this.onDocumentMouseDown, this), n.__super__.constructor.apply(this, arguments)
            }
            return r(n, e), n.viewName("template_calendar_event_editor"), n.prototype.initialize = function () {
                return n.__super__.initialize.apply(this, arguments), this.events = _.extend({}, this.events, {
                        "focus td[data-behavior~=date_entry]": "showRelativeDatePicker",
                        "date_picker:hidden td[data-behavior~=date_entry]": "uninstallEventListener"
                    }), this.delegateEvents()
            }, n.prototype.installDateEntryBehavior = function (e) {
                var t, n, r, i = this;
                return t = $(e), n = t.find("[data-behavior~=relative_date_picker]"), r = new bcx.views.RelativeDatePicker({
                        el: n,
                        due_week: t.find("input[data-due-week]").val(),
                        due_wday: t.find("input[data-due-wday]").val(),
                        onDatePick: function (e, r) {
                            return t.find("input[data-due-week]").val(e), t.find("input[data-due-wday]").val(r), t.find("input[data-relative-date]").val("Week " + (e + 1) + ", " + CalendarDate.weekdayNames[r]), i.ensureMinimumSpannedEndsAtDate(), n.hide(), n.trigger("date_picker:hidden")
                        }
                    }), n.data("view", r)
            }, n.prototype.installEventListener = function () {
                return "undefined" != typeof document.attachEvent ? document.attachEvent("mousedown", this.onDocumentMouseDown) : document.addEventListener("mousedown", this.onDocumentMouseDown, !0)
            }, n.prototype.uninstallEventListener = function () {
                return "undefined" != typeof document.detachEvent ? document.detachEvent("mousedown", this.onDocumentMouseDown) : document.removeEventListener("mousedown", this.onDocumentMouseDown, !0)
            }, n.prototype.onDocumentMouseDown = function (e) {
                var t, n, r, i;
                n = $("td[data-behavior~=date_entry]");
                if (!n.length) return;
                return t = $(e.target).closest("td[data-behavior~=date_entry]"), r = t.length ? (i = t.siblings("td[data-behavior~=date_entry]"), i.find("[data-behavior~=relative_date_picker]")) : $("td[data-behavior~=date_entry] > [data-behavior~=relative_date_picker]"), r.trigger("date_picker:hidden"), r.hide()
            }, n.prototype.showRelativeDatePicker = function (e) {
                var t, n, r;
                t = $(e.currentTarget), n = t.find("[data-behavior~=relative_date_picker]");
                if (r = n.data("view")) return r.render(), this.installEventListener(), n.show()
            }, n.prototype.isEditorForTemplate = function () {
                return !0
            }, n.prototype.ensureMinimumSpannedEndsAtDate = function () {
                var e, t, n, r, i, s;
                s = this.$("[data-input~=starts_at]").data("view"), n = this.$("[data-input~=ends_at]").data("view"), i = s.current_week, t = n.current_week, r = s.due_wday, e = n.due_wday;
                if (t < i || t === i && e < r) return n.setWeekAndDay(i, r)
            }, n.prototype.updateCalendarEventAttributes = function () {
                return n.__super__.updateCalendarEventAttributes.apply(this, arguments), this.calendarEvent.set({
                        starts_at_due_week: this.field("starts_at_due_week"),
                        starts_at_due_wday: this.field("starts_at_due_wday"),
                        ends_at_due_week: this.field("ends_at_due_week"),
                        ends_at_due_wday: this.field("ends_at_due_wday")
                    })
            }, n
        }(bcx.ProjectCalendarEventEditorView)
    }.call(this),
    function () {
        var e = {}.hasOwnProperty,
            t = function (t, n) {
                function i() {
                    this.constructor = t
                }
                for (var r in n) e.call(n, r) && (t[r] = n[r]);
                return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
            };
        this.TemplateDateDisplayView = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return t(n, e), n.viewName("template_date_display"), n.prototype.initialize = function () {
                return this.bucket = bcx.getBucket(this.identifier), bcx.calendarEvents.bind("all", this.render), bcx.todos.bind("all", this.render), bcx.peopleAndGroups.bind("loaded:projectParticipants", this.render), bcx.peopleAndGroups.loadCurrentProjectParticipants()
            }, n.prototype.setEventsForDisplay = function () {
                var e = this;
                return this.todos = bcx.todos.select(function (t) {
                    return t.bucket() === e.bucket
                }), this.calendarEvents = bcx.calendarEvents.select(function (t) {
                    return t.bucket() === e.bucket
                })
            }, n.prototype.eventsGroupedByWeek = function () {
                var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T = this;
                o = {}, e = function (e, t, n) {
                    var r, i, s, u, a, f;
                    return (u = o[t]) == null && (o[t] = {}), (a = (r = o[t])[n]) == null && (r[n] = {}), (f = (i = o[t][n])[s = e.constructor.modelName]) == null && (i[s] = []), o[t][n][e.constructor.modelName].push(e)
                }, S = this.todos;
                for (d = 0, y = S.length; d < y; d++) l = S[d], e(l, l.get("due_week"), l.get("due_wday"));
                x = this.calendarEvents;
                for (v = 0, b = x.length; v < b; v++) {
                    t = x[v];
                    if (t.isSpanned()) {
                        f = t.get("start_due_week"), a = t.get("start_due_wday"), s = t.get("end_due_week"), i = t.get("end_due_wday");
                        while (f < s || f === s && a <= i) e(t, f, a), a === 6 ? (a = 0, f += 1) : a += 1
                    } else e(t, t.get("start_due_week"), t.get("start_due_wday"))
                }
                u = [], h = _(Object.keys(o)).sortBy(function (e) {
                    return parseInt(e)
                });
                for (m = 0, w = h.length; m < w; m++) {
                    c = h[m], p = [], r = Object.keys(o[c]).sort();
                    for (g = 0, E = r.length; g < E; g++) n = r[g], p.push([n, o[c][n]]);
                    u.push([c, p])
                }
                return u
            }, n
        }(this.DateDisplayView)
    }.call(this);
    de = function (t) {
        return this.queue(function () {
            var n = t.options.pieces ? Math.round(Math.sqrt(t.options.pieces)) : 3,
                r = t.options.pieces ? Math.round(Math.sqrt(t.options.pieces)) : 3;
            t.options.mode = t.options.mode == "toggle" ? e(this).is(":visible") ? "hide" : "show" : t.options.mode;
            var i = e(this).show().css("visibility", "hidden"),
                s = i.offset();
            s.top -= parseInt(i.css("marginTop"), 10) || 0, s.left -= parseInt(i.css("marginLeft"), 10) || 0;
            var o = i.outerWidth(!0),
                u = i.outerHeight(!0);
            for (var f = 0; f < n; f++)
                for (var l = 0; l < r; l++) i.clone().appendTo("body").wrap("<div></div>").css({
                        position: "absolute",
                        visibility: "visible",
                        left: -l * (o / r),
                        top: -f * (u / n)
                    }).parent().addClass("ui-effects-explode").css({
                        position: "absolute",
                        overflow: "hidden",
                        width: o / r,
                        height: u / n,
                        left: s.left + l * (o / r) + (t.options.mode == "show" ? (l - Math.floor(r / 2)) * (o / r) : 0),
                        top: s.top + f * (u / n) + (t.options.mode == "show" ? (f - Math.floor(n / 2)) * (u / n) : 0),
                        opacity: t.options.mode == "show" ? 0 : 1
                    }).animate({
                        left: s.left + l * (o / r) + (t.options.mode == "show" ? 0 : (l - Math.floor(r / 2)) * (o / r)),
                        top: s.top + f * (u / n) + (t.options.mode == "show" ? 0 : (f - Math.floor(n / 2)) * (u / n)),
                        opacity: t.options.mode == "show" ? 1 : 0
                    }, t.duration || 500);
            setTimeout(function () {
                t.options.mode == "show" ? i.css({
                        visibility: "visible"
                    }) : i.css({
                        visibility: "visible"
                    }).hide(), t.callback && t.callback.apply(i[0]), i.dequeue(), e("div.ui-effects-explode").remove()
            }, t.duration || 500)
        })
    }
}(jQuery),
function (e, t) {
    e.effects.highlight = function (t) {
        return this.queue(function () {
            var n = e(this),
                r = ["backgroundImage", "backgroundColor", "opacity"],
                i = e.effects.setMode(n, t.options.mode || "show"),
                s = {
                    backgroundColor: n.css("backgroundColor")
                };
            i == "hide" && (s.opacity = 0), e.effects.save(n, r), n.show().css({
                    backgroundImage: "none",
                    backgroundColor: t.options.color || "#ffff99"
                }).animate(s, {
                    queue: !1,
                    duration: t.duration,
                    easing: t.options.easing,
                    complete: function () {
                        i == "hide" && n.hide(), e.effects.restore(n, r), i == "show" && !e.support.opacity && this.style.removeAttribute("filter"), t.callback && t.callback.apply(this, arguments), n.dequeue()
                    }
                })
        })
    }
}(jQuery),
function (e, t) {
    e.effects.pulsate = function (t) {
        return this.queue(function () {
            var n = e(this),
                r = e.effects.setMode(n, t.options.mode || "show"),
                i = (t.options.times || 5) * 2 - 1,
                s = t.duration ? t.duration / 2 : e.fx.speeds._default / 2,
                o = n.is(":visible"),
                u = 0;
            o || (n.css("opacity", 0).show(), u = 1), (r == "hide" && o || r == "show" && !o) && i--;
            for (var f = 0; f < i; f++) n.animate({
                    opacity: u
                }, s, t.options.easing), u = (u + 1) % 2;
            n.animate({
                    opacity: u
                }, s, t.options.easing, function () {
                    u == 0 && n.hide(), t.callback && t.callback.apply(this, arguments)
                }), n.queue("fx", function () {
                    n.dequeue()
                }).dequeue()
        })
    }
}(jQuery),
function (e, t) {
    e.effects.transfer = function (t) {
        return this.queue(function () {
            var n = e(this),
                r = e(t.options.to),
                i = r.offset(),
                s = {
                    top: i.top,
                    left: i.left,
                    height: r.innerHeight(),
                    width: r.innerWidth()
                }, o = n.offset(),
                u = e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({
                        top: o.top,
                        left: o.left,
                        height: n.innerHeight(),
                        width: n.innerWidth(),
                        position: "absolute"
                    }).animate(s, t.duration, t.options.easing, function () {
                        u.remove(), t.callback && t.callback.apply(n[0], arguments), n.dequeue()
                    })
        })
    }
}(jQuery),
function (e, t, n) {
    "$:nomunge";

    function r(r, i) {
        function u(t) {
            e(s).each(function () {
                var n = e(this);
                this !== t.target && !n.has(t.target).length && n.triggerHandler(i, [t.target])
            })
        }
        i = i || r + n;
        var s = e(),
            o = r + "." + i + "-special-event";
        e.event.special[i] = {
            setup: function () {
                s = s.add(this), s.length === 1 && e(t).bind(o, u)
            },
            teardown: function () {
                s = s.not(this), s.length === 0 && e(t).unbind(o)
            },
            add: function (e) {
                var t = e.handler;
                e.handler = function (e, n) {
                    e.target = n, t.apply(this, arguments)
                }
            }
        }
    }
    e.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "), function (e) {
        r(e)
    }), r("focusin", "focus" + n), r("focusout", "blur" + n), e.addOutsideEvent = r
}(jQuery, document, "outside"), jQuery.easing.jswing = jQuery.easing.swing, jQuery.extend(jQuery.easing, {
        def: "easeOutQuad",
        swing: function (e, t, n, r, i) {
            return jQuery.easing[jQuery.easing.def](e, t, n, r, i)
        },
        easeInQuad: function (e, t, n, r, i) {
            return r * (t /= i) * t + n
        },
        easeOutQuad: function (e, t, n, r, i) {
            return -r * (t /= i) * (t - 2) + n
        },
        easeInOutQuad: function (e, t, n, r, i) {
            return (t /= i / 2) < 1 ? r / 2 * t * t + n : -r / 2 * (--t * (t - 2) - 1) + n
        },
        easeInCubic: function (e, t, n, r, i) {
            return r * (t /= i) * t * t + n
        },
        easeOutCubic: function (e, t, n, r, i) {
            return r * ((t = t / i - 1) * t * t + 1) + n
        },
        easeInOutCubic: function (e, t, n, r, i) {
            return (t /= i / 2) < 1 ? r / 2 * t * t * t + n : r / 2 * ((t -= 2) * t * t + 2) + n
        },
        easeInQuart: function (e, t, n, r, i) {
            return r * (t /= i) * t * t * t + n
        },
        easeOutQuart: function (e, t, n, r, i) {
            return -r * ((t = t / i - 1) * t * t * t - 1) + n
        },
        easeInOutQuart: function (e, t, n, r, i) {
            return (t /= i / 2) < 1 ? r / 2 * t * t * t * t + n : -r / 2 * ((t -= 2) * t * t * t - 2) + n
        },
        easeInQuint: function (e, t, n, r, i) {
            return r * (t /= i) * t * t * t * t + n
        },
        easeOutQuint: function (e, t, n, r, i) {
            return r * ((t = t / i - 1) * t * t * t * t + 1) + n
        },
        easeInOutQuint: function (e, t, n, r, i) {
            return (t /= i / 2) < 1 ? r / 2 * t * t * t * t * t + n : r / 2 * ((t -= 2) * t * t * t * t + 2) + n
        },
        easeInSine: function (e, t, n, r, i) {
            return -r * Math.cos(t / i * (Math.PI / 2)) + r + n
        },
        easeOutSine: function (e, t, n, r, i) {
            return r * Math.sin(t / i * (Math.PI / 2)) + n
        },
        easeInOutSine: function (e, t, n, r, i) {
            return -r / 2 * (Math.cos(Math.PI * t / i) - 1) + n
        },
        easeInExpo: function (e, t, n, r, i) {
            return t == 0 ? n : r * Math.pow(2, 10 * (t / i - 1)) + n
        },
        easeOutExpo: function (e, t, n, r, i) {
            return t == i ? n + r : r * (-Math.pow(2, -10 * t / i) + 1) + n
        },
        easeInOutExpo: function (e, t, n, r, i) {
            return t == 0 ? n : t == i ? n + r : (t /= i / 2) < 1 ? r / 2 * Math.pow(2, 10 * (t - 1)) + n : r / 2 * (-Math.pow(2, -10 * --t) + 2) + n
        },
        easeInCirc: function (e, t, n, r, i) {
            return -r * (Math.sqrt(1 - (t /= i) * t) - 1) + n
        },
        easeOutCirc: function (e, t, n, r, i) {
            return r * Math.sqrt(1 - (t = t / i - 1) * t) + n
        },
        easeInOutCirc: function (e, t, n, r, i) {
            return (t /= i / 2) < 1 ? -r / 2 * (Math.sqrt(1 - t * t) - 1) + n : r / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + n
        },
        easeInElastic: function (e, t, n, r, i) {
            var s = 1.70158,
                o = 0,
                u = r;
            if (t == 0) return n;
            if ((t /= i) == 1) return n + r;
            o || (o = i * .3);
            if (u < Math.abs(r)) {
                u = r;
                var s = o / 4
            } else var s = o / (2 * Math.PI) * Math.asin(r / u);
            return -(u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o)) + n
        },
        easeOutElastic: function (e, t, n, r, i) {
            var s = 1.70158,
                o = 0,
                u = r;
            if (t == 0) return n;
            if ((t /= i) == 1) return n + r;
            o || (o = i * .3);
            if (u < Math.abs(r)) {
                u = r;
                var s = o / 4
            } else var s = o / (2 * Math.PI) * Math.asin(r / u);
            return u * Math.pow(2, -10 * t) * Math.sin((t * i - s) * 2 * Math.PI / o) + r + n
        },
        easeInOutElastic: function (e, t, n, r, i) {
            var s = 1.70158,
                o = 0,
                u = r;
            if (t == 0) return n;
            if ((t /= i / 2) == 2) return n + r;
            o || (o = i * .3 * 1.5);
            if (u < Math.abs(r)) {
                u = r;
                var s = o / 4
            } else var s = o / (2 * Math.PI) * Math.asin(r / u);
            return t < 1 ? -0.5 * u * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) + n : u * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * i - s) * 2 * Math.PI / o) * .5 + r + n
        },
        easeInBack: function (e, t, n, r, i, s) {
            return s == undefined && (s = 1.70158), r * (t /= i) * t * ((s + 1) * t - s) + n
        },
        easeOutBack: function (e, t, n, r, i, s) {
            return s == undefined && (s = 1.70158), r * ((t = t / i - 1) * t * ((s + 1) * t + s) + 1) + n
        },
        easeInOutBack: function (e, t, n, r, i, s) {
            return s == undefined && (s = 1.70158), (t /= i / 2) < 1 ? r / 2 * t * t * (((s *= 1.525) + 1) * t - s) + n : r / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + n
        },
        easeInBounce: function (e, t, n, r, i) {
            return r - jQuery.easing.easeOutBounce(e, i - t, 0, r, i) + n
        },
        easeOutBounce: function (e, t, n, r, i) {
            return (t /= i) < 1 / 2.75 ? r * 7.5625 * t * t + n : t < 2 / 2.75 ? r * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + n : t < 2.5 / 2.75 ? r * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + n : r * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + n
        },
        easeInOutBounce: function (e, t, n, r, i) {
            return t < i / 2 ? jQuery.easing.easeInBounce(e, t * 2, 0, r, i) * .5 + n : jQuery.easing.easeOutBounce(e, t * 2 - i, 0, r, i) * .5 + r * .5 + n
        }
    }),
function (e) {
    window.embedlyURLre = /(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/, e.embedly = e.embedly || {};
    if (e.embedly.version) return;
    e.extend({
            embedly: function (t, n, r) {
                var i = [],
                    s = "http://api.embed.ly/",
                    o;
                typeof n != "undefined" ? o = e.extend(e.embedly.defaults, n) : o = e.embedly.defaults, o.urlRe || (o.urlRe = window.embedlyURLre), typeof t == "string" && (t = new Array(t)), typeof r != "undefined" && (o.success = r), o.secure && (s = "https://api.embed.ly/"), o.success === null && (o.success = function (t, n) {
                    var r, i = e(n.node);
                    if (!t) return null;
                    if ((r = o.method) === "replace") return i.replaceWith(t.code);
                    if (r === "after") return i.after(t.code);
                    if (r === "afterParent") return i.parent().after(t.code);
                    if (r === "replaceParent") return i.parent().replaceWith(t.code)
                }), o.error === null && (o.error = function (e, t) {});
                var u = function (e) {
                    return o.urlRe.test(e)
                }, a = function (e) {
                        var t = "urls=" + e;
                        o.maxWidth !== null ? t += "&maxwidth=" + o.maxWidth : typeof dimensions != "undefined" && (t += "&maxwidth=" + dimensions.width), o.maxHeight !== null && (t += "&maxheight=" + o.maxHeight), o.chars !== null && (t += "&chars=" + o.chars), o.words !== null && (t += "&words=" + o.words), t += "&wmode=" + o.wmode, typeof o.key == "string" && (t += "&key=" + o.key);
                        if (typeof o.autoplay == "string" || typeof o.autoplay == "boolean") t += "&autoplay=" + o.autoplay;
                        return o.width && (t += "&width=" + o.width), t
                    }, f = function () {
                        if (typeof o.key == "string") {
                            if (o.endpoint.search(/objectify/i) >= 0) return s + "2/objectify";
                            if (o.endpoint.search(/preview/i) >= 0) return s + "1/preview"
                        }
                        return s + "1/oembed"
                    }, l = function (t, n) {
                        if (o.endpoint !== "oembed") return o.success(t, n);
                        var r, i, s, u, a, f, l, c;
                        return (r = t.type) === "photo" ? (u = t.title || "", s = [], o.addImageStyles && (o.maxWidth && (a = isNaN(parseInt(o.maxWidth, 10)) ? "" : "px", s.push("max-width: " + o.maxWidth + a)), o.maxHeight && (a = isNaN(parseInt(o.maxHeight, 10)) ? "" : "px", s.push("max-height: " + o.maxHeight + a))), s = s.join(";"), i = "<a href='" + n.url + "' target='_blank'><img style='" + s + "' src='" + t.url + "' alt='" + u + "' /></a>") : r === "video" ? i = t.html : r === "rich" ? i = t.html : (u = t.title || n.url, f = t.thumbnail_url ? '<img src="' + t.thumbnail_url + '" class="thumb" />' : "", c = t.description ? '<div class="description">' + t.description + "</div>" : "", l = t.provider_name ? '<a href="' + t.provider_url + '" class="provider">' + t.provider_name + "</a>" : "", i = f + "<a href='" + n.url + "'>" + u + "</a>", i += l, i += c), o.wrapElement && o.wrapElement === "div" && e.browser.msie && e.browser.version < 9 && (o.wrapElement = "span"), o.wrapElement && (i = "<" + o.wrapElement + ' class="' + o.className + '">' + i + "</" + o.wrapElement + ">"), t.code = i, typeof n.node != "undefined" && e(n.node).data("oembed", t).trigger("embedly-oembed", [t]), o.success(t, n)
                    }, c = function (t) {
                        var n, r, i, s, u;
                        i = e.map(t, function (t, n) {
                            return n === 0 && t.node !== null && (u = e(t.node), s = {
                                    width: u.parent().width(),
                                    height: u.parent().height()
                                }), encodeURIComponent(t.url)
                        }).join(","), e.ajax({
                                url: f(),
                                dataType: "jsonp",
                                data: a(i),
                                success: function (n) {
                                    return e.each(n, function (e, n) {
                                        return n.type !== "error" ? l(n, t[e]) : o.error(t[e].node, n)
                                    })
                                }
                            })
                    };
                e.each(t, function (t, n) {
                    var r = typeof o.elems != "undefined" ? o.elems[t] : null;
                    typeof r != "undefined" && !u(n) && e(r).data("oembed", !1);
                    var s = {
                        url: n,
                        error_code: 400,
                        error_message: "HTTP 400: Bad Request",
                        type: "error"
                    };
                    return n && u(n) ? i.push({
                            url: n,
                            node: r
                        }) : o.error(r, s)
                });
                var h = [],
                    p = i.length;
                for (var d = 0; 0 <= p ? d < p : d > p; d += 20) h = h.concat(c(i.slice(d, d + 20)));
                return o.elems ? o.elems : this
            }
        }), e.embedly.version = "2.1.6", e.embedly.defaults = {
        endpoint: "oembed",
        chars: null,
        words: null,
        maxWidth: null,
        maxHeight: null,
        secure: !1,
        frame: !1,
        wmode: "opaque",
        autoplay: null,
        width: null,
        method: "replace",
        addImageStyles: !0,
        wrapElement: "div",
        className: "embed",
        urlRe: null,
        key: null,
        elems: [],
        success: null,
        error: null
    }, e.fn.embedly = function (t, n) {
        var r = typeof t != "undefined" ? t : {};
        typeof n != "undefined" && (t.success = n);
        var i = new Array,
            s = new Array;
        this.each(function () {
            typeof e(this).attr("href") != "undefined" ? (i.push(e(this).attr("href")), s.push(e(this))) : e(this).find("a").each(function () {
                i.push(e(this).attr("href")), s.push(e(this))
            }), r.elems = s
        });
        var o = e.embedly(i, r);
        return this
    }
}(jQuery),
function (e) {
    e.fn.iframeAutoHeight = function (t) {
        function n(e) {
            i.debug && i.debug === !0 && window.console && console.log(e)
        }

        function r(t, r) {
            n("Diagnostics from '" + r + "'");
            try {
                n("  " + e(t, window.top.document).contents().find("body")[0].scrollHeight + " for ...find('body')[0].scrollHeight"), n("  " + e(t.contentWindow.document).height() + " for ...contentWindow.document).height()"), n("  " + e(t.contentWindow.document.body).height() + " for ...contentWindow.document.body).height()")
            } catch (i) {
                n("  unable to check in this state")
            }
            n("End diagnostics -> results vary by browser and when diagnostics are requested")
        }
        var i = e.extend({
                heightOffset: 0,
                minHeight: 0,
                callback: function (e) {},
                debug: !1,
                diagnostics: !1
            }, t);
        return n(i), this.each(function () {
            function t(t) {
                i.diagnostics && r(t, "resizeHeight");
                var s = e(t, window.top.document).contents().find("body"),
                    o = s[0].scrollHeight + i.heightOffset;
                o < i.minHeight && (n("new height is less than minHeight"), o = i.minHeight + i.heightOffset), n("New Height: " + o), t.style.height = o + "px", i.callback.apply(e(t), [{
                            newFrameHeight: o
                        }
                    ])
            }
            var s = 0;
            n(this), i.diagnostics && r(this, "each iframe");
            if (e.browser.safari || e.browser.opera) {
                n("browser is webkit or opera"), e(this).load(function () {
                    var e = 0,
                        r = this;
                    r.style.height = "0px";
                    var i = function () {
                        t(r)
                    };
                    s === 0 && (e = 500), n("load delay: " + e), setTimeout(i, e), s++
                });
                var o = e(this).attr("src");
                e(this).attr("src", ""), e(this).attr("src", o)
            } else e(this).load(function () {
                t(this)
            })
        })
    }
}(jQuery),
function (e) {
    function n(e) {
        return typeof e == "object" ? e : {
            top: e,
            left: e
        }
    }
    var t = e.scrollTo = function (t, n, r) {
        e(window).scrollTo(t, n, r)
    };
    t.defaults = {
        axis: "xy",
        duration: parseFloat(e.fn.jquery) >= 1.3 ? 0 : 1
    }, t.window = function (t) {
        return e(window)._scrollable()
    }, e.fn._scrollable = function () {
        return this.map(function () {
            var t = this,
                n = !t.nodeName || e.inArray(t.nodeName.toLowerCase(), ["iframe", "#document", "html", "body"]) != -1;
            if (!n) return t;
            var r = (t.contentWindow || t).document || t.ownerDocument || t;
            return e.browser.safari || r.compatMode == "BackCompat" ? r.body : r.documentElement
        })
    }, e.fn.scrollTo = function (r, i, s) {
        return typeof i == "object" && (s = i, i = 0), typeof s == "function" && (s = {
                onAfter: s
            }), r == "max" && (r = 9e9), s = e.extend({}, t.defaults, s), i = i || s.speed || s.duration, s.queue = s.queue && s.axis.length > 1, s.queue && (i /= 2), s.offset = n(s.offset), s.over = n(s.over), this._scrollable().each(function () {
                function h(e) {
                    u.animate(l, i, s.easing, e && function () {
                        e.call(this, r, s)
                    })
                }
                var o = this,
                    u = e(o),
                    a = r,
                    f, l = {}, c = u.is("html,body");
                switch (typeof a) {
                case "number":
                case "string":
                    if (/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)) {
                        a = n(a);
                        break
                    }
                    a = e(a, this);
                case "object":
                    if (a.is || a.style) f = (a = e(a)).offset()
                }
                e.each(s.axis.split(""), function (e, n) {
                    var r = n == "x" ? "Left" : "Top",
                        i = r.toLowerCase(),
                        p = "scroll" + r,
                        d = o[p],
                        v = t.max(o, n);
                    if (f) l[p] = f[i] + (c ? 0 : d - u.offset()[i]), s.margin && (l[p] -= parseInt(a.css("margin" + r)) || 0, l[p] -= parseInt(a.css("border" + r + "Width")) || 0), l[p] += s.offset[i] || 0, s.over[i] && (l[p] += a[n == "x" ? "width" : "height"]() * s.over[i]);
                    else {
                        var m = a[i];
                        l[p] = m.slice && m.slice(-1) == "%" ? parseFloat(m) / 100 * v : m
                    }
                    /^\d+$/.test(l[p]) && (l[p] = l[p] <= 0 ? 0 : Math.min(l[p], v)), !e && s.queue && (d != l[p] && h(s.onAfterFirst), delete l[p])
                }), h(s.onAfter)
            }).end()
    }, t.max = function (t, n) {
        var r = n == "x" ? "Width" : "Height",
            i = "scroll" + r;
        if (!e(t).is("html,body")) return t[i] - e(t)[r.toLowerCase()]();
        var s = "client" + r,
            o = t.ownerDocument.documentElement,
            u = t.ownerDocument.body;
        return Math.max(o[i], u[i]) - Math.min(o[s], u[s])
    }
}(jQuery),
function (e) {
    var t = function (e, t) {
        return e << t | e >>> 32 - t
    }, n = function (e, t) {
            var n, r, i, s, o;
            return i = e & 2147483648, s = t & 2147483648, n = e & 1073741824, r = t & 1073741824, o = (e & 1073741823) + (t & 1073741823), n & r ? o ^ 2147483648 ^ i ^ s : n | r ? o & 1073741824 ? o ^ 3221225472 ^ i ^ s : o ^ 1073741824 ^ i ^ s : o ^ i ^ s
        }, r = function (e, t, n) {
            return e & t | ~e & n
        }, i = function (e, t, n) {
            return e & n | t & ~n
        }, s = function (e, t, n) {
            return e ^ t ^ n
        }, o = function (e, t, n) {
            return t ^ (e | ~n)
        }, u = function (e, i, s, o, u, a, f) {
            return e = n(e, n(n(r(i, s, o), u), f)), n(t(e, a), i)
        }, a = function (e, r, s, o, u, a, f) {
            return e = n(e, n(n(i(r, s, o), u), f)), n(t(e, a), r)
        }, f = function (e, r, i, o, u, a, f) {
            return e = n(e, n(n(s(r, i, o), u), f)), n(t(e, a), r)
        }, l = function (e, r, i, s, u, a, f) {
            return e = n(e, n(n(o(r, i, s), u), f)), n(t(e, a), r)
        }, c = function (e) {
            var t, n = e.length,
                r = n + 8,
                i = (r - r % 64) / 64,
                s = (i + 1) * 16,
                o = Array(s - 1),
                u = 0,
                a = 0;
            while (a < n) t = (a - a % 4) / 4, u = a % 4 * 8, o[t] = o[t] | e.charCodeAt(a) << u, a++;
            return t = (a - a % 4) / 4, u = a % 4 * 8, o[t] = o[t] | 128 << u, o[s - 2] = n << 3, o[s - 1] = n >>> 29, o
        }, h = function (e) {
            var t = "",
                n = "",
                r, i;
            for (i = 0; i <= 3; i++) r = e >>> i * 8 & 255, n = "0" + r.toString(16), t += n.substr(n.length - 2, 2);
            return t
        }, p = function (e) {
            e = e.replace(/\x0d\x0a/g, "\n");
            var t = "";
            for (var n = 0; n < e.length; n++) {
                var r = e.charCodeAt(n);
                r < 128 ? t += String.fromCharCode(r) : r > 127 && r < 2048 ? (t += String.fromCharCode(r >> 6 | 192), t += String.fromCharCode(r & 63 | 128)) : (t += String.fromCharCode(r >> 12 | 224), t += String.fromCharCode(r >> 6 & 63 | 128), t += String.fromCharCode(r & 63 | 128))
            }
            return t
        };
    e.extend({
            md5: function (e) {
                var t = Array(),
                    r, i, s, o, d, v, m, g, y, b = 7,
                    w = 12,
                    E = 17,
                    S = 22,
                    x = 5,
                    T = 9,
                    N = 14,
                    C = 20,
                    k = 4,
                    L = 11,
                    A = 16,
                    O = 23,
                    M = 6,
                    _ = 10,
                    D = 15,
                    P = 21;
                e = p(e), t = c(e), v = 1732584193, m = 4023233417, g = 2562383102, y = 271733878;
                for (r = 0; r < t.length; r += 16) i = v, s = m, o = g, d = y, v = u(v, m, g, y, t[r + 0], b, 3614090360), y = u(y, v, m, g, t[r + 1], w, 3905402710), g = u(g, y, v, m, t[r + 2], E, 606105819), m = u(m, g, y, v, t[r + 3], S, 3250441966), v = u(v, m, g, y, t[r + 4], b, 4118548399), y = u(y, v, m, g, t[r + 5], w, 1200080426), g = u(g, y, v, m, t[r + 6], E, 2821735955), m = u(m, g, y, v, t[r + 7], S, 4249261313), v = u(v, m, g, y, t[r + 8], b, 1770035416), y = u(y, v, m, g, t[r + 9], w, 2336552879), g = u(g, y, v, m, t[r + 10], E, 4294925233), m = u(m, g, y, v, t[r + 11], S, 2304563134), v = u(v, m, g, y, t[r + 12], b, 1804603682), y = u(y, v, m, g, t[r + 13], w, 4254626195), g = u(g, y, v, m, t[r + 14], E, 2792965006), m = u(m, g, y, v, t[r + 15], S, 1236535329), v = a(v, m, g, y, t[r + 1], x, 4129170786), y = a(y, v, m, g, t[r + 6], T, 3225465664), g = a(g, y, v, m, t[r + 11], N, 643717713), m = a(m, g, y, v, t[r + 0], C, 3921069994), v = a(v, m, g, y, t[r + 5], x, 3593408605), y = a(y, v, m, g, t[r + 10], T, 38016083), g = a(g, y, v, m, t[r + 15], N, 3634488961), m = a(m, g, y, v, t[r + 4], C, 3889429448), v = a(v, m, g, y, t[r + 9], x, 568446438), y = a(y, v, m, g, t[r + 14], T, 3275163606), g = a(g, y, v, m, t[r + 3], N, 4107603335), m = a(m, g, y, v, t[r + 8], C, 1163531501), v = a(v, m, g, y, t[r + 13], x, 2850285829), y = a(y, v, m, g, t[r + 2], T, 4243563512), g = a(g, y, v, m, t[r + 7], N, 1735328473), m = a(m, g, y, v, t[r + 12], C, 2368359562), v = f(v, m, g, y, t[r + 5], k, 4294588738), y = f(y, v, m, g, t[r + 8], L, 2272392833), g = f(g, y, v, m, t[r + 11], A, 1839030562), m = f(m, g, y, v, t[r + 14], O, 4259657740), v = f(v, m, g, y, t[r + 1], k, 2763975236), y = f(y, v, m, g, t[r + 4], L, 1272893353), g = f(g, y, v, m, t[r + 7], A, 4139469664), m = f(m, g, y, v, t[r + 10], O, 3200236656), v = f(v, m, g, y, t[r + 13], k, 681279174), y = f(y, v, m, g, t[r + 0], L, 3936430074), g = f(g, y, v, m, t[r + 3], A, 3572445317), m = f(m, g, y, v, t[r + 6], O, 76029189), v = f(v, m, g, y, t[r + 9], k, 3654602809), y = f(y, v, m, g, t[r + 12], L, 3873151461), g = f(g, y, v, m, t[r + 15], A, 530742520), m = f(m, g, y, v, t[r + 2], O, 3299628645), v = l(v, m, g, y, t[r + 0], M, 4096336452), y = l(y, v, m, g, t[r + 7], _, 1126891415), g = l(g, y, v, m, t[r + 14], D, 2878612391), m = l(m, g, y, v, t[r + 5], P, 4237533241), v = l(v, m, g, y, t[r + 12], M, 1700485571), y = l(y, v, m, g, t[r + 3], _, 2399980690), g = l(g, y, v, m, t[r + 10], D, 4293915773), m = l(m, g, y, v, t[r + 1], P, 2240044497), v = l(v, m, g, y, t[r + 8], M, 1873313359), y = l(y, v, m, g, t[r + 15], _, 4264355552), g = l(g, y, v, m, t[r + 6], D, 2734768916), m = l(m, g, y, v, t[r + 13], P, 1309151649), v = l(v, m, g, y, t[r + 4], M, 4149444226), y = l(y, v, m, g, t[r + 11], _, 3174756917), g = l(g, y, v, m, t[r + 2], D, 718787259), m = l(m, g, y, v, t[r + 9], P, 3951481745), v = n(v, i), m = n(m, s), g = n(g, o), y = n(y, d);
                var H = h(v) + h(m) + h(g) + h(y);
                return H.toLowerCase()
            }
        })
}(jQuery),
function () {
    function C(e, t, n) {
        if (e === t) return e !== 0 || 1 / e == 1 / t;
        if (e == null || t == null) return e === t;
        e._chain && (e = e._wrapped), t._chain && (t = t._wrapped);
        if (e.isEqual && S.isFunction(e.isEqual)) return e.isEqual(t);
        if (t.isEqual && S.isFunction(t.isEqual)) return t.isEqual(e);
        var r = a.call(e);
        if (r != a.call(t)) return !1;
        switch (r) {
        case "[object String]":
            return e == String(t);
        case "[object Number]":
            return e != +e ? t != +t : e == 0 ? 1 / e == 1 / t : e == +t;
        case "[object Date]":
        case "[object Boolean]":
            return +e == +t;
        case "[object RegExp]":
            return e.source == t.source && e.global == t.global && e.multiline == t.multiline && e.ignoreCase == t.ignoreCase
        }
        if (typeof e != "object" || typeof t != "object") return !1;
        var i = n.length;
        while (i--)
            if (n[i] == e) return !0;
        n.push(e);
        var s = 0,
            o = !0;
        if (r == "[object Array]") {
            s = e.length, o = s == t.length;
            if (o)
                while (s--)
                    if (!(o = s in e == s in t && C(e[s], t[s], n))) break
        } else {
            if ("constructor" in e != "constructor" in t || e.constructor != t.constructor) return !1;
            for (var u in e)
                if (f.call(e, u)) {
                    s++;
                    if (!(o = f.call(t, u) && C(e[u], t[u], n))) break
                }
            if (o) {
                for (u in t)
                    if (f.call(t, u) && !(s--)) break;
                o = !s
            }
        }
        return n.pop(), o
    }
    var e = this,
        t = e._,
        n = {}, r = Array.prototype,
        i = Object.prototype,
        s = Function.prototype,
        o = r.slice,
        u = r.unshift,
        a = i.toString,
        f = i.hasOwnProperty,
        l = r.forEach,
        c = r.map,
        h = r.reduce,
        p = r.reduceRight,
        d = r.filter,
        v = r.every,
        m = r.some,
        g = r.indexOf,
        y = r.lastIndexOf,
        b = Array.isArray,
        w = Object.keys,
        E = s.bind,
        S = function (e) {
            return new A(e)
        };
    typeof exports != "undefined" ? (typeof module != "undefined" && module.exports && (exports = module.exports = S), exports._ = S) : typeof define == "function" && define.amd ? define("underscore", function () {
        return S
    }) : e._ = S, S.VERSION = "1.2.4";
    var x = S.each = S.forEach = function (e, t, r) {
        if (e == null) return;
        if (l && e.forEach === l) e.forEach(t, r);
        else if (e.length === +e.length) {
            for (var i = 0, s = e.length; i < s; i++)
                if (i in e && t.call(r, e[i], i, e) === n) return
        } else
            for (var o in e)
                if (f.call(e, o) && t.call(r, e[o], o, e) === n) return
    };
    S.map = function (e, t, n) {
        var r = [];
        return e == null ? r : c && e.map === c ? e.map(t, n) : (x(e, function (e, i, s) {
                    r[r.length] = t.call(n, e, i, s)
                }), e.length === +e.length && (r.length = e.length), r)
    }, S.reduce = S.foldl = S.inject = function (e, t, n, r) {
        var i = arguments.length > 2;
        e == null && (e = []);
        if (h && e.reduce === h) return r && (t = S.bind(t, r)), i ? e.reduce(t, n) : e.reduce(t);
        x(e, function (e, s, o) {
            i ? n = t.call(r, n, e, s, o) : (n = e, i = !0)
        });
        if (!i) throw new TypeError("Reduce of empty array with no initial value");
        return n
    }, S.reduceRight = S.foldr = function (e, t, n, r) {
        var i = arguments.length > 2;
        e == null && (e = []);
        if (p && e.reduceRight === p) return r && (t = S.bind(t, r)), i ? e.reduceRight(t, n) : e.reduceRight(t);
        var s = S.toArray(e).reverse();
        return r && !i && (t = S.bind(t, r)), i ? S.reduce(s, t, n, r) : S.reduce(s, t)
    }, S.find = S.detect = function (e, t, n) {
        var r;
        return T(e, function (e, i, s) {
            if (t.call(n, e, i, s)) return r = e, !0
        }), r
    }, S.filter = S.select = function (e, t, n) {
        var r = [];
        return e == null ? r : d && e.filter === d ? e.filter(t, n) : (x(e, function (e, i, s) {
                    t.call(n, e, i, s) && (r[r.length] = e)
                }), r)
    }, S.reject = function (e, t, n) {
        var r = [];
        return e == null ? r : (x(e, function (e, i, s) {
                    t.call(n, e, i, s) || (r[r.length] = e)
                }), r)
    }, S.every = S.all = function (e, t, r) {
        var i = !0;
        return e == null ? i : v && e.every === v ? e.every(t, r) : (x(e, function (e, s, o) {
                    if (!(i = i && t.call(r, e, s, o))) return n
                }), i)
    };
    var T = S.some = S.any = function (e, t, r) {
        t || (t = S.identity);
        var i = !1;
        return e == null ? i : m && e.some === m ? e.some(t, r) : (x(e, function (e, s, o) {
                    if (i || (i = t.call(r, e, s, o))) return n
                }), !! i)
    };
    S.include = S.contains = function (e, t) {
        var n = !1;
        return e == null ? n : g && e.indexOf === g ? e.indexOf(t) != -1 : (n = T(e, function (e) {
                    return e === t
                }), n)
    }, S.invoke = function (e, t) {
        var n = o.call(arguments, 2);
        return S.map(e, function (e) {
            return (S.isFunction(t) ? t || e : e[t]).apply(e, n)
        })
    }, S.pluck = function (e, t) {
        return S.map(e, function (e) {
            return e[t]
        })
    }, S.max = function (e, t, n) {
        if (!t && S.isArray(e)) return Math.max.apply(Math, e);
        if (!t && S.isEmpty(e)) return -Infinity;
        var r = {
            computed: -Infinity
        };
        return x(e, function (e, i, s) {
            var o = t ? t.call(n, e, i, s) : e;
            o >= r.computed && (r = {
                    value: e,
                    computed: o
                })
        }), r.value
    }, S.min = function (e, t, n) {
        if (!t && S.isArray(e)) return Math.min.apply(Math, e);
        if (!t && S.isEmpty(e)) return Infinity;
        var r = {
            computed: Infinity
        };
        return x(e, function (e, i, s) {
            var o = t ? t.call(n, e, i, s) : e;
            o < r.computed && (r = {
                    value: e,
                    computed: o
                })
        }), r.value
    }, S.shuffle = function (e) {
        var t = [],
            n;
        return x(e, function (e, r, i) {
            r == 0 ? t[0] = e : (n = Math.floor(Math.random() * (r + 1)), t[r] = t[n], t[n] = e)
        }), t
    }, S.sortBy = function (e, t, n) {
        return S.pluck(S.map(e, function (e, r, i) {
                    return {
                        value: e,
                        criteria: t.call(n, e, r, i)
                    }
                }).sort(function (e, t) {
                    var n = e.criteria,
                        r = t.criteria;
                    return n < r ? -1 : n > r ? 1 : 0
                }), "value")
    }, S.groupBy = function (e, t) {
        var n = {}, r = S.isFunction(t) ? t : function (e) {
                return e[t]
            };
        return x(e, function (e, t) {
            var i = r(e, t);
            (n[i] || (n[i] = [])).push(e)
        }), n
    }, S.sortedIndex = function (e, t, n) {
        n || (n = S.identity);
        var r = 0,
            i = e.length;
        while (r < i) {
            var s = r + i >> 1;
            n(e[s]) < n(t) ? r = s + 1 : i = s
        }
        return r
    }, S.toArray = function (e) {
        return e ? e.toArray ? e.toArray() : S.isArray(e) ? o.call(e) : S.isArguments(e) ? o.call(e) : S.values(e) : []
    }, S.size = function (e) {
        return S.toArray(e).length
    }, S.first = S.head = function (e, t, n) {
        return t != null && !n ? o.call(e, 0, t) : e[0]
    }, S.initial = function (e, t, n) {
        return o.call(e, 0, e.length - (t == null || n ? 1 : t))
    }, S.last = function (e, t, n) {
        return t != null && !n ? o.call(e, Math.max(e.length - t, 0)) : e[e.length - 1]
    }, S.rest = S.tail = function (e, t, n) {
        return o.call(e, t == null || n ? 1 : t)
    }, S.compact = function (e) {
        return S.filter(e, function (e) {
            return !!e
        })
    }, S.flatten = function (e, t) {
        return S.reduce(e, function (e, n) {
            return S.isArray(n) ? e.concat(t ? n : S.flatten(n)) : (e[e.length] = n, e)
        }, [])
    }, S.without = function (e) {
        return S.difference(e, o.call(arguments, 1))
    }, S.uniq = S.unique = function (e, t, n) {
        var r = n ? S.map(e, n) : e,
            i = [];
        return S.reduce(r, function (n, r, s) {
            if (0 == s || (t === !0 ? S.last(n) != r : !S.include(n, r))) n[n.length] = r, i[i.length] = e[s];
            return n
        }, []), i
    }, S.union = function () {
        return S.uniq(S.flatten(arguments, !0))
    }, S.intersection = S.intersect = function (e) {
        var t = o.call(arguments, 1);
        return S.filter(S.uniq(e), function (e) {
            return S.every(t, function (t) {
                return S.indexOf(t, e) >= 0
            })
        })
    }, S.difference = function (e) {
        var t = S.flatten(o.call(arguments, 1));
        return S.filter(e, function (e) {
            return !S.include(t, e)
        })
    }, S.zip = function () {
        var e = o.call(arguments),
            t = S.max(S.pluck(e, "length")),
            n = new Array(t);
        for (var r = 0; r < t; r++) n[r] = S.pluck(e, "" + r);
        return n
    }, S.indexOf = function (e, t, n) {
        if (e == null) return -1;
        var r, i;
        if (n) return r = S.sortedIndex(e, t), e[r] === t ? r : -1;
        if (g && e.indexOf === g) return e.indexOf(t);
        for (r = 0, i = e.length; r < i; r++)
            if (r in e && e[r] === t) return r;
        return -1
    }, S.lastIndexOf = function (e, t) {
        if (e == null) return -1;
        if (y && e.lastIndexOf === y) return e.lastIndexOf(t);
        var n = e.length;
        while (n--)
            if (n in e && e[n] === t) return n;
        return -1
    }, S.range = function (e, t, n) {
        arguments.length <= 1 && (t = e || 0, e = 0), n = arguments[2] || 1;
        var r = Math.max(Math.ceil((t - e) / n), 0),
            i = 0,
            s = new Array(r);
        while (i < r) s[i++] = e, e += n;
        return s
    };
    var N = function () {};
    S.bind = function (t, n) {
        var r, i;
        if (t.bind === E && E) return E.apply(t, o.call(arguments, 1));
        if (!S.isFunction(t)) throw new TypeError;
        return i = o.call(arguments, 2), r = function () {
            if (this instanceof r) {
                N.prototype = t.prototype;
                var e = new N,
                    s = t.apply(e, i.concat(o.call(arguments)));
                return Object(s) === s ? s : e
            }
            return t.apply(n, i.concat(o.call(arguments)))
        }
    }, S.bindAll = function (e) {
        var t = o.call(arguments, 1);
        return t.length == 0 && (t = S.functions(e)), x(t, function (t) {
            e[t] = S.bind(e[t], e)
        }), e
    }, S.memoize = function (e, t) {
        var n = {};
        return t || (t = S.identity),
        function () {
            var r = t.apply(this, arguments);
            return f.call(n, r) ? n[r] : n[r] = e.apply(this, arguments)
        }
    }, S.delay = function (e, t) {
        var n = o.call(arguments, 2);
        return setTimeout(function () {
            return e.apply(e, n)
        }, t)
    }, S.defer = function (e) {
        return S.delay.apply(S, [e, 1].concat(o.call(arguments, 1)))
    }, S.throttle = function (e, t) {
        var n, r, i, s, o, u = S.debounce(function () {
                o = s = !1
            }, t);
        return function () {
            n = this, r = arguments;
            var a = function () {
                i = null, o && e.apply(n, r), u()
            };
            i || (i = setTimeout(a, t)), s ? o = !0 : e.apply(n, r), u(), s = !0
        }
    }, S.debounce = function (e, t) {
        var n;
        return function () {
            var r = this,
                i = arguments,
                s = function () {
                    n = null, e.apply(r, i)
                };
            clearTimeout(n), n = setTimeout(s, t)
        }
    }, S.once = function (e) {
        var t = !1,
            n;
        return function () {
            return t ? n : (t = !0, n = e.apply(this, arguments))
        }
    }, S.wrap = function (e, t) {
        return function () {
            var n = [e].concat(o.call(arguments, 0));
            return t.apply(this, n)
        }
    }, S.compose = function () {
        var e = arguments;
        return function () {
            var t = arguments;
            for (var n = e.length - 1; n >= 0; n--) t = [e[n].apply(this, t)];
            return t[0]
        }
    }, S.after = function (e, t) {
        return e <= 0 ? t() : function () {
            if (--e < 1) return t.apply(this, arguments)
        }
    }, S.keys = w || function (e) {
        if (e !== Object(e)) throw new TypeError("Invalid object");
        var t = [];
        for (var n in e) f.call(e, n) && (t[t.length] = n);
        return t
    }, S.values = function (e) {
        return S.map(e, S.identity)
    }, S.functions = S.methods = function (e) {
        var t = [];
        for (var n in e) S.isFunction(e[n]) && t.push(n);
        return t.sort()
    }, S.extend = function (e) {
        return x(o.call(arguments, 1), function (t) {
            for (var n in t) t[n] !== void 0 && (e[n] = t[n])
        }), e
    }, S.defaults = function (e) {
        return x(o.call(arguments, 1), function (t) {
            for (var n in t) e[n] == null && (e[n] = t[n])
        }), e
    }, S.clone = function (e) {
        return S.isObject(e) ? S.isArray(e) ? e.slice() : S.extend({}, e) : e
    }, S.tap = function (e, t) {
        return t(e), e
    }, S.isEqual = function (e, t) {
        return C(e, t, [])
    }, S.isEmpty = function (e) {
        if (S.isArray(e) || S.isString(e)) return e.length === 0;
        for (var t in e)
            if (f.call(e, t)) return !1;
        return !0
    }, S.isElement = function (e) {
        return !!e && e.nodeType == 1
    }, S.isArray = b || function (e) {
        return a.call(e) == "[object Array]"
    }, S.isObject = function (e) {
        return e === Object(e)
    }, S.isArguments = function (e) {
        return a.call(e) == "[object Arguments]"
    }, S.isArguments(arguments) || (S.isArguments = function (e) {
        return !!e && !! f.call(e, "callee")
    }), S.isFunction = function (e) {
        return a.call(e) == "[object Function]"
    }, S.isString = function (e) {
        return a.call(e) == "[object String]"
    }, S.isNumber = function (e) {
        return a.call(e) == "[object Number]"
    }, S.isNaN = function (e) {
        return e !== e
    }, S.isBoolean = function (e) {
        return e === !0 || e === !1 || a.call(e) == "[object Boolean]"
    }, S.isDate = function (e) {
        return a.call(e) == "[object Date]"
    }, S.isRegExp = function (e) {
        return a.call(e) == "[object RegExp]"
    }, S.isNull = function (e) {
        return e === null
    }, S.isUndefined = function (e) {
        return e === void 0
    }, S.noConflict = function () {
        return e._ = t, this
    }, S.identity = function (e) {
        return e
    }, S.times = function (e, t, n) {
        for (var r = 0; r < e; r++) t.call(n, r)
    }, S.escape = function (e) {
        return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;")
    }, S.mixin = function (e) {
        x(S.functions(e), function (t) {
            M(t, S[t] = e[t])
        })
    };
    var k = 0;
    S.uniqueId = function (e) {
        var t = k++;
        return e ? e + t : t
    }, S.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var L = /.^/;
    S.template = function (e, t) {
        var n = S.templateSettings,
            r = "var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('" + e.replace(/\\/g, "\\\\").replace(/'/g, "\\'").replace(n.escape || L, function (e, t) {
                return "',_.escape(" + t.replace(/\\'/g, "'") + "),'"
            }).replace(n.interpolate || L, function (e, t) {
                return "'," + t.replace(/\\'/g, "'") + ",'"
            }).replace(n.evaluate || L, function (e, t) {
                return "');" + t.replace(/\\'/g, "'").replace(/[\r\n\t]/g, " ").replace(/\\\\/g, "\\") + ";__p.push('"
            }).replace(/\r/g, "\\r").replace(/\n/g, "\\n").replace(/\t/g, "\\t") + "');}return __p.join('');",
            i = new Function("obj", "_", r);
        return t ? i(t, S) : function (e) {
            return i.call(this, e, S)
        }
    }, S.chain = function (e) {
        return S(e).chain()
    };
    var A = function (e) {
        this._wrapped = e
    };
    S.prototype = A.prototype;
    var O = function (e, t) {
        return t ? S(e).chain() : e
    }, M = function (e, t) {
            A.prototype[e] = function () {
                var e = o.call(arguments);
                return u.call(e, this._wrapped), O(t.apply(S, e), this._chain)
            }
        };
    S.mixin(S), x(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (e) {
        var t = r[e];
        A.prototype[e] = function () {
            var n = this._wrapped;
            t.apply(n, arguments);
            var r = n.length;
            return (e == "shift" || e == "splice") && r === 0 && delete n[0], O(n, this._chain)
        }
    }), x(["concat", "join", "slice"], function (e) {
        var t = r[e];
        A.prototype[e] = function () {
            return O(t.apply(this._wrapped, arguments), this._chain)
        }
    }), A.prototype.chain = function () {
        return this._chain = !0, this
    }, A.prototype.value = function () {
        return this._wrapped
    }
}.call(this),
function () {
    var e = this,
        t = e.Backbone,
        n = Array.prototype.slice,
        r;
    typeof exports != "undefined" ? r = exports : r = e.Backbone = {}, r.VERSION = "0.5.3";
    var i = e._;
    !i && typeof require != "undefined" && (i = require("underscore"));
    var s = e.jQuery || e.Zepto || e.ender;
    r.noConflict = function () {
        return e.Backbone = t, this
    }, r.emulateHTTP = !1, r.emulateJSON = !1, r.Events = {
        bind: function (e, t, n) {
            var r = this._callbacks || (this._callbacks = {}),
                i = r[e] || (r[e] = {}),
                s = i.tail || (i.tail = i.next = {});
            return s.callback = t, s.context = n, i.tail = s.next = {}, this
        },
        unbind: function (e, t) {
            var n, r, i;
            if (!e) this._callbacks = null;
            else if (n = this._callbacks)
                if (!t) n[e] = {};
                else if (r = n[e])
                while ((i = r) && (r = r.next)) {
                    if (r.callback !== t) continue;
                    i.next = r.next, r.context = r.callback = null;
                    break
            }
            return this
        },
        trigger: function (e) {
            var t, r, i, s, o, u = ["all", e];
            if (!(r = this._callbacks)) return this;
            while (o = u.pop()) {
                if (!(t = r[o])) continue;
                s = o == "all" ? arguments : n.call(arguments, 1);
                while (t = t.next)(i = t.callback) && i.apply(t.context || this, s)
            }
            return this
        }
    }, r.Model = function (e, t) {
        var n;
        e || (e = {}), t && t.parse && (e = this.parse(e));
        if (n = b(this, "defaults")) e = i.extend({}, n, e);
        this.attributes = {}, this._escapedAttributes = {}, this.cid = i.uniqueId("c"), this.set(e, {
                silent: !0
            }), this._changed = !1, this._previousAttributes = i.clone(this.attributes), t && t.collection && (this.collection = t.collection), this.initialize(e, t)
    }, i.extend(r.Model.prototype, r.Events, {
            _changed: !1,
            idAttribute: "id",
            initialize: function () {},
            toJSON: function () {
                return i.clone(this.attributes)
            },
            get: function (e) {
                return this.attributes[e]
            },
            escape: function (e) {
                var t;
                if (t = this._escapedAttributes[e]) return t;
                var n = this.attributes[e];
                return this._escapedAttributes[e] = i.escape(n == null ? "" : "" + n)
            },
            has: function (e) {
                return this.attributes[e] != null
            },
            set: function (e, t, n) {
                var r;
                i.isObject(e) || e == null ? (r = e, n = t) : (r = {}, r[e] = t), n || (n = {});
                if (!r) return this;
                r.attributes && (r = r.attributes);
                if (n.unset)
                    for (var s in r) r[s] = void 0;
                var o = this.attributes,
                    u = this._escapedAttributes;
                if (!n.silent && this.validate && !this._performValidation(r, n)) return !1;
                this.idAttribute in r && (this.id = r[this.idAttribute]);
                var a = this._changing;
                this._changing = !0;
                for (var s in r) {
                    var f = r[s];
                    if (!i.isEqual(o[s], f) || n.unset && s in o) n.unset ? delete o[s] : o[s] = f, delete u[s], this._changed = !0, n.silent || this.trigger("change:" + s, this, f, n)
                }
                return a || (!n.silent && this._changed && this.change(n), this._changing = !1), this
            },
            unset: function (e, t) {
                return (t || (t = {})).unset = !0, this.set(e, null, t)
            },
            clear: function (e) {
                return (e || (e = {})).unset = !0, this.set(i.clone(this.attributes), e)
            },
            fetch: function (e) {
                e || (e = {});
                var t = this,
                    n = e.success;
                return e.success = function (r, i, s) {
                    if (!t.set(t.parse(r, s), e)) return !1;
                    n && n(t, r)
                }, e.error = E(e.error, t, e), (this.sync || r.sync).call(this, "read", this, e)
            },
            save: function (e, t) {
                t || (t = {});
                if (e && !this.set(e, t)) return !1;
                var n = this,
                    i = t.success;
                t.success = function (e, r, s) {
                    if (!n.set(n.parse(e, s), t)) return !1;
                    i && i(n, e, s)
                }, t.error = E(t.error, n, t);
                var s = this.isNew() ? "create" : "update";
                return (this.sync || r.sync).call(this, s, this, t)
            },
            destroy: function (e) {
                e || (e = {});
                if (this.isNew()) return this.trigger("destroy", this, this.collection, e);
                var t = this,
                    n = e.success;
                return e.success = function (r) {
                    t.trigger("destroy", t, t.collection, e), n && n(t, r)
                }, e.error = E(e.error, t, e), (this.sync || r.sync).call(this, "delete", this, e)
            },
            url: function () {
                var e = b(this.collection, "url") || b(this, "urlRoot") || w();
                return this.isNew() ? e : e + (e.charAt(e.length - 1) == "/" ? "" : "/") + encodeURIComponent(this.id)
            },
            parse: function (e, t) {
                return e
            },
            clone: function () {
                return new this.constructor(this)
            },
            isNew: function () {
                return this.id == null
            },
            change: function (e) {
                this.trigger("change", this, e), this._previousAttributes = i.clone(this.attributes), this._changed = !1
            },
            hasChanged: function (e) {
                return e ? !i.isEqual(this._previousAttributes[e], this.attributes[e]) : this._changed
            },
            changedAttributes: function (e) {
                if (!this._changed) return !1;
                e || (e = this.attributes);
                var t = !1,
                    n = this._previousAttributes;
                for (var r in e) {
                    if (i.isEqual(n[r], e[r])) continue;
                    (t || (t = {}))[r] = e[r]
                }
                for (var r in n) r in e || ((t || (t = {}))[r] = void 0);
                return t
            },
            previous: function (e) {
                return !e || !this._previousAttributes ? null : this._previousAttributes[e]
            },
            previousAttributes: function () {
                return i.clone(this._previousAttributes)
            },
            _performValidation: function (e, t) {
                var n = this.validate(e, t);
                return n ? (t.error ? t.error(this, n, t) : this.trigger("error", this, n, t), !1) : !0
            }
        }), r.Collection = function (e, t) {
        t || (t = {}), t.comparator && (this.comparator = t.comparator), i.bindAll(this, "_onModelEvent", "_removeReference"), this._reset(), e && this.reset(e, {
                silent: !0
            }), this.initialize.apply(this, arguments)
    }, i.extend(r.Collection.prototype, r.Events, {
            model: r.Model,
            initialize: function () {},
            toJSON: function () {
                return this.map(function (e) {
                    return e.toJSON()
                })
            },
            add: function (e, t) {
                var n, r;
                t || (t = {}), i.isArray(e) || (e = [e]);
                for (n = 0, r = e.length; n < r; n++) t && t.at == +t.at && n && (t.at += 1), e[n] = this._add(e[n], t);
                this.comparator && this.sort({
                        silent: !0
                    });
                if (!t.silent)
                    for (n = 0; n < r; n++) e[n].trigger("add", e[n], this, t);
                return this
            },
            remove: function (e, t) {
                t || (t = {}), i.isArray(e) || (e = [e]);
                for (var n = 0, r = e.length; n < r; n++) this._remove(e[n], t);
                return this
            },
            get: function (e) {
                return e == null ? null : this._byId[e.id != null ? e.id : e]
            },
            getByCid: function (e) {
                return e && this._byCid[e.cid || e]
            },
            at: function (e) {
                return this.models[e]
            },
            sort: function (e) {
                e || (e = {});
                if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
                return this.comparator.length == 1 ? this.models = this.sortBy(this.comparator) : this.models.sort(this.comparator), e.silent || this.trigger("reset", this, e), this
            },
            pluck: function (e) {
                return i.map(this.models, function (t) {
                    return t.get(e)
                })
            },
            reset: function (e, t) {
                return e || (e = []), t || (t = {}), this.each(this._removeReference), this._reset(), this.add(e, {
                        silent: !0,
                        parse: t.parse
                    }), t.silent || this.trigger("reset", this, t), this
            },
            fetch: function (e) {
                e || (e = {}), e.parse === undefined && (e.parse = !0);
                var t = this,
                    n = e.success;
                return e.success = function (r, i, s) {
                    t[e.add ? "add" : "reset"](t.parse(r, s), e), n && n(t, r)
                }, e.error = E(e.error, t, e), (this.sync || r.sync).call(this, "read", this, e)
            },
            create: function (e, t) {
                var n = this;
                t || (t = {}), e = this._prepareModel(e, t);
                if (!e) return !1;
                var r = t.success;
                return t.success = function (e, i, s) {
                    n.add(e, t), r && r(e, i, s)
                }, e.save(null, t), e
            },
            parse: function (e, t) {
                return e
            },
            chain: function () {
                return i(this.models).chain()
            },
            _reset: function (e) {
                this.length = 0, this.models = [], this._byId = {}, this._byCid = {}
            },
            _prepareModel: function (e, t) {
                if (e instanceof r.Model) e.collection || (e.collection = this);
                else {
                    var n = e;
                    e = new this.model(n, {
                            collection: this,
                            parse: t.parse
                        }), e.validate && !e._performValidation(e.attributes, t) && (e = !1)
                }
                return e
            },
            _add: function (e, t) {
                e = this._prepareModel(e, t);
                if (!e) return !1;
                var n = this.getByCid(e);
                if (n) throw new Error(["Can't add the same model to a set twice", n.id]);
                return this._byId[e.id] = e, this._byCid[e.cid] = e, t.at != null ? this.models.splice(t.at, 0, e) : this.models.push(e), e.bind("all", this._onModelEvent), this.length++, e
            },
            _remove: function (e, t) {
                e = this.getByCid(e) || this.get(e);
                if (!e) return null;
                delete this._byId[e.id], delete this._byCid[e.cid];
                var n = this.indexOf(e);
                return this.models.splice(n, 1), this.length--, t.silent || e.trigger("remove", e, this, t), this._removeReference(e), e
            },
            _removeReference: function (e) {
                this == e.collection && delete e.collection, e.unbind("all", this._onModelEvent)
            },
            _onModelEvent: function (e, t, n, r) {
                if ((e == "add" || e == "remove") && n != this) return;
                e == "destroy" && this._remove(t, r), t && e === "change:" + t.idAttribute && (delete this._byId[t.previous(t.idAttribute)], this._byId[t.id] = t), this.trigger.apply(this, arguments)
            }
        });
    var o = ["forEach", "each", "map", "reduce", "reduceRight", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "sortBy", "sortedIndex", "toArray", "size", "first", "rest", "last", "without", "indexOf", "lastIndexOf", "isEmpty", "groupBy"];
    i.each(o, function (e) {
        r.Collection.prototype[e] = function () {
            return i[e].apply(i, [this.models].concat(i.toArray(arguments)))
        }
    }), r.Router = function (e) {
        e || (e = {}), e.routes && (this.routes = e.routes), this._bindRoutes(), this.initialize.apply(this, arguments)
    };
    var u = /:\w+/g,
        a = /\*\w+/g,
        f = /[-[\]{}()+?.,\\^$|#\s]/g;
    i.extend(r.Router.prototype, r.Events, {
            initialize: function () {},
            route: function (e, t, n) {
                r.history || (r.history = new r.History), i.isRegExp(e) || (e = this._routeToRegExp(e)), r.history.route(e, i.bind(function (r) {
                            var i = this._extractParameters(e, r);
                            n && n.apply(this, i), this.trigger.apply(this, ["route:" + t].concat(i))
                        }, this))
            },
            navigate: function (e, t) {
                r.history.navigate(e, t)
            },
            _bindRoutes: function () {
                if (!this.routes) return;
                var e = [];
                for (var t in this.routes) e.unshift([t, this.routes[t]]);
                for (var n = 0, r = e.length; n < r; n++) this.route(e[n][0], e[n][1], this[e[n][1]])
            },
            _routeToRegExp: function (e) {
                return e = e.replace(f, "\\$&").replace(u, "([^/]*)").replace(a, "(.*?)"), new RegExp("^" + e + "$")
            },
            _extractParameters: function (e, t) {
                return e.exec(t).slice(1)
            }
        }), r.History = function () {
        this.handlers = [], i.bindAll(this, "checkUrl")
    };
    var l = /^#/,
        c = /msie [\w.]+/,
        h = !1;
    i.extend(r.History.prototype, {
            interval: 50,
            getFragment: function (e, t) {
                if (e == null)
                    if (this._hasPushState || t) {
                        e = window.location.pathname;
                        var n = window.location.search;
                        n && (e += n)
                    } else e = window.location.hash;
                return e = decodeURIComponent(e.replace(l, "")), e.indexOf(this.options.root) || (e = e.substr(this.options.root.length)), e
            },
            start: function (e) {
                if (h) throw new Error("Backbone.history has already been started");
                this.options = i.extend({}, {
                        root: "/"
                    }, this.options, e), this._wantsPushState = !! this.options.pushState, this._hasPushState = !! (this.options.pushState && window.history && window.history.pushState);
                var t = this.getFragment(),
                    n = document.documentMode,
                    r = c.exec(navigator.userAgent.toLowerCase()) && (!n || n <= 7);
                r && (this.iframe = s('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow, this.navigate(t)), this._hasPushState ? s(window).bind("popstate", this.checkUrl) : "onhashchange" in window && !r ? s(window).bind("hashchange", this.checkUrl) : setInterval(this.checkUrl, this.interval), this.fragment = t, h = !0;
                var o = window.location,
                    u = o.pathname == this.options.root;
                if (this._wantsPushState && !this._hasPushState && !u) return this.fragment = this.getFragment(null, !0), window.location.replace(this.options.root + "#" + this.fragment), !0;
                this._wantsPushState && this._hasPushState && u && o.hash && (this.fragment = o.hash.replace(l, ""), window.history.replaceState({}, document.title, o.protocol + "//" + o.host + this.options.root + this.fragment));
                if (!this.options.silent) return this.loadUrl()
            },
            route: function (e, t) {
                this.handlers.unshift({
                        route: e,
                        callback: t
                    })
            },
            checkUrl: function (e) {
                var t = this.getFragment();
                t == this.fragment && this.iframe && (t = this.getFragment(this.iframe.location.hash));
                if (t == this.fragment || t == decodeURIComponent(this.fragment)) return !1;
                this.iframe && this.navigate(t), this.loadUrl() || this.loadUrl(window.location.hash)
            },
            loadUrl: function (e) {
                var t = this.fragment = this.getFragment(e),
                    n = i.any(this.handlers, function (e) {
                        if (e.route.test(t)) return e.callback(t), !0
                    });
                return n
            },
            navigate: function (e, t) {
                if (!t || t === !0) t = {
                    trigger: t
                };
                var n = (e || "").replace(l, "");
                if (this.fragment == n || this.fragment == decodeURIComponent(n)) return;
                this._hasPushState ? (n.indexOf(this.options.root) != 0 && (n = this.options.root + n), this.fragment = n, window.history[t.replace ? "replaceState" : "pushState"]({}, document.title, n)) : (this.fragment = n, this._updateHash(window.location, n, t.replace), this.iframe && n != this.getFragment(this.iframe.location.hash) && (t.replace || this.iframe.document.open().close(), this._updateHash(this.iframe.location, n, t.replace))), t.trigger && this.loadUrl(e)
            },
            _updateHash: function (e, t, n) {
                n ? e.replace(e.toString().replace(/(javascript:|#).*$/, "") + "#" + t) : e.hash = t
            }
        }), r.View = function (e) {
        this.cid = i.uniqueId("view"), this._configure(e || {}), this._ensureElement(), this.delegateEvents(), this.initialize.apply(this, arguments)
    };
    var p = /^(\S+)\s*(.*)$/,
        d = ["model", "collection", "el", "id", "attributes", "className", "tagName"];
    i.extend(r.View.prototype, r.Events, {
            tagName: "div",
            $: function (e) {
                return e == null ? s(this.el) : s(e, this.el)
            },
            initialize: function () {},
            render: function () {
                return this
            },
            remove: function () {
                return s(this.el).remove(), this
            },
            make: function (e, t, n) {
                var r = document.createElement(e);
                return t && s(r).attr(t), n && s(r).html(n), r
            },
            delegateEvents: function (e) {
                if (!e && !(e = b(this, "events"))) return;
                this.undelegateEvents();
                for (var t in e) {
                    var n = this[e[t]];
                    if (!n) throw new Error('Event "' + e[t] + '" does not exist');
                    var r = t.match(p),
                        o = r[1],
                        u = r[2];
                    n = i.bind(n, this), o += ".delegateEvents" + this.cid, u === "" ? s(this.el).bind(o, n) : s(this.el).delegate(u, o, n)
                }
            },
            undelegateEvents: function () {
                s(this.el).unbind(".delegateEvents" + this.cid)
            },
            _configure: function (e) {
                this.options && (e = i.extend({}, this.options, e));
                for (var t = 0, n = d.length; t < n; t++) {
                    var r = d[t];
                    e[r] && (this[r] = e[r])
                }
                this.options = e
            },
            _ensureElement: function () {
                if (!this.el) {
                    var e = this.attributes || {};
                    this.id && (e.id = this.id), this.className && (e["class"] = this.className), this.el = this.make(this.tagName, e)
                } else i.isString(this.el) && (this.el = s(this.el).get(0))
            }
        });
    var v = function (e, t) {
        var n = y(this, e, t);
        return n.extend = this.extend, n
    };
    r.Model.extend = r.Collection.extend = r.Router.extend = r.View.extend = v;
    var m = {
        create: "POST",
        update: "PUT",
        "delete": "DELETE",
        read: "GET"
    };
    r.sync = function (e, t, n) {
        var o = m[e],
            u = {
                type: o,
                dataType: "json"
            };
        return n.url || (u.url = b(t, "url") || w()), !n.data && t && (e == "create" || e == "update") && (u.contentType = "application/json", u.data = JSON.stringify(t.toJSON())), r.emulateJSON && (u.contentType = "application/x-www-form-urlencoded", u.data = u.data ? {
                model: u.data
            } : {}), r.emulateHTTP && (o === "PUT" || o === "DELETE") && (r.emulateJSON && (u.data._method = o), u.type = "POST", u.beforeSend = function (e) {
                e.setRequestHeader("X-HTTP-Method-Override", o)
            }), u.type !== "GET" && !r.emulateJSON && (u.processData = !1), s.ajax(i.extend(u, n))
    };
    var g = function () {}, y = function (e, t, n) {
            var r;
            return t && t.hasOwnProperty("constructor") ? r = t.constructor : r = function () {
                return e.apply(this, arguments)
            }, i.extend(r, e), g.prototype = e.prototype, r.prototype = new g, t && i.extend(r.prototype, t), n && i.extend(r, n), r.prototype.constructor = r, r.__super__ = e.prototype, r
        }, b = function (e, t) {
            return !e || !e[t] ? null : i.isFunction(e[t]) ? e[t]() : e[t]
        }, w = function () {
            throw new Error('A "url" property or function must be specified')
        }, E = function (e, t, n) {
            return function (r, i) {
                var i = r === t ? i : r;
                e ? e(r, i, n) : t.trigger("error", r, i, n)
            }
        }
}.call(this),
function () {
    window.Stacker = {
        cacheSheets: !0,
        stubTimeout: 500,
        initialize: function (e) {
            var t;
            e == null && (e = "#workspace");
            if (!(t = $(e).get(0))) return;
            return this.workspace = new Stacker.Workspace(t)
        },
        isSameOrigin: function (e) {
            var t, n;
            return t = document.createElement("a"), t.href = e, n = t.href.split("/", 3).join("/"), !window.location.href.indexOf(n)
        },
        isStandardClick: function (e) {
            return e.isTrigger || e.which === 1 && !e.metaKey && !e.ctrlKey
        },
        normalizePath: function (e) {
            var t, n;
            return t = document.createElement("a"), t.href = e, n = t.pathname + t.search, n.replace(/^\/*/, "/")
        }
    }
}.call(this),
function () {
    Stacker.history = "pushState" in window.history ? function () {
        var e, t, n, r, i;
        return t = 0, e = 0, i = {
            0: {}
        }, r = function (e, r, s, o) {
            return i[++t] = e != null ? e : {}, o == null && (o = window.location.toString()), window.history[r]({
                    _stacker: {
                        id: t,
                        title: s,
                        url: o
                    }
                }, s, o), n(t)
        }, n = function (t) {
            var n;
            if (!(n = i[t])) return;
            return e = t, $(document).trigger("stacker:statechange", [n])
        }, window.addEventListener("popstate", function (e) {
            var t, r;
            if (!(t = (r = e.state) != null ? r._stacker : void 0)) return;
            return n(t.id)
        }, !1), {
            pushState: function (e, t, n) {
                return r(e, "pushState", t, n)
            },
            replaceState: function (e, t, n) {
                return r(e, "replaceState", t, n)
            },
            getState: function (t) {
                return i[t != null ? t : e]
            }
        }
    }() : void 0
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["stacker/templates/404"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="panel sheet error not_found">\n  <header>\n    <h1>Oops!</h1>\n  </header>\n\n  <div class="sheet_body">\n    <h2>We can\'t find that page</h2>\n    <p>The link you clicked doesn\'t look quite right. Check to make <br>sure the spelling, capitalization, etc. are exactly right.</p>\n    <p><a href="#" onclick="history.back(); return false" class="button">&larr; Back to the previous page</a></p>\n  </div>\n</div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["stacker/templates/500"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="panel sheet error internal_server_error">\n  <header>\n    <h1>Oops! Something isn\'t working.</h1>\n  </header>\n\n  <div class="sheet_body">\n    <h2>This is our fault, not yours. We\'re sorry.</h2>\n    <p>It\'s likely this is a temporary glitch that will be fixed within <br>a few minutes. If you continue to see this error:</p>\n\n    <ul>\n      <li><a href="http://status.37signals.com" target="_blank" class="decorated">Check out status site for an update</a></li>\n      <li><a href="http://help.37signals.com/tickets/new" class="decorated">Tell us about this problem</a></li>\n      '), Stacker.env === "development" && (t.push('\n        <li><a href="#" data-response-text="'), t.push(r(this.responseText)), t.push('" onclick="(function(document){document.write(this.getAttribute(\'data-response-text\'));document.close()}).call(this,window.open().document);return false" class="decorated">View server response</a></li>\n      ')), t.push('\n    </ul>\n\n    <p><a href="#" onclick="history.back(); return false" class="button">&larr; Back to the previous page</a></p>\n  </div>\n</div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    var e = [].slice;
    Stacker.Panel = function () {
        function t(e, t) {
            this.el = e, this.container = t, this.status = 200, this.hasLoaded = !1, this.initialize()
        }
        return t.stubInnerHTML = "", t.stubOuterHTML = '<div class="panel stub">', t.extract = function (e, t) {
            var n;
            return t == null && (t = "div.panel"), n = $("<div>" + e).find(t), n.get(0)
        }, t.createStubElement = function (e) {
            var t;
            return t = $(this.stubOuterHTML + this.stubInnerHTML), t.attr("data-path", e), t.get(0)
        }, t.createStub = function (e, t) {
            return new this(this.createStubElement(e), t)
        }, t.prototype.initialize = function () {
            var e, t, n;
            return e = (t = $(this.el).attr("data-path")) != null ? t : location.pathname + location.search, (n = this.path) == null && (this.path = Stacker.normalizePath(e)), this.title = $(this.el).find("title").text()
        }, t.prototype.notify = function () {
            var t, n, r;
            return n = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [], (r = this.container) != null ? typeof r[n] == "function" ? r[n].apply(r, [this].concat(e.call(t))) : void 0 : void 0
        }, t.prototype.request = function (e, t) {
            var n, r, i = this;
            r = e.responseText, n = e.preventReload;
            if (r) return this.handleSuccessResponse(this.status = 200, r), this.hasLoaded = !0, typeof t == "function" ? t() : void 0;
            if (!this.hasLoaded || !n && !! this.canBeReloaded()) return $(this.el).addClass("loading"), $.ajax({
                    url: this.path,
                    data: {
                        from_workspace: 1
                    },
                    dataType: "html",
                    beforeSend: function (e) {
                        return e.stacker = !0
                    },
                    complete: function (e) {
                        var n, r;
                        r = e.status, n = e.responseText, $(i.el).removeClass("loading");
                        if (!i.canBeReplaced()) return;
                        return r === 200 || r === 304 ? i.handleSuccessResponse(r, n) : r > 0 && i.handleErrorResponse(r, n), i.status = r, typeof t == "function" ? t() : void 0
                    }
                });
            if (this.canBeReplaced()) return this.replace(this.el), typeof t == "function" ? t() : void 0
        }, t.prototype.handleSuccessResponse = function (e, t) {
            return this.replace(this.constructor.extract(t)), this.hasLoaded = !0
        }, t.prototype.handleErrorResponse = function (e, t) {
            var n;
            return e === 404 ? n = JST["stacker/templates/404"] : n = JST["stacker/templates/500"], this.replace(this.constructor.extract(n({
                            status: e,
                            responseText: t
                        })))
        }, t.prototype.replace = function (e) {
            return e !== this.el && ($(this.el).replaceWith(e), this.el = e), this.initialize(), this.notify("didReplacePanel")
        }, t.prototype.canBeReplaced = function () {
            return !0
        }, t.prototype.canBeReloaded = function () {
            return !$(this.el).is("[data-behavior~=prevent_reload]")
        }, t.prototype.isStub = function () {
            return $(this.el).hasClass("stub")
        }, t.prototype.isLoading = function () {
            return $(this.el).hasClass("loading")
        }, t
    }()
}.call(this),
function () {
    Stacker.ExclusiveCallback = function () {
        function e() {
            this.reset()
        }
        return e.prototype.define = function (e) {
            var t = this;
            return this.callback = e,
            function () {
                if (t.callback === e) return e(), t.reset()
            }
        }, e.prototype.timeout = function (e, t) {
            var n;
            return n = this.define(t), setTimeout(n, e), n
        }, e.prototype.reset = function () {
            return this.callback = null
        }, e
    }()
}.call(this),
function () {
    var e = [].slice;
    Stacker.Container = function () {
        function r(e, t) {
            this.el = e, this.workspace = t, this.id = ++n, this.loadCallback = new Stacker.ExclusiveCallback, this.initialize()
        }
        var t, n;
        return n = 0, t = {}, r.panelConstructor = Stacker.Panel, r.createStubElement = function () {
            var e;
            return e = $("<div class=container>"), e.addClass(this.className), e.get(0)
        }, r.createStub = function (e) {
            return new this(this.createStubElement(), e)
        }, r.getPanelCache = function () {
            var e, n;
            return (n = t[e = this.className]) != null ? n : t[e] = {}
        }, r.cachePanel = function (e) {
            var t;
            return t = this.getPanelCache(), t[e.path] = e
        }, r.findPanelForPath = function (e) {
            var n, r, i;
            for (n in t) {
                i = t[n];
                if (r = i[e]) return r
            }
        }, r.findPanelForElement = function (e) {
            var n, r, i, s;
            for (n in t) {
                i = t[n];
                for (s in i) {
                    r = i[s];
                    if (r.el === e) return r
                }
            }
        }, r.findOrCreatePanelForPathAndContainer = function (e, t) {
            var n, r;
            return n = this.getPanelCache(), (r = n[e]) != null ? r : n[e] = this.panelConstructor.createStub(e, t)
        }, r.extract = function (e, t) {
            var n, r;
            return t == null && (t = "div.container"), n = $("<div>" + e).find(t), (r = n.get(0)) != null ? r.childNodes : void 0
        }, r.prototype.initialize = function () {
            var e;
            return this.setTitle((e = this.panel) != null ? e.title : void 0), $(this.el).attr("data-container-id", this.id), this.layout()
        }, r.prototype.notify = function () {
            var t, n, r;
            return n = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [], (r = this.workspace) != null ? typeof r[n] == "function" ? r[n].apply(r, [this].concat(e.call(t))) : void 0 : void 0
        }, r.prototype.findOrCreatePanelForPath = function (e) {
            return this.constructor.findOrCreatePanelForPathAndContainer(e, this)
        }, r.prototype.createPanelForElement = function (e) {
            var t;
            return t = new this.constructor.panelConstructor(e, this), this.constructor.cachePanel(t)
        }, r.prototype.createStubPanelForPath = function (e) {
            return this.constructor.panelConstructor.createStub(e, this)
        }, r.prototype.load = function (e, t, n) {
            var r, i, s, o = this;
            return $.isFunction(t) && (n = t, t = {}), n == null && (n = $.noop), s = t.response, i = this.shouldPreventReload(e, t), e.isStub() ? (r = this.loadCallback.timeout(Stacker.stubTimeout, function () {
                        return o.show(e, t), n(o, e, t)
                    }), e.request({
                        responseText: s,
                        preventReload: i
                    }, r)) : (this.loadCallback.reset(), this.show(e, t), e.request({
                        responseText: s,
                        preventReload: i
                    }), n(this, e, t))
        }, r.prototype.loadPathWithDefaultStack = function (e, t, n) {
            var r;
            return r = this.constructor.panelConstructor.createStub(e, this), this.request(e, t, n)
        }, r.prototype.show = function (e, t) {
            return e !== this.panel && (this.display(e, t), e.container = this, this.panel = e), this.notify("didShowPanel", e)
        }, r.prototype.display = function (e, t) {}, r.prototype.request = function (e, t, n) {
            var r = this;
            return $.isFunction(t) && (n = t, t = {}), n == null && (n = $.noop), $.ajax({
                    url: e,
                    data: {
                        from_workspace: 1
                    },
                    dataType: "html",
                    success: function (e, i) {
                        return r.replace(r.constructor.extract(e)), typeof n == "function" ? n(r, r.panel, t) : void 0
                    }
                })
        }, r.prototype.replace = function (e) {
            return $(this.el).html(e), this.initialize()
        }, r.prototype.didReplacePanel = function (e) {
            return this.setTitle(e.title), this.layout(), this.notify("didReplacePanel", e)
        }, r.prototype.setTitle = function (e) {
            return this.title = e, this.notify("didChangeTitle", this.title)
        }, r.prototype.layout = function () {}, r.prototype.shouldPreventReload = function (e) {
            return !1
        }, r
    }()
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    Stacker.FlatContainer = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.className = "flat_container", n.prototype.initialize = function () {
            var e;
            if (e = this.getPanelElement()) this.panel = this.createPanelForElement(e);
            return n.__super__.initialize.apply(this, arguments)
        }, n.prototype.getPanelElement = function () {
            return $(this.el).find("> div.panel").get(0)
        }, n.prototype.display = function (e) {
            return $(this.el).html(e.el)
        }, n
    }(Stacker.Container)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    Stacker.Sheet = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.stubInnerHTML = "<header><h1><a data-restore-position>", n.extract = function (e, t) {
            return t == null && (t = "div.sheet:not(.inactive):last"), Stacker.Panel.extract.call(this, e, t)
        }, n.createStubElement = function (e) {
            var t;
            return t = Stacker.Panel.createStubElement.call(this, e), $(t).addClass("sheet").find("a").attr("href", e), t
        }, n.prototype.initialize = function () {
            var e, t, r;
            return t = $(this.el), r = t.find("> header > h1"), e = r.find("> a"), t.attr("data-path") || t.attr("data-path", e.attr("href")), n.__super__.initialize.apply(this, arguments), this.header = r
        }, n.prototype.canBeReplaced = function () {
            return this.isActive() || this.isStub()
        }, n.prototype.canBeReloadedWhenStacked = function () {
            return !$(this.el).is("[data-behavior~=prevent_reload_when_stacked]")
        }, n.prototype.isActive = function () {
            return !$(this.el).hasClass("inactive")
        }, n.prototype.isStub = function () {
            return n.__super__.isStub.apply(this, arguments) || !this.isActive() && !this.isCached()
        }, n.prototype.isCached = function () {
            return this.cachedEl != null
        }, n.prototype.save = function () {
            return Stacker.cacheSheets && this.status === 200 ? ($(this.el).trigger("beforeSheetSave", this), this.cachedEl = this.el.cloneNode(!0)) : (this.cachedEl = null, this.header = null)
        }, n.prototype.restore = function () {
            if (this.isActive()) return;
            return this.isCached() ? this.replace(this.cachedEl) : ($(this.el).find("> div.sheet").remove(), $(this.el).removeClass("inactive"), $(this.el).addClass("stub"))
        }, n.prototype.expireCache = function () {
            return this.isCached() && (this.cachedEl = null), this.hasLoaded = !1
        }, n.prototype.deactivate = function () {
            var e;
            if (this.isActive()) return e = this.header.text(), this.save(), $(this.el).html(this.constructor.stubInnerHTML).addClass("inactive").find("a").attr("href", this.path).text(e)
        }, n
    }(Stacker.Panel)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        }, n = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    Stacker.StackContainer = function (e) {
        function r() {
            return r.__super__.constructor.apply(this, arguments)
        }
        return t(r, e), r.panelConstructor = Stacker.Sheet, r.className = "stack_container", r.prototype.initialize = function () {
            var e, t, n, i;
            this.stack = [], i = this.getSheetElements();
            for (t = 0, n = i.length; t < n; t++) e = i[t], this.stack.push(this.createPanelForElement(e));
            return this.panel = this.getActiveSheet(), r.__super__.initialize.apply(this, arguments)
        }, r.prototype.display = function (e, t) {
            var r;
            t == null && (t = {});
            if (n.call(this.stack, e) >= 0) {
                r = [];
                while (this.panel !== e) r.push(this.pop());
                return r
            }
            return t.replaceSheet && this.pop(!0), this.push(e)
        }, r.prototype.load = function (e, t, n) {
            return t.forceReload && e.expireCache(), r.__super__.load.apply(this, arguments)
        }, r.prototype.push = function (e) {
            return this.panel ? (this.panel.deactivate(), $(this.panel.el).append(e.el)) : $(this.el).html(e.el), this.stack.push(e), e.restore(), this.layout()
        }, r.prototype.pop = function (e) {
            var t, n;
            e == null && (e = !1);
            if (!(t = this.panel)) return;
            return this.stack.pop(), t.deactivate(), this.panel = this.getActiveSheet(), e ? $(t.el).remove() : ((n = this.panel) != null && n.restore(), this.layout()), t
        }, r.prototype.clear = function () {
            var e;
            e = [];
            while (this.panel) e.push(this.pop());
            return e
        }, r.prototype.indexOf = function (e) {
            var t, n, r, i, s;
            s = this.stack;
            for (t = r = 0, i = s.length; r < i; t = ++r) {
                n = s[t];
                if (n.path === e) return t
            }
            return -1
        }, r.prototype.getSheetElements = function () {
            return $(this.el).find("div.sheet")
        }, r.prototype.getActiveSheet = function () {
            var e;
            if (e = this.stack.length) return this.stack[e - 1]
        }, r.prototype.layout = function () {
            var e, t, n, r;
            e = $(this.el), t = this.getSheetElements(), e.css({
                    width: ""
                });
            if (n = t.length) return r = e.width(), r += 20 * (t.length - 1), t.each(function (e) {
                return e !== 0 && $(this).css({
                        marginLeft: "20px",
                        marginBottom: "-20px"
                    }), $(this).toggleClass("inactive", e !== n - 1)
            }), e.css({
                    width: r
                })
        }, r.prototype.shouldPreventReload = function (e) {
            return n.call(this.stack, e) >= 0 && e.container === this && e.isCached() && !e.canBeReloadedWhenStacked()
        }, r
    }(Stacker.Container)
}.call(this),
function () {
    var e = function (e, t) {
        return function () {
            return e.apply(t, arguments)
        }
    }, t = [].slice;
    Stacker.Workspace = function () {
        function o(t) {
            this.el = t, this.containerLoadedPanel = e(this.containerLoadedPanel, this), this.didChangeState = e(this.didChangeState, this), this.didClickLink = e(this.didClickLink, this), $("a[href]").live("click", this.didClickLink), $(document).bind("stacker:statechange", this.didChangeState), this.states = {}, this.containers = {}, this.positions = {}, this.initialize(), this.id = 0
        }
        var n, r, i, s;
        return o.prototype.initialize = function () {
            var e, t;
            t = $(this.el), e = t.children().first();
            if (!e.is("div.container")) return e.is("div.sheet") ? e.wrap(Stacker.StackContainer.createStubElement()) : t.wrapInner(Stacker.FlatContainer.createStubElement()), this.initialize();
            e.is(".stack_container") ? this.register(this.container = new Stacker.StackContainer(e.get(0))) : this.register(this.container = new Stacker.FlatContainer(e.get(0))), this.updateTitle(this.container.title), t.removeClass("loading");
            if (Stacker.history) return this.replaceState({
                    cid: this.container.id
                }, this.title, this.container.path)
        }, o.prototype.pushState = function (e, t, n) {
            return Stacker.history.pushState(e, t, n)
        }, o.prototype.replaceState = function (e, t, n) {
            return Stacker.history.replaceState(e, t, n)
        }, o.prototype.getState = function () {
            return {
                url: Stacker.normalizePath(window.location),
                options: Stacker.history.getState()
            }
        }, o.prototype.register = function (e) {
            return this.containers[e.id] = e, e.workspace = this
        }, o.prototype.didClickLink = function (e) {
            var t, n, i;
            if (this.matchLinkClickEvent(e)) {
                n = e.currentTarget, i = r(n), t = jQuery.Event("stackerLinkClicked"), $(n).trigger(t, [i]);
                if (!t.isDefaultPrevented()) return this.visit(n.href, i), e.preventDefault(), e.stopPropagation()
            }
        }, o.prototype.matchLinkClickEvent = function (e) {
            var t;
            return t = e.target.href, Stacker.isSameOrigin(t) && Stacker.isStandardClick(e)
        }, o.prototype.didChangeState = function (e) {
            var t, n, r;
            if (this.initialized) {
                if (n = this.getState()) r = n.url, t = n.options, this.load(r, t)
            } else this.initialized = !0;
            return this.path = Stacker.normalizePath(window.location)
        }, o.prototype.show = function (e) {
            if (this.container !== e) return this.container = e, $(this.el).html(this.container.el), this.container.layout(), this.updateTitle(this.container.title)
        }, o.prototype.visit = function (e, t) {
            var n, r;
            return t == null && (t = {}), Stacker.history ? (this.positions[Stacker.normalizePath(window.location)] = this.getScrollPosition(), r = Stacker.normalizePath(e), n = this.container.panel, t = s(t), r === (n != null ? n.path : void 0) ? n.request({
                        responseText: t.response
                    }) : this.pushState(t, null, e)) : window.location = e
        }, o.prototype.load = function (e, t) {
            var n, r, i;
            return t == null && (t = {}), n = this.findOrCreateContainerForOptions(t), i = Stacker.normalizePath(e), t.defaultStack ? r = n.createStubPanelForPath(i) : r = n.findOrCreatePanelForPath(i), $(this.el).trigger("workspace:beforeload", {
                    location: e,
                    path: i,
                    container: n,
                    panel: r
                }), $(r.el).trigger("panelLoading", r), t.defaultStack ? n.loadPathWithDefaultStack(i, t, this.containerLoadedPanel) : n.load(r, t, this.containerLoadedPanel)
        }, o.prototype.findOrCreateContainerForOptions = function (e) {
            var t, r;
            return e.cid || (t = n(e), t === this.container.constructor && !e.replaceStack ? r = this.container : this.register(r = t.createStub(this)), e.cid = r.id), this.containers[e.cid]
        }, o.prototype.findPanel = function (e) {
            var t, n;
            if (!e) return;
            if (_.isString(e)) return n = Stacker.normalizePath(e), Stacker.Container.findPanelForPath(n);
            if (e.jquery && e.get) return t = e.get(0), this.findPanel(t);
            if (_.isElement(e)) return Stacker.Container.findPanelForElement(e)
        }, o.prototype.containerLoadedPanel = function (e, t, n) {
            var r, i;
            return this.show(e), r = (i = n.restorePosition ? this.positions[t.path] : void 0) != null ? i : 0, delete n.restorePosition, $.scrollTo(r), this.scrollToAnchor(), $(t.el).trigger("panelDisplayed", t), $(this.el).trigger("workspace:load", {
                    container: e,
                    panel: t
                })
        }, o.prototype.getScrollPosition = function () {
            return $(window).scrollTop()
        }, o.prototype.scrollToAnchor = function () {
            var e, t;
            if (this.getScrollPosition() === 0 && (t = window.location.hash)) {
                e = $(t);
                if (e.length) return $.scrollTo(e)
            }
        }, o.prototype.didReplacePanel = function (e, t) {
            var n;
            if (((n = this.container) != null ? n.panel : void 0) === t) return this.scrollToAnchor(), $(t.el).trigger("panelReplaced", t)
        }, o.prototype.didChangeTitle = function (e, t) {
            if (e === this.container) return this.updateTitle(t)
        }, o.prototype.updateTitle = function (e) {
            if (e) return document.title = this.title = e
        }, s = function (e) {
            var t;
            return t = $.extend({}, e), t.replaceStack || (t.replaceStack = t.defaultStack), t
        }, r = function (e) {
            return {
                bareWorkspace: i(e, "data-bare-workspace"),
                defaultStack: i(e, "data-default-stack"),
                replaceStack: i(e, "data-replace-stack"),
                replaceSheet: i(e, "data-replace-sheet"),
                restorePosition: i(e, "data-restore-position"),
                forceReload: i(e, "data-force-reload")
            }
        }, i = function () {
            var e, n, r, i, s, o, u;
            i = arguments[0], r = 2 <= arguments.length ? t.call(arguments, 1) : [], e = $(i);
            for (o = 0, u = r.length; o < u; o++) {
                n = r[o], s = e.attr(n);
                if (s != null && s !== "no" && s !== "false") return !0
            }
            return !1
        }, n = function (e) {
            return e.bareWorkspace ? Stacker.FlatContainer : Stacker.StackContainer
        }, o
    }()
}.call(this),
function () {
    Stacker.env = "production", $(function () {
        return setTimeout(function () {
            return Stacker.initialize()
        }, 10)
    }), $("a[data-remote], a[data-method], a[href^=#], a[target], a[data-stacker=false]").live("stackerLinkClicked", function (e) {
        return e.preventDefault()
    })
}.call(this),
function () {
    $(document).bind("page:change", function () {
        var e;
        if (e = location.pathname.match(/^\/(\d{7,})/)) return bcx.currentAccountSlug = e[1]
    }), $(document).ajaxSend(function (e, t, n) {
        if (!n.url.match(/^\/(\d{7,})/) && bcx.currentAccountSlug) return n.url = "/" + bcx.currentAccountSlug + n.url
    })
}.call(this),
function () {
    var e, t, n = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, r = {}.hasOwnProperty,
        i = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var n in t) r.call(t, n) && (e[n] = t[n]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    e = function () {
        function e(e) {
            var t = this;
            this.el = e, this.resetHeight = n(this.resetHeight, this), this.adjustHeight = n(this.adjustHeight, this), this.watchForChanges = n(this.watchForChanges, this), this.makeTestContainer = n(this.makeTestContainer, this), this.preventScrollBars = n(this.preventScrollBars, this), this.sourceContents = n(this.sourceContents, this), this.source = n(this.source, this), this.$el = $(this.el).css({
                    resize: "none"
                }), this.heightLimit = this.$el.data("autoresize-limit"), this.$source = this.source(), this.originalHeight = this.$el.height(), this.$testContainer = this.makeTestContainer(), this.preventScrollBars(), setTimeout(function () {
                    return t.adjustHeight(), t.watchForChanges()
                }, 1)
        }
        return e.prototype.resizeBy = 2, e.install = function (e) {
            if (!$(e).is("[data-autoresize]")) return $(e).attr("data-autoresize", !0), new this(e)
        }, e.prototype.source = function () {
            return this.$el
        }, e.prototype.sourceContents = function () {
            return this.$source.val().replace(/\n/g, "<br>").replace(/</g, "&lt;").replace(/>/g, "&gt;")
        }, e.prototype.preventScrollBars = function () {
            return this.$source.css("overflow", "hidden")
        }, e.prototype.makeTestContainer = function () {
            var e, t, n, r, i;
            e = $("<div>").css({
                    position: "absolute",
                    left: -9999,
                    top: 0,
                    "word-wrap": "break-word"
                }), e.addClass("formatted_content hidden"), t = ["fontSize", "fontFamily", "fontWeight", "letterSpacing", "lineHeight", "textDecoration", "padding", "text-rendering"];
            for (r = 0, i = t.length; r < i; r++) n = t[r], e.css(n, this.$source.css(n));
            return e.insertBefore(this.$el)
        }, e.prototype.watchForChanges = function () {
            var e = this;
            return this
                .$source.bind("keyup keydown paste change focus", _.throttle(function () {
                        return e.adjustHeight()
                    }, $.browser.mobile ? 300 : 5)), this.$el.closest("form").bind("reset", function () {
                    return e.resetHeight()
                })
        }, e.prototype.adjustHeight = function () {
            var e, t, n, r, i;
            return this.$testContainer.width(this.$source.width()), i = this.$testContainer.html("X").height(), this.$testContainer.html(this.sourceContents()), r = parseInt(this.$el.data("rows") || this.$el.attr("rows")) || !1, n = r === 1 ? 1 : this.resizeBy * i, e = r ? i * r + 1 : this.originalHeight, t = this.$testContainer.height() + n, this.heightLimit && t > this.heightLimit && (t = this.heightLimit), t < e && (t = e), t = Math.round(t), this.$el.css("min-height", t)
        }, e.prototype.resetHeight = function () {
            return this.$el.css("min-height", this.originalHeight)
        }, e
    }(), t = function (e) {
        function t() {
            return this.preventScrollBars = n(this.preventScrollBars, this), this.sourceContents = n(this.sourceContents, this), this.source = n(this.source, this), t.__super__.constructor.apply(this, arguments)
        }
        return i(t, e), t.prototype.source = function () {
            return this.$el.contents().find("body")
        }, t.prototype.sourceContents = function () {
            return this.$source.html()
        }, t.prototype.preventScrollBars = function () {
            return this.$source.parent("html").css({
                    overflow: "hidden"
                })
        }, t
    }(e), $.fn.autoResize = function () {
        return this.each(function () {
            return this.tagName.toLowerCase() === "iframe" ? t.install(this) : e.install(this)
        })
    }
}.call(this),
function () {
    Backbone.Collection.prototype.addOrUpdate = function (e) {
        var t;
        return (t = this.get(e.id)) ? t.set(e) : this.add(e)
    }, Backbone.Collection.prototype.getOrAdd = function (e) {
        var t;
        return (t = this.get(e)) ? t : (this.add({
                    id: e
                }), this.get(e))
    }, Backbone.Collection.prototype.merge = function (e) {
        var t, n, r, i;
        i = [];
        for (n = 0, r = e.length; n < r; n++) t = e[n], i.push(this.addOrUpdate(t));
        return i
    }
}.call(this),
function () {
    window.LRUCache = function () {
        function e(e) {
            this.size = e, this.keys = [], this.values = {}
        }
        return e.prototype.has = function (e) {
            return e in this.values
        }, e.prototype.read = function (e) {
            return this.values[e]
        }, e.prototype.touch = function (e) {
            var t;
            return t = this.keys.indexOf(e), this.keys.splice(t, 1), this.keys.unshift(e)
        }, e.prototype.get = function (e) {
            var t;
            return t = this.read(e), this.touch(e), t
        }, e.prototype.put = function (e, t) {
            return this.values[e] = t, this.keys.unshift(e), this.trim(), t
        }, e.prototype.fetch = function (e, t) {
            return this.has(e) ? this.get(e) : this.put(e, t())
        }, e.prototype.trim = function () {
            var e, t, n, r, i;
            r = this.keys.splice(this.size), i = [];
            for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(delete this.values[e]);
            return i
        }, e
    }()
}.call(this),
function () {
    this.CalendarDateTime = function () {
        function t(e, t) {
            this.calendarDate = e, this.calendarTime = t, this.year = this.calendarDate.year, this.month = this.calendarDate.month, this.day = this.calendarDate.day, this.hour = this.calendarTime.hour, this.minute = this.calendarTime.minute, this.second = this.calendarTime.second
        }
        var e;
        return t.iso8601Pattern = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.\d+)?(Z|[-+]?[\d:]+)$/, t.parse = function (e, t) {
            var n, r;
            return n = CalendarDate.parse(e), r = CalendarTime.parse(t), new this(n, r)
        }, t.prototype.toLocalDate = function () {
            return new Date(this.year, this.month - 1, this.day, this.hour, this.minute, this.second, 0)
        }, t.prototype.toUTCDate = function () {
            return new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second))
        }, t.prototype.toLocalString = function () {
            return e(this.toLocalDate())
        }, t.prototype.toUTCString = function () {
            return e(this.toUTCDate())
        }, t.prototype.toString = function () {
            return this.toLocalString()
        }, e = function (e) {
            return JSON.parse(JSON.stringify(e))
        }, t
    }()
}.call(this),
function () {
    this.CalendarDate = function () {
        function e(e, t, n) {
            this.date = new Date(Date.UTC(e, t - 1)), this.date.setUTCDate(n), this.year = this.date.getUTCFullYear(), this.month = this.date.getUTCMonth() + 1, this.day = this.date.getUTCDate(), this.value = this.date.getTime()
        }
        return e.monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], e.abbreviatedMonthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], e.weekdayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], e.abbreviatedWeekdayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], e.firstDayOfWeek = 0, e.cache = new LRUCache(512), e.today = function () {
            return this.parse(new Date)
        }, e.parse = function (e) {
            var t, n = this;
            return e == null && (e = ""), t = "" + e, this.cache.fetch(t, function () {
                var r, i, s;
                return e instanceof Date ? new n(e.getFullYear(), e.getMonth() + 1, e.getDate()) : $.isArray(e) ? (s = e[0], i = e[1], r = e[2], new n(s, i, r)) : t.trim() ? t.match(CalendarDateTime.iso8601Pattern) ? n.parse(new Date(Date.parse(t))) : n.parse(t.split("-")) : n.today()
            })
        }, e.prototype.beginningOfYear = function () {
            return new this.constructor(this.year, 1, 1)
        }, e.prototype.beginningOfMonth = function () {
            return new this.constructor(this.year, this.month, 1)
        }, e.prototype.beginningOfWeek = function (e) {
            var t;
            return e == null && (e = this.constructor.firstDayOfWeek), t = this.date.getUTCDay() - e, t < 0 && (t += 7), this.previous(t)
        }, e.prototype.nextMonth = function (e, t) {
            var n, r;
            e == null && (e = 1), t == null && (t = 1);
            if (e === 0) return this.beginningOfMonth();
            n = this.month + e, r = this.year;
            while (n > 12) n -= 12, r++;
            while (n < 1) n += 12, r--;
            return new this.constructor(r, n, t)
        }, e.prototype.previousMonth = function (e) {
            return e == null && (e = 1), this.nextMonth(-e)
        }, e.prototype.next = function (e) {
            return e == null && (e = 1), e === 0 ? this : new this.constructor(this.year, this.month, this.day + e)
        }, e.prototype.previous = function (e) {
            return e == null && (e = 1), e === 0 ? this : this.next(-e)
        }, e.prototype.equals = function (e) {
            return (e != null ? e.value : void 0) === this.value
        }, e.prototype.is = function (e) {
            return this.equals(e)
        }, e.prototype.isnt = function (e) {
            return !this.equals(e)
        }, e.prototype.fallsOnSameYearAs = function (e) {
            return this.year === (e != null ? e.year : void 0)
        }, e.prototype.occursThisYear = function () {
            return this.fallsOnSameYearAs(this.constructor.today())
        }, e.prototype.fallsOnSameMonthAs = function (e) {
            return this.beginningOfMonth().equals(e != null ? e.beginningOfMonth() : void 0)
        }, e.prototype.fallsOnSameWeekAs = function (e) {
            return this.beginningOfWeek().equals(e != null ? e.beginningOfWeek() : void 0)
        }, e.prototype.occursThisWeek = function () {
            return this.fallsOnSameWeekAs(this.constructor.today())
        }, e.prototype.isToday = function () {
            return this.equals(this.constructor.today())
        }, e.prototype.isWeekend = function () {
            var e;
            return (e = this.date.getUTCDay()) === 0 || e === 6
        }, e.prototype.daysSince = function (e) {
            if (e) return (this.date - e.date) / 864e5
        }, e.prototype.weeksSince = function (e) {
            if (e) return this.beginningOfWeek().daysSince(e.beginningOfWeek()) / 7
        }, e.prototype.getWeekNumber = function () {
            return this.beginningOfWeek()
        }, e.prototype.getMonthName = function () {
            return this.constructor.monthNames[this.month - 1]
        }, e.prototype.getAbbreviatedMonthName = function () {
            return this.constructor.abbreviatedMonthNames[this.month - 1]
        }, e.prototype.getWeekdayName = function () {
            return this.constructor.weekdayNames[this.date.getUTCDay()]
        }, e.prototype.getAbbreviatedWeekdayName = function () {
            return this.constructor.abbreviatedWeekdayNames[this.date.getUTCDay()]
        }, e.prototype.getLocalDate = function () {
            return new Date(this.year, this.month - 1, this.day)
        }, e.prototype.compareTo = function (e) {
            return this.date > (e != null ? e.date : void 0) ? 1 : this.date < (e != null ? e.date : void 0) ? -1 : 0
        }, e.prototype.shortWithYear = function () {
            return "" + this.getAbbreviatedMonthName() + " " + this.day + ", " + this.year
        }, e.prototype.longWithYear = function () {
            return "" + this.getMonthName() + " " + this.day + ", " + this.year
        }, e.prototype.abbreviatedShortWithWeekday = function () {
            return "" + this.getAbbreviatedWeekdayName() + ", " + this.getAbbreviatedMonthName() + " " + this.day
        }, e.prototype.toString = function () {
            var e, t, n, r;
            return (r = this.stringValue) != null ? r : this.stringValue = (n = this.year, t = this.month < 10 ? "0" + this.month : this.month, e = this.day < 10 ? "0" + this.day : this.day, "" + n + "-" + t + "-" + e)
        }, e
    }()
}.call(this),
function () {
    this.CalendarTime = function () {
        function t(e, t, n) {
            var r, i, s;
            this.hour = e != null ? e : 0, this.minute = t != null ? t : 0, this.second = n != null ? n : 0;
            if (!(0 <= (r = this.hour) && r <= 23 && 0 <= (i = this.minute) && i <= 59 && 0 <= (s = this.second) && s <= 59)) throw Error("invalid time (" + this.hour + ", " + this.minute + ", " + this.second + ")");
            this.ampm = this.hour < 12 ? "am" : "pm", this.hour === 0 ? this.hour12 = 12 : this.hour > 12 ? this.hour12 = this.hour - 12 : this.hour12 = this.hour
        }
        var e;
        return t.pattern = /^\s*(\d{1,2})(?:[.:]?([0-5]\d?)?)?(?:[.:]?([0-5]\d?)?)?(?:\s*([ap])(?:\.?m\.?)?|\s*[h]?)?\s*$/i, t.parse = function (e) {
            var t, n, r, i, s, o, u, a, f;
            a = "" + e;
            if (e instanceof Date) return r = e.getHours(), s = e.getMinutes(), u = e.getSeconds(), new this(r, s, u);
            if (a.match(CalendarDateTime.iso8601Pattern)) return this.parse(new Date(Date.parse(a)));
            if (i = a.match(this.pattern)) return f = i[0], r = i[1], s = i[2], u = i[3], n = i[4], r = parseInt(r, 10), s = parseInt(s != null ? s : "0", 10), u = parseInt(u != null ? u : "0", 10), t = n != null ? n.match(/a/i) : void 0, o = n != null ? n.match(/p/i) : void 0, 1 <= r && r <= 11 && o && (r += 12), r === 12 && t && (r = 0), new this(r, s, u);
            throw Error("invalid time (" + e + ")")
        }, t.isValid = function (e) {
            try {
                return this.parse(e), !0
            } catch (t) {
                return !1
            }
        }, t.prototype.toString = function (t) {
            var n;
            return t == null && (t = {}), n = [e(this.minute), e(this.second)], t.short && this.second === 0 && (n.pop(), this.minute === 0 && n.pop()), n.length && (n = ":" + n.join(":")), t[12] ? "" + this.hour12 + n + this.ampm : "" + this.hour + n
        }, t.prototype.toFriendlyString = function () {
            return this.toString({
                    12: !0,
                    "short": !0
                })
        }, e = function (e) {
            return e < 10 ? "0" + e : "" + e
        }, t
    }()
}.call(this),
function () {
    var e = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    $.fn.fadeOutAndRemove = function (t) {
        var n, r;
        return t == null && (t = {}), t.collapse ? _.isArray(t.collapse) ? (r = e.call(t.collapse, "width") >= 0, n = e.call(t.collapse, "height") >= 0) : (r = t.collapse === "width", n = t.collapse === "height") : (r = !1, n = !0), $(this).animate({
                opacity: 0
            }, 200, "linear", function () {
                var e, i, s;
                return e = {
                    marginTop: 0,
                    marginBottom: 0,
                    paddingTop: 0,
                    paddingBottom: 0
                }, r && (e.width = 0), n && (e.height = 0), i = t.duration || Math.sqrt($(this).height()) * 35, s = t.easing || "easeOutQuad", $(this).animate(e, i, s, function () {
                    return $(this).remove()
                })
            })
    }, $.fn.bounce = function () {
        return $(this).effect("bounce", {
                times: 3
            }, 150)
    }, $.fn.pulsate = function () {
        return $(this).effect("pulsate", {
                times: 3
            }, 200)
    }, $.fn.highlight = function () {
        return $(this).effect("highlight", {}, 1500)
    }
}.call(this),
function () {
    var e, t;
    isNaN(Date.parse("2011-01-01T12:00:00-05:00")) && (t = Date.parse, e = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|[-+]?[\d:]+)$/, Date.parse = function (n) {
        var r, i, s, o, u, a, f, l, c, h;
        n = n.toString();
        if (s = n.match(e)) h = s[0], l = s[1], u = s[2], r = s[3], i = s[4], o = s[5], f = s[6], c = s[7], c !== "Z" && (a = c.replace(":", "")), n = "" + l + "/" + u + "/" + r + " " + i + ":" + o + ":" + f + " GMT" + [a];
        return t(n)
    })
}.call(this),
function () {
    $.fn.computedStyle = function () {
        var e, t, n, r, i, s, o, u;
        if (!(e = this.get(0))) return {};
        r = {};
        if (window.getComputedStyle) {
            i = window.getComputedStyle(e, null);
            for (o = 0, u = i.length; o < u; o++) n = i[o], t = n.replace(/-([a-z])/g, function (e, t) {
                return t.toUpperCase()
            }), r[t] = i.getPropertyValue(n)
        } else if (i = e.currentStyle)
            for (n in i) s = i[n], r[n] = s;
        return r
    }
}.call(this),
function () {
    $.fn.containsPoint = function (e, t) {
        var n, r, i, s, o;
        return e.pageX && e.pageY ? this.containsPoint(e.pageX, e.pageY) : this.length ? (o = this.offset(), s = o.top, r = o.left, n = s + this.outerHeight(), i = r + this.outerWidth(), r <= e && e <= i && s <= t && t <= n) : !1
    }
}.call(this),
function () {
    $(function () {
        return $("meta[name=csrf-token]").attr("content", $.cookie("csrf-token")), $("meta[name=csrf-param]").attr("content", $.cookie("csrf-param"))
    })
}.call(this),
function () {
    $.fn.markAsClean = function () {
        return $(this).data("clean", $(this).find(":input").serialize())
    }, $.fn.isClean = function () {
        return $(this).find(":input").serialize() === $(this).data("clean")
    }, $.fn.isDirty = function () {
        return !$(this).isClean()
    }
}.call(this),
function () {
    var e = [].slice;
    $.fn.dispatch = function () {
        var t, n, r;
        return r = arguments[0], t = 2 <= arguments.length ? e.call(arguments, 1) : [], n = $.Event(r), this.trigger(n, t), n
    }
}.call(this),
function () {}.call(this),
function () {
    var e, t, n, r, i, s, o;
    s = "[data-behavior~=expandable]", n = "[data-behavior~=expand_exclusively]", i = "" + s + " [data-behavior~=expand_on_click]", t = "" + s + " [data-behavior~=collapse_on_click]", r = function (e) {
        return $(this).expand() || $(this).collapse(), e.preventDefault()
    }, e = function (e) {
        return $(this).collapse(), e.preventDefault()
    }, $(function () {
        var s, o, u, a;
        return $.support.touch && ($(i).live("touchstart", r), $(t).live("touchstart", e)), $(i).live("mousedown", function (e) {
            return r.call(this, e), e.preventDefault()
        }), $(i).live("click", function (e) {
            return e.preventDefault()
        }), $(t).live("click", function (t) {
            return e.call(this, t), t.preventDefault()
        }), s = "exclusively_expanded", u = null, o = null, $(n).live("beforeexpand", function (e) {
            var t, n;
            return n = $(this).get(0), u && u !== n && $(u).removeClass(s).collapse(), $(n).addClass(s), u = n, t = a, $(document).bind("click.exclusiveExpandable", function (e) {
                if (t === a) return;
                if (!$(e.target).closest(u).length) return $(u).collapse()
            })
        }), a = 0, window.addEventListener("mousedown", function () {
            return a++
        }, !0), $(n).live("beforecollapse", function () {
            return $(document).unbind(".exclusiveExpandable"), u = null
        })
    }), $("div.sheet").live("beforeSheetSave", function () {
        return $("" + s + ".expanded").collapse()
    }), o = function (e, t) {
        var n;
        return n = e.dispatch(t), !n.isDefaultPrevented()
    }, $.fn.expandable = function () {
        return $(this).closest(s)
    }, $.fn.expand = function () {
        var e;
        return e = $(this).expandable(), e.is(":not(.expanded)") && o(e, "beforeexpand") && (e.addClass("expanded"), e.trigger("expand")), e
    }, $.fn.collapse = function () {
        var e;
        return e = $(this).expandable(), e.is(".expanded") && o(e, "beforecollapse") && (e.removeClass("expanded"), e.trigger("collapse")), e
    }
}.call(this),
function () {
    var e;
    e = 70, $("span.pill[data-behavior~=expandable]:has(.balloon)").live("expand", function (t) {
        var n, r, i, s, o;
        n = $(t.target).find(".balloon"), n.data("original-class") && (n.removeClass("left_side right_side").addClass(n.data("original-class")), n.data("original-class", null)), n.data("moved-up") && (n.css({
                    marginTop: 0
                }), n.find(".arrow").css({
                    marginTop: 0
                }), n.data("moved-up", !1)), r = n.offset().top + n.outerHeight() - ($(window).height() + $(window).scrollTop()), o = n.offset().top - $(window).scrollTop() - n.outerHeight() + e, r > 20 && o > 0 && (s = n.outerHeight() - e, n.css({
                    marginTop: "-" + s + "px"
                }), n.find(".arrow").css({
                    marginTop: s
                }), n.data("moved-up", !0));
        if (n.hasClass("right_side")) {
            i = n.offset().left + n.outerWidth() - ($(window).width() + $(window).scrollLeft());
            if (i > 0) return n.removeClass("right_side").addClass("left_side"), n.data("original-class", "right_side")
        } else if (n.hasClass("left_side") && n.offset().left < 0) return n.removeClass("left_side").addClass("right_side"), n.data("original-class", "left_side")
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    t = null, e = null, a = "[data-behavior~=file_drop_target]", i = 0, $(window).bind("dragenter", function (n) {
        var u, f;
        r(n);
        if (!s(n)) return;
        u = $(n.target).closest(a);
        if (!u.length) return;
        return u.is(t) ? i++ : (o(), i = 1, f = u.dispatch("file:dragenter"), t = u, e = f.isDefaultPrevented() ? null : u)
    }), $(window).bind("dragover", function (e) {
        return r(e)
    }), $(window).bind("dragleave", function (e) {
        var n;
        r(e), n = $(e.target).closest(a);
        if (!n.length) return;
        if (n.is(t) && --i === 0) return o()
    }), $(window).bind("drop", function (n) {
        var i;
        r(n);
        if (!s(n)) return;
        i = $(n.target).closest(a);
        if (!i.length) return;
        if (i.is(e)) return i.trigger("file:drop", [_(n.originalEvent.dataTransfer.files).toArray()]), i.trigger("file:dragleave"), t = null, e = null
    }), $(document).bind("page:update expand", function () {
        return _.defer(function () {
            return $("" + a + " iframe").install("behavior for dropping files on an iframe", function (e) {
                return e.each(function () {
                    var e, t;
                    try {
                        return e = $(this), t = e.closest(a), e.contents().bind("dragenter", function (t) {
                            if (!s(t)) return;
                            return n(e)
                        }), t.bind("file:dragenter", function () {
                            return n(e)
                        }), t.bind("file:drop file:dragleave", function () {
                            return u(t)
                        })
                    } catch (r) {
                        return console.error("an error occurred while trying to find events to iframe (" + r + ")")
                    }
                })
            })
        })
    }), o = function () {
        if (t) return t.trigger("file:dragleave"), t = null, e = null
    }, s = function (e) {
        var t, n;
        return f.call((t = (n = e.originalEvent.dataTransfer) != null ? n.types : void 0) != null ? t : [], "Files") >= 0
    }, r = function (e) {
        return e.stopPropagation(), e.preventDefault()
    }, n = function (e) {
        var t, n, r, i, s, o;
        return r = 1, i = e.position(), n = i.left - r, s = i.top - r, o = e.outerWidth() + r * 2, t = e.outerHeight() + r * 2, i = "absolute", e.before($('<div class="iframe_blanket">').css({
                    left: n,
                    top: s,
                    width: o,
                    height: t,
                    position: i
                }))
    }, u = function (e) {
        return e.find(".iframe_blanket").remove()
    }
}.call(this),
function () {
    var e;
    e = function (t) {
        var n, r, i, s, o, u;
        r = t.cloneNode(!1), r.id = "", r.className = "", n = $(r), n.css($(t).computedStyle()), u = t.childNodes;
        for (s = 0, o = u.length; s < o; s++) i = u[s], i.nodeType === 1 ? r.appendChild(e(i)) : i.nodeType === 3 && r.appendChild(i.cloneNode(!1));
        return r
    }, $.fn.ghost = function () {
        return this.length ? $(e(this.get(0))).css({
                position: "absolute",
                zIndex: 999
            }).offset(this.offset()).appendTo("body") : this
    }
}.call(this),
function () {
    var e;
    e = function (e) {
        var t, n;
        return t = $(e), (n = t.data("installed behaviors")) || t.data("installed behaviors", n = {}), n
    }, $.fn.install = function (t, n) {
        var r;
        r = this.filter(function () {
            return !e(this)[t]
        });
        if (r.length) return n(r), r.each(function () {
            return e(this)[t] = !0
        })
    }
}.call(this),
function (e) {
    e.fn.autoGrowInput = function (t) {
        return t = e.extend({
                maxWidth: 1e3,
                minWidth: 0,
                comfortZone: 70
            }, t), this.filter("input:text").each(function () {
                var n = t.minWidth || e(this).width(),
                    r = "",
                    i = e(this),
                    s = e("<tester/>").css({
                            position: "absolute",
                            top: -9999,
                            left: -9999,
                            width: "auto",
                            fontSize: i.css("fontSize"),
                            fontFamily: i.css("fontFamily"),
                            fontWeight: i.css("fontWeight"),
                            letterSpacing: i.css("letterSpacing"),
                            whiteSpace: "nowrap"
                        }),
                    u = function () {
                        if (r === (r = i.val())) return;
                        var e = r.replace(/&/g, "&amp;").replace(/\s/g, "&nbsp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
                        s.html(e);
                        var u = s.width(),
                            a = u + t.comfortZone >= n ? t.maxWidth : n,
                            f = i.width(),
                            l = a < f && a >= n || a > n && a <= t.maxWidth;
                        l && i.stop().animate({
                                width: a
                            }, "fast")
                    };
                s.insertAfter(i), e(this).bind("keyup keydown blur update", _.throttle(u, 1e3))
            }), this
    }
}(jQuery),
function () {
    $.rails.href = function (e) {
        return e.data("url") || e.attr("href")
    }
}.call(this),
function () {
    $.support.touch = "ontouchstart" in document.documentElement, $.browser.mobile = /iPhone|iP[ao]d|Android|Windows Phone|BlackBerry/.test(navigator.userAgent), $.support.placeholder = document.createElement("input").placeholder != null
}.call(this),
function () {
    var e, t, n;
    e = jQuery, e.fn.truncate = function (e) {
        var n;
        return n = this, n.each(function () {
            var n;
            return n = this, new t(n, e)
        })
    }, t = function () {
        function t(t, n) {
            this.opts = e.extend({}, this.defaults, n), this.full_node = t, this.textShouldBeTruncated() && (this.trailing_whitespace = !0, this.truncated_node = this.truncate(this.full_node, this.opts.max_length), this.install())
        }
        return t.prototype.defaults = {
            allowable_overage: 50,
            max_length: 100,
            more: "more",
            less: "less",
            css_more_class: "truncator-link truncator-more",
            css_less_class: "truncator-link truncator-less"
        }, t.prototype.textShouldBeTruncated = function () {
            return this.charactersOverTheLimit() > this.opts.allowable_overage
        }, t.prototype.contentLength = function (t) {
            return e.trim(n(e(t).text())).length
        }, t.prototype.charactersOverTheLimit = function () {
            return this.contentLength(this.full_node) - this.opts.max_length
        }, t.prototype.install = function () {
            return e(this.full_node).hide(), this.truncated_node.insertAfter(e(this.full_node)), this.installMoreLink(), this.installLessLink()
        }, t.prototype.installMoreLink = function () {
            var t = this;
            return this.findNodeForMore(this.truncated_node).append(' <a href="#show more content" class="' + this.opts.css_more_class + '">' + this.opts.more + "</a>"), this.truncated_node.find("a:last").click(function () {
                return t.truncated_node.hide(), e(t.full_node).show(), !1
            })
        }, t.prototype.installLessLink = function () {
            var t = this;
            return this.findNodeForLess(e(this.full_node)).append(' <a href="#show less content" class="' + this.opts.css_less_class + '">' + this.opts.less + "</a>"), e(this.full_node).find("a:last").click(function () {
                return t.truncated_node.show(), e(t.full_node).hide(), !1
            })
        }, t.prototype.truncate = function (t, n) {
            var r, i = this;
            return t.nodeType === 3 ? this.truncateText(t, n) : (r = e(t).clone().empty(), e(t).contents().each(function (e, t) {
                        var s, o;
                        s = n - r.text().length;
                        if (s === 0) return;
                        o = i.truncate(t, s);
                        if (o) return r.append(o)
                    }), r)
        }, t.prototype.truncateText = function (t, r) {
            var i;
            return i = n(t.data), this.trailing_whitespace && (i = i.replace(/^ /, "")), i = i.slice(0, r), e("<div/>").text(i).html()
        }, t.prototype.findNodeForMore = function (t) {
            var n, r, i;
            return n = e(t), i = n.children(":last"), i ? (r = i.css("display"), !r || r === "inline" ? n : this.findNodeForMore(i)) : t
        }, t.prototype.findNodeForLess = function (t) {
            var n, r;
            return n = e(t), r = n.children(":last"), r && r.is("p") ? r : t
        }, t
    }(), n = function (e) {
        return e.replace(/\s+/g, " ")
    }
}.call(this),
function () {
    var e, t, n, r;
    e = $(document), t = !1, r = !1, n = function (t) {
        var n, r, i, s;
        r = (new Date).getTime(), i = (s = window.localStorage) != null ? s.profilePageEvents : void 0, i && console.profile(t), e.trigger(t), i && console.profileEnd(), n = (new Date).getTime();
        if (Stacker.env === "development") return console.warn("" + t + " (" + (n - r) + "ms)")
    }, e.ready(function () {
        return n("page:change"), n("page:update")
    }), e.bind("panelDisplayed", function (e, r) {
        return r.isLoading() ? (n("page:beforechange"), t = !0) : (n("page:change"), n("page:update"), t = !1)
    }), e.bind("workspace:load", function () {
        return r = !0
    }), e.bind("panelReplaced", function (e, i) {
        if (t || !r) t = !1, n("page:change");
        return r = !1, n("page:update")
    }), e.bind("ajaxSuccess", function (e, r, i) {
        if (t) return;
        if (r.stacker) return;
        if (!$.trim(r.responseText)) return;
        return n("page:update")
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    e = jQuery, u = "placeholding", f = [p = 33, h = 34, s = 35, o = 36, a = 37, g = 38, d = 39, i = 40], l = f.concat([t = 8, m = 9, v = 16, r = 17, c = 18, n = 91]), x = function (e, t, n) {
        var r;
        if (e.setSelectionRange) return e.focus(), e.setSelectionRange(t, n);
        if (e.createTextRange) return r = e.createTextRange(), r.collapse(!0), r.moveEnd("character", n), r.moveStart("character", t), r.select()
    }, S = function () {
        var e = this;
        if (w(this)) return setTimeout(function () {
            try {
                return e.setSelectionRange(0, 0)
            } catch (t) {}
        }, 0)
    }, y = function (t) {
        var n, r;
        if (w(this))
            if (n = t.which, T.call(l, n) >= 0) {
                if (r = t.which, T.call(f, r) >= 0) return S.apply(this)
            } else {
                e(this).val("").removeClass(u);
                if (this.getAttribute("data-type") === "password") return this.type = "password"
            }
    }, E = function () {
        var t;
        if (this.value.length === 0) {
            t = e(this), t.addClass(u).val(this.getAttribute("data-placeholder")), this.type === "password" && (this.type = "text");
            if (t.is(":focus")) return S.apply(this)
        }
    }, b = function () {
        return e(this).find("[data-placeholder]").each(function () {
            if (w(this)) return e(this).val("")
        })
    }, w = function (e) {
        return e.value === e.getAttribute("data-placeholder")
    }, e.fn.placeholder = function (t) {
        var n;
        return t == null && (t = {
                clearOnSubmit: !0
            }), n = this, n.each(function () {
                var n;
                n = e(this), this.setAttribute("data-type", this.type), this.setAttribute("data-placeholder", this.getAttribute("placeholder")), this.removeAttribute("placeholder"), E.apply(this), n.bind("focus drop click", S), n.bind("keydown", y), n.bind("keyup blur", E);
                if (t.clearOnSubmit) return e(this.form).submit(b)
            })
    }
}.call(this),
function () {
    $.fn.preserveScrollOffset = function (e) {
        var t;
        return this.length ? (t = this.offset().top - $(window).scrollTop(), e.call(this), window.scrollTo(0, this.offset().top - t)) : e.call(this)
    }
}.call(this),
function () {
    $.fn.repositionAt = function (e) {
        var t, n;
        return t = this.parent(), this.remove(), (n = t.children().get(e - 1)) ? this.insertBefore(n) : this.appendTo(t)
    }
}.call(this),
function () {
    $.fn.resetForm = function () {
        return this.removeClass("submitting").get(0).reset(), this
    }
}.call(this),
function () {
    $.fn.slideIntoView = function (e) {
        var t, n, r, i, s, o, u, a, f, l = this;
        e == null && (e = {});
        if ($(this).data("slidingIntoView")) return this;
        r = (a = e.margin) != null ? a : 15, i = this.offset().top - r, n = this.outerHeight() + r, t = i + n, u = $(window).scrollTop(), o = $(window).height(), s = u + o, (f = e.duration) == null && (e.duration = "fast"), e.onAfter = function () {
            return $(l).data("slidingIntoView", !1)
        };
        if (i <= u) return e.offset = {
            top: -r
        }, $.scrollTo(this, e), $(this).data("slidingIntoView", !0);
        if (t > s) return e.offset = {
            top: n - o
        }, $.scrollTo(this, e), $(this).data("slidingIntoView", !0)
    }
}.call(this),
function () {
    this.StorageAdapter = function () {
        function i(e, t) {
            this.store = e, this.namespace = t
        }
        var e, t, n, r;
        return n = function (e) {
            var t, n;
            return n = (new Date).getTime(), t = JSON.stringify(e), "" + n + "\n" + t
        }, t = function (e) {
            return e != null ? e.split("\n", 2) : []
        }, r = function (e) {
            var n, r, i;
            i = t(e), r = i[0], n = i[1];
            if (n) return JSON.parse(n)
        }, e = function (e) {
            var n, r, i;
            i = t(e), r = i[0], n = i[1];
            if (r) return new Date(parseInt(r, 10))
        }, i.prototype.get = function (e) {
            try {
                return r(this.store.getItem("" + this.namespace + ":" + e))
            } catch (t) {}
        }, i.prototype.set = function (e, t) {
            try {
                return this.store.setItem("" + this.namespace + ":" + e, n(t))
            } catch (r) {}
        }, i.prototype.unset = function (e) {
            try {
                return this.store.removeItem("" + this.namespace + ":" + e)
            } catch (t) {}
        }, i.prototype.has = function (e) {
            try {
                return this.store.getItem("" + this.namespace + ":" + e) != null
            } catch (t) {}
        }, i.prototype.ageOf = function (t) {
            try {
                return e(this.store.getItem("" + this.namespace + ":" + t))
            } catch (n) {}
        }, i.prototype.touch = function (e) {
            return this.set(e, this.get(e))
        }, i.prototype.keys = function () {
            var e, t, n, r, i, s;
            try {
                n = "" + this.namespace + ":", t = n.length, i = this.store, s = [];
                for (e in i) r = i[e], e.slice(0, t) === n && s.push(e.slice(t));
                return s
            } catch (o) {
                return []
            }
        }, i.prototype.clear = function () {
            var e, t, n, r, i;
            r = this.keys(), i = [];
            for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(this.unset(e));
            return i
        }, i
    }()
}.call(this),
function () {
    $(document).live("touchstart", function () {
        var e, t;
        return e = !1, t = new Date, $(this).one("touchmove", function () {
            return e = !0
        }), $(this).one("touchcancel", function () {
            return e = !0
        }), $(this).one("touchend", function () {
            if (e) return;
            if (new Date - t < 500) return $(event.target).trigger("tap")
        })
    })
}.call(this),
function () {
    var e, t, n, r, i = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    t = {
        fast: 200,
        slow: 600
    }, n = null, r = null, e = null, $(function () {
        var t;
        t = document.body.style;
        if ("WebkitTransition" in t) return n = "WebkitTransition", r = "webkitTransitionEnd", e = "webkitAnimationEnd";
        if ("MozTransition" in t) return n = "MozTransition", r = "transitionend", e = "animationend"
    }), $.fn.transition = function (e, i) {
        var s, o, u, a, f, l, c, h = this;
        return i == null && (i = {}), s = (f = i.duration) != null ? f : "fast", s in t && (s = t[s]), u = function () {
            var t;
            return h.css(e), n ? (t = !1, h.one(r, function () {
                        return t = !0, h.css(n, ""), typeof i.complete == "function" ? i.complete() : void 0
                    }), setTimeout(function () {
                        if (!t) return h.trigger(r)
                    }, s + 800)) : typeof i.complete == "function" ? i.complete() : void 0
        }, n ? (a = function () {
            var t;
            t = [];
            for (o in e) t.push(o);
            return t
        }(), e["" + n + "Property"] = a.join(", "), e["" + n + "Duration"] = "" + s + "ms", e["" + n + "TimingFunction"] = (l = i.timing) != null ? l : "ease-in-out", e["" + n + "Delay"] = (c = i.delay) != null ? c : 0, setTimeout(u, 1)) : u(), this
    }, $.fn.onTransitionEnd = function (t, s) {
        return s == null && (s = t, t = null), n ? this.one("" + r + " " + e, function (e) {
            var n;
            if (!t || (n = e.originalEvent.propertyName, i.call(t.split(" "), n) >= 0)) return s()
        }) : s(), this
    }
}.call(this),
function () {
    _.debounceConditionally = function (e, t, n) {
        var r;
        return r = _.debounce(e, t),
        function () {
            return n.apply(this, arguments) ? r.apply(this, arguments) : e.apply(this, arguments)
        }
    }
}.call(this),
function () {
    this.BucketProcessor = function () {
        function BucketProcessor(e) {
            this.operation = e
        }
        return BucketProcessor.prototype.pollLimit = 60, BucketProcessor.prototype.pollCount = 0, BucketProcessor.prototype.pollInterval = 1e3, BucketProcessor.prototype.showProgressMessageAfter = 3e3, BucketProcessor.prototype.run = function () {
            var e = this;
            return this.watchForProgress(), this.operation.save({}, {
                    error: function () {
                        return e.operationFailed()
                    },
                    success: function () {
                        return e.operationReloaded()
                    }
                })
        }, BucketProcessor.prototype.watchForProgress = function () {
            var e = this;
            return setTimeout(function () {
                if (e.operation.isStillRunning()) return e.trigger("processor:progress")
            }, this.showProgressMessageAfter)
        }, BucketProcessor.prototype.pollForOperationStatus = function () {
            var e = this;
            this.pollCount += 1;
            if (this.pollCount > this.pollLimit) {
                this.operationFailed();
                return
            }
            return this.operation.fetch({
                    error: function () {
                        return e.operationFailed()
                    },
                    success: function () {
                        return e.operationReloaded()
                    }
                })
        }, BucketProcessor.prototype.operationReloaded = function () {
            var xhr, _this = this;
            return this.operation.isStillRunning() ? setTimeout(function () {
                return _this.pollForOperationStatus()
            }, this.pollInterval) : this.operation.isSuccessful() ? (xhr = new XMLHttpRequest, xhr.open("GET", "/" + bcx.currentAccountSlug + this.operation.completionUrl(), !0), xhr.setRequestHeader("X-CSRF-Token", bcx.authenticityToken), xhr.setRequestHeader("Accept", "text/javascript"), xhr.onload = function () {
                return eval(xhr.responseText), _this.trigger("processor:finished")
            }, xhr.send(), this.trigger("processor:success")) : this.trigger("processor:failed")
        }, BucketProcessor.prototype.operationFailed = function () {
            return console.warn("failure!"), this.trigger("processor:failed")
        }, BucketProcessor.prototype.on = function (e, t) {
            return document.addEventListener(e, t)
        }, BucketProcessor.prototype.trigger = function (e) {
            var t;
            return t = document.createEvent("Events"), t.initEvent(e, !0, !1), t.defaultPrevented = !document.dispatchEvent(t), t
        }, BucketProcessor
    }()
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    this.CopyProcessor = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.startWatching = function () {
            return this.watchForProgress(), this.operationReloaded()
        }, n
    }(BucketProcessor)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    this.MoveProcessor = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n
    }(BucketProcessor)
}.call(this),
function () {
    var e, t;
    t = /\/([^\/]+)\/(\d+)[^\/]*$/, e = function (e) {
        var n, r, i, s, o;
        return o = (s = $(e).url()) != null ? s.match(t) : void 0, i = o[0], n = o[1], r = o[2], {
            collection: n,
            id: r
        }
    }, $.fn.url = function () {
        return $(this).data("url")
    }, $.fn.collection = function () {
        return e(this).collection
    }, $.fn.id = function () {
        return e(this).id
    }
}.call(this),
function () {
    window.FileIcons = {
        LIB: {
            AI: "AI",
            AIFF: "AIFF",
            ASP: "WEB",
            CFM: "WEB",
            CGI: "WEB",
            CSV: "CSV",
            DMG: "DMG",
            DELETED: "Deleted",
            DOC: "DOC",
            DOCX: "DOCX",
            EPS: "EPS",
            FLA: "FLA",
            GIF: "GIF",
            GZ: "TGZ",
            HTML: "HTML",
            HTM: "HTM",
            INDD: "INDD",
            JPG: "JPG",
            JPEG: "JPEG",
            JSP: "WEB",
            KEY: "KEY",
            LINK: "WEB",
            M4A: "M4A",
            M4V: "M4V",
            MOV: "MOV",
            MP3: "MP3",
            MPEG: "MPEG",
            MPG: "MPG",
            NUMBERS: "NUMBERS",
            ODP: "ODP",
            ODS: "ODS",
            ODT: "ODT",
            PAGES: "PAGES",
            PDF: "PDF",
            PHP: "WEB",
            PL: "WEB",
            PNG: "PNG",
            POT: "POT",
            PPT: "PPT",
            PPTX: "PPTX",
            PS: "EPS",
            PSD: "PSD",
            RAR: "RAR",
            RM: "RM",
            RTF: "RTF",
            SIT: "SIT",
            SWF: "SWF",
            TAR: "TAR",
            TGZ: "TGZ",
            TIF: "TIF",
            TIFF: "TIFF",
            TXT: "TXT",
            VSD: "VSD",
            WAV: "WAV",
            WEB: "WEB",
            WMA: "WMA",
            WMV: "WMV",
            XLS: "XLS",
            XLSX: "XLSX",
            XLSM: "XLS",
            ZIP: "ZIP"
        },
        SIZES: {
            small: "24x18",
            big: "32x32",
            jumbo: "86x100"
        },
        URLS: {
            "AIFF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AIFF_big-39d93987eb082a1194f5557f7636bb7f.png",
            "AIFF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AIFF_jumbo-6a2acea75790aedd94a6b111e023193c.png",
            "AIFF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AIFF_small-331f33eea47807f7c9ce21b1662157f3.png",
            "AI_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AI_big-99a762fbf44d6697c6d7a5869e86c2cd.png",
            "AI_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AI_jumbo-db4652265f682ed1f6528e9cbf7c29a9.png",
            "AI_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/AI_small-6cbdeacb52e94b48951715c7db45bb0d.png",
            "CSV_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/CSV_big-84390c9d9a08127104dff46d668953b6.png",
            "CSV_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/CSV_jumbo-613e30a8bf879cf836f84fb202974ce7.png",
            "CSV_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/CSV_small-0a2d34e258439729a3fd41f89cc2b803.png",
            "DMG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DMG_big-ae64f3c392f7d94f2cfd084d2afdee86.png",
            "DMG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DMG_jumbo-34b05e74fd1e0302073c5305183effd4.png",
            "DMG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DMG_small-552e80c3f120fbecd1342fd9abee601e.png",
            "DOCX_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOCX_big-e564de0e076933ad46333687ee53cd57.png",
            "DOCX_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOCX_jumbo-65b55c012f86f9f720c4966d3412af54.png",
            "DOCX_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOCX_small-2a3abfd9d6c3218e751b29f1e0b7f94c.png",
            "DOC_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOC_big-5e4938d81b16da5e9bb6529fcb874e8c.png",
            "DOC_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOC_jumbo-75d254944e2a896e39043711b870e126.png",
            "DOC_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/DOC_small-af0479d15202cf63ae8d6d696ee813e5.png",
            "Deleted_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Deleted_big-5d53c2e6c1110a974094718f6432658f.png",
            "Deleted_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Deleted_jumbo-21528f8a71a27f456b7794e5defa5333.png",
            "EPS_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/EPS_big-387fb538d167d78220667cf651587787.png",
            "EPS_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/EPS_jumbo-5945abd9e125ed012e7bdf477ac46288.png",
            "EPS_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/EPS_small-a5c71c4e0872e69bf4bddfd6f8eedd3a.png",
            "FLA_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/FLA_big-df96e673315725e179618d0fde95a372.png",
            "FLA_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/FLA_jumbo-4c0faf0c53c6945404cbe6ea23b8e28b.png",
            "FLA_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/FLA_small-97ffe7639c8278eab9e8635c2b369f49.png",
            "GIF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/GIF_big-3d75c6f34ccc8a69292102f04cd7fc97.png",
            "GIF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/GIF_jumbo-31e7b9776eef2bb5389cbeeef52f0268.png",
            "GIF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/GIF_small-316acd8f9343891233b59e967bcd47f2.png",
            "Generic_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Generic_big-d6375b362757d90dc6e610f909af738e.png",
            "Generic_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Generic_jumbo-05577238f610e46a134a7a66baa80157.png",
            "Generic_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/Generic_small-982c0597e129c6eff395170656746904.png",
            "HTML_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTML_big-eb1ae8916582a1c6c9b6e2b65a4a20d7.png",
            "HTML_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTML_jumbo-c51b66c54da06aa79a9c96a8c71c4461.png",
            "HTML_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTML_small-c787890460ae5b5a40974b98721ce083.png",
            "HTM_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTM_big-8ffaf8c5d2955ac480a808ef388fb082.png",
            "HTM_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTM_jumbo-117dd929a93e4cf60fcceae16cfc5359.png",
            "HTM_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/HTM_small-761625427c232874bc31522df45b0d8b.png",
            "INDD_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/INDD_big-d125c3c55dc7b7161d2ab8869d6e1fe8.png",
            "INDD_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/INDD_jumbo-52150e144c65e184a95f43cc87784f08.png",
            "INDD_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/INDD_small-c09ee28f59fd049a5d3d41806fbb1a23.png",
            "JPEG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPEG_big-c7aa586c6034a453b101b70066bf34e6.png",
            "JPEG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPEG_jumbo-299bc52c723f298423b3b8c5380ee736.png",
            "JPEG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPEG_small-78c043e20b1ba602a4a25d176dead2a1.png",
            "JPG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPG_big-e29d5155eec46c2125373a788073941f.png",
            "JPG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPG_jumbo-f7aafdfa253192213c5c0f4b845a413e.png",
            "JPG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/JPG_small-60b7ee7dbae462fc1a64ba3057028918.png",
            "KEY_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/KEY_big-69aa1741d1d25eb55cd960ae3e150548.png",
            "KEY_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/KEY_jumbo-d5b6da5609db0e68b175970e5a7b6206.png",
            "KEY_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/KEY_small-b66f076255256bef0e3ebfbc132b02d8.png",
            "LINK_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/LINK_big-85b3f6749dfb38a25481883660a6a029.png",
            "LINK_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/LINK_jumbo-9a6aa3df96a82f93c3d346ebd84a3049.png",
            "LINK_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/LINK_small-f73296bc4cc2d71e9b0bc1e406d7bc96.png",
            "M4A_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4A_big-4517a3b80789604d447ee8c90a36d6b1.png",
            "M4A_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4A_jumbo-1875e5fd0081975f64197d5578360156.png",
            "M4A_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4A_small-4ca7e168cfc4bfbedd205798a49bb788.png",
            "M4V_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4V_big-edbdc44a6074707d0bfd93ee8136d307.png",
            "M4V_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4V_jumbo-262fc5603554ed2421be281039d87443.png",
            "M4V_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/M4V_small-a573b3c3c521a2a24de10b5581b9281f.png",
            "MOV_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MOV_big-ee0a43312871d4d1a5b95acd89760705.png",
            "MOV_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MOV_jumbo-02ae1df3bd27db9af79732f5bb17edaf.png",
            "MOV_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MOV_small-c4d695ef01da76f24589cfa04664e977.png",
            "MP3_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MP3_big-684c96e0b56d9c16dfaae1686789ffd2.png",
            "MP3_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MP3_jumbo-4f7bac3b1197246d3fd559101c9792fc.png",
            "MP3_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MP3_small-8e6f3834dd1b555b78815df08d808c0d.png",
            "MPEG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPEG_big-51c60210b4e0dd20be0cbf2d01ed5838.png",
            "MPEG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPEG_jumbo-5c431eebd927fccd5288e53d0bc68302.png",
            "MPEG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPEG_small-8be7373b1242666a87f57bc1b4d5681e.png",
            "MPG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPG_big-7116dfb0d32dd2c886f9ce8e0d01fc1f.png",
            "MPG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPG_jumbo-2696aac6f01b83aea7c52d0c95d9d3d5.png",
            "MPG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/MPG_small-c582750ff6c448f6ae046ed77c303b60.png",
            "NUMBERS_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/NUMBERS_big-9a5880c08f45c79ae3ca4eeca91e0014.png",
            "NUMBERS_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/NUMBERS_jumbo-0eb8e7117e21a2b87bbd478171073a82.png",
            "NUMBERS_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/NUMBERS_small-24370bf2d393a83dd1456f4bc8eb4fca.png",
            "ODP_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODP_big-a7c66e8640fddeb51fa79d87d7331897.png",
            "ODP_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODP_jumbo-ecd8f84ac3b16b59e531883358468bd2.png",
            "ODP_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODP_small-82bc5abc39eace6eb51bfe14bad0fde7.png",
            "ODS_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODS_big-d8fdccb255de43f03f74f5511d2434d2.png",
            "ODS_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODS_jumbo-eb70e8217a10a688c800a6482cd8c4e0.png",
            "ODS_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODS_small-1852028d6a81456838771dd1642089c8.png",
            "ODT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODT_big-b592044b6337537f885e0f2ced8e3cf4.png",
            "ODT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODT_jumbo-865a6ef482ce42906cadceb35f9a8d94.png",
            "ODT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ODT_small-f4efac1a61cbbef54a84bb2b4f766039.png",
            "PAGES_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PAGES_big-42b044a1235748c214568e547a2e8f9a.png",
            "PAGES_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PAGES_jumbo-580565a2a30212644af382fe06ea6d18.png",
            "PAGES_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PAGES_small-715144a8a7d49552357f581355ceab6e.png",
            "PDF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PDF_big-dd7d01dd5ddae4443b645e0ea62df4bb.png",
            "PDF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PDF_jumbo-6daeff8a984a84eb66605a3e9e18a0c1.png",
            "PDF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PDF_small-874242210d3a0112d96607ef046cf7ff.png",
            "PNG_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PNG_big-4bf5692ecf39888c3ddc4d5230c841cf.png",
            "PNG_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PNG_jumbo-59de75c1c959c212181a5f0e98622a4f.png",
            "PNG_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PNG_small-5ccde720bafbd4018efc356648dcab71.png",
            "POT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/POT_big-9839b7f90a9afc213c013e6b8f7d6e2c.png",
            "POT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/POT_jumbo-8aef4a96855c760d2fd2bbc073eeb0f7.png",
            "POT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/POT_small-bdecd69aba04e41f57f528a17ec3479d.png",
            "PPTX_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPTX_big-33fe5fa2c69d2ce3cfcf374ae9a67fb8.png",
            "PPTX_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPTX_jumbo-89e59d39de67ec9619071f450c611b33.png",
            "PPTX_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPTX_small-1c2b5a3c8f3e8885292d1791a300d2c6.png",
            "PPT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPT_big-fce105362d22a715b303c5168784c357.png",
            "PPT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPT_jumbo-b34b9ab5d15791ffb4e4667b38695603.png",
            "PPT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PPT_small-2c483f46e9fdcb673f513345e4d635ac.png",
            "PSD_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PSD_big-50e283ebb8f3799576b9bf1cdfff4366.png",
            "PSD_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PSD_jumbo-ccfed6b99eb5d809d3e00b582115f767.png",
            "PSD_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/PSD_small-148c68232f6006aad3a392aef92d5769.png",
            "RAR_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RAR_big-4dae42b3e00f2d0c019c236a387ee3ea.png",
            "RAR_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RAR_jumbo-011a01dd246b69799bec8775f44cd67b.png",
            "RAR_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RAR_small-03389c05f6817589c4f38096749cfccf.png",
            "RM_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RM_big-816dae2acf18a9f4cf97d82d73b44275.png",
            "RM_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RM_jumbo-be8143a6783ba068a69e08f1db6ca8f4.png",
            "RM_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RM_small-792f39e1c6d418b2dd3b9c51fe6c48dd.png",
            "RTF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RTF_big-46ccb2ee04c21a2e3239b101e732a39d.png",
            "RTF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RTF_jumbo-46aedfcf00203c8a070e539201406c4b.png",
            "RTF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/RTF_small-7fe14a3a4e43e070883c3ff42ffa1ae9.png",
            "SIT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SIT_big-e37ce99248eee5d55c4e34a3118234e1.png",
            "SIT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SIT_jumbo-a7b6d7b87f0a3db415a868f0750aa417.png",
            "SIT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SIT_small-02f10e402b4fdf4ffd08c52d75566c4a.png",
            "SWF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SWF_big-73a02c0ed02e540f33bb7a771c3d9404.png",
            "SWF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SWF_jumbo-7bb8bbb8ca69c52b31864eda6acacb84.png",
            "SWF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/SWF_small-9840126e9a0b6106e54842a598016dfc.png",
            "TAR_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TAR_big-3bc4aa445c0a59b78ab82a5787921047.png",
            "TAR_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TAR_jumbo-59825fc6a1d89d82ce400f47ba05b18e.png",
            "TAR_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TAR_small-83975ae8c708ab328ad40a59b2a0facb.png",
            "TGZ_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TGZ_big-27ad0c00b12160c126fa6453fbbdaf96.png",
            "TGZ_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TGZ_jumbo-74823bd072606bc8f0c6bd49e34ab129.png",
            "TGZ_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TGZ_small-d7483fc103e9f65c1dfd85abad0cc713.png",
            "TIFF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIFF_big-9d24df5fb07ec94808410e2af05bd5b3.png",
            "TIFF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIFF_jumbo-85311fdab5b35be6f4e61aab1186b4a3.png",
            "TIFF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIFF_small-acce77679af4dc3de87327e09d29d136.png",
            "TIF_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIF_big-001c007e98397c8588cdbcc4e12c8cee.png",
            "TIF_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIF_jumbo-7cb9278501b253e0e2aa00f34a722a12.png",
            "TIF_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TIF_small-0dedb3baa3a95b514bde425f451ab16d.png",
            "TXT_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TXT_big-847688a06dcd003a5760a5344eff248c.png",
            "TXT_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TXT_jumbo-62cf3dabfb063f9e696fdcac564ed721.png",
            "TXT_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/TXT_small-9cdd6fa61fd59678ac19a9bb40c9adb4.png",
            "VSD_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/VSD_big-92a2f292c4e2b997e12c82f2a15ab014.png",
            "VSD_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/VSD_jumbo-29bfac092e6804b5baf273cec008534b.png",
            "VSD_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/VSD_small-3663c97b8f470658b045e6714079178f.png",
            "WAV_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WAV_big-853c70ac994ad9c62ba22960337632e7.png",
            "WAV_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WAV_jumbo-dc0725baba5fad1ed9481cfaa52cd23f.png",
            "WAV_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WAV_small-8ae17305b1737584f70b8ada74231fd0.png",
            "WEB_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WEB_big-85b3f6749dfb38a25481883660a6a029.png",
            "WEB_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WEB_jumbo-b0f8821e1642e59b30582c0c356c5715.png",
            "WEB_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WEB_small-f73296bc4cc2d71e9b0bc1e406d7bc96.png",
            "WMA_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMA_big-209ebaa39636434686d17e39f941fec5.png",
            "WMA_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMA_jumbo-7e695bebb52939ad4aff8c32ab8e1ec0.png",
            "WMA_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMA_small-3224c64b6d0eb8c0e582f0126006ecf2.png",
            "WMV_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMV_big-672e0740db3be24c6fb4391953789682.png",
            "WMV_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMV_jumbo-c6367d6c6a1e5a9c33f41f171a1e339c.png",
            "WMV_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/WMV_small-a19d1e04472bff5bdc7d99b558610c40.png",
            "XLSX_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLSX_big-303845249e3037a13be6586d3736280c.png",
            "XLSX_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLSX_jumbo-c17a89061d43d2991695da204da74676.png",
            "XLSX_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLSX_small-d0b802c365a91549256201a2257ecf7c.png",
            "XLS_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLS_big-563a42a0b9efe43daa944ac6ea847b58.png",
            "XLS_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLS_jumbo-41803872347887d64947c66e130e243b.png",
            "XLS_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/XLS_small-cc6980bcdd56c5d5953e7c1c7139c614.png",
            "ZIP_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ZIP_big-973bd650129933d06a5e1c0542c88c29.png",
            "ZIP_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ZIP_jumbo-608a414944353d4576e45083cd212ce3.png",
            "ZIP_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/ZIP_small-4f0cfdea055d6f49ebcebb5be3d4ffab.png",
            "google_document_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_document_big-a68d51e2bbb3f04e97a03cd35c61b61b.png",
            "google_document_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_document_jumbo-cd7745c22dfa39f04bcd116d10b1219b.png",
            "google_document_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_document_small-3b73739b9f838b959616815909691866.png",
            "google_drawing_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_drawing_big-505f2128eab74abeef717da2da7ca544.png",
            "google_drawing_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_drawing_jumbo-d2cbd8f1656c74a4a4cb3fbe85409ccc.png",
            "google_drawing_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_drawing_small-d390149ae904883b72cb12ac3fde4e03.png",
            "google_form_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_form_big-3d02dab99c96297a77fb4a0de867eea9.png",
            "google_form_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_form_jumbo-6e6ec777d1733e8e661dee8fea966afc.png",
            "google_form_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_form_small-a5fbd8bc3685e5cbcf21d4b0462d815f.png",
            "google_presentation_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_presentation_big-9054efeede703d9dbc8d2110b59f35bb.png",
            "google_presentation_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_presentation_jumbo-a0d755cf1e4c85d69b5beba309c61002.png",
            "google_presentation_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_presentation_small-cad952e6c5aa213c3e88136f721148c2.png",
            "google_spreadsheet_big.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_spreadsheet_big-b33c5fc148dd56b661c94392d6b82deb.png",
            "google_spreadsheet_jumbo.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_spreadsheet_jumbo-d69a4aaf57e8c08ee0c776e4377ab2eb.png",
            "google_spreadsheet_small.png": "https://d3dma7a8zw52bz.cloudfront.net/assets/file_icons/google_spreadsheet_small-a5fbd8bc3685e5cbcf21d4b0462d815f.png"
        },
        path: function (e, t) {
            return t == null && (t = "small"), FileIcons.asset(FileIcons.find(e), t)
        },
        asset: function (e, t) {
            var n, r;
            return t == null && (t = "small"), n = "" + (e != null ? e : "Generic") + "_" + t + ".png", (r = FileIcons.URLS[n]) != null ? r : FileIcons.asset("Generic", t)
        },
        find: function (e) {
            return FileIcons.LIB[e != null ? e.toUpperCase() : void 0]
        }
    }
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        };
    e = function () {
        function e(e, n) {
            var r, i;
            this.options = n != null ? n : {}, this.stop = t(this.stop, this), this.watchDistanceFromBottom = t(this.watchDistanceFromBottom, this), this.loadNextPage = t(this.loadNextPage, this), this.loadNextPageIfNearBottom = t(this.loadNextPageIfNearBottom, this), this.$container = $(e).addClass("infinite_page"), (i = (r = this.options).triggerDistance) == null && (r.triggerDistance = 350), this.setPage(this.$container.attr("data-infinite-page")), this.ajax = null, this.done = !1, this.options.immediate != null ? this.loadAll() : (this.loadNextPageIfNearBottom(), this.watchDistanceFromBottom())
        }
        return e.install = function (e, t) {
            if (!$(e).data("infinitePageInstalled")) return new this(e, t), $(e).data("infinitePageInstalled", !0)
        }, e.prototype.loadAll = function () {
            var e, t = this;
            return this.loadNextPage(e = function () {
                if (!t.done) return t.loadNextPage(e)
            })
        }, e.prototype.distanceFromBottom = function () {
            return $(document).height() - $(window).height() - $(window).scrollTop()
        }, e.prototype.loadNextPageIfNearBottom = function () {
            if (this.distanceFromBottom() < this.options.triggerDistance) return this.$container.is(":visible") ? this.loadNextPage() : this.stop()
        }, e.prototype.setPage = function (e) {
            return e == null && (e = 2), this.page = parseInt(e), this.$container.attr("data-infinite-page", this.page)
        }, e.prototype.loadNextPage = function (e) {
            var t = this;
            if (this.ajax && this.ajax.readyState < 4 && this.ajax.readyState > 0) return;
            return this.$container.addClass("busy").trigger("infinite_page:start"), this.ajax = $.ajax({
                    type: "GET",
                    dataType: "html",
                    url: "" + window.location.pathname + ".js" + window.location.search,
                    data: {
                        page: this.page
                    },
                    success: function (n) {
                        return t.$container.removeClass("busy"), $.trim(n) || t.stop(), t.$container.append(n).trigger("infinite_page:load"), t.setPage(t.page + 1), typeof e == "function" ? e() : void 0
                    },
                    error: function () {
                        return t.stop()
                    }
                })
        }, e.prototype.watchDistanceFromBottom = function () {
            var e = this;
            return this.throttledLoadNextPageIfNearBottom = _.throttle(function () {
                return e.loadNextPageIfNearBottom()
            }, 100), $(window).bind("scroll", this.throttledLoadNextPageIfNearBottom)
        }, e.prototype.stop = function () {
            this.done = !0, this.$container.removeClass("infinite_page busy").trigger("infinite_page:stop");
            if (this.throttledLoadNextPageIfNearBottom != null) return $(window).unbind("scroll", this.throttledLoadNextPageIfNearBottom)
        }, e
    }(), $.fn.infinitePage = function (t) {
        return this.each(function () {
            return e.install(this, t)
        })
    }
}.call(this);
var wysihtml5 = {
    version: "0.4.0pre",
    commands: {},
    dom: {},
    quirks: {},
    toolbar: {},
    lang: {},
    selection: {},
    views: {},
    INVISIBLE_SPACE: "",
    EMPTY_FUNCTION: function () {},
    ELEMENT_NODE: 1,
    TEXT_NODE: 3,
    BACKSPACE_KEY: 8,
    ENTER_KEY: 13,
    ESCAPE_KEY: 27,
    SPACE_KEY: 32,
    DELETE_KEY: 46
};
window.rangy = function () {
    function u(n, r) {
        var i = typeof n[r];
        return i == t || i == e && !! n[r] || i == "unknown"
    }

    function a(t, n) {
        return typeof t[n] == e && !! t[n]
    }

    function f(e, t) {
        return typeof e[t] != n
    }

    function l(e) {
        return function (t, n) {
            var r = n.length;
            while (r--)
                if (!e(t, n[r])) return !1;
            return !0
        }
    }

    function d(e) {
        return e && c(e, o) && p(e, s)
    }

    function m(e) {
        window.alert("Rangy not supported in your browser. Reason: " + e), v.initialized = !0, v.supported = !1
    }

    function g(e) {
        var t = "Rangy warning: " + e;
        v.config.alertOnWarn ? window.alert(t) : typeof window.console != n && typeof window.console.log != n && window.console.log(t)
    }

    function w() {
        if (v.initialized) return;
        var e, t = !1,
            n = !1;
        u(document, "createRange") && (e = document.createRange(), c(e, i) && p(e, r) && (t = !0), e.detach());
        var s = a(document, "body") ? document.body : document.getElementsByTagName("body")[0];
        s && u(s, "createTextRange") && (e = s.createTextRange(), d(e) && (n = !0)), !t && !n && m("Neither Range nor TextRange are implemented"), v.initialized = !0, v.features = {
            implementsDomRange: t,
            implementsTextRange: n
        };
        var o = b.concat(y);
        for (var f = 0, l = o.length; f < l; ++f) try {
            o[f](v)
        } catch (h) {
            a(window, "console") && u(window.console, "log") && window.console.log("Init listener threw an exception. Continuing.", h)
        }
    }

    function S(e) {
        e = e || window, w();
        for (var t = 0, n = E.length; t < n; ++t) E[t](e)
    }

    function x(e) {
        this.name = e, this.initialized = !1, this.supported = !1
    }
    var e = "object",
        t = "function",
        n = "undefined",
        r = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed", "commonAncestorContainer", "START_TO_START", "START_TO_END", "END_TO_START", "END_TO_END"],
        i = ["setStart", "setStartBefore", "setStartAfter", "setEnd", "setEndBefore", "setEndAfter", "collapse", "selectNode", "selectNodeContents", "compareBoundaryPoints", "deleteContents", "extractContents", "cloneContents", "insertNode", "surroundContents", "cloneRange", "toString", "detach"],
        s = ["boundingHeight", "boundingLeft", "boundingTop", "boundingWidth", "htmlText", "text"],
        o = ["collapse", "compareEndPoints", "duplicate", "getBookmark", "moveToBookmark", "moveToElementText", "parentElement", "pasteHTML", "select", "setEndPoint", "getBoundingClientRect"],
        c = l(u),
        h = l(a),
        p = l(f),
        v = {
            version: "1.2.2",
            initialized: !1,
            supported: !0,
            util: {
                isHostMethod: u,
                isHostObject: a,
                isHostProperty: f,
                areHostMethods: c,
                areHostObjects: h,
                areHostProperties: p,
                isTextRange: d
            },
            features: {},
            modules: {},
            config: {
                alertOnWarn: !1,
                preferTextRange: !1
            }
        };
    v.fail = m, v.warn = g, {}.hasOwnProperty ? v.util.extend = function (e, t) {
        for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
    } : m("hasOwnProperty not supported");
    var y = [],
        b = [];
    v.init = w, v.addInitListener = function (e) {
        v.initialized ? e(v) : y.push(e)
    };
    var E = [];
    v.addCreateMissingNativeApiListener = function (e) {
        E.push(e)
    }, v.createMissingNativeApi = S, x.prototype.fail = function (e) {
        throw this.initialized = !0, this.supported = !1, new Error("Module '" + this.name + "' failed to load: " + e)
    }, x.prototype.warn = function (e) {
        v.warn("Module " + this.name + ": " + e)
    }, x.prototype.createError = function (e) {
        return new Error("Error in Rangy " + this.name + " module: " + e)
    }, v.createModule = function (e, t) {
        var n = new x(e);
        v.modules[e] = n, b.push(function (e) {
            t(e, n), n.initialized = !0, n.supported = !0
        })
    }, v.requireModules = function (e) {
        for (var t = 0, n = e.length, r, i; t < n; ++t) {
            i = e[t], r = v.modules[i];
            if (!r || !(r instanceof x)) throw new Error("Module '" + i + "' not found");
            if (!r.supported) throw new Error("Module '" + i + "' not supported")
        }
    };
    var T = !1,
        N = function (e) {
            T || (T = !0, v.initialized || w())
        };
    if (typeof window == n) {
        m("No window found");
        return
    }
    if (typeof document == n) {
        m("No document found");
        return
    }
    return u(document, "addEventListener") && document.addEventListener("DOMContentLoaded", N, !1), u(window, "addEventListener") ? window.addEventListener("load", N, !1) : u(window, "attachEvent") ? window.attachEvent("onload", N) : m("Window does not have required addEventListener or attachEvent method"), v
}(), rangy.createModule("DomUtil", function (e, t) {
    function u(e) {
        var t;
        return typeof e.namespaceURI == n || (t = e.namespaceURI) === null || t == "http://www.w3.org/1999/xhtml"
    }

    function a(e) {
        var t = e.parentNode;
        return t.nodeType == 1 ? t : null
    }

    function f(e) {
        var t = 0;
        while (e = e.previousSibling) t++;
        return t
    }

    function l(e) {
        var t;
        return d(e) ? e.length : (t = e.childNodes) ? t.length : 0
    }

    function c(e, t) {
        var n = [],
            r;
        for (r = e; r; r = r.parentNode) n.push(r);
        for (r = t; r; r = r.parentNode)
            if (o(n, r)) return r;
        return null
    }

    function h(e, t, n) {
        var r = n ? t : t.parentNode;
        while (r) {
            if (r === e) return !0;
            r = r.parentNode
        }
        return !1
    }

    function p(e, t, n) {
        var r, i = n ? e : e.parentNode;
        while (i) {
            r = i.parentNode;
            if (r === t) return i;
            i = r
        }
        return null
    }

    function d(e) {
        var t = e.nodeType;
        return t == 3 || t == 4 || t == 8
    }

    function v(e, t) {
        var n = t.nextSibling,
            r = t.parentNode;
        return n ? r.insertBefore(e, n) : r.appendChild(e), e
    }

    function m(e, t) {
        var n = e.cloneNode(!1);
        return n.deleteData(0, t), e.deleteData(t, e.length - t), v(n, e), n
    }

    function g(e) {
        if (e.nodeType == 9) return e;
        if (typeof e.ownerDocument != n) return e.ownerDocument;
        if (typeof e.document != n) return e.document;
        if (e.parentNode) return g(e.parentNode);
        throw new Error("getDocument: no document found for node")
    }

    function y(e) {
        var t = g(e);
        if (typeof t.defaultView != n) return t.defaultView;
        if (typeof t.parentWindow != n) return t.parentWindow;
        throw new Error("Cannot get a window object for node")
    }

    function b(e) {
        if (typeof e.contentDocument != n) return e.contentDocument;
        if (typeof e.contentWindow != n) return e.contentWindow.document;
        throw new Error("getIframeWindow: No Document object found for iframe element")
    }

    function w(e) {
        if (typeof e.contentWindow != n) return e.contentWindow;
        if (typeof e.contentDocument != n) return e.contentDocument.defaultView;
        throw new Error("getIframeWindow: No Window object found for iframe element")
    }

    function E(e) {
        return r.isHostObject(e, "body") ? e.body : e.getElementsByTagName("body")[0]
    }

    function S(e) {
        var t;
        while (t = e.parentNode) e = t;
        return e
    }

    function x(e, t, n, r) {
        var i, s, o, u, a;
        if (e == n) return t === r ? 0 : t < r ? -1 : 1;
        if (i = p(n, e, !0)) return t <= f(i) ? -1 : 1;
        if (i = p(e, n, !0)) return f(i) < r ? -1 : 1;
        s = c(e, n), o = e === s ? s : p(e, s, !0), u = n === s ? s : p(n, s, !0);
        if (o === u) throw new Error("comparePoints got to case 4 and childA and childB are the same!");
        a = s.firstChild;
        while (a) {
            if (a === o) return -1;
            if (a === u) return 1;
            a = a.nextSibling
        }
        throw new Error("Should not be here!")
    }

    function T(e) {
        var t = g(e).createDocumentFragment(),
            n;
        while (n = e.firstChild) t.appendChild(n);
        return t
    }

    function N(e) {
        if (!e) return "[No node]";
        if (d(e)) return '"' + e.data + '"';
        if (e.nodeType == 1) {
            var t = e.id ? ' id="' + e.id + '"' : "";
            return "<" + e.nodeName + t + ">[" + e.childNodes.length + "]"
        }
        return e.nodeName
    }

    function C(e) {
        this.root = e, this._next = e
    }

    function k(e) {
        return new C(e)
    }

    function L(e, t) {
        this.node = e, this.offset = t
    }

    function A(e) {
        this.code = this[e], this.codeName = e, this.message = "DOMException: " + this.codeName
    }
    var n = "undefined",
        r = e.util;
    r.areHostMethods(document, ["createDocumentFragment", "createElement", "createTextNode"]) || t.fail("document missing a Node creation method"), r.isHostMethod(document, "getElementsByTagName") || t.fail("document missing getElementsByTagName method");
    var i = document.createElement("div");
    r.areHostMethods(i, ["insertBefore", "appendChild", "cloneNode"] || !r.areHostObjects(i, ["previousSibling", "nextSibling", "childNodes", "parentNode"])) || t.fail("Incomplete Element implementation"), r.isHostProperty(i, "innerHTML") || t.fail("Element is missing innerHTML property");
    var s = document.createTextNode("test");
    r.areHostMethods(s, ["splitText", "deleteData", "insertData", "appendData", "cloneNode"] || !r.areHostObjects(i, ["previousSibling", "nextSibling", "childNodes", "parentNode"]) || !r.areHostProperties(s, ["data"])) || t.fail("Incomplete Text Node implementation");
    var o = function (e, t) {
        var n = e.length;
        while (n--)
            if (e[n] === t) return !0;
        return !1
    };
    C.prototype = {
        _current: null,
        hasNext: function () {
            return !!this._next
        },
        next: function () {
            var e = this._current = this._next,
                t, n;
            if (this._current) {
                t = e.firstChild;
                if (t) this._next = t;
                else {
                    n = null;
                    while (e !== this.root && !(n = e.nextSibling)) e = e.parentNode;
                    this._next = n
                }
            }
            return this._current
        },
        detach: function () {
            this._current = this._next = this.root = null
        }
    }, L.prototype = {
        equals: function (e) {
            return this.node === e.node & this.offset == e.offset
        },
        inspect: function () {
            return "[DomPosition(" + N(this.node) + ":" + this.offset + ")]"
        }
    }, A.prototype = {
        INDEX_SIZE_ERR: 1,
        HIERARCHY_REQUEST_ERR: 3,
        WRONG_DOCUMENT_ERR: 4,
        NO_MODIFICATION_ALLOWED_ERR: 7,
        NOT_FOUND_ERR: 8,
        NOT_SUPPORTED_ERR: 9,
        INVALID_STATE_ERR: 11
    }, A.prototype.toString = function () {
        return this.message
    }, e.dom = {
        arrayContains: o,
        isHtmlNamespace: u,
        parentElement: a,
        getNodeIndex: f,
        getNodeLength: l,
        getCommonAncestor: c,
        isAncestorOf: h,
        getClosestAncestorIn: p,
        isCharacterDataNode: d,
        insertAfter: v,
        splitDataNode: m,
        getDocument: g,
        getWindow: y,
        getIframeWindow: w,
        getIframeDocument: b,
        getBody: E,
        getRootContainer: S,
        comparePoints: x,
        inspectNode: N,
        fragmentFromNodeChildren: T,
        createIterator: k,
        DomPosition: L
    }, e.DOMException = A
}), rangy.createModule("DomRange", function (e, t) {
    function s(e, t) {
        return e.nodeType != 3 && (n.isAncestorOf(e, t.startContainer, !0) || n.isAncestorOf(e, t.endContainer, !0))
    }

    function o(e) {
        return n.getDocument(e.startContainer)
    }

    function u(e, t, n) {
        var r = e._listeners[t];
        if (r)
            for (var i = 0, s = r.length; i < s; ++i) r[i].call(e, {
                    target: e,
                    args: n
                })
    }

    function a(e) {
        return new r(e.parentNode, n.getNodeIndex(e))
    }

    function f(e) {
        return new r(e.parentNode, n.getNodeIndex(e) + 1)
    }

    function l(e, t, r) {
        var i = e.nodeType == 11 ? e.firstChild : e;
        return n.isCharacterDataNode(t) ? r == t.length ? n.insertAfter(e, t) : t.parentNode.insertBefore(e, r == 0 ? t : n.splitDataNode(t, r)) : r >= t.childNodes.length ? t.appendChild(e) : t.insertBefore(e, t.childNodes[r]), i
    }

    function c(e) {
        var t;
        for (var n, r = o(e.range).createDocumentFragment(), s; n = e.next();) {
            t = e.isPartiallySelectedSubtree(), n = n.cloneNode(!t), t && (s = e.getSubtreeIterator(), n.appendChild(c(s)), s.detach(!0));
            if (n.nodeType == 10) throw new i("HIERARCHY_REQUEST_ERR");
            r.appendChild(n)
        }
        return r
    }

    function h(e, t, r) {
        var i, s;
        r = r || {
            stop: !1
        };
        for (var o, u; o = e.next();)
            if (e.isPartiallySelectedSubtree()) {
                if (t(o) === !1) {
                    r.stop = !0;
                    return
                }
                u = e.getSubtreeIterator(), h(u, t, r), u.detach(!0);
                if (r.stop) return
            } else {
                i = n.createIterator(o);
                while (s = i.next())
                    if (t(s) === !1) {
                        r.stop = !0;
                        return
                    }
            }
    }

    function p(e) {
        var t;
        while (e.next()) e.isPartiallySelectedSubtree() ? (t = e.getSubtreeIterator(), p(t), t.detach(!0)) : e.remove()
    }

    function d(e) {
        for (var t, n = o(e.range).createDocumentFragment(), r; t = e.next();) {
            e.isPartiallySelectedSubtree() ? (t = t.cloneNode(!1), r = e.getSubtreeIterator(), t.appendChild(d(r)), r.detach(!0)) : e.remove();
            if (t.nodeType == 10) throw new i("HIERARCHY_REQUEST_ERR");
            n.appendChild(t)
        }
        return n
    }

    function v(e, t, n) {
        var r = !! t && !! t.length,
            i, s = !! n;
        r && (i = new RegExp("^(" + t.join("|") + ")$"));
        var o = [];
        return h(new g(e, !1), function (e) {
            (!r || i.test(e.nodeType)) && (!s || n(e)) && o.push(e)
        }), o
    }

    function m(e) {
        var t = typeof e.getName == "undefined" ? "Range" : e.getName();
        return "[" + t + "(" + n.inspectNode(e.startContainer) + ":" + e.startOffset + ", " + n.inspectNode(e.endContainer) + ":" + e.endOffset + ")]"
    }

    function g(e, t) {
        this.range = e, this.clonePartiallySelectedTextNodes = t;
        if (!e.collapsed) {
            this.sc = e.startContainer, this.so = e.startOffset, this.ec = e.endContainer, this.eo = e.endOffset;
            var r = e.commonAncestorContainer;
            this.sc === this.ec && n.isCharacterDataNode(this.sc) ? (this.isSingleCharacterDataNode = !0, this._first = this._last =
                this._next = this.sc) : (this._first = this._next = this.sc === r && !n.isCharacterDataNode(this.sc) ? this.sc.childNodes[this.so] : n.getClosestAncestorIn(this.sc, r, !0), this._last = this.ec === r && !n.isCharacterDataNode(this.ec) ? this.ec.childNodes[this.eo - 1] : n.getClosestAncestorIn(this.ec, r, !0))
        }
    }

    function y(e) {
        this.code = this[e], this.codeName = e, this.message = "RangeException: " + this.codeName
    }

    function b(e, t, n) {
        this.nodes = v(e, t, n), this._next = this.nodes[0], this._position = 0
    }

    function N(e) {
        return function (t, r) {
            var i, s = r ? t : t.parentNode;
            while (s) {
                i = s.nodeType;
                if (n.arrayContains(e, i)) return s;
                s = s.parentNode
            }
            return null
        }
    }

    function O(e, t) {
        if (A(e, t)) throw new y("INVALID_NODE_TYPE_ERR")
    }

    function M(e) {
        if (!e.startContainer) throw new i("INVALID_STATE_ERR")
    }

    function _(e, t) {
        if (!n.arrayContains(t, e.nodeType)) throw new y("INVALID_NODE_TYPE_ERR")
    }

    function D(e, t) {
        if (t < 0 || t > (n.isCharacterDataNode(e) ? e.length : e.childNodes.length)) throw new i("INDEX_SIZE_ERR")
    }

    function P(e, t) {
        if (k(e, !0) !== k(t, !0)) throw new i("WRONG_DOCUMENT_ERR")
    }

    function H(e) {
        if (L(e, !0)) throw new i("NO_MODIFICATION_ALLOWED_ERR")
    }

    function B(e, t) {
        if (!e) throw new i(t)
    }

    function j(e) {
        return !n.arrayContains(E, e.nodeType) && !k(e, !0)
    }

    function F(e, t) {
        return t <= (n.isCharacterDataNode(e) ? e.length : e.childNodes.length)
    }

    function I(e) {
        M(e);
        if (j(e.startContainer) || j(e.endContainer) || !F(e.startContainer, e.startOffset) || !F(e.endContainer, e.endOffset)) throw new Error("Range error: Range is no longer valid after DOM mutation (" + e.inspect() + ")")
    }

    function Z() {}

    function et(e) {
        e.START_TO_START = X, e.START_TO_END = V, e.END_TO_END = $, e.END_TO_START = J, e.NODE_BEFORE = K, e.NODE_AFTER = Q, e.NODE_BEFORE_AND_AFTER = G, e.NODE_INSIDE = Y
    }

    function tt(e) {
        et(e), et(e.prototype)
    }

    function nt(e, t) {
        return function () {
            I(this);
            var r = this.startContainer,
                i = this.startOffset,
                s = this.commonAncestorContainer,
                o = new g(this, !0),
                u, a;
            r !== s && (u = n.getClosestAncestorIn(r, s, !0), a = f(u), r = a.node, i = a.offset), h(o, H), o.reset();
            var l = e(o);
            return o.detach(), t(this, r, i, r, i), l
        }
    }

    function rt(t, r, i) {
        function o(e, t) {
            return function (n) {
                M(this), _(n, w), _(C(n), E);
                var r = (e ? a : f)(n);
                (t ? u : l)(this, r.node, r.offset)
            }
        }

        function u(e, t, i) {
            var s = e.endContainer,
                o = e.endOffset;
            if (t !== e.startContainer || i !== e.startOffset) {
                if (C(t) != C(s) || n.comparePoints(t, i, s, o) == 1) s = t, o = i;
                r(e, t, i, s, o)
            }
        }

        function l(e, t, i) {
            var s = e.startContainer,
                o = e.startOffset;
            if (t !== e.endContainer || i !== e.endOffset) {
                if (C(t) != C(s) || n.comparePoints(t, i, s, o) == -1) s = t, o = i;
                r(e, s, o, t, i)
            }
        }

        function c(e, t, n) {
            (t !== e.startContainer || n !== e.startOffset || t !== e.endContainer || n !== e.endOffset) && r(e, t, n, t, n)
        }
        t.prototype = new Z, e.util.extend(t.prototype, {
                setStart: function (e, t) {
                    M(this), O(e, !0), D(e, t), u(this, e, t)
                },
                setEnd: function (e, t) {
                    M(this), O(e, !0), D(e, t), l(this, e, t)
                },
                setStartBefore: o(!0, !0),
                setStartAfter: o(!1, !0),
                setEndBefore: o(!0, !1),
                setEndAfter: o(!1, !1),
                collapse: function (e) {
                    I(this), e ? r(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset) : r(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset)
                },
                selectNodeContents: function (e) {
                    M(this), O(e, !0), r(this, e, 0, e, n.getNodeLength(e))
                },
                selectNode: function (e) {
                    M(this), O(e, !1), _(e, w);
                    var t = a(e),
                        n = f(e);
                    r(this, t.node, t.offset, n.node, n.offset)
                },
                extractContents: nt(d, r),
                deleteContents: nt(p, r),
                canSurroundContents: function () {
                    I(this), H(this.startContainer), H(this.endContainer);
                    var e = new g(this, !0),
                        t = e._first && s(e._first, this) || e._last && s(e._last, this);
                    return e.detach(), !t
                },
                detach: function () {
                    i(this)
                },
                splitBoundaries: function () {
                    I(this);
                    var e = this.startContainer,
                        t = this.startOffset,
                        i = this.endContainer,
                        s = this.endOffset,
                        o = e === i;
                    n.isCharacterDataNode(i) && s > 0 && s < i.length && n.splitDataNode(i, s), n.isCharacterDataNode(e) && t > 0 && t < e.length && (e = n.splitDataNode(e, t), o ? (s -= t, i = e) : i == e.parentNode && s >= n.getNodeIndex(e) && s++, t = 0), r(this, e, t, i, s)
                },
                normalizeBoundaries: function () {
                    I(this);
                    var e = this.startContainer,
                        t = this.startOffset,
                        i = this.endContainer,
                        s = this.endOffset,
                        o = function (e) {
                            var t = e.nextSibling;
                            t && t.nodeType == e.nodeType && (i = e, s = e.length, e.appendData(t.data), t.parentNode.removeChild(t))
                        }, u = function (r) {
                            var o = r.previousSibling;
                            if (o && o.nodeType == r.nodeType) {
                                e = r;
                                var u = r.length;
                                t = o.length, r.insertData(0, o.data), o.parentNode.removeChild(o);
                                if (e == i) s += t, i = e;
                                else if (i == r.parentNode) {
                                    var a = n.getNodeIndex(r);
                                    s == a ? (i = r, s = u) : s > a && s--
                                }
                            }
                        }, a = !0;
                    if (n.isCharacterDataNode(i)) i.length == s && o(i);
                    else {
                        if (s > 0) {
                            var f = i.childNodes[s - 1];
                            f && n.isCharacterDataNode(f) && o(f)
                        }
                        a = !this.collapsed
                    } if (a) {
                        if (n.isCharacterDataNode(e)) t == 0 && u(e);
                        else if (t < e.childNodes.length) {
                            var l = e.childNodes[t];
                            l && n.isCharacterDataNode(l) && u(l)
                        }
                    } else e = i, t = s;
                    r(this, e, t, i, s)
                },
                collapseToPoint: function (e, t) {
                    M(this), O(e, !0), D(e, t), c(this, e, t)
                }
            }), tt(t)
    }

    function it(e) {
        e.collapsed = e.startContainer === e.endContainer && e.startOffset === e.endOffset, e.commonAncestorContainer = e.collapsed ? e.startContainer : n.getCommonAncestor(e.startContainer, e.endContainer)
    }

    function st(e, t, n, r, i) {
        var s = e.startContainer !== t || e.startOffset !== n,
            o = e.endContainer !== r || e.endOffset !== i;
        e.startContainer = t, e.startOffset = n, e.endContainer = r, e.endOffset = i, it(e), u(e, "boundarychange", {
                startMoved: s,
                endMoved: o
            })
    }

    function ot(e) {
        M(e), e.startContainer = e.startOffset = e.endContainer = e.endOffset = null, e.collapsed = e.commonAncestorContainer = null, u(e, "detach", null), e._listeners = null
    }

    function ut(e) {
        this.startContainer = e, this.startOffset = 0, this.endContainer = e, this.endOffset = 0, this._listeners = {
            boundarychange: [],
            detach: []
        }, it(this)
    }
    e.requireModules(["DomUtil"]);
    var n = e.dom,
        r = n.DomPosition,
        i = e.DOMException;
    g.prototype = {
        _current: null,
        _next: null,
        _first: null,
        _last: null,
        isSingleCharacterDataNode: !1,
        reset: function () {
            this._current = null, this._next = this._first
        },
        hasNext: function () {
            return !!this._next
        },
        next: function () {
            var e = this._current = this._next;
            return e && (this._next = e !== this._last ? e.nextSibling : null, n.isCharacterDataNode(e) && this.clonePartiallySelectedTextNodes && (e === this.ec && (e = e.cloneNode(!0)).deleteData(this.eo, e.length - this.eo), this._current === this.sc && (e = e.cloneNode(!0)).deleteData(0, this.so))), e
        },
        remove: function () {
            var e = this._current,
                t, r;
            !n.isCharacterDataNode(e) || e !== this.sc && e !== this.ec ? e.parentNode && e.parentNode.removeChild(e) : (t = e === this.sc ? this.so : 0, r = e === this.ec ? this.eo : e.length, t != r && e.deleteData(t, r - t))
        },
        isPartiallySelectedSubtree: function () {
            var e = this._current;
            return s(e, this.range)
        },
        getSubtreeIterator: function () {
            var e;
            if (this.isSingleCharacterDataNode) e = this.range.cloneRange(), e.collapse();
            else {
                e = new ut(o(this.range));
                var t = this._current,
                    r = t,
                    i = 0,
                    s = t,
                    u = n.getNodeLength(t);
                n.isAncestorOf(t, this.sc, !0) && (r = this.sc, i = this.so), n.isAncestorOf(t, this.ec, !0) && (s = this.ec, u = this.eo), st(e, r, i, s, u)
            }
            return new g(e, this.clonePartiallySelectedTextNodes)
        },
        detach: function (e) {
            e && this.range.detach(), this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null
        }
    }, y.prototype = {
        BAD_BOUNDARYPOINTS_ERR: 1,
        INVALID_NODE_TYPE_ERR: 2
    }, y.prototype.toString = function () {
        return this.message
    }, b.prototype = {
        _current: null,
        hasNext: function () {
            return !!this._next
        },
        next: function () {
            return this._current = this._next, this._next = this.nodes[++this._position], this._current
        },
        detach: function () {
            this._current = this._next = this.nodes = null
        }
    };
    var w = [1, 3, 4, 5, 7, 8, 10],
        E = [2, 9, 11],
        S = [5, 6, 10, 12],
        x = [1, 3, 4, 5, 7, 8, 10, 11],
        T = [1, 3, 4, 5, 7, 8],
        C = n.getRootContainer,
        k = N([9, 11]),
        L = N(S),
        A = N([6, 10, 12]),
        q = document.createElement("style"),
        R = !1;
    try {
        q.innerHTML = "<b>x</b>", R = q.firstChild.nodeType == 3
    } catch (U) {}
    e.features.htmlParsingConforms = R;
    var z = R ? function (e) {
            var t = this.startContainer,
                r = n.getDocument(t);
            if (!t) throw new i("INVALID_STATE_ERR");
            var s = null;
            return t.nodeType == 1 ? s = t : n.isCharacterDataNode(t) && (s = n.parentElement(t)), s === null || s.nodeName == "HTML" && n.isHtmlNamespace(n.getDocument(s).documentElement) && n.isHtmlNamespace(s) ? s = r.createElement("body") : s = s.cloneNode(!1), s.innerHTML = e, n.fragmentFromNodeChildren(s)
        } : function (e) {
            M(this);
            var t = o(this),
                r = t.createElement("body");
            return r.innerHTML = e, n.fragmentFromNodeChildren(r)
        }, W = ["startContainer", "startOffset", "endContainer", "endOffset", "collapsed", "commonAncestorContainer"],
        X = 0,
        V = 1,
        $ = 2,
        J = 3,
        K = 0,
        Q = 1,
        G = 2,
        Y = 3;
    Z.prototype = {
        attachListener: function (e, t) {
            this._listeners[e].push(t)
        },
        compareBoundaryPoints: function (e, t) {
            I(this), P(this.startContainer, t.startContainer);
            var r, i, s, o, u = e == J || e == X ? "start" : "end",
                a = e == V || e == X ? "start" : "end";
            return r = this[u + "Container"], i = this[u + "Offset"], s = t[a + "Container"], o = t[a + "Offset"], n.comparePoints(r, i, s, o)
        },
        insertNode: function (e) {
            I(this), _(e, x), H(this.startContainer);
            if (n.isAncestorOf(e, this.startContainer, !0)) throw new i("HIERARCHY_REQUEST_ERR");
            var t = l(e, this.startContainer, this.startOffset);
            this.setStartBefore(t)
        },
        cloneContents: function () {
            I(this);
            var e, t;
            if (this.collapsed) return o(this).createDocumentFragment();
            if (this.startContainer === this.endContainer && n.isCharacterDataNode(this.startContainer)) return e = this.startContainer.cloneNode(!0), e.data = e.data.slice(this.startOffset, this.endOffset), t = o(this).createDocumentFragment(), t.appendChild(e), t;
            var r = new g(this, !0);
            return e = c(r), r.detach(), e
        },
        canSurroundContents: function () {
            I(this), H(this.startContainer), H(this.endContainer);
            var e = new g(this, !0),
                t = e._first && s(e._first, this) || e._last && s(e._last, this);
            return e.detach(), !t
        },
        surroundContents: function (e) {
            _(e, T);
            if (!this.canSurroundContents()) throw new y("BAD_BOUNDARYPOINTS_ERR");
            var t = this.extractContents();
            if (e.hasChildNodes())
                while (e.lastChild) e.removeChild(e.lastChild);
            l(e, this.startContainer, this.startOffset), e.appendChild(t), this.selectNode(e)
        },
        cloneRange: function () {
            I(this);
            var e = new ut(o(this)),
                t = W.length,
                n;
            while (t--) n = W[t], e[n] = this[n];
            return e
        },
        toString: function () {
            I(this);
            var e = this.startContainer;
            if (e === this.endContainer && n.isCharacterDataNode(e)) return e.nodeType == 3 || e.nodeType == 4 ? e.data.slice(this.startOffset, this.endOffset) : "";
            var t = [],
                r = new g(this, !0);
            return h(r, function (e) {
                (e.nodeType == 3 || e.nodeType == 4) && t.push(e.data)
            }), r.detach(), t.join("")
        },
        compareNode: function (e) {
            I(this);
            var t = e.parentNode,
                r = n.getNodeIndex(e);
            if (!t) throw new i("NOT_FOUND_ERR");
            var s = this.comparePoint(t, r),
                o = this.comparePoint(t, r + 1);
            return s < 0 ? o > 0 ? G : K : o > 0 ? Q : Y
        },
        comparePoint: function (e, t) {
            return I(this), B(e, "HIERARCHY_REQUEST_ERR"), P(e, this.startContainer), n.comparePoints(e, t, this.startContainer, this.startOffset) < 0 ? -1 : n.comparePoints(e, t, this.endContainer, this.endOffset) > 0 ? 1 : 0
        },
        createContextualFragment: z,
        toHtml: function () {
            I(this);
            var e = o(this).createElement("div");
            return e.appendChild(this.cloneContents()), e.innerHTML
        },
        intersectsNode: function (e, t) {
            I(this), B(e, "NOT_FOUND_ERR");
            if (n.getDocument(e) !== o(this)) return !1;
            var r = e.parentNode,
                i = n.getNodeIndex(e);
            B(r, "NOT_FOUND_ERR");
            var s = n.comparePoints(r, i, this.endContainer, this.endOffset),
                u = n.comparePoints(r, i + 1, this.startContainer, this.startOffset);
            return t ? s <= 0 && u >= 0 : s < 0 && u > 0
        },
        isPointInRange: function (e, t) {
            return I(this), B(e, "HIERARCHY_REQUEST_ERR"), P(e, this.startContainer), n.comparePoints(e, t, this.startContainer, this.startOffset) >= 0 && n.comparePoints(e, t, this.endContainer, this.endOffset) <= 0
        },
        intersectsRange: function (e, t) {
            I(this);
            if (o(e) != o(this)) throw new i("WRONG_DOCUMENT_ERR");
            var r = n.comparePoints(this.startContainer, this.startOffset, e.endContainer, e.endOffset),
                s = n.comparePoints(this.endContainer, this.endOffset, e.startContainer, e.startOffset);
            return t ? r <= 0 && s >= 0 : r < 0 && s > 0
        },
        intersection: function (e) {
            if (this.intersectsRange(e)) {
                var t = n.comparePoints(this.startContainer, this.startOffset, e.startContainer, e.startOffset),
                    r = n.comparePoints(this.endContainer, this.endOffset, e.endContainer, e.endOffset),
                    i = this.cloneRange();
                return t == -1 && i.setStart(e.startContainer, e.startOffset), r == 1 && i.setEnd(e.endContainer, e.endOffset), i
            }
            return null
        },
        union: function (e) {
            if (this.intersectsRange(e, !0)) {
                var t = this.cloneRange();
                return n.comparePoints(e.startContainer, e.startOffset, this.startContainer, this.startOffset) == -1 && t.setStart(e.startContainer, e.startOffset), n.comparePoints(e.endContainer, e.endOffset, this.endContainer, this.endOffset) == 1 && t.setEnd(e.endContainer, e.endOffset), t
            }
            throw new y("Ranges do not intersect")
        },
        containsNode: function (e, t) {
            return t ? this.intersectsNode(e, !1) : this.compareNode(e) == Y
        },
        containsNodeContents: function (e) {
            return this.comparePoint(e, 0) >= 0 && this.comparePoint(e, n.getNodeLength(e)) <= 0
        },
        containsRange: function (e) {
            return this.intersection(e).equals(e)
        },
        containsNodeText: function (e) {
            var t = this.cloneRange();
            t.selectNode(e);
            var n = t.getNodes([3]);
            if (n.length > 0) {
                t.setStart(n[0], 0);
                var r = n.pop();
                t.setEnd(r, r.length);
                var i = this.containsRange(t);
                return t.detach(), i
            }
            return this.containsNodeContents(e)
        },
        createNodeIterator: function (e, t) {
            return I(this), new b(this, e, t)
        },
        getNodes: function (e, t) {
            return I(this), v(this, e, t)
        },
        getDocument: function () {
            return o(this)
        },
        collapseBefore: function (e) {
            M(this), this.setEndBefore(e), this.collapse(!1)
        },
        collapseAfter: function (e) {
            M(this), this.setStartAfter(e), this.collapse(!0)
        },
        getName: function () {
            return "DomRange"
        },
        equals: function (e) {
            return ut.rangesEqual(this, e)
        },
        inspect: function () {
            return m(this)
        }
    }, rt(ut, st, ot), e.rangePrototype = Z.prototype, ut.rangeProperties = W, ut.RangeIterator = g, ut.copyComparisonConstants = tt, ut.createPrototypeRange = rt, ut.inspect = m, ut.getRangeDocument = o, ut.rangesEqual = function (e, t) {
        return e.startContainer === t.startContainer && e.startOffset === t.startOffset && e.endContainer === t.endContainer && e.endOffset === t.endOffset
    }, e.DomRange = ut, e.RangeException = y
}), rangy.createModule("WrappedRange", function (e, t) {
    function o(e) {
        var t = e.parentElement(),
            n = e.duplicate();
        n.collapse(!0);
        var i = n.parentElement();
        n = e.duplicate(), n.collapse(!1);
        var s = n.parentElement(),
            o = i == s ? i : r.getCommonAncestor(i, s);
        return o == t ? o : r.getCommonAncestor(t, o)
    }

    function u(e) {
        return e.compareEndPoints("StartToEnd", e) == 0
    }

    function a(e, t, n, s) {
        var o = e.duplicate();
        o.collapse(n);
        var u = o.parentElement();
        r.isAncestorOf(t, u, !0) || (u = t);
        if (!u.canHaveHTML) return new i(u.parentNode, r.getNodeIndex(u));
        var a = r.getDocument(u).createElement("span"),
            f, l = n ? "StartToStart" : "StartToEnd",
            c, h, p, d;
        do u.insertBefore(a, a.previousSibling), o.moveToElementText(a); while ((f = o.compareEndPoints(l, e)) > 0 && a.previousSibling);
        d = a.nextSibling;
        if (f == -1 && d && r.isCharacterDataNode(d)) {
            o.setEndPoint(n ? "EndToStart" : "EndToEnd", e);
            var v;
            if (/[\r\n]/.test(d.data)) {
                var m = o.duplicate(),
                    g = m.text.replace(/\r\n/g, "\r").length;
                v = m.moveStart("character", g);
                while ((f = m.compareEndPoints("StartToEnd", m)) == -1) v++, m.moveStart("character", 1)
            } else v = o.text.length;
            p = new i(d, v)
        } else c = (s || !n) && a.previousSibling, h = (s || n) && a.nextSibling, h && r.isCharacterDataNode(h) ? p = new i(h, 0) : c && r.isCharacterDataNode(c) ? p = new i(c, c.length) : p = new i(u, r.getNodeIndex(a));
        return a.parentNode.removeChild(a), p
    }

    function f(e, t) {
        var n, i, s = e.offset,
            o = r.getDocument(e.node),
            u, a, f = o.body.createTextRange(),
            l = r.isCharacterDataNode(e.node);
        return l ? (n = e.node, i = n.parentNode) : (a = e.node.childNodes, n = s < a.length ? a[s] : null, i = e.node), u = o.createElement("span"), u.innerHTML = "&#feff;", n ? i.insertBefore(u, n) : i.appendChild(u), f.moveToElementText(u), f.collapse(!t), i.removeChild(u), l && f[t ? "moveStart" : "moveEnd"]("character", s), f
    }
    e.requireModules(["DomUtil", "DomRange"]);
    var n, r = e.dom,
        i = r.DomPosition,
        s = e.DomRange;
    if (e.features.implementsDomRange && (!e.features.implementsTextRange || !e.config.preferTextRange))(function () {
        function u(e) {
            var t = i.length,
                n;
            while (t--) n = i[t], e[n] = e.nativeRange[n]
        }

        function a(e, t, n, r, i) {
            var s = e.startContainer !== t || e.startOffset != n,
                o = e.endContainer !== r || e.endOffset != i;
            if (s || o) e.setEnd(r, i), e.setStart(t, n)
        }

        function f(e) {
            e.nativeRange.detach(), e.detached = !0;
            var t = i.length,
                n;
            while (t--) n = i[t], e[n] = null
        }
        var t, i = s.rangeProperties,
            o, l;
        n = function (e) {
            if (!e) throw new Error("Range must be specified");
            this.nativeRange = e, u(this)
        }, s.createPrototypeRange(n, a, f), t = n.prototype, t.selectNode = function (e) {
            this.nativeRange.selectNode(e), u(this)
        }, t.deleteContents = function () {
            this.nativeRange.deleteContents(), u(this)
        }, t.extractContents = function () {
            var e = this.nativeRange.extractContents();
            return u(this), e
        }, t.cloneContents = function () {
            return this.nativeRange.cloneContents()
        }, t.surroundContents = function (e) {
            this.nativeRange.surroundContents(e), u(this)
        }, t.collapse = function (e) {
            this.nativeRange.collapse(e), u(this)
        }, t.cloneRange = function () {
            return new n(this.nativeRange.cloneRange())
        }, t.refresh = function () {
            u(this)
        }, t.toString = function () {
            return this.nativeRange.toString()
        };
        var c = document.createTextNode("test");
        r.getBody(document).appendChild(c);
        var h = document.createRange();
        h.setStart(c, 0), h.setEnd(c, 0);
        try {
            h.setStart(c, 1), o = !0, t.setStart = function (e, t) {
                this.nativeRange.setStart(e, t), u(this)
            }, t.setEnd = function (e, t) {
                this.nativeRange.setEnd(e, t), u(this)
            }, l = function (e) {
                return function (t) {
                    this.nativeRange[e](t), u(this)
                }
            }
        } catch (p) {
            o = !1, t.setStart = function (e, t) {
                try {
                    this.nativeRange.setStart(e, t)
                } catch (n) {
                    this.nativeRange.setEnd(e, t), this.nativeRange.setStart(e, t)
                }
                u(this)
            }, t.setEnd = function (e, t) {
                try {
                    this.nativeRange.setEnd(e, t)
                } catch (n) {
                    this.nativeRange.setStart(e, t), this.nativeRange.setEnd(e, t)
                }
                u(this)
            }, l = function (e, t) {
                return function (n) {
                    try {
                        this.nativeRange[e](n)
                    } catch (r) {
                        this.nativeRange[t](n), this.nativeRange[e](n)
                    }
                    u(this)
                }
            }
        }
        t.setStartBefore = l("setStartBefore", "setEndBefore"), t.setStartAfter = l("setStartAfter", "setEndAfter"), t.setEndBefore = l("setEndBefore", "setStartBefore"), t.setEndAfter = l("setEndAfter", "setStartAfter"), h.selectNodeContents(c), h.startContainer == c && h.endContainer == c && h.startOffset == 0 && h.endOffset == c.length ? t.selectNodeContents = function (e) {
            this.nativeRange.selectNodeContents(e), u(this)
        } : t.selectNodeContents = function (e) {
            this.setStart(e, 0), this.setEnd(e, s.getEndOffset(e))
        }, h.selectNodeContents(c), h.setEnd(c, 3);
        var d = document.createRange();
        d.selectNodeContents(c), d.setEnd(c, 4), d.setStart(c, 2), h.compareBoundaryPoints(h.START_TO_END, d) == -1 & h.compareBoundaryPoints(h.END_TO_START, d) == 1 ? t.compareBoundaryPoints = function (e, t) {
            return t = t.nativeRange || t, e == t.START_TO_END ? e = t.END_TO_START : e == t.END_TO_START && (e = t.START_TO_END), this.nativeRange.compareBoundaryPoints(e, t)
        } : t.compareBoundaryPoints = function (e, t) {
            return this.nativeRange.compareBoundaryPoints(e, t.nativeRange || t)
        }, e.util.isHostMethod(h, "createContextualFragment") && (t.createContextualFragment = function (e) {
            return this.nativeRange.createContextualFragment(e)
        }), r.getBody(document).removeChild(c), h.detach(), d.detach()
    })(), e.createNativeRange = function (e) {
        return e = e || document, e.createRange()
    };
    else if (e.features.implementsTextRange) {
        n = function (e) {
            this.textRange = e, this.refresh()
        }, n.prototype = new s(document), n.prototype.refresh = function () {
            var e, t, n = o(this.textRange);
            u(this.textRange) ? t = e = a(this.textRange, n, !0, !0) : (e = a(this.textRange, n, !0, !1), t = a(this.textRange, n, !1, !1)), this.setStart(e.node, e.offset), this.setEnd(t.node, t.offset)
        }, s.copyComparisonConstants(n);
        var l = function () {
            return this
        }();
        typeof l.Range == "undefined" && (l.Range = n), e.createNativeRange = function (e) {
            return e = e || document, e.body.createTextRange()
        }
    }
    e.features.implementsTextRange && (n.rangeToTextRange = function (e) {
        if (e.collapsed) {
            var t = f(new i(e.startContainer, e.startOffset), !0);
            return t
        }
        var n = f(new i(e.startContainer, e.startOffset), !0),
            s = f(new i(e.endContainer, e.endOffset), !1),
            o = r.getDocument(e.startContainer).body.createTextRange();
        return o.setEndPoint("StartToStart", n), o.setEndPoint("EndToEnd", s), o
    }), n.prototype.getName = function () {
        return "WrappedRange"
    }, e.WrappedRange = n, e.createRange = function (t) {
        return t = t || document, new n(e.createNativeRange(t))
    }, e.createRangyRange = function (e) {
        return e = e || document, new s(e)
    }, e.createIframeRange = function (t) {
        return e.createRange(r.getIframeDocument(t))
    }, e.createIframeRangyRange = function (t) {
        return e.createRangyRange(r.getIframeDocument(t))
    }, e.addCreateMissingNativeApiListener(function (t) {
        var n = t.document;
        typeof n.createRange == "undefined" && (n.createRange = function () {
            return e.createRange(this)
        }), n = t = null
    })
}), rangy.createModule("WrappedSelection", function (e, t) {
    function p(e) {
        return (e || window).getSelection()
    }

    function d(e) {
        return (e || window).document.selection
    }

    function L(e, t, n) {
        var r = n ? "end" : "start",
            i = n ? "start" : "end";
        e.anchorNode = t[r + "Container"], e.anchorOffset = t[r + "Offset"], e.focusNode = t[i + "Container"], e.focusOffset = t[i + "Offset"]
    }

    function A(e) {
        var t = e.nativeSelection;
        e.anchorNode = t.anchorNode, e.anchorOffset = t.anchorOffset, e.focusNode = t.focusNode, e.focusOffset = t.focusOffset
    }

    function O(e) {
        e.anchorNode = e.focusNode = null, e.anchorOffset = e.focusOffset = 0, e.rangeCount = 0, e.isCollapsed = !0, e._ranges.length = 0
    }

    function M(t) {
        var n;
        return t instanceof o ? (n = t._selectionNativeRange, n || (n = e.createNativeRange(i.getDocument(t.startContainer)), n.setEnd(t.endContainer, t.endOffset), n.setStart(t.startContainer, t.startOffset), t._selectionNativeRange = n, t.attachListener("detach", function () {
                        this._selectionNativeRange = null
                    }))) : t instanceof u ? n = t.nativeRange : e.features.implementsDomRange && t instanceof i.getWindow(t.startContainer).Range && (n = t), n
    }

    function _(e) {
        if (!e.length || e[0].nodeType != 1) return !1;
        for (var t = 1, n = e.length; t < n; ++t)
            if (!i.isAncestorOf(e[0], e[t])) return !1;
        return !0
    }

    function D(e) {
        var t = e.getNodes();
        if (!_(t)) throw new Error("getSingleElementFromRange: range " + e.inspect() + " did not consist of a single element");
        return t[0]
    }

    function P(e) {
        return !!e && typeof e.text != "undefined"
    }

    function H(e, t) {
        var n = new u(t);
        e._ranges = [n], L(e, n, !1), e.rangeCount = 1, e.isCollapsed = n.collapsed
    }

    function B(t) {
        t._ranges.length = 0;
        if (t.docSelection.type == "None") O(t);
        else {
            var n = t.docSelection.createRange();
            if (P(n)) H(t, n);
            else {
                t.rangeCount = n.length;
                var r, s = i.getDocument(n.item(0));
                for (var o = 0; o < t.rangeCount; ++o) r = e.createRange(s), r.selectNode(n.item(o)), t._ranges.push(r);
                t.isCollapsed = t.rangeCount == 1 && t._ranges[0].collapsed, L(t, t._ranges[t.rangeCount - 1], !1)
            }
        }
    }

    function j(e, t) {
        var n = e.docSelection.createRange(),
            r = D(t),
            s = i.getDocument(n.item(0)),
            o = i.getBody(s).createControlRange();
        for (var u = 0, a = n.length; u < a; ++u) o.add(n.item(u));
        try {
            o.add(r)
        } catch (f) {
            throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")
        }
        o.select(), B(e)
    }

    function I(e, t, n) {
        this.nativeSelection = e, this.docSelection = t, this._ranges = [], this.win = n, this.refresh()
    }

    function R(e, t) {
        var n = i.getDocument(t[0].startContainer),
            r = i.getBody(n).createControlRange();
        for (var s = 0, o; s < rangeCount; ++s) {
            o = D(t[s]);
            try {
                r.add(o)
            } catch (u) {
                throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")
            }
        }
        r.select(), B(e)
    }

    function V(e, t) {
        if (e.anchorNode && i.getDocument(e.anchorNode) !== i.getDocument(t)) throw new a("WRONG_DOCUMENT_ERR")
    }

    function $(e) {
        var t = [],
            n = new f(e.anchorNode, e.anchorOffset),
            r = new f(e.focusNode, e.focusOffset),
            i = typeof e.getName == "function" ? e.getName() : "Selection";
        if (typeof e.rangeCount != "undefined")
            for (var s = 0, u = e.rangeCount; s < u; ++s) t[s] = o.inspect(e.getRangeAt(s));
        return "[" + i + "(Ranges: " + t.join(", ") + ")(anchor: " + n.inspect() + ", focus: " + r.inspect() + "]"
    }
    e.requireModules(["DomUtil", "DomRange", "WrappedRange"]), e.config.checkSelectionRanges = !0;
    var n = "boolean",
        r = "_rangySelection",
        i = e.dom,
        s = e.util,
        o = e.DomRange,
        u = e.WrappedRange,
        a = e.DOMException,
        f = i.DomPosition,
        l, c, h = "Control",
        v = e.util.isHostMethod(window, "getSelection"),
        m = e.util.isHostObject(document, "selection"),
        g = m && (!v || e.config.preferTextRange);
    g ? (l = d, e.isSelectionValid = function (e) {
        var t = (e || window).document,
            n = t.selection;
        return n.type != "None" || i.getDocument(n.createRange().parentElement()) == t
    }) : v ? (l = p, e.isSelectionValid = function () {
        return !0
    }) : t.fail("Neither document.selection or window.getSelection() detected."), e.getNativeSelection = l;
    var y = l(),
        b = e.createNativeRange(document),
        w = i.getBody(document),
        E = s.areHostObjects(y, ["anchorNode", "focusNode"] && s.areHostProperties(y, ["anchorOffset", "focusOffset"]));
    e.features.selectionHasAnchorAndFocus = E;
    var S = s.isHostMethod(y, "extend");
    e.features.selectionHasExtend = S;
    var x = typeof y.rangeCount == "number";
    e.features.selectionHasRangeCount = x;
    var T = !1,
        N = !0;
    s.areHostMethods(y, ["addRange", "getRangeAt", "removeAllRanges"]) && typeof y.rangeCount == "number" && e.features.implementsDomRange && function () {
        var e = document.createElement("iframe");
        w.appendChild(e);
        var t = i.getIframeDocument(e);
        t.open(), t.write("<html><head></head><body>12</body></html>"), t.close();
        var n = i.getIframeWindow(e).getSelection(),
            r = t.documentElement,
            s = r.lastChild,
            o = s.firstChild,
            u = t.createRange();
        u.setStart(o, 1), u.collapse(!0), n.addRange(u), N = n.rangeCount == 1, n.removeAllRanges();
        var a = u.cloneRange();
        u.setStart(o, 0), a.setEnd(o, 2), n.addRange(u), n.addRange(a), T = n.rangeCount == 2, u.detach(), a.detach(), w.removeChild(e)
    }(), e.features.selectionSupportsMultipleRanges = T, e.features.collapsedNonEditableSelectionsSupported = N;
    var C = !1,
        k;
    w && s.isHostMethod(w, "createControlRange") && (k = w.createControlRange(), s.areHostProperties(k, ["item", "add"]) && (C = !0)), e.features.implementsControlRange = C, E ? c = function (e) {
        return e.anchorNode === e.focusNode && e.anchorOffset === e.focusOffset
    } : c = function (e) {
        return e.rangeCount ? e.getRangeAt(e.rangeCount - 1).collapsed : !1
    };
    var F;
    s.isHostMethod(y, "getRangeAt") ? F = function (e, t) {
        try {
            return e.getRangeAt(t)
        } catch (n) {
            return null
        }
    } : E && (F = function (t) {
        var n = i.getDocument(t.anchorNode),
            r = e.createRange(n);
        return r.setStart(t.anchorNode, t.anchorOffset), r.setEnd(t.focusNode, t.focusOffset), r.collapsed !== this.isCollapsed && (r.setStart(t.focusNode, t.focusOffset), r.setEnd(t.anchorNode, t.anchorOffset)), r
    }), e.getSelection = function (e) {
        e = e || window;
        var t = e[r],
            n = l(e),
            i = m ? d(e) : null;
        return t ? (t.nativeSelection = n, t.docSelection = i, t.refresh(e)) : (t = new I(n, i, e), e[r] = t), t
    }, e.getIframeSelection = function (t) {
        return e.getSelection(i.getIframeWindow(t))
    };
    var q = I.prototype;
    if (!g && E && s.areHostMethods(y, ["removeAllRanges", "addRange"])) {
        q.removeAllRanges = function () {
            this.nativeSelection.removeAllRanges(), O(this)
        };
        var U = function (t, n) {
            var r = o.getRangeDocument(n),
                i = e.createRange(r);
            i.collapseToPoint(n.endContainer, n.endOffset), t.nativeSelection.addRange(M(i)), t.nativeSelection.extend(n.startContainer, n.startOffset), t.refresh()
        };
        x ? q.addRange = function (t, n) {
            if (C && m && this.docSelection.type == h) j(this, t);
            else if (n && S) U(this, t);
            else {
                var r;
                T ? r = this.rangeCount : (this.removeAllRanges(), r = 0), this.nativeSelection.addRange(M(t)), this.rangeCount = this.nativeSelection.rangeCount;
                if (this.rangeCount == r + 1) {
                    if (e.config.checkSelectionRanges) {
                        var i = F(this.nativeSelection, this.rangeCount - 1);
                        i && !o.rangesEqual(i, t) && (t = new u(i))
                    }
                    this._ranges[this.rangeCount - 1] = t, L(this, t, X(this.nativeSelection)), this.isCollapsed = c(this)
                } else this.refresh()
            }
        } : q.addRange = function (e, t) {
            t && S ? U(this, e) : (this.nativeSelection.addRange(M(e)), this.refresh())
        }, q.setRanges = function (e) {
            if (C && e.length > 1) R(this, e);
            else {
                this.removeAllRanges();
                for (var t = 0, n = e.length; t < n; ++t) this.addRange(e[t])
            }
        }
    } else {
        if (!(s.isHostMethod(y, "empty") && s.isHostMethod(b, "select") && C && g)) return t.fail("No means of selecting a Range or TextRange was found"), !1;
        q.removeAllRanges = function () {
            try {
                this.docSelection.empty();
                if (this.docSelection.type != "None") {
                    var e;
                    if (this.anchorNode) e = i.getDocument(this.anchorNode);
                    else if (this.docSelection.type == h) {
                        var t = this.docSelection.createRange();
                        t.length && (e = i.getDocument(t.item(0)).body.createTextRange())
                    }
                    if (e) {
                        var n = e.body.createTextRange();
                        n.select(), this.docSelection.empty()
                    }
                }
            } catch (r) {}
            O(this)
        }, q.addRange = function (e) {
            this.docSelection.type == h ? j(this, e) : (u.rangeToTextRange(e).select(), this._ranges[0] = e, this.rangeCount = 1, this.isCollapsed = this._ranges[0].collapsed, L(this, e, !1))
        }, q.setRanges = function (e) {
            this.removeAllRanges();
            var t = e.length;
            t > 1 ? R(this, e) : t && this.addRange(e[0])
        }
    }
    q.getRangeAt = function (e) {
        if (e < 0 || e >= this.rangeCount) throw new a("INDEX_SIZE_ERR");
        return this._ranges[e]
    };
    var z;
    if (g) z = function (t) {
        var n;
        e.isSelectionValid(t.win) ? n = t.docSelection.createRange() : (n = i.getBody(t.win.document).createTextRange(), n.collapse(!0)), t.docSelection.type == h ? B(t) : P(n) ? H(t, n) : O(t)
    };
    else if (s.isHostMethod(y, "getRangeAt") && typeof y.rangeCount == "number") z = function (t) {
        if (C && m && t.docSelection.type == h) B(t);
        else {
            t._ranges.length = t.rangeCount = t.nativeSelection.rangeCount;
            if (t.rangeCount) {
                for (var n = 0, r = t.rangeCount; n < r; ++n) t._ranges[n] = new e.WrappedRange(t.nativeSelection.getRangeAt(n));
                L(t, t._ranges[t.rangeCount - 1], X(t.nativeSelection)), t.isCollapsed = c(t)
            } else O(t)
        }
    };
    else {
        if (!E || typeof y.isCollapsed != n || typeof b.collapsed != n || !e.features.implementsDomRange) return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"), !1;
        z = function (e) {
            var t, n = e.nativeSelection;
            n.anchorNode ? (t = F(n, 0), e._ranges = [t], e.rangeCount = 1, A(e), e.isCollapsed = c(e)) : O(e)
        }
    }
    q.refresh = function (e) {
        var t = e ? this._ranges.slice(0) : null;
        z(this);
        if (e) {
            var n = t.length;
            if (n != this._ranges.length) return !1;
            while (n--)
                if (!o.rangesEqual(t[n], this._ranges[n])) return !1;
            return !0
        }
    };
    var W = function (e, t) {
        var n = e.getAllRanges(),
            r = !1;
        e.removeAllRanges();
        for (var i = 0, s = n.length; i < s; ++i) r || t !== n[i] ? e.addRange(n[i]) : r = !0;
        e.rangeCount || O(e)
    };
    C ? q.removeRange = function (e) {
        if (this.docSelection.type == h) {
            var t = this.docSelection.createRange(),
                n = D(e),
                r = i.getDocument(t.item(0)),
                s = i.getBody(r).createControlRange(),
                o, u = !1;
            for (var a = 0, f = t.length; a < f; ++a) o = t.item(a), o !== n || u ? s.add(t.item(a)) : u = !0;
            s.select(), B(this)
        } else W(this, e)
    } : q.removeRange = function (e) {
        W(this, e)
    };
    var X;
    !g && E && e.features.implementsDomRange ? (X = function (e) {
        var t = !1;
        return e.anchorNode && (t = i.comparePoints(e.anchorNode, e.anchorOffset, e.focusNode, e.focusOffset) == 1), t
    }, q.isBackwards = function () {
        return X(this)
    }) : X = q.isBackwards = function () {
        return !1
    }, q.toString = function () {
        var e = [];
        for (var t = 0, n = this.rangeCount; t < n; ++t) e[t] = "" + this._ranges[t];
        return e.join("")
    }, q.collapse = function (t, n) {
        V(this, t);
        var r = e.createRange(i.getDocument(t));
        r.collapseToPoint(t, n), this.removeAllRanges(), this.addRange(r), this.isCollapsed = !0
    }, q.collapseToStart = function () {
        if (!this.rangeCount) throw new a("INVALID_STATE_ERR");
        var e = this._ranges[0];
        this.collapse(e.startContainer, e.startOffset)
    }, q.collapseToEnd = function () {
        if (!this.rangeCount) throw new a("INVALID_STATE_ERR");
        var e = this._ranges[this.rangeCount - 1];
        this.collapse(e.endContainer, e.endOffset)
    }, q.selectAllChildren = function (t) {
        V(this, t);
        var n = e.createRange(i.getDocument(t));
        n.selectNodeContents(t), this.removeAllRanges(), this.addRange(n)
    }, q.deleteFromDocument = function () {
        if (C && m && this.docSelection.type == h) {
            var e = this.docSelection.createRange(),
                t;
            while (e.length) t = e.item(0), e.remove(t), t.parentNode.removeChild(t);
            this.refresh()
        } else if (this.rangeCount) {
            var n = this.getAllRanges();
            this.removeAllRanges();
            for (var r = 0, i = n.length; r < i; ++r) n[r].deleteContents();
            this.addRange(n[i - 1])
        }
    }, q.getAllRanges = function () {
        return this._ranges.slice(0)
    }, q.setSingleRange = function (e) {
        this.setRanges([e])
    }, q.containsNode = function (e, t) {
        for (var n = 0, r = this._ranges.length; n < r; ++n)
            if (this._ranges[n].containsNode(e, t)) return !0;
        return !1
    }, q.toHtml = function () {
        var e = "";
        if (this.rangeCount) {
            var t = o.getRangeDocument(this._ranges[0]).createElement("div");
            for (var n = 0, r = this._ranges.length; n < r; ++n) t.appendChild(this._ranges[n].cloneContents());
            e = t.innerHTML
        }
        return e
    }, q.getName = function () {
        return "WrappedSelection"
    }, q.inspect = function () {
        return $(this)
    }, q.detach = function () {
        this.win[r] = null, this.win = this.anchorNode = this.focusNode = null
    }, I.inspect = $, e.Selection = I, e.selectionPrototype = q, e.addCreateMissingNativeApiListener(function (t) {
        typeof t.getSelection == "undefined" && (t.getSelection = function () {
            return e.getSelection(this)
        }), t = null
    })
});
var Base = function () {};
Base.extend = function (e, t) {
    var n = Base.prototype.extend;
    Base._prototyping = !0;
    var r = new this;
    n.call(r, e), r.base = function () {}, delete Base._prototyping;
    var i = r.constructor,
        s = r.constructor = function () {
            if (!Base._prototyping)
                if (this._constructing || this.constructor == s) this._constructing = !0, i.apply(this, arguments), delete this._constructing;
                else if (arguments[0] != null) return (arguments[0].extend || n).call(arguments[0], r)
        };
    return s.ancestor = this, s.extend = this.extend, s.forEach = this.forEach, s.implement = this.implement, s.prototype = r, s.toString = this.toString, s.valueOf = function (e) {
        return e == "object" ? s : i.valueOf()
    }, n.call(s, t), typeof s.init == "function" && s.init(), s
}, Base.prototype = {
    extend: function (e, t) {
        if (arguments.length > 1) {
            var n = this[e];
            if (n && typeof t == "function" && (!n.valueOf || n.valueOf() != t.valueOf()) && /\bbase\b/.test(t)) {
                var r = t.valueOf();
                t = function () {
                    var e = this.base || Base.prototype.base;
                    this.base = n;
                    var t = r.apply(this, arguments);
                    return this.base = e, t
                }, t.valueOf = function (e) {
                    return e == "object" ? t : r
                }, t.toString = Base.toString
            }
            this[e] = t
        } else if (e) {
            var i = Base.prototype.extend;
            !Base._prototyping && typeof this != "function" && (i = this.extend || i);
            var s = {
                toSource: null
            }, o = ["constructor", "toString", "valueOf"],
                u = Base._prototyping ? 0 : 1;
            while (a = o[u++]) e[a] != s[a] && i.call(this, a, e[a]);
            for (var a in e) s[a] || i.call(this, a, e[a])
        }
        return this
    }
}, Base = Base.extend({
        constructor: function () {
            this.extend(arguments[0])
        }
    }, {
        ancestor: Object,
        version: "1.1",
        forEach: function (e, t, n) {
            for (var r in e) this.prototype[r] === undefined && t.call(n, e[r], r, e)
        },
        implement: function () {
            for (var e = 0; e < arguments.length; e++) typeof arguments[e] == "function" ? arguments[e](this.prototype) : this.prototype.extend(arguments[e]);
            return this
        },
        toString: function () {
            return String(this.valueOf())
        }
    }), wysihtml5.browser = function () {
    function u(e) {
        return +(/ipad|iphone|ipod/.test(e) && e.match(/ os (\d+).+? like mac os x/) || [, 0])[1]
    }

    function a(e) {
        return +(e.match(/android (\d+)/) || [, 0])[1]
    }
    var e = navigator.userAgent,
        t = document.createElement("div"),
        n = e.indexOf("MSIE") !== -1 && e.indexOf("Opera") === -1,
        r = e.indexOf("Gecko") !== -1 && e.indexOf("KHTML") === -1,
        i = e.indexOf("AppleWebKit/") !== -1,
        s = e.indexOf("Chrome/") !== -1,
        o = e.indexOf("Opera/") !== -1;
    return {
        USER_AGENT: e,
        supported: function () {
            var e = this.USER_AGENT.toLowerCase(),
                n = "contentEditable" in t,
                r = document.execCommand && document.queryCommandSupported && document.queryCommandState,
                i = document.querySelector && document.querySelectorAll,
                s = this.isIos() && u(e) < 5 || this.isAndroid() && a(e) < 4 || e.indexOf("opera mobi") !== -1 || e.indexOf("hpwos/") !== -1;
            return n && r && i && !s
        },
        isTouchDevice: function () {
            return this.supportsEvent("touchmove")
        },
        isIos: function () {
            return /ipad|iphone|ipod/i.test(this.USER_AGENT)
        },
        isAndroid: function () {
            return this.USER_AGENT.indexOf("Android") !== -1
        },
        supportsSandboxedIframes: function () {
            return n
        },
        throwsMixedContentWarningWhenIframeSrcIsEmpty: function () {
            return !("querySelector" in document)
        },
        displaysCaretInEmptyContentEditableCorrectly: function () {
            return n
        },
        hasCurrentStyleProperty: function () {
            return "currentStyle" in t
        },
        hasHistoryIssue: function () {
            return r && navigator.platform.substr(0, 3) === "Mac"
        },
        insertsLineBreaksOnReturn: function () {
            return r
        },
        supportsPlaceholderAttributeOn: function (e) {
            return "placeholder" in e
        },
        supportsEvent: function (e) {
            return "on" + e in t || function () {
                return t.setAttribute("on" + e, "return;"), typeof t["on" + e] == "function"
            }()
        },
        supportsEventsInIframeCorrectly: function () {
            return !o
        },
        supportsHTML5Tags: function (e) {
            var t = e.createElement("div"),
                n = "<article>foo</article>";
            return t.innerHTML = n, t.innerHTML.toLowerCase() === n
        },
        supportsCommand: function () {
            var e = {
                formatBlock: n,
                insertUnorderedList: n || i,
                insertOrderedList: n || i
            }, t = {
                    insertHTML: r
                };
            return function (n, r) {
                var i = e[r];
                if (!i) {
                    try {
                        return n.queryCommandSupported(r)
                    } catch (s) {}
                    try {
                        return n.queryCommandEnabled(r)
                    } catch (o) {
                        return !!t[r]
                    }
                }
                return !1
            }
        }(),
        doesAutoLinkingInContentEditable: function () {
            return n
        },
        canDisableAutoLinking: function () {
            return this.supportsCommand(document, "AutoUrlDetect")
        },
        clearsContentEditableCorrectly: function () {
            return r || o || i
        },
        supportsGetAttributeCorrectly: function () {
            var e = document.createElement("td");
            return e.getAttribute("rowspan") != "1"
        },
        canSelectImagesInContentEditable: function () {
            return r || n || o
        },
        autoScrollsToCaret: function () {
            return !i
        },
        autoClosesUnclosedTags: function () {
            var e = t.cloneNode(!1),
                n, r;
            return e.innerHTML = "<p><div></div>", r = e.innerHTML.toLowerCase(), n = r === "<p></p><div></div>" || r === "<p><div></div></p>", this.autoClosesUnclosedTags = function () {
                return n
            }, n
        },
        supportsNativeGetElementsByClassName: function () {
            return String(document.getElementsByClassName).indexOf("[native code]") !== -1
        },
        supportsSelectionModify: function () {
            return "getSelection" in window && "modify" in window.getSelection()
        },
        needsSpaceAfterLineBreak: function () {
            return o
        },
        supportsSpeechApiOn: function (t) {
            var n = e.match(/Chrome\/(\d+)/) || [, 0];
            return n[1] >= 11 && ("onwebkitspeechchange" in t || "speech" in t)
        },
        crashesWhenDefineProperty: function (e) {
            return n && (e === "XMLHttpRequest" || e === "XDomainRequest")
        },
        doesAsyncFocus: function () {
            return n
        },
        hasProblemsSettingCaretAfterImg: function () {
            return n
        },
        hasUndoInContextMenu: function () {
            return r || s || o
        },
        hasInsertNodeIssue: function () {
            return o
        },
        hasIframeFocusIssue: function () {
            return n
        }
    }
}(), wysihtml5.lang.array = function (e) {
    return {
        contains: function (t) {
            if (e.indexOf) return e.indexOf(t) !== -1;
            for (var n = 0, r = e.length; n < r; n++)
                if (e[n] === t) return !0;
            return !1
        },
        without: function (t) {
            t = wysihtml5.lang.array(t);
            var n = [],
                r = 0,
                i = e.length;
            for (; r < i; r++) t.contains(e[r]) || n.push(e[r]);
            return n
        },
        get: function () {
            var t = 0,
                n = e.length,
                r = [];
            for (; t < n; t++) r.push(e[t]);
            return r
        }
    }
}, wysihtml5.lang.Dispatcher = Base.extend({
        on: function (e, t) {
            return this.events = this.events || {}, this.events[e] = this.events[e] || [], this.events[e].push(t), this
        },
        off: function (e, t) {
            this.events = this.events || {};
            var n = 0,
                r, i;
            if (e) {
                r = this.events[e] || [], i = [];
                for (; n < r.length; n++) r[n] !== t && t && i.push(r[n]);
                this.events[e] = i
            } else this.events = {};
            return this
        },
        fire: function (e, t) {
            this.events = this.events || {};
            var n = this.events[e] || [],
                r = 0;
            for (; r < n.length; r++) n[r].call(this, t);
            return this
        },
        observe: function () {
            return this.on.apply(this, arguments)
        },
        stopObserving: function () {
            return this.off.apply(this, arguments)
        }
    }), wysihtml5.lang.object = function (e) {
    return {
        merge: function (t) {
            for (var n in t) e[n] = t[n];
            return this
        },
        get: function () {
            return e
        },
        clone: function () {
            var t = {}, n;
            for (n in e) t[n] = e[n];
            return t
        },
        isArray: function () {
            return Object.prototype.toString.call(e) === "[object Array]"
        }
    }
},
function () {
    var e = /^\s+/,
        t = /\s+$/,
        n = /[&<>"]/g,
        r = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;"
        };
    wysihtml5.lang.string = function (i) {
        return i = String(i), {
            trim: function () {
                return i.replace(e, "").replace(t, "")
            },
            interpolate: function (e) {
                for (var t in e) i = this.replace("#{" + t + "}").by(e[t]);
                return i
            },
            replace: function (e) {
                return {
                    by: function (t) {
                        return i.split(e).join(t)
                    }
                }
            },
            escapeHTML: function () {
                return i.replace(n, function (e) {
                    return r[e]
                })
            }
        }
    }
}(),
function (e) {
    function o(e) {
        return l(e) ? e : (e === e.ownerDocument.documentElement && (e = e.ownerDocument.body), c(e))
    }

    function u(e) {
        return e.replace(n, function (e, t) {
            var n = (t.match(r) || [])[1] || "",
                o = s[n];
            t = t.replace(r, ""), t.split(o).length > t.split(n).length && (t += n, n = "");
            var u = t,
                a = t;
            return t.length > i && (a = a.substr(0, i) + "..."), u.substr(0, 4) === "www." && (u = "http://" + u), '<a href="' + u + '">' + a + "</a>" + n
        })
    }

    function a(e) {
        var t = e._wysihtml5_tempElement;
        return t || (t = e._wysihtml5_tempElement = e.createElement("div")), t
    }

    function f(t) {
        var n = t.parentNode,
            r = e.lang.string(t.data).escapeHTML(),
            i = a(n.ownerDocument);
        i.innerHTML = "<span></span>" + u(r), i.removeChild(i.firstChild);
        while (i.firstChild) n.insertBefore(i.firstChild, t);
        n.removeChild(t)
    }

    function l(e) {
        var n;
        while (e.parentNode) {
            e = e.parentNode, n = e.nodeName;
            if (t.contains(n)) return !0;
            if (n === "body") return !1
        }
        return !1
    }

    function c(r) {
        if (t.contains(r.nodeName)) return;
        if (r.nodeType === e.TEXT_NODE && r.data.match(n)) {
            f(r);
            return
        }
        var i = e.lang.array(r.childNodes).get(),
            s = i.length,
            o = 0;
        for (; o < s; o++) c(i[o]);
        return r
    }
    var t = e.lang.array(["CODE", "PRE", "A", "SCRIPT", "HEAD", "TITLE", "STYLE"]),
        n = /((https?:\/\/|www\.)[^\s<]{3,})/gi,
        r = /([^\w\/\-](,?))$/i,
        i = 100,
        s = {
            ")": "(",
            "]": "[",
            "}": "{"
        };
    e.dom.autoLink = o, e.dom.autoLink.URL_REG_EXP = n
}(wysihtml5),
function (e) {
    var t = e.dom;
    t.addClass = function (e, n) {
        var r = e.classList;
        if (r) return r.add(n);
        if (t.hasClass(e, n)) return;
        e.className += " " + n
    }, t.removeClass = function (e, t) {
        var n = e.classList;
        if (n) return n.remove(t);
        e.className = e.className.replace(new RegExp("(^|\\s+)" + t + "(\\s+|$)"), " ")
    }, t.hasClass = function (e, t) {
        var n = e.classList;
        if (n) return n.contains(t);
        var r = e.className;
        return r.length > 0 && (r == t || (new RegExp("(^|\\s)" + t + "(\\s|$)")).test(r))
    }
}(wysihtml5), wysihtml5.dom.contains = function () {
    var e = document.documentElement;
    if (e.contains) return function (e, t) {
        return t.nodeType !== wysihtml5.ELEMENT_NODE && (t = t.parentNode), e !== t && e.contains(t)
    };
    if (e.compareDocumentPosition) return function (e, t) {
        return !!(e.compareDocumentPosition(t) & 16)
    }
}(), wysihtml5.dom.convertToList = function () {
    function e(e, t) {
        var n = e.createElement("li");
        return t.appendChild(n), n
    }

    function t(e, t) {
        return e.createElement(t)
    }

    function n(n, r) {
        if (n.nodeName === "UL" || n.nodeName === "OL" || n.nodeName === "MENU") return n;
        var i = n.ownerDocument,
            s = t(i, r),
            o = n.querySelectorAll("br"),
            u = o.length,
            a, f, l, c, h, p, d, v, m;
        for (m = 0; m < u; m++) {
            c = o[m];
            while ((h = c.parentNode) && h !== n && h.lastChild === c) {
                if (wysihtml5.dom.getStyle("display").from(h) === "block") {
                    h.removeChild(c);
                    break
                }
                wysihtml5.dom.insert(c).after(c.parentNode)
            }
        }
        a = wysihtml5.lang.array(n.childNodes).get(), f = a.length;
        for (m = 0; m < f; m++) {
            v = v || e(i, s), l = a[m], p = wysihtml5.dom.getStyle("display").from(l) === "block", d = l.nodeName === "BR";
            if (p) {
                v = v.firstChild ? e(i, s) : v, v.appendChild(l), v = null;
                continue
            }
            if (d) {
                v = v.firstChild ? null : v;
                continue
            }
            v.appendChild(l)
        }
        return a.length === 0 && e(i, s), n.parentNode.replaceChild(s, n), s
    }
    return n
}(), wysihtml5.dom.copyAttributes = function (e) {
    return {
        from: function (t) {
            return {
                to: function (n) {
                    var r, i = 0,
                        s = e.length;
                    for (; i < s; i++) r = e[i], typeof t[r] != "undefined" && t[r] !== "" && (n[r] = t[r]);
                    return {
                        andTo: arguments.callee
                    }
                }
            }
        }
    }
},
function (e) {
    var t = ["-webkit-box-sizing", "-moz-box-sizing", "-ms-box-sizing", "box-sizing"],
        n = function (t) {
            return r(t) ? parseInt(e.getStyle("width").from(t), 10) < t.offsetWidth : !1
        }, r = function (n) {
            var r = 0,
                i = t.length;
            for (; r < i; r++)
                if (e.getStyle(t[r]).from(n) === "border-box") return t[r]
        };
    e.copyStyles = function (r) {
        return {
            from: function (i) {
                n(i) && (r = wysihtml5.lang.array(r).without(t));
                var s = "",
                    o = r.length,
                    u = 0,
                    a;
                for (; u < o; u++) a = r[u], s += a + ":" + e.getStyle(a).from(i) + ";";
                return {
                    to: function (t) {
                        return e.setStyles(s).on(t), {
                            andTo: arguments.callee
                        }
                    }
                }
            }
        }
    }
}(wysihtml5.dom),
function (e) {
    e.dom.delegate = function (t, n, r, i) {
        return e.dom.observe(t, r, function (r) {
            var s = r.target,
                o = e.lang.array(t.querySelectorAll(n));
            while (s && s !== t) {
                if (o.contains(s)) {
                    i.call(s, r);
                    break
                }
                s = s.parentNode
            }
        })
    }
}(wysihtml5), wysihtml5.dom.getAsDom = function () {
    var e = function (e, t) {
        var n = t.createElement("div");
        n.style.display = "none", t.body.appendChild(n);
        try {
            n.innerHTML = e
        } catch (r) {}
        return t.body.removeChild(n), n
    }, t = function (e) {
            if (e._wysihtml5_supportsHTML5Tags) return;
            for (var t = 0, r = n.length; t < r; t++) e.createElement(n[t]);
            e._wysihtml5_supportsHTML5Tags = !0
        }, n = ["abbr", "article", "aside", "audio", "bdi", "canvas", "command", "datalist", "details", "figcaption", "figure", "footer", "header", "hgroup", "keygen", "mark", "meter", "nav", "output", "progress", "rp", "rt", "ruby", "svg", "section", "source", "summary", "time", "track", "video", "wbr"];
    return function (n, r) {
        r = r || document;
        var i;
        return typeof n == "object" && n.nodeType ? (i = r.createElement("div"), i.appendChild(n)) : wysihtml5.browser.supportsHTML5Tags(r) ? (i = r.createElement("div"), i.innerHTML = n) : (t(r), i = e(n, r)), i
    }
}(), wysihtml5.dom.getParentElement = function () {
    function e(e, t) {
        return !t || !t.length ? !0 : typeof t == "string" ? e === t : wysihtml5.lang.array(t).contains(e)
    }

    function t(e) {
        return e.nodeType === wysihtml5.ELEMENT_NODE
    }

    function n(e, t, n) {
        var r = (e.className || "").match(n) || [];
        return t ? r[r.length - 1] === t : !! r.length
    }

    function r(t, n, r) {
        while (r-- && t && t.nodeName !== "BODY") {
            if (e(t.nodeName, n)) return t;
            t = t.parentNode
        }
        return null
    }

    function i(r, i, s, o, u) {
        while (u-- && r && r.nodeName !== "BODY") {
            if (t(r) && e(r.nodeName, i) && n(r, s, o)) return r;
            r = r.parentNode
        }
        return null
    }
    return function (e, t, n) {
        return n = n || 50, t.className || t.classRegExp ? i(e, t.nodeName, t.className, t.classRegExp, n) : r(e, t.nodeName, n)
    }
}(), wysihtml5.dom.getStyle = function () {
    function n(e) {
        return e.replace(t, function (e) {
            return e.charAt(1).toUpperCase()
        })
    }
    var e = {
        "float": "styleFloat" in document.createElement("div").style ? "styleFloat" : "cssFloat"
    }, t = /\-[a-z]/g;
    return function (t) {
        return {
            from: function (r) {
                if (r.nodeType !== wysihtml5.ELEMENT_NODE) return;
                var i = r.ownerDocument,
                    s = e[t] || n(t),
                    o = r.style,
                    u = r.currentStyle,
                    a = o[s];
                if (a) return a;
                if (u) try {
                    return u[s]
                } catch (f) {}
                var l = i.defaultView || i.parentWindow,
                    c = (t === "height" || t === "width") && r.nodeName === "TEXTAREA",
                    h, p;
                if (l.getComputedStyle) return c && (h = o.overflow, o.overflow = "hidden"), p = l.getComputedStyle(r, null).getPropertyValue(t), c && (o.overflow = h || ""), p
            }
        }
    }
}(), wysihtml5.dom.hasElementWithTagName = function () {
    function n(e) {
        return e._wysihtml5_identifier || (e._wysihtml5_identifier = t++)
    }
    var e = {}, t = 1;
    return function (t, r) {
        var i = n(t) + ":" + r,
            s = e[i];
        return s || (s = e[i] = t.getElementsByTagName(r)), s.length > 0
    }
}(),
function (e) {
    function r(e) {
        return e._wysihtml5_identifier || (e._wysihtml5_identifier = n++)
    }
    var t = {}, n = 1;
    e.dom.hasElementWithClassName = function (n, i) {
        if (!e.browser.supportsNativeGetElementsByClassName()) return !!n.querySelector("." + i);
        var s = r(n) + ":" + i,
            o = t[s];
        return o || (o = t[s] = n.getElementsByClassName(i)), o.length > 0
    }
}(wysihtml5), wysihtml5.dom.insert = function (e) {
    return {
        after: function (t) {
            t.parentNode.insertBefore(e, t.nextSibling)
        },
        before: function (t) {
            t.parentNode.insertBefore(e, t)
        },
        into: function (t) {
            t.appendChild(e)
        }
    }
}, wysihtml5.dom.insertCSS = function (e) {
    return e = e.join("\n"), {
        into: function (t) {
            var n = t.createElement("style");
            n.type = "text/css", n.styleSheet ? n.styleSheet.cssText = e : n.appendChild(t.createTextNode(e));
            var r = t.querySelector("head link");
            if (r) {
                r.parentNode.insertBefore(n, r);
                return
            }
            var i = t.querySelector("head");
            i && i.appendChild(n)
        }
    }
}, wysihtml5.dom.observe = function (e, t, n) {
    t = typeof t == "string" ? [t] : t;
    var r, i, s = 0,
        o = t.length;
    for (; s < o; s++) i = t[s], e.addEventListener ? e.addEventListener(i, n, !1) : (r = function (t) {
        "target" in t || (t.target = t.srcElement), t.preventDefault = t.preventDefault || function () {
            this.returnValue = !1
        }, t.stopPropagation = t.stopPropagation || function () {
            this.cancelBubble = !0
        }, n.call(e, t)
    }, e.attachEvent("on" + i, r));
    return {
        stop: function () {
            var i, s = 0,
                o = t.length;
            for (; s < o; s++) i = t[s], e.removeEventListener ? e.removeEventListener(i, n, !1) : e.detachEvent("on" + i, r)
        }
    }
}, wysihtml5.dom.parse = function () {
    function s(e, t, n, s) {
        wysihtml5.lang.object(i).merge(r).merge(t).get(), n = n || e.ownerDocument || document;
        var u = n.createDocumentFragment(),
            a = typeof e == "string",
            f, l, c;
        a ? f = wysihtml5.dom.getAsDom(e, n) : f = e;
        while (f.firstChild) c = f.firstChild, l = o(c, s), f.removeChild(c), l && u.appendChild(l);
        return f.innerHTML = "", f.appendChild(u), a ? wysihtml5.quirks.getCorrectInnerHTML(f) : f
    }

    function o(n, r) {
        var i = n.nodeType,
            s = n.childNodes,
            u = s.length,
            a = e[i],
            f = 0,
            l, c, h;
        c = a && a(n);
        if (!c) return null;
        for (f = 0; f < u; f++) h = o(s[f], r), h && c.appendChild(h);
        if (r && c.nodeName.toLowerCase() === t && (!c.childNodes.length || !c.attributes.length)) {
            l = c.ownerDocument.createDocumentFragment();
            while (c.firstChild) l.appendChild(c.firstChild);
            return l
        }
        return c
    }

    function u(e) {
        var n, r, s = i.tags,
            o = e.nodeName.toLowerCase(),
            u = e.scopeName;
        if (e._wysihtml5) return null;
        e._wysihtml5 = 1;
        if (e.className === "wysihtml5-temp") return null;
        u && u != "HTML" && (o = u + ":" + o), "outerHTML" in e && !wysihtml5.browser.autoClosesUnclosedTags() && e.nodeName === "P" && e.outerHTML.slice(-4).toLowerCase() !== "</p>" && (o = "div");
        if (o in s) {
            n = s[o];
            if (!n || n.remove) return null;
            n = typeof n == "string" ? {
                rename_tag: n
            } : n
        } else {
            if (!e.firstChild) return null;
            n = {
                rename_tag: t
            }
        }
        return r = e.ownerDocument.createElement(n.rename_tag || o), a(e, r, n), e = null, r
    }

    function a(e, t, r) {
        var s = {}, o = r.set_class,
            u = r.add_class,
            a = r.set_attributes,
            f = r.check_attributes,
            c = i.classes,
            h = 0,
            p = [],
            m = [],
            g = [],
            y = [],
            b, w, E, S, x, T, N;
        a && (s = wysihtml5.lang.object(a).clone());
        if (f)
            for (x in f) {
                N = d[f[x]];
                if (!N) continue;
                T = N(l(e, x)), typeof T == "string" && (s[x] = T)
        }
        o && p.push(o);
        if (u)
            for (x in u) {
                N = v[u[x]];
                if (!N) continue;
                S = N(l(e, x)), typeof S == "string" && p.push(S)
        }
        c["_wysihtml5-temp-placeholder"] = 1, y = e.getAttribute("class"), y && (p = p.concat(y.split(n))), b = p.length;
        for (; h < b; h++) E = p[h], c[E] && m.push(E);
        w = m.length;
        while (w--) E = m[w], wysihtml5.lang.array(g).contains(E) || g.unshift(E);
        g.length && (s["class"] = g.join(" "));
        for (x in s) try {
            t.setAttribute(x, s[x])
        } catch (C) {}
        s.src && (typeof s.width != "undefined" && t.setAttribute("width", s.width), typeof s.height != "undefined" && t.setAttribute("height", s.height))
    }

    function l(e, t) {
        t = t.toLowerCase();
        var n = e.nodeName;
        if (n == "IMG" && t == "src" && c(e) === !0) return e.src;
        if (f && "outerHTML" in e) {
            var r = e.outerHTML.toLowerCase(),
                i = r.indexOf(" " + t + "=") != -1;
            return i ? e.getAttribute(t) : null
        }
        return e.getAttribute(t)
    }

    function c(e) {
        try {
            return e.complete && !e.mozMatchesSelector(":-moz-broken")
        } catch (t) {
            if (e.complete && e.readyState === "complete") return !0
        }
    }

    function p(e) {
        var t = e.nextSibling;
        if (!t || t.nodeType !== wysihtml5.TEXT_NODE) {
            var n = e.data.replace(h, "");
            return e.ownerDocument.createTextNode(n)
        }
        t.data = e.data + t.data
    }
    var e = {
        1: u,
        3: p
    }, t = "span",
        n = /\s+/,
        r = {
            tags: {},
            classes: {}
        }, i = {}, f = !wysihtml5.browser.supportsGetAttributeCorrectly(),
        h = /\uFEFF/g,
        d = {
            url: function () {
                var e = /^https?:\/\//i;
                return function (t) {
                    return !t || !t.match(e) ? null : t.replace(e, function (e) {
                        return e.toLowerCase()
                    })
                }
            }(),
            src: function () {
                var e = /^(\/|https?:\/\/)/i;
                return function (t) {
                    return !t || !t.match(e) ? null : t.replace(e, function (e) {
                        return e.toLowerCase()
                    })
                }
            }(),
            href: function () {
                var e = /^(\/|https?:\/\/|mailto:)/i;
                return function (t) {
                    return !t || !t.match(e) ? null : t.replace(e, function (e) {
                        return e.toLowerCase()
                    })
                }
            }(),
            alt: function () {
                var e = /[^ a-z0-9_\-]/gi;
                return function (t) {
                    return t ? t.replace(e, "") : ""
                }
            }(),
            numbers: function () {
                var e = /\D/g;
                return function (t) {
                    return t = (t || "").replace(e, ""), t || null
                }
            }()
        }, v = {
            align_img: function () {
                var e = {
                    left: "wysiwyg-float-left",
                    right: "wysiwyg-float-right"
                };
                return function (t) {
                    return e[String(t).toLowerCase()]
                }
            }(),
            align_text: function () {
                var e = {
                    left: "wysiwyg-text-align-left",
                    right: "wysiwyg-text-align-right",
                    center: "wysiwyg-text-align-center",
                    justify: "wysiwyg-text-align-justify"
                };
                return function (t) {
                    return e[String(t).toLowerCase()]
                }
            }(),
            clear_br: function () {
                var e = {
                    left: "wysiwyg-clear-left",
                    right: "wysiwyg-clear-right",
                    both: "wysiwyg-clear-both",
                    all: "wysiwyg-clear-both"
                };
                return function (t) {
                    return e[String(t).toLowerCase()]
                }
            }(),
            size_font: function () {
                var e = {
                    1: "wysiwyg-font-size-xx-small",
                    2: "wysiwyg-font-size-small",
                    3: "wysiwyg-font-size-medium",
                    4: "wysiwyg-font-size-large",
                    5: "wysiwyg-font-size-x-large",
                    6: "wysiwyg-font-size-xx-large",
                    7: "wysiwyg-font-size-xx-large",
                    "-": "wysiwyg-font-size-smaller",
                    "+": "wysiwyg-font-size-larger"
                };
                return function (t) {
                    return e[String(t).charAt(0)]
                }
            }()
        };
    return s
}(), wysihtml5.dom.removeEmptyTextNodes = function (e) {
    var t, n = wysihtml5.lang.array(e.childNodes).get(),
        r = n.length,
        i = 0;
    for (; i < r; i++) t = n[i], t.nodeType === wysihtml5.TEXT_NODE && t.data === "" && t.parentNode.removeChild(t)
}, wysihtml5.dom.renameElement = function (e, t) {
    var n = e.ownerDocument.createElement(t),
        r;
    while (r = e.firstChild) n.appendChild(r);
    return wysihtml5.dom.copyAttributes(["align", "className"]).from(e).to(n), e.parentNode.replaceChild(n, e), n
}, wysihtml5.dom.replaceWithChildNodes = function (e) {
    if (!e.parentNode) return;
    if (!e.firstChild) {
        e.parentNode.removeChild(e);
        return
    }
    var t = e.ownerDocument.createDocumentFragment();
    while (e.firstChild) t.appendChild(e.firstChild);
    e.parentNode.replaceChild(t, e), e = t = null
},
function (e) {
    function t(t) {
        return e.getStyle("display").from(t) === "block"
    }

    function n(e) {
        return e.nodeName === "BR"
    }

    function r(e) {
        var t = e.ownerDocument.createElement("br");
        e.appendChild(t)
    }

    function i(e, i) {
        if (!e.nodeName.match(/^(MENU|UL|OL)$/)) return;
        var s = e.ownerDocument,
            o = s.createDocumentFragment(),
            u = e.previousElementSibling || e.previousSibling,
            a, f, l, c, h, p;
        if (i) {
            u && !t(u) && r(o);
            while (p = e.firstElementChild || e.firstChild) {
                f = p.lastChild;
                while (a = p.firstChild) l = a === f, c = l && !t(a) && !n(a), o.appendChild(a), c && r(o);
                p.parentNode.removeChild(p)
            }
        } else
            while (p = e.firstElementChild || e.firstChild) {
                if (p.querySelector && p.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))
                    while (a = p.firstChild) o.appendChild(a);
                else {
                    h = s.createElement("p");
                    while (a = p.firstChild) h.appendChild(a);
                    o.appendChild(h)
                }
                p.parentNode.removeChild(p)
        }
        e.parentNode.replaceChild(o, e)
    }
    e.resolveList = i
}(wysihtml5.dom),
function (e) {
    var t = document,
        n = ["parent", "top", "opener", "frameElement", "frames", "localStorage", "globalStorage", "sessionStorage", "indexedDB"],
        r = ["open", "close", "openDialog", "showModalDialog", "alert", "confirm", "prompt", "openDatabase", "postMessage", "XMLHttpRequest", "XDomainRequest"],
        i = ["referrer", "write", "open", "close"];
    e.dom.Sandbox = Base.extend({
            constructor: function (t, n) {
                this.callback = t || e.EMPTY_FUNCTION, this.config = e.lang.object({}).merge(n).get(), this.iframe = this._createIframe()
            },
            insertInto: function (e) {
                typeof e == "string" && (e = t.getElementById(e)), e.appendChild(this.iframe)
            },
            getIframe: function () {
                return this.iframe
            },
            getWindow: function () {
                this._readyError()
            },
            getDocument: function () {
                this._readyError()
            },
            destroy: function () {
                var e = this.getIframe();
                e.parentNode.removeChild(e)
            },
            _readyError: function () {
                throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")
            },
            _createIframe: function () {
                var n = this,
                    r = t.createElement("iframe");
                return r.className = "wysihtml5-sandbox", e.dom.setAttributes({
                        security: "restricted",
                        allowtransparency: "true",
                        frameborder: 0,
                        width: 0,
                        height: 0,
                        marginwidth: 0,
                        marginheight: 0
                    }).on(r), e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty() && (r.src = "javascript:'<html></html>'"), r.onload = function () {
                    r.onreadystatechange = r.onload = null, n._onLoadIframe(r)
                }, r.onreadystatechange = function () {
                    /loaded|complete/.test(r.readyState) && (r.onreadystatechange = r.onload = null, n._onLoadIframe(r))
                }, r
            },
            _onLoadIframe: function (s) {
                if (!e.dom.contains(t.documentElement, s)) return;
                var o = this,
                    u = s.contentWindow,
                    a = s.contentWindow.document,
                    f = t.characterSet || t.charset || "utf-8",
                    l = this._getHtml({
                            charset: f,
                            stylesheets: this.config.stylesheets
                        });
                a.open("text/html", "replace"), a.write(l), a.close(), this.getWindow = function () {
                    return s.contentWindow
                }, this.getDocument = function () {
                    return s.contentWindow.document
                }, u.onerror = function (e, t, n) {
                    throw new Error("wysihtml5.Sandbox: " + e, t, n)
                };
                if (!e.browser.supportsSandboxedIframes()) {
                    var c, h;
                    for (c = 0, h = n.length; c < h; c++) this._unset(u, n[c]);
                    for (c = 0, h = r.length; c < h; c++) this._unset(u, r[c], e.EMPTY_FUNCTION);
                    for (c = 0, h = i.length; c < h; c++) this._unset(a, i[c]);
                    this._unset(a, "cookie", "", !0)
                }
                this.loaded = !0, setTimeout(function () {
                    o.callback(o)
                }, 0)
            },
            _getHtml: function (t) {
                var n = t.stylesheets,
                    r = "",
                    i = 0,
                    s;
                n = typeof n == "string" ? [n] : n;
                if (n) {
                    s = n.length;
                    for (; i < s; i++) r += '<link rel="stylesheet" href="' + n[i] + '">'
                }
                return t.stylesheets = r, e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)
            },
            _unset: function (t, n, r, i) {
                try {
                    t[n] = r
                } catch (s) {}
                try {
                    t.__defineGetter__(n, function () {
                        return r
                    })
                } catch (s) {}
                if (i) try {
                    t.__defineSetter__(n, function () {})
                } catch (s) {}
                if (!e.browser.crashesWhenDefineProperty(n)) try {
                    var o = {
                        get: function () {
                            return r
                        }
                    };
                    i && (o.set = function () {}), Object.defineProperty(t, n, o)
                } catch (s) {}
            }
        })
}(wysihtml5),
function () {
    var e = {
        className: "class"
    };
    wysihtml5.dom.setAttributes = function (t) {
        return {
            on: function (n) {
                for (var r in t) n.setAttribute(e[r] || r, t[r])
            }
        }
    }
}(), wysihtml5.dom.setStyles = function (e) {
    return {
        on: function (t) {
            var n = t.style;
            if (typeof e == "string") {
                n.cssText += ";" + e;
                return
            }
            for (var r in e) r === "float" ? (n.cssFloat = e[r], n.styleFloat = e[r]) : n[r] = e[r]
        }
    }
},
function (e) {
    e.simulatePlaceholder = function (t, n, r) {
        var i = "placeholder",
            s = function () {
                n.hasPlaceholderSet() && n.clear(), n.placeholderSet = !1, e.removeClass(n.element, i)
            }, o = function () {
                n.isEmpty() && (n.placeholderSet = !0, n.setValue(r), e.addClass(n.element, i))
            };
        t.on("set_placeholder", o).on("unset_placeholder", s).on("focus:composer", s).on("paste:composer", s).on("blur:composer", o), o()
    }
}(wysihtml5.dom),
function (e) {
    var t = document.documentElement;
    "textContent" in t ? (e.setTextContent = function (e, t) {
        e.textContent = t
    }, e.getTextContent = function (e) {
        return e.textContent
    }) : "innerText" in t ? (e.setTextContent = function (e, t) {
        e.innerText = t
    }, e.getTextContent = function (e) {
        return e.innerText
    }) : (e.setTextContent = function (e, t) {
        e.nodeValue = t
    }, e.getTextContent = function (e) {
        return e.nodeValue
    })
}(wysihtml5.dom), wysihtml5.quirks.cleanPastedHTML = function () {
    function t(t, n, r) {
        n = n || e, r = r || t.ownerDocument || document;
        var i, s = typeof t == "string",
            o, u, a, f, l = 0;
        s ? i = wysihtml5.dom.getAsDom(t, r) : i = t;
        for (f in n) {
            u = i.querySelectorAll(f), o = n[f], a = u.length;
            for (; l < a; l++) o(u[l])
        }
        return u = t = n = null, s ? i.innerHTML : i
    }
    var e = {
        "a u": wysihtml5.dom.replaceWithChildNodes
    };
    return t
}(), wysihtml5.quirks.ensureProperClearing = function () {
    var e = function () {
        var e = this;
        setTimeout(function () {
            var t = e.innerHTML.toLowerCase();
            if (t == "<p>&nbsp;</p>" || t == "<p>&nbsp;</p><p>&nbsp;</p>") e.innerHTML = ""
        }, 0)
    };
    return function (t) {
        wysihtml5.dom.observe(t.element, ["cut", "keydown"], e)
    }
}(),
function (e) {
    var t = "%7E";
    e.quirks.getCorrectInnerHTML = function (n) {
        var r = n.innerHTML;
        if (r.indexOf(t) === -1) return r;
        var i = n.querySelectorAll("[href*='~'], [src*='~']"),
            s, o, u, a;
        for (a = 0, u = i.length; a < u; a++) s = i[a].href || i[a].src, o = e.lang.string(s).replace("~").by(t), r = e.lang.string(r).replace(o).by(s);
        return r
    }
}(wysihtml5),
function (e) {
    var t = "wysihtml5-quirks-redraw";
    e.quirks.redraw = function (n) {
        e.dom.addClass(n, t), e.dom.removeClass(n, t);
        try {
            var r = n.ownerDocument;
            r.execCommand("italic", !1, null), r.execCommand("italic", !1, null)
        } catch (i) {}
    }
}(wysihtml5),
function (e) {
    function n(e) {
        var t = 0;
        if (e.parentNode)
            do t += e.offsetTop || 0, e = e.offsetParent; while (e);
        return t
    }
    var t = e.dom;
    e.Selection = Base.extend({
            constructor: function (e) {
                window.rangy.init(), this.editor = e, this.composer = e.composer, this.doc = this.composer.doc
            },
            getBookmark: function () {
                var e = this.getRange();
                return e && e.cloneRange()
            },
            setBookmark: function (e) {
                if (!e) return;
                this.setSelection(e)
            },
            setBefore: function (e) {
                var t = rangy.createRange(this.doc);
                return t.setStartBefore(e), t.setEndBefore(e), this.setSelection(t)
            },
            setAfter: function (e) {
                var t = rangy.createRange(this.doc);
                return t.setStartAfter(e), t.setEndAfter(e), this.setSelection(t)
            },
            selectNode: function (n, r) {
                var i = rangy.createRange(this.doc),
                    s = n.nodeType === e.ELEMENT_NODE,
                    o = "canHaveHTML" in n ? n.canHaveHTML : n.nodeName !== "IMG",
                    u = s ? n.innerHTML : n.data,
                    a = u === "" || u === e.INVISIBLE_SPACE,
                    f = t.getStyle("display").from(n),
                    l = f === "block" || f === "list-item";
                if (a && s && o && !r) try {
                    n.innerHTML = e.INVISIBLE_SPACE
                } catch (c) {}
                o ? i.selectNodeContents(n) : i.selectNode(n), o && a && s ? i.collapse(l) : o && a && (i.setStartAfter(n), i.setEndAfter(n)), this.setSelection(i)
            },
            getSelectedNode: function (e) {
                var t, n;
                if (e && this.doc.selection && this.doc.selection.type === "Control") {
                    n = this.doc.selection.createRange();
                    if (n && n.length) return n.item(0)
                }
                return t = this.getSelection(this.doc), t.focusNode === t.anchorNode ? t.focusNode : (n = this.getRange(this.doc), n ? n.commonAncestorContainer : this.doc.body)
            },
            executeAndRestore: function (n, r) {
                var i = this.doc.body,
                    s = r && i.scrollTop,
                    o = r && i.scrollLeft,
                    u = "_wysihtml5-temp-placeholder",
                    a = '<span class="' + u + '">' + e.INVISIBLE_SPACE + "</span>",
                    f = this.getRange(this.doc),
                    l, c, h, p, d;
                if (!f) {
                    n(i, i);
                    return
                }
                e.browser.hasInsertNodeIssue() ? this.doc.execCommand("insertHTML", !1, a) : (p = f.createContextualFragment(a), f.insertNode(p));
                try {
                    n(f.startContainer, f.endContainer)
                } catch (v) {
                    setTimeout(function () {
                        throw v
                    }, 0)
                }
                l = this.doc.querySelector("." + u), l ? (d = rangy.createRange(this.doc), h = l.nextSibling, e.browser.hasInsertNodeIssue() && h && h.nodeName === "BR" ? (c = this.doc.createTextNode(e.INVISIBLE_SPACE), t.insert(c).after(l), d.setStartBefore(c), d.setEndBefore(c)) : (d.selectNode(l), d.deleteContents()), this.setSelection(d)) : i.focus(), r && (i.scrollTop = s, i.scrollLeft = o);
                try {
                    l.parentNode.removeChild(l)
                } catch (m) {}
            },
            executeAndRestoreSimple: function (e) {
                var t = this.getRange(),
                    n = this.doc.body,
                    r, i, s, o, u;
                if (!t) {
                    e(n, n);
                    return
                }
                o = t.getNodes([3]), i = o[0] || t.startContainer, s = o[o.length - 1] || t.endContainer, u = {
                    collapsed: t.collapsed,
                    startContainer: i,
                    startOffset: i === t.startContainer ? t.startOffset : 0,
                    endContainer: s,
                    endOffset: s === t.endContainer ? t.endOffset : s.length
                };
                try {
                    e(t.startContainer, t.endContainer)
                } catch (a) {
                    setTimeout(function () {
                        throw a
                    }, 0)
                }
                r = rangy.createRange(this.doc);
                try {
                    r.setStart(u.startContainer, u.startOffset)
                } catch (f) {}
                try {
                    r.setEnd(u.endContainer, u.endOffset)
                } catch (l) {}
                try {
                    this.setSelection(r)
                } catch (c) {}
            },
            set: function (e, t) {
                var n = rangy.createRange(this.doc);
                n.setStart(e, t || 0), this.setSelection(n)
            },
            insertHTML: function (e) {
                var t = rangy.createRange(this.doc),
                    n = t.createContextualFragment(e),
                    r = n.lastChild;
                this.insertNode(n), r && this.setAfter(r)
            },
            insertNode: function (e) {
                var t = this.getRange();
                t && t.insertNode(e)
            },
            surround: function (e) {
                var t = this.getRange();
                if (!t) return;
                try {
                    t.surroundContents(e), this.selectNode(e)
                } catch (n) {
                    e.appendChild(t.extractContents()), t.insertNode(e)
                }
            },
            scrollIntoView: function () {
                var t = this.doc,
                    r = 5,
                    i = t.documentElement.scrollHeight > t.documentElement.offsetHeight,
                    s = t._wysihtml5ScrollIntoViewElement = t._wysihtml5ScrollIntoViewElement || function () {
                        var n = t.createElement("span");
                        return n.innerHTML = e.INVISIBLE_SPACE, n
                    }(),
                    o;
                i && (this.insertNode(s), o = n(s), s.parentNode.removeChild(s), o >= t.body.scrollTop + t.documentElement.offsetHeight - r && (t.body.scrollTop = o))
            },
            selectLine: function () {
                e.browser.supportsSelectionModify() ? this._selectLine_W3C() : this.doc.selection && this._selectLine_MSIE()
            },
            _selectLine_W3C: function () {
                var e = this.doc.defaultView,
                    t = e.getSelection();
                t.modify("extend", "left", "lineboundary"), t.modify("extend", "right", "lineboundary")
            },
            _selectLine_MSIE: function () {
                var e = this.doc.selection.createRange(),
                    t = e.boundingTop,
                    n = this.doc.body.scrollWidth,
                    r, i, s, o, u;
                if (!e.moveToPoint) return;
                t === 0 && (s = this.doc.createElement("span"), this.insertNode(s), t = s.offsetTop, s.parentNode.removeChild(s)), t += 1;
                for (o = -10; o < n; o += 2) try {
                    e.moveToPoint(o, t);
                    break
                } catch (a) {}
                r = t, i = this.doc.selection.createRange();
                for (u = n; u >= 0; u--) try {
                    i.moveToPoint(u, r);
                    break
                } catch (f) {}
                e.setEndPoint("EndToEnd", i), e.select()
            },
            getText: function () {
                var e = this.getSelection();
                return e ? e.toString() : ""
            },
            getNodes: function (e, t) {
                var n = this.getRange();
                return n ? n.getNodes([e], t) : []
            },
            getRange: function () {
                var e = this.getSelection();
                return e && e.rangeCount && e.getRangeAt(0)
            },
            getSelection: function () {
                return rangy.getSelection(this.doc.defaultView || this.doc.parentWindow)
            },
            setSelection: function (e) {
                var t = this.doc.defaultView || this.doc.parentWindow,
                    n = rangy.getSelection(t);
                return n.setSingleRange(e)
            }
        })
}(wysihtml5),
function (e, t) {
    function i(e, t, n) {
        if (!e.className) return !1;
        var r = e.className.match(n) || [];
        return r[r.length - 1] === t
    }

    function s(e, t, n) {
        e.className ? (o(e, n), e.className += " " + t) : e.className = t
    }

    function o(e, t) {
        e.className && (e.className = e.className.replace(t, ""))
    }

    function u(e, t) {
        return e.className.replace(r, " ") == t.className.replace(r, " ")
    }

    function a(e) {
        var t = e.parentNode;
        while (e.firstChild) t.insertBefore(e.firstChild, e);
        t.removeChild(e)
    }

    function f(e, t) {
        if (e.attributes.length != t.attributes.length) return !1;
        for (var n = 0, r = e.attributes.length, i, s, o; n < r; ++n) {
            i = e.attributes[n], o = i.name;
            if (o != "class") {
                s = t.attributes.getNamedItem(o);
                if (i.specified != s.specified) return !1;
                if (i.specified && i.nodeValue !== s.nodeValue) return !1
            }
        }
        return !0
    }

    function l(e, n) {
        return t.dom.isCharacterDataNode(e) ? n == 0 ? !! e.previousSibling : n == e.length ? !! e.nextSibling : !0 : n > 0 && n < e.childNodes.length
    }

    function c(e, n, r) {
        var i;
        t.dom.isCharacterDataNode(n) && (r == 0 ? (r = t.dom.getNodeIndex(n), n = n.parentNode) : r == n.length ? (r = t.dom.getNodeIndex(n) + 1, n = n.parentNode) : i = t.dom.splitDataNode(n, r));
        if (!i) {
            i = n.cloneNode(!1), i.id && i.removeAttribute("id");
            var s;
            while (s = n.childNodes[r]) i.appendChild(s);
            t.dom.insertAfter(i, n)
        }
        return n == e ? i : c(e, i.parentNode, t.dom.getNodeIndex(i))
    }

    function h(t) {
        this.isElementMerge = t.nodeType == e.ELEMENT_NODE, this.firstTextNode = this.isElementMerge ? t.lastChild : t, this.textNodes = [this.firstTextNode]
    }

    function p(e, t, r, i) {
        this.tagNames = e || [n], this.cssClass = t || "", this.similarClassRegExp = r, this.normalize = i, this.applyToAnyTagName = !1
    }
    var n = "span",
        r = /\s+/g;
    h.prototype = {
        doMerge: function () {
            var e = [],
                t, n, r;
            for (var i = 0, s = this.textNodes.length; i < s; ++i) t = this.textNodes[i], n = t.parentNode, e[i] = t.data, i && (n.removeChild(t), n.hasChildNodes() || n.parentNode.removeChild(n));
            return this.firstTextNode.data = r = e.join(""), r
        },
        getLength: function () {
            var e = this.textNodes.length,
                t = 0;
            while (e--) t += this.textNodes[e].length;
            return t
        },
        toString: function () {
            var e = [];
            for (var t = 0, n = this.textNodes.length; t < n; ++t) e[t] = "'" + this.textNodes[t].data + "'";
            return "[Merge(" + e.join(",") + ")]"
        }
    }, p.prototype = {
        getAncestorWithClass: function (n) {
            var r;
            while (n) {
                r = this.cssClass ? i(n, this.cssClass, this.similarClassRegExp) : !0;
                if (n.nodeType == e.ELEMENT_NODE && t.dom.arrayContains(this.tagNames, n.tagName.toLowerCase()) && r) return n;
                n = n.parentNode
            }
            return !1
        },
        postApply: function (e, t) {
            var n = e[0],
                r = e[e.length - 1],
                i = [],
                s, o = n,
                u = r,
                a = 0,
                f = r.length,
                l, c;
            for (var p = 0, d = e.length; p < d; ++p) l = e[p], c = this.getAdjacentMergeableTextNode(l.parentNode, !1), c ? (s || (s = new h(c), i.push(s)), s.textNodes.push(l), l === n && (o = s.firstTextNode, a = o.length), l === r && (u = s.firstTextNode, f = s.getLength())) : s = null;
            var v = this.getAdjacentMergeableTextNode(r.parentNode, !0);
            v && (s || (s = new h(r), i.push(s)), s.textNodes.push(v));
            if (i.length) {
                for (p = 0, d = i.length; p < d; ++p) i[p].doMerge();
                t.setStart(o, a), t.setEnd(u, f)
            }
        },
        getAdjacentMergeableTextNode: function (t, n) {
            var r = t.nodeType == e.TEXT_NODE,
                i = r ? t.parentNode : t,
                s, o = n ? "nextSibling" : "previousSibling";
            if (r) {
                s = t[o];
                if (s && s.nodeType == e.TEXT_NODE) return s
            } else {
                s = i[o];
                if (s && this.areElementsMergeable(t, s)) return s[n ? "firstChild" : "lastChild"]
            }
            return null
        },
        areElementsMergeable: function (e, n) {
            return t.dom.arrayContains(this.tagNames, (e.tagName || "").toLowerCase()) && t.dom.arrayContains(this.tagNames, (n.tagName || "").toLowerCase()) && u(e, n) && f(e, n)
        },
        createContainer: function (e) {
            var t = e.createElement(this.tagNames[0]);
            return this.cssClass && (t.className = this.cssClass), t
        },
        applyToTextNode: function (e) {
            var n = e.parentNode;
            if (n.childNodes.length == 1 && t.dom.arrayContains(this.tagNames, n.tagName.toLowerCase())) this.cssClass && s(n, this.cssClass, this.similarClassRegExp);
            else {
                var r = this.createContainer(t.dom.getDocument(e));
                e.parentNode.insertBefore(r, e), r.appendChild(e)
            }
        },
        isRemovable: function (n) {
            return t.dom.arrayContains(this.tagNames, n.tagName.toLowerCase()) && e.lang.string(n.className).trim() == this.cssClass
        },
        undoToTextNode: function (e, t, n) {
            if (!t.containsNode(n)) {
                var r = t.cloneRange();
                r.selectNode(n), r.isPointInRange(t.endContainer, t.endOffset) && l(t.endContainer, t.endOffset) && (c(n, t.endContainer, t.endOffset), t.setEndAfter(n)), r.isPointInRange(t.startContainer, t.startOffset) && l(t.startContainer, t.startOffset) && (n = c(n, t.startContainer, t.startOffset))
            }
            this.similarClassRegExp && o(n, this.similarClassRegExp), this.isRemovable(n) && a(n)
        },
        applyToRange: function (t) {
            var n = t.getNodes([e.TEXT_NODE]);
            if (!n.length) try {
                var r = this.createContainer(t.endContainer.ownerDocument);
                t.surroundContents(r), this.selectNode(t, r);
                return
            } catch (i) {}
            t.splitBoundaries(), n = t.getNodes([e.TEXT_NODE]);
            if (n.length) {
                var s;
                for (var o = 0, u = n.length; o < u; ++o) s = n[o], this.getAncestorWithClass(s) || this.applyToTextNode(s);
                t.setStart(n[0], 0), s = n[n.length - 1], t.setEnd(s, s.length), this.normalize && this.postApply(n, t)
            }
        },
        undoToRange: function (t) {
            var n = t.getNodes([e.TEXT_NODE]),
                r, i;
            if (n.length) t.splitBoundaries(), n = t.getNodes([e.TEXT_NODE]);
            else {
                var s = t.endContainer.ownerDocument,
                    o = s.createTextNode(e.INVISIBLE_SPACE);
                t.insertNode(o), t.selectNode(o), n = [o]
            }
            for (var u = 0, a = n.length; u < a; ++u) r = n[u], i = this.getAncestorWithClass(r), i && this.undoToTextNode(r, t, i);
            a == 1 ? this.selectNode(t, n[0]) : (t.setStart(n[0], 0), r = n[n.length - 1], t.setEnd(r, r.length), this.normalize && this.postApply(n, t))
        },
        selectNode: function (t, n) {
            var r = n.nodeType === e.ELEMENT_NODE,
                i = "canHaveHTML" in n ? n.canHaveHTML : !0,
                s = r ? n.innerHTML : n.data,
                o = s === "" || s === e.INVISIBLE_SPACE;
            if (o && r && i) try {
                n.innerHTML = e.INVISIBLE_SPACE
            } catch (u) {}
            t.selectNodeContents(n), o && r ? t.collapse(!1) : o && (t.setStartAfter(n), t.setEndAfter(n))
        },
        getTextSelectedByRange: function (e, t) {
            var n = t.cloneRange();
            n.selectNodeContents(e);
            var r = n.intersection(t),
                i = r ? r.toString() : "";
            return n.detach(), i
        },
        isAppliedToRange: function (t) {
            var n = [],
                r, i = t.getNodes([e.TEXT_NODE]);
            if (!i.length) return r = this.getAncestorWithClass(t.startContainer), r ? [r] : !1;
            for (var s = 0, o = i.length, u; s < o; ++s) {
                u = this.getTextSelectedByRange(i[s], t), r = this.getAncestorWithClass(i[s]);
                if (u != "" && !r) return !1;
                n.push(r)
            }
            return n
        },
        toggleRange: function (e) {
            this.isAppliedToRange(e) ? this.undoToRange(e) : this.applyToRange(e)
        }
    }, e.selection.HTMLApplier = p
}(wysihtml5, rangy), wysihtml5.Commands = Base.extend({
        constructor: function (e) {
            this.editor = e, this.composer = e.composer, this.doc = this.composer.doc
        },
        support: function (e) {
            return wysihtml5.browser.supportsCommand(this.doc, e)
        },
        exec: function (e, t) {
            var n = wysihtml5.commands[e],
                r = wysihtml5.lang.array(arguments).get(),
                i = n && n.exec,
                s = null;
            this.editor.fire("beforecommand:composer");
            if (i) r.unshift(this.composer), s = i.apply(n, r);
            else try {
                s = this.doc.execCommand(e, !1, t)
            } catch (o) {}
            return this.editor.fire("aftercommand:composer"), s
        },
        state: function (e, t) {
            var n = wysihtml5.commands[e],
                r = wysihtml5.lang.array(arguments).get(),
                i = n && n.state;
            if (i) return r.unshift(this.composer), i.apply(n, r);
            try {
                return this.doc.queryCommandState(e)
            } catch (s) {
                return !1
            }
        }
    }), wysihtml5.commands.bold = {
    exec: function (e, t) {
        return wysihtml5.commands.formatInline.exec(e, t, "b")
    },
    state: function (e, t) {
        return wysihtml5.commands.formatInline.state(e, t, "b")
    }
},
function (e) {
    function i(e, t) {
        var n = t.length,
            i = 0,
            s, o, u;
        for (; i < n; i++) s = t[i], o = r.getParentElement(s, {
                nodeName: "code"
            }), u = r.getTextContent(s), u.match(r.autoLink.URL_REG_EXP) && !o ? o = r.renameElement(s, "code") : r.replaceWithChildNodes(s)
    }

    function s(i, s) {
        var o = i.doc,
            u = "_wysihtml5-temp-" + +(new Date),
            a = /non-matching-class/g,
            f = 0,
            l, c, h, p, d, v, m, g, y;
        e.commands.formatInline.exec(i, t, n, u, a), c = o.querySelectorAll(n + "." + u), l = c.length;
        for (; f < l; f++) {
            h = c[f], h.removeAttribute("class");
            for (y in s) h.setAttribute(y, s[y])
        }
        v = h, l === 1 && (m = r.getTextContent(h), p = !! h.querySelector("*"), d = m === "" || m === e.INVISIBLE_SPACE, !p && d && (r.setTextContent(h, s.text || h.href), g = o.createTextNode(" "), i.selection.setAfter(h), r.insert(g).after(h), v = g)), i.selection.setAfter(v)
    }
    var t, n = "A",
        r = e.dom;
    e.commands.createLink = {
        exec: function (e, t, n) {
            var r = this.state(e, t);
            r ? e.selection.executeAndRestore(function () {
                i(e, r)
            }) : (n = typeof n == "object" ? n : {
                    href: n
                }, s(e, n))
        },
        state: function (t, n) {
            return e.commands.formatInline.state(t, n, "A")
        }
    }
}(wysihtml5),
function (e) {
    var t = /wysiwyg-font-size-[0-9a-z\-]+/g;
    e.commands.fontSize = {
        exec: function (n, r, i) {
            return e.commands.formatInline.exec(n, r, "span", "wysiwyg-font-size-" + i, t)
        },
        state: function (n, r, i) {
            return e.commands.formatInline.state(n, r, "span", "wysiwyg-font-size-" + i, t)
        }
    }
}(wysihtml5),
function (e) {
    var t = /wysiwyg-color-[0-9a-z]+/g;
    e.commands.foreColor = {
        exec: function (n, r, i) {
            return e.commands.formatInline.exec(n, r, "span", "wysiwyg-color-" + i, t)
        },
        state: function (n, r, i) {
            return e.commands.formatInline.state(n, r, "span", "wysiwyg-color-" + i, t)
        }
    }
}(wysihtml5),
function (e) {
    function r(e, t, n) {
        e.className ? (i(e, n), e.className += " " + t) : e.className = t
    }

    function i(e, t) {
        e.className = e.className.replace(t, "")
    }

    function s(t) {
        return t.nodeType === e.TEXT_NODE && !e.lang.string(t.data).trim()
    }

    function o(e) {
        var t = e.previousSibling;
        while (t && s(t)) t = t.previousSibling;
        return t
    }

    function u(e) {
        var t = e.nextSibling;
        while (t && s(t)) t = t.nextSibling;
        return t
    }

    function a(e) {
        var t = e.ownerDocument,
            n = u(e),
            r = o(e);
        n && !h(n) && e.parentNode.insertBefore(t.createElement("br"), n), r && !h(r) && e.parentNode.insertBefore(t.createElement("br"), e)
    }

    function f(e) {
        var t = u(e),
            n = o(e);
        t && c(t) && t.parentNode.removeChild(t), n && c(n) && n.parentNode.removeChild(n)
    }

    function l(e) {
        var t = e.lastChild;
        t && c(t) && t.parentNode.removeChild(t)
    }

    function c(e) {
        return e.nodeName === "BR"
    }

    function h(e) {
        return c(e) ? !0 : t.getStyle("display").from(e) === "block" ? !0 : !1
    }

    function p(n, r, i, s) {
        if (s) var o = t.observe(n, "DOMNodeInserted", function (n) {
            var r = n.target,
                i;
            if (r.nodeType !== e.ELEMENT_NODE) return;
            i = t.getStyle("display").from(r), i.substr(0, 6) !== "inline" && (r.className += " " + s)
        });
        n.execCommand(r, !1, i), o && o.stop()
    }

    function d(t, n) {
        t.selection.selectLine(), t.selection.surround(n), f(n), l(n), t.selection.selectNode(n, e.browser.displaysCaretInEmptyContentEditableCorrectly())
    }

    function v(t) {
        return !!e.lang.string(t.className).trim()
    }
    var t = e.dom,
        n = ["H1", "H2", "H3", "H4", "H5", "H6", "P", "BLOCKQUOTE", "DIV"];
    e.commands.formatBlock = {
        exec: function (e, t, n, r, i) {
            var s = this.exec2(e, t, n, r, i);
            return s || (s = this.exec2(e, t, "pre", r, i)), s
        },
        exec2: function (s, o, u, f, l) {
            var c = s.doc,
                h = this.state(s, o, u, f, l),
                m = s.config.useLineBreaks,
                g = m ? "DIV" : "P",
                y;
            u = typeof u == "string" ? u.toUpperCase() : u;
            if (h) {
                s.selection.executeAndRestoreSimple(function () {
                    l && i(h, l);
                    var e = v(h);
                    !e && (m || u === "P") ? (a(h), t.replaceWithChildNodes(h)) : t.renameElement(h, u === "P" ? "DIV" : g)
                });
                return
            }
            if (u === null || e.lang.array(n).contains(u)) {
                y = s.selection.getSelectedNode(), h = t.getParentElement(y, {
                        nodeName: n
                    });
                if (h) {
                    s.selection.executeAndRestore(function () {
                        u && (h = t.renameElement(h, u)), f && r(h, f, l)
                    });
                    return
                }
            }
            if (s.commands.support(o)) {
                p(c, o, u || g, f);
                return
            }
            h = c.createElement(u || g), f && (h.className = f), d(s, h)
        },
        state: function (e, n, r, i, s) {
            r = typeof r == "string" ? r.toUpperCase() : r;
            var o = e.selection.getSelectedNode();
            return t.getParentElement(o, {
                    nodeName: r,
                    className: i,
                    classRegExp: s
                })
        }
    }
}(wysihtml5),
function (e) {
    function r(e) {
        var n = t[e];
        return n ? [e.toLowerCase(), n.toLowerCase()] : [e.toLowerCase()]
    }

    function i(t, i, s) {
        var o = t + ":" + i;
        return n[o] || (n[o] = new e.selection.HTMLApplier(r(t), i, s, !0)), n[o]
    }
    var t = {
        strong: "b",
        em: "i",
        b: "strong",
        i: "em"
    }, n = {};
    e.commands.formatInline = {
        exec: function (e, t, n, r, s) {
            var o = e.selection.getRange();
            if (!o) return !1;
            i(n, r, s).toggleRange(o), e.selection.setSelection(o)
        },
        state: function (n, r, s, o, u) {
            var a = n.doc,
                f = t[s] || s,
                l;
            return !e.dom.hasElementWithTagName(a, s) && !e.dom.hasElementWithTagName(a, f) ? !1 : o && !e.dom.hasElementWithClassName(a, o) ? !1 : (l = n.selection.getRange(), l ? i(s, o, u).isAppliedToRange(l) : !1)
        }
    }
}(wysihtml5), wysihtml5.commands.insertHTML = {
    exec: function (e, t, n) {
        e.commands.support(t) ? e.doc.execCommand(t, !1, n) : e.selection.insertHTML(n)
    },
    state: function () {
        return !1
    }
},
function (e) {
    var t = "IMG";
    e.commands.insertImage = {
        exec: function (n, r, i) {
            i = typeof i == "object" ? i : {
                src: i
            };
            var s = n.doc,
                o = this.state(n),
                u, a;
            if (o) {
                n.selection.setBefore(o), a = o.parentNode, a.removeChild(o), e.dom.removeEmptyTextNodes(a), a.nodeName === "A" && !a.firstChild && (n.selection.setAfter(a), a.parentNode.removeChild(a)), e.quirks.redraw(n.element);
                return
            }
            o = s.createElement(t);
            for (var f in i) o.setAttribute(f === "className" ? "class" : f, i[f]);
            n.selection.insertNode(o), e.browser.hasProblemsSettingCaretAfterImg() ? (u = s.createTextNode(e.INVISIBLE_SPACE), n.selection.insertNode(u), n.selection.setAfter(u)) : n.selection.setAfter(o)
        },
        state: function (n) {
            var r = n.doc,
                i, s, o;
            return e.dom.hasElementWithTagName(r, t) ? (i = n.selection.getSelectedNode(), i ? i.nodeName === t ? i : i.nodeType !== e.ELEMENT_NODE ? !1 : (s = n.selection.getText(), s = e.lang.string(s).trim(), s ? !1 : (o = n.selection.getNodes(e.ELEMENT_NODE, function (e) {
                                return e.nodeName === "IMG"
                            }), o.length !== 1 ? !1 : o[0])) : !1) : !1
        }
    }
}(wysihtml5),
function (e) {
    var t = "<br>" + (e.browser.needsSpaceAfterLineBreak() ? " " : "");
    e.commands.insertLineBreak = {
        exec: function (n, r) {
            n.commands.support(r) ? (n.doc.execCommand(r, !1, null), e.browser.autoScrollsToCaret() || n.selection.scrollIntoView()) : n.commands.exec("insertHTML", t)
        },
        state: function () {
            return !1
        }
    }
}(wysihtml5), wysihtml5.commands.insertOrderedList = {
    exec: function (e, t) {
        var n = e.doc,
            r = e.selection.getSelectedNode(),
            i = wysihtml5.dom.getParentElement(r, {
                    nodeName: "OL"
                }),
            s = wysihtml5.dom.getParentElement(r, {
                    nodeName: "UL"
                }),
            o = "_wysihtml5-temp-" + (new Date).getTime(),
            u, a;
        if (!i && !s && e.commands.support(t)) {
            n.execCommand(t, !1, null);
            return
        }
        i ? e.selection.executeAndRestore(function () {
            wysihtml5.dom.resolveList(i, e.config.useLineBreaks)
        }) : s ? e.selection.executeAndRestore(function () {
            wysihtml5.dom.renameElement(s, "ol")
        }) : (e.commands.exec("formatBlock", "div", o), a = n.querySelector("." + o), u = a.innerHTML === "" || a.innerHTML === wysihtml5.INVISIBLE_SPACE || a.innerHTML === "<br>", e.selection.executeAndRestore(function () {
                    i = wysihtml5.dom.convertToList(a, "ol")
                }), u && e.selection.selectNode(i.querySelector("li"), !0))
    },
    state: function (e) {
        var t = e.selection.getSelectedNode();
        return wysihtml5.dom.getParentElement(t, {
                nodeName: "OL"
            })
    }
}, wysihtml5.commands.insertUnorderedList = {
    exec: function (e, t) {
        var n = e.doc,
            r = e.selection.getSelectedNode(),
            i = wysihtml5.dom.getParentElement(r, {
                    nodeName: "UL"
                }),
            s = wysihtml5.dom.getParentElement(r, {
                    nodeName: "OL"
                }),
            o = "_wysihtml5-temp-" + (new Date).getTime(),
            u, a;
        if (!i && !s && e.commands.support(t)) {
            n.execCommand(t, !1, null);
            return
        }
        i ? e.selection.executeAndRestore(function () {
            wysihtml5.dom.resolveList(i, e.config.useLineBreaks)
        }) : s ? e.selection.executeAndRestore(function () {
            wysihtml5.dom.renameElement(s, "ul")
        }) : (e.commands.exec("formatBlock", "div", o), a = n.querySelector("." + o), u = a.innerHTML === "" || a.innerHTML === wysihtml5.INVISIBLE_SPACE || a.innerHTML === "<br>", e.selection.executeAndRestore(function () {
                    i = wysihtml5.dom.convertToList(a, "ul")
                }), u && e.selection.selectNode(i.querySelector("li"), !0))
    },
    state: function (e) {
        var t = e.selection.getSelectedNode();
        return wysihtml5.dom.getParentElement(t, {
                nodeName: "UL"
            })
    }
}, wysihtml5.commands.italic = {
    exec: function (e, t) {
        return wysihtml5.commands.formatInline.exec(e, t, "i")
    },
    state: function (e, t) {
        return wysihtml5.commands.formatInline.state(e, t, "i")
    }
},
function (e) {
    var t = "wysiwyg-text-align-center",
        n = /wysiwyg-text-align-[0-9a-z]+/g;
    e.commands.justifyCenter = {
        exec: function (r, i) {
            return e.commands.formatBlock.exec(r, "formatBlock", null, t, n)
        },
        state: function (r, i) {
            return e.commands.formatBlock.state(r, "formatBlock", null, t, n)
        }
    }
}(wysihtml5),
function (e) {
    var t = "wysiwyg-text-align-left",
        n = /wysiwyg-text-align-[0-9a-z]+/g;
    e.commands.justifyLeft = {
        exec: function (r, i) {
            return e.commands.formatBlock.exec(r, "formatBlock", null, t, n)
        },
        state: function (r, i) {
            return e.commands.formatBlock.state(r, "formatBlock", null, t, n)
        }
    }
}(wysihtml5),
function (e) {
    var t = "wysiwyg-text-align-right",
        n = /wysiwyg-text-align-[0-9a-z]+/g;
    e.commands.justifyRight = {
        exec: function (r, i) {
            return e.commands.formatBlock.exec(r, "formatBlock", null, t, n)
        },
        state: function (r, i) {
            return e.commands.formatBlock.state(r, "formatBlock", null, t, n)
        }
    }
}(wysihtml5),
function (e) {
    var t = "wysiwyg-text-align-justify",
        n = /wysiwyg-text-align-[0-9a-z]+/g;
    e.commands.justifyFull = {
        exec: function (r, i) {
            return e.commands.formatBlock.exec(r, "formatBlock", null, t, n)
        },
        state: function (r, i) {
            return e.commands.formatBlock.state(r, "formatBlock", null, t, n)
        }
    }
}(wysihtml5), wysihtml5.commands.redo = {
    exec: function (e) {
        return e.undoManager.redo()
    },
    state: function (e) {
        return !1
    }
}, wysihtml5.commands.underline = {
    exec: function (e, t) {
        return wysihtml5.commands.formatInline.exec(e, t, "u")
    },
    state: function (e, t) {
        return wysihtml5.commands.formatInline.state(e, t, "u")
    }
}, wysihtml5.commands.undo = {
    exec: function (e) {
        return e.undoManager.undo()
    },
    state: function (e) {
        return !1
    }
},
function (e) {
    function c(e) {
        var t;
        while (t = e.querySelector("._wysihtml5-temp")) t.parentNode.removeChild(t)
    }
    var t = 90,
        n = 89,
        r = 8,
        i = 46,
        s = 25,
        o = "data-wysihtml5-selection-node",
        u = "data-wysihtml5-selection-offset",
        a = '<span id="_wysihtml5-undo" class="_wysihtml5-temp">' + e.INVISIBLE_SPACE + "</span>",
        f = '<span id="_wysihtml5-redo" class="_wysihtml5-temp">' + e.INVISIBLE_SPACE + "</span>",
        l = e.dom;
    e.UndoManager = e.lang.Dispatcher.extend({
            constructor: function (e) {
                this.editor = e, this.composer = e.composer, this.element = this.composer.element, this.position = 0, this.historyStr = [], this.historyDom = [], this.transact(), this._observe()
            },
            _observe: function () {
                var s = this,
                    o = this.composer.sandbox.getDocument(),
                    u;
                l.observe(this.element, "keydown", function (e) {
                    if (e.altKey || !e.ctrlKey && !e.metaKey) return;
                    var r = e.keyCode,
                        i = r === t && !e.shiftKey,
                        o = r === t && e.shiftKey || r === n;
                    i ? (s.undo(), e.preventDefault()) : o && (s.redo(), e.preventDefault())
                }), l.observe(this.element, "keydown", function (e) {
                    var t = e.keyCode;
                    if (t === u) return;
                    u = t, (t === r || t === i) && s.transact()
                });
                if (e.browser.hasUndoInContextMenu()) {
                    var h, p, d = function () {
                            c(o), clearInterval(h)
                        };
                    l.observe(this.element, "contextmenu", function () {
                        d(), s.composer.selection.executeAndRestoreSimple(function () {
                            s.element.lastChild && s.composer.selection.setAfter(s.element.lastChild), o.execCommand("insertHTML", !1, a), o.execCommand("insertHTML", !1, f), o.execCommand("undo", !1, null)
                        }), h = setInterval(function () {
                            o.getElementById("_wysihtml5-redo") ? (d(), s.redo()) : o.getElementById("_wysihtml5-undo") || (d(), s.undo())
                        }, 400), p || (p = !0, l.observe(document, "mousedown", d), l.observe(o, ["mousedown", "paste", "cut", "copy"], d))
                    })
                }
                this.editor.on("newword:composer", function () {
                    s.transact()
                }).on("beforecommand:composer", function () {
                    s.transact()
                })
            },
            transact: function () {
                var t = this.historyStr[this.position - 1],
                    n = this.composer.getValue();
                if (n === t) return;
                var r = this.historyStr.length = this.historyDom.length = this.position;
                r > s && (this.historyStr.shift(), this.historyDom.shift(), this.position--), this.position++;
                var i = this.composer.selection.getRange(),
                    a = i.startContainer || this.element,
                    f = i.startOffset || 0,
                    l, c;
                a.nodeType === e.ELEMENT_NODE ? l = a : (l = a.parentNode, c = this.getChildNodeIndex(l, a)), l.setAttribute(u, f), typeof c != "undefined" && l.setAttribute(o, c);
                var h = this.element.cloneNode( !! n);
                this.historyDom.push(h), this.historyStr.push(n), l.removeAttribute(u), l.removeAttribute(o)
            },
            undo: function () {
                this.transact();
                if (!this.undoPossible()) return;
                this.set(this.historyDom[--this.position - 1]), this.editor.fire("undo:composer")
            },
            redo: function () {
                if (!this.redoPossible()) return;
                this.set(this.historyDom[++this.position - 1]), this.editor.fire("redo:composer")
            },
            undoPossible: function () {
                return this.position > 1
            },
            redoPossible: function () {
                return this.position < this.historyStr.length
            },
            set: function (e) {
                this.element.innerHTML = "";
                var t = 0,
                    n = e.childNodes,
                    r = e.childNodes.length;
                for (; t < r; t++) this.element.appendChild(n[t].cloneNode(!0));
                var i, s, a;
                e.hasAttribute(u) ? (i = e.getAttribute(u), a = e.getAttribute(o), s = this.element) : (s = this.element.querySelector("[" + u + "]") || this.element, i = s.getAttribute(u), a = s.getAttribute(o), s.removeAttribute(u), s.removeAttribute(o)), a !== null && (s = this.getChildNodeByIndex(s, +a)), this.composer.selection.set(s, i)
            },
            getChildNodeIndex: function (e, t) {
                var n = 0,
                    r = e.childNodes,
                    i = r.length;
                for (; n < i; n++)
                    if (r[n] === t) return n
            },
            getChildNodeByIndex: function (e, t) {
                return e.childNodes[t]
            }
        })
}(wysihtml5), wysihtml5.views.View = Base.extend({
        constructor: function (e, t, n) {
            this.parent = e, this.element = t, this.config = n, this._observeViewChange()
        },
        _observeViewChange: function () {
            var e = this;
            this.parent.on("beforeload", function () {
                e.parent.on("change_view", function (t) {
                    t === e.name ? (e.parent.currentView = e, e.show(), setTimeout(function () {
                                e.focus()
                            }, 0)) : e.hide()
                })
            })
        },
        focus: function () {
            if (this.element.ownerDocument.querySelector(":focus") === this.element) return;
            try {
                this.element.focus()
            } catch (e) {}
        },
        hide: function () {
            this.element.style.display = "none"
        },
        show: function () {
            this.element.style.display = ""
        },
        disable: function () {
            this.element.setAttribute("disabled", "disabled")
        },
        enable: function () {
            this.element.removeAttribute("disabled")
        }
    }),
function (e) {
    var t = e.dom,
        n = e.browser;
    e.views.Composer = e.views.View.extend({
            name: "composer",
            CARET_HACK: "<br>",
            constructor: function (e, t, n) {
                this.base(e, t, n), this.textarea = this.parent.textarea, this._initSandbox()
            },
            clear: function () {
                this.element.innerHTML = n.displaysCaretInEmptyContentEditableCorrectly() ? "" : this.CARET_HACK
            },
            getValue: function (t) {
                var n = this.isEmpty() ? "" : e.quirks.getCorrectInnerHTML(this.element);
                return t && (n = this.parent.parse(n)), n
            },
            setValue: function (e, t) {
                t && (e = this.parent.parse(e));
                try {
                    this.element.innerHTML = e
                } catch (n) {
                    this.element.innerText = e
                }
            },
            show: function () {
                this.iframe.style.display = this._displayStyle || "", this.textarea.element.disabled || (this.disable(), this.enable())
            },
            hide: function () {
                this._displayStyle = t.getStyle("display").from(this.iframe), this._displayStyle === "none" && (this._displayStyle = null), this.iframe.style.display = "none"
            },
            disable: function () {
                this.parent.fire("disable:composer"), this.element.removeAttribute("contentEditable")
            },
            enable: function () {
                this.parent.fire("enable:composer"), this.element.setAttribute("contentEditable", "true")
            },
            focus: function (t) {
                e.browser.doesAsyncFocus() && this.hasPlaceholderSet() && this.clear(), this.base();
                var n = this.element.lastChild;
                t && n && (n.nodeName === "BR" ? this.selection.setBefore(this.element.lastChild) : this.selection.setAfter(this.element.lastChild))
            },
            getTextContent: function () {
                return t.getTextContent(this.element)
            },
            hasPlaceholderSet: function () {
                return this.getTextContent() == this.textarea.element.getAttribute("placeholder") && this.placeholderSet
            },
            isEmpty: function () {
                var e = this.element.innerHTML.toLowerCase();
                return e === "" || e === "<br>" || e === "<p></p>" || e === "<p><br></p>" || this.hasPlaceholderSet()
            },
            _initSandbox: function () {
                var e = this;
                this.sandbox = new t.Sandbox(function () {
                    e._create()
                }, {
                    stylesheets: this.config.stylesheets
                }), this.iframe = this.sandbox.getIframe();
                var n = this.textarea.element;
                t.insert(this.iframe).after(n);
                if (n.form) {
                    var r = document.createElement("input");
                    r.type = "hidden", r.name = "_wysihtml5_mode", r.value = 1, t.insert(r).after(n)
                }
            },
            _create: function () {
                var r = this;
                this.doc = this.sandbox.getDocument(), this.element = this.doc.body, this.textarea = this.parent.textarea, this.element.innerHTML = this.textarea.getValue(!0), this.selection = new e.Selection(this.parent), this.commands = new e.Commands(this.parent), t.copyAttributes(["className", "spellcheck", "title", "lang", "dir", "accessKey"]).from(this.textarea.element).to(this.element), t.addClass(this.element, this.config.composerClassName), this.config.style && this.style(), this.observe();
                var i = this.config.name;
                i && (t.addClass(this.element, i), t.addClass(this.iframe, i)), this.enable(), this.textarea.element.disabled && this.disable();
                var s = typeof this.config.placeholder == "string" ? this.config.placeholder : this.textarea.element.getAttribute("placeholder");
                s && t.simulatePlaceholder(this.parent, this, s), this.commands.exec("styleWithCSS", !1), this._initAutoLinking(), this._initObjectResizing(), this._initUndoManager(), this._initLineBreaking(), (this.textarea.element.hasAttribute("autofocus") || document.querySelector(":focus") == this.textarea.element) && !n.isIos() && setTimeout(function () {
                    r.focus(!0)
                }, 100), n.clearsContentEditableCorrectly() || e.quirks.ensureProperClearing(this), this.initSync && this.config.sync && this.initSync(), this.textarea.hide(), this.parent.fire("beforeload").fire("load")
            },
            _initAutoLinking: function () {
                var r = this,
                    i = n.canDisableAutoLinking(),
                    s = n.doesAutoLinkingInContentEditable();
                i && this.commands.exec("autoUrlDetect", !1);
                if (!this.config.autoLink) return;
                if (!s || s && i) this.parent.on("newword:composer", function () {
                    t.getTextContent(r.element).match(t.autoLink.URL_REG_EXP) && r.selection.executeAndRestore(function (e, n) {
                        t.autoLink(n.parentNode)
                    })
                }), t.observe(this.element, "blur", function () {
                    t.autoLink(r.element)
                });
                var o = this.sandbox.getDocument().getElementsByTagName("a"),
                    u = t.autoLink.URL_REG_EXP,
                    a = function (n) {
                        var r = e.lang.string(t.getTextContent(n)).trim();
                        return r.substr(0, 4) === "www." && (r = "http://" + r), r
                    };
                t.observe(this.element, "keydown", function (e) {
                    if (!o.length) return;
                    var n = r.selection.getSelectedNode(e.target.ownerDocument),
                        i = t.getParentElement(n, {
                                nodeName: "A"
                            }, 4),
                        s;
                    if (!i) return;
                    s = a(i), setTimeout(function () {
                        var e = a(i);
                        if (e === s) return;
                        e.match(u) && i.setAttribute("href", e)
                    }, 0)
                })
            },
            _initObjectResizing: function () {
                this.commands.exec("enableObjectResizing", !0);
                if (n.supportsEvent("resizeend")) {
                    var r = ["width", "height"],
                        i = r.length,
                        s = this.element;
                    t.observe(s, "resizeend", function (t) {
                        var n = t.target || t.srcElement,
                            o = n.style,
                            u = 0,
                            a;
                        if (n.nodeName !== "IMG") return;
                        for (; u < i; u++) a = r[u], o[a] && (n.setAttribute(a, parseInt(o[a], 10)), o[a] = "");
                        e.quirks.redraw(s)
                    })
                }
            },
            _initUndoManager: function () {
                this.undoManager = new e.UndoManager(this.parent)
            },
            _initLineBreaking: function () {
                function o(e) {
                    var n = t.getParentElement(e, {
                            nodeName: ["P", "DIV"]
                        }, 2);
                    n && r.selection.executeAndRestore(function () {
                        r.config.useLineBreaks ? t.replaceWithChildNodes(n) : n.nodeName !== "P" && t.renameElement(n, "p")
                    })
                }
                var r = this,
                    i = ["LI", "P", "H1", "H2", "H3", "H4", "H5", "H6"],
                    s = ["UL", "OL", "MENU"];
                this.config.useLineBreaks || t.observe(this.element, ["focus", "keydown"], function () {
                    if (r.isEmpty()) {
                        var e = r.doc.createElement("P");
                        r.element.innerHTML = "", r.element.appendChild(e), n.displaysCaretInEmptyContentEditableCorrectly() ? r.selection.selectNode(e, !0) : (e.innerHTML = "<br>", r.selection.setBefore(e.firstChild))
                    }
                }), t.observe(this.doc, "keydown", function (n) {
                    var u = n.keyCode;
                    if (n.shiftKey) return;
                    if (u !== e.ENTER_KEY && u !== e.BACKSPACE_KEY) return;
                    var a = t.getParentElement(r.selection.getSelectedNode(), {
                            nodeName: i
                        }, 4);
                    if (a) {
                        setTimeout(function () {
                            var n = r.selection.getSelectedNode(),
                                i;
                            if (a.nodeName === "LI") {
                                if (!n) return;
                                i = t.getParentElement(n, {
                                        nodeName: s
                                    }, 2), i || o(n)
                            }
                            u === e.ENTER_KEY && a.nodeName.match(/^H[1-6]$/) && o(n)
                        }, 0);
                        return
                    }
                    r.config.useLineBreaks && u === e.ENTER_KEY && !e.browser.insertsLineBreaksOnReturn() && (r.commands.exec("insertLineBreak"), n.preventDefault())
                })
            }
        })
}(wysihtml5),
function (e) {
    var t = e.dom,
        n = document,
        r = window,
        i = n.createElement("div"),
        s = ["background-color", "color", "cursor", "font-family", "font-size", "font-style", "font-variant", "font-weight", "line-height", "letter-spacing", "text-align", "text-decoration", "text-indent", "text-rendering", "word-break", "word-wrap", "word-spacing"],
        o = ["background-color", "border-collapse", "border-bottom-color", "border-bottom-style", "border-bottom-width", "border-left-color", "border-left-style", "border-left-width", "border-right-color", "border-right-style", "border-right-width", "border-top-color", "border-top-style", "border-top-width", "clear", "display", "float", "margin-bottom", "margin-left", "margin-right", "margin-top", "outline-color", "outline-offset", "outline-width", "outline-style", "padding-left", "padding-right", "padding-top", "padding-bottom", "position", "top", "left", "right", "bottom", "z-index", "vertical-align", "text-align", "-webkit-box-sizing", "-moz-box-sizing", "-ms-box-sizing", "box-sizing", "-webkit-box-shadow", "-moz-box-shadow", "-ms-box-shadow", "box-shadow", "-webkit-border-top-right-radius", "-moz-border-radius-topright", "border-top-right-radius", "-webkit-border-bottom-right-radius", "-moz-border-radius-bottomright", "border-bottom-right-radius", "-webkit-border-bottom-left-radius", "-moz-border-radius-bottomleft", "border-bottom-left-radius", "-webkit-border-top-left-radius", "-moz-border-radius-topleft", "border-top-left-radius", "width", "height"],
        u = ["html                 { height: 100%; }", "body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }", "body > p:first-child { margin-top: 0; }", "._wysihtml5-temp     { display: none; }", e.browser.isGecko ? "body.placeholder { color: graytext !important; }" : "body.placeholder { color: #a9a9a9 !important; }", "img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],
        a = function (e) {
            if (e.setActive) try {
                e.setActive()
            } catch (i) {} else {
                var s = e.style,
                    o = n.documentElement.scrollTop || n.body.scrollTop,
                    u = n.documentElement.scrollLeft || n.body.scrollLeft,
                    a = {
                        position: s.position,
                        top: s.top,
                        left: s.left,
                        WebkitUserSelect: s.WebkitUserSelect
                    };
                t.setStyles({
                        position: "absolute",
                        top: "-99999px",
                        left: "-99999px",
                        WebkitUserSelect: "none"
                    }).on(e), e.focus(), t.setStyles(a).on(e), r.scrollTo && r.scrollTo(u, o)
            }
        };
    e.views.Composer.prototype.style = function () {
        var r = this,
            f = n.querySelector(":focus"),
            l = this.textarea.element,
            c = l.hasAttribute("placeholder"),
            h = c && l.getAttribute("placeholder"),
            p = l.style.display,
            d = l.disabled,
            v;
        this.focusStylesHost = i.cloneNode(!1), this.blurStylesHost = i.cloneNode(!1), this.disabledStylesHost = i.cloneNode(!1), c && l.removeAttribute("placeholder"), l === f && l.blur(), l.disabled = !1, l.style.display = v = "none";
        if (l.getAttribute("rows") && t.getStyle("height").from(l) === "auto" || l.getAttribute("cols") && t.getStyle("width").from(l) === "auto") l.style.display = v = p;
        t.copyStyles(o).from(l).to(this.iframe).andTo(this.blurStylesHost), t.copyStyles(s).from(l).to(this.element).andTo(this.blurStylesHost), t.insertCSS(u).into(this.element.ownerDocument), l.disabled = !0, t.copyStyles(o).from(l).to(this.disabledStylesHost), t.copyStyles(s).from(l).to(this.disabledStylesHost), l.disabled = d, l.style.display = p, a(l), l.style.display = v, t.copyStyles(o).from(l).to(this.focusStylesHost), t.copyStyles(s).from(l).to(this.focusStylesHost), l.style.display = p, t.copyStyles(["display"]).from(l).to(this.iframe);
        var m = e.lang.array(o).without(["display"]);
        return f ? f.focus() : l.blur(), c && l.setAttribute("placeholder", h), this.parent.on("focus:composer", function () {
            t.copyStyles(m).from(r.focusStylesHost).to(r.iframe), t.copyStyles(s).from(r.focusStylesHost).to(r.element)
        }), this.parent.on("blur:composer", function () {
            t.copyStyles(m).from(r.blurStylesHost).to(r.iframe), t.copyStyles(s).from(r.blurStylesHost).to(r.element)
        }), this.parent.observe("disable:composer", function () {
            t.copyStyles(m).from(r.disabledStylesHost).to(r.iframe), t.copyStyles(s).from(r.disabledStylesHost).to(r.element)
        }), this.parent.observe("enable:composer", function () {
            t.copyStyles(m).from(r.blurStylesHost).to(r.iframe), t.copyStyles(s).from(r.blurStylesHost).to(r.element)
        }), this
    }
}(wysihtml5),
function (e) {
    var t = e.dom,
        n = e.browser,
        r = {
            66: "bold",
            73: "italic",
            85: "underline"
        };
    e.views.Composer.prototype.observe = function () {
        var i = this,
            s = this.getValue(),
            o = this.sandbox.getIframe(),
            u = this.element,
            a = n.supportsEventsInIframeCorrectly() ? u : this.sandbox.getWindow(),
            f = ["drop", "paste"];
        t.observe(o, "DOMNodeRemoved", function () {
            clearInterval(l), i.parent.fire("destroy:composer")
        });
        var l = setInterval(function () {
            t.contains(document.documentElement, o) || (clearInterval(l), i.parent.fire("destroy:composer"))
        }, 250);
        t.observe(a, "focus", function () {
            i.parent.fire("focus").fire("focus:composer"), setTimeout(function () {
                s = i.getValue()
            }, 0)
        }), t.observe(a, "blur", function () {
            s !== i.getValue() && i.parent.fire("change").fire("change:composer"), i.parent.fire("blur").fire("blur:composer")
        }), t.observe(u, "dragenter", function () {
            i.parent.fire("unset_placeholder")
        }), t.observe(u, f, function () {
            setTimeout(function () {
                i.parent.fire("paste").fire("paste:composer")
            }, 0)
        }), t.observe(u, "keyup", function (t) {
            var n = t.keyCode;
            (n === e.SPACE_KEY || n === e.ENTER_KEY) && i.parent.fire("newword:composer")
        }), this.parent.on("paste:composer", function () {
            setTimeout(function () {
                i.parent.fire("newword:composer")
            }, 0)
        }), n.canSelectImagesInContentEditable() || t.observe(u, "mousedown", function (e) {
            var t = e.target;
            t.nodeName === "IMG" && (i.selection.selectNode(t), e.preventDefault())
        }), n.hasHistoryIssue() && n.supportsSelectionModify() && t.observe(u, "keydown", function (e) {
            if (!e.metaKey && !e.ctrlKey) return;
            var t = e.keyCode,
                n = u.ownerDocument.defaultView,
                r = n.getSelection();
            if (t === 37 || t === 39) t === 37 && (r.modify("extend", "left", "lineboundary"), e.shiftKey || r.collapseToStart()), t === 39 && (r.modify("extend", "right", "lineboundary"), e.shiftKey || r.collapseToEnd()), e.preventDefault()
        }), t.observe(u, "keydown", function (e) {
            var t = e.keyCode,
                n = r[t];
            (e.ctrlKey || e.metaKey) && !e.altKey && n && (i.commands.exec(n), e.preventDefault())
        }), t.observe(u, "keydown", function (t) {
            var n = i.selection.getSelectedNode(!0),
                r = t.keyCode,
                s;
            n && n.nodeName === "IMG" && (r === e.BACKSPACE_KEY || r === e.DELETE_KEY) && (s = n.parentNode, s.removeChild(n), s.nodeName === "A" && !s.firstChild && s.parentNode.removeChild(s), setTimeout(function () {
                        e.quirks.redraw(u)
                    }, 0), t.preventDefault())
        }), n.hasIframeFocusIssue() && (t.observe(this.iframe, "focus", function () {
                    setTimeout(function () {
                        i.doc.querySelector(":focus") !== i.element && i.focus()
                    }, 0)
                }), t.observe(this.element, "blur", function () {
                    setTimeout(function () {
                        i.selection.getSelection().removeAllRanges()
                    }, 0)
                }));
        var c = {
            IMG: "Image: ",
            A: "Link: "
        };
        t.observe(u, "mouseover", function (e) {
            var t = e.target,
                n = t.nodeName,
                r;
            if (n !== "A" && n !== "IMG") return;
            var i = t.hasAttribute("title");
            i || (r = c[n] + (t.getAttribute("href") || t.getAttribute("src")), t.setAttribute("title", r))
        })
    }
}(wysihtml5),
function (e) {
    var t = 400;
    e.views.Synchronizer = Base.extend({
            constructor: function (e, t, n) {
                this.editor = e, this.textarea = t, this.composer = n, this._observe()
            },
            fromComposerToTextarea: function (t) {
                this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(), t)
            },
            fromTextareaToComposer: function (e) {
                var t = this.textarea.getValue();
                t ? this.composer.setValue(t, e) : (this.composer.clear(), this.editor.fire("set_placeholder"))
            },
            sync: function (e) {
                this.editor.currentView.name === "textarea" ? this.fromTextareaToComposer(e) : this.fromComposerToTextarea(e)
            },
            _observe: function () {
                var n, r = this,
                    i = this.textarea.element.form,
                    s = function () {
                        n = setInterval(function () {
                            r.fromComposerToTextarea()
                        }, t)
                    }, o = function () {
                        clearInterval(n), n = null
                    };
                s(), i && (e.dom.observe(i, "submit", function () {
                            r.sync(!0)
                        }), e.dom.observe(i, "reset", function () {
                            setTimeout(function () {
                                r.fromTextareaToComposer()
                            }, 0)
                        })), this.editor.on("change_view", function (e) {
                        e === "composer" && !n ? (r.fromTextareaToComposer(!0), s()) : e === "textarea" && (r.fromComposerToTextarea(!0), o())
                    }), this.editor.on("destroy:composer", o)
            }
        })
}(wysihtml5), wysihtml5.views.Textarea = wysihtml5.views.View.extend({
        name: "textarea",
        constructor: function (e, t, n) {
            this.base(e, t, n), this._observe()
        },
        clear: function () {
            this.element.value = ""
        },
        getValue: function (e) {
            var t = this.isEmpty() ? "" : this.element.value;
            return e && (t = this.parent.parse(t)), t
        },
        setValue: function (e, t) {
            t && (e = this.parent.parse(e)), this.element.value = e
        },
        hasPlaceholderSet: function () {
            var e = wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),
                t = this.element.getAttribute("placeholder") || null,
                n = this.element.value,
                r = !n;
            return e && r || n === t
        },
        isEmpty: function () {
            return !wysihtml5.lang.string(this.element.value).trim() || this.hasPlaceholderSet()
        },
        _observe: function () {
            var e = this.element,
                t = this.parent,
                n = {
                    focusin: "focus",
                    focusout: "blur"
                }, r = wysihtml5.browser.supportsEvent("focusin") ? ["focusin", "focusout", "change"] : ["focus", "blur", "change"];
            t.on("beforeload", function () {
                wysihtml5.dom.observe(e, r, function (e) {
                    var r = n[e.type] || e.type;
                    t.fire(r).fire(r + ":textarea")
                }), wysihtml5.dom.observe(e, ["paste", "drop"], function () {
                    setTimeout(function () {
                        t.fire("paste").fire("paste:textarea")
                    }, 0)
                })
            })
        }
    }),
function (e) {
    var t = e.dom,
        n = "wysihtml5-command-dialog-opened",
        r = "input, select, textarea",
        i = "[data-wysihtml5-dialog-field]",
        s = "data-wysihtml5-dialog-field";
    e.toolbar.Dialog = e.lang.Dispatcher.extend({
            constructor: function (e, t) {
                this.link = e, this.container = t
            },
            _observe: function () {
                if (this._observed) return;
                var i = this,
                    s = function (e) {
                        var t = i._serialize();
                        t == i.elementToChange ? i.fire("edit", t) : i.fire("save", t), i.hide(), e.preventDefault(), e.stopPropagation()
                    };
                t.observe(i.link, "click", function () {
                    t.hasClass(i.link, n) && setTimeout(function () {
                        i.hide()
                    }, 0)
                }), t.observe(this.container, "keydown", function (t) {
                    var n = t.keyCode;
                    n === e.ENTER_KEY && s(t), n === e.ESCAPE_KEY && (i.fire("cancel"), i.hide())
                }), t.delegate(this.container, "[data-wysihtml5-dialog-action=save]", "click", s), t.delegate(this.container, "[data-wysihtml5-dialog-action=cancel]", "click", function (e) {
                    i.fire("cancel"), i.hide(), e.preventDefault(), e.stopPropagation()
                });
                var o = this.container.querySelectorAll(r),
                    u = 0,
                    a = o.length,
                    f = function () {
                        clearInterval(i.interval)
                    };
                for (; u < a; u++) t.observe(o[u], "change", f);
                this._observed = !0
            },
            _serialize: function () {
                var e = this.elementToChange || {}, t = this.container.querySelectorAll(i),
                    n = t.length,
                    r = 0;
                for (; r < n; r++) e[t[r].getAttribute(s)] = t[r].value;
                return e
            },
            _interpolate: function (e) {
                var t, n, r, o = document.querySelector(":focus"),
                    u = this.container.querySelectorAll(i),
                    a = u.length,
                    f = 0;
                for (; f < a; f++) {
                    t = u[f];
                    if (t === o) continue;
                    if (e && t.type === "hidden") continue;
                    n = t.getAttribute(s), r = this.elementToChange ? this.elementToChange[n] || "" : t.defaultValue, t.value = r
                }
            },
            show: function (e) {
                if (t.hasClass(this.link, n)) return;
                var i = this,
                    s = this.container.querySelector(r);
                this.elementToChange = e, this._observe(), this._interpolate(), e && (this.interval = setInterval(function () {
                            i._interpolate(!0)
                        }, 500)), t.addClass(this.link, n), this.container.style.display = "", this.fire("show");
                if (s && !e) try {
                    s.focus()
                } catch (o) {}
            },
            hide: function () {
                clearInterval(this.interval), this.elementToChange = null, t.removeClass(this.link, n), this.container.style.display = "none", this.fire("hide")
            }
        })
}(wysihtml5),
function (e) {
    var t = e.dom,
        n = {
            position: "relative"
        }, r = {
            left: 0,
            margin: 0,
            opacity: 0,
            overflow: "hidden",
            padding: 0,
            position: "absolute",
            top: 0,
            zIndex: 1
        }, i = {
            cursor: "inherit",
            fontSize: "50px",
            height: "50px",
            marginTop: "-25px",
            outline: 0,
            padding: 0,
            position: "absolute",
            right: "-4px",
            top: "50%"
        }, s = {
            "x-webkit-speech": "",
            speech: ""
        };
    e.toolbar.Speech = function (o, u) {
        var a = document.createElement("input");
        if (!e.browser.supportsSpeechApiOn(a)) {
            u.style.display = "none";
            return
        }
        var f = o.editor.textarea.element.getAttribute("lang");
        f && (s.lang = f);
        var l = document.createElement("div");
        e.lang.object(r).merge({
                width: u.offsetWidth + "px",
                height: u.offsetHeight + "px"
            }), t.insert(a).into(l), t.insert(l).into(u), t.setStyles(i).on(a), t.setAttributes(s).on(a), t.setStyles(r).on(l), t.setStyles(n).on(u);
        var c = "onwebkitspeechchange" in a ? "webkitspeechchange" : "speechchange";
        t.observe(a, c, function () {
            o.execCommand("insertText", a.value), a.value = ""
        }), t.observe(a, "click", function (e) {
            t.hasClass(u, "wysihtml5-command-disabled") && e.preventDefault(), e.stopPropagation()
        })
    }
}(wysihtml5),
function (e) {
    var t = "wysihtml5-command-disabled",
        n = "wysihtml5-commands-disabled",
        r = "wysihtml5-command-active",
        i = "wysihtml5-action-active",
        s = e.dom;
    e.toolbar.Toolbar = Base.extend({
            constructor: function (t, n) {
                this.editor = t, this.container = typeof n == "string" ? document.getElementById(n) : n, this.composer = t.composer, this._getLinks("command"), this._getLinks("action"), this._observe(), this.show();
                var r = this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),
                    i = r.length,
                    s = 0;
                for (; s < i; s++) new e.toolbar.Speech(this, r[s])
            },
            _getLinks: function (t) {
                var n = this[t + "Links"] = e.lang.array(this.container.querySelectorAll("[data-wysihtml5-" + t + "]")).get(),
                    r = n.length,
                    i = 0,
                    s = this[t + "Mapping"] = {}, o, u, a, f, l;
                for (; i < r; i++) o = n[i], a = o.getAttribute("data-wysihtml5-" + t), f = o.getAttribute("data-wysihtml5-" + t + "-value"), u = this.container.querySelector("[data-wysihtml5-" + t + "-group='" + a + "']"), l = this._getDialog(o, a), s[a + ":" + f] = {
                    link: o,
                    group: u,
                    name: a,
                    value: f,
                    dialog: l,
                    state: !1
                }
            },
            _getDialog: function (t, n) {
                var r = this,
                    i = this.container.querySelector("[data-wysihtml5-dialog='" + n + "']"),
                    s, o;
                return i && (s = new e.toolbar.Dialog(t, i), s.on("show", function () {
                            o = r.composer.selection.getBookmark(), r.editor.fire("show:dialog", {
                                    command: n,
                                    dialogContainer: i,
                                    commandLink: t
                                })
                        }), s.on("save", function (e) {
                            o && r.composer.selection.setBookmark(o), r._execCommand(n, e), r.editor.fire("save:dialog", {
                                    command: n,
                                    dialogContainer: i,
                                    commandLink: t
                                })
                        }), s.on("cancel", function () {
                            r.editor.focus(!1), r.editor.fire("cancel:dialog", {
                                    command: n,
                                    dialogContainer: i,
                                    commandLink: t
                                })
                        })), s
            },
            execCommand: function (e, t) {
                if (this.commandsDisabled) return;
                var n = this.commandMapping[e + ":" + t];
                n && n.dialog && !n.state ? n.dialog.show() : this._execCommand(e, t)
            },
            _execCommand: function (e, t) {
                this.editor.focus(!1), this.composer.commands.exec(e, t), this._updateLinkStates()
            },
            execAction: function (e) {
                var t = this.editor;
                e === "change_view" && (t.currentView === t.textarea ? t.fire("change_view", "composer") : t.fire("change_view", "textarea"))
            },
            _observe: function () {
                var e = this,
                    t = this.editor,
                    r = this.container,
                    i = this.commandLinks.concat(this.actionLinks),
                    o = i.length,
                    u = 0;
                for (; u < o; u++) i[u].nodeName === "A" ? s.setAttributes({
                        href: "javascript:;",
                        unselectable: "on"
                    }).on(i[u]) : s.setAttributes({
                        unselectable: "on"
                    }).on(i[u]);
                s.delegate(r, "[data-wysihtml5-command], [data-wysihtml5-action]", "mousedown", function (e) {
                    e.preventDefault()
                }), s.delegate(r, "[data-wysihtml5-command]", "click", function (t) {
                    var n = this,
                        r = n.getAttribute("data-wysihtml5-command"),
                        i = n.getAttribute("data-wysihtml5-command-value");
                    e.execCommand(r, i), t.preventDefault()
                }), s.delegate(r, "[data-wysihtml5-action]", "click", function (t) {
                    var n = this.getAttribute("data-wysihtml5-action");
                    e.execAction(n), t.preventDefault()
                }), t.on("focus:composer", function () {
                    e.bookmark = null, clearInterval(e.interval), e.interval = setInterval(function () {
                        e._updateLinkStates()
                    }, 500)
                }), t.on("blur:composer", function () {
                    clearInterval(e.interval)
                }), t.on("destroy:composer", function () {
                    clearInterval(e.interval)
                }), t.on("change_view", function (t) {
                    setTimeout(function () {
                        e.commandsDisabled = t !== "composer", e._updateLinkStates(), e.commandsDisabled ? s.addClass(r, n) : s.removeClass(r, n)
                    }, 0)
                })
            },
            _updateLinkStates: function () {
                var n = this.commandMapping,
                    o = this.actionMapping,
                    u, a, f, l;
                for (u in n) {
                    l = n[u], this.commandsDisabled ? (a = !1, s.removeClass(l.link, r), l.group && s.removeClass(l.group, r), l.dialog && l.dialog.hide()) : (a = this.composer.commands.state(l.name, l.value), e.lang.object(a).isArray() && (a = a.length === 1 ? a[0] : !0), s.removeClass(l.link, t), l.group && s.removeClass(l.group, t));
                    if (l.state === a) continue;
                    l.state = a, a ? (s.addClass(l.link, r), l.group && s.addClass(l.group, r), l.dialog && (typeof a == "object" ? l.dialog.show(a) : l.dialog.hide())) : (s.removeClass(l.link, r), l.group && s.removeClass(l.group, r), l.dialog && l.dialog.hide())
                }
                for (u in o) f = o[u], f.name === "change_view" && (f.state = this.editor.currentView === this.editor.textarea, f.state ? s.addClass(f.link, i) : s.removeClass(f.link, i))
            },
            show: function () {
                this.container.style.display = ""
            },
            hide: function () {
                this.container.style.display = "none"
            }
        })
}(wysihtml5),
function (e) {
    var t, n = {
            name: t,
            style: !0,
            toolbar: t,
            autoLink: !0,
            parserRules: {
                tags: {
                    br: {},
                    span: {},
                    div: {},
                    p: {}
                },
                classes: {}
            },
            parser: e.dom.parse,
            composerClassName: "wysihtml5-editor",
            bodyClassName: "wysihtml5-supported",
            useLineBreaks: !0,
            stylesheets: [],
            placeholderText: t,
            supportTouchDevices: !0,
            cleanUp: !0
        };
    e.Editor = e.lang.Dispatcher.extend({
            constructor: function (t, r) {
                this.textareaElement = typeof t == "string" ? document.getElementById(t) : t, this.config = e.lang.object({}).merge(n).merge(r).get(), this.textarea = new e.views.Textarea(this, this.textareaElement, this.config), this.currentView = this.textarea, this._isCompatible = e.browser.supported();
                if (!this._isCompatible || !this.config.supportTouchDevices && e.browser.isTouchDevice()) {
                    var i = this;
                    setTimeout(function () {
                        i.fire("beforeload").fire("load")
                    }, 0);
                    return
                }
                e.dom.addClass(document.body, this.config.bodyClassName), this.composer = new e.views.Composer(this, this.textareaElement, this.config), this.currentView = this.composer, typeof this.config.parser == "function" && this._initParser(), this.on("beforeload", function () {
                    this.synchronizer = new e.views.Synchronizer(this, this.textarea, this.composer), this.config.toolbar && (this.toolbar = new e.toolbar.Toolbar(this, this.config.toolbar))
                });
                try {
                    console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")
                } catch (s) {}
            },
            isCompatible: function () {
                return this._isCompatible
            },
            clear: function () {
                return this.currentView.clear(), this
            },
            getValue: function (e) {
                return this.currentView.getValue(e)
            },
            setValue: function (e, t) {
                return this.fire("unset_placeholder"), e ? (this.currentView.setValue(e, t), this) : this.clear()
            },
            focus: function (e) {
                return this.currentView.focus(e), this
            },
            disable: function () {
                return this.currentView.disable(), this
            },
            enable: function () {
                return this.currentView.enable(), this
            },
            isEmpty: function () {
                return this.currentView.isEmpty()
            },
            hasPlaceholderSet: function () {
                return this.currentView.hasPlaceholderSet()
            },
            parse: function (t) {
                var n = this.config.parser(t, this.config.parserRules, this.composer.sandbox.getDocument(), this.config.cleanUp);
                return typeof t == "object" && e.quirks.redraw(t), n
            },
            _initParser: function () {
                this.on("paste:composer", function () {
                    var t = !0,
                        n = this;
                    n.composer.selection.executeAndRestore(function () {
                        e.quirks.cleanPastedHTML(n.composer.element), n.parse(n.composer.element)
                    }, t)
                })
            }
        })
}(wysihtml5), Braintree = function () {
    function e(t, n) {
        t instanceof e ? (this.enc = t.enc, this.pos = t.pos) : (this.enc = t, this.pos = n)
    }

    function t(e, t, n, r, i) {
        this.stream = e, this.header = t, this.length = n, this.tag = r, this.sub = i
    }

    function i(e) {
        var t, i, s = "";
        for (t = 0; t + 3 <= e.length; t += 3) i = parseInt(e.substring(t, t + 3), 16), s += n.charAt(i >> 6) + n.charAt(i & 63);
        t + 1 == e.length ? (i = parseInt(e.substring(t, t + 1), 16), s += n.charAt(i << 2)) : t + 2 == e.length && (i = parseInt(e.substring(t, t + 2), 16), s += n.charAt(i >> 2) + n.charAt((i & 3) << 4));
        while ((s.length & 3) > 0) s += r;
        return s
    }

    function s(e) {
        var t = "",
            i, s = 0,
            o;
        for (i = 0; i < e.length; ++i) {
            if (e.charAt(i) == r) break;
            v = n.indexOf(e.charAt(i));
            if (v < 0) continue;
            s == 0 ? (t += E(v >> 2), o = v & 3, s = 1) : s == 1 ? (t += E(o << 2 | v >> 4), o = v & 15, s = 2) : s == 2 ? (t += E(o), t += E(v >> 2), o = v & 3, s = 3) : (t += E(o << 2 | v >> 4), t += E(v & 15), s = 0)
        }
        return s == 1 && (t += E(o << 2)), t
    }

    function o(e) {
        var t = s(e),
            n, r = new Array;
        for (n = 0; 2 * n < t.length; ++n) r[n] = parseInt(t.substring(2 * n, 2 * n + 2), 16);
        return r
    }

    function l(e, t, n) {
        e != null && ("number" == typeof e ? this.fromNumber(e, t, n) : t == null && "string" != typeof e ? this.fromString(e, 256) : this.fromString(e, t))
    }

    function c() {
        return new l(null)
    }

    function h(e, t, n, r, i, s) {
        while (--s >= 0) {
            var o = t * this[e++] + n[r] + i;
            i = Math.floor(o / 67108864), n[r++] = o & 67108863
        }
        return i
    }

    function p(e, t, n, r, i, s) {
        var o = t & 32767,
            u = t >> 15;
        while (--s >= 0) {
            var a = this[e] & 32767,
                f = this[e++] >> 15,
                l = u * a + f * o;
            a = o * a + ((l & 32767) << 15) + n[r] + (i & 1073741823), i = (a >>> 30) + (l >>> 15) + u * f + (i >>> 30), n[r++] = a & 1073741823
        }
        return i
    }

    function d(e, t, n, r, i, s) {
        var o = t & 16383,
            u = t >> 14;
        while (--s >= 0) {
            var a = this[e] & 16383,
                f = this[e++] >> 14,
                l = u * a + f * o;
            a = o * a + ((l & 16383) << 14) + n[r] + i, i = (a >> 28) + (l >> 14) + u * f, n[r++] = a & 268435455
        }
        return i
    }

    function E(e) {
        return g.charAt(e)
    }

    function S(e, t) {
        var n = y[e.charCodeAt(t)];
        return n == null ? -1 : n
    }

    function x(e) {
        for (var t = this.t - 1; t >= 0; --t) e[t] = this[t];
        e.t = this.t, e.s = this.s
    }

    function T(e) {
        this.t = 1, this.s = e < 0 ? -1 : 0, e > 0 ? this[0] = e : e < -1 ? this[0] = e + DV : this.t = 0
    }

    function N(e) {
        var t = c();
        return t.fromInt(e), t
    }

    function C(e, t) {
        var n;
        if (t == 16) n = 4;
        else if (t == 8) n = 3;
        else if (t == 256) n = 8;
        else if (t == 2) n = 1;
        else if (t == 32) n = 5;
        else {
            if (t != 4) {
                this.fromRadix(e, t);
                return
            }
            n = 2
        }
        this.t = 0, this.s = 0;
        var r = e.length,
            i = !1,
            s = 0;
        while (--r >= 0) {
            var o = n == 8 ? e[r] & 255 : S(e, r);
            if (o < 0) {
                e.charAt(r) == "-" && (i = !0);
                continue
            }
            i = !1, s == 0 ? this[this.t++] = o : s + n > this.DB ? (this[this.t - 1] |= (o & (1 << this.DB - s) - 1) << s, this[this.t++] = o >> this.DB - s) : this[this.t - 1] |= o << s, s += n, s >= this.DB && (s -= this.DB)
        }
        n == 8 && (e[0] & 128) != 0 && (this.s = -1, s > 0 && (this[this.t - 1] |= (1 << this.DB - s) - 1 << s)), this.clamp(), i && l.ZERO.subTo(this, this)
    }

    function L() {
        var e = this.s & this.DM;
        while (this.t > 0 && this[this.t - 1] == e)--this.t
    }

    function A(e) {
        if (this.s < 0) return "-" + this.negate().toString(e);
        var t;
        if (e == 16) t = 4;
        else if (e == 8) t = 3;
        else if (e == 2) t = 1;
        else if (e == 32) t = 5;
        else {
            if (e != 4) return this.toRadix(e);
            t = 2
        }
        var n = (1 << t) - 1,
            r, i = !1,
            s = "",
            o = this.t,
            u = this.DB - o * this.DB % t;
        if (o-- > 0) {
            u < this.DB && (r = this[o] >> u) > 0 && (i = !0, s = E(r));
            while (o >= 0) u < t ? (r = (this[o] & (1 << u) - 1) << t - u, r |= this[--o] >> (u += this.DB - t)) : (r = this[o] >> (u -= t) & n, u <= 0 && (u += this.DB, --o)), r > 0 && (i = !0), i && (s += E(r))
        }
        return i ? s : "0"
    }

    function O() {
        var e = c();
        return l.ZERO.subTo(this, e), e
    }

    function M() {
        return this.s < 0 ? this.negate() : this
    }

    function _(e) {
        var t = this.s - e.s;
        if (t != 0) return t;
        var n = this.t;
        t = n - e.t;
        if (t != 0) return this.s < 0 ? -t : t;
        while (--n >= 0)
            if ((t = this[n] - e[n]) != 0) return t;
        return 0
    }

    function D(e) {
        var t = 1,
            n;
        return (n = e >>> 16) != 0 && (e = n, t += 16), (n = e >> 8) != 0 && (e = n, t += 8), (n = e >> 4) != 0 && (e = n, t += 4), (n = e >> 2) != 0 && (e = n, t += 2), (n = e >> 1) != 0 && (e = n, t += 1), t
    }

    function P() {
        return this.t <= 0 ? 0 : this.DB * (this.t - 1) + D(this[this.t - 1] ^ this.s & this.DM)
    }

    function H(e, t) {
        var n;
        for (n = this.t - 1; n >= 0; --n) t[n + e] = this[n];
        for (n = e - 1; n >= 0; --n) t[n] = 0;
        t.t = this.t + e, t.s = this.s
    }

    function B(e, t) {
        for (var n = e; n < this.t; ++n) t[n - e] = this[n];
        t.t = Math.max(this.t - e, 0), t.s = this.s
    }

    function j(e, t) {
        var n = e % this.DB,
            r = this.DB - n,
            i = (1 << r) - 1,
            s = Math.floor(e / this.DB),
            o = this.s << n & this.DM,
            u;
        for (u = this.t - 1; u >= 0; --u) t[u + s + 1] = this[u] >> r | o, o = (this[u] & i) << n;
        for (u = s - 1; u >= 0; --u) t[u] = 0;
        t[s] = o, t.t = this.t + s + 1, t.s = this.s, t.clamp()
    }

    function F(e, t) {
        t.s = this.s;
        var n = Math.floor(e / this.DB);
        if (n >= this.t) {
            t.t = 0;
            return
        }
        var r = e % this.DB,
            i = this.DB - r,
            s = (1 << r) - 1;
        t[0] = this[n] >> r;
        for (var o = n + 1; o < this.t; ++o) t[o - n - 1] |= (this[o] & s) << i, t[o - n] = this[o] >> r;
        r > 0 && (t[this.t - n - 1] |= (this.s & s) << i), t.t = this.t - n, t.clamp()
    }

    function I(e, t) {
        var n = 0,
            r = 0,
            i = Math.min(e.t, this.t);
        while (n < i) r += this[n] - e[n], t[n++] = r & this.DM, r >>= this.DB;
        if (e.t < this.t) {
            r -= e.s;
            while (n < this.t) r += this[n], t[n++] = r & this.DM, r >>= this.DB;
            r += this.s
        } else {
            r += this.s;
            while (n < e.t) r -= e[n], t[n++] = r & this.DM, r >>= this.DB;
            r -= e.s
        }
        t.s = r < 0 ? -1 : 0, r < -1 ? t[n++] = this.DV + r : r > 0 && (t[n++] = r), t.t = n, t.clamp()
    }

    function q(e, t) {
        var n = this.abs(),
            r = e.abs(),
            i = n.t;
        t.t = i + r.t;
        while (--i >= 0) t[i] = 0;
        for (i = 0; i < r.t; ++i) t[i + n.t] = n.am(0, r[i], t, i, 0, n.t);
        t.s = 0, t.clamp(), this.s != e.s && l.ZERO.subTo(t, t)
    }

    function R(e) {
        var t = this.abs(),
            n = e.t = 2 * t.t;
        while (--n >= 0) e[n] = 0;
        for (n = 0; n < t.t - 1; ++n) {
            var r = t.am(n, t[n], e, 2 * n, 0, 1);
            (e[n + t.t] += t.am(n + 1, 2 * t[n], e, 2 * n + 1, r, t.t - n - 1)) >= t.DV && (e[n + t.t] -= t.DV, e[n + t.t + 1] = 1)
        }
        e.t > 0 && (e[e.t - 1] += t.am(n, t[n], e, 2 * n, 0, 1)), e.s = 0, e.clamp()
    }

    function U(e, t, n) {
        var r = e.abs();
        if (r.t <= 0) return;
        var i = this.abs();
        if (i.t < r.t) {
            t != null && t.fromInt(0), n != null && this.copyTo(n);
            return
        }
        n == null && (n = c());
        var s = c(),
            o = this.s,
            u = e.s,
            a = this.DB - D(r[r.t - 1]);
        a > 0 ? (r.lShiftTo(a, s), i.lShiftTo(a, n)) : (r.copyTo(s), i.copyTo(n));
        var f = s.t,
            h = s[f - 1];
        if (h == 0) return;
        var p = h * (1 << this.F1) + (f > 1 ? s[f - 2] >> this.F2 : 0),
            d = this.FV / p,
            v = (1 << this.F1) / p,
            m = 1 << this.F2,
            g = n.t,
            y = g - f,
            b = t == null ? c() : t;
        s.dlShiftTo(y, b), n.compareTo(b) >= 0 && (n[n.t++] = 1, n.subTo(b, n)), l.ONE.dlShiftTo(f, b), b.subTo(s, s);
        while (s.t < f) s[s.t++] = 0;
        while (--y >= 0) {
            var w = n[--g] == h ? this.DM : Math.floor(n[g] * d + (n[g - 1] + m) * v);
            if ((n[g] += s.am(0, w, n, y, 0, f)) < w) {
                s.dlShiftTo(y, b), n.subTo(b, n);
                while (n[g] < --w) n.subTo(b, n)
            }
        }
        t != null && (n.drShiftTo(f, t), o != u && l.ZERO.subTo(t, t)), n.t = f, n.clamp(), a > 0 && n.rShiftTo(a, n), o < 0 && l.ZERO.subTo(n, n)
    }

    function z(e) {
        var t = c();
        return this.abs().divRemTo(e, null, t), this.s < 0 && t.compareTo(l.ZERO) > 0 && e.subTo(t, t), t
    }

    function W(e) {
        this.m = e
    }

    function X(e) {
        return e.s < 0 || e.compareTo(this.m) >= 0 ? e.mod(this.m) : e
    }

    function V(e) {
        return e
    }

    function $(e) {
        e.divRemTo(this.m, null, e)
    }

    function J(e, t, n) {
        e.multiplyTo(t, n), this.reduce(n)
    }

    function K(e, t) {
        e.squareTo(t), this.reduce(t)
    }

    function Q() {
        if (this.t < 1) return 0;
        var e = this[0];
        if ((e & 1) == 0) return 0;
        var t = e & 3;
        return t = t * (2 - (e & 15) * t) & 15, t = t * (2 - (e & 255) * t) & 255, t = t * (2 - ((e & 65535) * t & 65535)) & 65535, t = t * (2 - e * t % this.DV) % this.DV, t > 0 ? this.DV - t : -t
    }

    function G(e) {
        this.m = e, this.mp = e.invDigit(), this.mpl = this.mp & 32767, this.mph = this.mp >> 15, this.um = (1 << e.DB - 15) - 1, this.mt2 = 2 * e.t
    }

    function Y(e) {
        var t = c();
        return e.abs().dlShiftTo(this.m.t, t), t.divRemTo(this.m, null, t), e.s < 0 && t.compareTo(l.ZERO) > 0 && this.m.subTo(t, t), t
    }

    function Z(e) {
        var t = c();
        return e.copyTo(t), this.reduce(t), t
    }

    function et(e) {
        while (e.t <= this.mt2) e[e.t++] = 0;
        for (var t = 0; t < this.m.t; ++t) {
            var n = e[t] & 32767,
                r = n * this.mpl + ((n * this.mph + (e[t] >> 15) * this.mpl & this.um) << 15) & e.DM;
            n = t + this.m.t, e[n] += this.m.am(0, r, e, t, 0, this.m.t);
            while (e[n] >= e.DV) e[n] -= e.DV, e[++n]++
        }
        e.clamp(), e.drShiftTo(this.m.t, e), e.compareTo(this.m) >= 0 && e.subTo(this.m, e)
    }

    function tt(e, t) {
        e.squareTo(t), this.reduce(t)
    }

    function nt(e, t, n) {
        e.multiplyTo(t, n), this.reduce(n)
    }

    function rt() {
        return (this.t > 0 ? this[0] & 1 : this.s) == 0
    }

    function it(e, t) {
        if (e > 4294967295 || e < 1) return l.ONE;
        var n = c(),
            r = c(),
            i = t.convert(this),
            s = D(e) - 1;
        i.copyTo(n);
        while (--s >= 0) {
            t.sqrTo(n, r);
            if ((e & 1 << s) > 0) t.mulTo(r, i, n);
            else {
                var o = n;
                n = r, r = o
            }
        }
        return t.revert(n)
    }

    function st(e, t) {
        var n;
        return e < 256 || t.isEven() ? n = new W(t) : n = new G(t), this.exp(e, n)
    }

    function ot(e, t) {
        return new l(e, t)
    }

    function ut(e, t) {
        var n = "",
            r = 0;
        while (r + t < e.length) n += e.substring(r, r + t) + "\n", r += t;
        return n + e.substring(r, e.length)
    }

    function at(e) {
        return e < 16 ? "0" + e.toString(16) : e.toString(16)
    }

    function ft(e, t) {
        if (t < e.length + 11) return alert("Message too long for RSA"), null;
        var n = new Array,
            r = e.length - 1;
        while (r >= 0 && t > 0) {
            var i = e.charCodeAt(r--);
            i < 128 ? n[--t] = i : i > 127 && i < 2048 ? (n[--t] = i & 63 | 128, n[--t] = i >> 6 | 192) : (n[--t] = i & 63 | 128, n[--t] = i >> 6 & 63 | 128, n[--t] = i >> 12 | 224)
        }
        n[--t] = 0;
        var s = 0,
            o = 0,
            u = 0;
        while (t > 2) u == 0 && (o = vt.random.randomWords(1, 0)[0]), s = o >> u & 255, u = (u + 8) % 32, s != 0 && (n[--t] = s);
        return n[--t] = 2, n[--t] = 0, new l(n)
    }

    function lt() {
        this.n = null, this.e = 0, this.d = null, this.p = null, this.q = null, this.dmp1 = null, this.dmq1 = null, this.coeff = null
    }

    function ct(e, t) {
        e != null && t != null && e.length > 0 && t.length > 0 ? (this.n = ot(e, 16), this.e = parseInt(t, 16)) : alert("Invalid RSA public key")
    }

    function ht(e) {
        return e.modPowInt(this.e, this.n)
    }

    function pt(e) {
        var t = ft(e, this.n.bitLength() + 7 >> 3);
        if (t == null) return null;
        var n = this.doPublic(t);
        if (n == null) return null;
        var r = n.toString(16);
        return (r.length & 1) == 0 ? r : "0" + r
    }

    function dt(e) {
        var t = this.encrypt(e);
        return t ? i(t) : null
    }
    e.prototype.get = function (e) {
        e == undefined && (e = this.pos++);
        if (e >= this.enc.length) throw "Requesting byte offset " + e + " on a stream of length " + this.enc.length;
        return this.enc[e]
    }, e.prototype.hexDigits = "0123456789ABCDEF", e.prototype.hexByte = function (e) {
        return this.hexDigits.charAt(e >> 4 & 15) + this.hexDigits.charAt(e & 15)
    }, e.prototype.hexDump = function (e, t) {
        var n = "";
        for (var r = e; r < t; ++r) {
            n += this.hexByte(this.get(r));
            switch (r & 15) {
            case 7:
                n += "  ";
                break;
            case 15:
                n += "\n";
                break;
            default:
                n += " "
            }
        }
        return n
    }, e.prototype.parseStringISO = function (e, t) {
        var n = "";
        for (var r = e; r < t; ++r) n += String.fromCharCode(this.get(r));
        return n
    }, e.prototype.parseStringUTF = function (e, t) {
        var n = "",
            r = 0;
        for (var i = e; i < t;) {
            var r = this.get(i++);
            r < 128 ? n += String.fromCharCode(r) : r > 191 && r < 224 ? n += String.fromCharCode((r & 31) << 6 | this.get(i++) & 63) : n += String.fromCharCode((r & 15) << 12 | (this.get(i++) & 63) << 6 | this.get(i++) & 63)
        }
        return n
    }, e.prototype.reTime = /^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/, e.prototype.parseTime = function (e, t) {
        var n = this.parseStringISO(e, t),
            r = this.reTime.exec(n);
        return r ? (n = r[1] + "-" + r[2] + "-" + r[3] + " " + r[4], r[5] && (n += ":" + r[5], r[6] && (n += ":" + r[6], r[7] && (n += "." + r[7]))), r[8] && (n += " UTC", r[8] != "Z" && (n += r[8], r[9] && (n += ":" + r[9]))), n) : "Unrecognized time: " + n
    }, e.prototype.parseInteger = function (e, t) {
        var n = t - e;
        if (n > 4) {
            n <<= 3;
            var r = this.get(e);
            if (r == 0) n -= 8;
            else
                while (r < 128) r <<= 1, --n;
            return "(" + n + " bit)"
        }
        var i = 0;
        for (var s = e; s < t; ++s) i = i << 8 | this.get(s);
        return i
    }, e.prototype.parseBitString = function (e, t) {
        var n = this.get(e),
            r = (t - e - 1 << 3) - n,
            i = "(" + r + " bit)";
        if (r <= 20) {
            var s = n;
            i += " ";
            for (var o = t - 1; o > e; --o) {
                var u = this.get(o);
                for (var a = s; a < 8; ++a) i += u >> a & 1 ? "1" : "0";
                s = 0
            }
        }
        return i
    }, e.prototype.parseOctetString = function (e, t) {
        var n = t - e,
            r = "(" + n + " byte) ";
        n > 20 && (t = e + 20);
        for (var i = e; i < t; ++i) r += this.hexByte(this.get(i));
        return n > 20 && (r += String.fromCharCode(8230)), r
    }, e.prototype.parseOID = function (e, t) {
        var n, r = 0,
            i = 0;
        for (var s = e; s < t; ++s) {
            var o = this.get(s);
            r = r << 7 | o & 127, i += 7, o & 128 || (n == undefined ? n = parseInt(r / 40) + "." + r % 40 : n += "." + (i >= 31 ? "bigint" : r), r = i = 0), n += String.fromCharCode()
        }
        return n
    }, t.prototype.typeName = function () {
        if (this.tag == undefined) return "unknown";
        var e = this.tag >> 6,
            t = this.tag >> 5 & 1,
            n = this.tag & 31;
        switch (e) {
        case 0:
            switch (n) {
            case 0:
                return "EOC";
            case 1:
                return "BOOLEAN";
            case 2:
                return "INTEGER";
            case 3:
                return "BIT_STRING";
            case 4:
                return "OCTET_STRING";
            case 5:
                return "NULL";
            case 6:
                return "OBJECT_IDENTIFIER";
            case 7:
                return "ObjectDescriptor";
            case 8:
                return "EXTERNAL";
            case 9:
                return "REAL";
            case 10:
                return "ENUMERATED";
            case 11:
                return "EMBEDDED_PDV";
            case 12:
                return "UTF8String";
            case 16:
                return "SEQUENCE";
            case 17:
                return "SET";
            case 18:
                return "NumericString";
            case 19:
                return "PrintableString";
            case 20:
                return "TeletexString";
            case 21:
                return "VideotexString";
            case 22:
                return "IA5String";
            case 23:
                return "UTCTime";
            case 24:
                return "GeneralizedTime";
            case 25:
                return "GraphicString";
            case 26:
                return "VisibleString";
            case 27:
                return "GeneralString";
            case 28:
                return "UniversalString";
            case 30:
                return "BMPString";
            default:
                return "Universal_" + n.toString(16)
            };
        case 1:
            return "Application_" + n.toString(16);
        case 2:
            return "[" + n + "]";
        case 3:
            return "Private_" + n.toString(16)
        }
    }, t.prototype.content = function () {
        if (this.tag == undefined) return null;
        var e = this.tag >> 6;
        if (e != 0) return this.sub == null ? null : "(" + this.sub.length + ")";
        var t = this.tag & 31,
            n = this.posContent(),
            r = Math.abs(this.length);
        switch (t) {
        case 1:
            return this.stream.get(n) == 0 ? "false" : "true";
        case 2:
            return this.stream.parseInteger(n, n + r);
        case 3:
            return this.sub ? "(" + this.sub.length + " elem)" : this.stream.parseBitString(n, n + r);
        case 4:
            return this.sub ? "(" + this.sub.length + " elem)" : this.stream.parseOctetString(n, n + r);
        case 6:
            return this.stream.parseOID(n, n + r);
        case 16:
        case 17:
            return "(" + this.sub.length + " elem)";
        case 12:
            return this.stream.parseStringUTF(n, n + r);
        case 18:
        case 19:
        case 20:
        case 21:
        case 22:
        case 26:
            return this.stream.parseStringISO(n, n + r);
        case 23:
        case 24:
            return this.stream.parseTime(n, n + r)
        }
        return null
    }, t.prototype.toString = function () {
        return this.typeName() + "@" + this.stream.pos + "[header:" + this.header + ",length:" + this.length + ",sub:" + (this.sub == null ? "null" : this.sub.length) + "]"
    }, t.prototype.print = function (e) {
        e == undefined && (e = ""), document.writeln(e + this);
        if (this.sub != null) {
            e += "  ";
            for (var t = 0, n = this.sub.length; t < n; ++t) this.sub[t].print(e)
        }
    }, t.prototype.toPrettyString = function (e) {
        e == undefined && (e = "");
        var t = e + this.typeName() + " @" + this.stream.pos;
        this.length >= 0 && (t += "+"), t += this.length, this.tag & 32 ? t += " (constructed)" : (this.tag == 3 || this.tag == 4) && this.sub != null && (t += " (encapsulates)"), t += "\n";
        if (this.sub != null) {
            e += "  ";
            for (var n = 0, r = this.sub.length; n < r; ++n) t += this.sub[n].toPrettyString(e)
        }
        return t
    }, t.prototype.posStart = function () {
        return this.stream.pos
    }, t.prototype.posContent = function () {
        return this.stream.pos + this.header
    }, t.prototype.posEnd = function () {
        return this.stream.pos + this.header + Math.abs(this.length)
    }, t.decodeLength = function (e) {
        var t = e.get(),
            n = t & 127;
        if (n == t) return n;
        if (n > 3) throw "Length over 24 bits not supported at position " + (e.pos - 1);
        if (n == 0) return -1;
        t = 0;
        for (var r = 0; r < n; ++r) t = t << 8 | e.get();
        return t
    }, t.hasContent = function (n, r, i) {
        if (n & 32) return !0;
        if (n < 3 || n > 4) return !1;
        var s = new e(i);
        n == 3 && s.get();
        var o = s.get();
        if (o >> 6 & 1) return !1;
        try {
            var u = t.decodeLength(s);
            return s.pos - i.pos + u == r
        } catch (a) {
            return !1
        }
    }, t.decode = function (n) {
        n instanceof e || (n = new e(n, 0));
        var r = new e(n),
            i = n.get(),
            s = t.decodeLength(n),
            o = n.pos - r.pos,
            u = null;
        if (t.hasContent(i, s, n)) {
            var a = n.pos;
            i == 3 && n.get(), u = [];
            if (s >= 0) {
                var f = a + s;
                while (n.pos < f) u[u.length] = t.decode(n);
                if (n.pos != f) throw "Content size is not correct for container starting at offset " + a
            } else try {
                for (;;) {
                    var l = t.decode(n);
                    if (l.tag == 0) break;
                    u[u.length] = l
                }
                s = a - n.pos
            } catch (c) {
                throw "Exception while decoding undefined length content: " + c
            }
        } else n.pos += s;
        return new t(r, o, s, i, u)
    };
    var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
        r = "=",
        u, a = 0xdeadbeefcafe,
        f = (a & 16777215) == 15715070;
    f && navigator.appName == "Microsoft Internet Explorer" ? (l.prototype.am = p, u = 30) : f && navigator.appName != "Netscape" ? (l.prototype.am = h, u = 26) : (l.prototype.am = d, u = 28), l.prototype.DB = u, l.prototype.DM = (1 << u) - 1, l.prototype.DV = 1 << u;
    var m = 52;
    l.prototype.FV = Math.pow(2, m), l.prototype.F1 = m - u, l.prototype.F2 = 2 * u - m;
    var g = "0123456789abcdefghijklmnopqrstuvwxyz",
        y = new Array,
        b, w;
    b = "0".charCodeAt(0);
    for (w = 0; w <= 9; ++w) y[b++] = w;
    b = "a".charCodeAt(0);
    for (w = 10; w < 36; ++w) y[b++] = w;
    b = "A".charCodeAt(0);
    for (w = 10; w < 36; ++w) y[b++] = w;
    W.prototype.convert = X, W.prototype.revert = V, W.prototype.reduce = $, W.prototype.mulTo = J, W.prototype.sqrTo = K, G.prototype.convert = Y, G.prototype.revert = Z, G.prototype.reduce = et, G.prototype.mulTo = nt, G.prototype.sqrTo = tt, l.prototype.copyTo = x, l.prototype.fromInt = T, l.prototype.fromString = C, l.prototype.clamp = L, l.prototype.dlShiftTo = H, l.prototype.drShiftTo = B, l.prototype.lShiftTo = j, l.prototype.rShiftTo = F, l.prototype.subTo = I, l.prototype.multiplyTo = q, l.prototype.squareTo = R, l.prototype.divRemTo = U, l.prototype.invDigit = Q, l.prototype.isEven = rt, l.prototype.exp = it, l.prototype.toString = A, l.prototype.negate = O, l.prototype.abs = M, l.prototype.compareTo = _, l.prototype.bitLength = P, l.prototype.mod = z, l.prototype.modPowInt = st, l.ZERO = N(0), l.ONE = N(1), lt.prototype.doPublic = ht, lt.prototype.setPublic = ct, lt.prototype.encrypt = pt, lt.prototype.encrypt_b64 = dt, "use strict";
    var vt = {
        cipher: {},
        hash: {},
        keyexchange: {},
        mode: {},
        misc: {},
        codec: {},
        exception: {
            corrupt: function (e) {
                this.toString = function () {
                    return "CORRUPT: " + this.message
                }, this.message = e
            },
            invalid: function (e) {
                this.toString = function () {
                    return "INVALID: " + this.message
                }, this.message = e
            },
            bug: function (e) {
                this.toString = function () {
                    return "BUG: " + this.message
                }, this.message = e
            },
            notReady: function (e) {
                this.toString = function () {
                    return "NOT READY: " + this.message
                }, this.message = e
            }
        }
    };
    typeof module != "undefined" && module.exports && (module.exports = vt), vt.cipher.aes = function (e) {
        this._tables[0][0][0] || this._precompute();
        var t, n, r, i, s, o = this._tables[0][4],
            u = this._tables[1],
            a = e.length,
            f = 1;
        if (a !== 4 && a !== 6 && a !== 8) throw new vt.exception.invalid("invalid aes key size");
        this._key = [i = e.slice(0), s = []];
        for (t = a; t < 4 * a + 28; t++) {
            r = i[t - 1];
            if (t % a === 0 || a === 8 && t % a === 4) r = o[r >>> 24] << 24 ^ o[r >> 16 & 255] << 16 ^ o[r >> 8 & 255] << 8 ^ o[r & 255], t % a === 0 && (r = r << 8 ^ r >>> 24 ^ f << 24, f = f << 1 ^ (f >> 7) * 283);
            i[t] = i[t - a] ^ r
        }
        for (n = 0; t; n++, t--) r = i[n & 3 ? t : t - 4], t <= 4 || n < 4 ? s[n] = r : s[n] = u[0][o[r >>> 24]] ^ u[1][o[r >> 16 & 255]] ^ u[2][o[r >> 8 & 255]] ^ u[3][o[r & 255]]
    }, vt.cipher.aes.prototype = {
        encrypt: function (e) {
            return this._crypt(e, 0)
        },
        decrypt: function (e) {
            return this._crypt(e, 1)
        },
        _tables: [
            [
                [],
                [],
                [],
                [],
                []
            ],
            [
                [],
                [],
                [],
                [],
                []
            ]
        ],
        _precompute: function () {
            var e = this._tables[0],
                t = this._tables[1],
                n = e[4],
                r = t[4],
                i, s, o, u = [],
                a = [],
                f, l, c, h, p, d;
            for (i = 0; i < 256; i++) a[(u[i] = i << 1 ^ (i >> 7) * 283) ^ i] = i;
            for (s = o = 0; !n[s]; s ^= f || 1, o = a[o] || 1) {
                h = o ^ o << 1 ^ o << 2 ^ o << 3 ^ o << 4, h = h >> 8 ^ h & 255 ^ 99, n[s] = h, r[h] = s, c = u[l = u[f = u[s]]], d = c * 16843009 ^ l * 65537 ^ f * 257 ^ s * 16843008, p = u[h] * 257 ^ h * 16843008;
                for (i = 0; i < 4; i++) e[i][s] = p = p << 24 ^ p >>> 8, t[i][h] = d = d << 24 ^ d >>> 8
            }
            for (i = 0; i < 5; i++) e[i] = e[i].slice(0), t[i] = t[i].slice(0)
        },
        _crypt: function (e, t) {
            if (e.length !== 4) throw new vt.exception.invalid("invalid aes block size");
            var n = this._key[t],
                r = e[0] ^ n[0],
                i = e[t ? 3 : 1] ^ n[1],
                s = e[2] ^ n[2],
                o = e[t ? 1 : 3] ^ n[3],
                u, a, f, l = n.length / 4 - 2,
                c, h = 4,
                p = [0, 0, 0, 0],
                d = this._tables[t],
                v = d[0],
                m = d[1],
                g = d[2],
                y = d[3],
                b = d[4];
            for (c = 0; c < l; c++) u = v[r >>> 24] ^ m[i >> 16 & 255] ^ g[s >> 8 & 255] ^ y[o & 255] ^ n[h], a = v[i >>> 24] ^ m[s >> 16 & 255] ^ g[o >> 8 & 255] ^ y[r & 255] ^ n[h + 1], f = v[s >>> 24] ^ m[o >> 16 & 255] ^ g[r >> 8 & 255] ^ y[i & 255] ^ n[h + 2], o = v[o >>> 24] ^ m[r >> 16 & 255] ^ g[i >> 8 & 255] ^ y[s & 255] ^ n[h + 3], h += 4, r = u, i = a, s = f;
            for (c = 0; c < 4; c++) p[t ? 3 & -c : c] = b[r >>> 24] << 24 ^ b[i >> 16 & 255] << 16 ^ b[s >> 8 & 255] << 8 ^ b[o & 255] ^ n[h++], u = r, r = i, i = s, s = o, o = u;
            return p
        }
    }, vt.bitArray = {
        bitSlice: function (e, t, n) {
            return e = vt.bitArray._shiftRight(e.slice(t / 32), 32 - (t & 31)).slice(1), n === undefined ? e : vt.bitArray.clamp(e, n - t)
        },
        extract: function (e, t, n) {
            var r, i = Math.floor(-t - n & 31);
            return (t + n - 1 ^ t) & -32 ? r = e[t / 32 | 0] << 32 - i ^ e[t / 32 + 1 | 0] >>> i : r = e[t / 32 | 0] >>> i, r & (1 << n) - 1
        },
        concat: function (e, t) {
            if (e.length === 0 || t.length === 0) return e.concat(t);
            var n, r, i = e[e.length - 1],
                s = vt.bitArray.getPartial(i);
            return s === 32 ? e.concat(t) : vt.bitArray._shiftRight(t, s, i | 0, e.slice(0, e.length - 1))
        },
        bitLength: function (e) {
            var t = e.length,
                n;
            return t === 0 ? 0 : (n = e[t - 1], (t - 1) * 32 + vt.bitArray.getPartial(n))
        },
        clamp: function (e, t) {
            if (e.length * 32 < t) return e;
            e = e.slice(0, Math.ceil(t / 32));
            var n = e.length;
            return t &= 31, n > 0 && t && (e[n - 1] = vt.bitArray.partial(t, e[n - 1] & 2147483648 >> t - 1, 1)), e
        },
        partial: function (e, t, n) {
            return e === 32 ? t : (n ? t | 0 : t << 32 - e) + e * 1099511627776
        },
        getPartial: function (e) {
            return Math.round(e / 1099511627776) || 32
        },
        equal: function (e, t) {
            if (vt.bitArray.bitLength(e) !== vt.bitArray.bitLength(t)) return !1;
            var n = 0,
                r;
            for (r = 0; r < e.length; r++) n |= e[r] ^ t[r];
            return n === 0
        },
        _shiftRight: function (e, t, n, r) {
            var i, s = 0,
                o;
            r === undefined && (r = []);
            for (; t >= 32; t -= 32) r.push(n), n = 0;
            if (t === 0) return r.concat(e);
            for (i = 0; i < e.length; i++) r.push(n | e[i] >>> t), n = e[i] << 32 - t;
            return s = e.length ? e[e.length - 1] : 0, o = vt.bitArray.getPartial(s), r.push(vt.bitArray.partial(t + o & 31, t + o > 32 ? n : r.pop(), 1)), r
        },
        _xor4: function (e, t) {
            return [e[0] ^ t[0], e[1] ^ t[1], e[2] ^ t[2], e[3] ^ t[3]]
        }
    }, vt.codec.hex = {
        fromBits: function (e) {
            var t = "",
                n, r;
            for (n = 0; n < e.length; n++) t += ((e[n] | 0) + 0xf00000000000).toString(16).substr(4);
            return t.substr(0, vt.bitArray.bitLength(e) / 4)
        },
        toBits: function (e) {
            var t, n = [],
                r;
            e = e.replace(/\s|0x/g, ""), r = e.length, e += "00000000";
            for (t = 0; t < e.length; t += 8) n.push(parseInt(e.substr(t, 8), 16) ^ 0);
            return vt.bitArray.clamp(n, r * 4)
        }
    }, vt.codec.utf8String = {
        fromBits: function (e) {
            var t = "",
                n = vt.bitArray.bitLength(e),
                r, i;
            for (r = 0; r < n / 8; r++)(r & 3) === 0 && (i = e[r / 4]), t += String.fromCharCode(i >>> 24), i <<= 8;
            return decodeURIComponent(escape(t))
        },
        toBits: function (e) {
            e = unescape(encodeURIComponent(e));
            var t = [],
                n, r = 0;
            for (n = 0; n < e.length; n++) r = r << 8 | e.charCodeAt(n), (n & 3) === 3 && (t.push(r), r = 0);
            return n & 3 && t.push(vt.bitArray.partial(8 * (n & 3), r)), t
        }
    }, vt.codec.base64 = {
        _chars: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
        fromBits: function (e, t, n) {
            var r = "",
                i, s = 0,
                o = vt.codec.base64._chars,
                u = 0,
                a = vt.bitArray.bitLength(e);
            n && (o = o.substr(0, 62) + "-_");
            for (i = 0; r.length * 6 < a;) r += o.charAt((u ^ e[i] >>> s) >>> 26), s < 6 ? (u = e[i] << 6 - s, s += 26, i++) : (u <<= 6, s -= 6);
            while (r.length & 3 && !t) r += "=";
            return r
        },
        toBits: function (e, t) {
            e = e.replace(/\s|=/g, "");
            var n = [],
                r, i = 0,
                s = vt.codec.base64._chars,
                o = 0,
                u;
            t && (s = s.substr(0, 62) + "-_");
            for (r = 0; r < e.length; r++) {
                u = s.indexOf(e.charAt(r));
                if (u < 0) throw new vt.exception.invalid("this isn't base64!");
                i > 26 ? (i -= 26, n.push(o ^ u >>> i), o = u << 32 - i) : (i += 6, o ^= u << 32 - i)
            }
            return i & 56 && n.push(vt.bitArray.partial(i & 56, o, 1)), n
        }
    }, vt.codec.base64url = {
        fromBits: function (e) {
            return vt.codec.base64.fromBits(e, 1, 1)
        },
        toBits: function (e) {
            return vt.codec.base64.toBits(e, 1)
        }
    }, vt.beware === undefined && (vt.beware = {}), vt.beware["CBC mode is dangerous because it doesn't protect message integrity."] = function () {
        vt.mode.cbc = {
            name: "cbc",
            encrypt: function (e, t, n, r) {
                if (r && r.length) throw new vt.exception.invalid("cbc can't authenticate data");
                if (vt.bitArray.bitLength(n) !== 128) throw new vt.exception.invalid("cbc iv must be 128 bits");
                var i, s = vt.bitArray,
                    o = s._xor4,
                    u = s.bitLength(t),
                    a = 0,
                    f = [];
                if (u & 7) throw new vt.exception.invalid("pkcs#5 padding only works for multiples of a byte");
                for (i = 0; a + 128 <= u; i += 4, a += 128) n = e.encrypt(o(n, t.slice(i, i + 4))), f.splice(i, 0, n[0], n[1], n[2], n[3]);
                return u = (16 - (u >> 3 & 15)) * 16843009, n = e.encrypt(o(n, s.concat(t, [u, u, u, u]).slice(i, i + 4))), f.splice(i, 0, n[0], n[1], n[2], n[3]), f
            },
            decrypt: function (e, t, n, r) {
                if (r && r.length) throw new vt.exception.invalid("cbc can't authenticate data");
                if (vt.bitArray.bitLength(n) !== 128) throw new vt.exception.invalid("cbc iv must be 128 bits");
                if (vt.bitArray.bitLength(t) & 127 || !t.length) throw new vt.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");
                var i, s = vt.bitArray,
                    o = s._xor4,
                    u, a, f = [];
                r = r || [];
                for (i = 0; i < t.length; i += 4) u = t.slice(i, i + 4), a = o(n, e.decrypt(u)), f.splice(i, 0, a[0], a[1], a[2], a[3]), n = u;
                u = f[i - 1] & 255;
                if (u == 0 || u > 16) throw new vt.exception.corrupt("pkcs#5 padding corrupt");
                a = u * 16843009;
                if (!s.equal(s.bitSlice([a, a, a, a], 0, u * 8), s.bitSlice(f, f.length * 32 - u * 8, f.length * 32))) throw new vt.exception.corrupt("pkcs#5 padding corrupt");
                return s.bitSlice(f, 0, f.length * 32 - u * 8)
            }
        }
    }, vt.misc.hmac = function (e, t) {
        this._hash = t = t || vt.hash.sha256;
        var n = [
            [],
            []
        ],
            r, i = t.prototype.blockSize / 32;
        this._baseHash = [new t, new t], e.length > i && (e = t.hash(e));
        for (r = 0; r < i; r++) n[0][r] = e[r] ^ 909522486, n[1][r] = e[r] ^ 1549556828;
        this._baseHash[0].update(n[0]), this._baseHash[1].update(n[1])
    }, vt.misc.hmac.prototype.encrypt = vt.misc.hmac.prototype.mac = function (e, t) {
        var n = (new this._hash(this._baseHash[0])).update(e, t).finalize();
        return (new this._hash(this._baseHash[1])).update(n).finalize()
    }, vt.hash.sha256 = function (e) {
        this._key[0] || this._precompute(), e ? (this._h = e._h.slice(0), this._buffer = e._buffer.slice(0), this._length = e._length) : this.reset()
    }, vt.hash.sha256.hash = function (e) {
        return (new vt.hash.sha256).update(e).finalize()
    }, vt.hash.sha256.prototype = {
        blockSize: 512,
        reset: function () {
            return this._h = this._init.slice(0), this._buffer = [], this._length = 0, this
        },
        update: function (e) {
            typeof e == "string" && (e = vt.codec.utf8String.toBits(e));
            var t, n = this._buffer = vt.bitArray.concat(this._buffer, e),
                r = this._length,
                i = this._length = r + vt.bitArray.bitLength(e);
            for (t = 512 + r & -512; t <= i; t += 512) this._block(n.splice(0, 16));
            return this
        },
        finalize: function () {
            var e, t = this._buffer,
                n = this._h;
            t = vt.bitArray.concat(t, [vt.bitArray.partial(1, 1)]);
            for (e = t.length + 2; e & 15; e++) t.push(0);
            t.push(Math.floor(this._length / 4294967296)), t.push(this._length | 0);
            while (t.length) this._block(t.splice(0, 16));
            return this.reset(), n
        },
        _init: [],
        _key: [],
        _precompute: function () {
            function r(e) {
                return (e - Math.floor(e)) * 4294967296 | 0
            }
            var e = 0,
                t = 2,
                n;
            e: for (; e < 64; t++) {
                for (n = 2; n * n <= t; n++)
                    if (t % n === 0) continue e;
                e < 8 && (this._init[e] = r(Math.pow(t, .5))), this._key[e] = r(Math.pow(t, 1 / 3)), e++
            }
        },
        _block: function (e) {
            var t, n, r, i, s = e.slice(0),
                o = this._h,
                u = this._key,
                a = o[0],
                f = o[1],
                l = o[2],
                c = o[3],
                h = o[4],
                p = o[5],
                d = o[6],
                v = o[7];
            for (t = 0; t < 64; t++) t < 16 ? n = s[t] : (r = s[t + 1 & 15], i = s[t + 14 & 15], n = s[t & 15] = (r >>> 7 ^ r >>> 18 ^ r >>> 3 ^ r << 25 ^ r << 14) + (i >>> 17 ^ i >>> 19 ^ i >>> 10 ^ i << 15 ^ i << 13) + s[t & 15] + s[t + 9 & 15] | 0), n = n + v + (h >>> 6 ^ h >>> 11 ^ h >>> 25 ^ h << 26 ^ h << 21 ^ h << 7) + (d ^ h & (p ^ d)) + u[t], v = d, d = p, p = h, h = c + n | 0, c = l, l = f, f = a, a = n + (f & l ^ c & (f ^ l)) + (f >>> 2 ^ f >>> 13 ^ f >>> 22 ^ f << 30 ^ f << 19 ^ f << 10) | 0;
            o[0] = o[0] + a | 0, o[1] = o[1] + f | 0, o[2] = o[2] + l | 0, o[3] = o[3] + c | 0, o[4] = o[4] + h | 0, o[5] = o[5] + p | 0, o[6] = o[6] + d | 0, o[7] = o[7] + v | 0
        }
    }, vt.random = {
        randomWords: function (e, t) {
            var n = [],
                r, i = this.isReady(t),
                s;
            if (i === this._NOT_READY) throw new vt.exception.notReady("generator isn't seeded");
            i & this._REQUIRES_RESEED && this._reseedFromPools(!(i & this._READY));
            for (r = 0; r < e; r += 4)(r + 1) % this._MAX_WORDS_PER_BURST === 0 && this._gate(), s = this._gen4words(), n.push(s[0], s[1], s[2], s[3]);
            return this._gate(), n.slice(0, e)
        },
        setDefaultParanoia: function (e) {
            this._defaultParanoia = e
        },
        addEntropy: function (e, t, n) {
            n = n || "user";
            var r, i, s, o = (new Date).valueOf(),
                u = this._robins[n],
                a = this.isReady(),
                f = 0;
            r = this._collectorIds[n], r === undefined && (r = this._collectorIds[n] = this._collectorIdNext++), u === undefined && (u = this._robins[n] = 0), this._robins[n] = (this._robins[n] + 1) % this._pools.length;
            switch (typeof e) {
            case "number":
                t === undefined && (t = 1), this._pools[u].update([r, this._eventId++, 1, t, o, 1, e | 0]);
                break;
            case "object":
                var l = Object.prototype.toString.call(e);
                if (l === "[object Uint32Array]") {
                    s = [];
                    for (i = 0; i < e.length; i++) s.push(e[i]);
                    e = s
                } else {
                    l !== "[object Array]" && (f = 1);
                    for (i = 0; i < e.length && !f; i++) typeof e[i] != "number" && (f = 1)
                } if (!f) {
                    if (t === undefined) {
                        t = 0;
                        for (i = 0; i < e.length; i++) {
                            s = e[i];
                            while (s > 0) t++, s >>>= 1
                        }
                    }
                    this._pools[u].update([r, this._eventId++, 2, t, o, e.length].concat(e))
                }
                break;
            case "string":
                t === undefined && (t = e.length), this._pools[u].update([r, this._eventId++, 3, t, o, e.length]), this._pools[u].update(e);
                break;
            default:
                f = 1
            }
            if (f) throw new vt.exception.bug("random: addEntropy only supports number, array of numbers or string");
            this._poolEntropy[u] += t, this._poolStrength += t, a === this._NOT_READY && (this.isReady() !== this._NOT_READY && this._fireEvent("seeded", Math.max(this._strength, this._poolStrength)), this._fireEvent("progress", this.getProgress()))
        },
        isReady: function (e) {
            var t = this._PARANOIA_LEVELS[e !== undefined ? e : this._defaultParanoia];
            return this._strength && this._strength >= t ? this._poolEntropy[0] > this._BITS_PER_RESEED && (new Date).valueOf() > this._nextReseed ? this._REQUIRES_RESEED | this._READY : this._READY : this._poolStrength >= t ? this._REQUIRES_RESEED | this._NOT_READY : this._NOT_READY
        },
        getProgress: function (e) {
            var t = this._PARANOIA_LEVELS[e ? e : this._defaultParanoia];
            return this._strength >= t ? 1 : this._poolStrength > t ? 1 : this._poolStrength / t
        },
        startCollectors: function () {
            if (this._collectorsStarted) return;
            if (window.addEventListener) window.addEventListener("load", this._loadTimeCollector, !1), window.addEventListener("mousemove", this._mouseCollector, !1);
            else {
                if (!document.attachEvent) throw new vt.exception.bug("can't attach event");
                document.attachEvent("onload", this._loadTimeCollector), document.attachEvent("onmousemove", this._mouseCollector)
            }
            this._collectorsStarted = !0
        },
        stopCollectors: function () {
            if (!this._collectorsStarted) return;
            window.removeEventListener ? (window.removeEventListener("load", this._loadTimeCollector, !1), window.removeEventListener("mousemove", this._mouseCollector, !1)) : window.detachEvent && (window.detachEvent("onload", this._loadTimeCollector), window.detachEvent("onmousemove", this._mouseCollector)), this._collectorsStarted = !1
        },
        addEventListener: function (e, t) {
            this._callbacks[e][this._callbackI++] = t
        },
        removeEventListener: function (e, t) {
            var n, r, i = this._callbacks[e],
                s = [];
            for (r in i) i.hasOwnProperty(r) && i[r] === t && s.push(r);
            for (n = 0; n < s.length; n++) r = s[n], delete i[r]
        },
        _pools: [new vt.hash.sha256],
        _poolEntropy: [0],
        _reseedCount: 0,
        _robins: {},
        _eventId: 0,
        _collectorIds: {},
        _collectorIdNext: 0,
        _strength: 0,
        _poolStrength: 0,
        _nextReseed: 0,
        _key: [0, 0, 0, 0, 0, 0, 0, 0],
        _counter: [0, 0, 0, 0],
        _cipher: undefined,
        _defaultParanoia: 6,
        _collectorsStarted: !1,
        _callbacks: {
            progress: {},
            seeded: {}
        },
        _callbackI: 0,
        _NOT_READY: 0,
        _READY: 1,
        _REQUIRES_RESEED: 2,
        _MAX_WORDS_PER_BURST: 65536,
        _PARANOIA_LEVELS: [0, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024],
        _MILLISECONDS_PER_RESEED: 3e4,
        _BITS_PER_RESEED: 80,
        _gen4words: function () {
            for (var e = 0; e < 4; e++) {
                this._counter[e] = this._counter[e] + 1 | 0;
                if (this._counter[e]) break
            }
            return this._cipher.encrypt(this._counter)
        },
        _gate: function () {
            this._key = this._gen4words().concat(this._gen4words()), this._cipher = new vt.cipher.aes(this._key)
        },
        _reseed: function (e) {
            this._key = vt.hash.sha256.hash(this._key.concat(e)), this._cipher = new vt.cipher.aes(this._key);
            for (var t = 0; t < 4; t++) {
                this._counter[t] = this._counter[t] + 1 | 0;
                if (this._counter[t]) break
            }
        },
        _reseedFromPools: function (e) {
            var t = [],
                n = 0,
                r;
            this._nextReseed = t[0] = (new Date).valueOf() + this._MILLISECONDS_PER_RESEED;
            for (r = 0; r < 16; r++) t.push(Math.random() * 4294967296 | 0);
            for (r = 0; r < this._pools.length; r++) {
                t = t.concat(this._pools[r].finalize()), n += this._poolEntropy[r], this._poolEntropy[r] = 0;
                if (!e && this._reseedCount & 1 << r) break
            }
            this._reseedCount >= 1 << this._pools.length && (this._pools.push(new vt.hash.sha256), this._poolEntropy.push(0)), this._poolStrength -= n, n > this._strength && (this._strength = n), this._reseedCount++, this._reseed(t)
        },
        _mouseCollector: function (e) {
            var t = e.x || e.clientX || e.offsetX || 0,
                n = e.y || e.clientY || e.offsetY || 0;
            vt.random.addEntropy([t, n], 2, "mouse")
        },
        _loadTimeCollector: function (e) {
            vt.random.addEntropy((new Date).valueOf(), 2, "loadtime")
        },
        _fireEvent: function (e, t) {
            var n, r = vt.random._callbacks[e],
                i = [];
            for (n in r) r.hasOwnProperty(n) && i.push(r[n]);
            for (n = 0; n < i.length; n++) i[n](t)
        }
    },
    function () {
        try {
            var e = new Uint32Array(32);
            crypto.getRandomValues(e), vt.random.addEntropy(e, 1024, "crypto.getRandomValues")
        } catch (t) {}
    }();
    for (k in vt.beware) vt.beware.hasOwnProperty(k) && vt.beware[k]();
    return Braintree = {
        sjcl: vt,
        version: "1.2.0"
    }, Braintree.create = function (e) {
        var n = {
            publicKey: e
        }, r = function () {
                return {
                    key: vt.random.randomWords(8, 0),
                    encrypt: function (e) {
                        return this.encryptWithIv(e, vt.random.randomWords(4, 0))
                    },
                    encryptWithIv: function (e, t) {
                        var n = new vt.cipher.aes(this.key),
                            r = vt.codec.utf8String.toBits(e),
                            i = vt.mode.cbc.encrypt(n, r, t),
                            s = vt.bitArray.concat(t, i);
                        return vt.codec.base64.fromBits(s)
                    }
                }
            }, i = function () {
                return {
                    key: vt.random.randomWords(8, 0),
                    sign: function (e) {
                        var t = new vt.misc.hmac(this.key, vt.hash.sha256),
                            n = t.encrypt(e);
                        return vt.codec.base64.fromBits(n)
                    }
                }
            }, s = function (e) {
                var t = [];
                if (e.typeName() == "INTEGER") {
                    var n = e.posContent(),
                        r = e.posEnd(),
                        i = e.stream.hexDump(n, r).replace(/[ \n]/g, "");
                    t.push(i)
                }
                if (e.sub != null)
                    for (var o = 0; o < e.sub.length; o++) t = t.concat(s(e.sub[o]));
                return t
            }, u = function (e) {
                var n = o(e),
                    r = t.decode(n),
                    i = s(r);
                if (i.length != 2) throw "Malformed public key";
                var u = i[0],
                    a = i[1],
                    f = new lt;
                return f.setPublic(u, a), f
            }, a = function (e) {
                var t = u(n.publicKey),
                    s = r(),
                    o = i(),
                    a = s.encrypt(e),
                    f = o.sign(vt.codec.base64.toBits(a)),
                    l = vt.bitArray.concat(s.key, o.key),
                    c = vt.codec.base64.fromBits(l),
                    h = t.encrypt_b64(c),
                    p = "$bt4|javascript_" + Braintree.version.replace(/\./g, "_") + "$";
                return p + h + "$" + a + "$" + f
            }, f = new function () {
                this.encrypt = a, this.generateAesKey = r, this.generateRsaKey = u, this.publicKey = n.publicKey, this.version = Braintree.version, this.formEncrypter = new Braintree.FormEncrypter(this), this.onSubmitEncryptForm = this.formEncrypter.onSubmitEncryptForm
            };
        return vt.random.startCollectors(), f
    },
    function () {
        var e, t = function (e, t) {
                return function () {
                    return e.apply(t, arguments)
                }
            };
        e = function () {
            function e(e) {
                this.bt = e, this.onSubmitEncryptForm = t(this.onSubmitEncryptForm, this), this.encryptForm = t(this.encryptForm, this)
            }
            return e.prototype.create = function (e, t) {
                var n, r, i;
                t == null && (t = {}), n = document.createElement(e);
                for (r in t) i = t[r], n.setAttribute(r, i);
                return n
            }, e.prototype.inputElements = function (e) {
                var t, n;
                return n = [], t = function (e) {
                    var r, i, s, o, u;
                    o = e.children, u = [];
                    for (i = 0, s = o.length; i < s; i++) r = o[i], r.attributes["data-encrypted-name"] ? u.push(n.push(r)) : u.push(t(r));
                    return u
                }, t(e), n
            }, e.prototype.encryptForm = function (e) {
                var t, n, r, i, s, o, u, a;
                u = this.inputElements(e), a = [];
                for (s = 0, o = u.length; s < o; s++) t = u[s], r = t.getAttribute("data-encrypted-name"), n = this.bt.encrypt(t.value), t.removeAttribute("name"), i = this.create("input", {
                        value: n,
                        type: "hidden",
                        name: r
                    }), a.push(e.appendChild(i));
                return a
            }, e.prototype.extractForm = function (e) {
                return window.jQuery && e instanceof jQuery ? e[0] : e instanceof Object ? e : document.getElementById(e)
            }, e.prototype.onSubmitEncryptForm = function (e, t) {
                var n, r = this;
                t == null && (t = function (e) {
                    return e
                }), e = this.extractForm(e), n = function (n) {
                    return r.encryptForm(e), t(n)
                };
                if (window.jQuery) return window.jQuery(e).submit(n);
                if (e.addEventListener) return e.addEventListener("submit", n, !1);
                if (e.attachEvent) return e.attachEvent("onsubmit", n)
            }, e
        }(), Braintree.FormEncrypter = e
    }.call(this), Braintree
}();
var Queenbee = {
    DOM: {
        select: function (e) {
            return window.jQuery ? jQuery(e) : $$(e)
        },
        ready: function (e) {
            window.jQuery ? jQuery(document).ready(e) : document.on("dom:loaded", e)
        }
    },
    Gateway: {
        configure: function () {
            var e = function (e) {
                var t = Queenbee.DOM.select("meta[name=" + e + "]")[0];
                return t ? t.content : null
            };
            Queenbee.Gateway.environment = e("qb-environment"), Queenbee.Gateway.publicKey = e("qb-public-encryption-key"), Queenbee.Gateway.instance = Braintree.create(Queenbee.Gateway.publicKey)
        }
    },
    CreditCard: {
        testNumbers: ["378282246310005", "371449635398431", "378734493671000", "30569309025904", "38520000023237", "4111111111111111", "4012888888881881", "4222222222222", "4242424242424242", "5555555555554444", "5105105105105100", "6011111111111117", "6011000990139424"],
        isTestNumber: function (e) {
            for (var t = 0; t < Queenbee.CreditCard.testNumbers.length; t++)
                if (Queenbee.CreditCard.testNumbers[t] == e) return !0;
            return !1
        },
        validateNumber: function (e) {
            if (String(e).replace(/\s+/g, "").length == 0) return !1;
            if (Queenbee.Gateway.environment.match(/^production/) && Queenbee.CreditCard.isTestNumber(e)) return !1;
            var t = 0;
            for (var n = 0; n < e.length; n++) {
                var r = (parseInt(e.substr(e.length - n - 1, 1)) * (1 + n % 2)).toString();
                for (var i = 0; i < r.length; i++) t += parseInt(r.substr(i, 1))
            }
            return t % 10 == 0
        },
        validateCVV: function (e) {
            return /^\d{3,4}$/.test(e)
        },
        validateZipCode: function (e) {
            return /\w+/.test(e)
        },
        encryptForm: function (e) {
            Queenbee.Gateway.instance.formEncrypter.encryptForm(e)
        }
    }
};
Queenbee.DOM.ready(Queenbee.Gateway.configure),
function () {
    var e;
    (e = window.bcx) == null && (window.bcx = {}), _.extend(bcx, {
            models: {},
            collections: {},
            views: {},
            helpers: {},
            env: "production",
            bucketColors: ["3185c5", "000099", "3B9E93", "009900", "aa0000", "ec61a2", "cc6633", "666666", "000000", "660099", "ff9c00", "e207c1", "a5460d", "650606", "482a15", "2c5322", "b3a543", "46647c"],
            storage: new StorageAdapter(window.localStorage, bcx.storageNamespace),
            trivialChange: 0
        })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f, l, c = [].slice;
    n = (f = window.localStorage) != null ? f.debug : void 0, r = {}, (t = (l = window.chrome) != null ? l.csi : void 0) ? s = function (e, n, r) {
        var i, s;
        return s = t().pageT, e.apply(n, r), i = t().pageT - s, Math.round(i * 100) / 100
    } : s = function (e, t, n) {
        var r;
        return r = (new Date).getTime(), e.apply(t, n), (new Date).getTime() - r
    }, a = function (e) {
        return o ? u.push(e) : e()
    }, i = function (e) {
        return function () {
            var t, i, o, u, f, l, h, p;
            t = 1 <= arguments.length ? c.call(arguments, 0) : [], n && a(function () {
                return console.group("[%s]", e)
            }), h = r[e], u = function (e, r) {
                return a(function () {
                    var i;
                    try {
                        i = s(e, this, t);
                        if (n) return console.log("%sms: %s", i, r)
                    } catch (o) {
                        if (n) return console.error("%s raised:\n%s", r, o)
                    }
                })
            };
            for (f = 0, l = h.length; f < l; f++) p = h[f], o = p[0], i = p[1], u(o, i);
            if (n) return a(function () {
                return console.groupEnd("[%s]", e)
            })
        }
    }, e = function (e, t, n) {
        var s, o;
        return n == null && (n = "(anonymous)"), s = [t, n], (o = r[e]) ? o.push(s) : (r[e] = [s], $(document).bind(e, i(e)))
    }, o = !1, u = [], _.extend(bcx, {
            on: function (t, n, r) {
                var i, s, o, u, a;
                r == null && (r = n, n = null), u = t.split(" "), a = [];
                for (s = 0, o = u.length; s < o; s++) i = u[s], a.push(e(i, r, n));
                return a
            },
            trigger: function (e) {
                return $(document).trigger(e)
            },
            pause: function () {
                return o = !0
            },
            resume: function () {
                return this.flush(), o = !1
            },
            flush: function () {
                var e;
                e = [];
                while (this.step()) e.push(!0);
                return e
            },
            step: function () {
                var e;
                if (e = u.shift()) return e(), !0
            },
            debug: function () {
                n = !0;
                try {
                    return window.localStorage.setItem("debug", !0)
                } catch (e) {}
            },
            stopDebugging: function () {
                n = !1;
                try {
                    return window.localStorage.removeItem("debug")
                } catch (e) {}
            }
        })
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.Model = function (e) {
        function n() {
            var e = this;
            n.__super__.constructor.apply(this, arguments), this.bind("change", function () {
                return e.memos = {}
            }), this.memos = {}
        }
        return t(n, e), n.memoize = function (e) {
            var t, n, r;
            return (r = (n = this.memoize).index) == null && (n.index = 0), t = this.memoize.index++,
            function () {
                var n, r;
                return (r = (n = this.memos)[t]) != null ? r : n[t] = e.apply(this, arguments)
            }
        }, n.prototype.sync = function (e, t, n) {
            return n == null && (n = {}), n.dataType = "script", e === "trash" ? this._trash(n) : Backbone.sync(e, t, n)
        }, n.prototype.parse = function (e, t) {
            try {
                return JSON.parse(e)
            } catch (n) {
                return {}
            }
        }, n.prototype.trash = function (e) {
            return this.sync("trash", this, e)
        }, n.prototype._trash = function (e) {
            var t, n, r = this;
            return n = typeof this.url == "function" ? this.url() : this.url, n += "/trash", e.url = n, e.type = "POST", t = e.success, e.success = function () {
                return r.trigger("destroy"), r.trigger("sync"), typeof t == "function" ? t() : void 0
            }, $.ajax(e)
        }, n.prototype.calendarDate = function (e) {
            var t;
            if (t = this.get(e)) return CalendarDate.parse(t)
        }, n.prototype.calendarTime = function (e) {
            var t;
            if (t = this.get(e)) return CalendarTime.parse(t)
        }, n.prototype.date = function (e) {
            var t;
            if (t = this.get(e)) return Date.parse(t)
        }, n
    }(Backbone.Model)
}.call(this),
function () {
    bcx.helpers.EmojiHelper = function () {
        function e() {}
        return e.prototype.emojify = function (e) {
            return this.safe(Emoji.emojify(this.escape(e)))
        }, e
    }()
}.call(this),
function () {
    bcx.helpers.HumanNameHelper = function () {
        function e() {}
        return e.prototype.humanize = function (e) {
            return e === "calendar_event" ? "event" : e
        }, e
    }()
}.call(this),
function () {
    bcx.helpers.PluralizeHelper = function () {
        function e() {}
        return e.prototype.pluralize = function (e, t, n) {
            return n == null && (n = "" + t + "s"), (e != null ? e.length : void 0) != null && (e = e.length), e === 1 ? "" + e + " " + t : "" + e + " " + n
        }, e
    }()
}.call(this),
function () {
    bcx.helpers.TruncateHelper = function () {
        function e() {}
        return e.prototype.truncateWord = function (e, t) {
            var n;
            return n = e.split(" "), n.length > t ? n.splice(0, t).join(" ") + "" : e
        }, e
    }()
}.call(this),
function () {}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        }, n = [].slice;
    bcx.View = function (e) {
        function o() {
            o.__super__.constructor.apply(this, arguments), typeof this.setup == "function" && this.setup()
        }
        var r, i, s;
        t(o, e), o.include = function () {
            var e, t, r, i, s, o, u, a, f;
            t = 1 <= arguments.length ? n.call(arguments, 0) : [], f = [];
            for (u = 0, a = t.length; u < a; u++) e = t[u], i = this.prototype.setup, r = this.prototype.constructor, s = this.prototype, _.extend(this.prototype, e.prototype), _.extend(this, e), i && i !== this.prototype.setup && (o = this.prototype.setup, this.prototype.setup = function () {
                return i(), o()
            }), r && r !== this.prototype.constructor && (this.prototype.constructor = r), s && s !== this.prototype ? f.push(this.prototype = s) : f.push(void 0);
            return f
        }, s = bcx.helpers;
        for (i in s) r = s[i], o.include(r);
        return o.templatePrefix = "templates/", o.prototype.withContext = function (e) {
            return e == null && (e = {}), _.extend(_.extend({}, this), e)
        }, o.prototype.renderTemplate = function (e, t) {
            var n;
            return t == null && (t = this), n = new String(JST["" + this.constructor.templatePrefix + e](t)), n.ecoSafe = !0, n
        }, o
    }(Backbone.View)
}.call(this),
function () {
    bcx.EmailAddressHelper = {
        looksLikeEmailAddress: function (e) {
            return /@/.test(e)
        },
        validEmailAddress: function (e) {
            return /^[\/+'a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e)
        },
        extractEmailAddressesFrom: function (e) {
            return _.uniq(e.match(/([\/+'a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6})/g))
        }
    }
}.call(this),
function () {
    var e, t, n, r, i = {}.hasOwnProperty,
        s = function (e, t) {
            function r() {
                this.constructor = e
            }
            for (var n in t) i.call(t, n) && (e[n] = t[n]);
            return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
        };
    r = bcx.EmailAddressHelper, n = r.validEmailAddress, t = r.looksLikeEmailAddress, bcx.models.PersonOrGroup = function (r) {
        function i() {
            return i.__super__.constructor.apply(this, arguments)
        }
        return s(i, r), i.prototype.setInput = function (e) {
            var n;
            return this.clear({
                    silent: !0
                }), e = e.trim(), n = {
                input: e
            }, e.length && (t(e) ? n.email_address = e : n.name = e), this.set(n)
        }, i.prototype.isBlank = function () {
            return this.isNew() && (this.has("input") === !1 || this.get("input") === "")
        }, i.prototype.hasUnknownName = function () {
            return this.has("name") && this.isNew()
        }, i.prototype.hasInvalidEmailAddress = function () {
            return this.has("email_address") && !this.hasValidEmailAddress()
        }, i.prototype.hasValidEmailAddress = function () {
            return this.has("email_address") && n(this.get("email_address"))
        }, i.prototype.isGroup = function () {
            return this.has("member_ids")
        }, i.prototype.isSubgroup = function () {
            return this.isGroup() && this.has("parent_id")
        }, i.prototype.isPerson = function () {
            return !this.isGroup()
        }, i.prototype.isNewlyInvitedPerson = function () {
            return this.isPerson() && !this.has("name") && this.hasValidEmailAddress()
        }, i.prototype.emailAddressAlphanumeric = function () {
            return this.get("email_address").replace(/\W/g, "-")
        }, i.prototype.members = function () {
            var t, n;
            if (this.isGroup() && this.collection) return n = function () {
                var e, n, r, i;
                r = this.get("member_ids"), i = [];
                for (e = 0, n = r.length; e < n; e++) t = r[e], i.push(this.collection.get(t));
                return i
            }.call(this), new e(n)
        }, i.prototype.subgroups = function () {
            var e, t = this;
            if (!this.isSubgroup() && !this.isPerson()) return e = this.collection.filter(function (e) {
                return e.get("parent_id") === t.get("group_id")
            }), new bcx.collections.PeopleAndGroups(e)
        }, i.prototype.group = function () {
            var e = this;
            if (this.isSubgroup()) return this.collection.find(function (t) {
                return t.get("group_id") === e.get("parent_id")
            })
        }, i.prototype.isEnabled = function () {
            return this.isDisabled() === !1
        }, i.prototype.isDisabled = function () {
            var e;
            return ((e = this.collection) != null ? e.isDisabled : void 0) ? this.collection.isDisabled(this) : !1
        }, i.prototype.mailbox = function () {
            if (this.has("email_address")) return this.get("email_address").split("@")[0]
        }, i
    }(Backbone.Model), e = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return s(t, e), t.prototype.comparator = function (e) {
            return e.get("name")
        }, t.prototype.enabled = function () {
            return this.filter(function (e) {
                return e.isEnabled()
            })
        }, t.prototype.disabled = function () {
            return this.filter(function (e) {
                return e.isDisabled()
            })
        }, t
    }(Backbone.Collection)
}.call(this),
function () {
    var e, t, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        }, i = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    t = bcx.EmailAddressHelper.looksLikeEmailAddress, bcx.collections.PeopleAndGroups = function (n) {
        function s() {
            return s.__super__.constructor.apply(this, arguments)
        }
        return r(s, n), s.prototype.model = bcx.models.PersonOrGroup, s.prototype.initialize = function (e, t) {
            return t == null && (t = {}), this.disabledIds = t.disabledIds || []
        }, s.prototype.isDisabled = function (e) {
            var t;
            return t = e.id, i.call(this.disabledIds, t) >= 0
        }, s.prototype.comparator = function (e) {
            return e.get("name")
        }, s.prototype.search = function (e) {
            var t, n, r, i, s, o, u, a, f, l, c, h, p;
            e = e.trim(), r = this.createPatternMatchFor(e), s = [], p = this.models;
            for (f = 0, c = p.length; f < c; f++) o = p[f], a = r(o), a !== void 0 && s.push({
                    score: a,
                    option: o
                });
            u = function () {
                var e, t, n, r;
                n = s.sort(function (e, t) {
                    return e.score - t.score
                }), r = [];
                for (e = 0, t = n.length; e < t; e++) i = n[e], r.push(i.option);
                return r
            }(), n = [], t = [];
            for (l = 0, h = u.length; l < h; l++) o = u[l], o.isDisabled() ? t.push(o) : n.push(o);
            return {
                enabledOptions: n,
                disabledOptions: t
            }
        }, s.prototype.createPatternMatchFor = function (n) {
            var r;
            return r = new RegExp(e(n), "i"), t(n) ? function (e) {
                var t;
                return (t = r.exec(e.get("email_address"))) != null ? t.index : void 0
            } : function (e) {
                var t;
                return (t = r.exec(e.get("name")) || r.exec(e.mailbox())) != null ? t.index : void 0
            }
        }, s
    }(Backbone.Collection), e = function (e) {
        return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")
    }, bcx.peopleAndGroups = new bcx.collections.PeopleAndGroups, bcx.peopleAndGroups.loadedWithAccesses = !1, bcx.peopleAndGroups.loadWithAccesses = function () {
        if (!bcx.peopleAndGroups.loadedWithAccesses) return $.when($.getJSON("/people_and_groups.json"), $.getJSON("/buckets/accesses.json")).done(function (e, t) {
            return bcx.peopleAndGroups.loadedWithAccesses = !0, bcx.bucketAccesses.addOrUpdate(t[0]), bcx.peopleAndGroups.reset(e[0]), bcx.peopleAndGroups.trigger("loaded:withAccess", bcx.peopleAndGroups)
        })
    }, bcx.peopleAndGroups.loadCurrentProjectParticipants = function () {
        return $.getJSON("/projects/" + bcx.currentBucket.id + "/participants.json", function (e) {
            return bcx.peopleAndGroups.merge(e), bcx.peopleAndGroups.trigger("loaded:projectParticipants", bcx.peopleAndGroups)
        })
    }
}.call(this),
function () {
    var e, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        };
    bcx.views.AutocompletePeopleSuggestions = function (t) {
        function r() {
            return r.__super__.constructor.apply(this, arguments)
        }
        return n(r, t), r.prototype.displayElement = "[data-role~=suggestions_view]", r.prototype.template = "templates/autocomplete_people_suggestions", r.prototype.initialize = function () {
            var t = this;
            return this.model.bind("change", function () {
                return t.render()
            }), this.suggestions = new e, this.suggestions.bind("selection:changed", function () {
                return t.update()
            })
        }, r.prototype.events = {
            "focus input": "render",
            "keydown input": "onKeyPress",
            "touchstart [data-behavior~=select_suggestion]": "onSelectSuggestion",
            "mouseenter [data-behavior~=select_suggestion]": "onSelectSuggestion",
            "click [data-behavior~=select_suggestion]": "onClickSuggestion",
            clickoutside: "clear"
        }, r.prototype.render = function (e) {
            return this.suggestions.generate(this.model.get("input"), this.collection), this.suggestions.selectFirst(), this.$(this.displayElement).html(JST[this.template](this.withContext({
                            results: this.suggestions.results,
                            selected: this.suggestions.selected(),
                            showInvalidMessage: e && this.model.hasInvalidEmailAddress(),
                            showUnknownMessage: e && this.model.hasUnknownName()
                        })))
        }, r.prototype.update = function () {
            var e;
            return this.$("[data-suggestion-id].selected").removeClass("selected"), this.$("[data-suggestion-id=" + ((e = this.suggestions.selected()) != null ? e.id : void 0) + "]").addClass("selected")
        }, r.prototype.clear = function () {
            return this.$(this.displayElement).html("")
        }, r.prototype.commit = function (e, t) {
            var n, r, i, s;
            if (s = this.suggestions.selected()) {
                n = jQuery.Event("suggestions:commit", {
                        triggeredBy: e
                    }), i = function () {
                    var e, t, n, i;
                    if (s.isGroup()) {
                        n = s.get("member_ids"), i = [];
                        for (e = 0, t = n.length; e < t; e++) r = n[e], i.push(this.collection.get(r));
                        return i
                    }
                    return [s]
                }.call(this), $(this.el).trigger(n, [{
                            suggestion: s,
                            people: i
                        }
                    ]);
                if (n.isDefaultPrevented()) return t.preventDefault()
            }
        }, r.prototype.cancel = function () {
            var e;
            return e = this.$("input[type=text]"), e.val() ? e.val("") : e.blur(), this.clear()
        }, r.prototype.onKeyPress = function (e) {
            switch (e.which) {
            case $.ui.keyCode.TAB:
                return this.commit("tabKey", e);
            case $.ui.keyCode.ENTER:
                return this.commit("enterKey", e);
            case $.ui.keyCode.ESCAPE:
                return this.cancel(), e.preventDefault();
            case $.ui.keyCode.DOWN:
                return this.suggestions.selectNext(), e.preventDefault();
            case $.ui.keyCode.UP:
                return this.suggestions.selectPrevious(), e.preventDefault()
            }
        }, r.prototype.onSelectSuggestion = function (e) {
            return this.suggestions.selectById($(e.currentTarget).data("suggestion-id"))
        }, r.prototype.onClickSuggestion = function (e) {
            return this.commit("click", e)
        }, r
    }(bcx.View), e = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return n(t, e), t.prototype.minInputLength = 2, t.prototype.maxNumberOfResults = 10, t.prototype.comparator = function (e) {
            return e.get("name")
        }, t.prototype.generate = function (e, t) {
            return this.input = (e || "").trim(), this.input.length < this.minInputLength ? (this.results = {}, this.reset([])) : (this.results = t.search(e), this.results.enabledOptions = _.sortBy(this.results.enabledOptions.slice(0, this.maxNumberOfResults), this.comparator), this.results.disabledOptions = _.sortBy(this.results.disabledOptions.slice(0, this.maxNumberOfResults), this.comparator), this.reset(this.results.enabledOptions))
        }, t.prototype.selected = function () {
            return this.models[this.selectedIndex]
        }, t.prototype.selectById = function (e) {
            var t;
            return t = this.detect(function (t) {
                return t.id === e
            }), this.changeSelection(this.models.indexOf(t))
        }, t.prototype.selectFirst = function () {
            return this.changeSelection(0)
        }, t.prototype.selectLast = function () {
            return this.changeSelection(this.models.length - 1)
        }, t.prototype.selectNext = function () {
            var e;
            return e = this.selectedIndex + 1, this.models[e] ? this.changeSelection(e) : this.selectFirst()
        }, t.prototype.selectPrevious = function () {
            var e;
            return e = this.selectedIndex - 1, this.models[e] ? this.changeSelection(e) : this.selectLast()
        }, t.prototype.changeSelection = function (e) {
            return this.selectedIndex = e, this.trigger("selection:changed"), this.selected()
        }, t
    }(Backbone.Collection)
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    e = bcx.EmailAddressHelper.extractEmailAddressesFrom, bcx.views.InviteeField = function (n) {
        function i() {
            return this.remove = t(this.remove, this), this.replace = t(this.replace, this), this.appendTo = t(this.appendTo, this), this.modelRemoved = t(this.modelRemoved, this), this.modelReplaced = t(this.modelReplaced, this), i.__super__.constructor.apply(this, arguments)
        }
        return r(i, n), i.prototype.className = "person invitee field", i.prototype.template = "templates/invitee_field", i.prototype.events = {
            "focus input": "inputFocused",
            "input:change input": "inputChanged",
            "paste input": "inputPasted",
            "suggestions:commit": "suggestionPicked",
            "click [data-behavior~=remove_invitee]": "removeControlClicked"
        }, i.prototype.initialize = function () {
            return this.selection = this.options.selection, this.install(), this.suggestionsView = new bcx.views.AutocompletePeopleSuggestions({
                    el: this.el,
                    model: this.model,
                    collection: this.collection
                })
        }, i.prototype.install = function () {
            return this.model.bind("replace", this.modelReplaced), this.model.bind("remove", this.modelRemoved)
        }, i.prototype.uninstall = function () {
            return this.model.unbind("replace", this.modelReplaced), this.model.unbind("remove", this.modelRemoved), this.unbind(), this.removeFromNewSuperpowersForm()
        }, i.prototype.render = function () {
            return $(this.el).html(JST[this.template](this)), this.updateHiddenInputs(), this.updateAllClassNames(), this.addToNewSuperpowersForm()
        }, i.prototype.update = function () {
            return this.updateHiddenInputs(), this.updateBlankClassName(), this.model.hasInvalidEmailAddress() || $(this.el).removeClass("invalid"), $(this.el).removeClass("unknown")
        }, i.prototype.updateHiddenInputs = function () {
            return this.$("[data-role~=email_address_input]").val(this.model.get("email_address"))
        }, i.prototype.updateAllClassNames = function () {
            return this.updateBlankClassName(), this.updateInvalidClassName(), this.updateUnknownClassName(), this.updateDisabledClassName()
        }, i.prototype.updateBlankClassName = function () {
            return $(this.el).toggleClass("blank", this.model.isBlank())
        }, i.prototype.updateInvalidClassName = function () {
            return $(this.el).toggleClass("invalid", this.model.hasInvalidEmailAddress())
        }, i.prototype.updateUnknownClassName = function () {
            return $(this.el).toggleClass("unknown", this.model.hasUnknownName())
        }, i.prototype.updateDisabledClassName = function () {
            return $(this.el).toggleClass("disabled", this.model.isDisabled())
        }, i.prototype.inputFocused = function () {
            var e;
            return e = $(this.el).closest("[data-behavior~=invitees]"), e.hasClass("loading") ? ($(this.el).attr("readonly", "readonly"), !1) : ($(this.el).addClass("focused"), this.events.clickoutside = "inputLostFocus", this.events.focusoutside = "inputLostFocus", this.delegateEvents(), $(this.el).trigger("invitee:focus"))
        }, i.prototype.inputLostFocus = function () {
            return $(this.el).removeClass("focused"), delete this.events.clickoutside, delete this.events.focusoutside, this.delegateEvents(), this.render(), $(this.el).trigger("invitee:blur")
        }, i.prototype.inputChanged = function (e, t) {
            return this.model.setInput(t.currentValue)
        }, i.prototype.inputPasted = function (t) {
            var n;
            return n = $(t.currentTarget), n.bind("input", function (t) {
                var r;
                return r = e(n.val()), r.length && n.val(r[0]), n.unbind("input", arguments.callee)
            })
        }, i.prototype.suggestionPicked = function (e, t) {
            return e.preventDefault(), this.selection.replace(this.model, t.suggestion)
        }, i.prototype.removeControlClicked = function (e) {
            return $(e.target).addClass("activated"), this.selection.remove(this.model)
        }, i.prototype.modelReplaced = function (e) {
            return this.trigger("replace", this, e)
        }, i.prototype.modelRemoved = function () {
            return this.remove()
        }, i.prototype.appendTo = function (e) {
            return this.render(), $(e).append(this.el)
        }, i.prototype.replace = function (e) {
            return this.render(), $(e).replaceWith(this.el)
        }, i.prototype.remove = function () {
            var e = this;
            return this.uninstall(), $(this.el).delay(50).animate({
                    opacity: 0
                }, 200, "linear", function () {
                    return $(e.el).animate({
                            height: 0
                        }, Math.sqrt($(e.el).height()) * 50, "easeOutQuad", function () {
                            return $(e.el).remove(), $(document).trigger("invitee:removed")
                        })
                })
        }, i.prototype.addToNewSuperpowersForm = function () {
            if (this.model.isNewlyInvitedPerson() && this.removable()) return $("#new_superpowers").append(JST["templates/new_superpowers"]({
                        invitee: this.model
                    }))
        }, i.prototype.removeFromNewSuperpowersForm = function () {
            return $("#new_superpowers #invitee-" + this.model.emailAddressAlphanumeric()).remove()
        }, i.prototype.readOnly = function () {
            return this.model.has("id") || this.model.hasValidEmailAddress()
        }, i.prototype.removable = function () {
            return this.readOnly() && this.model.isEnabled()
        }, i
    }(bcx.View)
}.call(this),
function () {
    var e = function (e, t) {
        return function () {
            return e.apply(t, arguments)
        }
    }, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        };
    bcx.views.InviteeFieldGroup = function (t) {
        function r() {
            return this.memberRemoved = e(this.memberRemoved, this), this.groupRemoved = e(this.groupRemoved, this), r.__super__.constructor.apply(this, arguments)
        }
        return n(r, t), r.prototype.className = "", r.prototype.template = "templates/invitee_field_group", r.prototype.events = {
            "click [data-behavior~=remove_group]": "removeControlClicked"
        }, r.prototype.initialize = function () {
            return this.group = this.model, this.members = _.clone(this.group.members().models), this.selection = this.options.selection, this.views = [], this.install()
        }, r.prototype.install = function () {
            var e, t, n, r, i;
            this.group.bind("remove", this.groupRemoved), r = this.members, i = [];
            for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.bind("remove", this.memberRemoved));
            return i
        }, r.prototype.uninstall = function () {
            var e, t, n, r, i, s, o, u;
            this.group.unbind("remove", this.groupRemoved), o = this.members;
            for (n = 0, i = o.length; n < i; n++) e = o[n], e.unbind("remove", this.memberRemoved);
            u = this.views;
            for (r = 0, s = u.length; r < s; r++) t = u[r], t.uninstall();
            return this.unbind()
        }, r.prototype.render = function () {
            return this.enabled = this.group.members().enabled(), this.disabled = this.group.members().disabled(), $(this.el).html(JST[this.template](this)), this.renderCollection("enabled", this.enabled), this.renderCollection("disabled", this.disabled)
        }, r.prototype.renderCollection = function (e, t) {
            var n, r, i;
            return n = function () {
                var e, n, s;
                s = [];
                for (e = 0, n = t.length; e < n; e++) r = t[e], i = this.createView(r), i.render(), s.push(i.el);
                return s
            }.call(this), this.$("[data-role=" + e + "_invitees]").append(n)
        }, r.prototype.createView = function (e) {
            var t;
            return t = new bcx.views.InviteeField({
                    model: e,
                    collection: this.collection,
                    selection: this.selection,
                    className: "grouped person invitee field"
                }), this.views.push(t), t
        }, r.prototype.removeControlClicked = function (e) {
            return $(e.target).addClass("activated"), this.selection.remove(this.group), this.selection.remove(this.members, {
                    silent: !0
                })
        }, r.prototype.groupRemoved = function () {
            return this.remove()
        }, r.prototype.memberRemoved = function (e) {
            return e.unbind("remove", this.memberRemoved), this.members = _(this.members).without(e)
        }, r.prototype.replace = function (e) {
            return this.render(), $(e).replaceWith(this.el)
        }, r.prototype.remove = function () {
            var e = this;
            return this.uninstall(), $(this.el).delay(50).animate({
                    opacity: 0
                }, 200, "linear", function () {
                    return $(e.el).animate({
                            height: 0
                        }, Math.min(Math.sqrt($(e.el).height()) * 35, 400), "easeOutQuad", function () {
                            return $(e.el).remove(), $(document).trigger("invitee:removed")
                        })
                })
        }, r
    }(bcx.View)
}.call(this),
function () {
    var e, t, n, r, i = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, s = {}.hasOwnProperty,
        o = function (e, t) {
            function r() {
                this.constructor = e
            }
            for (var n in t) s.call(t, n) && (e[n] = t[n]);
            return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
        };
    n = bcx.collections.PeopleAndGroups, e = bcx.views.InviteeField, t = bcx.views.InviteeFieldGroup, bcx.views.InviteeFieldList = function (s) {
        function u() {
            return this.inviteeBlur = i(this.inviteeBlur, this), this.updateNewSuperpowersPrompt = i(this.updateNewSuperpowersPrompt, this), this.resetView = i(this.resetView, this), this.replaceView = i(this.replaceView, this), this.addView = i(this.addView, this), u.__super__.constructor.apply(this, arguments)
        }
        return o(u, s), u.prototype.firsthumanInput = "[data-role~=human_input]:first", u.prototype.events = {
            "invitee:focus": "lastFieldFocused",
            "invitee:blur": "inviteeBlur",
            reset: "reset"
        }, u.prototype.initialize = function () {
            var e, t;
            return t = $(this.el).data("disabled-people-ids"), e = $(this.el).data("disabled-group-ids"), this.disabledIds = t.concat(e), this.collection = new n($(this.el).data("people"), {
                    disabledIds: this.disabledIds
                }), this.selection = new r([new this.collection.model, new this.collection.model, new this.collection.model]), this.selection.each(this.addView), this.selection.bind("add", this.addView), this.selection.bind("reset", this.resetView)
        }, u.prototype.flushAndReplaceSelection = function (e) {
            var t, n;
            return n = function () {
                var n, r, i;
                i = [];
                for (n = 0, r = e.length; n < r; n++) t = e[n], i.push(this.collection.get("person_" + t));
                return i
            }.call(this), n.push(new this.collection.model, new this.collection.model, new this.collection.model), this.selection.reset(n)
        }, u.prototype.viewConstructorFor = function (n) {
            return n.isGroup() ? t : e
        }, u.prototype.createView = function (e) {
            var t, n;
            return t = this.viewConstructorFor(e), n = new t({
                    model: e,
                    collection: this.collection,
                    selection: this.selection,
                    parent: this
                }), n.bind("replace", this.replaceView)
        }, u.prototype.addView = function (e) {
            var t;
            return t = this.createView(e), t.appendTo(this.el)
        }, u.prototype.replaceView = function (e, t) {
            var n;
            return n = this.createView(t), n.replace(e.el), this.focusNextField(n.el)
        }, u.prototype.resetView = function () {
            return $(this.el).html(""), this.selection.each(this.addView)
        }, u.prototype.updateNewSuperpowersPrompt = function () {
            return bcx.currentPerson.isAdmin() && _.any(this.selection.newPeople()) ? $(this.el).next("#new_superpowers_prompt").show() : $(this.el).next("#new_superpowers_prompt").hide()
        }, u.prototype.lastFieldFocused = function (e) {
            if (this.$("div.blank.field").size() === 1) return this.selection.add(new this.collection.model)
        }, u.prototype.inviteeBlur = function () {
            return this.updateNewSuperpowersPrompt(), this.lastFieldFocused()
        }, u.prototype.focusNextField = function (e) {
            return $(e).next("div.field").find(this.firsthumanInput).focus()
        }, u.prototype.focus = function () {
            return this.$(this.firsthumanInput).focus()
        }, u.prototype.reset = function () {
            return this.selection.reset([new this.collection.model, new this.collection.model, new this.collection.model])
        }, u.prototype.reload = function () {
            return this.collection = new n($(this.el).data("people"), {
                    disabledIds: this.disabledIds
                }), this.reset()
        }, u
    }(bcx.View), r = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return o(t, e), t.prototype.add = function (e, n) {
            var r, i, s, o;
            n == null && (n = {}), _.isArray(e) || (e = [e]);
            for (s = 0, o = e.length; s < o; s++) i = e[s], (r = this.getByCid(i.cid)) && this.remove(r, n);
            return t.__super__.add.call(this, e, n)
        }, t.prototype.replace = function (e, t) {
            return this.remove(t), this.remove(e, {
                    silent: !0
                }), this.add(t, {
                    silent: !0
                }), t.isGroup() && this.add(t.members().enabled(), {
                    silent: !0
                }), e.trigger("replace", t), this.trigger("replace", e, t)
        }, t.prototype.newPeople = function () {
            return _.select(this.models, function (e) {
                return e.isNewlyInvitedPerson()
            })
        }, t
    }(Backbone.Collection)
}.call(this),
function () {
    $("[data-behavior~=access-toggle] input:checkbox").live("change", function (e) {
        var t, n, r, i, s, o, u, a, f, l, c, h;
        t = $(this), u = t.closest(".self").length > 0, s = t.is(":checked"), h = s ? "grant" : "revoke", n = t.closest("[data-bucket-id]"), o = n.attr("data-group-type"), r = n.attr("data-bucket-id"), i = o === "project_template" ? "project" : o, c = n.closest("[data-person-id]").attr("data-person-id"), l = "/" + i + "s/" + r + "/accesses", n.addClass("busy");
        if (!s && !confirm("This person will no longer be able to access this " + o.replace(/_/, " ") + ". Is this what you want?")) {
            t[0].checked = !0, n.removeClass("busy");
            return
        }
        return a = function (e, r, i) {
            return n.removeClass("busy"), t[0].checked = !s, alert("The " + h + ' operation failed. Please try again.\n\nThe error was "' + i + '" (' + r + ")")
        }, f = function (e, t, r) {
            return u && h === "revoke" ? n.remove() : n.removeClass("busy")
        }, h === "grant" ? $.ajax(l, {
                data: {
                    invitees: [{
                            id: c
                        }
                    ]
                },
                type: "POST",
                error: a,
                success: f
            }) : $.ajax("" + l + "/null?person_id=" + c, {
                type: "DELETE",
                error: a,
                success: f
            })
    }), $("[data-behavior~=grant-all]").live("click", function (e) {
        var t, n, r, i, s, o;
        return e.preventDefault(), r = $(this), i = r.attr("href"), n = r.data("group-type"), t = $("table.accesses tr[data-group-type~=" + n + "]"), t.addClass("busy"), s = function (e, n, r) {
            return alert('Access could not be granted. Please try again.\n\nThe error was "' + r + '" (' + n + ")"), t.removeClass("busy")
        }, o = function (e, n, r) {
            return t.removeClass("busy"), t.find("input:checkbox").prop("checked", !0)
        }, $.ajax(i, {
                type: "POST",
                error: s,
                success: o
            })
    }), $("[data-behavior~=revoke-all]").live("click", function (e) {
        var t, n, r, i, s, o, u;
        return e.preventDefault(), r = $(this), s = r.closest(".self").length > 0, i = r.attr("href"), n = r.data("group-type"), t = $("table.accesses tr[data-group-type~=" + n + "]"), t.addClass("busy"), o = function (e, n, r) {
            return alert('Access could not be revoked. Please try again.\n\nThe error was "' + r + '" (' + n + ")"), t.removeClass("busy")
        }, u = function (e, n, r) {
            return t.removeClass("busy"), s ? t.remove() : t.find("input:checkbox").prop("checked", !1)
        }, $.ajax(i, {
                type: "DELETE",
                error: o,
                success: u
            })
    }), bcx.on("page:update", "install invitee field lists", function () {
        return $("form[data-behavior~=invite] [data-behavior~=invitees]").install("behavior for invitee fields", function (e) {
            return e.each(function (e, t) {
                var n;
                return n = new bcx.views.InviteeFieldList({
                        el: t
                    }), n.render(), n.focus(), $(t).data("view", n)
            })
        })
    }), bcx.on("page:change", "lazily load invitees", function () {
        var e;
        e = $("form[data-behavior~=invite]:not([data-behavior~=email-only]) [data-behavior~=invitees]");
        if (e.length > 0) return e.addClass("loading"), $.getJSON("/invitees.json", function (t) {
            var n, r, i, s;
            e.removeClass("loading"), (n = e.data("people", t).data("view")) != null && n.reload();
            if (((r = (i = document.activeElement) != null ? i.tagName : void 0) != null ? r : "BODY") === "BODY") return (s = e.data("people", t).data("view")) != null ? s.focus() : void 0
        })
    }), $("article.access [data-behavior~=invite]").live("click", function (e) {
        var t, n, r;
        r = $(this), t = r.closest("article.access"), n = t.find("[data-role~=invite_display]");
        if (r.is(".activated")) return;
        return r.data("deactivated_html", r.html()), r.html(r.attr("data-activated-text")), r.addClass("activated"), r.bind("ajax:success", function (e, t) {
            var i, s;
            return r.unbind("ajax:success", arguments.callee), r.animate({
                    opacity: 0
                }, 150, "linear", function () {
                    return r.html(r.data("deactivated_html")), r.removeClass("activated"), r.delay(1e3).animate({
                            opacity: 1
                        }, 300, "linear")
                }), s = n.find("div:first-child"), i = s.clone(!0), i.find("time").replaceWith(t), n.append(i), s.delay(300).animate({
                    "margin-top": -s.height()
                }, 300, "easeOutQuad", function () {
                    return s.remove()
                })
        })
    }), $("article.access [data-behavior~=revoke]").live("ajax:before", function (e) {
        var t;
        return t = $(this).closest("article.access"), t.addClass("revoking")
    }), bcx.on("page:update", 'apply "many" class to section.accesses', function () {
        var e;
        e = $("section.accesses > div.added");
        if (e.size() === 0) return;
        return e.find("> article").size() > 1 ? e.addClass("many") : e.removeClass("many")
    }), bcx.on("page:update", "install superpower slider", function () {
        return $("[data-behavior~=slider]:visible").slider()
    }), $("[data-behavior~=invite] [data-behavior~=slider]").live("slider:slide", function (e) {
        return $("form[data-behavior~=invite]").focus().blur()
    })
}.call(this),
function () {
    var e;
    bcx.on("page:update", "watch unfinished exports", function () {
        return $("[data-behavior~=export_status]").each(function () {
            var t;
            t = $(this);
            if (t.data("status") === "processing" && !t.data("watching")) return e(t)
        })
    }), $("[data-behavior=start_export]").live("click", function (t) {
        var n;
        return t.preventDefault(), n = $(this).closest("[data-behavior~=export_status]"), n.attr("data-status", "processing"), $.post($(this).data("url"), function (t) {
            return n.data("url", t.url), e(n)
        })
    }), e = function (e) {
        var t;
        return e.data("watching", !0), setTimeout(t = function () {
            var n = this;
            return $.getJSON(e.data("url")).done(function (n) {
                var r, i;
                return n.status === "finished" ? (n.chunks < 2 ? (i = "" + n.url + ".zip", r = "false") : (i = n.url, r = "true"), e.find("[data-role=download]").attr("href", i).attr("data-stacker", r), e.attr("data-status", "finished")) : setTimeout(t, 1e4)
            })
        }, 1e4)
    }
}.call(this),
function () {
    $("[data-behavior~=account_name]").live("expand", function (e) {
        return $("input[type=text]").focus()
    }), $("form[data-behavior=migrate_account]").on("ajax:before", function (e) {
        return $(this).addClass("busy")
    }), $(document).on("click", "a[data-behavior=unlink_account]", function (e) {
        return $(this).closest("span").addClass("busy")
    }), $("form[data-behavior~=change_plan]").on("ajax:before", function (e) {
        return $(this).addClass("busy")
    }), $("form[data-behavior~=account_upgrade_form]").live("ajax:before", function (e) {
        var t;
        return t = $(this).find("[data-role~=account_upgrade_submit]"), t.html(""), t.addClass("busy")
    }), $("[data-behavior~=account_upgrade_confirmation]").live("click", function (e) {
        return $("[data-role~=account_upgrade_notice]").hide(), $("[data-role~=account_upgrade_wrapper]").fadeIn("fast"), !1
    })
}.call(this),
function () {
    var e;
    e = function (e) {
        if (e.keyCode === $.ui.keyCode.ENTER) return e.preventDefault(), $("textarea.body").focus()
    }, $("article.announcement.edit textarea:first, article.message.edit textarea:first").live("keypress", e), $("article.announcement.new").live("expand", function (t) {
        var n;
        return n = $(this).find("textarea").first(), n.focus(), n.bind("keypress", e)
    }).live("collapse", function (e) {
        return $(this).find("form").resetForm(), $(this).find("[data-behavior~=wysiwyg_toolbar]").hide()
    }).live("wysiwyg:focus", function (e) {
        return $(this).find("[data-behavior~=wysiwyg_toolbar]").slideDown("fast")
    }), bcx.on("page:change", "remove new features flag", function () {
        if ($("[data-behavior~=remove_new_features_flag]").length) return $(".announcements_link").remove(), $("nav").removeClass("has_announcements")
    })
}.call(this),
function () {
    var e, t, n;
    n = function () {
        return _($("img[src*=asset1]")).each(function (e) {
            return $(e).attr("src", $(e).attr("src").replace(/asset1/, "public"))
        })
    }, e = function () {
        return _($("a[href*=asset1]")).each(function (e) {
            return $(e).attr("href", $(e).attr("href").replace(/asset1/, "public"))
        })
    }, t = function () {
        var e;
        e = $("div.panel").attr("data-behavior");
        if (!/read_only/.test(e)) return $("div.panel").attr("data-behavior", "read_only " + e)
    }, bcx.on("page:update", "turn page anonymous", function () {
        if ($("body.anonymous").length) return n(), e(), t(), bcx.avatars.removeLinks()
    }), $("a.download").live("hover", function () {
        if ($("body.anonymous").length && /asset1/.test($(this).attr("href"))) return $(this).attr("href", $(this).attr("href").replace(/asset1/, "public"))
    })
}.call(this),
function () {
    bcx.on("page:change", "annotate active sheet with file_drop_target behavior attribute", function () {
        return $("div.sheet:not(.inactive) [data-behavior~=file_drop_target]").size() === 0 ? $("html").removeBehavior("file_drop_target") : $("html").addBehavior("file_drop_target")
    }), $("article[data-behavior~=file_drop_target]").live("file:drop", function (e, t) {
        return Beanstalk.logEvent("fileAttached", "byDragToMessage"), $(this).find("form").attachFiles(t), $(this).expand(), e.stopPropagation()
    }), $("div.sheet.project > div.sheet_body .has_buttons button, section:has(article.new)").live("file:drop", function (e, t) {
        return Beanstalk.logEvent("fileAttached", "byDragToMessage"), $(this).closest("section").find("form").attachFiles(t), $(this).closest("section").find("article.new").expand(), e.stopPropagation()
    }), $("html").live("file:drop", function (e, t) {
        var n;
        return Beanstalk.logEvent("fileAttached", "byDragToWindow"), $("article.new.expanded").length > 0 ? n = $("article.new.expanded") : $("article.upload.new").length > 0 ? n = $("article.upload.new") : $("article.message.new").length > 0 ? n = $("article.message.new") : $("article.comment.new").length > 0 && (n = $("article.comment.new")), n.show().expand().slideIntoView({
                duration: "slow"
            }), n.find("form").attachFiles(t)
    }), $(".file_input_button input").live("click", function () {
        return Beanstalk.logEvent("fileAttached", "byManualSelection")
    }), $("[data-behavior~=trashed_attachment_alert]").live("click", function (e) {
        return alert("This file can't be opened because it's in the trash. To open this file, first bring it back from the trash.")
    }), bcx.on("page:change", 'apply "no_thumbs" class to section.attachments.grouped_by_date', function () {
        var e;
        if ($("div.sheet.project > div.sheet_body section.attachments.grouped_by_date").length) {
            e = $("div.sheet.project > div.sheet_body section.attachments.grouped_by_date");
            if (e.find("img.thumbnail").length === 0) return e.addClass("no_thumbs")
        }
    })
}.call(this),
function () {
    var e, t, n = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, r = {}.hasOwnProperty,
        i = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var n in t) r.call(t, n) && (e[n] = t[n]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    bcx.Autoview = function (r) {
        function s(e) {
            var t;
            this.identifier = e.identifier, this.render = n(this.render, this), (t = this.className) == null && (this.className = this.name), this.id = this.constructor.idFor(this.identifier), this.subviews = [], s.__super__.constructor.apply(this, arguments), $(this.el).attr("data-autoview", "")
        }
        return i(s, r), s.views = {}, s.constructors = {}, s.viewName = function (e) {
            return this.constructors[e] = this, this.prototype.name = e
        }, s.constructorFor = function (e) {
            return this.constructors[e]
        }, s.get = function (e, t) {
            return t == null && (t = "singleton"), this.views[this.constructorFor(e).idFor(t)]
        }, s.idFor = function (e) {
            return "" + this.prototype.name + "_" + e
        }, s.findOrCreate = function (e) {
            var t, n, r;
            return e == null && (e = "singleton"), (r = (t = this.views)[n = this.idFor(e)]) != null ? r : t[n] = new this({
                    identifier: e
                })
        }, s.install = function (e) {
            var t, n, r;
            return t = $(e), n = this.constructorFor(t.data("autoview-name")), r = n.findOrCreate(t.data("autoview-identifier")), r.install(e), r
        }, s.uninstall = function (e) {
            var t;
            return (t = this.views[$(e).attr("id")]) != null ? t.uninstall() : void 0
        }, s.prototype.render = function () {
            return this.uninstallSubviews(), $(this.el).html(this.renderContents()), this.installSubviews(), $(this.el).trigger("autoview:render"), this.afterRender(), this
        }, s.prototype.afterRender = function () {}, s.prototype.renderContents = function () {
            return $("<div>").html("" + this.renderTemplate(this.name)).contents()
        }, s.prototype.install = function (e) {
            return this.placeholder && this.uninstall(), this.render(), $(e).replaceWith(this.el), this.delegateEvents(), this.placeholder = e, this.afterInstall()
        }, s.prototype.afterInstall = function () {}, s.prototype.uninstall = function () {
            if (!this.placeholder) return;
            return this.beforeUninstall(), $(this.el).replaceWith(this.placeholder), this.placeholder = null
        }, s.prototype.beforeUninstall = function () {}, s.prototype.unregister = function () {
            return this.uninstall(), delete this.constructor.views[this.constructor.idFor(this.identifier)]
        }, s.prototype.installSubviews = function () {
            return this.subviews = e(this.el)
        }, s.prototype.uninstallSubviews = function () {
            return t(this.el), this.subviews = []
        }, s.prototype.findSubviewByName = function (e) {
            return _.find(this.subviews, function (t) {
                return t.name === e
            })
        }, s.prototype.findSubviewById = function (e) {
            return _.find(this.subviews, function (t) {
                return t.id === e
            })
        }, s
    }(bcx.View), e = function (e) {
        var t, n, r, i, s;
        i = $(e).find("[data-autoview-name]"), s = [];
        for (n = 0, r = i.length; n < r; n++) t = i[n], s.push(bcx.Autoview.install(t));
        return s
    }, t = function (e) {
        var t, n, r, i, s;
        i = $(e).find("[data-autoview]"), s = [];
        for (n = 0, r = i.length; n < r; n++) t = i[n], s.push(bcx.Autoview.uninstall(t));
        return s
    }, bcx.on("page:beforechange page:change page:update", "install autoviews", function () {
        return e("body")
    }), $("div.sheet").live("beforeSheetSave", function () {
        return t(this)
    })
}.call(this),
function () {
    bcx.avatars = {}, bcx.avatars.removeLinks = function () {
        return _($("img.avatar")).each(function (e) {
            return $(e).parent("a").replaceWith(e)
        })
    }
}.call(this),
function () {
    var e;
    e = function () {
        var e, t;
        if (t = $(":hidden[name=recurrence_starts_at]").val()) return e = CalendarDate.parse(t), bcx.calendarEvents.models[0].addRecurrencesInRange(e.previous(), e.next())
    }, $("button[data-behavior~=new_calendar_event]").live("click", function (e) {
        var t, n, r, i;
        return $("div.sheet.calendar_events").removeClass("blank_slate"), r = "" + bcx.currentBucket.constructor.modelName + ":" + bcx.currentBucket.id + "-new_calendar_event", n = (i = bcx.Autoview.get("project_calendar_event_editor", r)) != null ? i : bcx.Autoview.get("template_calendar_event_editor", r), n.renderWithCalendarEvent(new bcx.models.CalendarEvent({
                    summary: "New event"
                })), t = $("article.calendar_event.new"), t.expand(), n.autofocus(), e.preventDefault()
    }), $("[data-behavior~=trash_calendar_event]").live("click", function (e) {
        return e.preventDefault(), $.ajax($(this).url(), {
                type: "POST",
                error: function () {
                    return console.warn("failure!")
                }
            }), !1
    }), $("[data-behavior~=edit_calendar_event_form]").live("click", function (t) {
        var n, r, i, s, o;
        return $("#calendar_event").hide(), $("#calendar_event_form").show(), e(), r = bcx.calendarEvents.get($(this).data("calendar-event-id")), s = "" + bcx.currentBucket.constructor.modelName + ":" + bcx.currentBucket.get("id") + "-" + r.get("id"), i = (o = bcx.Autoview.get("project_calendar_event_editor", s)) != null ? o : bcx.Autoview.get("template_calendar_event_editor", s), i.renderWithCalendarEvent(r), i.autofocus(), n = $(i.el).find("[data-behavior~=lazy_load_subscribers]"), $.ajax(n.url(), {
                success: function (e) {
                    return n.html(e), bcx.installAdhocSubscribers()
                }
            }), !1
    }), $("[data-behavior~=delete_action]").live("click", function (t) {
        var n, r;
        if ($("[data-behavior~=recurring_cancel]").length) return e(), n = bcx.calendarEvents.get($(this).data("calendar-event-id")), r = bcx.Autoview.get("calendar_event_editor/recurrence_prompt"), r.calendarEvent = n, r.destroy()
    }), $("article.calendar_event.new").live("expand", function (e) {
        return $("textarea").live("keypress", function (e) {
            if (e.keyCode === $.ui.keyCode.ENTER) return $(this).attr("name") === "summary" ? $(this).closest("form").find("textarea[name=description]").focus() : $(this).attr("name") === "description" && $(this).closest("form").find("input.date").first().focus().select(), e.preventDefault()
        }), $("section.upcoming_events_blank_slate").hide()
    }), $("article.calendar_event.new").live("collapse", function (e) {
        $("section.upcoming_events_blank_slate").show();
        if (!bcx.currentProject.get("calendar_events_count")) return $("div.sheet.calendar_events").addClass("blank_slate")
    }), bcx.on("page:change", 'click the new calendar event button if the location hash is "#create"', function () {
        if (window.location.hash === "#create") return $("button[data-behavior~=new_calendar_event]").click()
    }), $("button[data-behavior~=jump_to_new_calendar_event]").live("click", function (e) {
        return window.location = $(this).data("url")
    })
}.call(this),
function () {}.call(this),
function () {
    var e;
    e = "div.calendar_event_editor", $("#ui-datepicker-div, .ui-datepicker-next, .ui-datepicker-prev").live("click", function (e) {
        return e.stopImmediatePropagation()
    }), $("aside.calendar_list div.subscribable[data-behavior~=expandable]").live("beforeexpand", function (e) {
        return e.stopImmediatePropagation()
    }), $(".calendar_event_editor_form textarea[name=description]").live("keypress", function (e) {
        if (e.keyCode === $.ui.keyCode.ENTER) return e.preventDefault()
    }), $("section.calendars ul li").live("mouseenter", function (e) {
        return $(this).addClass("zoomable")
    }), $("section.calendars ul li").live("mouseleave", function (e) {
        return $(this).removeClass("zoomable")
    }), $(document).on("panelDisplayed", function (e) {
        return bcx.calendarDisplay.zoomOut()
    }), bcx.on("page:update", 'remove "initial_load" class from .panel.calendar', function () {
        return $("#workspace > .container > .panel.calendar").removeClass("initial_load")
    }), bcx.on("page:change", "ensure peopleAndGroups collection is reloaded after page change", function () {
        return bcx.peopleAndGroups.loadedWithAccesses = !1
    })
}.call(this),
function () {
    $("a[data-role~=cancel]").live("click", function (e) {
        return $(this).closest("[data-behavior~=expandable]").collapse(), e.preventDefault()
    })
}.call(this),
function () {
    var e;
    $("article.comment.new").live("expand", function (e) {
        var t;
        if (e.target !== this) return;
        $(this).slideIntoView({
                duration: "slow"
            }), t = $("[data-subscribers]");
        if (t.html() === "") return $.ajax(t.data("subscribers"), {
                dataType: "html",
                success: function (e) {
                    return t.hide().html(e), setTimeout(function () {
                        return t.fadeIn()
                    }, 1), bcx.installAdhocSubscribers()
                }
            })
    }), e = function (e) {
        var t, n, r;
        return r = e.find("textarea").val(), t = e.find("ul.pending_attachments li"), n = e.find("input[type=submit]"), r.match(/^\s*$/) && t.length === 0
    }, $("article.comment.new form").live("ajax:before", function (t) {
        if (e($(t.target))) return console.log("cowardly refusing to save an empty comment"), t.stopPropagation(), !1
    }), $("article.comment span.time > span a").live("click", function () {
        return $(this).closest("span").addClass("busy")
    })
}.call(this),
function () {
    bcx.on("page:beforechange page:change", "set bcx.currentBucket", function () {
        var e, t, n, r, i;
        if (r = location.pathname.match(/\/(projects|calendars)\/(\d+)/)) i = [r[1], r[2]], t = i[0], n = i[1], (e = bcx[t].get(n)) || (bcx[t].add({
                    id: n
                }), e = bcx[t].get(n));
        return bcx.currentBucket = bcx.currentProject = e
    })
}.call(this),
function () {
    var e = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    bcx.on("page:update", "update subscribers_sentence content for subscribables", function () {
        var e, t, n = this;
        e = $("div.subscribable[data-behavior~=expandable]");
        if (e.length) {
            if (!(t = e.attr("data-subscribers"))) return;
            return e.find("[data-behavior~=subscribers_sentence]").html(function () {
                return _.chain(JSON.parse(t)).reject(function (e) {
                    return e.id === bcx.currentPerson.id
                }).reject(function (e) {
                    return e.wants_notifications === !1
                }).pluck("name").value().join(", ").replace(/,\s([^,]+)$/, " and $1")
            })
        }
    }), bcx.on("page:update", "replace cached avatar images", function () {
        if (bcx.currentPerson != null) return $("img[data-current-person-avatar]").attr("src", bcx.currentPerson.avatarUrl()).attr("title", bcx.currentPerson.get("name"))
    }), bcx.on("page:update", "remove elements not visible to the current person", function () {
        return $("[data-visible-to]").each(function () {
            var t, n, r;
            n = $(this).attr("data-visible-to").split(/\s/), t = parseInt($(this).closest("[data-creator-id]").data("creator-id"));
            if (_.include(n, "admin") && bcx.currentPerson.isAdmin()) return;
            if (_.include(n, "creator") && bcx.currentPerson.id === t) return;
            if (_.include(n, "accountManager") && bcx.currentPerson.isAccountManager()) return;
            if (_.include(n, "groupMember") && (r = bcx.currentPerson.id, e.call($(this).closest("[data-group-member-ids]").data("group-member-ids"), r) >= 0)) return;
            return $(this).remove()
        }), $("[data-hidden-from]").each(function () {
            var e, t;
            t = $(this).attr("data-hidden-from").split(/\s/), e = parseInt($(this).closest("[data-creator-id]").data("creator-id"));
            if (_.include(t, "admin") && bcx.currentPerson.admin || _.include(t, "creator") && bcx.currentPerson.id === e || _.include(t, "accountManager") && bcx.currentPerson.isAccountManager()) return $(this).remove()
        })
    })
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        };
    e = function () {
        function e(e) {
            var n = this;
            this.$form = e, this.commit = t(this.commit, this), this.unlock = t(this.unlock, this), this.startEditing = t(this.startEditing, this), this.editBody = t(this.editBody, this), this.editTitle = t(this.editTitle, this), this.editing = !1, this.saveBody = _.throttle(this.commit, 500), this.$form.on("change keyup paste", "textarea.body", this.editBody), this.saveTitle = _.debounce(this.commit, 5e3), this.$form.on("change keydown keyup paste", "textarea.name", this.editTitle), this.idle = _.debounce(this.unlock, 2e3), this.$form.on("blur", "textarea", this.idle), this.counterId = (new Date).getTime(), this.counter = 0, window.onbeforeunload = function () {
                n.unlock()
            }
        }
        return e.prototype.editTitle = function (e) {
            this.startEditing(), this.saveTitle();
            if (e.keyCode === $.ui.keyCode.ENTER) return e.preventDefault(), this.$form.find("textarea.body").focus()
        }, e.prototype.editBody = function () {
            return this.startEditing(), this.saveBody()
        }, e.prototype.startEditing = function () {
            return this.editing = !0, $("[data-pen=dropped-theirs]").hide(), $("[data-pen=holding-theirs]").hide(), $("[data-pen=holding-yours]").show()
        }, e.prototype.unlock = function () {
            if (this.editing) return this.commit({
                    lock: !1
                }, function () {
                    return $("[data-pen=holding-yours]").hide()
                })
        }, e.prototype.commit = function (e, t) {
            var n, r, i = this;
            if (this.editing) return this.counter += 1, this.editing = (r = e != null ? e.lock : void 0) != null ? r : !0, n = this.$form.serialize() + ("&lock=" + this.editing + "&cid=" + this.counterId + "&counter=" + this.counter), $.ajax({
                    type: "PUT",
                    url: this.$form.attr("action"),
                    data: n
                }).done(function () {
                    return i.editing && i.idle(), typeof t == "function" ? t() : void 0
                })
        }, e
    }(), $(document).on("page:update", function () {
        return $("article.editable_document form").install("editor", function (t) {
            return window.currentDocumentEditor = new e(t), setTimeout(function () {
                if (window.location.hash === "") return t.find("textarea.name").focus()
            }, 10)
        })
    }), $("section.documents.attachments").on("touchstart", "[data-behavior=link_container]", function () {
        return Stacker.workspace.visit($(this).find("a[href]:first").attr("href")), !1
    }), $("div.sheet.document [data-behavior~=document_version_link]").live("stackerLinkClicked", function (e, t) {
        return t.replaceSheet = !0
    })
}.call(this),
function () {
    var e, t, n;
    n = function () {
        var e, t;
        return e = $("[data-behavior~=confirm_dropbox_rekey]"), t = e.find("> div"), e.hide(), t.find("div.rekey_confirm").show(), t.find("div.rekey_success").hide(), t.css({
                "background-color": ""
            })
    }, $("div.dropbox_notify input[type=checkbox]").live("click", function (e) {
        var t, n;
        return t = $(this).closest("form"), n = t.find("input[type=checkbox]:checked"), n.length ? $("[data-behavior~=notify_selected_button]").attr("disabled", !1) : $("[data-behavior~=notify_selected_button]").attr("disabled", !0)
    }), $("[data-behavior~=notify_all_button]").live("click", function (e) {
        return e.preventDefault(), $(":checkbox").prop("checked", !0), $("form").submit()
    }), $("[data-behavior~=notify_selected_button]").live("click", function (e) {
        var t, n;
        e.preventDefault(), t = $(this).closest("form"), n = t.find("input[type=checkbox]:checked");
        if (n.length) return t.submit()
    }), $("section.tutorial [data-behavior~=select_on_focus]").live("click", function (e) {
        return $(this).select()
    }), $("section.tutorial [data-behavior~=toggle_dropbox_rekey]").live("click", function (e) {
        var t;
        return t = $(this).closest("section").find("[data-behavior~=confirm_dropbox_rekey]"), t.slideToggle(200, "easeOutQuad"), e.preventDefault()
    }), $("section.tutorial [data-behavior~=submit_dropbox_rekey]").live("click", function (e) {
        var t, n, r, i = this;
        return r = $(this).closest("section").find("[data-behavior~=confirm_dropbox_rekey] > div"), t = $(this).closest("section").find("[data-behavior~=dropbox_address]"), n = $(this).closest("p.submit"), n.addClass("busy"), $.ajax($(this).data("path"), {
                type: "POST",
                success: function (e, i, s) {
                    return n.removeClass("busy"), r.find("div.rekey_confirm").hide(), r.find("div.rekey_success").show(), r.animate({
                            "background-color": "#390"
                        }), t.highlight(), t.is("input") ? t.val(t.val().replace(/(project-[0-9]+)-[^@]+/, "$1-" + e.dropbox_key)) : t.html(t.html().replace(/(project-[0-9]+)-[^@]+/, "$1-" + e.dropbox_key))
                }
            }), e.preventDefault()
    }), e = function (e) {
        var t, r;
        return t = $("a[data-tutorial='" + e + "']"), r = $("section[data-tutorial='" + e + "']"), $("[data-behavior~=toggle_tutorial]").removeClass("selected"), t.addClass("selected"), $("section[data-behavior~=tutorial]").hide(), r.fadeIn(), n()
    }, t = function () {
        var t;
        if (!$("div.sheet.dropbox a[data-tutorial]").length) return;
        return window.location.hash ? (t = window.location.hash.slice(1), e(t)) : e("discussions", !1)
    }, $(window).on("hashchange", t), bcx.on("page:change", "load dropbox tutorial from hash", t), $("[data-behavior~=toggle_tutorial]").live("stackerLinkClicked", function () {
        return !1
    })
}.call(this),
function () {
    $("a[data-behavior~=edit_identity]").live("click", function (e) {
        return e.preventDefault(), window.location = $(this).attr("href") + ("?origin=" + encodeURIComponent(window.location))
    })
}.call(this),
function () {
    var e, t, n, r;
    r = [/.*\.(png|jpg|gif|jpeg)\b/, /.*viewscreencasts.com\/.*/, /.*screenr.com\/.*/, /maps\.google\.com\/maps\?.*/, /maps\.google\.com\/\?.*/, /maps\.google\.com\/maps\/ms\?.*/, /cl\.ly\/.*/, /cl\.ly\/.*\/content/, /d\.pr\/.*/, /.*youtube\.com\/watch.*/, /.*\.youtube\.com\/v\/.*/, /youtu\.be\/.*/, /.*\.youtube\.com\/.*#.*\/.*/, /m\.youtube\.com\/watch.*/, /m\.youtube\.com\/index.*/, /.*\.youtube\.com\/profile.*/, /.*\.youtube\.com\/view_play_list.*/, /.*\.youtube\.com\/playlist.*/, /.*twitch\.tv\/.*/, /.*justin\.tv\/.*\/b\/.*/, /.*justin\.tv\/.*\/w\/.*/, /www\.ustream\.tv\/recorded\/.*/, /www\.ustream\.tv\/channel\/.*/, /www\.ustream\.tv\/.*/, /.*twitvid\.com\/.*/, /blip\.tv\/.*\/.*/, /.*\.blip\.tv\/.*\/.*/, /video\.google\.com\/videoplay\?.*/, /.*revver\.com\/video\/.*/, /video\.yahoo\.com\/watch\/.*\/.*/, /video\.yahoo\.com\/network\/.*/, /sports\.yahoo\.com\/video\/.*/, /.*viddler\.com\/explore\/.*\/videos\/.*/, /www\.vimeo\.com\/groups\/.*\/videos\/.*/, /vimeo\.com\/groups\/.*\/videos\/.*/, /www\.vimeo\.com\/[0-9]+/, /vimeo\.com\/[0-9]+/, /vimeo\.com\/m\/#\/.*/, /streamio\.com\/.*/, /s3m\.io\/.*/], n = new RegExp("https*://" + function () {
        var e, n, i;
        i = [];
        for (e = 0, n = r.length; e < n; e++) t = r[e], i.push(t.source);
        return i
    }().join("|"), "i"), e = /https?:\/\/(?:www\.)?dropbox\.com/i, $.embedly.defaults.key = "c279bf201ad211e1a5be4040d3dc5c07", $.embedly.defaults.maxWidth = 540, $.embedly.defaults.secure = !0, $.embedly.defaults.wmode = "transparent", $.embedly.defaults.urlRe = {
        test: function (t) {
            return e.test(t) ? !1 : n.test(t)
        }
    }, bcx.on("page:update", "load embed.ly content", function () {
        return $("[data-embeddable]").install("embed.ly content", function (e) {
            return e.find("a").each(function () {
                if (!$(this).parents("pre").length) return $(this).embedly()
            })
        })
    })
}.call(this);
var Emoji = {
    names: ["+1", "-1", "100", "1234", "8ball", "a", "ab", "abc", "abcd", "accept", "aerial_tramway", "airplane", "alarm_clock", "alien", "ambulance", "anchor", "angel", "anger", "angry", "anguished", "ant", "apple", "aquarius", "aries", "arrow_backward", "arrow_double_down", "arrow_double_up", "arrow_down", "arrow_down_small", "arrow_forward", "arrow_heading_down", "arrow_heading_up", "arrow_left", "arrow_lower_left", "arrow_lower_right", "arrow_right", "arrow_right_hook", "arrow_up", "arrow_up_down", "arrow_up_small", "arrow_upper_left", "arrow_upper_right", "arrows_clockwise", "arrows_counterclockwise", "art", "articulated_lorry", "astonished", "athletic_shoe", "atm", "b", "baby", "baby_bottle", "baby_chick", "baby_symbol", "back", "baggage_claim", "balloon", "ballot_box_with_check", "bamboo", "banana", "bangbang", "bank", "bar_chart", "barber", "baseball", "basketball", "bath", "bathtub", "battery", "bear", "bee", "beer", "beers", "beetle", "beginner", "bell", "bento", "bicyclist", "bike", "bikini", "bird", "birthday", "black_circle", "black_joker", "black_large_square", "black_medium_small_square", "black_medium_square", "black_nib", "black_small_square", "black_square_button", "blossom", "blowfish", "blue_book", "blue_car", "blue_heart", "blush", "boar", "boat", "bomb", "book", "bookmark", "bookmark_tabs", "books", "boom", "boot", "bouquet", "bow", "bowling", "bowtie", "boy", "bread", "bride_with_veil", "bridge_at_night", "briefcase", "broken_heart", "bug", "bulb", "bullettrain_front", "bullettrain_side", "bus", "busstop", "bust_in_silhouette", "busts_in_silhouette", "cactus", "cake", "calendar", "calling", "camel", "camera", "cancer", "candy", "capital_abcd", "capricorn", "car", "card_index", "carousel_horse", "cat", "cat2", "cd", "chart", "chart_with_downwards_trend", "chart_with_upwards_trend", "checkered_flag", "cherries", "cherry_blossom", "chestnut", "chicken", "children_crossing", "chocolate_bar", "christmas_tree", "church", "cinema", "circus_tent", "city_sunrise", "city_sunset", "cl", "clap", "clapper", "clipboard", "clock1", "clock10", "clock1030", "clock11", "clock1130", "clock12", "clock1230", "clock130", "clock2", "clock230", "clock3", "clock330", "clock4", "clock430", "clock5", "clock530", "clock6", "clock630", "clock7", "clock730", "clock8", "clock830", "clock9", "clock930", "closed_book", "closed_lock_with_key", "closed_umbrella", "cloud", "clubs", "cn", "cocktail", "coffee", "cold_sweat", "collision", "computer", "confetti_ball", "confounded", "confused", "congratulations", "construction", "construction_worker", "convenience_store", "cookie", "cool", "cop", "copyright", "corn", "couple", "couple_with_heart", "couplekiss", "cow", "cow2", "credit_card", "crescent_moon", "crocodile", "crossed_flags", "crown", "cry", "crying_cat_face", "crystal_ball", "cupid", "curly_loop", "currency_exchange", "curry", "custard", "customs", "cyclone", "dancer", "dancers", "dango", "dart", "dash", "date", "de", "deciduous_tree", "department_store", "diamond_shape_with_a_dot_inside", "diamonds", "disappointed", "disappointed_relieved", "dizzy", "dizzy_face", "do_not_litter", "dog", "dog2", "dollar", "dolls", "dolphin", "door", "doughnut", "dragon", "dragon_face", "dress", "dromedary_camel", "droplet", "dvd", "e-mail", "ear", "ear_of_rice", "earth_africa", "earth_americas", "earth_asia", "egg", "eggplant", "eight", "eight_pointed_black_star", "eight_spoked_asterisk", "electric_plug", "elephant", "email", "end", "envelope", "envelope_with_arrow", "es", "euro", "european_castle", "european_post_office", "evergreen_tree", "exclamation", "expressionless", "eyeglasses", "eyes", "facepunch", "factory", "fallen_leaf", "family", "fast_forward", "fax", "fearful", "feelsgood", "feet", "ferris_wheel", "file_folder", "finnadie", "fire", "fire_engine", "fireworks", "first_quarter_moon", "first_quarter_moon_with_face", "fish", "fish_cake", "fishing_pole_and_fish", "fist", "five", "flags", "flashlight", "floppy_disk", "flower_playing_cards", "flushed", "foggy", "football", "footprints", "fork_and_knife", "fountain", "four", "four_leaf_clover", "fr", "free", "fried_shrimp", "fries", "frog", "frowning", "fuelpump", "full_moon", "full_moon_with_face", "game_die", "gb", "gem", "gemini", "ghost", "gift", "gift_heart", "girl", "globe_with_meridians", "goat", "goberserk", "godmode", "golf", "grapes", "green_apple", "green_book", "green_heart", "grey_exclamation", "grey_question", "grimacing", "grin", "grinning", "guardsman", "guitar", "gun", "haircut", "hamburger", "hammer", "hamster", "hand", "handbag", "hankey", "hash", "hatched_chick", "hatching_chick", "headphones", "hear_no_evil", "heart", "heart_decoration", "heart_eyes", "heart_eyes_cat", "heartbeat", "heartpulse", "hearts", "heavy_check_mark", "heavy_division_sign", "heavy_dollar_sign", "heavy_exclamation_mark", "heavy_minus_sign", "heavy_multiplication_x", "heavy_plus_sign", "helicopter", "herb", "hibiscus", "high_brightness", "high_heel", "hocho", "honey_pot", "honeybee", "horse", "horse_racing", "hospital", "hotel", "hotsprings", "hourglass", "hourglass_flowing_sand", "house", "house_with_garden", "hurtrealbad", "hushed", "ice_cream", "icecream", "id", "ideograph_advantage", "imp", "inbox_tray", "incoming_envelope", "information_desk_person", "information_source", "innocent", "interrobang", "iphone", "it", "izakaya_lantern", "jack_o_lantern", "japan", "japanese_castle", "japanese_goblin", "japanese_ogre", "jeans", "joy", "joy_cat", "jp", "key", "keycap_ten", "kimono", "kiss", "kissing", "kissing_cat", "kissing_closed_eyes", "kissing_heart", "kissing_smiling_eyes", "koala", "koko", "kr", "lantern", "large_blue_circle", "large_blue_diamond", "large_orange_diamond", "last_quarter_moon", "last_quarter_moon_with_face", "laughing", "leaves", "ledger", "left_luggage", "left_right_arrow", "leftwards_arrow_with_hook", "lemon", "leo", "leopard", "libra", "light_rail", "link", "lips", "lipstick", "lock", "lock_with_ink_pen", "lollipop", "loop", "loudspeaker", "love_hotel", "love_letter", "low_brightness", "m", "mag", "mag_right", "mahjong", "mailbox", "mailbox_closed", "mailbox_with_mail", "mailbox_with_no_mail", "man", "man_with_gua_pi_mao", "man_with_turban", "mans_shoe", "maple_leaf", "mask", "massage", "meat_on_bone", "mega", "melon", "memo", "mens", "metal", "metro", "microphone", "microscope", "milky_way", "minibus", "minidisc", "mobile_phone_off", "money_with_wings", "moneybag", "monkey", "monkey_face", "monorail", "moon", "mortar_board", "mount_fuji", "mountain_bicyclist", "mountain_cableway", "mountain_railway", "mouse", "mouse2", "movie_camera", "moyai", "muscle", "mushroom", "musical_keyboard", "musical_note", "musical_score", "mute", "nail_care", "name_badge", "neckbeard", "necktie", "negative_squared_cross_mark", "neutral_face", "new", "new_moon", "new_moon_with_face", "newspaper", "ng", "nine", "no_bell", "no_bicycles", "no_entry", "no_entry_sign", "no_good", "no_mobile_phones", "no_mouth", "no_pedestrians", "no_smoking", "non-potable_water", "nose", "notebook", "notebook_with_decorative_cover", "notes", "nut_and_bolt", "o", "o2", "ocean", "octocat", "octopus", "oden", "office", "ok", "ok_hand", "ok_woman", "older_man", "older_woman", "on", "oncoming_automobile", "oncoming_bus", "oncoming_police_car", "oncoming_taxi", "one", "open_book", "open_file_folder", "open_hands", "open_mouth", "ophiuchus", "orange_book", "outbox_tray", "ox", "package", "page_facing_up", "page_with_curl", "pager", "palm_tree", "panda_face", "paperclip", "parking", "part_alternation_mark", "partly_sunny", "passport_control", "paw_prints", "peach", "pear", "pencil", "pencil2", "penguin", "pensive", "performing_arts", "persevere", "person_frowning", "person_with_blond_hair", "person_with_pouting_face", "phone", "pig", "pig2", "pig_nose", "pill", "pineapple", "pisces", "pizza", "point_down", "point_left", "point_right", "point_up", "point_up_2", "police_car", "poodle", "poop", "post_office", "postal_horn", "postbox", "potable_water", "pouch", "poultry_leg", "pound", "pouting_cat", "pray", "princess", "punch", "purple_heart", "purse", "pushpin", "put_litter_in_its_place", "question", "rabbit", "rabbit2", "racehorse", "radio", "radio_button", "rage", "rage1", "rage2", "rage3", "rage4", "railway_car", "rainbow", "raised_hand", "raised_hands", "raising_hand", "ram", "ramen", "rat", "recycle", "red_car", "red_circle", "registered", "relaxed", "relieved", "repeat", "repeat_one", "restroom", "revolving_hearts", "rewind", "ribbon", "rice", "rice_ball", "rice_cracker", "rice_scene", "ring", "rocket", "roller_coaster", "rooster", "rose", "rotating_light", "round_pushpin", "rowboat", "ru", "rugby_football", "runner", "running", "running_shirt_with_sash", "sa", "sagittarius", "sailboat", "sake", "sandal", "santa", "satellite", "satisfied", "saxophone", "school", "school_satchel", "scissors", "scorpius", "scream", "scream_cat", "scroll", "seat", "secret", "see_no_evil", "seedling", "seven", "shaved_ice", "sheep", "shell", "ship", "shipit", "shirt", "shit", "shoe", "shower", "signal_strength", "six", "six_pointed_star", "ski", "skull", "sleeping", "sleepy", "slot_machine", "small_blue_diamond", "small_orange_diamond", "small_red_triangle", "small_red_triangle_down", "smile", "smile_cat", "smiley", "smiley_cat", "smiling_imp", "smirk", "smirk_cat", "smoking", "snail", "snake", "snowboarder", "snowflake", "snowman", "sob", "soccer", "soon", "sos", "sound", "space_invader", "spades", "spaghetti", "sparkle", "sparkler", "sparkles", "sparkling_heart", "speak_no_evil", "speaker", "speech_balloon", "speedboat", "squirrel", "star", "star2", "stars", "station", "statue_of_liberty", "steam_locomotive", "stew", "straight_ruler", "strawberry", "stuck_out_tongue", "stuck_out_tongue_closed_eyes", "stuck_out_tongue_winking_eye", "sun_with_face", "sunflower", "sunglasses", "sunny", "sunrise", "sunrise_over_mountains", "surfer", "sushi", "suspect", "suspension_railway", "sweat", "sweat_drops", "sweat_smile", "sweet_potato", "swimmer", "symbols", "syringe", "tada", "tanabata_tree", "tangerine", "taurus", "taxi", "tea", "telephone", "telephone_receiver", "telescope", "tennis", "tent", "thought_balloon", "three", "thumbsdown", "thumbsup", "ticket", "tiger", "tiger2", "tired_face", "tm", "toilet", "tokyo_tower", "tomato", "tongue", "top", "tophat", "tractor", "traffic_light", "train", "train2", "tram", "triangular_flag_on_post", "triangular_ruler", "trident", "triumph", "trolleybus", "trollface", "trophy", "tropical_drink", "tropical_fish", "truck", "trumpet", "tshirt", "tulip", "turtle", "tv", "twisted_rightwards_arrows", "two", "two_hearts", "two_men_holding_hands", "two_women_holding_hands", "u5272", "u5408", "u55b6", "u6307", "u6708", "u6709", "u6e80", "u7121", "u7533", "u7981", "u7a7a", "uk", "umbrella", "unamused", "underage", "unlock", "up", "us", "v", "vertical_traffic_light", "vhs", "vibration_mode", "video_camera", "video_game", "violin", "virgo", "volcano", "vs", "walking", "waning_crescent_moon", "waning_gibbous_moon", "warning", "watch", "water_buffalo", "watermelon", "wave", "wavy_dash", "waxing_crescent_moon", "waxing_gibbous_moon", "wc", "weary", "wedding", "whale", "whale2", "wheelchair", "white_check_mark", "white_circle", "white_flower", "white_large_square", "white_medium_small_square", "white_medium_square", "white_small_square", "white_square_button", "wind_chime", "wine_glass", "wink", "wolf", "woman", "womans_clothes", "womans_hat", "womens", "worried", "wrench", "x", "yellow_heart", "yen", "yum", "zap", "zero", "zzz"],
    paths: {
        "+1": "https://d3dma7a8zw52bz.cloudfront.net/emoji/+1.png",
        "-1": "https://d3dma7a8zw52bz.cloudfront.net/emoji/-1.png",
        100: "https://d3dma7a8zw52bz.cloudfront.net/emoji/100.png",
        1234: "https://d3dma7a8zw52bz.cloudfront.net/emoji/1234.png",
        "8ball": "https://d3dma7a8zw52bz.cloudfront.net/emoji/8ball.png",
        a: "https://d3dma7a8zw52bz.cloudfront.net/emoji/a.png",
        ab: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ab.png",
        abc: "https://d3dma7a8zw52bz.cloudfront.net/emoji/abc.png",
        abcd: "https://d3dma7a8zw52bz.cloudfront.net/emoji/abcd.png",
        accept: "https://d3dma7a8zw52bz.cloudfront.net/emoji/accept.png",
        aerial_tramway: "https://d3dma7a8zw52bz.cloudfront.net/emoji/aerial_tramway.png",
        airplane: "https://d3dma7a8zw52bz.cloudfront.net/emoji/airplane.png",
        alarm_clock: "https://d3dma7a8zw52bz.cloudfront.net/emoji/alarm_clock.png",
        alien: "https://d3dma7a8zw52bz.cloudfront.net/emoji/alien.png",
        ambulance: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ambulance.png",
        anchor: "https://d3dma7a8zw52bz.cloudfront.net/emoji/anchor.png",
        angel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/angel.png",
        anger: "https://d3dma7a8zw52bz.cloudfront.net/emoji/anger.png",
        angry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/angry.png",
        anguished: "https://d3dma7a8zw52bz.cloudfront.net/emoji/anguished.png",
        ant: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ant.png",
        apple: "https://d3dma7a8zw52bz.cloudfront.net/emoji/apple.png",
        aquarius: "https://d3dma7a8zw52bz.cloudfront.net/emoji/aquarius.png",
        aries: "https://d3dma7a8zw52bz.cloudfront.net/emoji/aries.png",
        arrow_backward: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_backward.png",
        arrow_double_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_double_down.png",
        arrow_double_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_double_up.png",
        arrow_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_down.png",
        arrow_down_small: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_down_small.png",
        arrow_forward: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_forward.png",
        arrow_heading_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_heading_down.png",
        arrow_heading_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_heading_up.png",
        arrow_left: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_left.png",
        arrow_lower_left: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_lower_left.png",
        arrow_lower_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_lower_right.png",
        arrow_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_right.png",
        arrow_right_hook: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_right_hook.png",
        arrow_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_up.png",
        arrow_up_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_up_down.png",
        arrow_up_small: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_up_small.png",
        arrow_upper_left: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_upper_left.png",
        arrow_upper_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrow_upper_right.png",
        arrows_clockwise: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrows_clockwise.png",
        arrows_counterclockwise: "https://d3dma7a8zw52bz.cloudfront.net/emoji/arrows_counterclockwise.png",
        art: "https://d3dma7a8zw52bz.cloudfront.net/emoji/art.png",
        articulated_lorry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/articulated_lorry.png",
        astonished: "https://d3dma7a8zw52bz.cloudfront.net/emoji/astonished.png",
        athletic_shoe: "https://d3dma7a8zw52bz.cloudfront.net/emoji/athletic_shoe.png",
        atm: "https://d3dma7a8zw52bz.cloudfront.net/emoji/atm.png",
        b: "https://d3dma7a8zw52bz.cloudfront.net/emoji/b.png",
        baby: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baby.png",
        baby_bottle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baby_bottle.png",
        baby_chick: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baby_chick.png",
        baby_symbol: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baby_symbol.png",
        back: "https://d3dma7a8zw52bz.cloudfront.net/emoji/back.png",
        baggage_claim: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baggage_claim.png",
        balloon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/balloon.png",
        ballot_box_with_check: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ballot_box_with_check.png",
        bamboo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bamboo.png",
        banana: "https://d3dma7a8zw52bz.cloudfront.net/emoji/banana.png",
        bangbang: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bangbang.png",
        bank: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bank.png",
        bar_chart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bar_chart.png",
        barber: "https://d3dma7a8zw52bz.cloudfront.net/emoji/barber.png",
        baseball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/baseball.png",
        basketball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/basketball.png",
        bath: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bath.png",
        bathtub: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bathtub.png",
        battery: "https://d3dma7a8zw52bz.cloudfront.net/emoji/battery.png",
        bear: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bear.png",
        bee: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bee.png",
        beer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/beer.png",
        beers: "https://d3dma7a8zw52bz.cloudfront.net/emoji/beers.png",
        beetle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/beetle.png",
        beginner: "https://d3dma7a8zw52bz.cloudfront.net/emoji/beginner.png",
        bell: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bell.png",
        bento: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bento.png",
        bicyclist: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bicyclist.png",
        bike: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bike.png",
        bikini: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bikini.png",
        bird: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bird.png",
        birthday: "https://d3dma7a8zw52bz.cloudfront.net/emoji/birthday.png",
        black_circle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_circle.png",
        black_joker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_joker.png",
        black_large_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_large_square.png",
        black_medium_small_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_medium_small_square.png",
        black_medium_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_medium_square.png",
        black_nib: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_nib.png",
        black_small_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_small_square.png",
        black_square_button: "https://d3dma7a8zw52bz.cloudfront.net/emoji/black_square_button.png",
        blossom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blossom.png",
        blowfish: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blowfish.png",
        blue_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blue_book.png",
        blue_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blue_car.png",
        blue_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blue_heart.png",
        blush: "https://d3dma7a8zw52bz.cloudfront.net/emoji/blush.png",
        boar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boar.png",
        boat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boat.png",
        bomb: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bomb.png",
        book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/book.png",
        bookmark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bookmark.png",
        bookmark_tabs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bookmark_tabs.png",
        books: "https://d3dma7a8zw52bz.cloudfront.net/emoji/books.png",
        boom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boom.png",
        boot: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boot.png",
        bouquet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bouquet.png",
        bow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bow.png",
        bowling: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bowling.png",
        bowtie: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bowtie.png",
        boy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/boy.png",
        bread: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bread.png",
        bride_with_veil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bride_with_veil.png",
        bridge_at_night: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bridge_at_night.png",
        briefcase: "https://d3dma7a8zw52bz.cloudfront.net/emoji/briefcase.png",
        broken_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/broken_heart.png",
        bug: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bug.png",
        bulb: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bulb.png",
        bullettrain_front: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bullettrain_front.png",
        bullettrain_side: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bullettrain_side.png",
        bus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bus.png",
        busstop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/busstop.png",
        bust_in_silhouette: "https://d3dma7a8zw52bz.cloudfront.net/emoji/bust_in_silhouette.png",
        busts_in_silhouette: "https://d3dma7a8zw52bz.cloudfront.net/emoji/busts_in_silhouette.png",
        cactus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cactus.png",
        cake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cake.png",
        calendar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/calendar.png",
        calling: "https://d3dma7a8zw52bz.cloudfront.net/emoji/calling.png",
        camel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/camel.png",
        camera: "https://d3dma7a8zw52bz.cloudfront.net/emoji/camera.png",
        cancer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cancer.png",
        candy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/candy.png",
        capital_abcd: "https://d3dma7a8zw52bz.cloudfront.net/emoji/capital_abcd.png",
        capricorn: "https://d3dma7a8zw52bz.cloudfront.net/emoji/capricorn.png",
        car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/car.png",
        card_index: "https://d3dma7a8zw52bz.cloudfront.net/emoji/card_index.png",
        carousel_horse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/carousel_horse.png",
        cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cat.png",
        cat2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cat2.png",
        cd: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cd.png",
        chart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chart.png",
        chart_with_downwards_trend: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chart_with_downwards_trend.png",
        chart_with_upwards_trend: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chart_with_upwards_trend.png",
        checkered_flag: "https://d3dma7a8zw52bz.cloudfront.net/emoji/checkered_flag.png",
        cherries: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cherries.png",
        cherry_blossom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cherry_blossom.png",
        chestnut: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chestnut.png",
        chicken: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chicken.png",
        children_crossing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/children_crossing.png",
        chocolate_bar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/chocolate_bar.png",
        christmas_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/christmas_tree.png",
        church: "https://d3dma7a8zw52bz.cloudfront.net/emoji/church.png",
        cinema: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cinema.png",
        circus_tent: "https://d3dma7a8zw52bz.cloudfront.net/emoji/circus_tent.png",
        city_sunrise: "https://d3dma7a8zw52bz.cloudfront.net/emoji/city_sunrise.png",
        city_sunset: "https://d3dma7a8zw52bz.cloudfront.net/emoji/city_sunset.png",
        cl: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cl.png",
        clap: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clap.png",
        clapper: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clapper.png",
        clipboard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clipboard.png",
        clock1: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock1.png",
        clock10: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock10.png",
        clock1030: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock1030.png",
        clock11: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock11.png",
        clock1130: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock1130.png",
        clock12: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock12.png",
        clock1230: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock1230.png",
        clock130: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock130.png",
        clock2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock2.png",
        clock230: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock230.png",
        clock3: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock3.png",
        clock330: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock330.png",
        clock4: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock4.png",
        clock430: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock430.png",
        clock5: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock5.png",
        clock530: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock530.png",
        clock6: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock6.png",
        clock630: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock630.png",
        clock7: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock7.png",
        clock730: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock730.png",
        clock8: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock8.png",
        clock830: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock830.png",
        clock9: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock9.png",
        clock930: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clock930.png",
        closed_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/closed_book.png",
        closed_lock_with_key: "https://d3dma7a8zw52bz.cloudfront.net/emoji/closed_lock_with_key.png",
        closed_umbrella: "https://d3dma7a8zw52bz.cloudfront.net/emoji/closed_umbrella.png",
        cloud: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cloud.png",
        clubs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/clubs.png",
        cn: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cn.png",
        cocktail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cocktail.png",
        coffee: "https://d3dma7a8zw52bz.cloudfront.net/emoji/coffee.png",
        cold_sweat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cold_sweat.png",
        collision: "https://d3dma7a8zw52bz.cloudfront.net/emoji/collision.png",
        computer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/computer.png",
        confetti_ball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/confetti_ball.png",
        confounded: "https://d3dma7a8zw52bz.cloudfront.net/emoji/confounded.png",
        confused: "https://d3dma7a8zw52bz.cloudfront.net/emoji/confused.png",
        congratulations: "https://d3dma7a8zw52bz.cloudfront.net/emoji/congratulations.png",
        construction: "https://d3dma7a8zw52bz.cloudfront.net/emoji/construction.png",
        construction_worker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/construction_worker.png",
        convenience_store: "https://d3dma7a8zw52bz.cloudfront.net/emoji/convenience_store.png",
        cookie: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cookie.png",
        cool: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cool.png",
        cop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cop.png",
        copyright: "https://d3dma7a8zw52bz.cloudfront.net/emoji/copyright.png",
        corn: "https://d3dma7a8zw52bz.cloudfront.net/emoji/corn.png",
        couple: "https://d3dma7a8zw52bz.cloudfront.net/emoji/couple.png",
        couple_with_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/couple_with_heart.png",
        couplekiss: "https://d3dma7a8zw52bz.cloudfront.net/emoji/couplekiss.png",
        cow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cow.png",
        cow2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cow2.png",
        credit_card: "https://d3dma7a8zw52bz.cloudfront.net/emoji/credit_card.png",
        crescent_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crescent_moon.png",
        crocodile: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crocodile.png",
        crossed_flags: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crossed_flags.png",
        crown: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crown.png",
        cry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cry.png",
        crying_cat_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crying_cat_face.png",
        crystal_ball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/crystal_ball.png",
        cupid: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cupid.png",
        curly_loop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/curly_loop.png",
        currency_exchange: "https://d3dma7a8zw52bz.cloudfront.net/emoji/currency_exchange.png",
        curry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/curry.png",
        custard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/custard.png",
        customs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/customs.png",
        cyclone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/cyclone.png",
        dancer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dancer.png",
        dancers: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dancers.png",
        dango: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dango.png",
        dart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dart.png",
        dash: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dash.png",
        date: "https://d3dma7a8zw52bz.cloudfront.net/emoji/date.png",
        de: "https://d3dma7a8zw52bz.cloudfront.net/emoji/de.png",
        deciduous_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/deciduous_tree.png",
        department_store: "https://d3dma7a8zw52bz.cloudfront.net/emoji/department_store.png",
        diamond_shape_with_a_dot_inside: "https://d3dma7a8zw52bz.cloudfront.net/emoji/diamond_shape_with_a_dot_inside.png",
        diamonds: "https://d3dma7a8zw52bz.cloudfront.net/emoji/diamonds.png",
        disappointed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/disappointed.png",
        disappointed_relieved: "https://d3dma7a8zw52bz.cloudfront.net/emoji/disappointed_relieved.png",
        dizzy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dizzy.png",
        dizzy_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dizzy_face.png",
        do_not_litter: "https://d3dma7a8zw52bz.cloudfront.net/emoji/do_not_litter.png",
        dog: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dog.png",
        dog2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dog2.png",
        dollar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dollar.png",
        dolls: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dolls.png",
        dolphin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dolphin.png",
        door: "https://d3dma7a8zw52bz.cloudfront.net/emoji/door.png",
        doughnut: "https://d3dma7a8zw52bz.cloudfront.net/emoji/doughnut.png",
        dragon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dragon.png",
        dragon_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dragon_face.png",
        dress: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dress.png",
        dromedary_camel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dromedary_camel.png",
        droplet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/droplet.png",
        dvd: "https://d3dma7a8zw52bz.cloudfront.net/emoji/dvd.png",
        "e-mail": "https://d3dma7a8zw52bz.cloudfront.net/emoji/e-mail.png",
        ear: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ear.png",
        ear_of_rice: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ear_of_rice.png",
        earth_africa: "https://d3dma7a8zw52bz.cloudfront.net/emoji/earth_africa.png",
        earth_americas: "https://d3dma7a8zw52bz.cloudfront.net/emoji/earth_americas.png",
        earth_asia: "https://d3dma7a8zw52bz.cloudfront.net/emoji/earth_asia.png",
        egg: "https://d3dma7a8zw52bz.cloudfront.net/emoji/egg.png",
        eggplant: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eggplant.png",
        eight: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eight.png",
        eight_pointed_black_star: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eight_pointed_black_star.png",
        eight_spoked_asterisk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eight_spoked_asterisk.png",
        electric_plug: "https://d3dma7a8zw52bz.cloudfront.net/emoji/electric_plug.png",
        elephant: "https://d3dma7a8zw52bz.cloudfront.net/emoji/elephant.png",
        email: "https://d3dma7a8zw52bz.cloudfront.net/emoji/email.png",
        end: "https://d3dma7a8zw52bz.cloudfront.net/emoji/end.png",
        envelope: "https://d3dma7a8zw52bz.cloudfront.net/emoji/envelope.png",
        envelope_with_arrow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/envelope_with_arrow.png",
        es: "https://d3dma7a8zw52bz.cloudfront.net/emoji/es.png",
        euro: "https://d3dma7a8zw52bz.cloudfront.net/emoji/euro.png",
        european_castle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/european_castle.png",
        european_post_office: "https://d3dma7a8zw52bz.cloudfront.net/emoji/european_post_office.png",
        evergreen_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/evergreen_tree.png",
        exclamation: "https://d3dma7a8zw52bz.cloudfront.net/emoji/exclamation.png",
        expressionless: "https://d3dma7a8zw52bz.cloudfront.net/emoji/expressionless.png",
        eyeglasses: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eyeglasses.png",
        eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/eyes.png",
        facepunch: "https://d3dma7a8zw52bz.cloudfront.net/emoji/facepunch.png",
        factory: "https://d3dma7a8zw52bz.cloudfront.net/emoji/factory.png",
        fallen_leaf: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fallen_leaf.png",
        family: "https://d3dma7a8zw52bz.cloudfront.net/emoji/family.png",
        fast_forward: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fast_forward.png",
        fax: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fax.png",
        fearful: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fearful.png",
        feelsgood: "https://d3dma7a8zw52bz.cloudfront.net/emoji/feelsgood.png",
        feet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/feet.png",
        ferris_wheel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ferris_wheel.png",
        file_folder: "https://d3dma7a8zw52bz.cloudfront.net/emoji/file_folder.png",
        finnadie: "https://d3dma7a8zw52bz.cloudfront.net/emoji/finnadie.png",
        fire: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fire.png",
        fire_engine: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fire_engine.png",
        fireworks: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fireworks.png",
        first_quarter_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/first_quarter_moon.png",
        first_quarter_moon_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/first_quarter_moon_with_face.png",
        fish: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fish.png",
        fish_cake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fish_cake.png",
        fishing_pole_and_fish: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fishing_pole_and_fish.png",
        fist: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fist.png",
        five: "https://d3dma7a8zw52bz.cloudfront.net/emoji/five.png",
        flags: "https://d3dma7a8zw52bz.cloudfront.net/emoji/flags.png",
        flashlight: "https://d3dma7a8zw52bz.cloudfront.net/emoji/flashlight.png",
        floppy_disk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/floppy_disk.png",
        flower_playing_cards: "https://d3dma7a8zw52bz.cloudfront.net/emoji/flower_playing_cards.png",
        flushed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/flushed.png",
        foggy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/foggy.png",
        football: "https://d3dma7a8zw52bz.cloudfront.net/emoji/football.png",
        footprints: "https://d3dma7a8zw52bz.cloudfront.net/emoji/footprints.png",
        fork_and_knife: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fork_and_knife.png",
        fountain: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fountain.png",
        four: "https://d3dma7a8zw52bz.cloudfront.net/emoji/four.png",
        four_leaf_clover: "https://d3dma7a8zw52bz.cloudfront.net/emoji/four_leaf_clover.png",
        fr: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fr.png",
        free: "https://d3dma7a8zw52bz.cloudfront.net/emoji/free.png",
        fried_shrimp: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fried_shrimp.png",
        fries: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fries.png",
        frog: "https://d3dma7a8zw52bz.cloudfront.net/emoji/frog.png",
        frowning: "https://d3dma7a8zw52bz.cloudfront.net/emoji/frowning.png",
        fuelpump: "https://d3dma7a8zw52bz.cloudfront.net/emoji/fuelpump.png",
        full_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/full_moon.png",
        full_moon_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/full_moon_with_face.png",
        game_die: "https://d3dma7a8zw52bz.cloudfront.net/emoji/game_die.png",
        gb: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gb.png",
        gem: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gem.png",
        gemini: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gemini.png",
        ghost: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ghost.png",
        gift: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gift.png",
        gift_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gift_heart.png",
        girl: "https://d3dma7a8zw52bz.cloudfront.net/emoji/girl.png",
        globe_with_meridians: "https://d3dma7a8zw52bz.cloudfront.net/emoji/globe_with_meridians.png",
        goat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/goat.png",
        goberserk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/goberserk.png",
        godmode: "https://d3dma7a8zw52bz.cloudfront.net/emoji/godmode.png",
        golf: "https://d3dma7a8zw52bz.cloudfront.net/emoji/golf.png",
        grapes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grapes.png",
        green_apple: "https://d3dma7a8zw52bz.cloudfront.net/emoji/green_apple.png",
        green_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/green_book.png",
        green_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/green_heart.png",
        grey_exclamation: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grey_exclamation.png",
        grey_question: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grey_question.png",
        grimacing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grimacing.png",
        grin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grin.png",
        grinning: "https://d3dma7a8zw52bz.cloudfront.net/emoji/grinning.png",
        guardsman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/guardsman.png",
        guitar: "https://d3dma7a8zw52bz.cloudfront.net/emoji/guitar.png",
        gun: "https://d3dma7a8zw52bz.cloudfront.net/emoji/gun.png",
        haircut: "https://d3dma7a8zw52bz.cloudfront.net/emoji/haircut.png",
        hamburger: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hamburger.png",
        hammer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hammer.png",
        hamster: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hamster.png",
        hand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hand.png",
        handbag: "https://d3dma7a8zw52bz.cloudfront.net/emoji/handbag.png",
        hankey: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hankey.png",
        hash: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hash.png",
        hatched_chick: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hatched_chick.png",
        hatching_chick: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hatching_chick.png",
        headphones: "https://d3dma7a8zw52bz.cloudfront.net/emoji/headphones.png",
        hear_no_evil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hear_no_evil.png",
        heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heart.png",
        heart_decoration: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heart_decoration.png",
        heart_eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heart_eyes.png",
        heart_eyes_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heart_eyes_cat.png",
        heartbeat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heartbeat.png",
        heartpulse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heartpulse.png",
        hearts: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hearts.png",
        heavy_check_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_check_mark.png",
        heavy_division_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_division_sign.png",
        heavy_dollar_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_dollar_sign.png",
        heavy_exclamation_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_exclamation_mark.png",
        heavy_minus_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_minus_sign.png",
        heavy_multiplication_x: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_multiplication_x.png",
        heavy_plus_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/heavy_plus_sign.png",
        helicopter: "https://d3dma7a8zw52bz.cloudfront.net/emoji/helicopter.png",
        herb: "https://d3dma7a8zw52bz.cloudfront.net/emoji/herb.png",
        hibiscus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hibiscus.png",
        high_brightness: "https://d3dma7a8zw52bz.cloudfront.net/emoji/high_brightness.png",
        high_heel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/high_heel.png",
        hocho: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hocho.png",
        honey_pot: "https://d3dma7a8zw52bz.cloudfront.net/emoji/honey_pot.png",
        honeybee: "https://d3dma7a8zw52bz.cloudfront.net/emoji/honeybee.png",
        horse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/horse.png",
        horse_racing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/horse_racing.png",
        hospital: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hospital.png",
        hotel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hotel.png",
        hotsprings: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hotsprings.png",
        hourglass: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hourglass.png",
        hourglass_flowing_sand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hourglass_flowing_sand.png",
        house: "https://d3dma7a8zw52bz.cloudfront.net/emoji/house.png",
        house_with_garden: "https://d3dma7a8zw52bz.cloudfront.net/emoji/house_with_garden.png",
        hurtrealbad: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hurtrealbad.png",
        hushed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/hushed.png",
        ice_cream: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ice_cream.png",
        icecream: "https://d3dma7a8zw52bz.cloudfront.net/emoji/icecream.png",
        id: "https://d3dma7a8zw52bz.cloudfront.net/emoji/id.png",
        ideograph_advantage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ideograph_advantage.png",
        imp: "https://d3dma7a8zw52bz.cloudfront.net/emoji/imp.png",
        inbox_tray: "https://d3dma7a8zw52bz.cloudfront.net/emoji/inbox_tray.png",
        incoming_envelope: "https://d3dma7a8zw52bz.cloudfront.net/emoji/incoming_envelope.png",
        information_desk_person: "https://d3dma7a8zw52bz.cloudfront.net/emoji/information_desk_person.png",
        information_source: "https://d3dma7a8zw52bz.cloudfront.net/emoji/information_source.png",
        innocent: "https://d3dma7a8zw52bz.cloudfront.net/emoji/innocent.png",
        interrobang: "https://d3dma7a8zw52bz.cloudfront.net/emoji/interrobang.png",
        iphone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/iphone.png",
        it: "https://d3dma7a8zw52bz.cloudfront.net/emoji/it.png",
        izakaya_lantern: "https://d3dma7a8zw52bz.cloudfront.net/emoji/izakaya_lantern.png",
        jack_o_lantern: "https://d3dma7a8zw52bz.cloudfront.net/emoji/jack_o_lantern.png",
        japan: "https://d3dma7a8zw52bz.cloudfront.net/emoji/japan.png",
        japanese_castle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/japanese_castle.png",
        japanese_goblin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/japanese_goblin.png",
        japanese_ogre: "https://d3dma7a8zw52bz.cloudfront.net/emoji/japanese_ogre.png",
        jeans: "https://d3dma7a8zw52bz.cloudfront.net/emoji/jeans.png",
        joy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/joy.png",
        joy_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/joy_cat.png",
        jp: "https://d3dma7a8zw52bz.cloudfront.net/emoji/jp.png",
        key: "https://d3dma7a8zw52bz.cloudfront.net/emoji/key.png",
        keycap_ten: "https://d3dma7a8zw52bz.cloudfront.net/emoji/keycap_ten.png",
        kimono: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kimono.png",
        kiss: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kiss.png",
        kissing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing.png",
        kissing_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing_cat.png",
        kissing_closed_eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing_closed_eyes.png",
        kissing_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing_heart.png",
        kissing_smiling_eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kissing_smiling_eyes.png",
        koala: "https://d3dma7a8zw52bz.cloudfront.net/emoji/koala.png",
        koko: "https://d3dma7a8zw52bz.cloudfront.net/emoji/koko.png",
        kr: "https://d3dma7a8zw52bz.cloudfront.net/emoji/kr.png",
        lantern: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lantern.png",
        large_blue_circle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/large_blue_circle.png",
        large_blue_diamond: "https://d3dma7a8zw52bz.cloudfront.net/emoji/large_blue_diamond.png",
        large_orange_diamond: "https://d3dma7a8zw52bz.cloudfront.net/emoji/large_orange_diamond.png",
        last_quarter_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/last_quarter_moon.png",
        last_quarter_moon_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/last_quarter_moon_with_face.png",
        laughing: "https://d3dma7a8zw52bz.cloudfront.net/emoji/laughing.png",
        leaves: "https://d3dma7a8zw52bz.cloudfront.net/emoji/leaves.png",
        ledger: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ledger.png",
        left_luggage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/left_luggage.png",
        left_right_arrow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/left_right_arrow.png",
        leftwards_arrow_with_hook: "https://d3dma7a8zw52bz.cloudfront.net/emoji/leftwards_arrow_with_hook.png",
        lemon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lemon.png",
        leo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/leo.png",
        leopard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/leopard.png",
        libra: "https://d3dma7a8zw52bz.cloudfront.net/emoji/libra.png",
        light_rail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/light_rail.png",
        link: "https://d3dma7a8zw52bz.cloudfront.net/emoji/link.png",
        lips: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lips.png",
        lipstick: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lipstick.png",
        lock: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lock.png",
        lock_with_ink_pen: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lock_with_ink_pen.png",
        lollipop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/lollipop.png",
        loop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/loop.png",
        loudspeaker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/loudspeaker.png",
        love_hotel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/love_hotel.png",
        love_letter: "https://d3dma7a8zw52bz.cloudfront.net/emoji/love_letter.png",
        low_brightness: "https://d3dma7a8zw52bz.cloudfront.net/emoji/low_brightness.png",
        m: "https://d3dma7a8zw52bz.cloudfront.net/emoji/m.png",
        mag: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mag.png",
        mag_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mag_right.png",
        mahjong: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mahjong.png",
        mailbox: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mailbox.png",
        mailbox_closed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mailbox_closed.png",
        mailbox_with_mail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mailbox_with_mail.png",
        mailbox_with_no_mail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mailbox_with_no_mail.png",
        man: "https://d3dma7a8zw52bz.cloudfront.net/emoji/man.png",
        man_with_gua_pi_mao: "https://d3dma7a8zw52bz.cloudfront.net/emoji/man_with_gua_pi_mao.png",
        man_with_turban: "https://d3dma7a8zw52bz.cloudfront.net/emoji/man_with_turban.png",
        mans_shoe: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mans_shoe.png",
        maple_leaf: "https://d3dma7a8zw52bz.cloudfront.net/emoji/maple_leaf.png",
        mask: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mask.png",
        massage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/massage.png",
        meat_on_bone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/meat_on_bone.png",
        mega: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mega.png",
        melon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/melon.png",
        memo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/memo.png",
        mens: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mens.png",
        metal: "https://d3dma7a8zw52bz.cloudfront.net/emoji/metal.png",
        metro: "https://d3dma7a8zw52bz.cloudfront.net/emoji/metro.png",
        microphone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/microphone.png",
        microscope: "https://d3dma7a8zw52bz.cloudfront.net/emoji/microscope.png",
        milky_way: "https://d3dma7a8zw52bz.cloudfront.net/emoji/milky_way.png",
        minibus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/minibus.png",
        minidisc: "https://d3dma7a8zw52bz.cloudfront.net/emoji/minidisc.png",
        mobile_phone_off: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mobile_phone_off.png",
        money_with_wings: "https://d3dma7a8zw52bz.cloudfront.net/emoji/money_with_wings.png",
        moneybag: "https://d3dma7a8zw52bz.cloudfront.net/emoji/moneybag.png",
        monkey: "https://d3dma7a8zw52bz.cloudfront.net/emoji/monkey.png",
        monkey_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/monkey_face.png",
        monorail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/monorail.png",
        moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/moon.png",
        mortar_board: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mortar_board.png",
        mount_fuji: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mount_fuji.png",
        mountain_bicyclist: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mountain_bicyclist.png",
        mountain_cableway: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mountain_cableway.png",
        mountain_railway: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mountain_railway.png",
        mouse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mouse.png",
        mouse2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mouse2.png",
        movie_camera: "https://d3dma7a8zw52bz.cloudfront.net/emoji/movie_camera.png",
        moyai: "https://d3dma7a8zw52bz.cloudfront.net/emoji/moyai.png",
        muscle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/muscle.png",
        mushroom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mushroom.png",
        musical_keyboard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/musical_keyboard.png",
        musical_note: "https://d3dma7a8zw52bz.cloudfront.net/emoji/musical_note.png",
        musical_score: "https://d3dma7a8zw52bz.cloudfront.net/emoji/musical_score.png",
        mute: "https://d3dma7a8zw52bz.cloudfront.net/emoji/mute.png",
        nail_care: "https://d3dma7a8zw52bz.cloudfront.net/emoji/nail_care.png",
        name_badge: "https://d3dma7a8zw52bz.cloudfront.net/emoji/name_badge.png",
        neckbeard: "https://d3dma7a8zw52bz.cloudfront.net/emoji/neckbeard.png",
        necktie: "https://d3dma7a8zw52bz.cloudfront.net/emoji/necktie.png",
        negative_squared_cross_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/negative_squared_cross_mark.png",
        neutral_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/neutral_face.png",
        "new": "https://d3dma7a8zw52bz.cloudfront.net/emoji/new.png",
        new_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/new_moon.png",
        new_moon_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/new_moon_with_face.png",
        newspaper: "https://d3dma7a8zw52bz.cloudfront.net/emoji/newspaper.png",
        ng: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ng.png",
        nine: "https://d3dma7a8zw52bz.cloudfront.net/emoji/nine.png",
        no_bell: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_bell.png",
        no_bicycles: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_bicycles.png",
        no_entry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_entry.png",
        no_entry_sign: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_entry_sign.png",
        no_good: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_good.png",
        no_mobile_phones: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_mobile_phones.png",
        no_mouth: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_mouth.png",
        no_pedestrians: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_pedestrians.png",
        no_smoking: "https://d3dma7a8zw52bz.cloudfront.net/emoji/no_smoking.png",
        "non-potable_water": "https://d3dma7a8zw52bz.cloudfront.net/emoji/non-potable_water.png",
        nose: "https://d3dma7a8zw52bz.cloudfront.net/emoji/nose.png",
        notebook: "https://d3dma7a8zw52bz.cloudfront.net/emoji/notebook.png",
        notebook_with_decorative_cover: "https://d3dma7a8zw52bz.cloudfront.net/emoji/notebook_with_decorative_cover.png",
        notes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/notes.png",
        nut_and_bolt: "https://d3dma7a8zw52bz.cloudfront.net/emoji/nut_and_bolt.png",
        o: "https://d3dma7a8zw52bz.cloudfront.net/emoji/o.png",
        o2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/o2.png",
        ocean: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ocean.png",
        octocat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/octocat.png",
        octopus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/octopus.png",
        oden: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oden.png",
        office: "https://d3dma7a8zw52bz.cloudfront.net/emoji/office.png",
        ok: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ok.png",
        ok_hand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ok_hand.png",
        ok_woman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ok_woman.png",
        older_man: "https://d3dma7a8zw52bz.cloudfront.net/emoji/older_man.png",
        older_woman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/older_woman.png",
        on: "https://d3dma7a8zw52bz.cloudfront.net/emoji/on.png",
        oncoming_automobile: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oncoming_automobile.png",
        oncoming_bus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oncoming_bus.png",
        oncoming_police_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oncoming_police_car.png",
        oncoming_taxi: "https://d3dma7a8zw52bz.cloudfront.net/emoji/oncoming_taxi.png",
        one: "https://d3dma7a8zw52bz.cloudfront.net/emoji/one.png",
        open_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/open_book.png",
        open_file_folder: "https://d3dma7a8zw52bz.cloudfront.net/emoji/open_file_folder.png",
        open_hands: "https://d3dma7a8zw52bz.cloudfront.net/emoji/open_hands.png",
        open_mouth: "https://d3dma7a8zw52bz.cloudfront.net/emoji/open_mouth.png",
        ophiuchus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ophiuchus.png",
        orange_book: "https://d3dma7a8zw52bz.cloudfront.net/emoji/orange_book.png",
        outbox_tray: "https://d3dma7a8zw52bz.cloudfront.net/emoji/outbox_tray.png",
        ox: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ox.png",
        "package": "https://d3dma7a8zw52bz.cloudfront.net/emoji/package.png",
        page_facing_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/page_facing_up.png",
        page_with_curl: "https://d3dma7a8zw52bz.cloudfront.net/emoji/page_with_curl.png",
        pager: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pager.png",
        palm_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/palm_tree.png",
        panda_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/panda_face.png",
        paperclip: "https://d3dma7a8zw52bz.cloudfront.net/emoji/paperclip.png",
        parking: "https://d3dma7a8zw52bz.cloudfront.net/emoji/parking.png",
        part_alternation_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/part_alternation_mark.png",
        partly_sunny: "https://d3dma7a8zw52bz.cloudfront.net/emoji/partly_sunny.png",
        passport_control: "https://d3dma7a8zw52bz.cloudfront.net/emoji/passport_control.png",
        paw_prints: "https://d3dma7a8zw52bz.cloudfront.net/emoji/paw_prints.png",
        peach: "https://d3dma7a8zw52bz.cloudfront.net/emoji/peach.png",
        pear: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pear.png",
        pencil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pencil.png",
        pencil2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pencil2.png",
        penguin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/penguin.png",
        pensive: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pensive.png",
        performing_arts: "https://d3dma7a8zw52bz.cloudfront.net/emoji/performing_arts.png",
        persevere: "https://d3dma7a8zw52bz.cloudfront.net/emoji/persevere.png",
        person_frowning: "https://d3dma7a8zw52bz.cloudfront.net/emoji/person_frowning.png",
        person_with_blond_hair: "https://d3dma7a8zw52bz.cloudfront.net/emoji/person_with_blond_hair.png",
        person_with_pouting_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/person_with_pouting_face.png",
        phone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/phone.png",
        pig: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pig.png",
        pig2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pig2.png",
        pig_nose: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pig_nose.png",
        pill: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pill.png",
        pineapple: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pineapple.png",
        pisces: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pisces.png",
        pizza: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pizza.png",
        point_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_down.png",
        point_left: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_left.png",
        point_right: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_right.png",
        point_up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_up.png",
        point_up_2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/point_up_2.png",
        police_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/police_car.png",
        poodle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/poodle.png",
        poop: "https://d3dma7a8zw52bz.cloudfront.net/emoji/poop.png",
        post_office: "https://d3dma7a8zw52bz.cloudfront.net/emoji/post_office.png",
        postal_horn: "https://d3dma7a8zw52bz.cloudfront.net/emoji/postal_horn.png",
        postbox: "https://d3dma7a8zw52bz.cloudfront.net/emoji/postbox.png",
        potable_water: "https://d3dma7a8zw52bz.cloudfront.net/emoji/potable_water.png",
        pouch: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pouch.png",
        poultry_leg: "https://d3dma7a8zw52bz.cloudfront.net/emoji/poultry_leg.png",
        pound: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pound.png",
        pouting_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pouting_cat.png",
        pray: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pray.png",
        princess: "https://d3dma7a8zw52bz.cloudfront.net/emoji/princess.png",
        punch: "https://d3dma7a8zw52bz.cloudfront.net/emoji/punch.png",
        purple_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/purple_heart.png",
        purse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/purse.png",
        pushpin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/pushpin.png",
        put_litter_in_its_place: "https://d3dma7a8zw52bz.cloudfront.net/emoji/put_litter_in_its_place.png",
        question: "https://d3dma7a8zw52bz.cloudfront.net/emoji/question.png",
        rabbit: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rabbit.png",
        rabbit2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rabbit2.png",
        racehorse: "https://d3dma7a8zw52bz.cloudfront.net/emoji/racehorse.png",
        radio: "https://d3dma7a8zw52bz.cloudfront.net/emoji/radio.png",
        radio_button: "https://d3dma7a8zw52bz.cloudfront.net/emoji/radio_button.png",
        rage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage.png",
        rage1: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage1.png",
        rage2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage2.png",
        rage3: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage3.png",
        rage4: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rage4.png",
        railway_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/railway_car.png",
        rainbow: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rainbow.png",
        raised_hand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/raised_hand.png",
        raised_hands: "https://d3dma7a8zw52bz.cloudfront.net/emoji/raised_hands.png",
        raising_hand: "https://d3dma7a8zw52bz.cloudfront.net/emoji/raising_hand.png",
        ram: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ram.png",
        ramen: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ramen.png",
        rat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rat.png",
        recycle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/recycle.png",
        red_car: "https://d3dma7a8zw52bz.cloudfront.net/emoji/red_car.png",
        red_circle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/red_circle.png",
        registered: "https://d3dma7a8zw52bz.cloudfront.net/emoji/registered.png",
        relaxed: "https://d3dma7a8zw52bz.cloudfront.net/emoji/relaxed.png",
        relieved: "https://d3dma7a8zw52bz.cloudfront.net/emoji/relieved.png",
        repeat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/repeat.png",
        repeat_one: "https://d3dma7a8zw52bz.cloudfront.net/emoji/repeat_one.png",
        restroom: "https://d3dma7a8zw52bz.cloudfront.net/emoji/restroom.png",
        revolving_hearts: "https://d3dma7a8zw52bz.cloudfront.net/emoji/revolving_hearts.png",
        rewind: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rewind.png",
        ribbon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ribbon.png",
        rice: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rice.png",
        rice_ball: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rice_ball.png",
        rice_cracker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rice_cracker.png",
        rice_scene: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rice_scene.png",
        ring: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ring.png",
        rocket: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rocket.png",
        roller_coaster: "https://d3dma7a8zw52bz.cloudfront.net/emoji/roller_coaster.png",
        rooster: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rooster.png",
        rose: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rose.png",
        rotating_light: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rotating_light.png",
        round_pushpin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/round_pushpin.png",
        rowboat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rowboat.png",
        ru: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ru.png",
        rugby_football: "https://d3dma7a8zw52bz.cloudfront.net/emoji/rugby_football.png",
        runner: "https://d3dma7a8zw52bz.cloudfront.net/emoji/runner.png",
        running: "https://d3dma7a8zw52bz.cloudfront.net/emoji/running.png",
        running_shirt_with_sash: "https://d3dma7a8zw52bz.cloudfront.net/emoji/running_shirt_with_sash.png",
        sa: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sa.png",
        sagittarius: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sagittarius.png",
        sailboat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sailboat.png",
        sake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sake.png",
        sandal: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sandal.png",
        santa: "https://d3dma7a8zw52bz.cloudfront.net/emoji/santa.png",
        satellite: "https://d3dma7a8zw52bz.cloudfront.net/emoji/satellite.png",
        satisfied: "https://d3dma7a8zw52bz.cloudfront.net/emoji/satisfied.png",
        saxophone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/saxophone.png",
        school: "https://d3dma7a8zw52bz.cloudfront.net/emoji/school.png",
        school_satchel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/school_satchel.png",
        scissors: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scissors.png",
        scorpius: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scorpius.png",
        scream: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scream.png",
        scream_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scream_cat.png",
        scroll: "https://d3dma7a8zw52bz.cloudfront.net/emoji/scroll.png",
        seat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/seat.png",
        secret: "https://d3dma7a8zw52bz.cloudfront.net/emoji/secret.png",
        see_no_evil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/see_no_evil.png",
        seedling: "https://d3dma7a8zw52bz.cloudfront.net/emoji/seedling.png",
        seven: "https://d3dma7a8zw52bz.cloudfront.net/emoji/seven.png",
        shaved_ice: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shaved_ice.png",
        sheep: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sheep.png",
        shell: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shell.png",
        ship: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ship.png",
        shipit: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shipit.png",
        shirt: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shirt.png",
        shit: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shit.png",
        shoe: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shoe.png",
        shower: "https://d3dma7a8zw52bz.cloudfront.net/emoji/shower.png",
        signal_strength: "https://d3dma7a8zw52bz.cloudfront.net/emoji/signal_strength.png",
        six: "https://d3dma7a8zw52bz.cloudfront.net/emoji/six.png",
        six_pointed_star: "https://d3dma7a8zw52bz.cloudfront.net/emoji/six_pointed_star.png",
        ski: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ski.png",
        skull: "https://d3dma7a8zw52bz.cloudfront.net/emoji/skull.png",
        sleeping: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sleeping.png",
        sleepy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sleepy.png",
        slot_machine: "https://d3dma7a8zw52bz.cloudfront.net/emoji/slot_machine.png",
        small_blue_diamond: "https://d3dma7a8zw52bz.cloudfront.net/emoji/small_blue_diamond.png",
        small_orange_diamond: "https://d3dma7a8zw52bz.cloudfront.net/emoji/small_orange_diamond.png",
        small_red_triangle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/small_red_triangle.png",
        small_red_triangle_down: "https://d3dma7a8zw52bz.cloudfront.net/emoji/small_red_triangle_down.png",
        smile: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smile.png",
        smile_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smile_cat.png",
        smiley: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smiley.png",
        smiley_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smiley_cat.png",
        smiling_imp: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smiling_imp.png",
        smirk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smirk.png",
        smirk_cat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smirk_cat.png",
        smoking: "https://d3dma7a8zw52bz.cloudfront.net/emoji/smoking.png",
        snail: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snail.png",
        snake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snake.png",
        snowboarder: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snowboarder.png",
        snowflake: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snowflake.png",
        snowman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/snowman.png",
        sob: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sob.png",
        soccer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/soccer.png",
        soon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/soon.png",
        sos: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sos.png",
        sound: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sound.png",
        space_invader: "https://d3dma7a8zw52bz.cloudfront.net/emoji/space_invader.png",
        spades: "https://d3dma7a8zw52bz.cloudfront.net/emoji/spades.png",
        spaghetti: "https://d3dma7a8zw52bz.cloudfront.net/emoji/spaghetti.png",
        sparkle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sparkle.png",
        sparkler: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sparkler.png",
        sparkles: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sparkles.png",
        sparkling_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sparkling_heart.png",
        speak_no_evil: "https://d3dma7a8zw52bz.cloudfront.net/emoji/speak_no_evil.png",
        speaker: "https://d3dma7a8zw52bz.cloudfront.net/emoji/speaker.png",
        speech_balloon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/speech_balloon.png",
        speedboat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/speedboat.png",
        squirrel: "https://d3dma7a8zw52bz.cloudfront.net/emoji/squirrel.png",
        star: "https://d3dma7a8zw52bz.cloudfront.net/emoji/star.png",
        star2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/star2.png",
        stars: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stars.png",
        station: "https://d3dma7a8zw52bz.cloudfront.net/emoji/station.png",
        statue_of_liberty: "https://d3dma7a8zw52bz.cloudfront.net/emoji/statue_of_liberty.png",
        steam_locomotive: "https://d3dma7a8zw52bz.cloudfront.net/emoji/steam_locomotive.png",
        stew: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stew.png",
        straight_ruler: "https://d3dma7a8zw52bz.cloudfront.net/emoji/straight_ruler.png",
        strawberry: "https://d3dma7a8zw52bz.cloudfront.net/emoji/strawberry.png",
        stuck_out_tongue: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stuck_out_tongue.png",
        stuck_out_tongue_closed_eyes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stuck_out_tongue_closed_eyes.png",
        stuck_out_tongue_winking_eye: "https://d3dma7a8zw52bz.cloudfront.net/emoji/stuck_out_tongue_winking_eye.png",
        sun_with_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sun_with_face.png",
        sunflower: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunflower.png",
        sunglasses: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunglasses.png",
        sunny: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunny.png",
        sunrise: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunrise.png",
        sunrise_over_mountains: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sunrise_over_mountains.png",
        surfer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/surfer.png",
        sushi: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sushi.png",
        suspect: "https://d3dma7a8zw52bz.cloudfront.net/emoji/suspect.png",
        suspension_railway: "https://d3dma7a8zw52bz.cloudfront.net/emoji/suspension_railway.png",
        sweat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sweat.png",
        sweat_drops: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sweat_drops.png",
        sweat_smile: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sweat_smile.png",
        sweet_potato: "https://d3dma7a8zw52bz.cloudfront.net/emoji/sweet_potato.png",
        swimmer: "https://d3dma7a8zw52bz.cloudfront.net/emoji/swimmer.png",
        symbols: "https://d3dma7a8zw52bz.cloudfront.net/emoji/symbols.png",
        syringe: "https://d3dma7a8zw52bz.cloudfront.net/emoji/syringe.png",
        tada: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tada.png",
        tanabata_tree: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tanabata_tree.png",
        tangerine: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tangerine.png",
        taurus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/taurus.png",
        taxi: "https://d3dma7a8zw52bz.cloudfront.net/emoji/taxi.png",
        tea: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tea.png",
        telephone: "https://d3dma7a8zw52bz.cloudfront.net/emoji/telephone.png",
        telephone_receiver: "https://d3dma7a8zw52bz.cloudfront.net/emoji/telephone_receiver.png",
        telescope: "https://d3dma7a8zw52bz.cloudfront.net/emoji/telescope.png",
        tennis: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tennis.png",
        tent: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tent.png",
        thought_balloon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/thought_balloon.png",
        three: "https://d3dma7a8zw52bz.cloudfront.net/emoji/three.png",
        thumbsdown: "https://d3dma7a8zw52bz.cloudfront.net/emoji/thumbsdown.png",
        thumbsup: "https://d3dma7a8zw52bz.cloudfront.net/emoji/thumbsup.png",
        ticket: "https://d3dma7a8zw52bz.cloudfront.net/emoji/ticket.png",
        tiger: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tiger.png",
        tiger2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tiger2.png",
        tired_face: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tired_face.png",
        tm: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tm.png",
        toilet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/toilet.png",
        tokyo_tower: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tokyo_tower.png",
        tomato: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tomato.png",
        tongue: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tongue.png",
        top: "https://d3dma7a8zw52bz.cloudfront.net/emoji/top.png",
        tophat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tophat.png",
        tractor: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tractor.png",
        traffic_light: "https://d3dma7a8zw52bz.cloudfront.net/emoji/traffic_light.png",
        train: "https://d3dma7a8zw52bz.cloudfront.net/emoji/train.png",
        train2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/train2.png",
        tram: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tram.png",
        triangular_flag_on_post: "https://d3dma7a8zw52bz.cloudfront.net/emoji/triangular_flag_on_post.png",
        triangular_ruler: "https://d3dma7a8zw52bz.cloudfront.net/emoji/triangular_ruler.png",
        trident: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trident.png",
        triumph: "https://d3dma7a8zw52bz.cloudfront.net/emoji/triumph.png",
        trolleybus: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trolleybus.png",
        trollface: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trollface.png",
        trophy: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trophy.png",
        tropical_drink: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tropical_drink.png",
        tropical_fish: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tropical_fish.png",
        truck: "https://d3dma7a8zw52bz.cloudfront.net/emoji/truck.png",
        trumpet: "https://d3dma7a8zw52bz.cloudfront.net/emoji/trumpet.png",
        tshirt: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tshirt.png",
        tulip: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tulip.png",
        turtle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/turtle.png",
        tv: "https://d3dma7a8zw52bz.cloudfront.net/emoji/tv.png",
        twisted_rightwards_arrows: "https://d3dma7a8zw52bz.cloudfront.net/emoji/twisted_rightwards_arrows.png",
        two: "https://d3dma7a8zw52bz.cloudfront.net/emoji/two.png",
        two_hearts: "https://d3dma7a8zw52bz.cloudfront.net/emoji/two_hearts.png",
        two_men_holding_hands: "https://d3dma7a8zw52bz.cloudfront.net/emoji/two_men_holding_hands.png",
        two_women_holding_hands: "https://d3dma7a8zw52bz.cloudfront.net/emoji/two_women_holding_hands.png",
        u5272: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u5272.png",
        u5408: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u5408.png",
        u55b6: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u55b6.png",
        u6307: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u6307.png",
        u6708: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u6708.png",
        u6709: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u6709.png",
        u6e80: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u6e80.png",
        u7121: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u7121.png",
        u7533: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u7533.png",
        u7981: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u7981.png",
        u7a7a: "https://d3dma7a8zw52bz.cloudfront.net/emoji/u7a7a.png",
        uk: "https://d3dma7a8zw52bz.cloudfront.net/emoji/uk.png",
        umbrella: "https://d3dma7a8zw52bz.cloudfront.net/emoji/umbrella.png",
        unamused: "https://d3dma7a8zw52bz.cloudfront.net/emoji/unamused.png",
        underage: "https://d3dma7a8zw52bz.cloudfront.net/emoji/underage.png",
        unlock: "https://d3dma7a8zw52bz.cloudfront.net/emoji/unlock.png",
        up: "https://d3dma7a8zw52bz.cloudfront.net/emoji/up.png",
        us: "https://d3dma7a8zw52bz.cloudfront.net/emoji/us.png",
        v: "https://d3dma7a8zw52bz.cloudfront.net/emoji/v.png",
        vertical_traffic_light: "https://d3dma7a8zw52bz.cloudfront.net/emoji/vertical_traffic_light.png",
        vhs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/vhs.png",
        vibration_mode: "https://d3dma7a8zw52bz.cloudfront.net/emoji/vibration_mode.png",
        video_camera: "https://d3dma7a8zw52bz.cloudfront.net/emoji/video_camera.png",
        video_game: "https://d3dma7a8zw52bz.cloudfront.net/emoji/video_game.png",
        violin: "https://d3dma7a8zw52bz.cloudfront.net/emoji/violin.png",
        virgo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/virgo.png",
        volcano: "https://d3dma7a8zw52bz.cloudfront.net/emoji/volcano.png",
        vs: "https://d3dma7a8zw52bz.cloudfront.net/emoji/vs.png",
        walking: "https://d3dma7a8zw52bz.cloudfront.net/emoji/walking.png",
        waning_crescent_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/waning_crescent_moon.png",
        waning_gibbous_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/waning_gibbous_moon.png",
        warning: "https://d3dma7a8zw52bz.cloudfront.net/emoji/warning.png",
        watch: "https://d3dma7a8zw52bz.cloudfront.net/emoji/watch.png",
        water_buffalo: "https://d3dma7a8zw52bz.cloudfront.net/emoji/water_buffalo.png",
        watermelon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/watermelon.png",
        wave: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wave.png",
        wavy_dash: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wavy_dash.png",
        waxing_crescent_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/waxing_crescent_moon.png",
        waxing_gibbous_moon: "https://d3dma7a8zw52bz.cloudfront.net/emoji/waxing_gibbous_moon.png",
        wc: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wc.png",
        weary: "https://d3dma7a8zw52bz.cloudfront.net/emoji/weary.png",
        wedding: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wedding.png",
        whale: "https://d3dma7a8zw52bz.cloudfront.net/emoji/whale.png",
        whale2: "https://d3dma7a8zw52bz.cloudfront.net/emoji/whale2.png",
        wheelchair: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wheelchair.png",
        white_check_mark: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_check_mark.png",
        white_circle: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_circle.png",
        white_flower: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_flower.png",
        white_large_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_large_square.png",
        white_medium_small_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_medium_small_square.png",
        white_medium_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_medium_square.png",
        white_small_square: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_small_square.png",
        white_square_button: "https://d3dma7a8zw52bz.cloudfront.net/emoji/white_square_button.png",
        wind_chime: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wind_chime.png",
        wine_glass: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wine_glass.png",
        wink: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wink.png",
        wolf: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wolf.png",
        woman: "https://d3dma7a8zw52bz.cloudfront.net/emoji/woman.png",
        womans_clothes: "https://d3dma7a8zw52bz.cloudfront.net/emoji/womans_clothes.png",
        womans_hat: "https://d3dma7a8zw52bz.cloudfront.net/emoji/womans_hat.png",
        womens: "https://d3dma7a8zw52bz.cloudfront.net/emoji/womens.png",
        worried: "https://d3dma7a8zw52bz.cloudfront.net/emoji/worried.png",
        wrench: "https://d3dma7a8zw52bz.cloudfront.net/emoji/wrench.png",
        x: "https://d3dma7a8zw52bz.cloudfront.net/emoji/x.png",
        yellow_heart: "https://d3dma7a8zw52bz.cloudfront.net/emoji/yellow_heart.png",
        yen: "https://d3dma7a8zw52bz.cloudfront.net/emoji/yen.png",
        yum: "https://d3dma7a8zw52bz.cloudfront.net/emoji/yum.png",
        zap: "https://d3dma7a8zw52bz.cloudfront.net/emoji/zap.png",
        zero: "https://d3dma7a8zw52bz.cloudfront.net/emoji/zero.png",
        zzz: "https://d3dma7a8zw52bz.cloudfront.net/emoji/zzz.png"
    },
    emojify: function (e) {
        return e.replace(/:([a-z0-9\+\-_]+):/g, function (e, t) {
            return Emoji.names.indexOf(t) >= 0 ? '<img alt="' + t + '" height="20" src="' + Emoji.paths[t] + '" style="vertical-align:middle" width="20" />' : ":" + t + ":"
        })
    }
};
(function () {
    $("a[data-behavior~=reveal_event_subscribers]").live("click", function (e) {
        return $(this).next("span").toggle(), e.preventDefault()
    }), bcx.on("page:update", "remove redundant restore links", function () {
        var e;
        return e = $("[data-trashed-comment-id]"), e.each(function () {
            var e;
            e = $(this).parent().find("[data-trashed-comment-id~=" + $(this).data("trashed-comment-id") + "]");
            if (e.length > 1) return e.each(function (t) {
                if (t + 1 !== e.length) return $(this).find("[data-behavior~=restore_comment]").remove()
            })
        })
    })
}).call(this),
function () {}.call(this),
function () {
    bcx.on("page:change", "prepare feedback button", function () {
        var e, t;
        e = $("div.contact_support_button");
        if ($.browser.mobile) return;
        return t = "u=" + document.location.href, bcx.currentPerson != null && (t += "&e=" + bcx.currentPerson.get("email_address") + "&f=" + bcx.currentPerson.get("name") + "&c=" + bcx.currentPerson.get("has_classic_account")), e.find("a").attr("href", "http://basecamp.com/help?" + t), e.show()
    })
}.call(this),
function () {
    bcx.Busy = function () {
        function e(e) {
            this.form = $(e)
        }
        return e.prototype.start = function () {
            return this.form.addClass("busy")
        }, e.prototype.stop = function () {
            return this.form.removeClass("busy")
        }, e.prototype.end = function () {
            return this.stop().resetForm()
        }, e
    }(), $("form:not([data-skip_busy])").live("ajax:beforeSend", function (e) {
        return $(this).hasClass("busy") ? !1 : (new bcx.Busy(this)).start()
    }), $("form:not([data-skip_busy])").live("ajax:error", function (e) {
        return (new bcx.Busy(this)).stop(), alert("Sorry, something went wrong. Please try again.")
    }), $("form:not([data-skip_busy]):not([data-behavior~=no_reset])").live("ajax:success", function (e) {
        return (new bcx.Busy(this)).end()
    }), $(document).ready(function () {
        return $("article.edit a.cancel, li.edit_mode a.cancel, div.edit_links a, div.nubbin a").live("click", function () {
            return (new bcx.Busy($(this).parent())).start()
        })
    }), bcx.on("page:update", "stop form-busy animation", function () {
        return (new bcx.Busy($(".busy:not([data-skip_busy])"))).stop()
    })
}.call(this),
function () {
    var e;
    e = function () {
        return $("[data-behavior~=appear_on_resize]").show().addClass("showing"), $("[data-behavior~=busy_until_resize]").removeClass("busy"), $("[data-behavior~=resize_to_fit]").contents().find("a").bind("click", function (e) {
            return window.open(this.href), e.preventDefault()
        })
    }, bcx.on("page:beforechange", "hide iframe content until ready", function () {
        return $("[data-behavior~=appear_on_resize]").hide()
    }), bcx.on("page:change", "resize iframe to fit email", function () {
        var t = this;
        return setTimeout(function () {
            return $("[data-behavior~=busy_until_resize]").addClass("busy")
        }, 10), $("[data-behavior~=resize_to_fit]").iframeAutoHeight({
                debug: !1,
                minHeight: 100,
                callback: e
            })
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f, l;
    t = "677854858412", e = null, n = !1, r = {
        client_id: t,
        scope: ["https://www.googleapis.com/auth/drive"]
    }, this.googleClientLoaded = function () {
        var t;
        return t = _.extend(r, {
                immediate: !0
            }), gapi.auth.authorize(t, function (t) {
                n = !0;
                if (t != null ? t.access_token : void 0) e = t.access_token;
                return f()
            })
    }, this.loadPicker = function () {
        return o("loadPicker", function () {
            return google.load("picker", "1", {
                    callback: function () {
                        return i(u)
                    }
                })
        })
    }, s = function () {
        return e ? loadPicker() : a(function (t) {
            return (t != null ? t.access_token : void 0) ? (e = t.access_token, loadPicker()) : window.clickedPickerElement = null
        })
    }, l = function () {
        return e = null, gapi.auth.setToken(null), picker.setVisible(!1), s()
    }, u = function (e) {
        var t, n, r, i;
        switch (e.action) {
        case google.picker.Action.PICKED:
            i = e.docs;
            for (n = 0, r = i.length; n < r; n++) t = i[n], t.fileId = t.id;
            return window.clickedPickerElement.attachGoogleDocs(e.docs), window.clickedPickerElement = null;
        case google.picker.Action.CANCEL:
            return window.clickedPickerElement = null
        }
    }, a = function (e) {
        var t;
        return t = _.extend(r, {
                immediate: !1,
                approval_prompt: "force",
                authuser: -1
            }), gapi.auth.authorize(t, e)
    }, i = function (n) {
        var r;
        return r = (new google.picker.PickerBuilder).setAppId(t).setOAuthToken(e).addView(new google.picker.View(google.picker.ViewId.DOCS)).enableFeature(google.picker.Feature.NAV_HIDDEN).setCallback(n).build(), r.setVisible(!0), $("div.picker-dialog").prepend($("[data-behavior~=picker_account_switcher]").first())
    }, o = function (e, t) {
        var n;
        return $("#google-loader-script").length ? t() : (n = document.createElement("script"), n.id = "google-loader-script", n.src = "https://www.google.com/jsapi?callback=" + e, n.type = "text/javascript", document.getElementsByTagName("head")[0].appendChild(n))
    }, f = function () {
        return $("[data-role~=google_file_picker_container]").fadeIn("fast")
    }, $(document).on("click", "[data-behavior~=google_file_picker]", function (e) {
        return window.clickedPickerElement == null && (window.clickedPickerElement = $(this), s()), e.preventDefault()
    }), $(document).on("click", "[data-behavior~=google_account_switcher]", function (e) {
        return l(), e.preventDefault()
    }), $(document).on("click", "[data-behavior~=google_account_connector]", function (e) {
        return $("[data-behavior~=google_connector]").show(), e.preventDefault()
    }), $(document).on("click", "[data-behavior~=cancel_google_connect]", function (e) {
        return $("[data-behavior~=google_connector]").hide(), e.preventDefault()
    })
}.call(this),
function () {
    var e, t;
    e = function (e) {
        return e.resetForm().find(".invitees").trigger("reset")
    }, t = function (e, t) {
        return e.addClass("shake"), e.onTransitionEnd(function () {
            e.removeClass("shake");
            if (t) return t.focus()
        }), !1
    }, $("[data-behavior~=new_group]").live("click", function (e) {
        var t = this;
        return $.getJSON("/everyone.json", function (e) {
            return $("[data-behavior~=members]").data("people", e).data("view").reload()
        }), $("article.groups.new").expand(), $("article.groups.new").find("textarea").first().focus().get(0).select(), $("article.groups_blank_slate, div.groups_blank_slate_arrow").hide(), $("div.panel.people_index").removeClass("groups_blank_slate"), e.preventDefault()
    }), $("article.groups.new a[data-behavior=cancel]").live("click", function (t) {
        return e($("article.groups.new form")), $("section.groups > article.group").length === 0 && ($("article.groups_blank_slate, div.groups_blank_slate_arrow").show(), $("div.panel.people_index").addClass("groups_blank_slate")), t.preventDefault()
    }), $("article.membership [data-behavior~=remove]").live("ajax:before", function (e) {
        var t;
        return t = $(this).closest("article.membership"), t.addClass("removing")
    }).live("ajax:success", function (e) {
        var t;
        return t = $(this).closest("article.membership"), t.animate({
                opacity: 0
            }, 300, "linear", function () {
                return t.animate({
                        height: 0
                    }, Math.sqrt(t.height()) * 35, "easeOutQuad", function () {
                        return t.remove()
                    })
            })
    }), $("form[data-behavior~=save_group]").live("ajax:before", function (e) {
        var n, r, i, s, o;
        n = $(this), s = n.find("textarea"), i = n.find("div.invitee:not(.blank)"), r = n.find("div.invitee input[type=text]").first(), o = r.parents("div.person"), s.val().trim() === "" && t(s, s);
        if (i.length === 0) return t(o, r)
    }), $("[data-behavior~=rename_group]").live("expand", function (e) {
        return $(this).find(".submit").slideDown(100), $(this).find("textarea").focus().keydown().select()
    }).live("collapse", function () {
        return $(this).find(".submit").hide(), $(this).find("form").resetForm()
    }).find("[data-behavior~=editable_field_prompt]").live("mouseover", function () {
        return $(this).delay(300).animate({
                borderColor: "#b3b3b3"
            }, 100), $(this).animate({
                width: 370
            }, 100)
    }).live("mouseout", function () {
        return $(this).stop(!0, !0).css({
                width: "auto",
                borderColor: "transparent"
            })
    }), $("[data-behavior~=new_subgroup]").live("expand", function () {
        return $(this).find("textarea").focus().get(0).select()
    }).live("ajax:before", function (e) {
        var n, r, i, s, o;
        n = $(this), o = n.find("textarea"), i = n.find("input[type=checkbox]:checked"), s = $(e.target).attr("data-method"), r = n.find("section.invite h2");
        if (s !== "delete") {
            o.val().trim() === "" && t(o, o);
            if (i.length === 0) return t(r)
        }
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f, l, c, h;
    f = null, t = null, a = null, u = !1, o = "g", c = function () {
        return f = n("a[data-hotkey]"), t = n("input[data-hotkey]")
    }, bcx.on("page:update", "find hotkey elements", c), $(function () {
        return setTimeout(c, 100)
    }), $(window).bind("keypress", function (e) {
        if (e.altKey || e.ctrlKey || e.metaKey) return;
        return s(e)
    }), $(window).bind("keydown", function (e) {
        if (e.keyCode !== $.ui.keyCode.ESCAPE) return;
        if (e.isDefaultPrevented()) return;
        return i(e)
    }), h = function (e) {
        return e == null && (e = !1), u = e
    }, i = function (e) {
        var t, n, r, i, s, o;
        s = $(e.target).filter(":focus");
        if (s.is("input[data-hotkey]")) s.blur();
        else if ((n = (t = s.closest("article")).find("a[data-role~=cancel]")).length) {
            if (t.isDirty()) return !1;
            n.click()
        } else if ((i = s.closest("[data-behavior~=expandable]:not([data-behavior~=ignore_collapse_hotkey]).expanded")).length) {
            if (i.isDirty()) return !1;
            i.collapse()
        } else if ((i = $("[data-behavior~=expandable]:not([data-behavior~=ignore_collapse_hotkey]).expanded")).length) {
            if (i.isDirty()) return !1;
            i.collapse()
        } else(n = (r = $("[data-behavior~=new_project_dialog]:visible")).find("a[data-role~=cancel]")).length && n.click();
        return (o = s.get(0)) != null && o.blur(), !1
    }, s = function (n) {
        var i, s, a, c;
        if ($(n.target).closest("input, select, textarea, [contenteditable]").length) return;
        a = n.charCode, 26 >= a && a >= 1 && (a += 96), c = String.fromCharCode(a);
        if (!u && c !== o) return;
        c === o && !u && (h(!0), setTimeout(h, 2e3));
        if (i = t[c]) return l(i, r);
        if (s = f[c]) return l(s, e)
    }, n = function (e) {
        var t;
        return t = {}, $(e).each(function () {
            var e, n;
            return e = $(this), n = e.data("hotkey"), t[n] = e
        }), t
    }, l = function (t, n) {
        var r, i;
        return h(), i = t.data("hotkey"), r = t.dispatch("hotkey"), r.isDefaultPrevented() ? (a = null, !1) : ((a != null ? a.key : void 0) === i && (a != null ? a.action : void 0) === e ? (history.back(), a = null) : ($.scrollTo(t, {
                        offset: -60,
                        axis: "y",
                        duration: 100,
                        onAfter: n
                    }), a = {
                    key: i,
                    action: n
                }), !1)
    }, r = function (e) {
        var t;
        return t = e.get(0), t.focus(), t.select()
    }, e = function (e) {
        return e.effect("pulsate", {
                times: 3,
                duration: 150
            }), e.click()
    }
}.call(this),
function () {
    var e;
    e = function () {
        function r(r) {
            var i, s, o, u;
            i = $(r), s = new e(i), o = new t(i), u = new n(i)
        }
        var e, t, n;
        return t = function () {
            function e(e) {
                var t = this;
                this.$container = e, this.$container.find("input[type=text]").focus(function (e) {
                    return t.onFocus(e)
                }).keyup(function (e) {
                    return t.onKeyUp(e)
                }).keydown(function (e) {
                    return t.onKeyDown(e)
                }).bind("clickoutside", function (e) {
                    return t.onClickOutside(e)
                }), this.$container.bind("jumpto:cancel", function (e) {
                    return t.onCancel(e)
                }), this.$container.bind("jumpto:visit", function (e) {
                    return t.onVisit(e)
                }), navigator.userAgent.match(/MSIE/) && this.$container.find("[data-behavior~=placeholder]").placeholder()
            }
            return e.prototype.keyEventFor = function (e) {
                switch (e) {
                case $.ui.keyCode.TAB:
                    return "jumpto:down";
                case $.ui.keyCode.UP:
                    return "jumpto:up";
                case $.ui.keyCode.DOWN:
                    return "jumpto:down";
                case $.ui.keyCode.ENTER:
                    return "jumpto:pick";
                case $.ui.keyCode.ESCAPE:
                    return "jumpto:cancel";
                case $.ui.keyCode.HOME:
                    return "jumpto:first";
                case $.ui.keyCode.END:
                    return "jumpto:last";
                case $.ui.keyCode.PAGE_UP:
                    return "jumpto:first";
                case $.ui.keyCode.PAGE_DOWN:
                    return "jumpto:last";
                default:
                    return null
                }
            }, e.prototype.onFocus = function (e) {
                return $(e.currentTarget).trigger("jumpto:focus")
            }, e.prototype.onKeyUp = function (e) {
                var t;
                if (!this.keyEventFor(e.which)) return t = $(e.currentTarget), t.trigger("jumpto:update", $.trim(t.val()))
            }, e.prototype.onKeyDown = function (e) {
                var t;
                if (t = this.keyEventFor(e.which)) return $(e.currentTarget).trigger(t), e.preventDefault()
            }, e.prototype.onClickOutside = function (e) {
                return $(e.currentTarget).blur(), $(e.currentTarget).trigger("jumpto:blur")
            }, e.prototype.onCancel = function (e) {
                var t;
                t = this.$container.find("input[type=text]");
                if (t.val()) return t.val("")
            }, e.prototype.onVisit = function (e) {
                return this.$container.find("input[type=text]").blur().val(""), this.$container.trigger("jumpto:blur")
            }, e
        }(), n = function () {
            function e(e) {
                var t = this;
                this.$container = e, this.$container.bind("jumpto:results", function (e, n) {
                    return t.onResults(e, n)
                }).bind("jumpto:update", function (e, n) {
                    return t.onUpdate(e, n)
                }).bind("jumpto:cancel", function (e) {
                    return t.onCancel(e)
                }).bind("jumpto:focus", function (e) {
                    return t.onFocus(e)
                }).bind("jumpto:blur", function (e) {
                    return t.onBlur(e)
                }).bind("jumpto:pick", function (e) {
                    return t.onPick(e)
                }).bind("jumpto:up", function (e) {
                    return t.onUp(e)
                }).bind("jumpto:down", function (e) {
                    return t.onDown(e)
                }).bind("jumpto:first", function (e) {
                    return t.onFirst(e)
                }).bind("jumpto:last", function (e) {
                    return t.onLast(e)
                }), this.$container.find("[data-search-result]").live("hover", function (e) {
                    return t.onHover(e)
                })
            }
            return e.prototype.onResults = function (e, t) {
                var n, r, i;
                return i = t.query, r = t.content, n = this.$resultsPageFor(i), n.length ? n = n.replaceWith(r) : this.$container.find("dl:last").after(r), this.selectFirstResult(), this.$container.trigger("jumpto:focus")
            }, e.prototype.onUpdate = function (e, t) {
                var n;
                return t ? (n = this.$resultsPageFor(t), n.length ? this.$container.trigger("jumpto:focus") : this.$container.trigger("jumpto:query", t), this.selectFirstResult()) : this.$container.trigger("jumpto:cancel")
            }, e.prototype.onCancel = function (e) {
                return this.deselectAll(), this.$container.find("dl").hide()
            }, e.prototype.onFocus = function (e) {
                var t;
                this.$container.find("dl").hide(), this.deselectInactive(), t = this.$activeResults();
                if (t.length) return t.show(), this.$container.trigger("jumpto:activate")
            }, e.prototype.onBlur = function (e) {
                return this.$container.find("dl").hide()
            }, e.prototype.onPick = function (e) {
                var t;
                return this.$activeSelection().length ? this.visit(this.$activeSelection().find("a").attr("href")) : this.$activeResults().find("dd").length === 1 ? (this.select(this.$activeResults().find("dd")), $(e.currentTarget).trigger("jumpto:pick")) : this.$activeResults().length ? this.visit(this.$activeResults().find("a").attr("href")) : (t = this.$container.find("input[type=text]").val(), this.visit("/" + bcx.currentAccountSlug + "/search?q=" + encodeURIComponent(t)))
            }, e.prototype.onUp = function (e) {
                var t, n;
                return t = this.$activeSelection(), t.length ? (n = t.prev("dd"), n.length || (n = t.prev("dt").prev("dd")), n.length ? this.select(n) : $(e.currentTarget).trigger("jumpto:last")) : $(e.currentTarget).trigger("jumpto:last")
            }, e.prototype.onDown = function (e) {
                var t, n;
                return n = this.$activeSelection(), n.length ? (t = n.next("dd"), t.length || (t = n.next("dt").next("dd")), t.length || (t = n.next("dt")), t.length ? this.select(t) : $(e.currentTarget).trigger("jumpto:first")) : $(e.currentTarget).trigger("jumpto:first")
            }, e.prototype.onFirst = function (e) {
                return this.select(this.$activeResults().find("dd:first"))
            }, e.prototype.onLast = function (e) {
                return this.select(this.$activeResults().find("dt:last"))
            }, e.prototype.onHover = function (e) {
                return this.select($(e.target).closest("[data-search-result]"))
            }, e.prototype.$resultsPageFor = function (e) {
                return this.$container.find("dl[data-query=" + $.md5(e) + "]")
            }, e.prototype.activeQuery = function () {
                return $.md5($.trim(this.$container.find("input[type=text]").val()))
            }, e.prototype.$activeResults = function () {
                return this.$container.find("dl[data-query=" + this.activeQuery() + "]")
            }, e.prototype.$inactiveResults = function () {
                return this.$container.find("dl[data-query!=" + this.activeQuery() + "]")
            }, e.prototype.$activeSelection = function () {
                return this.$activeResults().find(".selected")
            }, e.prototype.deselect = function (e) {
                return e.removeClass("selected")
            }, e.prototype.deselectAll = function () {
                return this.deselect(this.$container.find("dl > *"))
            }, e.prototype.deselectInactive = function () {
                return this.deselect(this.$inactiveResults().find("dd"))
            }, e.prototype.selectFirstResult = function () {
                return this.select(this.$activeResults().find("[data-search-result]:first"))
            }, e.prototype.select = function (e) {
                if (e.length > 0) return this.deselectAll(), e.addClass("selected")
            }, e.prototype.visit = function (e) {
                return Stacker.workspace.visit(e, {
                        defaultStack: !0
                    }), this.$container.trigger("jumpto:visit")
            }, e
        }(), e = function () {
            function e(e) {
                var t = this;
                this.$container = e, $(document).bind("page:change", function () {
                    return t.$container.trigger("jumpto:cancel")
                }), this.$container.bind("jumpto:query", function (e, n) {
                    return t.onQuery(e, n)
                }).bind("jumpto:activate", function () {
                    return t.stopWaiting()
                }).bind("jumpto:cancel", function () {
                    return t.stopWaiting()
                }).bind("jumpto:visit", function () {
                    return t.stopWaiting()
                })
            }
            return e.blindWaitThreshold = 300, e.prototype.onQuery = function (e, t) {
                return this.startWaiting(), $.ajax("/jumpto", {
                        data: {
                            q: t,
                            t: +(new Date)
                        }
                    })
            }, e.prototype.startWaiting = function () {
                var e, t = this;
                return (e = this.waitTimeout) != null ? e : this.waitTimeout = setTimeout(function () {
                    return t.$container.addClass("waiting")
                }, this.constructor.blindWaitThreshold)
            }, e.prototype.stopWaiting = function () {
                return this.waitTimeout != null && (clearTimeout(this.waitTimeout), this.waitTimeout = null), this.$container.removeClass("waiting")
            }, e
        }(), r
    }.call(this), $(function () {
        return new e("[data-behavior~=jumpto]")
    })
}.call(this);
var Launchbar = {
    initialize: function (e) {
        this.addBodyClass(), this.rememberLocation(), this.installBehaviors(e)
    },
    addBodyClass: function () {
        $(document.body).addClass("with_launchbar")
    },
    rememberLocation: function () {
        try {
            var e = 3,
                t = new Date;
            t.setTime(t.getTime() + e * 36e5), document.cookie = "return_to=" + encodeURIComponent(window.location.href) + "; expires=" + t.toUTCString()
        } catch (n) {}
    },
    installBehaviors: function (e) {
        var t = $(e),
            n = ".menus > .menu";
        t.on("mouseenter", n, Launchbar.behaviors.mouseEnter).on("mouseleave", n, Launchbar.behaviors.mouseLeave), $.support.touch && t.on("touchstart", n, Launchbar.behaviors.touchStart)
    },
    openMenu: function (e) {
        var t = $(e).find(".items"),
            n = Launchbar.closeMenu(!1),
            r = function () {
                t.addClass("menu_active").show()
            };
        n ? r() : t.delay(500).queue(r)
    },
    closeMenu: function (e) {
        $("#launchbar .items").stop(!0, !0);
        var t = $("#launchbar .menu_active");
        if (t.length) return e === !1 ? t.hide().removeClass("menu_active") : t.delay(500).fadeOut(100).queue(function () {
            $(this).removeClass("menu_active")
        }), !0
    },
    behaviors: {
        mouseEnter: function () {
            Launchbar.openMenu(this)
        },
        mouseLeave: function () {
            Launchbar.closeMenu()
        },
        touchStart: function (e) {
            if ($(e.target).closest(".account").length) return;
            return Launchbar.openMenu(this), $(window).one("touchstart", function (e) {
                $(this).closest("#launchbar").length == 0 && Launchbar.closeMenu()
            }), !1
        }
    }
};
$(function () {
    var e = $("#launchbar");
    e.length && Launchbar.initialize(e)
}),
function () {
    $(function () {
        var e;
        if ($("#launchbar").length) return;
        return e = "<div id=launchbar class=fake><ul class=menus><li class=menu></li></ul><div style='clear: both'></div></div>", Launchbar.initialize($(e).hide().prependTo("body"))
    }), bcx.on("page:change", "set Launchbar links not to load in the current stack", function () {
        return $("div#launchbar").find("a").attr("data-stacker", !1)
    })
}.call(this),
function () {
    bcx.on("page:update", "install member field list behavior", function () {
        return $("form[data-behavior~=member] [data-behavior~=members]").install("behavior for member fields", function (e) {
            return e.each(function (e, t) {
                var n;
                return n = new bcx.views.MemberFieldList({
                        el: t
                    }), n.render(), n.focus(), $(t).data("view", n)
            })
        })
    })
}.call(this),
function () {
    $("article.message.edit").live("wysiwyg:focus", function (e) {
        return $(this).find("[data-behavior~=wysiwyg_toolbar]").slideDown("fast")
    }), $("div.sheet.message.new article textarea:not(.body)").live("keypress", function (e) {
        if (e.keyCode === $.ui.keyCode.ENTER) return $("textarea.body").focus(), e.preventDefault()
    }), $("[data-behavior~=check_all_subscribers]").live("click", function (e) {
        return $("[data-behavior~=subscriber_select_all]").trigger("click"), $(this).closest("[data-behavior~=expandable]").collapse()
    }), $("[data-behavior~=uncheck_all_subscribers]").live("click", function (e) {
        return $("[data-behavior~=subscriber_select_none]").trigger("click"), $(this).closest("[data-behavior~=expandable]").collapse()
    }), $("[data-behavior~=toggle_subscribers_list]").live("click", function (e) {
        return $("[data-role~=subscribers_list]").toggle(), e.preventDefault()
    }), $("[data-behavior~=expand_on_check]").live("click", function (e) {
        if ($(this).find(":checked").length) return $(this).closest("[data-behavior~=expandable]").expand()
    }), $("[data-behavior~=clear_selections_on_expand]").live("mousedown", function (e) {
        if (!$(this).closest("[data-behavior~=expandable]").find(".expanded_content:visible").length) return $("[data-behavior~=subscriber_select_none]").trigger("click")
    }), bcx.on("page:change", "trigger load subscribers", function () {
        if ($("article.message.new").length) return $("article.message.new").expand()
    }), bcx.on("page:change", "focus message title and enable placeholders in IE", function () {
        return setTimeout(function () {
            return $.browser.msie ? $("article.message.new textarea").first().focus().placeholder() : $("article.message.new textarea").first().focus()
        }, 1)
    })
}.call(this),
function () {
    $("div.current_user_links").find("a").live("click", function () {
        return $(this).closest("div.current_user_links").collapse()
    }), $("[data-behavior~=hover_global_nav]").live("hover", function (e) {
        return $(this).find("div.global_links").toggleClass("active")
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C;
    t = null, e = !1, bcx.on("page:update", "extract new project dialog", function () {
        var e;
        e = $("#workspace [data-behavior~=new_project_dialog]");
        if (e.length) return e.remove(), t = e.get(0), c(), e.detach()
    }), bcx.on("page:change", "hide new dialog", function () {
        if ($("#new_project_dialog").is(":visible")) return bcx.cancelNewProject()
    }), $(document).bind("workspace:beforeload", function () {
        if ($("#new_project_dialog").is(":visible")) return g()
    }), $("[data-behavior~=new_project]").live("click", function () {
        return o(), u(function () {
            return S(function () {
                return E(), r(), f(), p(), d(), N()
            })
        }), !1
    }), $("[data-behavior~=cancel_new_project]").live("click", function () {
        return bcx.cancelNewProject()
    }), bcx.cancelNewProject = function () {
        return i(), n(), b(), v(), d(), s(function () {
            return x(), T()
        }), !1
    }, $("form[data-behavior~=create_project]").live("submit", function () {
        return e = !0
    }).live("ajax:before", function (t) {
        var n;
        n = $(t.target).find("textarea:first");
        if (n.val().match(/^\s*$/)) return n.val(n.prop("placeholder")).focus().select(), e = !1, !1
    }).live("ajax:error", function () {
        return e = !1
    }).live("ajax:success", function () {
        return a(), i(), n(), b(), v(), w(function () {
            return C(), y(), h(), $(t).detach(), x(), e = !1
        })
    }), $("article.card [data-behavior~=create_draft_project]").live("click", function () {
        var t, n;
        if (!e) {
            t = $(this).parents("article.card").addClass("loading"), n = $("article.card:not(.loading)").addClass("inactive");
            if (t.filter("[data-behavior~=expandable]").length) return t.collapse()
        }
    }).live("ajax:before", function (t) {
        if (e) return !1
    }).live("ajax:error", function () {
        return e = !1
    }).live("create_draft:success", function () {
        var r;
        return r = $(this).parents("article.card"), r.filter("[data-behavior~=expandable]").length ? e = !1 : (i(), a(), n(), w(function () {
                    return C(), y(), h(), $(t).detach(), x(), e = !1
                }))
    }), $("[data-behavior~=create_draft_project]").live("click", function (t) {
        var n;
        t.preventDefault(), t.stopImmediatePropagation();
        if (!e) return e = !0, n = $(this), $.ajax({
                url: n.attr("href"),
                type: "POST",
                success: function (e) {
                    var t, r = this;
                    return t = new CopyProcessor(new bcx.CopyOperation(e)), t.on("processor:finished", function () {
                        return n.trigger("create_draft:success"), bcx.trigger("animate_draft:on")
                    }), t.startWatching()
                }
            })
    }), $(document).bind("workspace:load", function () {
        if (!e && $("div.project_index").length) return h(), $(t).detach(), y(), m()
    }), c = function () {
        return $(t).attr("id", "new_project_dialog").find("[data-behavior~=lazy_invitees]").attr("data-behavior", "invitees")
    }, f = function (e) {
        var n;
        return n = $(t).find("[data-behavior~=invitees]"), n.addClass("loading"), n.install("behavior for invitee fields", function (e) {
            return e.each(function () {
                var e;
                return e = new bcx.views.InviteeFieldList({
                        el: this
                    }), e.render(), $(this).data("view", e)
            })
        }), setTimeout(function () {
            return $.getJSON("/invitees.json", function (t) {
                var r;
                return n.data("people", t), n.removeClass("loading"), r = n.data("view"), r != null && r.reload(), typeof e == "function" ? e() : void 0
            })
        }, 10)
    }, o = function (e) {
        return $("body > header").transition({
                opacity: 0
            }, {
                duration: 200,
                timing: "ease-in",
                complete: e
            })
    }, u = function (e) {
        return $("#workspace > .container").transition({
                opacity: 0
            }, {
                duration: 200,
                timing: "ease-in"
            }), $("section.projects:first").transition({
                "padding-top": 100
            }, {
                duration: 300,
                timing: "ease-in",
                complete: e
            })
    }, x = function (e) {
        return $("body > header").transition({
                opacity: 1
            }, {
                duration: 200,
                timing: "ease-out",
                complete: e
            })
    }, m = function () {
        return $("body > header").css({
                opacity: 1
            })
    }, T = function (e) {
        return $("#workspace > .container").transition({
                opacity: 1
            }, {
                duration: 200,
                timing: "ease-out"
            }), $("section.projects:first").transition({
                "padding-top": 0
            }, {
                duration: 300,
                timing: "ease-out",
                complete: e
            })
    }, a = function () {
        return $("#workspace").css({
                visibility: "hidden"
            })
    }, C = function () {
        return $("#workspace").css({
                visibility: "visible"
            })
    }, y = function () {
        return $("#workspace > .container").css({
                opacity: 1
            }), g()
    }, g = function () {
        return $("section.projects:first").css({
                "padding-top": 0
            })
    }, S = function (e) {
        return $("body").append(t), h(), $("#new_project_dialog").show().css({
                padding: "200px 0"
            }).transition({
                padding: "0"
            }, {
                duration: 350,
                timing: "ease-out"
            }), $("#new_project_dialog > article.new").transition({
                width: 640,
                height: 300,
                opacity: 1
            }, {
                duration: 350,
                timing: "ease-out",
                complete: e
            })
    }, s = function (e) {
        return $("#new_project_dialog").transition({
                padding: "200px 0"
            }, {
                duration: 350,
                timing: "ease-in"
            }), $("#new_project_dialog > article.new").transition({
                width: 0,
                height: 0,
                opacity: 0
            }, {
                duration: 350,
                timing: "ease-in",
                complete: function () {
                    return h(), $(t).detach(), typeof e == "function" ? e() : void 0
                }
            })
    }, E = function () {
        return $("#new_project_dialog > article.new form").css({
                visibility: "visible"
            }), $("#new_project_dialog section.project_templates").css({
                opacity: 1
            })
    }, i = function () {
        return $("#new_project_dialog > article.new form").css({
                visibility: "hidden"
            }), $("#new_project_dialog section.project_templates").css({
                opacity: 0
            })
    }, r = function () {
        return $("#new_project_dialog > article.new").css({
                overflow: "hidden",
                height: "auto"
            })
    }, n = function () {
        return $("#new_project_dialog > article.new").css({
                overflow: "",
                height: l()
            })
    }, b = function () {
        return $("a[data-behavior~=slide].done_editing:visible").trigger("mousedown")
    }, v = function () {
        return $("#new_superpowers").html("")
    }, w = function (e) {
        return setTimeout(function () {
            return $("#new_project_dialog > article.new").transition({
                    width: 900,
                    height: 900,
                    margin: "90px auto"
                }, {
                    duration: 600,
                    timing: "ease-in-out",
                    complete: e
                })
        }, 200)
    }, h = function () {
        return !e && $(t).is(":visible") && i(), b(), v(), $(t).hide().find("form[data-behavior~=create_project]").resetForm().find(".invitees").trigger("reset"), $(t).find("> article.new").css({
                width: "",
                height: "",
                margin: ""
            }), $(t).find("p#new_superpowers_prompt").css({
                display: ""
            }), $(t).find("article.card").removeClass("inactive loading")
    }, p = function () {
        var e, t, n;
        return e = $("form[data-behavior~=create_project]"), e.find("textarea[name~='project[name]']").html("Name the project"), e.find("textarea[name~='project[description]']").html(""), e.find("input[name~=project_template_id]").val(""), t = (n = $("[data-behavior~=invitees]")) != null ? n.data("view") : void 0, t != null ? t.flushAndReplaceSelection([]) : void 0
    }, d = function () {
        return bcx.currentAccount.canCreateProjects() ? ($("[data-role~=limit_projects_reached]").hide(), $("[data-role~=account_upgrade_notice]").hide(), $("[data-role~=account_upgrade_wrapper]").show()) : ($("[data-role~=limit_projects_reached]").show(), $("[data-role~=account_upgrade_wrapper]").hide())
    }, N = function () {
        var e, t, n, r;
        e = $("#new_project_dialog > article.new"), n = e.find("form.project_template"), t = e.find("form.new_project");
        if (n.length) return t.hide(), n.show();
        (r = t.show().find("textarea").focus().get(0)) != null && r.select();
        if (!$("div.create_first_template_pitch").length) return e.find("div.project_gallery").show()
    }, l = function () {
        return $("#new_project_dialog > article.new").height()
    }, $("[data-behavior~=start_blank_project]").live("click", function (e) {
        var t, n, r;
        return t = $("#new_project_dialog > article.new"), r = t.find("form.project_template"), n = t.find("form.new_project"), e.preventDefault(), r.hide(), n.fadeIn("fast", function () {
            return $(this).find("textarea").focus().get(0).select()
        }), t.find("div.blank_project").show(), t.find("div.project_gallery").show(), $("[data-behavior~=slider]:visible").slider()
    })
}.call(this),
function (e) {
    var t = {
        EventEmitter: function () {}
    }, n = e.EventEmitter = t.EventEmitter,
        r = Array.isArray;
    n.prototype.emit = function (e) {
        if (e === "error")
            if (!this._events || !this._events.error || r(this._events.error) && !this._events.error.length) throw arguments[1] instanceof Error ? arguments[1] : new Error("Uncaught, unspecified 'error' event.");
        if (!this._events) return !1;
        var t = this._events[e];
        if (!t) return !1;
        if (typeof t == "function") {
            switch (arguments.length) {
            case 1:
                t.call(this);
                break;
            case 2:
                t.call(this, arguments[1]);
                break;
            case 3:
                t.call(this, arguments[1], arguments[2]);
                break;
            default:
                var n = Array.prototype.slice.call(arguments, 1);
                t.apply(this, n)
            }
            return !0
        }
        if (r(t)) {
            var n = Array.prototype.slice.call(arguments, 1),
                i = t.slice();
            for (var s = 0, o = i.length; s < o; s++) i[s].apply(this, n);
            return !0
        }
        return !1
    }, n.prototype.addListener = function (e, t) {
        if ("function" != typeof t) throw new Error("addListener only takes instances of Function");
        return this._events || (this._events = {}), this.emit("newListener", e, t), this._events[e] ? r(this._events[e]) ? this._events[e].push(t) : this._events[e] = [this._events[e], t] : this._events[e] = t, this
    }, n.prototype.on = n.prototype.addListener, n.prototype.once = function (e, t) {
        var n = this;
        n.on(e, function r() {
            n.removeListener(e, r), t.apply(this, arguments)
        })
    }, n.prototype.removeListener = function (e, t) {
        if ("function" != typeof t) throw new Error("removeListener only takes instances of Function");
        if (!this._events || !this._events[e]) return this;
        var n = this._events[e];
        if (r(n)) {
            var i = n.indexOf(t);
            if (i < 0) return this;
            n.splice(i, 1), n.length == 0 && delete this._events[e]
        } else this._events[e] === t && delete this._events[e];
        return this
    }, n.prototype.removeAllListeners = function (e) {
        return e && this._events && this._events[e] && (this._events[e] = null), this
    }, n.prototype.listeners = function (e) {
        return this._events || (this._events = {}), this._events[e] || (this._events[e] = []), r(this._events[e]) || (this._events[e] = [this._events[e]]), this._events[e]
    }
}(typeof exports == "undefined" ? window : exports),
function () {
    var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, m = {}.hasOwnProperty,
        g = function (e, t) {
            function r() {
                this.constructor = e
            }
            for (var n in t) m.call(t, n) && (e[n] = t[n]);
            return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
        };
    u = function () {
        function e() {
            this.process = v(this.process, this);
            var e = this;
            this.pendingAttachments = [], window.onbeforeunload = function () {
                if ($("[data-behavior~=pending_attachments] ul.pending_attachments li").length) return "Your uploaded files will not be saved if you close this window."
            }
        }
        return e.prototype.queue = function (e) {
            return this.pendingAttachments.push(e), e.on("end", this.process), e.on("error", this.process), setTimeout(this.process, 1)
        }, e.prototype.remove = function (e) {
            return this.pendingAttachments = _(this.pendingAttachments).without(e), e.stop()
        }, e.prototype.process = function () {
            var e, t;
            if (((e = this.processing) != null ? e.state : void 0) === "uploading") return;
            return this.processing = this.pendingAttachments.shift(), (t = this.processing) != null ? t.start() : void 0
        }, e
    }(), e = function (e) {
        function t(e) {
            this.file = e, this.initialize(), t.__super__.constructor.call(this)
        }
        return g(t, e), t.prototype.initialize = function () {
            return delete this.state, this.setupImageState()
        }, t.prototype.setupImageState = function () {
            var e, t;
            return this.isImage = /^image\/(?!x-|vnd|tiff?)/.test(this.file.type), this.extension = (e = this.file.name) != null ? (t = e.match(/\.([A-Za-z0-9]+?)$/)) != null ? t[1] : void 0 : void 0, this.iconPath = FileIcons.path(this.extension, "big")
        }, t.prototype.getImage = function (e) {
            if (!this.isImage) return;
            return this.loadImage(e)
        }, t.prototype.prepareThumbnail = function () {
            var e = this;
            return this.getImage(function (t) {
                return e.$item.prepend($(t).addClass("thumbnail")), e.$item.addClass("image")
            })
        }, t.prototype.loadImage = function (e) {}, t.prototype.remove = function () {
            return this.$item.remove()
        }, t.prototype.render = function () {
            var e = this;
            return this.$item = $(JST["templates/pending_attachment"](this)), this.prepareThumbnail(), this.$item.delegate("a[data-behavior~=remove]", "click", function (t) {
                return e.remove(), !1
            }), this.$item
        }, t
    }(EventEmitter), r = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return g(t, e), t.prototype.initialize = function () {
            return t.__super__.initialize.call(this), delete this.file.id, this.file.link = {
                url: this.file.url,
                source: this.file.linkSource,
                key: this.file.linkKey,
                size: 0
            }
        }, t.prototype.remove = function () {
            var e;
            return (e = this.$item.closest("form[data-behavior~=attachments_required]")).length && e.find("ul.pending_attachments > li[data-dirty]").length <= 1 && e.find("input[type=submit]").prop("disabled", !0), t.__super__.remove.call(this)
        }, t
    }(e), t = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return g(t, e), t.prototype.initialize = function () {
            return this.file.docType = this.file.type, this.file.type = this.file.mimeType, this.file.linkSource = "google", this.file.linkKey = this.file.id, this.setAuthkeyPermissions(), t.__super__.initialize.call(this)
        }, t.prototype.setupImageState = function () {
            var e;
            return this.isImage = !1, e = "" + this.file.linkSource + "_" + this.file.docType, this.iconPath = FileIcons.asset(e, "big")
        }, t.prototype.loadImage = function (e) {
            var t;
            return t = new Image, t.src = this.file.thumbnails[this.file.thumbnails.length - 1].url, e(t)
        }, t.prototype.setAuthkeyPermissions = function () {
            var e = this;
            return gapi.client.load("drive", "v2", function () {
                var t, n;
                return t = {
                    name: "Basecamp Attachment",
                    type: "anyone",
                    role: "writer",
                    withLink: !0
                }, n = gapi.client.request({
                        method: "POST",
                        path: "/drive/v2/files/" + e.file.fileId + "/permissions",
                        body: JSON.stringify(t)
                    }), n.execute(function (e) {
                        return null
                    })
            })
        }, t
    }(r), o = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return g(t, e), t.prototype.loadImage = function (e) {
            var t;
            return t = new Image, t.src = this.file.thumbnailURL, e(t)
        }, t.prototype.remove = function () {
            return this.$item.find("input[type=hidden][name*=_destroy]").val("1"), this.$item.hide()
        }, t
    }(e), i = function (e) {
        function t(e, n) {
            this.uploader = n, t.__super__.constructor.call(this, e), this.on("error", function () {
                return alert('There was a problem uploading the file "' + this.file.name + '".\nPlease try adding that file again.'), this.remove()
            })
        }
        return g(t, e), t.prototype.remove = function () {
            var e;
            return (e = this.$item.closest("form[data-behavior~=attachments_required]")).length && e.find("ul.pending_attachments > li[data-dirty]").length <= 1 && e.find("input[type=submit]").prop("disabled", !0), t.__super__.remove.call(this), this.uploader.remove(this)
        }, t.prototype.render = function () {
            var e;
            return t.__super__.render.call(this), e = this.$item.find("[data-behavior~=progress] > div"), this.on("progress", function (t) {
                return e.css({
                        width: "" + t + "%"
                    })
            }), this.on("end", function (e) {
                return this.$item.find("input[type=hidden][name*=token]").attr("value", e), this.$item.removeClass("uploading")
            }), this.$item.addClass("uploading")
        }, t
    }(e), n = function (e) {
        function n() {
            return this.onProgress = v(this.onProgress, this), this.onReadyStateChange = v(this.onReadyStateChange, this), n.__super__.constructor.apply(this, arguments)
        }
        var t;
        return g(n, e), n.prototype.initialize = function () {
            var e = this;
            return n.__super__.initialize.call(this), this.xhr = new XMLHttpRequest, this.xhr.open("POST", "/" + bcx.currentAccountSlug + "/attachments/stage", !0), this.xhr.setRequestHeader("Content-Type", "application/octet-stream"), this.isImage && !window.FileReader && this.xhr.setRequestHeader("X-Return-Content", !0), this.xhr.onreadystatechange = this.onReadyStateChange, this.xhr.upload.onprogress = this.onProgress, this.on("end", function () {
                if (!window.FileReader) return e.prepareThumbnail()
            })
        }, n.prototype.loadImage = function (e) {
            var t, n;
            if (window.FileReader) return n = new FileReader, n.onload = function (t) {
                var n;
                return n = new Image, n.src = t.target.result, e(n)
            }, n.readAsDataURL(this.file);
            if (this.file.content) return t = new Image, t.src = "data:" + this.file.type + ";base64," + this.file.content, e(t)
        }, n.prototype.start = function () {
            if (!this.state) return this.state = "uploading", this.xhr.send(this.file)
        }, n.prototype.stop = function () {
            if (this.state === "uploading") return this.xhr.abort()
        }, n.prototype.onReadyStateChange = function () {
            var e, n, r;
            if (this.xhr.readyState === 4) return this.xhr.status === 200 ? (e = t(this.xhr)) ? (this.token = e.token, (r = (n = this.file).content) == null && (n.content = e.content), this.state = "completed", this.emit("end", this.token)) : (this.state = "failed", this.emit("error", this.xhr)) : (this.state = "failed", this.emit("error", this.xhr))
        }, n.prototype.onProgress = function (e) {
            var t;
            return t = e.loaded / e.total * 100, this.emit("progress", t)
        }, t = function (e) {
            var t;
            try {
                return t = e.responseText, JSON.parse(t)
            } catch (n) {}
        }, n
    }(i), s = function (e) {
        function n(e, t) {
            var r;
            this.$input = $(e), r = {
                name: this.extractName(),
                type: "application/octet-stream"
            }, n.__super__.constructor.call(this, r, t)
        }
        var t;
        return g(n, e), t = 0, n.prototype.initialize = function () {
            var e = this;
            return n.__super__.initialize.call(this), this.id = "upload_frame_hack_" + (t += 1), this.$engine = $("<div style='width: 0px; height: 0px; visibility: hidden;'><iframe name='" + this.id + "' id='" + this.id + "'></iframe><form action='/" + bcx.currentAccountSlug + "/attachments/stage' method='post' enctype='multipart/form-data' target='" + this.id + "'></form></div>"), $(document.body).append(this.$engine), this.$target = this.$engine.find("iframe"), this.$form = this.$engine.find("form"), this.$form.append(this.$input), this.stop(), this.on("end", function (t) {
                e.setupImageState(), e.$item.find("input[type=hidden][name*=content_type]").attr("value", e.file.type);
                if (e.file.content != null) return e.prepareThumbnail()
            }), this.$target.load(function () {
                return e.extractResponse() ? (e.state = "completed", e.emit("end", e.token)) : (e.state = "failed", e.emit("error")), e.$engine.remove()
            })
        }, n.prototype.render = function () {
            return n.__super__.render.call(this), this.on("end", function (e) {
                return this.$item.removeClass("busy")
            }), this.$item.addClass("busy")
        }, n.prototype.loadImage = function (e) {
            var t;
            if (!this.file.content) return;
            return t = new Image, t.src = "data:" + this.file.type + ";base64," + this.file.content, e(t)
        }, n.prototype.start = function () {
            if (!this.state) {
                this.state = "uploading";
                try {
                    return this.$form.submit()
                } catch (e) {
                    return console.error(e), typeof console.trace == "function" && console.trace(), this.state = "failed", this.emit("error")
                }
            }
        }, n.prototype.stop = function () {
            var e, t;
            if (this.$target[0].stop != null) return this.$target[0].stop();
            if (e = this.$target[0].contentWindow) {
                if (e.stop != null) return e.stop();
                if (((t = e.document) != null ? t.execCommand : void 0) != null) return e.document.execCommand("Stop")
            }
        }, n.prototype.extractName = function () {
            var e;
            return (e = this.$input.val().match(/[^\/\\]+$/)) != null ? e[0] : void 0
        }, n.prototype.extractResponse = function () {
            var e, t;
            try {
                return e = this.$target[0].contentWindow.document.body.innerText, t = JSON.parse(e), this.token = t.token, this.file = {
                    name: t.name,
                    type: t.type,
                    content: t.content
                }
            } catch (n) {}
        }, n
    }(i), h = new u, f = "[data-behavior~=pending_attachments]", $.fn.attachFiles = function (e) {
        var t, r;
        t = $(this).closest("form"), r = t.find("" + f + " > ul");
        if (!r.length) return;
        return _.each(e, function (e) {
            var i;
            return i = new n(e, h), r.append(i.render()), a(t, i)
        })
    }, $.fn.attachSelf = function () {
        var e, t, n;
        e = $(this).closest("form"), t = e.find("" + f + " > ul");
        if (!t.length) return;
        return n = new s(this, h), t.append(n.render()), a(e, n)
    }, $.fn.attachGoogleDocs = function (e) {
        var n, r, i, s, o, u, a;
        n = $(this).closest("form"), r = n.find("" + f + " > ul");
        if (!r.length) return;
        a = [];
        for (o = 0, u = e.length; o < u; o++) s = e[o], i = new t(s), r.append(i.render()), a.push(n.find("input[type=submit]").prop("disabled", null));
        return a
    }, a = function (e, t) {
        var n, r;
        return h.queue(t), n = (r = e.data("queuedAttachmentCount")) != null ? r : 0, n === 0 && e.trigger("upload:start"), e.data("queuedAttachmentCount", n + 1), t.on("error", function () {
            return c(e)
        }), t.on("end", function () {
            return c(e)
        })
    }, c = function (e, t) {
        var n;
        return n = e.data("queuedAttachmentCount") - 1, n === 0 && e.trigger("upload:finish"), e.data("queuedAttachmentCount", n)
    }, p = !navigator.userAgent.match(/MSIE/), d = function (e) {
        return $(e).after("<input name='file' type='file' multiple onchange='$(document).trigger(\"ie:change\", this)'>"), p ? ($(e).attachFiles(e.files), $(e).remove()) : $(e).attachSelf()
    }, p || $(document).live("ie:change", function (e, t) {
        return d(t)
    }), $("" + f + " input[type=file]").live("change", function (e) {
        return d(e.target)
    }), $("form").live("attachments:link", function (e, t) {
        var n;
        n = $(e.target).find("" + f + " ul");
        try {
            return _.each(t, function (e) {
                var t;
                return t = new o(e), n.append(t.render())
            })
        } catch (r) {
            return console.error(r), typeof console.trace == "function" ? console.trace() : void 0
        }
    }), $("form").live("reset", function (e) {
        return $(this).find("" + f + " > ul").html("")
    }), bcx.on("page:update", "make pending attachments sortable", function () {
        return $("" + f + "[data-sortable~=true] > ul").sortable({
                axis: "y",
                tolerance: "pointer",
                cancel: "div.taggings"
            })
    }), $("form").live("upload:start", function (e) {
        var t;
        return t = $(this).find("input[type=submit]"), t.data("originalValue", t.val()).val("Uploading...").prop("disabled", "true")
    }), $("form").live("upload:finish", function (e) {
        var t;
        return t = $(this).find("input[type=submit]"), t.val(t.data("originalValue")).prop("disabled", null)
    }), l = 0, $("" + f + " > ul > li").live("tagging:add", function (e, t, n) {
        var r;
        return l += 1, r = $(JST["templates/pending_tagging"]({
                    tagName: t,
                    taggingId: l
                })), r.appendTo($(this).find("[data-behavior~=taggings] > ul")), e.preventDefault(), n.refresh()
    }).live("tagging:remove", function (e, t, n) {
        var r;
        return r = $(this).find("[data-url='" + t + "']"), r.fadeOutAndRemove({
                collapse: ["width", "height"]
            }), r.attr("data-deleted", !0), n.refresh()
    })
}.call(this),
function () {
    $("a[data-behavior~=add_to_all_projects]").live("click", function (e) {
        var t;
        return e.preventDefault(), t = $("[data-display~=invite_projects] :checkbox"), t.attr("checked", t.length !== t.filter(":checked").length)
    }), $("a[data-behavior~=add_to_all_calendars]").live("click", function (e) {
        var t;
        return e.preventDefault(), t = $("[data-display~=invite_calendars] :checkbox"), t.attr("checked", t.length !== t.filter(":checked").length)
    }), $("form[data-behavior~=email_preferences]").live("change", function () {
        return $(this).submit(), $(this).find(":input").attr("disabled", !0)
    }), $("form[data-behavior~=email_preferences]").live("ajax:before", function () {
        return $(this).find("[data-display~=status]").addClass("busy")
    }), $("form[data-behavior~=email_preferences]").live("ajax:success", function () {
        var e = this;
        return setTimeout(function () {
            return $(e).find("[data-display~=status]").removeClass("busy"), $(e).find(":input").attr("disabled", !1), $(e).closest("form").removeClass("busy")
        }, 300)
    }), $("form[data-behavior~=notification_email]").live("ajax:before", function () {
        var e, t, n, r;
        return (r = $(this).find(".message")) != null && r.remove(), e = $(this).find("input[type=text]"), n = e.val(), bcx.EmailAddressHelper.validEmailAddress(n) ? $(this).find("[data-display~=status]").addClass("busy") : (t = $("<span class='message error'>You need to enter a valid email address.</span>"), $(this).find("[data-display~=status]").after(t), e.focus().select(), !1)
    }), $("form[data-behavior~=notification_email]").live("ajax:success", function () {
        var e, t;
        return t = $(this).find("[data-display~=status]"), t.removeClass("busy"), e = $("<span class='message'>Saved!</span>"), t.after(e.delay(1e3).fadeOutAndRemove())
    }), bcx.on("page:change", "truncate event summaries on person permapage", function () {
        return $("div.sheet.person article.event span.summary").truncate({
                max_length: 60,
                more: "..."
            })
    }), $("header div.resend_invite [data-behavior~=select_on_focus]").live("click", function (e) {
        return $(this).select()
    }), $("a[data-behavior~=resend_invitation]").live("click", function (e) {
        var t, n, r, i, s, o = this;
        return e.preventDefault(), r = $(this), n = r.closest("header"), t = n.find("[data-role~=invite_display]"), i = n.find("[data-role~=invite_status]"), s = i.find("time"), t.data("deactivated_html", t.html()), t.html(t.attr("data-activated-text")), t.animate({
                opacity: 1
            }, 150, "linear"), r.one("ajax:success", function () {
                return setTimeout(function () {
                    return t.html(t.data("deactivated_html")), s.html("a moment ago"), s.highlight(), t.delay(1e3).animate({
                            opacity: 0
                        }, 300, "linear", function () {
                            return s.attr("datetime", new Date)
                        })
                }, 500)
            })
    }), $("[data-behavior~=projects_select_all]").live("click", function (e) {
        var t, n;
        return e.preventDefault(), n = $(this), n.addClass("busy"), t = $("[data-display~=projects_list] :checkbox"), t.attr("disabled", !0), $.ajax($(this).data("path"), {
                type: "POST",
                success: function (e) {
                    var r = this;
                    return t.attr("checked", t.length), t.removeAttr("disabled"), setTimeout(function () {
                        return n.removeClass("busy")
                    }, 300)
                }
            })
    }), $("[data-behavior~=projects_select_none]").live("click", function (e) {
        var t, n;
        return e.preventDefault(), n = $(this), n.addClass("busy"), t = $("[data-display~=projects_list] :checkbox"), t.attr("disabled", !0), $.ajax($(this).data("path"), {
                type: "POST",
                success: function (e) {
                    var r = this;
                    return t.removeAttr("checked", t.length), t.removeAttr("disabled"), setTimeout(function () {
                        return n.removeClass("busy")
                    }, 300)
                }
            })
    }), $("[data-behavior~=expand_project_selection]").live("click", function (e) {
        var t;
        if ($(this).find(":checked").length) return t = $("[data-display~=projects_list] :checkbox"), t.attr("checked", t.length), $(this).closest("[data-behavior~=expandable]").expand()
    }), $("[data-behavior~=collapse_project_selection]").live("click", function (e) {
        var t;
        t = $(this).find("input[type=radio]"), t.closest("label").addClass("busy"), $(this).closest("[data-behavior~=expandable]").collapse();
        if (t.closest(":checked").length) return $.ajax(t.data("path"), {
                type: "POST",
                success: function (e) {
                    var n = this;
                    return setTimeout(function () {
                        return t.closest("label").removeClass("busy")
                    }, 300)
                }
            })
    })
}.call(this),
function () {
    bcx.on("page:change", "disable checkbox for current person's permissions", function () {
        if (bcx.currentPerson != null) return $("[data-behavior~=change_permissions][data-person-id=" + bcx.currentPerson.id + "] :checkbox").prop("disabled", !0)
    }), $(":checkbox[data-behavior~=admin_permission]").live("change", function () {
        var e, t, n;
        return n = $(this).parents("[data-behavior~=set_permission_checkboxes]"), e = n.find(":checkbox[data-behavior~=can_create_projects_permission]"), t = e.siblings("input(:hidden)"), t.prop("disabled", !1), $(this).is(":checked") ? (e.prop("checked", !0), e.prop("disabled", !0)) : e.prop("disabled", !1)
    }), $("[data-behavior~=change_permissions] :checkbox").live("change", function () {
        return $(this).closest("form").submit()
    })
}.call(this),
function () {
    var e, t;
    bcx.on("page:update", "install behavior for plan autoloading", function () {
        return $("[data-subscription][data-subscription-path]").install("behavior for plan autoloading", function (e) {
            return $.get(e.data("subscription-path")).done(function () {
                if ($("[data-subscription] .expanded_content form").length) return;
                return e.find("input[type=text]:first").focus()
            })
        })
    }), bcx.on("page:change", "re-expand the previously selected plan", function () {
        var e;
        e = $("[data-subscription] .expanded_content form");
        if (!e.length) return;
        return e.expandable().expand(), $.scrollTo(e.closest("section").find(".alert"), function () {
            return e.find("input[type=text]:first").focus()
        })
    }), $("form[data-behavior~=change_plan] a[data-behavior~=submit]").live("click", function () {
        return $(this).closest("form").submit(), !1
    }), $("form[data-behavior~=change_plan]").on("ajax:before", function () {
        return $(this).addClass("busy")
    }), $("form[data-behavior~=cc-form]:not([data-behavior~=pay_by_check])").live("submit", function (e) {
        var t, n, r, i, s, o;
        r = $(this).find("input.cc-number"), i = $(this).find("input.cc-zip-code"), n = [], Queenbee.CreditCard.validateNumber(r.val()) || n.push(r), Queenbee.CreditCard.validateZipCode(i.val()) || n.push(i);
        if (n.length) {
            for (s = 0, o = n.length; s < o; s++) t = n[s], $(t).addClass("invalid");
            return e.preventDefault()
        }
        return $(this).addClass("busy").find(":submit").prop("disabled", !0), Queenbee.CreditCard.encryptForm(this)
    }), $("form[data-behavior~=pay_by_check]").live("submit", function (e) {
        var t;
        return $(this).find(":input").removeClass("invalid"), t = $(this).find(':input[data-required][value=""]'), t.length ? (t.addClass("invalid"), t[0].focus(), e.preventDefault()) : $(this).addClass("busy").find(":submit").prop("disabled", !0)
    }), $("a[data-behavior~=pay_by_check]").live("click", function (e) {
        var n;
        return e.preventDefault(), t(), n = $(this).closest("form"), n.addBehavior("pay_by_check"), n.find("[data-role=pay_by_check]").show().find(":input").prop("disabled", !1), n.find("[data-role=pay_by_cc]").hide().find(":input").prop("disabled", !0)
    }), $("a[data-behavior~=pay_by_cc]").live("click", function (e) {
        var n;
        return e.preventDefault(), t(), n = $(this).closest("form"), n.removeBehavior("pay_by_check"), n.find("[data-role=pay_by_check]").hide().find(":input").prop("disabled", !0), n.find("[data-role=pay_by_cc]").show().find(":input").prop("disabled", !1)
    }), t = function () {
        return $("[data-role=payment_options]").hide()
    }, e = function () {
        var e, t, n, r, i;
        (n = $("[data-plan]").data("plan")) && n !== "trial" ? (e = $("#plans div.option[data-plan-name=" + n + "]"), e.siblings(".selected").removeClass("selected"), e.hasClass("selected") || e.addClass("selected"), $("[data-plan]").data("plan", null)) : e = $("div.build_a_plan article#plans div.selected"), t = e.data("plan-daily-price"), $("[data-role=num_projects]").text(e.data("plan-projects") === "Infinity" ? "unlimited" : "up to " + e.data("plan-projects")), r = e.data("plan-storage-human"), $("[data-role=total_storage]").text(r), i = e.data("plan-name"), i === "yearly" ? $("[data-role~=confirmation]").hide() : $("[data-role~=confirmation]").show();
        if (!$("div.alert").length) return $("[data-role=daily_price]").text("$" + t), $("[data-role=monthly_price]").text("$" + 30 * t), $("[data-subscription=" + i + "] form[data-behavior=change_plan]").submit()
    }, $("div.build_a_plan div.option:not([data-behavior~=yearly_option])").live("click", function () {
        if (!$(this).hasClass("disqualified")) return $(this).siblings(".selected").removeClass("selected"), $(this).hasClass("selected") || $(this).addClass("selected"), e()
    }), $("div.build_a_plan div.option[data-behavior~=yearly_option]").live("click", function () {
        return $(this).find("a:first").click()
    }), bcx.on("page:change", "install behavior for new plan mix selection form", function () {
        if ($("div.build_a_plan").length) return e()
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    r = function () {
        var e;
        return (e = function () {
            try {
                return JSON.parse(window.localStorage.pluginDomains)
            } catch (e) {}
        }()) != null ? e : []
    }, s = function () {
        try {
            return window.localStorage.pluginDomains = JSON.stringify(n)
        } catch (e) {}
    }, i = function () {
        return window.location.reload()
    }, n = r(), t = function (e) {
        var t, n, r;
        return r = document.createElement("script"), r.setAttribute("type", "text/javascript"), r.setAttribute("src", "//" + e + "/assets/plugin.js"), n = document.createElement("link"), n.setAttribute("rel", "stylesheet"), n.setAttribute("href", "//" + e + "/assets/plugin.css"), t = document.getElementsByTagName("head")[0], t.appendChild(n), t.appendChild(r)
    }, bcx.plugins = {
        add: function (e) {
            if (a.call(n, e) < 0) return n.push(e), s(), t(e), !0
        },
        remove: function (e) {
            var t;
            t = n.indexOf(e);
            if (t !== -1) return n.splice(t, 1), s(), i()
        },
        clear: function () {
            return n = [], s(), i()
        }
    };
    for (o = 0, u = n.length; o < u; o++) e = n[o], t(e)
}.call(this),
function () {
    (new Image).src = "https://d3dma7a8zw52bz.cloudfront.net/assets/spinners/dots-white-e96879334a9337c2b06e2f7d4c5f7416.gif", (new Image).src = "https://d3dma7a8zw52bz.cloudfront.net/assets/spinners/dots-white@2x-8b57e7fcf5823f4e4340c1847f89738c.gif", (new Image).src = "https://d3dma7a8zw52bz.cloudfront.net/assets/icons/trash-fbf9dc0a42738ad91f3af06f0ba2c767.gif"
}.call(this),
function () {
    var e;
    bcx.watchCachingClassicProjects = function () {
        return setTimeout(function () {
            var e;
            if ((e = $("[data-behavior~=caching_classic_projects]")).length) return $.getJSON(e.url()).done(function (t) {
                if (e.is(":visible")) return t.caching_classic_projects ? bcx.watchCachingClassicProjects() : window.location.reload()
            })
        }, 5e3)
    }, e = function (e) {
        var t, n;
        if (!e.hasClass("import_in_progress")) return;
        return t = e.attr("data-import-url"), setTimeout(n = function () {
            return $.getJSON(t).done(function (t) {
                return t.finished_at ? (e.find("[data-status=finished] a").attr("href", "/" + bcx.currentAccountSlug + "/projects/" + t.project_id), e.removeClass("import_in_progress").addClass("import_finished")) : t.started_at == null ? e.removeClass("import_in_progress").addClass("import_error") : setTimeout(n, 5e3)
            })
        }, 5e3)
    }, bcx.ensureCurrentAccountCanImportProjects = function () {
        return bcx.currentAccount.canCreateProjects() ? ($("[data-behavior~=can-create-project-imports]").show(), $("[data-behavior~=cant-create-project-imports]").hide()) : ($("[data-behavior~=can-create-project-imports]").hide(), $("[data-behavior~=cant-create-project-imports]").show())
    }, $(document).on("click", "[data-behavior~=start_import]", function (t) {
        var n;
        return n = $(this).closest("article"), n.removeClass("import_available").addClass("import_in_progress").collapse(), $.ajax({
                type: "POST",
                url: n.attr("data-import-url")
            }).success(function (t) {
                return e(n), bcx.currentAccount.fetch({
                        success: bcx.ensureCurrentAccountCanImportProjects
                    })
            }).fail(function (e) {
                return n.removeClass("import_in_progress").addClass("import_error")
            }), t.preventDefault()
    }), $("div.project_imports article.project[data-behavior~=expandable]").on("expand", function (e) {
        return $(this).slideIntoView({
                duration: "slow"
            })
    }), $(document).on("page:update", function () {
        return bcx.ensureCurrentAccountCanImportProjects(), $("article.project.import_in_progress").install("watch import progress", function (t) {
            return e(t)
        })
    })
}.call(this),
function () {
    var e, t, n;
    e = !1, $("article.card [data-behavior~=show_template_actions]").live("click", function (e) {
        return $(this).parents("article.card").first().expand(), e.preventDefault()
    }), $("article.card [data-behavior~=confirm_delete]").live("click", function (e) {
        var t;
        return t = $(this).parents("article.card"), e.preventDefault(), e.stopImmediatePropagation(), n(t)
    }), $("article.card [data-behavior~=cancel_delete]").live("click", function (e) {
        return $(this).parents("article.card").first().collapse(), e.preventDefault()
    }), $("article.card[data-behavior~=expandable]").live("beforeexpand", function () {
        return $(this).find("div.actions").css({
                "margin-top": "30px",
                opacity: 0
            })
    }).live("expand", function () {
        return $(this).find("div.actions").transition({
                "margin-top": "0",
                opacity: 1
            }, {
                duration: 200,
                timing: "ease-in-out"
            })
    }).live("collapse", function () {
        var e;
        return e = $(this), t(e)
    }), n = function (e) {
        return e.find("div.actions > ul").hide(), e.find("div.actions > div").show().transition({
                opacity: 1
            })
    }, t = function (e) {
        return e.find("div.actions > ul").show(), e.find("div.actions > div").hide().css({
                opacity: 0
            })
    }
}.call(this),
function () {
    var e;
    e = "[data-behavior~=change_project_view]", $(e).live("click", function (t) {
        var n, r;
        return r = $(this), n = r.parents(".project_view"), !r.hasClass("on") && !n.hasClass("busy") && ($(e).removeClass("on"), n.addClass("busy"), $.cookie("project_view", null, {
                    path: "/"
                }), $.cookie("project_view", r.attr("class"), {
                    expires: 5e3,
                    path: "/" + bcx.currentAccountSlug
                }), $.get("/projects.js", function () {
                    return n.removeClass("busy")
                }), r.toggleClass("on")), t.preventDefault()
    })
}.call(this),
function () {
    bcx.on("page:update", "apply read-only behavior", function () {
        return $("div.sheet[data-behavior~=read_only] input[type='checkbox'], div.project[data-behavior~=read_only] article.document textarea").attr("disabled", !0), $("div.sheet[data-behavior~=read_only] div[data-behavior~=edit_project_header]").attr("data-behavior", "expandable"), $("div.sheet[data-behavior~=read_only] > header div.header_links a:first-child span.link").html("People on this project")
    })
}.call(this),
function () {
    bcx.on("page:update", "turn page single project", function () {
        if ($("body.single_project_account").length) return bcx.avatars.removeLinks(), $(".access[data-person-id] a.person_name").each(function () {
            return $(this).parent().html($(this).text())
        })
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a;
    r = "div.project[data-behavior~=read_only], div.sheet.global.todolists", e = "div.sheet:not(.inactive)", o = "[data-behavior~=sortable_container]", u = {
        defaults: {
            tolerance: "pointer",
            handle: "[data-behavior~=sortable_handle]",
            revert: 200,
            distance: 2
        },
        todo: {
            axis: "y",
            containment: e,
            connectWith: "" + o + "[data-sortable-type=todo]"
        },
        todolist: {
            axis: "y",
            containment: e,
            opacity: .8
        }
    }, i = function (e) {
        var t, n, r;
        return n = e.data("sortable-type"), t = $.extend({}, u.defaults, (r = u[n]) != null ? r : {}), e.sortable(t)
    }, document.addEventListener("mousedown", function (e) {
        var t, n;
        n = $(e.target).closest(o);
        if (!n.length) return;
        t = n.closest(o), t.closest(r).length || i(t);
        if (e.ctrlKey && e.button === 0) return e.preventDefault(), e.stopPropagation()
    }, !0), $("[data-behavior~=sortable_container]").live("sortstart", function (e, t) {
        var n, r, s, u;
        return s = e.currentTarget, n = $(s), u = n.data("sortable-type"), r = $("" + o + "[data-sortable-type='" + u + "']"), r.each(function () {
            if (this !== s) return i($(this))
        }), n.sortable("refresh")
    }), s = !1, a = function (e) {
        return setTimeout(function () {
            return s || e(), s = !1
        }, 1)
    }, $(o).live("sortreceive", function (e, t) {
        return s = !0, e.stopPropagation()
    }), $(o).live("sortupdate", function (e, t) {
        var r = this;
        return a(function () {
            var e, r, i, s, u;
            return i = $(t.item.context), e = i.closest(o), r = e.closest("[data-behavior~=sortable]"), u = e.data("sortable-type"), s = n(e, i), i.trigger("" + u + ":move", [s, r.get(0)])
        }), e.stopPropagation()
    }), n = function (e, t) {
        var n, r, i, s;
        return n = null, i = t.get(0), s = e.data("sortable-type"), r = "[data-behavior~=sortable][data-sortable-type='" + s + "']", e.find(r).each(function (e) {
            if (this === i) return n = e + 1
        }), n
    }, $(o).live("sortstart", function (e, n) {
        return t(n), e.stopPropagation()
    }), $(o).live("sortbeforestop", function (e, n) {
        return t(n), e.stopPropagation()
    }), t = function (e) {
        var t, n;
        t = e.originalPosition.top < 0, n = navigator.userAgent.indexOf("Firefox") >= 0;
        if (!t && !n) return;
        return e.item.data("margin-top-compensation") ? (e.item.css("margin-top", "-=" + e.item.data("margin-top-compensation")), e.item.data("margin-top-compensation", null)) : (e.item.data("margin-top-compensation", $(window).scrollTop()), e.item.css("margin-top", "+=" + e.item.data("margin-top-compensation")))
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/stage_switcher"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s;
                t.push('<ul class="menus">\n  <li class="menu">\n    <a class="application" href="#">'), t.push(r(this.stage)), t.push('<input type="hidden" data-hotkey="`"></a>\n    <div class="items">\n      <ul class="items">\n        '), s = this.stages;
                for (n = 0, i = s.length; n < i; n++) e = s[n], t.push('\n          <li class="item'), this.stage === e && t.push(r(" active")), t.push('">\n            <a href="#" data-stage="'), t.push(r(e)), t.push('">'), t.push(r(e)), t.push("</a>\n            "), this.stage === e && t.push("<span></span>"), t.push("\n          </li>\n        ");
                t.push('\n      </ul>\n    </div>\n  </li>\n</ul>\n<span><a class="cancel" data-behavior="cancel">&#215;</a></span>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    var e, t, n, r, i, s, o, u;
    if (t = $.cookie("stage")) o = $.trim(t.replace(/\.$/, ""));
    u = ["production", "rollout", "beta1", "beta2", "beta3", "beta4", "beta5"], e = $("<div class=stage_switcher>"), i = function () {
        return e.html(JST["templates/stage_switcher"]({
                    stage: o,
                    stages: u
                }))
    }, r = function () {
        return $.get("/" + bcx.currentAccountSlug + "/stage.txt", function (e) {
            return o = $.trim(e), i()
        })
    }, s = function () {
        return $.cookie("stage_switcher", "1"), e.addClass("active"), $("#launchbar.fake").show()
    }, n = function () {
        return $.cookie("stage_switcher", null), e.removeClass("active"), $("#launchbar.fake").hide()
    }, $(function () {
        $("#launchbar").prepend(e), i();
        if ($.cookie("stage") && $.cookie("stage_switcher")) return s(), r()
    }), $("#launchbar .stage_switcher:not(.active)").live("mousedown", function () {
        return r()
    }), $("#launchbar .stage_switcher:not(.active)").live("hotkey", function () {
        return s(), r(), !1
    }), $("#launchbar .stage_switcher:not(.active)").live("click", function (e) {
        if (e.shiftKey) return s(), !1
    }), $("#launchbar .stage_switcher [data-stage]").live("click", function (e) {
        return o = $(e.currentTarget).data("stage"), $.cookie("stage", "" + o + ".", {
                domain: "." + window.location.hostname,
                path: "/"
            }), i(), setTimeout(function () {
                return window.location.reload()
            }, 1), !1
    }), $("#launchbar .stage_switcher a").live("click", function (e) {
        return !1
    }), $("#launchbar .stage_switcher a[data-behavior~=cancel]").live("click", function (e) {
        return n(), !1
    })
}.call(this),
function () {
    var e, t;
    e = null, t = function (t) {
        var n, r, i, s, o, u, a, f;
        return n = $(this), s = n.data("project-id"), r = $("[data-behavior~=project_star][data-project-id=" + s + "]"), i = "/projects/" + s + "/stars", a = t.data, (f = bcx.currentProject) != null && f[a.action](), r.toggleClass("on", a.toggle), a.toggle ? r.removeBehavior("hover_content") : r.addBehavior("hover_content").trigger("mouseenter"), n.parent().hasClass("card") && r.trigger("mouseleave"), o = $.cookie("project_view") === "starred" && n.data("refresh-project-view") !== !1, u = $.cookie("project_view") === "list" && n.data("refresh-project-view") !== !1, $.ajax(i, {
                type: a.verb,
                data: {
                    refresh_project_cards: o,
                    refresh_project_list: u
                },
                success: function (t) {
                    var r, i, s, f;
                    if (o) {
                        if ((i = $("section.projects.cards")).length) {
                            r = n.closest("article"), r.preserveScrollOffset(function () {
                                return i.html(t)
                            });
                            if (a.toggle) return s = $(".starred_project_notification"), s.show().offset({
                                    top: r.offset().top - parseInt(s.height() / 2)
                                }), e != null && clearTimeout(e), e = setTimeout(function () {
                                    return s.fadeOut(), e = null
                                }, 4e3)
                        }
                    } else if (u && (f = $("div.stars_list")).length) return r = n.closest("article"), r.preserveScrollOffset(function () {
                        return f.html(t)
                    })
                }
            }), t.preventDefault()
    }, $(".on[data-behavior~=project_star]").live("click tap", {
            verb: "DELETE",
            action: "unstar",
            toggle: !1
        }, t), $("[data-behavior~=project_star]:not(.on)").live("click tap", {
            verb: "POST",
            action: "star",
            toggle: !0
        }, t), bcx.on("page:update", 'apply "on" class to current project star', function () {
            var e, t;
            if ((t = bcx.currentProject) != null ? t.starred : void 0)
                if ((e = $("div.sheet.project [data-behavior~=project_star]:not(.on)")).length > 0) return e.addClass("on")
        }), bcx.on("page:change", "request current project star state", function () {
            var e;
            if ((e = $("div.sheet.project [data-behavior~=project_star]")).length > 0) return $.ajax("/projects/" + e.attr("data-project-id") + "/stars", {
                    success: function (e) {
                        var t, n;
                        return e === "on" ? (t = bcx.currentProject) != null ? t.star() : void 0 : (n = bcx.currentProject) != null ? n.unstar() : void 0
                    }
                })
        })
}.call(this),
function () {
    $("article.message.new, article.upload.new, article.calendar_event.new").live("expand", function (e) {
        var t;
        if (e.target !== this) return;
        t = $(this).find("[data-behavior~=lazy_load_subscribers]");
        if (t.html() === "") return $.ajax(t.url(), {
                success: function (e) {
                    return t.html(e)
                }
            })
    }), $("div.ad-hoc.subscribers").live("expand", function (e) {
        return $(this).find("[data-role~=human_input]:first").focus()
    }), bcx.installAdhocSubscribers = function () {
        return $(".subscribers[data-behavior~=expandable] [data-behavior~=adhoc_subscribers]").install("behavior for ad-hoc subscriber fields", function (e) {
            return $.getJSON("/everyone.json", function (t) {
                var n;
                return e.data("people", t), n = new bcx.views.AdhocSubscriberList({
                        el: e.get(0)
                    }), n.render(), n.focus()
            })
        })
    }, bcx.installAdhocSubscriberValidation = function () {
        var e, t;
        return e = $("[data-behavior~=adhoc_subscribers]").parents("form"), t = e.attr("data-behavior") || "", e.attr("data-behavior", "adhoc_subscriber_validation " + t)
    }, $("article.comment.new, .subscribers[data-behavior~=expandable]").live("expand", function () {
        return bcx.installAdhocSubscribers(), bcx.installAdhocSubscriberValidation()
    }), bcx.on("page:update", "install subscriber list behavior", function () {
        return $("[data-behavior~=subscriber_list]").install("behavior for subscriber fields", function (e) {
            var t;
            return t = new bcx.views.SubscriberList({
                    el: e.get(0)
                }), t.render()
        })
    })
}.call(this),
function () {
    $("a[data-behavior~=resubscribe]").live("click", function () {
        return event.preventDefault(), $(this).parent().addClass("busy"), $.post($(this).url())
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o;
    (function () {
        var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T;
        return t = null, e = null, o = null, s = null, r = null, g = null, m = null, n = null, a =
            null, u = function () {
            return t = $("[data-behavior~=format_timeline]"), a ? n = t.filter("[data-event-id='" + a + "']") : n = null
        }, i = function (t, n) {
            return e = t, o = CalendarDate.parse(e.data("datetime")), s = e.data("bucket-identifier"), typeof n == "function" && n(), r = e, g = o, m = s
        }, w = function () {
            return r = null, g = null, m = null
        }, d = function (e, t) {
            var n, r, s, o;
            o = [];
            for (r = 0, s = e.length; r < s; r++) n = e[r], o.push(i($(n), t));
            return o
        }, l = function (e) {
            return w(), d(t, e)
        }, c = function (e) {
            var r, s;
            if (!n) return;
            s = t.index(n);
            if (s !== -1) return r = $(t.slice(0, s).toArray().reverse()), i(n), d(r, e)
        }, y = function () {
            return t.parent().find(".day").remove()
        }, h = function () {
            return t.parent().find(".project").hide()
        }, b = function () {
            if ((r != null ? r.data("event-id") : void 0) === e.data("event-id")) return e.remove()
        }, p = function () {
            if (o.isnt(g)) return e.parent().prepend(JST["templates/timeline_day_bubble"]({
                        date: o
                    }))
        }, S = function () {
            if (s !== m || o.isnt(g)) return e.prev("div.project").show()
        }, E = function () {
            return e.parent().show()
        }, f = function (e) {
            return e === "left" ? "right" : "left"
        }, T = function () {
            var t, n;
            if (e.data("side") == null) {
                t = (n = r != null ? r.data("side") : void 0) != null ? n : "right";
                if (s !== m || o.isnt(g)) t = f(t);
                return e.attr("data-side", t), e.parent().find(".chiral").removeClass("left right").addClass(t)
            }
        }, x = function () {
            return t.scaleImages()
        }, v = function (e) {
            return $(window).scrollTop() < 50 || !n ? e() : n.preserveScrollOffset(e)
        }, bcx.on("page:update", "format timeline", function () {
            if ($("[data-behavior~=timeline]").length) {
                u();
                if (!t.filter(":not([data-side])").length) return;
                return v(function () {
                    return y(), h(), l(function () {
                        return b(), p(), S(), E()
                    }), c(function () {
                        return T()
                    }), l(function () {
                        return T()
                    }), x()
                }), a = t.first().data("event-id")
            }
        })
    })(), s = 0, i = !1, $(window).focus(function () {
        if ($("[data-behavior~=timeline]").length) return document.title = "Daily Progress", s = 0, i = !1
    }), $(window).blur(function () {
        return i = !0
    }), bcx.on("page:update", "show count in title when timeline changes", function () {
        var t;
        if ($("[data-behavior~=timeline]").length) {
            t = (new Date).getTime(), $("section.global_activity section.stream").find("article.event").each(function (n) {
                var r, o, u;
                u = Date.parse($(this).find("time").attr("datetime")), o = t < u + e() + 1e3, r = parseInt($(this).find("span.creator").attr("data-creator-id"));
                if (o && r !== bcx.currentPerson.id) {
                    $(this).pulsate();
                    if (i) return s += 1
                }
            });
            if (i && s > 0) return document.title = "(" + s + ") Daily Progress"
        }
    }), o = null, e = function () {
        return bcx.progress.period = 1e3 * Math.min(30, 5 + 4 * Math.log(bcx.progress.idleCount + 1))
    }, t = function () {
        var n;
        return n = $("section.stream").find("article.event"), n.length && $.get("/progress.js", {
                after: n.data("event-id"),
                since: n.data("datetime")
            }), o = setTimeout(t, e())
    }, n = function () {
        if (o == null) return bcx.progress = {
            idleCount: 0
        }, t()
    }, r = function () {
        if (o != null) return clearTimeout(o), o = null
    }, bcx.on("page:change", "poll for timeline changes", function () {
        return $("[data-behavior~=timeline]").length ? n() : r()
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f;
    t = "select[data-behavior=todos_date_filter]", e = "select[data-behavior=todos_assignee_filter]", u = "li.todo:not([data-behavior~=complete])", r = $.support.touch && $.browser.mobile ? "touchstart" : "focus", $(e).live("" + r + " update", function (e, t) {
        var r, i, o, u = this;
        return i = $(this).val(), $(this).find("option[value!=]").remove(), o = n.settings().dueDate, o && (r = f(o)), _.each($(this).data("options"), function (e) {
            var t;
            t = s(e.value, r);
            if (t.length !== 0) return $(u).append('<option value="' + e.value + '">' + e.option + " (" + t.length + ")</option>")
        }), $(this).val(t || i)
    }), window.bcx.todosDateFilterAction = function (e, t) {
        var r, i, s, u = this;
        return s = e.val(), e.find("option[value!=]").remove(), i = n.settings().assigneeCode, i && (r = a(i)), _.each(e.data("options"), function (t) {
            var n;
            n = o(t.value, r);
            if (n.length !== 0) return e.append('<option value="' + t.value + '">' + t.option + " (" + n.length + ")</option>")
        }), e.val(t || s)
    }, $(t).live("" + r + " update", function (e, t) {
        return window.bcx.todosDateFilterAction($(this), t)
    }), $("" + e + ", " + t).live("change", function () {
        return $(document).trigger("todofilter:settingschange")
    }), $("a[data-behavior~=show_all_todos]").live("click", function (e) {
        return n.reset(), e.preventDefault()
    }), i = function () {
        var e;
        return "" + (((e = bcx.currentProject) != null ? e.id : void 0) || window.location.pathname) + ":todoFilters"
    }, $(document).bind("todofilter:change todofilter:reset", function () {
        return bcx.storage.set(i(), n.settings())
    }), bcx.on("page:change", "load todo filter settings from storage", function () {
        n.updateFromStorage();
        if (!n.noneSet()) return $(document).trigger("todofilter:settingschange")
    }), $(document).bind("todofilter:settingschange todolists:loadmore todos:update", function () {
        if ($(e).length || $(t).length) return n.apply(), n.updateFromStorage()
    }), n = {
        settings: function () {
            return {
                assigneeCode: $(e).val(),
                dueDate: $(t).val()
            }
        },
        noneSet: function () {
            return _.compact(_.values(n.settings())).length === 0
        },
        reset: function () {
            return $("section.todos").removeClass("filtered"), $("ul.todolists > li").show(), $(u).show(), $(t).val(""), $(e).val(""), $(document).trigger("todofilter:reset")
        },
        updateFromStorage: function () {
            var n;
            if ($("" + e + ", " + t).length)
                if (n = bcx.storage.get(i())) {
                    n.assigneeCode && $(e).trigger("update", n.assigneeCode);
                    if (n.dueDate) return $(t).trigger("update", n.dueDate)
                }
        },
        apply: function () {
            var e, t, r, i, s;
            return i = n.settings().assigneeCode, s = n.settings().dueDate, n.noneSet() ? n.reset() : (n.displayHeader(), $("section.todos").addClass("filtered"), $("ul.todolists > li").show(), r = $(u).hide(), i && (e = a(i)), s && (t = f(s)), e && t ? $(_.intersect(e, t)).show() : e ? e.show() : t && t.show(), $("ul.todolists > li").each(function () {
                        if (!$(this).find("ul.todos li.todo:visible").length && !$(this).find("article.todolist").hasClass("new")) return $(this).hide()
                    }), $(document).trigger("todofilter:change"))
        },
        displayHeader: function () {
            var r, i, s, o, u;
            r = $("[data-behavior~=todo_filter_header]"), r.find("span").hide();
            if (i = n.settings().assigneeCode) s = _.detect($(e).data("options"), function (e) {
                return e.value.toString() === i
            }).option;
            if (u = u = n.settings().dueDate) o = _.detect($(t).data("options"), function (e) {
                return e.value === u
            }).option;
            if (s && o) return r.find("[data-behavior=assigned_to]").show().find("[data-behavior=value]").html(s).show(), r.find("[data-behavior=filter_and]").show(), r.find("[data-behavior=filter_due]").show().find("[data-behavior=value]").html(o.toLowerCase()).show();
            if (s) return r.find("[data-behavior=assigned_to]").show().find("[data-behavior=value]").html(s).show();
            if (o) return r.find("[data-behavior=filter_due]").show().find("[data-behavior=value]").html(o.toLowerCase()).show()
        }
    }, a = function (e) {
        return e === "unassigned" ? $("" + u + ":not([data-assignee-code])") : $("" + u + ":[data-assignee-code=" + e + "]")
    }, f = function (e) {
        return e === "never" ? $("" + u + ":not([data-due-datetime])") : $("" + u + ":[data-due-datetime]").filter(function () {
            var t;
            t = CalendarDate.parse($(this).data("due-datetime"));
            switch (e) {
            case "today":
                return t.equals(CalendarDate.today());
            case "tomorrow":
                return t.equals(CalendarDate.today().next());
            case "week":
                return CalendarDate.today().fallsOnSameWeekAs(t);
            case "nextweek":
                return CalendarDate.today().next(7).fallsOnSameWeekAs(t);
            case "later":
                return t.compareTo(CalendarDate.today().beginningOfWeek().next(14)) === 1;
            case "past":
                return t.compareTo(CalendarDate.today()) === -1
            }
        })
    }, s = function (e, t) {
        var n;
        return n = a(e), t ? _.intersect(n, t) : n
    }, o = function (e, t) {
        var n;
        return n = f(e), t ? _.intersect(t, n) : n
    }
}.call(this),
function () {
    var e, t, n = this;
    t = function (e) {
        var t, n;
        return t = e.data("collection-name"), ((n = bcx.currentProject) != null ? n.get("" + t + "_count") : void 0) === 0
    }, e = !1, $("div.sheet.global.todolists [data-behavior~=sortable_handle]").live("mousedown", function (t) {
        return e = !0
    }).live("mouseup", function (t) {
        return e = !1
    }).live("mousemove", function (t) {
        if (e) return e = !1, alert("You cannot reorder on this view")
    }), $("[data-behavior~=new_todolist]").live("click", function (e) {
        return $("article.todolist.new").expand(), e.preventDefault()
    }), $("article.todolist [data-behavior=edit]").live("click", function (e) {
        return $(this).closest("article.todolist").expand(), e.preventDefault()
    }), $("div.sheet.todolist aside [data-behavior=edit]").live("click", function (e) {
        return $(this).closest("div.sheet").find("article.todolist").expand(), e.preventDefault()
    }), $("section.todos article.todolist[data-behavior~=expandable]").live("expand", function (e) {
        var t;
        if (e.target !== this) return;
        return t = $(this), $("div.sheet.todolists").removeClass("blank_slate"), setTimeout(function () {
            return t.find("input[type=text]").first().focus().get(0).select(), t.find("textarea").keydown()
        }, 10)
    }).live("collapse", function (e) {
        var n, r;
        if (e.target !== this) return;
        return n = $(this), n.find("form").resetForm(), r = $(this).closest("section"), t(r) && $("div.sheet.todolists").addClass("blank_slate"), n.closest("article.todolist").find("div.nubbin").removeClass("busy")
    }), $("form.edit_todolist, form.new_todolist").live("ajax:before", function () {
        var e, t;
        e = $(this);
        if ((t = e.find(':input[name="todolist[name]"]')).length && !$.trim(t.val())) return e.removeClass("submitting"), t.get(0).focus(), !1
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u;
    $(document).bind("todo:move", function (e, t, n) {
        var r, i;
        return r = $(n).find("> article.todolist"), r.find("ul.empty").removeClass("empty"), i = {
            context: "move",
            todo: {
                position: t
            }
        }, r.length && (i.todo.todolist_id = r.id()), $.ajax({
                url: $(e.target).url(),
                type: "PUT",
                data: i
            })
    }), $(document).bind("todolist:move", function (e, t) {
        var n;
        return n = $(e.target).find("> article.todolist"), $.ajax({
                url: n.url(),
                type: "PUT",
                data: {
                    context: "move",
                    todolist: {
                        position: t
                    }
                }
            })
    }), $("article.todolist li [data-behavior~=toggle], :checkbox[data-behavior~=toggle_todo]").live("click", function () {
        return $.ajax({
                url: $(this).url(),
                type: "POST"
            })
    }), $("article.todolist ul.new").live("expand", function (e) {
        var t;
        if (e.target !== this) return;
        return t = $(this), t.find("textarea").first().focus(), setTimeout(function () {
            return t.find(".busy").removeClass("busy")
        }, 10)
    }), $(document).bind("keydown.todo_content", function (e) {
        var t;
        if ($(e.target).parents("li.edit_mode").length === 0 || $(e.target).parents("span.pill").length > 0) return;
        t = $(e.target).closest("form");
        switch (e.which) {
        case $.ui.keyCode.ESCAPE:
            return t.find("a[data-behavior=cancel]").click();
        case $.ui.keyCode.TAB:
            return setTimeout(function () {
                return t.find("span[data-behavior~=expandable]").expand()
            }, 10)
        }
    }), $("span[data-behavior~=expandable]:has([data-behavior~=relative_date_picker])").live("beforeexpand", function () {
        var e, t, n;
        return e = $(this).find("[data-behavior~=relative_date_picker]"), t = e.closest("form"), n = new bcx.views.RelativeDatePicker({
                el: e,
                due_week: t.find('input[name~="todo[due_week]"]').val(),
                due_wday: t.find('input[name~="todo[due_wday]"]').val(),
                onDatePick: function (n, r) {
                    var i;
                    return i = e.closest("span.pill"), t.find('input[name~="todo[due_week]"]').val(n), t.find('input[name~="todo[due_wday]"]').val(r), t.hasBehavior("new_todo") ? (i.find("time").text("Week " + (n + 1) + " " + CalendarDate.weekdayNames[r]), t.find("textarea").last().focus()) : (i.addClass("busy"), t.submit()), i.collapse()
                }
            }), n.render()
    }), $("span[data-behavior~=expandable]:has([data-behavior~=date_picker])").live("beforeexpand", function () {
        var e, t, n;
        return t = $(this).find("[data-behavior~=date_picker]"), e = t.prev("[data-behavior~=alt_date_field]"), n = e.val(), t.closest("form").hasBehavior("new_todo") && $(this).closest("span.pill").removeClass("blank"), t.datepicker({
                altField: e,
                dateFormat: "yy-mm-dd",
                altFormat: "yy-mm-dd",
                firstDay: CalendarDate.firstDayOfWeek,
                onSelect: function () {
                    var e, n, r;
                    return e = t.closest("form"), n = $(this).closest("span.pill"), e.hasBehavior("new_todo") ? (r = t.datepicker("getDate"), n.find("time").text(CalendarDate.parse(r).abbreviatedShortWithWeekday()), e.find("textarea").last().focus()) : (n.addClass("busy"), e.submit()), n.collapse()
                }
            }), n ? t.datepicker("setDate", n) : (t.datepicker("setDate", null), t.find(".ui-state-active").removeClass("ui-state-active"))
    }), $(".ui-datepicker-next, .ui-datepicker-prev").live("click", function (e) {
        return e.stopImmediatePropagation()
    }), $("footer a[data-behavior~=no_due_date]").live("click", function (e) {
        var t, n, r;
        return e.preventDefault(), n = $(this).closest("form"), n.find("[data-behavior~=alt_date_field]").val(""), r = n.find("span.pill"), n.hasBehavior("new_todo") ? (t = r.find("time"), t.text(t.data("blank-text")), n.find("textarea").last().focus()) : (r.addClass("busy"), n.submit()), r.collapse()
    }), e = function () {
        function e(e) {
            this.selects = $(e)
        }
        return e.prototype.watch = function (e) {
            return this.selects.live("keydown", function (t) {
                var n;
                return n = $(this), t.keyCode === $.ui.keyCode.ENTER ? e.call(this, n) : n.data("assignee-changing", !0)
            }), this.selects.live("change", function () {
                var t;
                t = $(this), t.data("assignee-changed", !0);
                if (!t.data("assignee-changing")) return e.call(this, t)
            }), this.selects.live("mouseover blur", function () {
                return $(this).data("assignee-changing", !1)
            }), this.selects.live("blur", function () {
                var t;
                t = $(this);
                if (t.data("assignee-changed")) return e.call(this, t)
            })
        }, e
    }(), n = new e("article.todolist li.edit_mode select"), n.watch(function (e) {
        var t, n, i;
        return n = e.closest("span.pill"), t = n.find("[data-behavior~=assignee_name]"), t.width(t.width()), e.parents("form").find("textarea").last().focus(), (i = e.val()) ? (e.data("assignee-code", i), n.removeClass("blank"), t.text(e.find(":selected").text()), r(e), s(e)) : (e.data("assignee-code", ""), n.addClass("blank"), t.text(t.data("blank-text"))), e.data("assignee-changing", !1)
    }), i = new e("article.todolist li:not(.edit_mode) select, form[data-behavior~=edit_calendar_todo] select"), i.watch(function (e) {
        return t(e) ? o(e) : u(e)
    }), $("article.todolist li:not(.edit_mode) [data-behavior~=confirm_assignee_change]").live("click", function () {
        return u($(this)), !1
    }), $("article.todolist li:not(.edit_mode) [data-behavior~=cancel_assignee_change]").live("click", function () {
        var e, t;
        return e = $(this).parents("form"), t = e.find("select"), t.val(e.data("original-assignee-code")), e.trigger("reset"), t.focus(), r(t), s(t), !1
    }), t = function (e) {
        return (!bcx.currentBucket || bcx.currentBucket.isActive() && !bcx.currentBucket.justPublished) && e.find(":selected").data("assignee-wants-notifications") === !1
    }, o = function (e) {
        var t;
        return t = e.parents("form"), t.find("[data-display~=no-email-confirmation-on]").show(), t.find("[data-display~=no-email-confirmation-off]").hide(), e.parents("form").find(".exclusively_expanded").trigger("expand")
    }, r = function (e) {
        return e.parents("form").find("[data-display~=no-email-confirmation-on]").hide(), e.parents("form").find("[data-display~=no-email-confirmation-off]").show()
    }, s = function (e) {
        var n;
        return n = e.parents("form"), t(e) ? (n.find("[data-display~=no-email-warning-on]").show(), n.find("[data-display~=no-email-warning-off]").hide()) : (n.find("[data-display~=no-email-warning-on]").hide(), n.find("[data-display~=no-email-warning-off]").show())
    }, u = function (e) {
        var t;
        return t = e.closest("span.pill"), t.collapse().addClass("busy"), t.closest("form").submit(), e.data("assignee-changing", !1), e.data("original-assignee-code", e.val())
    }, $("article.todolist ul.new form").live("reset", function () {
        var e, t, n;
        return n = $(this), n.find("span.pill").addClass("blank"), e = n.find("[data-behavior~=assignee_name]"), e.text(e.data("blank-text")), s(e), t = n.find("[data-behavior~=due_date]"), t.text(t.data("blank-text")), n.find("[data-behavior~=alt_date_field]").val(""), n.find("span.pill[data-behavior~=expandable]:has(.balloon)").collapse(), setTimeout(function () {
            return n.find("textarea").last().focus()
        }, 10)
    }), $("span.pill[data-behavior~=expandable]:has(.balloon)").live("expand", function (e) {
        return $(this).closest("li.todo").addClass("balloon_expanded"), $(this).find("[data-behavior~=assignee_options]").focus()
    }), $("span.pill[data-behavior~=expandable]:has(.balloon)").live("collapse", function (e) {
        return $(this).closest("li.todo").removeClass("balloon_expanded"), $(this).find("[data-behavior~=assignee_name]").width("auto")
    }), bcx.on("page:change", 'show todo pills and add "ignore_hover" class', function () {
        return $("div.sheet.todo span.pill:not(.comments)").show().addClass("ignore_hover")
    }), $("article.todolist form.edit_todo, article.todolist form.new_todo").live("ajax:before", function () {
        var e, t;
        t = $(this);
        if ((e = t.find(':input[name="todo[content]"]')).length && !$.trim(e.val())) return t.removeClass("submitting"), e.get(0).focus(), !1
    }), $("[data-behavior~=load_completed_todos]").live("click", function (e) {
        return e.preventDefault(), e.stopImmediatePropagation(), $(this).closest("p").addClass("busy"), $(this).closest("ul.completed").load($(this).attr("href"))
    })
}.call(this),
function () {
    var e;
    e = function (e) {
        var t, n;
        return t = e.data("collection-name"), ((n = bcx.currentProject) != null ? n.get("" + t + "_count") : void 0) === 0
    }, $("form#new_upload").live("ajax:success", function (e) {
        return (new bcx.Busy(this)).end()
    }), $("form#new_upload").live("ajax:error", function (e) {
        return (new bcx.Busy(this)).end(), alert("There was a problem with your upload. Please try again.")
    }), $("[data-behavior~=new_upload]").live("click", function (e) {
        return $("article.upload.new").expand(), e.preventDefault()
    }), $("article.upload.new").live("expand", function (e) {
        if (e.target !== this) return;
        return $("div.sheet.attachments").removeClass("blank_slate")
    }).live("collapse", function (t) {
        var n;
        $(this).find("form").resetForm(), $(this).find("textarea").keydown(), n = $(this).parent().find("section");
        if (e(n)) return $("div.sheet.attachments").addClass("blank_slate")
    })
}.call(this),
function () {
    $(document).ready(function () {
        if (navigator.platform.match(/Win32/)) return $(document.body).addClass("windows")
    })
}.call(this),
function () {
    bcx.on("page:change", "hide or show account limit notices", function () {
        if (bcx.currentPerson != null) return bcx.currentPerson.attributes.show_storage_prod ? $("div.limit.storage.prod").show() : $("div.limit.storage.prod").hide(), bcx.currentPerson.attributes.account_can_upload ? $("div.limit.storage.reached").hide() : ($("div.limit.storage.reached:not(.thanks)").show(), $("[data-role~=account_upgrade_wrapper]").hide())
    })
}.call(this),
function () {
    var e, t;
    e = {}, t = function (e) {
        return e.substring(e.lastIndexOf("/") + 1)
    }, $(function () {
        return _.each($("link[data-asset-path]"), function (n) {
            return e[n.getAttribute("data-asset-path")] = t(n.href)
        }), _.each($("script[data-asset-path]"), function (n) {
            return e[n.getAttribute("data-asset-path")] = t(n.src)
        })
    }), $(document).on("ajaxSuccess", function (t, n, r) {
        var i;
        i = n.getResponseHeader("X-Asset-Paths");
        if (i != null) {
            try {
                i = JSON.parse(i)
            } catch (s) {
                i = JSON.parse("[" + i + "]")[0]
            }
            return _.each(i, function (t, n) {
                if (e[n] !== t) return Stacker.pushState = !1, e[n] = t
            })
        }
    })
}.call(this),
function () {
    bcx.on("page:update", "install autoload behavior", function () {
        return $("[data-autoload-url]").install("behavior for autoloading a URL", function (e) {
            var t, n;
            if (n = e.data("autoload-url")) return $.get(n), e.attr("data-autoload-url", ""), t = e.closest("div.sheet"), t.addBehavior("prevent_reload_when_stacked")
        })
    })
}.call(this),
function () {
    var e, t;
    t = "[data-behavior~=autoresize]:not([data-behavior~=wysiwyg])", e = function (e) {
        return e.filter(":visible").autoResize()
    }, bcx.on("page:update", "install autoresize behavior on visible elements", function () {
        return e($(t))
    }), $("[data-behavior~=expandable]:has(" + t + ")").live("expand", function () {
        return e($(this).find(t))
    }), $("" + t + ":visible").live("focus", function () {
        return $(this).autoResize()
    })
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        };
    e = function () {
        function e(e) {
            this.clearWhenSubmit = t(this.clearWhenSubmit, this), this.clear = t(this.clear, this), this.save = t(this.save, this), this.watchForChanges = t(this.watchForChanges, this), this.restore = t(this.restore, this), this.generateStorageKey = t(this.generateStorageKey, this), this.$input = $(e), this.form = this.$input.closest("form"), this.storageKey = this.generateStorageKey(), this.restore(), this.watchForChanges(), this.clearWhenSubmit()
        }
        return e.prototype.generateStorageKey = function () {
            var e;
            return e = $.md5([this.$input.attr("name"), this.form.attr("action"), window.location.pathname].join("")), "autosave:" + e
        }, e.prototype.restore = function () {
            var e;
            if (e = bcx.storage.get(this.storageKey))
                if (!this.$input.val()) return this.$input.val(e)
        }, e.prototype.watchForChanges = function () {
            var e = this;
            return this.$input.bind("change keyup paste", function () {
                return e.save()
            })
        }, e.prototype.save = function () {
            return bcx.storage.set(this.storageKey, this.$input.val())
        }, e.prototype.clear = function () {
            return bcx.storage.unset(this.storageKey)
        }, e.prototype.clearWhenSubmit = function () {
            var e = this;
            return this.form.bind("submit", function () {
                return e.form.data("remote") ? e.form.bind("ajaxSuccess." + e.storageKey, function (t, n, r) {
                    if (e.form.attr("action") === r.url) return e.form.unbind("ajaxSuccess." + e.storageKey), e.clear()
                }) : e.clear()
            })
        }, e
    }(), bcx.on("page:update", "install autosave behavior", function () {
        return $("[data-behavior~=autosave]").install("behavior for autosaving", function (t) {
            return t.each(function () {
                return new e(this)
            })
        })
    })
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        };
    e = function () {
        function e(e) {
            this.updateAvailability = t(this.updateAvailability, this), this.timeLeftInWords = t(this.timeLeftInWords, this), this.availableUntil = t(this.availableUntil, this), this.isAvailable = t(this.isAvailable, this), this.watchOrRemove = t(this.watchOrRemove, this), this.$el = $(e), this.watchOrRemove()
        }
        return e.prototype.watchOrRemove = function () {
            var e = this;
            return this.isAvailable() ? (this.updateAvailability(), setTimeout(function () {
                        return e.watchOrRemove()
                    }, 5e3)) : this.$el.remove()
        }, e.prototype.isAvailable = function () {
            return new Date < this.availableUntil()
        }, e.prototype.availableUntil = function () {
            return new Date(Date.parse(this.$el.data("available-until")))
        }, e.prototype.timeLeftInWords = function () {
            var e;
            return e = (this.availableUntil() - new Date) / 6e4, e < 1 ? "" + Math.floor(e * 60) + " seconds" : e >= 1 && e < 2 ? "1 minute" : "" + Math.floor(e) + " minutes"
        }, e.prototype.updateAvailability = function () {
            return this.$el.find("[data-display~=available_time_left]").text(this.timeLeftInWords())
        }, e
    }(), bcx.on("page:update", "install availability window behavior", function () {
        return $("[data-available-until]").install("behavior for availability window", function (t) {
            return t.each(function () {
                return new e(this)
            })
        })
    })
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        };
    e = function () {
        function e(e) {
            this.availableAfter = t(this.availableAfter, this), this.isAvailable = t(this.isAvailable, this), this.watchOrShow = t(this.watchOrShow, this), this.$el = $(e), this.watchOrShow()
        }
        return e.prototype.watchOrShow = function () {
            var e = this;
            return this.isAvailable() ? this.$el.show() : setTimeout(function () {
                return e.watchOrShow()
            }, 5e3)
        }, e.prototype.isAvailable = function () {
            return new Date > this.availableAfter()
        }, e.prototype.availableAfter = function () {
            return new Date(Date.parse(this.$el.data("available-after")))
        }, e
    }(), bcx.on("page:update", "install available-after behavior", function () {
        return $("[data-available-after]").install("behavior for availabile after", function (t) {
            return t.each(function () {
                return new e(this)
            })
        })
    })
}.call(this),
function () {
    bcx.on("page:update", "load Backbone sync tags", function () {
        var e;
        return e = function (e) {
            var t;
            return t = $(e).remove(), {
                collection: bcx[t.attr("name")],
                attributes: JSON.parse(t.attr("value"))
            }
        }, $("input[data-behavior~=backbone_model]").each(function () {
            var t, n, r;
            return r = e(this), n = r.collection, t = r.attributes, n.addOrUpdate(t)
        }), $("input[data-behavior~=backbone_collection]").each(function () {
            var t, n, r;
            return r = e(this), n = r.collection, t = r.attributes, $(this).data("reset-collection") != null && n.reset(), n.merge(t)
        })
    })
}.call(this),
function () {
    var e;
    $.fn.addBehavior = function (t) {
        var n;
        return n = e(this), n.push(t), this.attr("data-behavior", _(n).uniq().join(" "))
    }, $.fn.removeBehavior = function (t) {
        var n;
        return n = e(this), this.attr("data-behavior", _(n).without(t).join(" "))
    }, $.fn.hasBehavior = function (t) {
        return _.include(e(this), t)
    }, e = function (e) {
        return (e.attr("data-behavior") || "").split(" ")
    }
}.call(this),
function () {
    bcx.CalendarEventsLoader = function () {
        function e(e) {
            this.display = e, this.rows = this.display.get("rows"), this.loadedDateRanges = {}
        }
        return e.prototype.fetch = function (e) {
            var t, n, r, i, s, o = this;
            r = this.determineRanges(e);
            if (r.length) return t = [this.display.getFirstDate(), this.display.getLastDate()], n = this.isDateRangeLoaded(t[0], t[1]), n || this.display.trigger("current_date_range:loading"), s = r[0][0], i = r[r.length - 1][1], $.get("/calendar/fetch_events", {
                    window_start_date: s.toString(),
                    window_end_date: i.toString()
                }, function () {
                    o.display.calendarEvents.addRecurrencesInRange(o.display.getFirstDate(), o.display.getLastDate()), o.markDateRangesLoaded(r);
                    if (!n) return o.display.trigger("current_date_range:loaded", t[0])
                })
        }, e.prototype.determineRanges = function (e) {
            var t, n, r, i, s = this;
            i = [], t = [this.display.getFirstDate(), this.display.getLastDate()], i.push(t);
            switch (e) {
            case "forward":
                n = this.getDateRangeFor(t[1]), i.push(n), i.push(this.getDateRangeFor(n[1]));
                break;
            case "backward":
                r = this.getDateRangeFor(t[0].previous()), i.unshift(r), i.unshift(this.getDateRangeFor(r[0].previous()));
                break;
            default:
                i.push(this.getDateRangeFor(t[1])), i.unshift(this.getDateRangeFor(t[0].previous()))
            }
            return _(i).filter(function (e) {
                return !s.isDateRangeLoaded(e[0], e[1])
            })
        }, e.prototype.getDateRangeFor = function (e) {
            var t, n;
            return n = e.beginningOfMonth().beginningOfWeek(), t = n.next(-1 + 7 * this.rows), [n, t]
        }, e.prototype.isDateRangeLoaded = function (e, t) {
            return this.loadedDateRanges[this.rangeKeyFor(e, t)] != null
        }, e.prototype.rangeKeyFor = function (e, t) {
            return "" + e.toString() + ":" + t.toString()
        }, e.prototype.markDateRangesLoaded = function (e) {
            var t, n, r, i;
            i = [];
            for (n = 0, r = e.length; n < r; n++) t = e[n], i.push(this.loadedDateRanges[this.rangeKeyFor(t[0], t[1])] = !0);
            return i
        }, e
    }()
}.call(this),
function () {
    var e, t;
    e = "", (t = function () {
        if (navigator.userAgent.match(/iPhone.*Mobile.*Safari/)) return;
        return bcx.currentAccountSlug && window.location.pathname === "/" + bcx.currentAccountSlug + "/calendar" ? $.ajax("/" + bcx.currentAccountSlug + "/calendar_updates?since=" + e, {
                complete: function (n) {
                    return e = n.getResponseHeader("X-Page-Updated-At"), setTimeout(t, 5e3)
                }
            }) : (e = "", setTimeout(t, 1e4))
    })()
}.call(this),
function () {
    $("a[data-behavior~=close_sheet]").live("click", function (e) {
        var t, n, r;
        if (r = Stacker.workspace.container.stack) return t = r.length, r.length === 1 ? Stacker.workspace.visit("/", {
                bareWorkspace: !0
            }) : (n = r[r.length - 2], Stacker.workspace.visit(n.path)), e.preventDefault()
    })
}.call(this),
function () {
    var e, t;
    e = "form[data-behavior~=confirm]", $("" + e + " a[data-behavior~=start]").live("click", function (n) {
        var r;
        return r = $(this).closest(e), t("confirm", r), r.find("input[type=submit]").focus()
    }), $("" + e + " a[data-behavior~=stop]").live("click", function (n) {
        var r;
        return r = $(this).closest(e), t("intro", r)
    }), $(e).live("ajax:before", function (e) {
        var n;
        return n = $(this), t("request", n)
    }), t = function (e, t) {
        return t.find("> div:visible").hide(), t.find("> div." + e).show()
    }
}.call(this),
function () {}.call(this),
function () {
    bcx.on("page:update", "group by date", function () {
        var e, t, n, r, i, s, o, u, a, f, l, c;
        t = $("section[data-behavior~=group_by_date] article[data-behavior~=group_by_date]");
        if (!t.length) return;
        r = t.closest("section"), a = CalendarDate.today(), u = {}, o = function (e) {
            var t, n;
            return (t = u[e]) ? t : (n = "> div.date_group[datetime='" + e + "']", (t = r.find(n)).length || (r.append($(JST["templates/date_group"]({
                                    today: a,
                                    date: e
                                }))), t = r.find(n)), u[e] = t)
        }, c = [];
        for (f = 0, l = t.length; f < l; f++) i = t[f], e = $(i), e.removeBehavior("group_by_date"), s = CalendarDate.parse(e.attr("datetime")), n = o(s), c.push(n.append(e));
        return c
    })
}.call(this),
function () {
    $.datepicker.setDefaults({
            dateFormat: "d M, yy",
            dayNamesMin: ["S", "M", "T", "W", "T", "F", "S"],
            changeMonth: !1,
            changeYear: !1,
            gotoCurrent: !0,
            prevText: "Previous",
            selectOtherMonths: !0,
            showOtherMonths: !0
        }), $("[data-behavior~=date_picker]").live("focus", function () {
            return $(this).datepicker
        }), $("table.ui-datepicker-calendar td a.ui-state-default").live("click", function (e) {
            return e.stopImmediatePropagation()
        })
}.call(this),
function () {
    bcx.on("page:update", "install dirty-tracking behavior", function () {
        return $("[data-behavior~=dirty_tracking]").install("tracking of original value", function (e) {
            return e.each(function () {
                var e;
                return e = $(this), e.data("originalValue", e.val())
            })
        })
    }), $("[data-behavior~=dirty_tracking]").live("change keyup paste", _.debounce(function (e) {
                var t, n;
                t = $(e.currentTarget), n = t.val() !== t.data("originalValue");
                if (t.attr("data-dirty")) {
                    if (!n) return t.removeAttr("data-dirty")
                } else if (n) return t.attr("data-dirty", !0)
            }, 350)), $("form").live("submit reset", function (e) {
            return setTimeout(function () {
                if (!e.isDefaultPrevented()) return $(e.currentTarget).find("[data-behavior~=dirty_tracking]").removeAttr("data-dirty")
            }, 10)
        }), $.fn.isDirty = function () {
        return $(this).find("[data-dirty]").length > 0
    }
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f;
    t = !1, bcx.on("animate_draft:on", "flag draft creation", function () {
        return t = !0
    }), bcx.on("page:beforechange page:change", "hide or show project draft notice", function () {
        return $("div.sheet.project[data-status=draft]").length ? (s(), r(), bcx.peopleAndGroups.loadWithAccesses(), bcx.peopleAndGroups.bind("loaded:withAccess", f)) : i()
    }), s = function () {
        if (!$("#draft_notice").length) return $("#workspace").before(JST["templates/draft_notice"](this)), u()
    }, f = function () {
        var e, t, n;
        return t = _(bcx.currentBucket.people()).reject(function (e) {
            return e.isPerson() && e.id === "person_" + bcx.currentPerson.id
        }), e = function () {
            switch (t.length) {
            case 0:
                return "You're the only one on this project. Invite more people so they can join the discussion.";
            case 1:
                return "" + t[0].get("name") + " has been notified.";
            case 2:
            case 3:
            case 4:
                return n = t.map(function (e) {
                    return e.get("name")
                }).sort().join(", ").replace(/,\s([^,]+)$/, " and $1"), "" + n + " have been notified.";
            default:
                return n = t.slice(0, 3).map(function (e) {
                    return e.get("name")
                }).sort().join(", "), "" + n + ", and " + (t.length - 3) + " other people have been notified."
            }
        }(), $('p[data-behavior~="recipients_notified_notice"]').html(e)
    }, i = function () {
        return $("#draft_notice").remove()
    }, o = function () {
        return $("#draft_notice").removeClass("initial_load")
    }, u = function () {
        return t ? (e(), t = !1) : o()
    }, e = function () {
        return setTimeout(function () {
            var e;
            return e = $("#draft_notice"), e.css({
                    display: "block",
                    height: 0
                }), e.transition({
                    height: e.find("> div").height() + 40
                }, {
                    duration: 250,
                    timing: "ease-in-out",
                    complete: function () {
                        return e.transition({
                                opacity: 1
                            }, {
                                duration: 300,
                                timing: "ease-in-out",
                                complete: function () {
                                    return e.css({
                                            height: ""
                                        }), e.removeClass("initial_load"), $("[data-behavior~=edit_project_header] h1[data-behavior~=editable_field_prompt]").click()
                                }
                            })
                    }
                })
        }, 700)
    }, n = function () {
        var e;
        return e = $("#draft_notice"), e.find("section.draft_description").hide(), e.find("section.draft_confirmation").show().transition({
                opacity: 1
            }), setTimeout(function () {
                return e.css({
                        height: e.find("> div").height() + 40
                    }), e.transition({
                        opacity: 0
                    }, {
                        duration: 300,
                        timing: "ease-in-out",
                        complete: function () {
                            return e.transition({
                                    height: 0
                                }, {
                                    complete: function () {
                                        return e.hide()
                                    }
                                })
                        }
                    })
            }, 6e3)
    }, a = function () {
        return $("section.project_settings a.settings").show(), $("section.project_settings a.delete").hide()
    }, r = function () {
        return $("section.project_settings a.settings").hide(), $("section.project_settings a.delete").show()
    }, $("[data-behavior~=publish_draft_project]").live("click", function (e) {
        return $(this).closest(".submit").addClass("busy"), $.ajax({
                url: bcx.currentProject.urlForPublish(),
                type: "PUT",
                success: function () {
                    return n(), a(), bcx.currentBucket.justPublished = !0
                }
            }), e.preventDefault()
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f;
    u = "html > .drag_hover_highlight", a = function () {
        return $(u).show()
    }, i = function () {
        return $(u).hide()
    }, f = 8, t = $("<div class=drag_hover_highlight>").css({
            height: f + "px"
        }), n = $("<div class=drag_hover_highlight>").css({
            height: f + "px"
        }), r = $("<div class=drag_hover_highlight>").css({
            width: f + "px"
        }), e = $("<div class=drag_hover_highlight>").css({
            width: f + "px"
        }), o = function (i) {
        var s, o, u, a, l, c, h, p, d, v, m, g, y, b, w;
        return w = i.offset(), h = w.left, d = w.top, b = i.outerWidth(), o = i.outerHeight(), p = h + b, s = d + o, g = $(window).scrollTop(), m = $(window).scrollLeft(), y = $(window).width(), v = $(window).height(), c = Math.max(0, d - g - f), a = Math.max(0, h - m - f), l = Math.min(y - f, p - m), u = Math.min(v - f, s - g), t.css({
                width: b + f + "px",
                left: a + "px",
                top: c + "px"
            }), n.css({
                width: b + 2 * f + "px",
                left: a + "px",
                top: u + "px"
            }), r.css({
                height: o + f + "px",
                left: a + "px",
                top: c + "px"
            }), e.css({
                height: o + f + "px",
                left: l + "px",
                top: c + "px"
            })
    }, $(document).ready(function () {
        return $("html").append(t, n, r, e), $(u).bind("mouseover", i), i()
    }), s = null, $(document).bind("file:dragenter", function (e) {
        s = $(e.target).dispatch("file:draghighlight"), $(e.target).addClass("drag_hover");
        if (!s.isDefaultPrevented()) return o($(e.target)), a()
    }), $(document).bind("file:dragleave", function (e) {
        return i(), setTimeout(function () {
            return $(e.target).removeClass("drag_hover")
        }, 5)
    }), $(document).bind("file:drop", function (e) {
        return $(e.target).removeClass("drag_hover")
    })
}.call(this),
function () {
    var e, t = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    e = function (e) {
        var n, r, i, s;
        return n = $(document.documentElement), r = (i = (s = n.attr("data-features")) != null ? s.split(" ") : void 0) != null ? i : [], t.call(r, e) < 0 && r.push(e), n.attr("data-features", r.join(" "))
    }, window.File && e("files_api")
}.call(this),
function () {
    $("[data-behavior~=hide_buttons_on_expand]").live("expand", function (e) {
        return $(this).parents().find(".has_buttons").first().addClass("hide_buttons")
    }).live("collapse", function (e) {
        return $(this).parents().find(".has_buttons").first().removeClass("hide_buttons")
    })
}.call(this),
function () {
    var e, t, n, r, i;
    n = "[data-behavior~=has_hover_content]", r = "[data-behavior~=hover_content]:not(.expanded, .ignore_hover)", $.support.touch && $(n).live("tap", function () {
        if ($(this).find(r).filter(function () {
                    return $(this).is(":hidden") || $(this).css("visibility") === "hidden"
                }).length) return event.preventDefault(), i(this, function (e) {
                return $(e).addClass("popout")
            })
    }), $(n).live("mouseenter", function () {
        return i(this)
    }), $(n).live("mouseleave", function () {
        return t(this)
    }), i = function (t, n) {
        return $(t).find("" + r + ":not([data-hovercontent-strategy])").each(function () {
            if ($(this).css("visibility") === "hidden") return $(this).attr("data-hovercontent-strategy", "visibility")
        }), $(".hiding").each(function () {
            return e($(this), !1)
        }), $(t).find(r).each(function () {
            $(this).data("hovercontent-strategy") === "visibility" ? ($(this).css("visibility", "visible"), $(this).addClass("showing")) : ($(this).hide(), $(this).show()), $(this).trigger("hovercontent:show");
            if (n) return n(this)
        })
    }, e = function (e, t) {
        var n = this;
        return e.data("hovercontent-strategy") === "visibility" ? t ? (e.addClass("hiding"), setTimeout(function () {
                    return e.css("visibility", "hidden"), e.removeClass("hiding"), e.removeClass("showing")
                }, 120)) : (e.css("visibility", "hidden"), e.removeClass("showing")) : t ? (e.addClass("hiding"), e.delay(100).fadeOut(100, function () {
                    return $(this).removeClass("hiding")
                })) : e.hide(), e.trigger("hovercontent:hide")
    }, t = function (t, n) {
        return n == null && (n = !0), $(t).find("" + r + ":visible").each(function () {
            var t;
            t = $(this);
            if (t.css("visibility") === "hidden") return;
            return e(t, n)
        })
    }
}.call(this),
function () {
    $("form[data-behavior~=member], form[data-behavior~=invite], form[data-behavior~=adhoc_subscriber_validation]").live("ajax:before", function (e) {
        var t, n, r;
        t = $(this), n = t.find("div.field.invalid");
        if (n.size()) return n.first().find("[data-role~=human_input]").focus(), !1;
        r = t.find("div.field.unknown");
        if (r.size()) return r.first().find("[data-role~=human_input]").focus(), !1
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a, f;
    $(document).ready(function () {
        var e;
        if (e = window.location.hash.match(/\#_enlarge_(\d+)/) || window.location.search.match(/\enlarge=(\d+)/)) return $("[data-behavior~=enlargeable][data-image-id~=" + e[1] + "]").click()
    }), $("[data-behavior~=enlargeable]").live("click", function (t) {
        var n, r, i;
        if (t.metaKey) return;
        t.preventDefault(), t.stopPropagation(), n = $(this).is("img") ? $(this) : $(this).find("img"), r = n.closest("section, html");
        if (i = n.data("image-id")) return new e({
                activeImageId: i,
                $thumbnails: r.find("img[data-container-id=" + n.data("container-id") + "]")
            })
    }), e = function () {
        function e(e) {
            var t, n, r;
            e == null && (e = {}), t = e.$thumbnails, n = e.activeImageId, this.images = function () {
                var e, n, i;
                i = [];
                for (e = 0, n = t.length; e < n; e++) r = t[e], i.push(s($(r)));
                return i
            }(), this.activate(n), this.install()
        }
        return e.prototype.bind = function () {
            var e, t = this;
            return e = $(this.el), e.delegate("[data-behavior~=activate]", "click", function (e) {
                return t.activate($(e.target).data("image-id")), t.redraw()
            }), e.delegate("[data-behavior~=scroll_forward]", "click", function (e) {
                if (!$(e.target).is("[disabled]")) return t.nav.scrollForward()
            }), e.delegate("[data-behavior~=scroll_reverse]", "click", function (e) {
                if (!$(e.target).is("[disabled]")) return t.nav.scrollReverse()
            }), e.bind("click", function (e) {
                if (!$(e.target).is("a, [data-behavior]")) return t.uninstall()
            }), $(document).bind("keydown.image_enlarger", function (e) {
                switch (e.which) {
                case $.ui.keyCode.ESCAPE:
                    return t.uninstall(), e.preventDefault();
                case $.ui.keyCode.RIGHT:
                    return t.next(), e.preventDefault();
                case $.ui.keyCode.LEFT:
                    return t.previous(), e.preventDefault();
                case $.ui.keyCode.UP:
                    return e.preventDefault();
                case $.ui.keyCode.DOWN:
                    return e.preventDefault()
                }
            }), $(document).bind("workspace:beforeload.image_enlarger", function () {
                return t.uninstall({
                        withAnimation: !1
                    })
            }), $(window).bind("resize.image_enlarger", function (e) {
                return t.resize()
            })
        }, e.prototype.unbind = function () {
            return $(document).unbind(".image_enlarger"), $(window).unbind(".image_enlarger")
        }, e.prototype.install = function () {
            var e, t = this;
            return this.insert(), a(this.el), this.resize(), this.bind(), this.activateShade(), $(this.el).css("visibility", "hidden"), e = r(this.el), f($(this.active.imgInPage), {
                    $to: e,
                    easing: "ease-out"
                }, function (e) {
                    return e.css("z-index", -1), e.remove(), $(t.el).css("visibility", "visible")
                })
        }, e.prototype.uninstall = function (e) {
            var t, n, i = this;
            return e == null && (e = {}), this.unbind(), t = r(this.el), n = $.extend({}, {
                    $from: t,
                    $to: $(this.active.imgInPage)
                }, e), f($(this.active.imgInPage), n, function (e) {
                    return e.css("z-index", -1), e.remove()
                }), this.remove(), this.deactivateShade()
        }, e.prototype.activate = function (e) {
            return this.active = _(this.images).detect(function (t) {
                return t.id === e
            })
        }, e.prototype.next = function () {
            if (this.images.length > 1) return this.activate((this.images[this.images.indexOf(this.active) + 1] || this.images[0]).id), this.redraw(), this.nav.scrollActivatedThumbnailIntoView()
        }, e.prototype.previous = function () {
            if (this.images.length > 1) return this.activate((this.images[this.images.indexOf(this.active) - 1] || this.images[this.images.length - 1]).id), this.redraw(), this.nav.scrollActivatedThumbnailIntoView()
        }, e.prototype.render = function () {
            return JST["templates/image_enlarger"]({
                    images: this.images,
                    active: this.active
                })
        }, e.prototype.insert = function () {
            return $("html").append(this.render()), this.el = $("#image_enlarger")[0], this.nav = new t($(this.el).find("nav:first")[0]), this.nav.center($(this.el).find("nav img.activated")), this.loadActiveImage()
        }, e.prototype.resize = function () {
            return u(this.el), this.nav.resize()
        }, e.prototype.redraw = function () {
            return $(this.el).find("figure:visible").hide(), $(this.el).find("#enlarged_image_" + this.active.id).show(), $(this.el).find("nav img.activated").removeClass("activated"), $(this.el).find("nav img[data-image-id=" + this.active.id + "]").addClass("activated"), this.loadActiveImage()
        }, e.prototype.remove = function () {
            return $(this.el).remove()
        }, e.prototype.activateShade = function () {
            return $("html").addClass("shaded")
        }, e.prototype.deactivateShade = function () {
            return $("html").removeClass("shaded")
        }, e.prototype.loadActiveImage = function () {
            var e, t, n = this;
            if (this.loadingImage) return;
            return e = r(this.el), t = e.data("large-src") || e.data("original-src"), this.loadingImage = new Image, this.loadingImage.onload = function () {
                return e.attr("src", t), n.loadingImage = null
            }, this.loadingImage.onerror = function () {
                return n.loadingImage = null
            }, this.loadingImage.src = t
        }, e
    }(), t = function () {
        function e(e) {
            this.el = $(e), this.updateScrollButtons(), this.resize()
        }
        return e.prototype.getView = function () {
            return $(this.el).find("[data-behavior~=scroll_view]:first")
        }, e.prototype.getContent = function () {
            return $(this.el).find("[data-behavior~=scroll_content]:first")
        }, e.prototype.activateScrollButton = function (e) {
            return $(this.el).find("[data-behavior~=scroll_" + e + "]").addClass("active")
        }, e.prototype.deactivateScrollButton = function (e) {
            return $(this.el).find("[data-behavior~=scroll_" + e + "]").removeClass("active")
        }, e.prototype.enableScrollButton = function (e) {
            return $(this.el).find("[data-behavior~=scroll_" + e + "]").attr("disabled", !1)
        }, e.prototype.disableScrollButton = function (e) {
            return $(this.el).find("[data-behavior~=scroll_" + e + "]").attr("disabled", !0)
        }, e.prototype.scrollForward = function () {
            return this.activateScrollButton("forward"), this.scroll(this.distanceToEnd())
        }, e.prototype.scrollReverse = function () {
            return this.activateScrollButton("reverse"), this.scroll(this.distanceToStart())
        }, e.prototype.scrollActivatedThumbnailIntoView = function () {
            var e, t, n, r, s, o, u, a;
            t = this.getView(), e = $(this.el).find("img.activated"), a = i(t), s = i(e), o = a.left, u = a.left + a.width, n = s.left - s.width, r = s.left + s.width + s.width, n < o && this.scroll(n - o);
            if (r > u) return this.scroll(r - u)
        }, e.prototype.center = function (e) {
            var t, n;
            if (this.scrolling()) return n = this.centerPositionFor(e), n = Math.max(this.maxScrollPosition(), n), n = Math.min(this.minScrollPosition(), n), t = this.getContent(), t.css({
                    left: n
                }), this.updateScrollButtons()
        }, e.prototype.centerPositionFor = function (e) {
            var t, n;
            return t = this.getView(), n = e.position().left + e.width() / 2, -n + t.width() / 2
        }, e.prototype.maxScrollPosition = function () {
            var e, t;
            return t = this.getView(), e = this.getContent(), t.width() - e.width()
        }, e.prototype.minScrollPosition = function () {
            return 0
        }, e.prototype.scroll = function (e) {
            var t, n, r, i, s, o = this;
            return t = this.getContent(), r = parseInt(t.css("left")), n = this.adjustedDistance(e), i = e > 0 ? -1 : 1, s = r + n * i, s = Math.max(this.maxScrollPosition(), s), s = Math.min(this.minScrollPosition(), s), t.animate({
                    left: s
                }, function () {
                    return o.updateScrollButtons()
                })
        }, e.prototype.updateScrollButtons = function () {
            return this.deactivateScrollButton("reverse"), this.deactivateScrollButton("forward"), this.distanceToEnd() === 0 ? this.disableScrollButton("forward") : this.enableScrollButton("forward"), this.distanceToStart() === 0 ? this.disableScrollButton("reverse") : this.enableScrollButton("reverse")
        }, e.prototype.resize = function () {
            var e;
            return e = this.getView(), this.scrolling() ? e.addClass("scrolling") : e.removeClass("scrolling")
        }, e.prototype.scrolling = function () {
            var e, t;
            return t = this.getView(), e = this.getContent(), t.width() < e.width()
        }, e.prototype.distanceToEnd = function () {
            var e, t, n, r, i, s;
            return t = this.getView(), e = this.getContent(), s = t.width(), r = e.width(), n = parseInt(e.css("left")), i = r + n - s, Math.max(i, 0)
        }, e.prototype.distanceToStart = function () {
            var e;
            return e = this.getContent(), parseInt(e.css("left"))
        }, e.prototype.adjustedDistance = function (e) {
            return Math.min(this.maxScrollDistance(), Math.abs(e))
        }, e.prototype.maxScrollDistance = function () {
            var e;
            return e = this.getView(), Math.floor(e.width() * .5)
        }, e
    }(), r = function (e) {
        return $(e).find("figure:visible img.enlarged")
    }, u = function (e) {
        var t, n;
        return t = $(e).find("figure:visible"), n = {
            height: t.height(),
            width: t.width()
        }, $(e).find("figure img.enlarged").each(function () {
            var e;
            return e = $(this), e.css(o(e, n))
        })
    }, a = function (e) {
        var t, n;
        return t = $(e).find("nav img"), n = {
            height: t.css("max-height"),
            width: t.css("max-width")
        }, t.each(function () {
            var e;
            return e = $(this), e.css(o(e, n))
        })
    }, s = function (e) {
        return {
            imgInPage: e.get(0),
            thumbnail: e.attr("src"),
            original: e.data("original-src"),
            large: e.data("large-src"),
            filename: e.data("filename"),
            id: e.data("image-id"),
            width: e.attr("width") || e.data("width"),
            height: e.attr("height") || e.data("height")
        }
    }, o = function (e, t) {
        var n, r, i, s, o, u, a, f;
        s = parseInt(e.attr("width") || e.data("width")), r = parseInt(e.attr("height") || e.data("height")), a = parseInt(t.width), o = parseInt(t.height), i = s / r, u = a / o, f = s, n = r;
        if (f > a || n > o) i > u ? (f = a, n = parseInt(f / i)) : (n = o, f = parseInt(n * i));
        return {
            width: f,
            height: n
        }
    }, f = function (e, t, r) {
        var s, o, u;
        t == null && (t = {}), u = i(t.$from || e), o = i(t.$to || window), s = n(e), s.css(u);
        if (t.withAnimation === !1) {
            typeof r == "function" && r(s);
            return
        }
        return $("html").append(s), "onwebkittransitionend" in window ? (setTimeout(function () {
                    return s.css({
                            "-webkit-transition-property": "left right width height",
                            "-webkit-transition-animation": "ease-out",
                            "-webkit-transition-duration": "200ms"
                        }), s.css(o)
                }), s.bind("webkitTransitionEnd", function (e) {
                    return s.unbind("webkitTransitionEnd"), typeof r == "function" ? r(s) : void 0
                })) : s.animate(o, 200, "easeOutQuad", function () {
                return typeof r == "function" ? r(s) : void 0
            })
    }, n = function (e) {
        return e.clone().attr("data-behavior", "").css({
                "-webkit-transform": "translate3D(0,0,0)",
                position: "fixed",
                zIndex: 2e3
            })
    }, i = function (e) {
        var t, n, r, i, s, o, u, a, f, l, c;
        return i = e.offset(), t = parseInt((a = e.css("border-left-width")) != null ? a : 0), s = parseInt((f = e.css("border-top-width")) != null ? f : 0), n = parseInt((l = e.css("padding-left")) != null ? l : 0), o = parseInt((c = e.css("padding-top")) != null ? c : 0), r = $(window).scrollLeft(), u = $(window).scrollTop(), {
            left: i.left + t + n - r,
            top: i.top + s + o - u,
            width: e.width(),
            height: e.height()
        }
    }
}.call(this),
function () {
    var e, t;
    $.fn.scaleImages = function () {
        return this.find("figure.proportional img[data-width][data-height]:not([data-scaled]):visible").each(function () {
            var n, r, i, s, o, u, a;
            return n = $(this), a = e(n), u = a[0], r = a[1], i = a[2], u > r ? (o = Math.min(i, u), s = parseInt(o * r / u)) : (s = Math.min(i, r), o = parseInt(s * u / r)), t(n, o, s)
        }), this.find("figure.full_width img[data-width][data-height]:not([data-scaled]):visible").each(function () {
            var n, r, i, s, o, u, a;
            return n = $(this), a = e(n), u = a[0], r = a[1], i = a[2], o = Math.min(i, u), s = parseInt(o * r / u), t(n, o, s)
        }), this.find("div.image_grid_view:not([data-scaled])").each(function () {
            var e, t;
            return e = $(this), t = e.find("td:first").width(), e.find("tr").each(function () {
                var e, n;
                return e = $(this), n = [], e.find("figure img[data-scaled]").each(function () {
                    return n.push($(this).height())
                }), e.find("figure div.background").css({
                        height: _(n).max(),
                        width: t
                    })
            }), e.attr("data-scaled", !0)
        }), this
    }, bcx.on("page:update", "scale images", function () {
        return $(document).scaleImages()
    }), e = function (e) {
        return [parseInt(e.data("width")), parseInt(e.data("height")), e.closest("figure").width()]
    }, t = function (e, t, n) {
        var r, i;
        if (r = parseInt(e.data("max-size"))) i = Math.max(1, t / r, n / r), t = Math.round(t / i), n = Math.round(n / i);
        return e.css({
                width: t,
                height: n
            }), e.attr("data-scaled", !0)
    }
}.call(this),
function () {
    _.mixin({
            inGroups: function (e, t) {
                var n, r, i, s, o = this;
                return n = parseInt(e.length / t), i = e.length % t, r = [], s = 0, _(t).times(function (t) {
                    var o, u;
                    return o = n + ((u = i > 0 && i > t) != null ? u : {
                            1: 0
                        }), r.push(e.slice(s, s + o)), s += o
                }), r
            }
        })
}.call(this),
function () {
    bcx.on("page:change", "install infinite pagination behavior", function () {
        var e, t;
        return e = function (e, n) {
            var r;
            return n == null && (n = {}), e.infinitePage(n), t(e), r = e.closest("div.sheet"), r.addBehavior("prevent_reload_when_stacked")
        }, t = function (e) {
            return e.bind("infinite_page:load", function () {
                return $(this).find("[data-behavior~=remove_duplicates][data-unique-id]").each(function () {
                    var e, t;
                    if ((e = $("[data-unique-id='" + $(this).data("unique-id") + "']")).length > 1) return t = e.first(), e.each(function () {
                        if ($(this)[0] !== t[0]) return $(this).remove()
                    })
                })
            })
        }, $("[data-behavior~=infinite_page]").install("behavior for infinite scrolling and pagination", function (t) {
            return e(t)
        }), $("[data-behavior~=immediate_page]").install("loading the full page", function (t) {
            return e(t, {
                    immediate: !0
                })
        })
    })
}.call(this),
function () {
    $("[data-behavior~=input_change_emitter]").live("focus", function (e) {
        var t, n, r, i, s, o;
        return t = $(this), n = o = t.val(), i = function () {
            n = t.val();
            if (n !== o) return t.trigger("input:change", {
                    currentValue: n,
                    previousValue: o
                }), o = n
        }, s = setInterval(i, 50), r = function () {
            return clearInterval(s), t.unbind("blur", r)
        }, t.bind("blur", r)
    })
}.call(this),
function () {
    window.Beanstalk = {
        enablePageviewTracking: !0,
        enablePresenceTracking: !1,
        presenceGranularity: 60,
        dev: location.host.match(/.*?\.dev/),
        uuid: null,
        site_id: null,
        beaconURL: function () {
            var e, t;
            return e = Beanstalk.dev ? "dash.dev" : "dash.37signals.com", t = "" + window.location.protocol + "//" + e + "/beacon.gif?"
        }
    }, Beanstalk.enablePageviewTracking = !Beanstalk.dev
}.call(this),
function () {
    var e = [].slice;
    Beanstalk.beacon = {
        params: [],
        enabled: !0,
        log: function (e) {
            var t, n, r;
            r = [];
            for (t in e) n = e[t], r.push(Beanstalk.beacon.params.push([t, n]));
            return r
        },
        send: function () {
            var t, n, r, i, s;
            if (!Beanstalk.beacon.enabled) return;
            r = [], s = Beanstalk.beacon.params;
            for (n in s) i = s[n], typeof i != "function" && r.push("" + encodeURIComponent(i[0]) + "=" + encodeURIComponent(i[1]));
            return r.length && (Beanstalk.uuid && r.unshift("uuid=" + Beanstalk.uuid), Beanstalk.site_id && r.unshift("site_id=" + Beanstalk.site_id), r.unshift("tz=" + (new Date).getTimezoneOffset() / 60), t = new Image, t.src = [Beanstalk.beaconURL()].concat(e.call(r)).join("&"), t.onerror = function () {
                if (Beanstalk.dev) return Beanstalk.beacon.enabled = !1, console.warn("disabling instrumentation beacon")
            }), Beanstalk.beacon.params = []
        }
    }
}.call(this),
function () {
    Beanstalk.logCohort = function (e, t) {
        return Beanstalk.beacon.log({
                "cohort[][experiment]": e,
                "cohort[][group]": t
            }), Beanstalk.beacon.send()
    }
}.call(this),
function () {
    Beanstalk.logEvent = function (e, t) {
        return Beanstalk.beacon.log({
                "event[][name]": e,
                "event[][value]": t
            }), Beanstalk.beacon.send()
    }
}.call(this),
function () {
    Beanstalk.logPageview = function () {
        if (Beanstalk.enablePageviewTracking) {
            Beanstalk.beacon.log({
                    "pageview[host]": document.location.host,
                    "pageview[path]": document.location.pathname,
                    "pageview[query]": document.location.search,
                    "pageview[title]": document.title,
                    "pageview[referrer]": document.referrer
                });
            if (Object.keys(Beanstalk.Timing.times).length === 0) return setTimeout(Beanstalk.beacon.send, 500)
        }
    }, document.addEventListener && document.addEventListener("DOMContentLoaded", function () {
        return Beanstalk.logPageview()
    }, !1)
}.call(this),
function () {
    Beanstalk.enablePresenceTracking && setInterval(function () {
        return Beanstalk.beacon.log({
                presence: !0
            }), Beanstalk.beacon.send()
    }, Beanstalk.presenceGranularity * 1e3)
}.call(this),
function () {
    Beanstalk.logSignup = function (e, t) {
        return Beanstalk.beacon.log({
                "signup[product]": e,
                "signup[account_id]": t
            }), Beanstalk.beacon.send()
    }
}.call(this),
function () {
    var e;
    typeof e == "undefined" && (e = {
            times: {}
        }), Beanstalk.Timing = {
        times: e.times,
        mark: function (e, t) {
            return t || (t = (new Date).getTime()), Beanstalk.Timing.times[e] = t
        },
        init: function (e) {
            return e !== void 0 && (Beanstalk.Timing.times = e), Beanstalk.Timing.findStartTime(), Beanstalk.Timing.addEventListener("beforeunload", Beanstalk.Timing.beforeUnload, !1), Beanstalk.Timing.addEventListener("load", Beanstalk.Timing.onload, !1)
        },
        addEventListener: function (e, t, n) {
            try {
                if ("undefined" != typeof window.attachEvent) return window.attachEvent("on" + e, t);
                if (window.addEventListener) return window.addEventListener(e, t, n)
            } catch (r) {}
        },
        onload: function () {
            return Beanstalk.Timing.mark("onload"), Beanstalk.Timing.done()
        },
        findStartTime: function () {
            var e;
            e = Beanstalk.Timing.findStartWebTiming() || Beanstalk.Timing.findStartGToolbar();
            if (e) return Beanstalk.Timing.mark("starttime", e)
        },
        findStartWebTiming: function () {
            var e, t;
            return t = void 0, e = window.performance || window.mozPerformance || window.msPerformance || window.webkitPerformance, "undefined" != typeof e && "undefined" != typeof e.timing && "undefined" != typeof e.timing.navigationStart && (t = e.timing.navigationStart), t
        },
        findStartGToolbar: function () {
            var e;
            return e = void 0, "undefined" != typeof window.external && "undefined" != typeof window.external.pageT ? e = (new Date).getTime() - window.external.pageT : "undefined" != typeof window.gtbExternal && "undefined" != typeof window.gtbExternal.pageT ? e = (new Date).getTime() - window.gtbExternal.pageT() : "undefined" != typeof window.chrome && "undefined" != typeof window.chrome.csi && (e = (new Date).getTime() - window.chrome.csi().pageT), e && Beanstalk.Timing.dprint("Beanstalk.Timing.findStartGToolbar: startTime = " + e), e
        },
        done: function () {
            var e, t, n, r;
            Beanstalk.Timing.mark("done"), t = [], r = Beanstalk.Timing.times;
            for (e in r) n = r[e], t.push("" + e + ":" + n);
            return t = t.join(","), Beanstalk.beacon.log({
                    timing: t
                }), Beanstalk.Timing.times = {}, setTimeout(Beanstalk.beacon.send, 100)
        }
    }
}.call(this),
function () {
    $(function () {
        return Beanstalk.uuid = "bcx/" + bcx.currentPerson.get("id") + ",id/" + bcx.currentIdentityId + ",qb/" + bcx.currentAccountSlug, Beanstalk.site_id = 2
    }), $(document).bind("page:change", function () {
        return Beanstalk.logPageview()
    }), setInterval(Beanstalk.beacon.send, 5e3), $(function () {
        return $(document).ajaxSend(function (e, t, n) {
            if (!(n.url.match(/page_updates/) || n.url.match(/projects\.js/) || n.url.match(/progress\.js/))) return Beanstalk.Timing.mark("ajaxSend")
        }), $(document).ajaxSuccess(function (e, t, n) {
            if (!(n.url.match(/page_updates/) || n.url.match(/projects\.js/) || n.url.match(/progress\.js/))) return Beanstalk.Timing.mark("ajaxSuccess"), $("[data-x-runtime]").attr("data-x-runtime", +t.getResponseHeader("X-Runtime"))
        }), $(document).bind("page:beforechange", function () {
            return Beanstalk.Timing.mark("page:beforechange")
        }), $(document).bind("page:change", function (e) {
            return Beanstalk.Timing.mark("page:change"), Beanstalk.Timing.done()
        })
    })
}.call(this),
function () {
    var e;
    e = 75, bcx.on("page:update", "install link truncation behavior", function () {
        return $("a[data-behavior~=truncate]").install("behavior for truncating long links", function (t) {
            return t.each(function () {
                var t;
                t = $(this);
                if (t.text().length > e) {
                    t.html("" + t.html().substring(0, e) + "");
                    if (!t.attr("title")) return t.attr("title", t.attr("href"))
                }
            })
        })
    })
}.call(this),
function () {
    $("[data-behavior~=nubbin]").live("hovercontent:show", function () {
        return $(this).css({
                display: "inline-block",
                left: $(this).outerWidth() * -1
            })
    })
}.call(this),
function () {
    var e, t;
    t = null, e = [], bcx.on("page:beforechange page:change", "apply body classes from active panel", function () {
        var n, r, i, s;
        return n = $("body"), i = window.location.pathname, t !== i && (_.each(e, function (e) {
                    return n.removeClass(e)
                }), e = []), t = i, r = ((s = $("div.panel:not(.inactive)").attr("data-body-class")) != null ? s : "").split(/\s/), _.each(r, function (t) {
                if (!n.hasClass(t)) return n.addClass(t), e.push(t)
            })
    })
}.call(this),
function () {
    var e, t, n, r, i;
    this.bcx.poller = {
        bucket: null,
        updatedAt: null,
        idleCount: 0,
        active: window.location.host.split(".")[0] !== "public"
    }, t = function (e) {
        return 1e3 * Math.min(30, 3 + 4 * Math.log(e + 1))
    }, r = function () {
        return bcx.poller.idleCount = 0, e(0)
    }, e = function (e) {
        return e == null && (e = 1), bcx.poller.idleCount += e, i(bcx.poller.period = t(bcx.poller.idleCount))
    }, i = function (e) {
        if (navigator.userAgent.match(/iPhone.*Mobile.*Safari/)) return;
        return setTimeout(n, e)
    }, n = function () {
        var t, n;
        return (n = /(\/(?:projects|calendars)\/[^/]+)/.exec(window.location.pathname)) && bcx.poller.active ? (t = n[1], bcx.poller.bucket !== t && (bcx.poller.bucket = t, bcx.poller.updatedAt = null, bcx.poller.idleCount = 0), $.ajax("" + t + "/page_updates?since=" + bcx.poller.updatedAt, {
                    complete: function (e) {
                        var t;
                        if (t = e.getResponseHeader("X-Page-Updated-At")) return bcx.poller.updatedAt = t
                    },
                    success: function (t) {
                        return t.length === 0 ? e(1) : r()
                    },
                    error: function () {
                        return e(10)
                    }
                })) : (bcx.poller.updatedAt = null, bcx.poller.bucket = null, r())
    }, r()
}.call(this),
function () {
    $("div.sheet.inactive > header").live("click", function (e) {
        var t, n, r, i;
        n = $(e.target);
        if (n.closest("h1 a, div.sheet:not(.inactive)").length) return;
        return t = $(this).find("h1 a"), i = t.attr("href"), r = t.data("bare-workspace") === !0, Stacker.workspace.visit(i, {
                restorePosition: !0,
                bareWorkspace: r
            }), !1
    }), $("[data-behavior~=reload_current_sheet]").live("click", function (e) {
        return Stacker.workspace.visit(Stacker.normalizePath(window.location), {
                replaceSheet: !0
            }), !1
    }), $(function () {
        var e, t;
        return e = $("<style type=text/css>"), $("head").append(e), t = function () {
            var t;
            return t = $(window).height(), e.text("div.panel { min-height: " + t + "px };")
        }, $(window).resize(t), t()
    })
}.call(this),
function () {
    var e;
    e = function (e) {
        return e.match(/page_updates/) || e.match(/projects\.js/) || e.match(/stars$/)
    }, $(document).ajaxComplete(function (t, n, r) {
        if (!e(r.url)) return $("#runtime a").attr("href", "https://dash.37signals.com/health/logs/search/BCX?qb_id=" + bcx.currentAccountSlug + "&request_id=" + n.getResponseHeader("X-Request-Id")), $("#runtime a").text("Rendered in " + n.getResponseHeader("X-Runtime") + " seconds"), $("#runtime a").attr("data-x-runtime", n.getResponseHeader("X-Runtime")), $("#runtime").show()
    }), $(document).ajaxSend(function (t, n, r) {
        if (!e(r.url)) return $("#runtime").hide()
    })
}.call(this),
function () {
    var e, t, n, r, i, s, o = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    $("[data-behavior~=perma_tools] [data-behavior~=tool_action]").live("click", function (e) {
        var t;
        return t = $(this).closest(".tool"), t.addClass("busy")
    }), $("[data-behavior~=perma_tools] [data-behavior~=confirm_action]").live("click", function (e) {
        var t;
        return e.preventDefault(), $("[data-behavior~=perma_tools] [data-behavior~=tool_cancel]").click(), t = $(this).closest(".tool").addClass("expanded"), t.find("[data-behavior~=confirm_action]").hide(), t.find("[data-role~=confirm_view]").show(), t.find("select").first().focus()
    }), $("[data-behavior~=perma_tools] [data-behavior~=tool_cancel]").live("click", function (e) {
        var t, n;
        return e.preventDefault(), n = $(this).closest(".tool"), n.removeClass("expanded"), (t = n.find("form")).length ? t.resetForm() : n.trigger("reset")
    }), $("[data-behavior~=perma_tools] [data-role~=tool]").live("reset", function (e) {
        return $(this).find("[data-role~=confirm_view], [data-role~=error_view]").hide(), $(this).find("[data-behavior~=confirm_action]").show(), $(this).find("[data-behavior~=bucket_operation_destination_bucket]").attr("disabled", !0), $(this).find(":input[type=submit]").attr("disabled", !0)
    }), $("[data-behavior~=perma_tools] [data-behavior~=bucket_operation_action]").live("click", function (e) {
        var t, n, i, o;
        n = $(this).closest("[data-role~=bucket_operation_tool]"), t = n.find("[data-behavior~=bucket_operation_form]"), i = t.find("[data-behavior~=bucket_operation_destination_bucket]"), o = t.data("bucket-operation-type"), i.attr("disabled") && (r(i, o), bcx.currentPerson.canCreateProjects() && bcx.currentAccount.fetch(), t.show());
        if (o === "Copy") return s(n)
    }), s = function (e) {
        var t, n, r;
        return n = $("article.comment[data-creator-id]").length + $("[data-comments-counter]").length > 0, e.find("[data-behavior~=keep_comments_label]").toggle(n), t = $("[data-behavior~=todo_assignee_present]").length > 0, e.find("[data-behavior~=preserve_todo_assignments_label]").toggle(t), r = $("[data-behavior~=todo_due_date_present]").length > 0, e.find("[data-behavior~=preserve_due_dates_label]").toggle(r)
    }, $("[data-role~=bucket_operation_tool] select").live("change", function (e) {
        var t, n, r;
        r = $(this).closest("[data-role~=bucket_operation_tool]"), n = r.find("[data-behavior~=bucket_operation_form]"), n.find(":input[type=submit]").attr("disabled", !1);
        if ($(e.target).val() === "create_project_option") {
            t = r.find("[data-behavior~=bucket_operation_for_new_project_form]"), n.hide(), t.show().find("input[type=text]").focus().select(), t.find("[data-behavior~=bucket_operation_new_project_name]").keyup();
            if (!bcx.currentAccount.canCreateProjects()) return t.find("input").attr("disabled", !0).blur(), t.find("div.cant_create").show()
        }
    }), $("[data-behavior~=bucket_operation_new_project_name]").live("keyup", function (e) {
        var t;
        return t = $(this).closest("form").find(":input[type=submit]"), $.trim($(this).val()) ? t.attr("disabled", !1) : t.attr("disabled", !0)
    }), $("[data-behavior~=bucket_operation_for_new_project_form] [data-behavior~=tool_cancel]").live("click", function (e) {
        return $(this).closest("form").hide().find("input[type=text]").val("Name the project"), $(this).closest("[data-role~=bucket_operation_tool]").find("[data-behavior~=bucket_operation_form]").show()
    }), n = function (e) {
        switch (e) {
        case "Copy":
            return [CopyProcessor, bcx.CopyOperation];
        case "Move":
            return [MoveProcessor, bcx.MoveOperation]
        }
    }, i = function (e, t) {
        var n, r, i, s, o;
        s = ["keep_comments", "preserve_todo_assignments", "preserve_due_dates"], o = [];
        for (r = 0, i = s.length; r < i; r++) n = s[r], e.find("[data-behavior~=copy_operation_" + n + "]").is(":checked") ? o.push(t.set(n, !0)) : o.push(void 0);
        return o
    }, $("[data-behavior~=bucket_operation_form]").live("submit", function (r) {
        var s, o, u, a, f, l, c, h, p = this;
        return r.preventDefault(), c = $(this).find("[data-behavior~=bucket_operation_destination_bucket]").val().split(":"), a = c[0], u = c[1], h = n($(this).data("bucket-operation-type")), o = h[0], s = h[1], f = new s({
                source_resource_type: $(this).find("[data-behavior~=bucket_operation_source_resource_type]").val(),
                source_resource_id: $(this).find("[data-behavior~=bucket_operation_source_resource_id]").val(),
                destination_bucket_type: a,
                destination_bucket_id: u
            }), i($(this), f), l = new o(f), l.on("processor:failed", function () {
                return e(p)
            }), l.on("processor:progress", function () {
                return t(p)
            }), l.run()
    }), $("[data-behavior~=bucket_operation_for_new_project_form]").live("submit", function (r) {
        var s, o, u, a, f, l = this;
        return r.preventDefault(), f = n($(this).data("bucket-operation-type")), o = f[0], s = f[1], u = new s({
                source_resource_type: $(this).find("[data-behavior~=bucket_operation_source_resource_type]").val(),
                source_resource_id: $(this).find("[data-behavior~=bucket_operation_source_resource_id]").val(),
                new_project_name: $(this).find("[data-behavior~=bucket_operation_new_project_name]").val()
            }), i($(this), u), a = new o(u), a.on("processor:failed", function () {
                return e(l)
            }), a.on("processor:progress", function () {
                return t(l)
            }), a.run()
    }), t = function (e) {
        var t;
        return t = $(e).closest(".tool"), t.addClass("still-busy")
    }, e = function (e) {
        var t;
        return t = $(e).closest(".tool"), t.removeClass("busy"), t.removeClass("still-busy"), t.closest("[data-behavior~=perma_tools]").animate({
                width: "240px"
            }, "fast", function () {
                return t.find("[data-behavior~=confirm_action]").hide(), t.find("[data-role~=error_view]").show()
            })
    }, r = function (e, t) {
        return $.getJSON("/buckets.json", function (n) {
            var r, i, s, o, u, a, f, l, c, h;
            s = bcx.currentBucket.constructor.modelName, s === "Project" ? (u = n.projects.filter(function (e) {
                        return e.id !== parseInt(bcx.currentBucket.id)
                    }), t === "Copy" && u.unshift({
                        id: bcx.currentBucket.id,
                        name: bcx.currentBucket.get("name")
                    }), i = n.calendars) : (u = n.projects, i = n.calendars.filter(function (e) {
                        return e.id !== parseInt(bcx.currentBucket.id)
                    })), c = bcx.currentPerson.canCreateProjects(), h = u.length > 0, a = i.length > 0 && e.closest("form").find("[data-behavior~=bucket_operation_source_resource_type]").val() === "CalendarEvent", l = c + h + a > 1, f = c + h + a === 0, r = e.closest("form").data("bucket-operation-type");
            if (f) return e.closest("[data-role~=confirm_view]").find("div.change").hide(), e.closest("[data-role~=confirm_view]").find("div.cant_change").show();
            o = "";
            if (l || c) o += "<option disabled selected>" + r + " to&hellip;</option>";
            return c && (o += "<optgroup label='&hellip;a new project'>", o += "<option value='create_project_option'>Start a new project</option>", o += "</optgroup>"), h && (l && c ? o += "<optgroup label='&hellip;an existing project'>" : l ? o += "<optgroup label='&hellip;a project'>" : o += "<option disabled selected>Choose a project&hellip;</option>", _(u).each(function (e) {
                        var t, n;
                        return t = s === "Project" && e.id === parseInt(bcx.currentBucket.id), n = t ? "This project (" + e.name + ")" : e.name, o += "<option value='Project:" + e.id + "'>" + n + "</option>"
                    }), l && (o += "</optgroup>")), a && (l ? o += "<optgroup label='&hellip;a calendar'>" : o += "<option disabled selected>Choose a calendar&hellip;</option>", _(i).each(function (e) {
                        return o += "<option value='Calendar:" + e.id + "'>" + e.name + "</option>"
                    }), l && (o += "</optgroup>")), e.attr("disabled", !1), e.html(o), e.show().focus()
        })
    }, bcx.permaTools = {}, bcx.permaTools.showLinkifAccessible = function (e, t) {
        var n;
        return n = parseInt(t), $.getJSON("/buckets.json", function (t) {
            var r;
            r = e === "Project" ? t.projects : t.calendars;
            if (o.call(_(r).pluck("id"), n) >= 0) return $("[data-behavior~=show_link_if_accessible]").show()
        })
    }, $("[data-role~=just_copied] a[data-behavior~=close_copied_notice]").live("click", function (e) {
        var t;
        return e.preventDefault(), t = $(this).closest("div.copied_notice"), t.closest("div.sheet").removeClass("copied"), t.closest("div.sheet").find("div.sheet_body").animate({
                opacity: 1
            }, "fast"), t.fadeOut("fast")
    })
}.call(this),
function () {
    var e;
    e = function () {
        function e(e) {
            this.projectId = e, this.projectId != null && (this.panel = $("div.panel:first"), this.load())
        }
        return e.prototype.load = function () {
            if (!this.loading()) return this.loaded() ? this.updateSelects() : this.fetch()
        }, e.prototype.loading = function () {
            return this.panel.data("assignee-options-loaded-" + this.projectId) != null && this.options() == null
        }, e.prototype.loaded = function () {
            return this.panel.data("assignee-options-loaded-" + this.projectId) != null && this.options() != null
        }, e.prototype.options = function () {
            return this.panel.data("assignee-options-" + this.projectId)
        }, e.prototype.fetch = function () {
            var e = this;
            return this.panel.attr("data-assignee-options-loaded-" + this.projectId, !0), $.getJSON("/projects/" + this.projectId + "/assignees.json", function (t) {
                return e.panel.data("assignee-options-" + e.projectId, t), e.updateSelects(t)
            })
        }, e.prototype.updateSelects = function (e) {
            var t = this;
            return e == null && (e = this.options()), $("select[data-behavior~=assignee_options][data-project-id=" + this.projectId + "][data-assignee-options-loaded!=true]").each(function (n, r) {
                var i, s, o;
                o = $(r), i = o.data("assignee-code"), s = "p" + bcx.currentPerson.id, o.attr("data-assignee-options-loaded", !0), o.find("option").remove(), o.append("<option value=''>Unassigned</option>"), o.append("<option value='" + s + "'>Me (" + _.escape(bcx.currentPerson.attributes.name) + ")</option>"), o.append("<option value=' '></option>");
                if ((i != null ? i[0] : void 0) !== "g") return _(e.people).each(function (e) {
                    return e[1] === s ? o.append('<option value="' + e[1] + '" ' + t.selectedAttr(e[1], i) + ">" + _.escape(e[0]) + "</option>") : o.append('<option value="' + e[1] + '" data-assignee-wants-notifications="' + e[2] + '" ' + t.selectedAttr(e[1], i) + ">" + _.escape(e[0]) + "</option>")
                });
                o.append(t.optionTags("People", e.people, i));
                if (e.groups.length > 0) return o.append(t.optionTags("Companies", e.groups, i))
            })
        }, e.prototype.optionTags = function (e, t, n) {
            var r, i = this;
            return r = "<optgroup label='" + e + "'>", _(t).each(function (e) {
                return r += '<option value="' + e[1] + '" ' + i.selectedAttr(e[1], n) + ">" + _.escape(e[0]) + "</option>"
            }), r += "</optgroup>"
        }, e.prototype.selectedAttr = function (e, t) {
            return e === t ? 'selected="selected"' : ""
        }, e
    }(), $("[data-behavior~=load_assignee_options]").live("mouseenter focus", function () {
        return new e($(this).find("select[data-behavior~=assignee_options]").data("project-id"))
    }), $("a[data-behavior~=load_assignee_options]").live("hover touchstart", function () {
        return new e($(this).parent().parent().find("select[data-behavior~=assignee_options]").data("project-id"))
    }), window.bcx.AssigneeOptionsLoader = e
}.call(this),
function () {
    _.mixin({
            rand: function (e) {
                return e[Math.floor(Math.random() * e.length)]
            }
        })
}.call(this),
function () {
    $.fn.createdBy = function (e) {
        return this.trigger("record:create", e), this.trigger("record:change", e)
    }, $.fn.updatedBy = function (e) {
        return this.trigger("record:update", e), this.trigger("record:change", e)
    }, $(document).bind("record:create", function (e) {
        return $(e.target).highlight()
    }), $(document).bind("record:change", function (e) {
        return $(e.target).highlight()
    })
}.call(this),
function () {
    var e;
    e = function (e) {
        return $(e).is("body, #workspace, #workspace > div.container")
    }, $("html").bind("mousedown", function (t) {
        if (e(t.target)) return t.preventDefault()
    }), $("html").bind("dblclick", function (t) {
        var n;
        if (e(t.target)) {
            n = parseInt(t.clientY / window.innerHeight * 100);
            if (n < 33) return $.scrollTo(0, 300);
            if (n > 66) return $.scrollTo("max", 300)
        }
    })
}.call(this),
function () {
    var e, t;
    $.fn.slider = function (n) {
        return n != null ? this.each(function () {
            var e;
            e = $(this);
            if (e.data("slider")) return t(e, n)
        }) : this.each(function () {
            var t;
            t = $(this);
            if (!t.data("slider")) return e(t)
        })
    }, $("[data-behavior~=slider] [data-behavior~=slide]").live("mousedown", function (e) {
        var n, r, i;
        return i = $(this).closest("[data-slide-index]").data("slide-index"), n = $(this).closest("[data-behavior~=slider]"), r = $(this).data("direction"), r === "forward" ? i++ : i--, t(n, i), !1
    }), e = function (e) {
        var t, n, r, i;
        return n = e.children(":first"), t = e.find("[data-slide-index]"), i = e.width(), r = t.length, n.width("" + 100 * r + "%"), t.width(i).first().addClass("active"), e.data("slider", !0)
    }, t = function (e, t) {
        var n, r, i, s, o, u, a;
        return s = e.children(":first"), i = s.find("[data-slide-index]"), r = i.filter("[data-slide-index].active"), a = r.data("slide-index"), o = t < a ? "backward" : "forward", u = -(t * s.parent().width()), n = i.filter("[data-slide-index=" + t + "]"), e.css({
                overflow: "hidden"
            }), s.css({
                height: r.css("height")
            }), o === "backward" && (r.css("margin-left", ""), n.css("margin-left", -u)), n.addClass("active"), s.animate({
                height: n.css("height"),
                "margin-left": u
            }, 250, "easeOutExpo", function () {
                return r.removeClass("active"), r.css("margin-left", ""), n.css("margin-left", -u), e.css({
                        overflow: ""
                    }), s.css({
                        height: ""
                    }), n.trigger("slider:slide")
            }), n.trigger("slider:beforeslide")
    }
}.call(this),
function () {
    bcx.on("identity:set", function () {
        var e;
        return (e = function () {
            return CalendarDate.firstDayOfWeek = bcx.currentPerson.get("start_of_week")
        })(), bcx.currentPerson.bind("change:start_of_week", e)
    }), $("[data-behavior~=set_start_of_week]").live("mousedown", function (e) {
        var t, n;
        return t = $(e.currentTarget), n = t.data("day"), e.shiftKey && (n === 0 || n === 1) && n !== bcx.currentPerson.getStartOfWeek() && confirm("Would you like Basecamp to show " + CalendarDate.weekdayNames[n] + " as the first day of the week?") && (bcx.currentPerson.setStartOfWeek(n), $.ajax({
                    url: bcx.currentPerson.url(),
                    type: "PUT",
                    data: {
                        person: {
                            start_of_week: n
                        }
                    }
                })), !1
    })
}.call(this),
function () {
    var e, t, n, r;
    r = null, $("[data-behavior~=edit_taggings]").live("expand", function () {
        var e;
        return e = $(this).closest("[data-behavior~=taggings]"), r != null && r.unregister(), r = new bcx.views.TaggingsView(e.get(0))
    }).live("collapse", function (e) {
        return r != null && r.unregister(), r = null, e.stopPropagation()
    }), $("[data-behavior~=taggings]:not([data-behavior~=pending_taggings])").live("tagging:add", function (e, n, r) {
        return t(), $.ajax({
                type: "POST",
                url: $(this).data("url"),
                data: {
                    "tagging[taggable_type]": $(this).data("taggable-type"),
                    "tagging[taggable_id]": $(this).data("taggable-id"),
                    "tagging[tag_name]": n
                },
                complete: function () {
                    return r.refresh()
                }
            })
    }).live("tagging:remove", function (e, n, r) {
        return $(e.target).addClass("removing"), t(), $.ajax({
                type: "DELETE",
                url: n,
                complete: function () {
                    return r.refresh()
                }
            })
    }), t = function () {
        var e;
        if (e = Stacker.workspace.findPanel($("div.sheet.attachments.inactive"))) return e.expireCache()
    }, $("div.sheet.attachments.tagged").live("stackerLinkClicked", function (e, t) {
        return t.replaceSheet = !0
    }), $("[data-behavior~=edit_tag] :input[type=radio]").live("click", function (e) {
        var t;
        return t = $(this).val(), $(this).closest("li").find("span.label_color").css("background", "#" + t), $(this).closest("[data-behavior~=expandable]").collapse()
    }), $("[data-behavior~=rename_tag]").live("click", function (e) {
        var t;
        return t = $(this).closest("li"), t.find("[data-behavior~=name_tag]").expand(), t.find("[data-behavior~=edit_tag]").collapse(), e.preventDefault()
    }), $("[data-behavior~=rename_tag_form]").live("ajax:before", function () {
        var e;
        return e = $(this).find("input[type=text]").val(), $.trim(e).length ? ($(this).addClass("busy"), t(), !0) : !1
    }), $("[data-behavior~=name_tag]").live("expand", function (e) {
        return $(this).find(".submit").slideDown(100), $(this).find("input[type=text]").focus().keydown().select()
    }).live("collapse", function () {
        return $(this).find(".submit").hide(), $(this).find("form").resetForm()
    }), $("[data-behavior~=edit_tag] [data-behavior~=confirm_delete]").live("click", function (e) {
        var t;
        return t = $(this).closest("div.wrapper"), t.css("height", 92), t.find("div.actions, div.confirm_delete").css("top", -55), e.preventDefault()
    }), $("[data-behavior~=edit_tag] [data-behavior~=cancel_delete]").live("click", function (e) {
        return $(this).closest("[data-behavior~=edit_tag]").collapse(), e.preventDefault()
    }), $("[data-behavior~=edit_tag]").live("collapse", function () {
        return $(this).trigger("reset")
    }), $("[data-behavior~=edit_tag]").live("reset", function () {
        var e;
        return e = $(this).find("div.wrapper"), e.css("height", 47), e.find("div.actions, div.confirm_delete").css("top", 0)
    }), e = function (e) {
        return $(e).attr("disabled", "disabled"), $(e).val("Add tags")
    }, n = function (e) {
        var t;
        return t = $(e).find("ul.suggestions"), t.children().size() === 1 ? t.hide() : t.show(), $(e).find("ul.ui-menu").hide()
    }
}.call(this),
function () {
    var e;
    e = "[data-behavior~=text_input_field]", $(e).live("focus", function (e) {
        var t;
        return t = $(this), t.addClass("focused")
    }), $(e).live("blur", function (e) {
        var t;
        return t = $(this), t.removeClass("focused")
    }), $(e).live("input:change blur", function (e) {
        var t, n;
        return t = $(this), n = $(e.target), n.val().trim() === "" ? t.addClass("blank") : t.removeClass("blank")
    })
}.call(this),
function () {
    $("form:not(.submitting) textarea[data-behavior~=submit_on_enter]").live("keypress", function (e) {
        if (e.keyCode === $.ui.keyCode.ENTER) return $(this).closest("form").addClass("submitting").submit(), e.preventDefault()
    }), $("form:not(.submitting) textarea[data-behavior~=submit_on_control_enter]").live("keydown", function (e) {
        if (e.keyCode === $.ui.keyCode.ENTER && (e.ctrlKey || e.metaKey)) return $(this).closest("form").addClass("submitting").submit(), e.preventDefault()
    })
}.call(this),
function () {
    bcx.timeConversion = {
        convertTimes: function () {
            var e, t, n, r;
            n = bcx.timeConversion.mappings, r = [];
            for (t in n) e = n[t], r.push($(t).each(function () {
                        var t, n, r;
                        return t = $(this), (r = t.data("date")) || (r = new Date(Date.parse(t.attr("datetime"))), t.data("date", r)), (n = bcx.timeConversion.formats[e](r)) ? t.show().text(n) : t.hide()
                    }));
            return r
        },
        mappings: {
            "time[data-time-ago]": "timeAgo",
            "time[data-days-ago]": "daysAgo",
            "time[data-compact]": "compact",
            "time[data-local-time]": "localTime",
            "time[data-local-date]": "localDate",
            "time[data-local-date-long]": "localDateLong",
            "time[data=weekday]": "weekday",
            "time[data=month]": "month",
            "time[data=short-month]": "shortMonth",
            "time[data=day]": "day",
            "time[data-local-time-with-timezone]": "localTimeWithTimezone"
        },
        formats: {
            localTime: function (e) {
                return bcx.timeConversion.utcToLocalTime(e)
            },
            localTimeWithTimezone: function (e) {
                return "" + bcx.timeConversion.utcToLocalTime(e) + " " + bcx.timeConversion.getLocalTimeZone(e)
            },
            localDate: function (e) {
                return bcx.timeConversion.utcToLocalDate(e)
            },
            localDateLong: function (e) {
                return bcx.timeConversion.utcToLocalDateLong(e)
            },
            timeAgo: function (e) {
                var t, n;
                return (t = bcx.timeConversion.timeElapsed(e)) ? "" + t + " ago" : (n = bcx.timeConversion.relativeDay(e)) ? "" + n + " at " + bcx.timeConversion.formatTime(e) : "on " + bcx.timeConversion.formats.compact(e)
            },
            daysAgo: function (e) {
                var t;
                if (t = bcx.timeConversion.relativeDay(e)) return t.charAt(0).toUpperCase() + t.substring(1)
            },
            compact: function (e) {
                return CalendarDate.today().equals(CalendarDate.parse(e)) ? bcx.timeConversion.formatTime(e) : bcx.timeConversion.formatDate(e)
            },
            weekday: function (e) {
                return CalendarDate.parse(e).getWeekdayName()
            },
            month: function (e) {
                return CalendarDate.parse(e).getMonthName()
            },
            shortMonth: function (e) {
                return CalendarDate.parse(e).getAbbreviatedMonthName()
            },
            day: function (e) {
                return CalendarDate.parse(e).day
            }
        },
        utcToLocalTime: function (e) {
            return bcx.timeConversion.formatTime(new Date(e))
        },
        utcToLocalDate: function (e) {
            return bcx.timeConversion.formatDate(new Date(e))
        },
        utcToLocalDateLong: function (e) {
            return bcx.timeConversion.formatDateLong(new Date(e))
        },
        getLocalTimeZone: function (e) {
            var t;
            return ((t = e.toString().match(/\((\w+)\)$/)) != null ? t[1] : void 0) || ""
        },
        timeElapsed: function (e) {
            var t, n, r, i;
            return r = (new Date).getTime() - e.getTime(), i = Math.round(r / 1e3), n = Math.round(i / 60), t = Math.round(n / 60), i < 10 ? "a second" : i < 45 ? "" + i + " seconds" : i < 90 ? "a minute" : n < 45 ? "" + n + " minutes" : n < 90 ? "an hour" : t < 24 ? "" + t + " hours" : null
        },
        relativeDay: function (e) {
            var t, n, r;
            return r = CalendarDate.today(), t = CalendarDate.parse(e), n = r.daysSince(t), n > 6 ? null : n === 0 ? "today" : n === 1 ? "yesterday" : t.getWeekdayName()
        },
        formatTime: function (e) {
            var t, n, r, i, s;
            return r = e.getHours(), n = r % 12, n === 0 && (n = 12), s = e.getMinutes(), i = s === 0 ? "" : s < 10 ? ":0" + s : ":" + s, t = r > 11 ? "pm" : "am", "" + n + i + t
        },
        formatDate: function (e) {
            var t, n, r, i;
            return n = CalendarDate.abbreviatedMonthNames[e.getMonth()], t = e.getDate(), i = e.getYear() + 1900, r = "" + n + " " + t, i < CalendarDate.today().year && (r += " " + i.toString().substr(2)), r
        },
        formatDateLong: function (e) {
            var t, n, r, i, s;
            return t = CalendarDate.parse(e), r = t.getMonthName(), i = t.getWeekdayName(), n = e.getDate(), s = e.getYear() + 1900, "" + i + ", " + r + " " + n + ", " + s
        }
    }, $(function () {
        return setInterval(bcx.timeConversion.convertTimes, 6e4)
    }), bcx.on("page:update", "convert time tags", bcx.timeConversion.convertTimes)
}.call(this),
function () {
    var e;
    e = function (e) {
        return function (t) {
            return e($data, $text, $entry)
        }
    }, $("[data-behavior~=time_entry]").live("keypress", function (e) {
        if (e.which === $.ui.keyCode.ENTER) return $(e.currentTarget).blur()
    }).live("blur", function (e) {
        var t, n, r, i, s;
        n = $(e.currentTarget), t = n.find("input[type=hidden]"), r = n.find("input[type=text]");
        if (r.val() === r.data("placeholder")) return t.val("");
        try {
            return s = r.val(), s.length ? (i = CalendarTime.parse(s), r.val(i.toFriendlyString()), t.val(i.toString())) : t.val("")
        } catch (o) {
            return r.val(""), t.val(""), r.addClass("shake"), r.onTransitionEnd(function () {
                return r.removeClass("shake")
            })
        }
    })
}.call(this),
function () {
    var e = function (e, t) {
        return function () {
            return e.apply(t, arguments)
        }
    };
    bcx.Toolbar = function () {
        function t(t) {
            this.scroll = e(this.scroll, this);
            var n;
            this.toolbar = t, this.document = this.toolbar.closest("[data-behavior~=wysiwyg_container]"), this.toolbarHeight = this.toolbar.height(), this.followAlways = this.document.hasBehavior("wysiwyg_follow_always"), this.followThreshold = (n = this.document.data("wysiwyg-follow-threshold")) != null ? n : 0
        }
        return t.prototype.toolbarOffset = 5, t.prototype.detached = !1, t.prototype.scroll = function () {
            var e, t, n, r;
            if (!this.toolbar.is(":visible")) return;
            n = this.document.offset().top - this.toolbarOffset, t = this.document.outerHeight(), r = $(window).scrollTop(), e = n + t + this.toolbarOffset - this.toolbarHeight;
            if (e > r && r > n) {
                if (!this.followAlways && (t <= this.followThreshold || r >= $(document).height() - $(window).height())) return;
                if (!this.detached) return this.detach()
            } else if (this.detached) return this.attach()
        }, t.prototype.detach = function () {
            var e, t, n;
            return t = $(document).height(), this.toolbar.hide(), e = $(document).height(), this.toolbar.show(), n = t - e, this.document.css({
                    paddingTop: n
                }), this.toolbar.addBehavior("wysiwyg_follower"), this.detached = !0
        }, t.prototype.attach = function () {
            return this.toolbar.removeBehavior("wysiwyg_follower"), this.document.css({
                    paddingTop: ""
                }), this.detached = !1
        }, t.toolbars = [], t.install = function () {
            return setTimeout(function () {
                return $("div[data-behavior~=wysiwyg_toolbar]").install("attaching toolbar", function (e) {
                    var n;
                    return n = new t(e), t.toolbars.push(n), $(window).bind("scroll.documentToolbar", n.scroll)
                })
            }, 10)
        }, t.uninstall = function () {
            var e, n, r, i;
            i = t.toolbars;
            for (n = 0, r = i.length; n < r; n++) e = i[n], $(window).unbind("scroll.documentToolbar", e.scroll);
            return t.toolbars.clear
        }, t
    }.call(this), bcx.on("page:update", "install the document toolbar positioning behavior", bcx.Toolbar.install), bcx.on("page:change", "uninstall toolbar following", bcx.Toolbar.uninstall)
}.call(this),
function () {
    $(window).bind("focus", function (e) {
        if (e.target === window) return window.isFocused = !0
    }), $(window).bind("blur", function (e) {
        if (e.target === window) return window.isFocused = !1
    }), window.isFocused = !0
}.call(this),
function () {
    var e, t, n, r = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        };
    wysihtml5.commands.pre = {
        exec: function (e, t) {
            return wysihtml5.commands.formatInline.exec(e, t, "pre")
        },
        state: function (e, t, n) {
            return wysihtml5.commands.formatInline.state(e, t, "pre")
        },
        value: function () {
            return null
        }
    }, e = function () {
        function e(e) {
            this.textarea = e, this.handleUnsupportedBroswers = r(this.handleUnsupportedBroswers, this), this.formatUnformattedContent = r(this.formatUnformattedContent, this), this.containsHtml = r(this.containsHtml, this), this.focusOnExpand = r(this.focusOnExpand, this), this.triggerChangeEvents = r(this.triggerChangeEvents, this), this.addIEClass = r(this.addIEClass, this), this.copyClasses = r(this.copyClasses, this), this.setupAutoResize = r(this.setupAutoResize, this), this.createEditor = r(this.createEditor, this), this.insertToolbar = r(this.insertToolbar, this), this.$textarea = $(e), wysihtml5.browser.supported() && (!$.browser.safari || !$.browser.mobile) ? (this.formatUnformattedContent(), this.editor = this.createEditor(), this.$iframe = $(this.editor.composer.iframe), this.setupAutoResize(), this.copyClasses(), this.addIEClass(), this.focusOnExpand(), this.triggerChangeEvents()) : this.handleUnsupportedBroswers()
        }
        return e.prototype.unsupportedMessage = "This message contains rich formatting, but your web browser only supports editing plain text. Some formatting may be lost.", e.prototype.config = {
            autoLink: !1,
            style: !0,
            bodyClassName: "wysihtml5-supported",
            composerClassName: "wysiwyg_editor",
            stylesheets: ["https://d3dma7a8zw52bz.cloudfront.net/assets/application-417c4f9074157e12c1dfb6ede37ce3e3.css"],
            parserRules: {
                tags: {
                    strong: {},
                    b: {},
                    em: {},
                    i: {},
                    u: {},
                    br: {},
                    p: {},
                    div: {},
                    span: {},
                    ul: {},
                    ol: {},
                    li: {},
                    a: {
                        check_attributes: {
                            href: "url"
                        }
                    },
                    img: {
                        check_attributes: {
                            src: "url",
                            "class": "alt",
                            alt: "alt"
                        }
                    },
                    pre: {},
                    blockquote: {}
                }
            },
            indentMatcher: /.*/
        }, e.prototype.insertToolbar = function () {
            var e;
            return e = $(JST["templates/wysiwyg_toolbar"]({})), this.$textarea.before(e), e[0]
        }, e.prototype.createEditor = function () {
            var e, t = this;
            return e = new wysihtml5.Editor(this.textarea, $.extend(this.config, {
                        toolbar: this.insertToolbar()
                    })), e.observe("focus:composer", function () {
                    return t.$textarea.trigger("wysiwyg:focus")
                }), e.observe("blur:composer", function () {
                    return t.$textarea.trigger("wysiwyg:blur")
                }), this.$textarea.live("focus", function () {
                    return e.composer.focus()
                }), e.observe("paste", function (e) {
                    return t.pasted = !0
                }), e
        }, e.prototype.setupAutoResize = function () {
            var e = this;
            if (!this.$textarea.hasBehavior("autoresize")) return;
            return this.editor.observe("load", function () {
                return e.$iframe.addBehavior("autoresize"), e.$iframe.data("autoresize-limit", e.$textarea.data("autoresize-limit")), e.$iframe.data("rows", e.$textarea.attr("rows")), e.$iframe.autoResize()
            })
        }, e.prototype.copyClasses = function () {
            var e = this;
            return this.editor.observe("load", function () {
                var t;
                e.$iframe.contents().find("html").addClass(e.config.composerClassName);
                if (t = e.$textarea.data("wysiwyg-class")) return e.$iframe.contents().find("body").addClass(t)
            })
        }, e.prototype.addIEClass = function () {
            var e = this;
            return this.editor.observe("load", function () {
                if ($.browser.msie) return e.$iframe.contents().find("body").addClass("ie")
            })
        }, e.prototype.triggerChangeEvents = function () {
            var e, t = this;
            return e = this.$iframe.contents().find("body"), _.each(["keyup", "keydown"], function (n) {
                return e.bind(n, function (e) {
                    return t.$textarea.trigger($.Event(n, {
                                keyCode: e.keyCode,
                                ctrlKey: e.ctrlKey,
                                metaKey: e.metaKey
                            }))
                })
            }), _.each(["newword:composer", "change"], function (e) {
                return t.editor.observe(e, function () {
                    return t.$textarea.trigger("change")
                })
            })
        }, e.prototype.focusOnExpand = function () {
            var e = this;
            return this.$iframe.closest("[data-behavior~=expandable]").bind("expand", function () {
                if (e.$textarea.attr("autofocus")) return e.$iframe.contents().find("body").focus()
            })
        }, e.prototype.containsHtml = function () {
            return this.$textarea.val() && this.$textarea.val().match(/<\w+>/i)
        }, e.prototype.formatUnformattedContent = function () {
            if (!this.containsHtml()) return this.$textarea.val(this.$textarea.val().replace(/\n/g, "<br>")).trigger("change")
        }, e.prototype.handleUnsupportedBroswers = function () {
            var e = this;
            this.$textarea.removeBehavior("wysiwyg"), this.containsHtml() && (this.$textarea.attr("disabled", !0).css({
                        opacity: .3
                    }), setTimeout(function () {
                        return confirm(e.unsupportedMessage) ? $.post("/content/unformat", {
                                content: e.$textarea.val()
                            }, function (t) {
                                return e.$textarea.attr("disabled", !1).css({
                                        opacity: 1
                                    }).val(t).trigger("change").get(0).focus()
                            }) : e.$textarea.closest("form").find("a[data-role~=cancel]").click()
                    }, 100));
            if (this.$textarea.hasBehavior("autoresize")) return this.$textarea.autoResize()
        }, e
    }(), n = "textarea[data-behavior~=wysiwyg]", bcx.on("page:update", "install wysiwyg behavior", function () {
        return t($("" + n + ":visible"))
    }), $("[data-behavior~=expandable]:has(" + n + ")").live("expand", function () {
        return t($(this).find("" + n + ":visible"))
    }), t = function (t) {
        return t.install("behavior for wysiwyg editor", function (t) {
            return t.each(function () {
                return new e(this)
            })
        })
    }
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.Account = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.url = function () {
            return "/account"
        }, n.prototype.canCreateProjects = function () {
            return this.get("can_create_projects")
        }, n
    }(Backbone.Model)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.collections.Accounts = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.model = bcx.models.Account, n
    }(Backbone.Collection), bcx.accounts = new bcx.collections.Accounts
}.call(this),
function () {
    bcx.bootstrap = function (e) {
        var t, n, r, i;
        r = e.personId, n = e.identityId, t = e.hasClassicAccount, bcx.currentIdentityId = n, bcx.currentPerson = bcx.people.get(r), bcx.currentAccount = bcx.currentPerson.getAccount(), bcx.currentPerson.set("has_classic_account", t);
        if (window.localStorage != null) try {
            i = window.localStorage.getItem("currentIdentityId"), i != null && parseInt(i) !== n && window.localStorage.clear(), window.localStorage.setItem("currentIdentityId", n)
        } catch (s) {}
        return this.trigger("identity:set")
    }
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.Bucket = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.getColor = function () {
            var e;
            return (e = this.get("color")) != null ? e : _(bcx.bucketColors).rand()
        }, n.prototype.isUsed = function () {
            return this.get("topics_count") + this.get("attachments_count") > 0
        }, n.prototype.isActive = function () {
            return this.get("status_name") === "active"
        }, n
    }(bcx.Model), bcx.getBucket = function (e, t) {
        var n, r;
        return t == null && (r = e.split(":"), e = r[0], t = r[1]), n = e === "Project" ? bcx.projects : bcx.calendars, n.get(t)
    }
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.BucketAccess = function (e) {
        function r() {
            return r.__super__.constructor.apply(this, arguments)
        }
        var n;
        return t(r, e), r.modelName = "BucketAccess", r.prototype.people = function () {
            var e;
            return e = this.get("accesses"), n(e)
        }, r.prototype.subscribers = function () {
            var e;
            return e = this.get("accesses").filter(function (e) {
                return e.wants_notifications === !0
            }), n(e)
        }, r.prototype.unsubscribers = function () {
            var e;
            return e = this.get("accesses").filter(function (e) {
                return e.wants_notifications === !1
            }), n(e)
        }, n = function (e) {
            var t;
            return _(function () {
                var n, r, i;
                i = [];
                for (n = 0, r = e.length; n < r; n++) t = e[n], i.push(bcx.peopleAndGroups.get("person_" + t.person_id));
                return i
            }()).sortBy(function (e) {
                return bcx.peopleAndGroups.comparator(e)
            })
        }, r
    }(bcx.Model)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.collections.BucketAccesses = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.model = bcx.models.BucketAccess, n
    }(Backbone.Collection), bcx.bucketAccesses = new bcx.collections.BucketAccesses
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.BucketOperation = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.url = function () {
            return this.isNew() ? this.urlRoot : "" + this.urlRoot + "/" + this.id
        }, n.prototype.completionUrl = function () {
            return "" + this.url() + "/completed"
        }, n.prototype.isStillRunning = function () {
            var e;
            return (e = this.get("status")) === "pending" || e === "processing"
        }, n.prototype.isSuccessful = function () {
            return this.get("status") === "completed"
        }, n
    }(Backbone.Model)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.Calendar = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.modelName = "Calendar", n.prototype.urlRoot = function () {
            return "/" + bcx.currentAccountSlug + "/calendars"
        }, n.prototype.url = function () {
            return this.isNew() ? this.urlRoot() : "" + this.urlRoot() + "/" + this.get("param")
        }, n.prototype.isUsed = function () {
            return n.__super__.isUsed.apply(this, arguments) || this.get("calendar_events_count") > 0
        }, n.prototype.peopleIds = function () {
            var e, t, n, r, i;
            r = this.people(), i = [];
            for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.id);
            return i
        }, n.prototype.peopleNames = function () {
            var e;
            return function () {
                var t, n, r, i;
                r = this.people(), i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.get("name"));
                return i
            }.call(this).join(", ")
        }, n.prototype.bucketAccess = function () {
            return bcx.bucketAccesses.get("Calendar:" + this.id)
        }, n.prototype.people = function () {
            var e, t;
            return (e = (t = this.bucketAccess()) != null ? t.people() : void 0) != null ? e : []
        }, n.prototype.subscribers = function () {
            var e, t;
            return (e = (t = this.bucketAccess()) != null ? t.subscribers() : void 0) != null ? e : []
        }, n.prototype.unsubscribers = function () {
            var e, t;
            return (e = (t = this.bucketAccess()) != null ? t.unsubscribers() : void 0) != null ? e : []
        }, n.prototype.accesses = function () {
            var e, t;
            return (e = (t = this.bucketAccess()) != null ? t.get("accesses") : void 0) != null ? e : []
        }, n.prototype.calendarEvents = function () {
            var e = this;
            return bcx.calendarEvents.filter(function (t) {
                return t.isSelectedBucket(e, "Calendar")
            })
        }, n.prototype.isTemplate = function () {
            return !1
        }, n.prototype.isDraft = function () {
            return !1
        }, n
    }(bcx.models.Bucket)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.collections.Calendars = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.model = bcx.models.Calendar, n.prototype.haveNotBeenShared = function () {
            return this.all(function (e) {
                var t;
                return t = e.bucketAccess(), t != null && t.get("accesses").length < 2
            })
        }, n.prototype.comparator = function (e) {
            var t;
            return (t = e.get("name")) != null ? t.trim().toLowerCase() : void 0
        }, n
    }(Backbone.Collection), bcx.calendars = new bcx.collections.Calendars
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.CalendarEvent = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.modelName = "CalendarEvent", n.prototype.isAllDay = function () {
            return this.get("all_day")
        }, n.prototype.isTimed = function () {
            return !this.isAllDay()
        }, n.prototype.isSpanned = function () {
            return this.get("all_day") && this.get("ends_at") && this.get("starts_at") !== this.get("ends_at")
        }, n.prototype.doesOccurOn = function (e) {
            var t;
            return this.getStartDate().date <= (t = e.date) && t <= this.getEndDate().date
        }, n.prototype.doesOccurBetween = function (e, t) {
            var n, r;
            return n = this.getStartDate().date, r = this.getEndDate().date, e = e.date, t = t.date, n === e || (n > e ? n <= t : e <= r)
        }, n.prototype.doesOccurOnOrAfter = function (e) {
            var t;
            return t = e.date, this.getStartDate().date >= t || this.getEndDate().date >= t
        }, n.prototype.getStartDate = n.memoize(function () {
            return this.calendarDate("starts_at")
        }), n.prototype.getEndDate = n.memoize(function () {
            var e;
            return (e = this.calendarDate("ends_at")) != null ? e : this.getStartDate()
        }), n.prototype.getSpannedEndDate = n.memoize(function () {
            return this.isSpanned() ? this.calendarDate("ends_at") : this.getStartDate()
        }), n.prototype.getDates = n.memoize(function () {
            var e, t;
            t = [e = this.getStartDate()];
            while (e.isnt(this.getEndDate())) t.push(e = e.next());
            return t
        }), n.prototype.getStartTime = n.memoize(function () {
            if (this.isTimed()) return this.calendarTime("starts_at")
        }), n.prototype.getStartsAt = n.memoize(function () {
            return this.isTimed() ? this.date("starts_at") : this.calendarDate("starts_at").date
        }), n.prototype.getCreatedAt = n.memoize(function () {
            var e;
            return (e = this.date("created_at")) != null ? e : new Date
        }), n.prototype.relativeDateLabelFor = function (e) {
            var t, n;
            return this.isNew() ? "Week 1, " + CalendarDate.weekdayNames[1] : (n = this.get("" + e + "_due_week"), t = this.get("" + e + "_due_wday"), "Week " + (n + 1) + ", " + CalendarDate.weekdayNames[t])
        }, n.prototype.setStartDate = function (e) {
            var t, n, r;
            if (this.isSpanned()) return t = this.getEndDate(), n = t.daysSince(this.getStartDate()), this.set("starts_at", e.toString()), this.set("ends_at", e.next(n).toString());
            if (this.isAllDay()) return r = e.toString(), this.set("starts_at", r), this.set("ends_at", r);
            if (this.isTimed()) return r = (new CalendarDateTime(e, this.getStartTime())).toString(), this.set("starts_at", r), this.set("ends_at", r)
        }, n.prototype.urlRoot = function () {
            return "" + this.getBucketPath() + "/calendar_events"
        }, n.prototype.getBucketPath = function () {
            return this.get("bucket_type") ? "/" + bcx.currentAccountSlug + "/" + this.get("bucket_type").toLowerCase() + "s/" + this.bucket().get("param") : ""
        }, n.prototype.showPath = function () {
            var e;
            if (this.id != null) return e = "" + this.urlRoot() + "/" + this.get("param"), this.isRecurrence() ? "" + e + "/recurrences/" + this.get("recurrence_number") : e
        }, n.prototype.isSelectedBucket = function (e, t) {
            return this.get("bucket_type") === t && this.get("bucket_id") === e.id
        }, n.prototype.summary = function () {
            return this.get("summary")
        }, n.prototype.bucket = n.memoize(function () {
            var e;
            return e = this.get("bucket_type") === "Calendar" ? bcx.calendars : bcx.projects, e.get(this.get("bucket_id"))
        }), n.prototype.subscriberIds = function () {
            var e, t, n, r, i, s;
            i = (r = this.get("subscribers")) != null ? r : [], s = [];
            for (t = 0, n = i.length; t < n; t++) e = i[t], s.push("person_" + e);
            return s
        }, n.prototype.subscribers = function () {
            var e;
            return bcx.peopleAndGroups.length ? _(function () {
                var t, n, r, i;
                r = this.subscriberIds(), i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(bcx.peopleAndGroups.get(e));
                return i
            }.call(this)).compact() : []
        }, n.prototype.participantsList = function () {
            return _(this.subscribers()).map(function (e) {
                return e.get("name")
            }).sort().join(", ").replace(/,\s([^,]+)$/, " and $1")
        }, n.prototype.formattedTime = function () {
            return bcx.timeConversion.formatTime(new Date(this.date("starts_at")))
        }, n.prototype.getColor = function () {
            var e, t;
            return (e = (t = this.bucket()) != null ? t.getColor() : void 0) != null ? e : bcx.bucketColors[0]
        }, n.prototype.getBucketType = function () {
            return this.get("bucket_type")
        }, n.prototype.getBucketName = function () {
            var e;
            return (e = this.bucket()) != null ? e.get("name") : void 0
        }, n.prototype.compareTo = function (e) {
            var t, n, r, i;
            return i = this.getStartsAt(), n = e.getStartsAt(), i < n ? -1 : i > n ? 1 : (r = this.getCreatedAt(), t = e.getCreatedAt(), r < t ? -1 : r > t ? 1 : 0)
        }, n.prototype.isRecurring = function () {
            return this.has("freq")
        }, n.prototype.isRecurringInfinitely = function () {
            return this.isRecurring() && !this.has("count") && !this.has("until_date")
        }, n.prototype.isRecurrence = function () {
            return this.has("master_id")
        }, n.prototype.isRepeating = function () {
            return this.isRecurrence() || this.isRecurring()
        }, n.prototype.isLastRecurrence = function () {
            if (this.isRecurrence() && !this.master().isRecurringInfinitely()) return this.master().has("count") ? this.master().get("count") === this.get("recurrence_number") + 1 : this.fromStartDate ? this.master().getUntilDate().is(this.fromStartDate) : this.master().getUntilDate().is(this.getStartDate())
        }, n.prototype.needsRecurrencePrompt = function () {
            return this.isRepeating() && this.fromStartDate
        }, n.prototype.recurrences = function () {
            var e = this;
            return this.collection.select(function (t) {
                return t.get("master_id") === e.get("id")
            })
        }, n.prototype.master = n.memoize(function () {
            return this.collection.get(this.get("master_id"))
        }), n.prototype.getUntilDate = n.memoize(function () {
            if (this.isRecurring() && this.has("until_date")) return this.calendarDate("until_date")
        }), n.prototype.getFreq = function () {
            return this.isRecurrence() ? this.master().get("freq") : this.get("freq")
        }, n.prototype.cloneAsRecurrence = function (e) {
            var t, n, r, i, s, o, u = this;
            n = this.clone(), n.set({
                    id: "" + this.get("id") + "+" + e,
                    master_id: this.get("id"),
                    recurrence_number: e,
                    comments_count: ((s = this.get("comments_count_by_recurrence")) != null ? s[e] : void 0) || 0
                }), n.setStartDate(function () {
                    switch (u.get("freq")) {
                    case "daily":
                        return u.getStartDate().next(e);
                    case "weekly":
                        return u.getStartDate().next(e * 7);
                    case "monthly":
                        return u.getStartDate().nextMonth(e, u.getStartDate().day);
                    case "yearly":
                        return u.getStartDate().nextMonth(e * 12, u.getStartDate().day)
                    }
                }()), o = ["comments_count_by_recurrence", "freq", "count", "until_date"];
            for (r = 0, i = o.length; r < i; r++) t = o[r], n.unset(t);
            return n
        }, n.prototype.addRecurrencesInRange = function (e, t) {
            var n, r, i;
            n = 0, i = [];
            for (;;) {
                n++;
                if (!_.contains(this.get("excluded_recurrences"), n)) {
                    r = this.cloneAsRecurrence(n);
                    if (r.getStartDate().date > t.date || this.get("count") && this.get("count") <= n || this.getUntilDate() && this.getUntilDate() < r.getStartDate()) break;
                    r.doesOccurBetween(e, t) ? i.push(this.collection.addOrUpdate(r)) : i.push(void 0)
                } else i.push(void 0)
            }
            return i
        }, n.prototype.addTemplateRecurrences = function (e) {
            var t, n, r, i, s, o, u;
            o = this.get("start_due_week"), s = this.get("start_due_wday"), n = this.get("end_due_week"), t = this.get("end_due_wday"), r = 0, u = [];
            for (;;) {
                r++;
                if (!_.contains(this.get("excluded_recurrences"), r)) {
                    switch (this.get("freq")) {
                    case "daily":
                        s < 6 ? s++ : (o++, s = 0), t < 6 ? t++ : (n++, t = 0);
                        break;
                    case "weekly":
                        o++, n++;
                        break;
                    case "monthly":
                        o += 4, n += 4;
                        break;
                    case "yearly":
                        o += 12, n += 12
                    }
                    i = this.cloneAsRecurrence(r), i.set({
                            start_due_wday: s,
                            start_due_week: o,
                            end_due_wday: t,
                            end_due_week: n
                        });
                    if (this.get("count") && this.get("count") <= r || o > e) break;
                    u.push(this.collection.addOrUpdate(i))
                } else u.push(void 0)
            }
            return u
        }, n.prototype.excludeRecurrence = function (e) {
            var t;
            return t = e.get("recurrence_number"), e.isLastRecurrence() ? t === 1 ? this.set({
                    freq: null
                }) : this.set({
                    count: t,
                    until_date: null
                }) : (this.has("excluded_recurrences") ? this.get("excluded_recurrences").push(t) : this.set("excluded_recurrences", [t]), this.set("excluded_recurrence", t))
        }, n.prototype.excludeRecurrenceAndFutureRecurrences = function (e) {
            var t;
            return t = e.get("recurrence_number"), t === 1 ? (this.set({
                        count: 1
                    }), this.set({
                        freq: null
                    })) : this.set({
                    count: t,
                    until_date: null
                })
        }, n.prototype.createExcluded = function (e) {
            var t = this;
            return this.master().excludeRecurrence(this), this.master().save({}, {
                    success: function () {
                        return t.unset("id"), t.save({}, {
                                success: function () {
                                    return t.set("id", bcx.lastCalendarEventId), bcx.lastCalendarEventId = null, t.get("comments_count") ? t.moveRecurrenceComments(master, e) : typeof e == "function" ? e() : void 0
                                }
                            })
                    }
                })
        }, n.prototype.createRecurring = function (e) {
            var t, n = this;
            return this.master().get("count") ? this.set("count", this.master().get("count") - this.get("recurrence_number")) : this.set("until_date", this.master().get("until_date")), this.set("freq", this.master().get("freq")), this.master().excludeRecurrenceAndFutureRecurrences(this), t = this.master(), t.save({}, {
                    success: function () {
                        return n.unset("id"), n.save({}, {
                                success: function () {
                                    return n.set("id", bcx.lastCalendarEventId), bcx.lastCalendarEventId = null, _(_(t.get("comments_count_by_recurrence")).keys()).detect(function (e) {
                                        return e >= n.get("recurrence_number")
                                    }) ? n.moveRecurrenceComments(t, e) : typeof e == "function" ? e() : void 0
                                }
                            })
                    }
                })
        }, n.prototype.moveRecurrenceComments = function (e, t) {
            var n, r = this;
            return n = new bcx.MoveProcessor(new bcx.MoveOperation({
                        recurrence: this.get("recurrence_number"),
                        move_future_recurrences: this.isRecurring(),
                        source_resource_type: "CalendarEvent",
                        source_resource_id: e.get("id"),
                        destination_resource_type: "CalendarEvent",
                        destination_resource_id: this.get("id"),
                        destination_bucket_type: this.getBucketType(),
                        destination_bucket_id: this.bucket().get("id")
                    })), n.on("processor:success", function () {
                    return typeof t == "function" ? t() : void 0
                }), n.run()
        }, n.prototype.exclude = function (e) {
            var t = this;
            return this.master().excludeRecurrence(this), this.master().save({}, {
                    success: function () {
                        return typeof e == "function" ? e() : void 0
                    }
                })
        }, n.prototype.excludeWithFutureRecurrences = function (e) {
            var t = this;
            return this.master().excludeRecurrenceAndFutureRecurrences(this), this.master().save({}, {
                    success: function () {
                        return typeof e == "function" ? e() : void 0
                    }
                })
        }, n
    }(bcx.Model)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.collections.CalendarEvents = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.model = bcx.models.CalendarEvent, n.prototype.initialRecurrenceDays = 42, n.prototype.initialTemplateRecurrenceWeeks = 7, n.prototype.initialize = function () {
            return this.bind("add", this.addInitialRecurrences), this.bind("change", this.replaceRecurrences), this.bind("remove", this.removeRecurrences)
        }, n.prototype.comparator = function (e, t) {
            return e.compareTo(t)
        }, n.prototype.getCalendarEventsForRange = function (e, t) {
            return _(this.models).select(function (n) {
                return n.doesOccurBetween(e, t)
            })
        }, n.prototype.getCalendarEventsForDate = function (e) {
            return _(this.models).select(function (t) {
                return t.doesOccurOn(e)
            })
        }, n.prototype.getCalendarEventsOccurringOnOrAfter = function (e) {
            return _(this.models).select(function (t) {
                return t.doesOccurOnOrAfter(e)
            })
        }, n.prototype.addInitialRecurrences = function (e) {
            if (e.isRecurring()) return e.bucket().isTemplate() ? e.addTemplateRecurrences(this.initialTemplateRecurrenceWeeks) : e.addRecurrencesInRange(e.getStartDate(), e.getEndDate().next(this.initialRecurrenceDays))
        }, n.prototype.addRecurrencesInRange = function (e, t) {
            var n = this;
            return _(this.select(function (e) {
                        return e.isRecurring()
                    })).each(function (n) {
                    return n.addRecurrencesInRange(e, t)
                })
        }, n.prototype.replaceRecurrences = function (e) {
            var t, n, r, i;
            if (!e.getStartDate() || !e.getEndDate()) return;
            (r = e.recurrences()).length && this.remove(r);
            if (e.isRecurring()) return e.bucket().isTemplate() ? e.addTemplateRecurrences(this.initialTemplateRecurrenceWeeks) : (i = e.getStartDate(), t = e.getEndDate().next(this.initialRecurrenceDays), r.length && (n = _(r).last().getEndDate(), n.date > t.date && (t = n)), e.addRecurrencesInRange(i, t))
        }, n.prototype.removeRecurrences = function (e) {
            if (e.isRecurring()) return this.remove(e.recurrences())
        }, n
    }(Backbone.Collection), bcx.calendarEvents = new bcx.collections.CalendarEvents
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.Project = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.modelName = "Project", n.prototype.defaults = {
            topics_count: 0,
            todolists_count: 0,
            documents_count: 0,
            attachments_count: 0,
            forwards_count: 0,
            calendar_events_count: 0
        }, n.prototype.star = function () {
            return this.starred = !0
        }, n.prototype.unstar = function () {
            return this.starred = !1
        }, n.prototype.url = function () {
            return "/" + bcx.currentAccountSlug + "/projects/" + (this.get("param") || this.id)
        }, n.prototype.accessesUrl = function () {
            return "" + this.url() + "/accesses"
        }, n.prototype.isActive = function () {
            return this.get("status_name") === "active"
        }, n.prototype.isDraft = function () {
            return this.get("status_name") === "draft"
        }, n.prototype.isTemplate = function () {
            return this.get("status_name") === "template"
        }, n.prototype.isUsed = function () {
            return n.__super__.isUsed.apply(this, arguments) || this.get("todolists_count") + this.get("documents_count") + this.get("forwards_count") > 0
        }, n.prototype.hasDueTodos = function () {
            var e = this;
            return this.get("remaining_todos_count") > 0 && bcx.todos.any(function (t) {
                return t.bucket() === e && t.get("due_on")
            })
        }, n.prototype.lastActiveDate = function () {
            var e;
            if (e = this.get("updated_at")) return e.match(/(.*?)T/)[1]
        }, n.prototype.urlForLatestActivity = function () {
            return "" + this.url() + "/events/" + this.lastActiveDate()
        }, n.prototype.urlForTrashOperation = function () {
            return "" + this.url() + "/trash_operation"
        }, n.prototype.urlForPublish = function () {
            return "" + this.url() + "/publish"
        }, n.prototype.urlForTrash = function () {
            return "" + this.url() + "/trash"
        }, n.prototype.bucketAccess = function () {
            return bcx.bucketAccesses.get("Project:" + this.id)
        }, n.prototype.people = function () {
            var e, t;
            return (e = (t = this.bucketAccess()) != null ? t.people() : void 0) != null ? e : []
        }, n.prototype.subscribers = function () {
            var e, t;
            return (e = (t = this.bucketAccess()) != null ? t.subscribers() : void 0) != null ? e : []
        }, n.prototype.unsubscribers = function () {
            var e, t;
            return (e = (t = this.bucketAccess()) != null ? t.unsubscribers() : void 0) != null ? e : []
        }, n.prototype.getTagNames = function () {
            var e;
            return _.sortBy((e = this.get("tag_names")) != null ? e : [], function (e) {
                return e.trim().toLowerCase()
            })
        }, n.prototype.toJSON = function () {
            return {
                name: this.get("name"),
                description: this.get("description"),
                color: this.getColor()
            }
        }, n
    }(bcx.models.Bucket)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.collections.Projects = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.model = bcx.models.Project, n.prototype.comparator = function (e) {
            var t;
            return (t = e.get("name")) != null ? t.trim().toLowerCase() : void 0
        }, n.prototype.update = function (e) {
            var t, n, r, i, s, o, u, a, f, l;
            r = {};
            for (u = 0, f = e.length; u < f; u++) t = e[u], n = t.id, r[n] = !0, (o = this.get(n)) ? o.set(t) : this.add(t);
            s = this.reject(function (e) {
                return r[e.id]
            });
            for (a = 0, l = s.length; a < l; a++) i = s[a], this.remove(i);
            return this.sort({
                    silent: !0
                })
        }, n.prototype.active = function () {
            return this.filter(function (e) {
                return e.isActive()
            })
        }, n.prototype.draft = function () {
            return this.filter(function (e) {
                return e.isDraft()
            })
        }, n.prototype.activeOrDraft = function () {
            return this.filter(function (e) {
                return e.isActive() || e.isDraft()
            })
        }, n.prototype.activeOrDraftWithCalendarItems = function () {
            return this.filter(function (e) {
                return (e.isActive() || e.isDraft()) && (e.get("calendar_events_count") > 0 || e.hasDueTodos())
            })
        }, n.prototype.remove = function (e) {
            var t;
            return t = bcx.calendarEvents.select(function (t) {
                return t.bucket() === e
            }), bcx.calendarEvents.remove(t), n.__super__.remove.apply(this, arguments)
        }, n
    }(Backbone.Collection), bcx.projects = new bcx.collections.Projects
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.Person = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.url = function () {
            var e;
            return "/people/" + ((e = this.get("param")) != null ? e : this.id)
        }, n.prototype.avatarUrl = function (e) {
            var t;
            return e == null && (e = "avatar"), (t = this.get("avatar_urls")) != null ? t[e] : void 0
        }, n.prototype.getAccount = function () {
            return bcx.accounts.get(this.get("account_id"))
        }, n.prototype.isAccountManager = function () {
            return this.get("account_owner")
        }, n.prototype.isAdmin = function () {
            return this.get("admin")
        }, n.prototype.canCreateProjects = function () {
            return this.get("can_create_projects")
        }, n.prototype.getStartOfWeek = function () {
            return this.get("start_of_week")
        }, n.prototype.setStartOfWeek = function (e) {
            return this.set("start_of_week", e)
        }, n
    }(Backbone.Model)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.collections.People = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.model = bcx.models.Person, n
    }(Backbone.Collection), bcx.people = new bcx.collections.People
}.call(this),
function () {
    var e, t, n = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, r = {}.hasOwnProperty,
        i = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var n in t) r.call(t, n) && (e[n] = t[n]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        }, s = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    bcx.models.CalendarDisplay = function (e) {
        function r() {
            return this.removeEventsFor = n(this.removeEventsFor, this), this.updateBlankSlate = n(this.updateBlankSlate, this), this.startOfWeekChanged = n(this.startOfWeekChanged, this), r.__super__.constructor.apply(this, arguments)
        }
        return i(r, e), r.prototype.defaults = function () {
            return {
                cursor: CalendarDate.today().beginningOfWeek(),
                rows: 6,
                hiddenBucketData: "{}",
                zoomedIn: !1,
                zoomedInBucketKey: null,
                calendarListVisibility: !0,
                todosSidebarVisibility: !1
            }
        }, r.prototype.initialize = function () {
            var e = this;
            return this.calendarEvents = bcx.calendarEvents, this.calendars = bcx.calendars, this.projects = bcx.projects, this.todos = bcx.todos, this.calendars.bind("all", this.updateBlankSlate), this.projects.bind("all", this.updateBlankSlate), this.todos.bind("all", this.updateBlankSlate), this.updateBlankSlate(), this.calendarEventsLoader = new bcx.CalendarEventsLoader(this), this.calendars.bind("remove", this.removeEventsFor), bcx.currentPerson.bind("change:start_of_week", this.startOfWeekChanged), this.bind("change", function () {
                if (!e.saving && !e.fetching) return e.save()
            }), this.fetch()
        }, r.prototype.save = function (e) {
            e == null && (e = {});
            try {
                return this.saving = !0, this.set(e), bcx.storage.set("calendarDisplay", this)
            } catch (t) {} finally {
                this.saving = !1
            }
        }, r.prototype.fetch = function () {
            try {
                return this.fetching = !0, this.set(bcx.storage.get("calendarDisplay"))
            } catch (e) {} finally {
                this.fetching = !1
            }
        }, r.prototype.startOfWeekChanged = function (e, t) {
            var n;
            n = e.previous("start_of_week");
            if (n === 0 && t === 1) return this.set({
                    cursor: this.cursor(1)
                });
            if (n === 1 && t === 0) return this.set({
                    cursor: this.cursor(-1)
                })
        }, r.prototype.afterContentChanges = function (e, t) {
            return t == null && (t = !0), t && (e = this.debounce(e)), this.calendarEvents.bind("all", e), this.calendars.bind("all", e), this.projects.bind("all", e), this.todos.bind("all", e)
        }, r.prototype.afterDisplayChanges = function (e, t) {
            return t == null && (t = !0), t && (e = this.debounce(e)), this.bind("all", e)
        }, r.prototype.afterChanges = function (e) {
            return e = this.debounce(e), this.afterContentChanges(e, !1), this.afterDisplayChanges(e, !1)
        }, r.prototype.debounce = function (e) {
            var t = this;
            return _.debounceConditionally(e, 1, function () {
                return !t.synchronous
            })
        }, r.prototype.cursor = function (e) {
            return e == null && (e = 0), this.get("cursor").next(e)
        }, r.prototype.markCurrentDateRangeLoaded = function () {
            return this.calendarEventsLoader.markDateRangesLoaded([
                    [this.getFirstDate(), this.getLastDate()]
                ])
        }, r.prototype.loadCurrentDateRange = function (e) {
            return this.calendarEventsLoader.fetch(e)
        }, r.prototype.getWeeks = function () {
            var e, t, n, r, i, s;
            e = this.cursor(-1), s = [];
            for (n = r = 0, i = this.get("rows"); 0 <= i ? r < i : r > i; n = 0 <= i ? ++r : --r) s.push(function () {
                var n, r;
                r = [];
                for (t = n = 0; n < 7; t = ++n) r.push(e = e.next());
                return r
            }());
            return s
        }, r.prototype.getFirstWeek = function () {
            return this.getWeeks()[0]
        }, r.prototype.getFirstDate = function () {
            return this.cursor()
        }, r.prototype.getFirstSaturday = function () {
            return this.cursor(6)
        }, r.prototype.getLastDate = function () {
            return this.cursor(-1 + 7 * this.get("rows"))
        }, r.prototype.getSignificantDate = function () {
            return this.getFirstSaturday().beginningOfMonth()
        }, r.prototype.firstWeekContainsToday = function () {
            var e;
            return e = CalendarDate.today().toString(), s.call(_.invoke(this.getFirstWeek(), "toString"), e) >= 0
        }, r.prototype.getBeginningOfMonth = function () {
            return this.firstWeekContainsToday() ? CalendarDate.today().beginningOfMonth() : this.getFirstSaturday().beginningOfMonth()
        }, r.prototype.getCalendarEvents = function () {
            var e;
            return e = this, this.calendarEvents.select(function (t) {
                return e.getBucketVisibility(t.bucket())
            })
        }, r.prototype.getCalendarEventsFor = function (e, t) {
            return t != null ? this.getCalendarEventsForRange(e, t) : this.getCalendarEventsForDate(e)
        }, r.prototype.getCalendarEventsForRange = function (e, t) {
            return _(this.getCalendarEvents()).select(function (n) {
                return n.doesOccurBetween(e, t)
            })
        }, r.prototype.getCalendarEventsForDate = function (e) {
            return _(this.getCalendarEvents()).select(function (t) {
                return t.doesOccurOn(e)
            })
        }, r.prototype.getSpannedCalendarEventsFor = function (e, t) {
            return _(this.getCalendarEventsFor(e, t)).select(function (e) {
                return e.isSpanned()
            })
        }, r.prototype.getAllDayCalendarEventsFor = function (e, t) {
            return _(this.getCalendarEventsFor(e, t)).select(function (e) {
                return e.isAllDay() && !e.isSpanned()
            })
        }, r.prototype.getTimedCalendarEventsFor = function (e, t) {
            return _(this.getCalendarEventsFor(e, t)).select(function (e) {
                return e.isTimed()
            })
        }, r.prototype.getTodos = function () {
            var e = this;
            return this.todos.select(function (t) {
                return e.getBucketVisibility(t.bucket())
            })
        }, r.prototype.getTodosFor = function (e) {
            return _(this.getTodos()).select(function (t) {
                return t.doesOccurOn(e)
            })
        }, r.prototype.getSpannedLayoutFor = function (e, n) {
            var r;
            return r = this.getSpannedCalendarEventsFor(e, n), t["for"](e, n, r)
        }, r.prototype.getHiddenBucketData = r.memoize(function () {
            return JSON.parse(this.get("hiddenBucketData"))
        }), r.prototype.setHiddenBucketData = function (e) {
            return this.set("hiddenBucketData", JSON.stringify(e))
        }, r.prototype.getBucketVisibilityKey = function (e) {
            return "" + e.constructor.modelName + ":" + e.id
        }, r.prototype.getBucketVisibility = function (e) {
            return this.get("zoomedIn") ? this.getBucketVisibilityKey(e) === this.get("zoomedInBucketKey") : !(this.getBucketVisibilityKey(e) in this.getHiddenBucketData()) && !e.isTemplate()
        }, r.prototype.setBucketVisibility = function (e, t) {
            var n, r;
            return n = this.getHiddenBucketData(), r = this.getBucketVisibilityKey(e), t ? delete n[r] : n[r] = !0, this.setHiddenBucketData(n)
        }, r.prototype.toggleBucketVisibility = function (e) {
            return this.setBucketVisibility(e, !this.getBucketVisibility(e))
        }, r.prototype.getCalendarListVisibility = function () {
            return this.get("calendarListVisibility")
        }, r.prototype.setCalendarListVisibility = function (e) {
            return this.set("calendarListVisibility", e)
        }, r.prototype.zoomIn = function (e) {
            return this.set("zoomedInBucketKey", this.getBucketVisibilityKey(e)), this.set("zoomedIn", !0)
        }, r.prototype.zoomOut = function () {
            if (this.isZoomedIn()) return this.set("zoomedInBucketKey", null), this.set("zoomedIn", !1)
        }, r.prototype.zoomedInBucket = function () {
            if (this.isZoomedIn()) return bcx.getBucket(this.get("zoomedInBucketKey"))
        }, r.prototype.isZoomedIn = function () {
            return this.get("zoomedIn")
        }, r.prototype.toggleCalendarListVisibility = function () {
            return this.setCalendarListVisibility(!this.getCalendarListVisibility())
        }, r.prototype.getTodosSidebarVisibility = function () {
            return this.get("todosSidebarVisibility")
        }, r.prototype.setTodosSidebarVisibility = function (e) {
            return this.set("todosSidebarVisibility", e)
        }, r.prototype.toggleTodosSidebarVisibility = function () {
            return this.setTodosSidebarVisibility(!this.getTodosSidebarVisibility())
        }, r.prototype.getTitle = function () {
            var e;
            return this.firstWeekContainsToday() ? "Next 6 weeks" : (e = this.getFirstSaturday(), "" + e.getMonthName() + " " + e.year)
        }, r.prototype.getZoomedInBucketTitle = function () {
            var e, t;
            if (e = this.zoomedInBucket()) return t = e.get("name"), e.constructor.modelName === "Project" ? "Project: " + t : t
        }, r.prototype.lockNavigation = function () {
            return this.navigationLocked = !0
        }, r.prototype.unlockNavigation = function () {
            return this.navigationLocked = !1
        }, r.prototype.navigateToMonth = function (e) {
            return this.navigationLocked ? !1 : this.set({
                    cursor: e.beginningOfMonth().beginningOfWeek()
                })
        }, r.prototype.navigateBackward = function () {
            return this.navigateToMonth(this.cursor(-1))
        }, r.prototype.navigateForward = function () {
            return this.navigateToMonth(this.getLastDate())
        }, r.prototype.navigateToToday = function () {
            return this.navigationLocked ? !1 : this.set({
                    cursor: this.defaults().cursor
                })
        }, r.prototype.isShowingCalendarEvent = function (e) {
            return e.doesOccurBetween(this.getFirstDate(), this.getLastDate())
        }, r.prototype.navigateToCalendarEvent = function (e) {
            if (!this.isShowingCalendarEvent(e)) return this.navigateToMonth(e.getStartDate())
        }, r.prototype.updateBlankSlate = function () {
            var e;
            e = this.blankSlate, this.blankSlate = this.calendars.length === 0 && this.projects.active().length === 0;
            if (this.blankSlate !== e) return this.trigger("change:blankSlate")
        }, r.prototype.reset = function () {
            return this.set(this.defaults()), this.trigger("reset")
        }, r.prototype.removeEventsFor = function (e) {
            return this.calendarEvents.remove(e.calendarEvents())
        }, r.prototype.toJSON = function () {
            return {
                hiddenBucketData: this.get("hiddenBucketData"),
                calendarListVisibility: this.get("calendarListVisibility"),
                todosSidebarVisibility: this.get("todosSidebarVisibility")
            }
        }, r
    }(bcx.Model), bcx.on("identity:set", function () {
        return bcx.calendarDisplay = new bcx.models.CalendarDisplay
    }), t = function () {
        function t(e, t) {
            this.startDate = e, this.endDate = t, this.size = 1 + this.endDate.daysSince(this.startDate), this.rows = []
        }
        return t["for"] = function (e, t, n) {
            var r, i, s, o;
            i = new this(e, t);
            for (s = 0, o = n.length; s < o; s++) r = n[s], i.add(r);
            return i
        }, t.prototype.add = function (t) {
            var n, r, i, s, o;
            r = this.getSlotsFor(t);
            if (!r.length) return !1;
            o = this.rows;
            for (i = 0, s = o.length; i < s; i++) {
                n = o[i];
                if (n.occupy(r, t)) return t
            }
            return n = new e(this.size), n.occupy(r, t), this.rows.push(n), t
        }, t.prototype.getSlotHeight = function (e) {
            var t, n, r, i, s, o;
            t = 0, o = this.rows;
            for (n = i = 0, s = o.length; i < s; n = ++i) r = o[n], r.isFreeDuring([e]) || (t = n + 1);
            return t
        }, t.prototype.getSlotsFor = function (e) {
            var t, n, r, i, s;
            r = [], t = this.startDate;
            for (n = i = 0, s = this.size; 0 <= s ? i < s : i > s; n = 0 <= s ? ++i : --i) e.doesOccurOn(t) && r.push(n), t = t.next();
            return r
        }, t
    }(), e = function () {
        function e(e) {
            this.occurrences = Array(e)
        }
        return e.prototype.isFreeDuring = function (e) {
            var t, n, r;
            for (n = 0, r = e.length; n < r; n++) {
                t = e[n];
                if (this.occurrences[t]) return !1
            }
            return !0
        }, e.prototype.occupy = function (e, t) {
            var n, r, i, s;
            if (this.isFreeDuring(e)) {
                n = {
                    calendarEvent: t,
                    width: e.length
                };
                for (i = 0, s = e.length; i < s; i++) r = e[i], this.occurrences[r] = n, n = !0;
                return !0
            }
        }, e.prototype.getOccurrences = function () {
            var e, t, n, r, i, s;
            t = [], s = this.occurrences;
            for (n = r = 0, i = s.length; r < i; n = ++r) e = s[n], e && e !== !0 && t.push(_.extend({
                        slot: n
                    }, e));
            return t
        }, e
    }()
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.CopyOperation = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.urlRoot = "/copy_operations", n
    }(bcx.BucketOperation)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.MoveOperation = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.urlRoot = "/move_operations", n
    }(bcx.BucketOperation)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.ProjectTemplate = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.modelName = "ProjectTemplate", n
    }(bcx.models.Project)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.collections.ProjectTemplates = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.model = bcx.models.ProjectTemplate, n
    }(bcx.collections.Projects), bcx.projectTemplates = new bcx.collections.ProjectTemplates
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.Todo = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.modelName = "Todo", n.prototype.isAllDay = function () {
            return !0
        }, n.prototype.isTimed = function () {
            return !1
        }, n.prototype.urlRoot = function () {
            return "" + this.getBucketPath() + "/todos"
        }, n.prototype.getBucketPath = function () {
            return "/" + bcx.currentAccountSlug + "/projects/" + this.bucket().get("param")
        }, n.prototype.showPath = function () {
            return "" + this.urlRoot() + "/" + this.get("param")
        }, n.prototype.togglePath = function () {
            return "" + this.showPath() + "/toggle"
        }, n.prototype.bucket = n.memoize(function () {
            return bcx.projects.get(this.get("project_id"))
        }), n.prototype.doesOccurOn = function (e) {
            var t;
            return ((t = this.getDueDate()) != null ? t.value : void 0) === e.value
        }, n.prototype.doesOccurOnOrAfter = function (e) {
            var t;
            return ((t = this.getDueDate()) != null ? t.date : void 0) >= e.date
        }, n.prototype.doesOccurBetween = function (e, t) {
            var n, r;
            return e.date <= (n = (r = this.getDueDate()) != null ? r.date : void 0) && n <= t.date
        }, n.prototype.getDueDate = n.memoize(function () {
            return this.calendarDate("due_on")
        }), n.prototype.setDueDate = function (e) {
            return this.set("due_on", e.toString())
        }, n.prototype.getStartDate = function () {
            return this.getDueDate()
        }, n.prototype.setStartDate = function (e) {
            return this.setDueDate(e)
        }, n.prototype.getDates = n.memoize(function () {
            return [this.getDueDate()]
        }), n.prototype.summary = function () {
            return this.get("content")
        }, n.prototype.assignee = n.memoize(function () {
            if (this.get("assignee_id")) return bcx.peopleAndGroups.get("" + this.get("assignee_type").toLowerCase() + "_" + this.get("assignee_id"))
        }), n.prototype.todolist = n.memoize(function () {
            return bcx.todolists.get(this.get("todolist_id"))
        }), n.prototype.toJSON = function () {
            var e;
            return e = n.__super__.toJSON.apply(this, arguments), delete e.due_at, e
        }, n
    }(bcx.Model)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.models.Todolist = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.modelName = "Todolist", n.prototype.bucket = n.memoize(function () {
            return bcx.projects.get(this.get("project_id"))
        }), n.prototype.showPath = function () {
            return "" + this.bucket().url() + "/todolists/" + this.get("param")
        }, n
    }(bcx.Model)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.collections.Todolists = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.model = bcx.models.Todolist, n
    }(Backbone.Collection), bcx.todolists = new bcx.collections.Todolists
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.collections.Todos = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.model = bcx.models.Todo, n.prototype.comparator = function (e) {
            var t, n;
            return "" + ((t = e.bucket()) != null ? t.get("name") : void 0) + "-" + ((n = e.todolist()) != null ? n.get("position") : void 0) + "-" + e.get("position")
        }, n.prototype.overdueTodos = function () {
            var e;
            return e = CalendarDate.today().date, this.select(function (t) {
                var n;
                return ((n = t.getDueDate()) != null ? n.date : void 0) < e
            })
        }, n.prototype.upcomingTodos = function () {
            var e;
            return e = CalendarDate.today().date, this.select(function (t) {
                var n;
                return ((n = t.getDueDate()) != null ? n.date : void 0) >= e
            })
        }, n.prototype.getTodosForRange = function (e, t) {
            return this.select(function (n) {
                return n.doesOccurBetween(e, t)
            })
        }, n.prototype.getTodosForDate = function (e) {
            return this.select(function (t) {
                var n;
                return ((n = t.getDueDate()) != null ? n.value : void 0) === e.value
            })
        }, n
    }(Backbone.Collection), bcx.todos = new bcx.collections.Todos
}.call(this),
function () {
    var e;
    e = function () {
        var e;
        if (!bcx.currentProject) return;
        return e = $("div.sheet.project"), bcx.currentProject.isUsed() ? e.removeClass("blank_slate") : e.addClass("blank_slate")
    }, bcx.on("page:change", 'apply "blank_slate" class to current project sheet', e), bcx.projects.bind("change", function (t) {
        if (t === bcx.currentProject) return e()
    }), $("[data-behavior~=bounce_nav]").live("click", function (e) {
        if (!$(this).hasClass("stars")) return $("[data-behavior~=bounce]").bounce()
    })
}.call(this),
function () {
    $("section.projects.cards article.card").live("click", function (e) {
        var t;
        t = $(e.target);
        if (t.is("article.card")) return t.find("a").click()
    })
}.call(this),
function () {
    bcx.on("page:update", "make project events visible", function () {
        return $("[data-behavior~=project_events] .event_container").show()
    })
}.call(this),
function () {
    var e;
    $("[data-behavior~=edit_project_header]").live("expand", function (e) {
        var t;
        return t = $(this).find("form"), t.find(".submit").slideDown(100), t.find("textarea").keydown()
    }).live("collapse", function () {
        return $(this).find("form").resetForm(), $(this).find(".submit").hide()
    }), e = function () {
        var e, t;
        e = $(this).closest("[data-behavior~=expandable]");
        if (!e.find(".expanded_content").length) return;
        return e.expand(), $(this).closest("h1.field").length ? t = e.find(".expanded_content h1.field textarea") : t = e.find(".expanded_content div.description.field textarea"), t.focus().select()
    }, $("[data-behavior~=edit_project_header] [data-behavior~=editable_field_prompt]").live("click", e).live("tap", e).live("mouseover", function () {
        var e;
        e = $(this).closest("[data-behavior~=expandable]");
        if (!e.find("div.expanded_content").length) return;
        return $(this).delay(300).animate({
                borderColor: "#b3b3b3"
            }, 100), $(this).animate({
                width: 600
            }, 100)
    }).live("mouseout", function () {
        return $(this).stop(!0, !0).css({
                width: "auto",
                borderColor: "transparent"
            })
    })
}.call(this),
function () {
    var e, t, n;
    n = "div.project > div.sheet_body > section[data-collection-name]", t = function (e) {
        var t, n;
        return t = e.data("collection-name"), (((n = bcx.currentProject) != null ? n.get("" + t + "_count") : void 0) === 0 || e.hasClass("empty")) && e.find("article.new.expanded").length < 1
    }, e = function () {
        return $(n).each(function () {
            var e;
            return e = $(this), t(e) ? e.hide() : e.show()
        })
    }, bcx.on("page:change", "hide or show empty project sections", function () {
        return e()
    }), $("" + n + " > article.new[data-behavior~=expandable]").live("beforeexpand", function () {
        var e;
        return e = $(this).closest("section"), e.show()
    }).live("expand", function () {
        return $("div.sheet.project").removeClass("blank_slate")
    }).live("collapse", function () {
        var e;
        e = $(this).closest("section"), t(e) && e.hide();
        if (!bcx.currentProject.isUsed() && $("" + n + " > article.new[data-behavior~=expandable].expanded").length < 1) return $("div.sheet.project").addClass("blank_slate")
    }), bcx.projects.bind("change", function (t) {
        if (t === bcx.currentProject) return e()
    })
}.call(this),
function () {
    $("div.project_settings_links a").live("click", function () {
        return $(this).closest("div").addClass("busy")
    }), $("section.project_settings").find("a[data-behavior=cancel]").live("click", function (e) {
        return $("#project_settings").slideUp(300, function () {
            return $("div.project_settings_links").removeClass("busy").fadeIn("fast")
        }), e.preventDefault()
    })
}.call(this),
function () {
    var e;
    e = function () {
        return $.ajax({
                url: bcx.currentProject.urlForTrashOperation(),
                statusCode: {
                    200: function () {
                        return Stacker.workspace.visit(window.location.pathname, {
                                replaceSheet: !0
                            })
                    },
                    202: function () {
                        return setTimeout(e, 3e3)
                    }
                },
                error: function () {
                    return setTimeout(e, 3e3)
                }
            })
    }, bcx.on("page:change", "request project trash operation status", function () {
        if ($("[data-behavior~=trash_operation]").length > 0) return e()
    })
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/add_tagging"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="expanded_content balloon top_left_side">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n\n  <input type="text" name="tagging[tag_name]" value="" placeholder="Type to add a new label">\n  <div class="choose_tags"></div>\n\n  <div class="submit">\n    <input type="submit" value="Add label" class="action_button green"> or\n    <a href="#" data-behavior="cancel">I\'m done</a>\n  </div>\n</div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/adhoc_subscriber"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="autocomplete_people">\n  <label class="focused placeholder">Type a name or email address...</label>\n  <label class="blurred placeholder">Add another person...</label>\n  <input type="text" data-behavior="input_change_emitter" data-role="human_input" value="'), t.push(r(this.model.get("name"))), t.push('">\n  <input type="hidden" data-role="email_address_input" name="'), t.push(r(this.subscribable)), t.push('[new_subscriber_emails][]" value="'), t.push(r(this.model.get("email_address"))), t.push('">\n  <input type="hidden" data-role="person_id_input" name="'), t.push(r(this.subscribable)), t.push('[subscribers][]" value="'), t.push(r(this.model.get("person_id"))), t.push('">\n  <div class="suggestions" data-role="suggestions_view">\n    <!-- templates/autocomplete_people_suggestions -->  \n  </div>\n</div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/autocomplete_people_suggestions"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u;
                t.push('<ol class="suggestions">\n  ');
                if (((s = this.results.enabledOptions) != null ? s.length : void 0) || ((o = this.results.disabledOptions) != null ? o.length : void 0)) {
                    t.push("\n    ");
                    if (this.results.enabledOptions.length) {
                        t.push("\n      "), u = this.results.enabledOptions;
                        for (n = 0, i = u.length; n < i; n++) e = u[n], t.push('\n        <li class="'), e === this.selected && t.push(r("selected")), t.push(' enabled option suggestion" data-behavior="select_suggestion" data-suggestion-id="'), t.push(r(e.id)), t.push('">\n          '), e.isSubgroup() ? (t.push('\n            <strong class="name">'), t.push(r(e.get("name"))), t.push("</strong> <span>Group at "), t.push(r(e.group().get("name"))), t.push(" with "), t.push(r(this.pluralize(e.get("member_ids"), "person", "people"))), t.push("</span>\n          ")) : e.isGroup() ? (t.push('\n            <strong class="name">'), t.push(r(e.get("name"))), t.push("</strong> <span>Company with "), t.push(r(this.pluralize(e.get("member_ids"), "person", "people"))), t.push("</span>\n          ")) : (t.push('\n            <span class="name">'), t.push(r(e.get("name"))), t.push('</span> <span class="email">'), t.push(r(e.get("email_address"))), t.push("</span>\n          ")), t.push("\n        </li>\n      ");
                        t.push("\n    ")
                    } else t.push('\n      <li class="disabled hint suggestion">\n        '), this.results.disabledOptions[0].isGroup() ? (t.push('\n          Everyone from <span class="name">'), t.push(r(this.results.disabledOptions[0].get("name"))), t.push("</span> is already on the project.\n        ")) : (t.push('\n          <span class="name">'), t.push(r(this.results.disabledOptions[0].get("name"))), t.push("</span> is already on the project.\n        ")), t.push("\n      </li>\n    ");
                    t.push("\n  ")
                } else t.push("\n    "), this.showInvalidMessage ? t.push('\n      <li class="invalid hint suggestion">\n        This email address isnt formatted properly.\n      </li>\n    ') : (t.push("\n      "), this.showUnknownMessage && t.push('\n        <li class="unknown hint suggestion">\n          This person isnt in the system yet. Please enter their email address instead.\n        </li>\n      '), t.push("\n    ")), t.push("\n  ");
                t.push("\n</ol>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/bucket_subscribers"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w;
                i = bcx.peopleAndGroups.get("person_" + bcx.currentPerson.id), t.push("\n"), u = _(_(this.selectedSubscribers).map(function (e) {
                            return e.get("person_id")
                        })), t.push("\n\n"), e = (m = (g = this.bucket) != null ? g.subscribers() : void 0) != null ? m : [], t.push("\n"), n = (y = (b = this.bucket) != null ? b.unsubscribers() : void 0) != null ? y : [], t.push("\n\n"), l = _(e).without(i), t.push("\n"), c = _(n).without(i), t.push("\n\n"), _(e).include(i) && l.unshift(i), t.push("\n"), _(n).include(i) && c.unshift(i), t.push("\n\n"), s = c.length && !l.length, t.push("\n\n"), l.length && t.push('\n  <div class="select_all_or_none">\n    <a href="#" class="decorated select_everyone" data-behavior="subscriber_select_all">Select all</a> |\n    <a href="#" class="decorated select_everyone" data-behavior="subscriber_select_none">Select none</a>\n  </div>\n'), t.push("\n\n"), w = _(_(l).compact()).inGroups(2);
                for (h = 0, d = w.length; h < d; h++) {
                    f = w[h], t.push('\n  <div class="column">\n    ');
                    for (p = 0, v = f.length; p < v; p++) a = f[p], t.push("\n      "), o = a.get("person_id"), t.push('\n      <label data-subscriber-id="'), t.push(r(o)), t.push('" title="'), t.push(r(a === i ? "Me (" + a.get("name") + ")" : a.get("name"))), t.push('">\n        <input name="message[subscribers][]" type="checkbox" value="'), t.push(r(o)), t.push('" '), u.include(o) && t.push(r('checked="checked"')), t.push(">\n        "), t.push(r(a === i ? "Me (" + a.get("name") + ")" : a.get("name"))), t.push("\n      </label>\n    ");
                    t.push("\n  </div>\n")
                }
                t.push("\n\n"), c.length && (t.push('\n  <div class="unsubscribers">\n    <h6>\n      '), s ? t.push("\n        Everyone on this project has\n      ") : c.length > 1 ? t.push("\n        These people have\n      ") : t.push("\n        This person has\n      "), t.push("\n      turned off email reminders:</h6>\n    <p>"), t.push(r(_(c).map(function (e) {
                                    return e.get("name")
                                }).join(", ").replace(/,\s([^,]+)$/, " and $1"))), t.push("</p>\n  </div>\n")), t.push("\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_accesses"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                bcx.peopleAndGroups.loadedWithAccesses || this.calendar.isNew() ? (t.push('\n  <section>\n    <div class="slider" data-behavior="slider">\n      <ul class="slides">\n        <li class="slide" data-slide-index=\'0\'>\n          '), this.calendar.isNew() || this.calendar.people().length < 2 ? (t.push('\n            <figure>\n              <img src="'), t.push(r(bcx.currentPerson.avatarUrl())), t.push('" class="avatar" alt="Avatar" />\n              <h4>You\'re the only one who can see this calendar.</h4>\n            </figure>\n\n            <div class="subscribable">\n              <div class="invitees">\n                <h4>Invite more people</h4>\n                <p>Type names or email addresses:</p>\n\n                <section class="invite">\n                  <div class="invitees" data-behavior="calendar_invitees" data-disabled-people-ids="" data-disabled-group-ids=""></div>\n                </section>\n              </div>\n            </div>\n          ')) : (t.push("\n            <h4>Who can see this calendar?</h4>\n            <p>"), t.push(r(this.calendar.peopleNames())), t.push(' (<a href="#" data-behavior="slide" data-direction="forward" class="decorated">change</a>)</p>\n          ')), t.push("\n        </li>\n        <li class=\"slide\" data-slide-index='1'>\n          "), this.calendar.isNew() && this.calendar.people().length > 1 || (t.push('\n            <div class="subscribable change_accesses">\n              <div class="invitees">\n                <h4>Invite more people</h4>\n                <p>Type names or email addresses:</p>\n\n                <section class="invite">\n                  <div class="invitees" data-behavior="calendar_invitees" data-disabled-people-ids="" data-disabled-group-ids="" data-selected-people-ids=\''), t.push(r(JSON.stringify(this.calendar.peopleIds()))), t.push("' data-calendar-id='"), t.push(r(this.calendar.id)), t.push("'></div>\n                </section>\n              </div>\n            </div>\n          ")), t.push("\n        </li>\n      </ul>\n    </div>\n  </section>\n")) : t.push('\n  <section class="loading">\n    <!-- loading -->\n  </section>\n'), t.push("\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_blank_slate"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<article class="blank_slate">\n  <div class="blank_slate_arrow"></div>\n  <div class="blank_slate_body can_create_calendars">\n    <h1>Get started by adding your first calendar!</h1>\n    <p>Calendars make it easy to keep everyone on track. Create different calendars for vacations, staff meetings, and more. Any project you create will also have its own calendar.</p>\n  </div>\n</article>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_display"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="right">\n  <div class="sheet">\n    '), t.push(r(this.renderTemplate("calendar_blank_slate"))), t.push('\n\n    <div data-autoview-name="calendar_navigation"></div>\n    <div data-autoview-name="calendar_grid"></div>\n  </div>\n</div>\n\n<div class="left">\n  <aside class="calendar_list">\n    <div data-autoview-name="calendar_list"></div>\n    <div data-autoview-name="calendar_editor"></div>\n    <div data-autoview-name="project_editor"></div>\n  </aside>\n</div>\n\n<div data-autoview-name="calendar_item_editor"></div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_editor"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u;
                t.push('<div class="balloon top_right_side '), t.push(r(this.calendar.isNew() ? "new" : void 0)), t.push('">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n\n  <form>\n    <header>\n      <fieldset class="calendar_settings">\n        <h3>\n          <textarea name="name" data-behavior="autoresize placeholder submit_on_enter" rows="1" placeholder="Name this calendar">'), t.push(r(this.calendar.get("name"))), t.push('</textarea>\n        </h3>\n\n        <p>Choose a color</p>\n        <div class="swatches">\n          '), e = this.calendar.getColor(), t.push("\n          "), u = bcx.bucketColors;
                for (i = s = 0, o = u.length; s < o; i = ++s) n = u[i], t.push('\n            <input type="radio" id="'), t.push(r(this.id)), t.push("_swatch_"), t.push(r(i)), t.push('" name="color" value="'), t.push(r(n)), t.push('"'), e === n && t.push(r(" checked")), t.push('>\n            <label class="swatch" for="'), t.push(r(this.id)), t.push("_swatch_"), t.push(r(i)), t.push('" style="background-color: #'), t.push(r(n)), t.push('"></label>\n          ');
                t.push('\n        </div>\n      </fieldset>\n    </header>\n\n    <div data-behavior="calendar_accesses"></div>\n\n    <footer>\n      <p class="submit">\n        '), this.calendar.isNew() ? t.push('\n          <input type="submit" value="Add this calendar" class="action_button">\n          or <a href="#" class="cancel" data-behavior="cancel">Cancel</a>\n        ') : t.push('\n          <input type="submit" value="Save changes", class="action_button">\n          or <a href="#" class="cancel" data-behavior="cancel">Close</a>\n          <a href="#" class="image delete" data-behavior="delete"></a>\n        '), t.push("\n      </p>\n    </footer>\n  </form>\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_event"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="event" data-id="'), t.push(r(this.calendarEvent.id)), t.push('">\n  <span class="event" style="color: #'), t.push(r(this.calendarEvent.getColor())), t.push('"\n    title="'), this.calendarEvent.isNew() || t.push(r("" + this.calendarEvent.getBucketType() + ": " + this.calendarEvent.getBucketName())), t.push('">\n    &bull;&nbsp;<span class="title">'), t.push(r(this.emojify(this.calendarEvent.get("summary")))), t.push("</span>\n    "), this.calendarEvent.isTimed() && (t.push('\n      <span class="time">'), t.push(r(this.calendarEvent.getStartTime().toFriendlyString())), t.push("</span>\n    ")), t.push("\n  </span>\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e;
                t.push('<form class="calendar_event_editor_form '), this.calendarEvent.isSpanned() && t.push(r("spanned")), t.push('" data-skip_busy>\n  <div class="expandable" data-behavior="expandable recurrence_prompt">\n    <div class="collapsed_content">\n      <header>\n        '), t.push(JST["templates/calendar_event_editor/name_fields"](this)), t.push('\n      </header>\n      <section>\n        <div class="slider" data-behavior="slider">\n          <ul class="slides">\n            <li class="slide" data-slide-index=\'0\'>\n              '), t.push(JST["templates/calendar_event_editor/bucket_fields"](this)), t.push("\n              "), t.push(JST["templates/calendar_event_editor/date_fields"](this)), t.push("\n              "), t.push(JST["templates/calendar_event_editor/recurrence_fields"](this)), t.push("\n              "), t.push(JST["templates/calendar_event_editor/subscriber_fields"](this)), t.push("\n              "), this.calendarEvent.isNew() || (t.push('\n                <div class="discuss">\n                  '), (e = this.calendarEvent.get("comments_count")) ? (t.push('\n                    <a href="'), t.push(r(this.calendarEvent.showPath())), t.push('" data-default-stack="true"><span class="pill comments">'), t.push(r(e)), t.push(" "), t.push(r(e === 1 ? "comment" : "comments")), t.push("</span></a>\n                  ")) : (t.push('\n                    <p><a href="'), t.push(r(this.calendarEvent.showPath())), t.push('" class="decorated" data-default-stack="true">Discuss this event...</a></p>\n                  ')), t.push("\n                </div>\n              ")), t.push('\n            </li>\n            <li class="slide" data-slide-index=\'1\'>\n              <div class="invitees">\n                <h4>Tell people about this event</h4>\n                <p>\n                  We\'ll send an email reminder now and\n                  <span class="event_type_conditioned timed">30 minutes before</span>\n                  <span class="event_type_conditioned all_day">at 7am the day of</span>\n                  this event.\n                </p>\n\n                <div class="subscribers" data-role="bucket_subscribers">\n                  '), t.push(JST["templates/bucket_subscribers"]({
                            bucket: this.currentBucket,
                            selectedSubscribers: this.getSelectedSubscribers()
                        })), t.push('\n                </div>\n              </div>\n              <p style="margin:20px 0 0 0;font-size:12px;"><a href="#" data-behavior="slide" data-direction="backward" class="decorated done_editing">&larr; I\'m done editing this list</a></p>\n            </li>\n          </ul>\n        </div>\n      </section>\n      <footer>\n        <div data-behavior="calendar_alert" data-succeeded-text="Emails sent!" data-failed-text="Error saving event! Please try again."></div>\n          <p class="submit">\n            '), this.calendarEvent.isNew() ? t.push('\n              <input type="submit" value="Add this event" class="action_button green">\n              or <a href="#" class="cancel" data-role="cancel" data-behavior="cancel">Cancel</a>\n            ') : t.push('\n              <input type="submit" value="Save changes" class="action_button green">\n              or <a href="#" class="cancel" data-role="cancel" data-behavior="cancel">Close</a>\n              <a href="#" class="image delete" data-behavior="delete"></a>\n            '), t.push('\n          </p>\n        </div>\n      </footer>\n    <div class="expanded_content" data-role="expanded_recurrence_prompt">\n      <!-- templates/calendar_event_editor/recurrence_prompt -->\n    </div>\n  </div>\n</form>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/bucket_fields"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f = this;
                t.push('<fieldset class="event_calendar" data-role="bucket_fields">\n  ');
                if (this.bucketId != null) t.push('\n    <input type="hidden" name="bucket" value="'), t.push(r(this.bucketType)), t.push(":"), t.push(r(this.bucketId)), t.push('">\n  ');
                else {
                    t.push("\n    "), s = this.display.zoomedInBucket(), t.push("\n\n    ");
                    if (this.calendarEvent.isNew() && s) t.push('\n      <input type="hidden" name="bucket" value="'), t.push(r(s.constructor.modelName)), t.push(":"), t.push(r(s.id)), t.push('">\n      '), t.push(r("" + s.constructor.modelName + ": " + s.get("name"))), t.push("\n    ");
                    else {
                        t.push("\n      "), i = this.calendarEvent.isNew() ? (a = this.display.zoomedInBucket()) != null ? a : this.lastUsedBucket : this.calendarEvent.bucket(), t.push('\n\n      <table data-role="bucket_container">\n        <tr>\n          <td class="label">\n            <label>Calendar:</label>\n          </td>\n          <td>\n            <select name="bucket" data-behavior=\'bucket_selector\' '), bcx.peopleAndGroups.loadedWithAccesses || t.push(r("disabled")), t.push('>\n              <optgroup label="Calendars">\n                '), bcx.calendars.each(function (e) {
                            return t.push('\n                  <option value="Calendar:'), t.push(r(e.id)), t.push('" '), i === e && t.push(r("selected='selected'")), t.push(">"), t.push(r(e.get("name"))), t.push("</option>\n                ")
                        }), t.push("\n              </optgroup>\n\n              "), n = bcx.projects.activeOrDraft(), t.push("\n              ");
                        if (n.length) {
                            t.push('\n                <optgroup label="Projects">\n                  ');
                            for (o = 0, u = n.length; o < u; o++) e = n[o], t.push('\n                    <option value="Project:'), t.push(r(e.id)), t.push('" '), i === e && t.push(r("selected='selected'")), t.push(">"), t.push(r(e.get("name"))), e.isDraft() && t.push(r(" - unpublished")), t.push("</option>\n                  ");
                            t.push("\n                </optgroup>\n              ")
                        }
                        t.push("\n            </select>\n          </td>\n        </tr>\n      </table>\n    ")
                    }
                    t.push("\n  ")
                }
                t.push("\n</fieldset>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/date_fields"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<fieldset class="event_date">\n  <div class="start_date">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="label">\n          <label>Starts:</label>\n        </td>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="starts_at_date" value="'), t.push(r(this.calendarEvent.getStartDate())), t.push('">\n          <input type="text" class="date" readonly tabindex="-1">\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class="end_date">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="label">\n          <label>Ends:</label>\n        </td>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="ends_at_date" value="'), t.push(r(this.calendarEvent.getSpannedEndDate())), t.push('">\n          <input type="text" class="date" readonly tabindex="-1">\n        </td>\n      </tr>\n    </table>\n  </div>\n</fieldset>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/name_fields"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e;
                t.push('<fieldset class="event_name">\n  <table border="0" cellspacing="0" cellpadding="0">\n    <tr>\n      <td>\n        <strong>\n          <textarea name="summary" data-behavior="autoresize placeholder submit_on_enter dirty_tracking" rows="1" placeholder="Name the event">'), t.push(r(this.calendarEvent.get("summary"))), t.push("</textarea>\n        </strong>\n      </td>\n    </tr>\n  </table>\n</fieldset>\n"), this.isEditorForTemplate() || (t.push('\n  <fieldset class="event_time">\n    <table>\n      <tr>\n        <td class="time" data-behavior="time_entry">\n          <input type="hidden" name="starts_at_time" value="'), t.push(r(this.calendarEvent.getStartTime())), t.push('">\n          <input type="text" data-behavior="placeholder dirty_tracking" value="'), t.push(r((e = this.calendarEvent.getStartTime()) != null ? e.toFriendlyString() : void 0)), t.push('" placeholder="At what time? (9am, 1pm, etc.)">\n        </td>\n      </tr>\n    </table>\n  </fieldset>\n')), t.push('\n<fieldset class="event_note">\n  <table>\n    <tr>\n      <td class="description">\n        <textarea name="description" data-behavior="autoresize placeholder dirty_tracking" rows="1" placeholder="Add an optional note">'), t.push(r(this.calendarEvent.get("description"))), t.push("</textarea>\n      </td>\n    </tr>\n  </table>\n</fieldset>\n\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/recurrence_fields"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u;
                t.push('<fieldset class="event_recurrence">\n  <table>\n    <tr>\n      <td class="label">\n        <label>Repeats'), t.push(r(this.calendarEvent.isRecurrence() ? ":" : "?")), t.push("</label>\n      </td>\n      <td>\n        ");
                if (this.calendarEvent.isRecurrence()) t.push("\n          "), t.push(r(this.recurrenceDescription())), t.push("\n        ");
                else {
                    t.push('\n          <select name="freq">\n            '), o = {
                        No: "",
                        "Every day": "daily",
                        "Every week": "weekly",
                        "Every month": "monthly",
                        "Every year": "yearly"
                    };
                    for (n in o) i = o[n], t.push('\n              <option value="'), t.push(r(i)), t.push('" '), this.calendarEvent.get("freq") === i && t.push(r("selected")), t.push(">"), t.push(r(n)), t.push("</option>\n            ");
                    t.push('\n          </select>\n\n          <div class="recurrence_end" style="'), this.calendarEvent.isRecurring() || t.push(r("display:none")), t.push('">\n            <ul>\n              <li>\n                <label>\n                  <input type="radio" name="event_recurrence_end" value="forever" '), (!this.calendarEvent.isRecurring() || this.calendarEvent.isRecurringInfinitely()) && t.push(r("checked")), t.push('>\n                  <span class="wrapper">Forever</span>\n                </label>\n              </li>\n              <li>\n                <input type="radio" id="event_recurrence_end" name="event_recurrence_end" value="count" '), !this.calendarEvent.isNew() && this.calendarEvent.get("count") && t.push(r("checked")), t.push('>\n                <span class="wrapper">\n                  For\n                  <select name="count">\n                    ');
                    for (e = s = 2; s <= 30; e = ++s) t.push('\n                      <option value="'), t.push(r(e)), t.push('" '), e === this.calendarEvent.get("count") && t.push(r("selected")), t.push(">"), t.push(r(e)), t.push("</option>\n                    ");
                    t.push('\n                  </select>\n                  <label for="event_recurrence_end" data-role="freqtext">'), t.push(r(this.freqText(this.calendarEvent.getFreq()))), t.push("</label>\n                </span>\n              </li>\n              "), this.isEditorForTemplate() || (t.push('\n                <li>\n                  <label>\n                    <input type="radio" name="event_recurrence_end" value="until" '), !this.calendarEvent.isNew() && this.calendarEvent.get("until_date") && t.push(r("checked")), t.push('>\n                    <span class="wrapper" data-behavior="date_entry">Until\n                      <input type="hidden" name="until_date" value="'), t.push(r(this.calendarEvent.get("until_date") || ((u = this.calendarEvent.getSpannedEndDate()) != null ? u.next() : void 0))), t.push('">\n                      <input type="text" class="date" readonly>\n                    </span>\n                  </label>\n                </li>\n              ')), t.push("\n            </ul>\n          </div>\n        ")
                }
                t.push("\n      </td>\n    </tr>\n  </table>\n</fieldset>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/recurrence_prompt"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="recurrence_prompt" data-role="recurrence_prompt">\n  <h4>You\'re '), t.push(r(this.verb)), t.push(" a repeating event.<br>Do you want to "), t.push(r(this.action)), t.push(' all future versions of this event too?</h4>\n  <ul>\n    <li>\n      <label>\n        <input type="radio" name="event_recurrence_choice" value="recurring">\n        <span class="button">Yes, '), t.push(r(this.action)), t.push(" all future versions.</span>\n      </label>\n    </li>\n    "), this.calendarEvent.isRecurring() || (t.push('\n      <li>\n        <label>\n          <input type="radio" name="event_recurrence_choice" value="excluded">\n          <span class="button">No, just '), t.push(r(this.action)), t.push(" this one and keep the others as they are.</span>\n        </label>\n      </li>\n    ")), t.push('\n    <li>\n      <label>\n        <input type="radio" name="event_recurrence_choice" value="cancel">\n        <span class="button">Nevermind, don\'t '), t.push(r(this.action)), t.push(" anything.</span>\n      </label>\n    </li>\n  </ul>\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/subscriber_fields"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<fieldset class="event_subscribers" data-role="subscriber_fields">\n  <div class="subscribable" data-behavior="expandable ignore_collapse_hotkey">\n    <div class="content" data-behavior="toggle_subscribers">\n      <span class="wrapper">\n        <label>\n          <input type="checkbox" name="wants_notification" '), this.calendarEvent.get("wants_notification") && t.push(r('checked="checked"')), t.push(" "), bcx.peopleAndGroups.loadedWithAccesses || t.push(r("disabled")), t.push(">\n          <span>\n            "), this.calendarEvent.isNew() ? t.push('\n              Send other people an email now and a reminder\n              <span class="event_type_conditioned timed">30 minutes before</span>\n              <span class="event_type_conditioned all_day">at 7am the day of</span>\n              the event\n            ') : t.push('\n              Send other people a reminder\n              <span class="event_type_conditioned timed">30 minutes before</span>\n              <span class="event_type_conditioned all_day">at 7am the day of</span>\n              the event\n            '), t.push('\n          </span>\n        </label>\n      </span>\n    </div>\n\n    <div class="expanded_content" data-role="subscriber_options">\n      '), t.push(JST["templates/calendar_event_editor/subscriber_options"]({
                            subscribers: this.calendarEvent.subscribers(),
                            unsubscribers: this.currentBucket.unsubscribers(),
                            bucket: this.currentBucket
                        })), t.push("\n    </div>\n  </div>\n</fieldset>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_event_editor/subscriber_options"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f;
                bcx.peopleAndGroups.loadedWithAccesses ? (t.push("\n  "), u = _(this.subscribers).without(this.unsubscribers), t.push("\n  "), a = u.length, t.push("\n  "), e = ((f = this.bucket) != null ? f.people().length : void 0) - this.unsubscribers.length, t.push("\n\n  <ul class='"), e < 2 && t.push("empty"), t.push("'>\n    "), n = a === e || a === 0, t.push('\n    <li><span class="wrapper"><label>\n      <input type="radio" name="subscriber[group]" value=\'everyone\' '), n && t.push('checked="checked"'), t.push("> Everyone on this calendar ("), t.push(r(e)), t.push(" people)\n    </label></span></li>\n\n    "), o = !n && a !== 0, t.push('\n    <li><span class="wrapper"><label>\n      '), o ? (t.push('\n        <input type="radio" name="subscriber[group]" value=\'selected\' '), o && t.push('checked="checked"'), t.push(">\n\n        "), a < 5 ? (t.push("\n          "), s = function () {
                                var e, t, n;
                                n = [];
                                for (e = 0, t = u.length; e < t; e++) i = u[e], n.push(i.get("name"));
                                return n
                            }().sort().join(", ").replace(/,\s([^,]+)$/, " and $1"), t.push("\n        ")) : (t.push("\n          "), s = function () {
                                var e, t, n, r;
                                n = u.slice(0, 4), r = [];
                                for (e = 0, t = n.length; e < t; e++) i = n[e], r.push(i.get("name"));
                                return r
                            }().sort().join(", ") + (" and " + (a - 4) + " more"), t.push("\n        ")), t.push("\n        <span>\n          <strong>"), t.push(r(a === 1 ? "1 person" : "" + a + " people")), t.push(":</strong> "), t.push(r(s)), t.push('\n          (<a href="#" data-behavior="slide" data-direction="forward" class="decorated change_subscribers">change</a>)\n        </span>\n      ')) : (t.push('\n        <input type="radio" name="subscriber[group]" value=\'selected\' '), o && t.push('checked="checked"'), t.push(' data-behavior="slide" data-direction="forward">\n        <span data-behavior="slide" data-direction="forward">Select people...</span>\n      ')), t.push('\n    </label></span></li>\n  </ul>\n\n  <p class="subscribers_modified">\n    <strong>Note:</strong>\n    '), e > 1 ? t.push("\n      Only some people can see this calendar, so we've changed your email options to reflect that.\n    ") : t.push("\n      You're the only one who can see this calendar, so we'll just send you a reminder.\n    "), t.push("\n  </p>\n")) : t.push("\n  <p>Loading..</p>\n"), t.push("\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_events_blank_slate"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<article class="blank_slate">\n  <header>\n    <img src="https://d3dma7a8zw52bz.cloudfront.net/assets/blank_slates/blank_slate_icon_events-c96eda67460874050b636a98e7d2d160.png" alt="Text Documents" width="234" height="182">\n  </header>\n\n  <div class="blank_slate_body">\n    '), $("div.project:not([data-behavior~=read_only])").length ? t.push("\n      <h1>Let's add the first event to the project.</h1>\n    ") : (t.push("\n      "), $("header.has_buttons").hide(), t.push("\n      <h1>There&rsquo;s nothing scheduled on this project.</h1>\n    ")), t.push("\n\n    <h3>Events help you keep track of deadlines, vacations, and important milestones to keep your project humming along.</h3>\n  </div>\n</article>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_grid"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C, k, L, A, O, M, _, D, P, H, B, j, F, I, q;
                t.push('<div class="days_of_week">\n  <div class="days">\n    ');
                for (g = y = 0; y <= 6; g = ++y) t.push("\n      "), a = (g + CalendarDate.firstDayOfWeek) % 7, t.push('\n      <div class="day" data-behavior="set_start_of_week" data-day="'), t.push(r(a)), t.push('">'), t.push(r(CalendarDate.abbreviatedWeekdayNames[a])), t.push("</div>\n    ");
                t.push('\n  </div>\n</div>\n\n<div class="grid_content"><div class="weeks">\n'), B = this.display.getWeeks();
                for (b = 0, S = B.length; b < S; b++) {
                    m = B[b], t.push('\n  <div class="week" data-behavior="calendar_event_drag_area" data-date="'), t.push(r(m[0])), t.push('">\n    '), l = this.display.getSpannedLayoutFor(m[0], m[6]), t.push('\n    <div class="events spanned">\n      '), j = l.rows;
                    for (w = 0, x = j.length; w < x; w++) {
                        h = j[w], t.push('\n        <div class="row">\n          '), F = h.getOccurrences();
                        for (E = 0, T = F.length; E < T; E++) c = F[E], t.push("\n            "), i = c.calendarEvent, t.push('\n            <div class="'), t.push(r(this.classesForSpannedEventFrom(c, m))), t.push('" style="background-color: #'), t.push(r(i.getColor())), t.push('" title="'), t.push(r(i.getBucketType())), t.push(": "), t.push(r(i.getBucketName())), t.push('" data-id="'), t.push(r(i.id)), t.push('" >\n              <span class="event">\n                <span class="title">'), t.push(r(this.emojify(i.get("summary")))), t.push("</span>\n              </span>\n            </div>\n          ");
                        t.push('\n        </div>\n        <div class="spacer"></div>\n      ')
                    }
                    t.push('\n    </div>\n\n    <div class="dates_wrapper">\n      <div class="dates">\n        ');
                    for (p = O = 0, N = m.length; O < N; p = ++O) {
                        u = m[p], t.push("\n          "), s = this.display.getTimedCalendarEventsFor(u), t.push("\n          "), e = this.display.getAllDayCalendarEventsFor(u), t.push("\n          "), n = function () {
                            q = [];
                            for (var e = 0, t = l.getSlotHeight(p); 0 <= t ? e < t : e > t; 0 <= t ? e++ : e--) q.push(e);
                            return q
                        }.apply(this), t.push("\n          "), v = this.display.getTodosFor(u), t.push('\n\n          <div class="'), t.push(r(this.classesForDate(u))), t.push('" data-date="'), t.push(r(u)), t.push('">\n            <div class="day">\n              '), u.equals(this.today) ? t.push("\n                Today\n              ") : u.equals(u.beginningOfMonth()) && (t.push("\n                "), t.push(r(u.getMonthName())), t.push("\n              ")), t.push("\n              "), t.push(r(u.day)), t.push('\n            </div>\n\n            <div class="events spanned">\n              ');
                        for (_ = 0, C = n.length; _ < C; _++) f = n[_], t.push('\n                <div class="spacer"></div>\n              ');
                        t.push('\n            </div>\n\n            <div class="events all_day">\n              ');
                        for (D = 0, k = e.length; D < k; D++) i = e[D], t.push("\n                "), t.push(this.renderCalendarEvent(i)), t.push("\n              ");
                        t.push('\n            </div>\n\n            <div class="events timed">\n              ');
                        for (P = 0, L = s.length; P < L; P++) i = s[P], t.push("\n                "), t.push(this.renderCalendarEvent(i)), t.push("\n              ");
                        t.push("\n            </div>\n\n            ");
                        if (o = v.length) {
                            t.push('\n              <div class="events todos '), s.length || e.length || n.length || t.push(r("no_events")), t.push('">\n                <h5>'), t.push(r(this.pluralize(o, "To-do"))), t.push("</h5>\n\n                ");
                            for (H = 0, A = v.length; H < A; H++) d = v[H], t.push("\n                  "), t.push(this.renderTodo(d)), t.push("\n                ");
                            t.push("\n              </div>\n            ")
                        }
                        t.push("\n          </div>\n        ")
                    }
                    t.push("\n      </div>\n    </div>\n\n  </div>\n")
                }
                t.push("\n</div></div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_item_editor"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n;
                t.push('<div class="balloon balloon_expanded left_side '), t.push(r((e = this.calendarItem) != null ? e.constructor.modelName.toLowerCase() : void 0)), t.push(" "), ((n = this.calendarItem) != null ? typeof n.needsRecurrencePrompt == "function" ? n.needsRecurrencePrompt() : void 0 : void 0) && t.push(r("recurrence_prompt")), t.push('">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n  '), this.calendarItem && (t.push("\n    "), this.calendarItem.constructor.modelName === "Todo" ? (t.push("\n      "), t.push(JST["templates/calendar_todo_editor"](this)), t.push("\n    ")) : (t.push("\n      "), this.calendarEvent = this.calendarItem, t.push("\n      "), this.calendarEvent.needsRecurrencePrompt() ? (t.push("\n        <form>\n          "), t.push(this.renderRecurrencePrompt("move")), t.push("\n        </form>\n      ")) : (t.push("\n        "), t.push(JST["templates/calendar_event_editor"](this)), t.push("\n      ")), t.push("\n    ")), t.push("\n  ")), t.push("\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_jump"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a;
                t.push('<div class="calendar_jump balloon top_left_side">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n\n  <form>\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="nav"><a href="#" data-direction="backward">&#9664;</a></td>\n        <td>\n          '), e = this.getFirstMonth(), t.push("\n          "), a = [0, 1];
                for (s = 0, u = a.length; s < u; s++) {
                    i = a[s], t.push("\n            <dl>\n              <dt>"), t.push(r(e.year)), t.push("</dt>\n              ");
                    for (n = o = 0; o <= 11; n = ++o) t.push('\n                <dd>\n                  <a href="#" data-date="'), t.push(r(e)), t.push('" class="'), e.fallsOnSameMonthAs(this.display.getSignificantDate()) && t.push(r("selected")), t.push('">\n                    '), t.push(r(e.getAbbreviatedMonthName())), t.push("\n                  </a>\n                </dd>\n                "), e = e.nextMonth(), t.push("\n              ");
                    t.push("\n            </dl>\n          ")
                }
                t.push('\n        </td>\n        <td class="nav"><a href="#" data-direction="forward">&#9654;</a></td>\n      </tr>\n    </table>\n  </form>\n</div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_list"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f;
                i = this.projects.activeOrDraftWithCalendarItems(), t.push('\n\n<section class="calendars">\n  <div class="new_calendar_event">\n    <a href="#" data-behavior="add_calendar" class="decorated">+ Add a calendar</a>\n  </div>\n\n  <h4>Calendars</h4>\n  ');
                if (this.calendars.length) {
                    t.push('\n    <ul class="'), this.calendars.haveNotBeenShared() && t.push(r("have_not_been_shared")), t.push('">\n      '), f = this.calendars.models;
                    for (s = 0, u = f.length; s < u; s++) e = f[s], t.push('\n        <li class="calendar" id="calendar_'), t.push(r(e.id)), t.push('" data-bucket-type="calendar" data-bucket-id="'), t.push(r(e.id)), t.push('">\n          <span class="swatch" style="background-color: #'), t.push(r(e.getColor())), t.push('"><a href="#" class="'), this.display.getBucketVisibility(e) && t.push(r("active")), t.push('" data-behavior="toggle_bucket"></a></span>\n          <a href="#" data-behavior="zoom_in" title="Only show this calendar">'), t.push(r(this.emojify(e.get("name")))), t.push('</a>\n          <a href="#" data-behavior="edit_bucket" title="Change this calendar\'s name, color, and more">Settings</a>\n        </li>\n      ');
                    t.push("\n    </ul>\n    "), this.calendars.haveNotBeenShared() && t.push('\n      <div class="calendar_list_blank_slate">\n        <div class="blank_slate_arrow"></div>\n        <div>\n          <h5>Share your calendars</h5>\n          <p>Click Settings to share your calendars with other people.</p>\n        </div>\n      </div>\n    '), t.push("\n  ")
                } else t.push('\n    <div class="calendar_list_blank_slate no_calendars">\n      <div class="blank_slate_arrow"></div>\n      <div>\n        <h5>Add your first calendar</h5>\n        <p>Keep track of events that arent part of a particular project.</p>\n      </div>\n    </div>\n  ');
                t.push("\n</section>\n\n");
                if (i.length) {
                    t.push('\n  <section class="calendars">\n    <h4>Projects</h4>\n    <ul>\n      ');
                    for (o = 0, a = i.length; o < a; o++) n = i[o], t.push('\n        <li data-bucket-type="project" data-bucket-id="'), t.push(r(n.id)), t.push('">\n          <span class="swatch" style="background-color: #'), t.push(r(n.getColor())), t.push('"><a href="#" class="'), this.display.getBucketVisibility(n) && t.push(r("active")), t.push('" data-behavior="toggle_bucket"></a></span>\n          <a href="#" data-behavior="zoom_in" title="Only show this calendar">'), t.push(r(this.emojify(n.get("name")))), n.isDraft() && t.push(r(" - unpublished")), t.push('</a>\n          <a href="#" data-behavior="edit_bucket" title="Change this calendar\'s name, color, and more">Settings</a>\n        </li>\n      ');
                    t.push("\n    </ul>\n  </section>\n")
                }
                t.push('\n\n<section class="calendar_feeds">\n  <p><a href="/'), t.push(r(bcx.currentAccountSlug)), t.push('/calendar_feeds" class="decorated" data-default-stack="true">Subscribe to iCal</a></p>\n</section>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_navigation"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<button class="toggle_calendar_list hide action_button" data-behavior="toggle_calendar_list">\n  <span class="hide">&#8676; Hide calendar list</span>\n</button>\n\n'), this.display.isZoomedIn() ? t.push('\n  <button class="zoom_out show action_button" data-behavior="zoom_out">\n    <span class="show">Show all calendars</span>\n  </button>\n') : t.push('\n  <button class="toggle_calendar_list show action_button" data-behavior="toggle_calendar_list">\n    <span class="show">Show a list of calendars &#8677;</span>\n  </button>\n'), t.push("\n\n<nav>\n  "), this.display.firstWeekContainsToday() || t.push('\n    <a href="#" data-behavior="navigate calendar_event_drag_area" data-direction="today">Today</a>\n  '), t.push('\n\n  <button data-behavior="navigate calendar_event_drag_area" data-direction="backward" class="action_button">&#9664;</button><button data-behavior="navigate calendar_event_drag_area" data-direction="forward" class="action_button">&#9654;</button>\n</nav>\n\n<h1 data-behavior="expandable" class="calendar_title">\n  <a href="#" data-behavior="jump_to_month">\n    '), this.display.isZoomedIn() ? (t.push("\n      <strong>"), t.push(r(this.display.getZoomedInBucketTitle())), t.push("</strong><br>\n      <span>"), t.push(r(this.display.getTitle())), t.push("</span>\n    ")) : (t.push("\n      "), t.push(r(this.display.getTitle())), t.push("\n    ")), t.push("\n\n    "), this.showingSpinner && t.push('\n      <span class="busy"></span>\n    '), t.push('\n  </a>\n\n  <div data-autoview-name="calendar_jump"></div>\n</h1>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_todo"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="event todo '), this.todo.get("completed") && t.push(r("complete")), t.push('" data-id="'), t.push(r(this.todo.id)), t.push('" data-behavior="calendar_todo">\n  <span class="wrapper event">\n    <input type="checkbox" value="1" '), this.todo.get("completed") && t.push(r('checked="checked"')), t.push(' data-behavior="toggle_todo" data-url="'), t.push(r(this.todo.togglePath())), t.push('">\n\n    <span class="content"\n          title="['), t.push(r(this.todo.bucket().get("name"))), t.push("] "), t.push(r(this.todo.get("content"))), t.push('"\n          style="color:#'), t.push(r(this.todo.bucket().getColor())), t.push('">\n\n      '), t.push(r(this.emojify(this.truncateWord(this.todo.get("content"), 5)))), t.push("\n    </span>\n  </span>\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/calendar_todo_editor"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                this.todo = this.calendarItem, t.push('\n\n<header>\n  <h4>\n    <span>Project: <strong><a href="'), t.push(r(this.todo.bucket().url())), t.push('" data-default-stack="true">'), t.push(r(this.todo.bucket().get("name"))), t.push('</a></strong></span>\n    <span>List: <strong><a href="'), t.push(r(this.todo.todolist().showPath())), t.push('" data-default-stack="true">'), t.push(r(this.todo.todolist().get("name"))), t.push("</a></strong></span>\n  </h4>\n</header>\n\n<section>\n  "), t.push(JST["templates/todo"](this)), t.push("\n</section>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/date_display"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y;
                t.push('<section class="calendar_events">\n  ');
                if (this.events.length) {
                    t.push("\n    ");
                    if (this.upcomingEvents.length) {
                        t.push('\n      <div class="upcoming_events">\n        <h2>Upcoming events</h2>\n      </div>\n\n      '), this.upcomingEvents.today && (t.push('\n        <section class="group today upcoming_events">\n          <header>\n            <h2>Today</h2>\n          </header>\n\n          '), t.push(r(this.renderDateAndEvents.apply(this, this.upcomingEvents.today[0]))), t.push("\n        </section>\n      ")), t.push("\n\n      ");
                        if (this.upcomingEvents.thisWeek) {
                            t.push('\n        <section class="calendar_events group this_week upcoming_events">\n          <header>\n            <h2>The rest of the week</h2>\n          </header>\n\n          '), p = this.upcomingEvents.thisWeek;
                            for (u = 0, l = p.length; u < l; u++) d = p[u], e = d[0], n = d[1], t.push("\n            "), t.push(r(this.renderDateAndEvents(e, n))), t.push("\n          ");
                            t.push("\n        </section>\n      ")
                        }
                        t.push("\n\n      ");
                        if (this.upcomingEvents.byMonth) {
                            t.push("\n        "), v = this.upcomingEvents.byMonth;
                            for (i in v) {
                                o = v[i], t.push("\n          "), s = CalendarDate.parse(i), t.push('\n\n          <section class="calendar_events group month upcoming_events">\n            <header>\n              <h2>\n                '), s.occursThisYear() ? (t.push("\n                  "), t.push(r(s.getMonthName())), t.push("\n                ")) : (t.push("\n                  "), t.push(r(s.getMonthName())), t.push(", "), t.push(r(s.year)), t.push("\n                ")), t.push("\n              </h2>\n            </header>\n\n            ");
                                for (a = 0, c = o.length; a < c; a++) m = o[a], e = m[0], n = m[1], t.push("\n              "), t.push(r(this.renderDateAndEvents(e, n))), t.push("\n            ");
                                t.push("\n          </section>\n        ")
                            }
                            t.push("\n      ")
                        }
                        t.push("\n    ")
                    } else t.push("\n      <section class='upcoming_events upcoming_events_blank_slate'>\n        <h2>Upcoming events</h2>\n\n        <div class=\"notice\">\n          <p>Nothing&rsquo;s scheduled right now.</p>\n        </div>\n      </section>\n    ");
                    t.push("\n\n\n    ");
                    if (this.pastEvents.length) {
                        t.push("\n      <div class='past_events'>\n        <h2>Past events</h2>\n      </div>\n\n      "), g = this.pastEvents.byMonth;
                        for (i in g) {
                            o = g[i], t.push("\n        "), s = CalendarDate.parse(i), t.push('\n\n        <section class="calendar_events group month past_events">\n          <header>\n            <h2>\n              '), s.occursThisYear() ? (t.push("\n                "), t.push(r(s.getMonthName())), t.push("\n              ")) : (t.push("\n                "), t.push(r(s.getMonthName())), t.push(", "), t.push(r(s.year)), t.push("\n              ")), t.push("\n            </h2>\n          </header>\n\n          ");
                            for (f = 0, h = o.length; f < h; f++) y = o[f], e = y[0], n = y[1], t.push("\n            "), t.push(r(this.renderDateAndEvents(e, n))), t.push("\n          ");
                            t.push("\n        </section>\n      ")
                        }
                        t.push("\n    ")
                    }
                    t.push("\n  ")
                } else t.push("\n    "), t.push(JST["templates/calendar_events_blank_slate"]({})), t.push("\n  ");
                t.push("\n</section>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/date_group"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push("<header>\n  <div>\n    <h2>"), t.push(r(this.date.getMonthName())), t.push(" "), t.push(r(this.date.day)), t.push(" "), this.date.fallsOnSameYearAs(this.today) || t.push(r(this.date.year)), t.push("</h2>\n    "), this.date.is(this.today) ? t.push("\n      Today\n    ") : this.date.is(this.today.previous()) ? t.push("\n      Yesterday\n    ") : this.date.fallsOnSameWeekAs(this.today) && (t.push("\n      "), t.push(r(this.date.getWeekdayName())), t.push("\n    ")), t.push('\n  </div>\n</header>\n\n<div class="date_group" datetime="'), t.push(r(this.date)), t.push('"></div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/day_of_date"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f, l;
                t.push('<article class="calendar_event">\n  <header>\n    '), this.isTemplate ? (t.push('\n      <time>\n        <span class="day" style="background-color: #'), t.push(r(this.color)), t.push('">'), t.push(r(CalendarDate.abbreviatedWeekdayNames[this.day])), t.push("</span>\n      </time>\n    ")) : (t.push('\n      <time datetime="'), t.push(r(this.day)), t.push('">\n        <span class="day_of_week">'), t.push(r(this.day.getWeekdayName())), t.push('</span><span class="month">'), t.push(r(this.day.getMonthName())), t.push('</span>\n        <span class="day" style="background-color: #'), t.push(r(this.color)), t.push('">'), t.push(r(this.day.day)), t.push("</span>\n      </time>\n    ")), t.push("\n  </header>\n\n  ");
                if (this.calendarEvents.length) {
                    t.push("\n    <ul>\n      "), f = _(this.calendarEvents).sortBy(function (e) {
                        return !e.isTimed()
                    });
                    for (s = 0, u = f.length; s < u; s++) {
                        n = f[s], t.push("\n        <li id='"), t.push(r(n.constructor.modelName)), t.push("_"), t.push(r(n.id)), t.push("'>\n\n          "), n.isAllDay() || (t.push('\n            <time datetime="'), t.push(r(n.get("starts_at"))), t.push('" style="color: #'), t.push(r(this.color)), t.push('">'), t.push(r(n.formattedTime())), t.push("</time>\n          ")), t.push('\n\n          <a href="'), t.push(n.showPath()), t.push('">'), t.push(r(this.emojify(n.summary()))), t.push("</a>\n\n          ");
                        if (e = n.get("comments_count")) t.push('\n            <span class="pill comments"><a href="'), t.push(r(n.showPath())), t.push('">'), t.push(r(this.pluralize(e, "comment"))), t.push("</a></span>\n          ");
                        t.push("\n        </li>\n      ")
                    }
                    t.push("\n    </ul>\n  ")
                }
                t.push("\n\n  ");
                if (this.todos.length) {
                    t.push('\n    <ul class="todos">\n      <li>\n        <h5>'), t.push(r(this.pluralize(this.todos.length, "To-do"))), t.push("</h5>\n      </li>\n      "), l = _(this.todos).sortBy(function (e) {
                        return bcx.todos.comparator(e)
                    });
                    for (o = 0, a = l.length; o < a; o++) i = l[o], t.push("\n        <li>"), t.push(JST["templates/todo"]({
                                todo: i,
                                pluralize: this.pluralize,
                                emojify: this.emojify,
                                context: "agenda",
                                isTemplate: this.isTemplate
                            })), t.push("</li>\n      ");
                    t.push("\n    </ul>\n  ")
                }
                t.push("\n</article>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/draft_notice"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div id="draft_notice" class="workspace_notice initial_load">\n  <div>\n    <section class="draft_description">\n      <h1>Ready to publish this project?</h1>\n      <p>\n        Since you\'re using a template, review the project name, adjust the dates if necessary, and invite anybody who\'s missing.\n        When you\'re done, click publish and we\'ll notify the people you invited.\n      </p>\n\n      <div class="submit">\n        <button data-behavior="publish_draft_project" class="action_button green">Publish this project</button> or\n        <a href="'), t.push(r(bcx.currentBucket.urlForTrash())), t.push('" data-confirm="Are you sure you want to completely delete this unpublished project?" data-method="post" data-remote="true" rel="nofollow">Delete it instead</a>\n      </div>\n    </section>\n\n    <section class="draft_confirmation">\n      <h1>Your project is live!</h1>\n      <p data-behavior=\'recipients_notified_notice\'>\n        Everyone added to this project has been notified.\n      </p>\n    </section>\n\n    <span class="arrow"></span>\n    <span class="arrow"></span>\n  </div>\n</div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/form_fields"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f = this;
                t.push('<fieldset class="event_calendar">\n  ');
                if (this.bucketId != null) t.push('\n    <input type="hidden" name="bucket" value="'), t.push(r(this.bucketType)), t.push(":"), t.push(r(this.bucketId)), t.push('">\n  ');
                else {
                    t.push("\n    "), s = this.display.zoomedInBucket(), t.push("\n\n    ");
                    if (this.calendarEvent.isNew() && s) t.push('\n      <input type="hidden" name="bucket" value="'), t.push(r(s.constructor.modelName)), t.push(":"), t.push(r(s.id)), t.push('">\n      '), t.push(r("" + s.constructor.modelName + ": " + s.get("name"))), t.push("\n    ");
                    else {
                        t.push("\n      "), i = this.calendarEvent.isNew() ? (a = this.display.zoomedInBucket()) != null ? a : this.lastUsedBucket : this.calendarEvent.bucket(), t.push("\n\n      <select name=\"bucket\" data-behavior='bucket_selector' "), bcx.peopleAndGroups.loadedWithAccesses || t.push(r("disabled")), t.push('>\n        <optgroup label="Calendars">\n          '), bcx.calendars.each(function (e) {
                            return t.push('\n            <option value="Calendar:'), t.push(r(e.id)), t.push('" '), i === e && t.push(r("selected='selected'")), t.push(">"), t.push(r(e.get("name"))), t.push("</option>\n          ")
                        }), t.push("\n        </optgroup>\n\n        "), n = bcx.projects.activeOrDraft(), t.push("\n        ");
                        if (n.length) {
                            t.push('\n          <optgroup label="Projects">\n            ');
                            for (o = 0, u = n.length; o < u; o++) e = n[o], t.push('\n              <option value="Project:'), t.push(r(e.id)), t.push('" '), i === e && t.push(r("selected='selected'")), t.push(">"), t.push(r(e.get("name"))), e.isDraft() && t.push(r(" - unpublished")), t.push("</option>\n            ");
                            t.push("\n          </optgroup>\n        ")
                        }
                        t.push("\n      </select>\n    ")
                    }
                    t.push("\n  ")
                }
                t.push('\n</fieldset>\n\n<fieldset class="event_date">\n  <div class="unspanned_fields">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="starts_at_date" value="'), t.push(r(this.calendarEvent.getStartDate())), t.push('">\n          <input type="text" class="date" readonly>\n        </td>\n      </tr>\n    </table>\n    <p>\n      <a href="#" class="decorated" data-behavior="spanned_toggle">Lasts multiple days</a>\n    </p>\n  </div>\n\n  <div class="spanned_fields">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="spanned_starts_at_date" value="'), t.push(r(this.calendarEvent.getStartDate())), t.push('">\n          <input type="text" class="date" readonly>\n        </td>\n        <td class="divider">to</td>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" name="spanned_ends_at_date" value="'), t.push(r(this.calendarEvent.getSpannedEndDate())), t.push('">\n          <input type="text" class="date" readonly>\n        </td>\n      </tr>\n    </table>\n    <p>\n      <a href="#" class="decorated" data-behavior="spanned_toggle">Lasts one day</a>\n    </p>\n  </div>\n\n  '), this.calendarEvent.isRecurrence() || t.push('\n    <p>\n      <a href="#" data-behavior="slide" data-direction="forward" data-slide-index="1" class="decorated change_subscribers">Repeats...</a>\n    </p>\n  '), t.push("\n</fieldset>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/image_enlarger"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a;
                t.push('<div id="image_enlarger" class="'), this.images.length > 1 && t.push(r("with_nav")), t.push('">\n  <button class="close"></button>\n\n  '), u = this.images;
                for (n = 0, s = u.length; n < s; n++) e = u[n], t.push('\n    <figure id="enlarged_image_'), t.push(r(e.id)), t.push('" style="'), e !== this.active && t.push(r("display:none;")), t.push('">\n      <div class="table_wrapper"><div class="cell_wrapper">\n        <img class="enlarged" data-behavior="enlarged_image" src="'), t.push(r(e.thumbnail)), t.push('" data-large-src="'), t.push(r(e.large)), t.push('" data-original-src="'), t.push(r(e.original)), t.push('" width="'), t.push(r(e.width)), t.push('" height="'), t.push(r(e.height)), t.push('">\n        <figcaption>\n          '), t.push(r(e.filename)), t.push('\n          <a href="'), t.push(r(e.original)), t.push('" class="download simple_outline" data-stacker="false" target="_blank">\n            View full size\n          </a>\n        </figcaption>\n      </div></div>\n    </figure>\n  ');
                t.push("\n\n  ");
                if (this.images.length > 1) {
                    t.push('\n    <nav>\n      <div class="images" data-behavior="scroll_view">\n        <table data-behavior="scroll_content">\n          <tr>\n            '), a = this.images;
                    for (i = 0, o = a.length; i < o; i++) e = a[i], t.push('\n              <td>\n                <img\n                  class="'), e === this.active && t.push(r("activated")), t.push('"\n                  src="'), t.push(r(e.thumbnail)), t.push('"\n                  title="'), t.push(r(e.filename)), t.push('"\n                  width="'), t.push(r(e.width)), t.push('"\n                  height="'), t.push(r(e.height)), t.push('"\n                  data-behavior="activate"\n                  data-image-id="'), t.push(r(e.id)), t.push('"\n                >\n              </td>\n            ');
                    t.push('\n          </tr>\n        </table>\n      </div>\n\n      <button class="left arrow" data-behavior="scroll_reverse"></button>\n      <button class="right arrow" data-behavior="scroll_forward"></button>\n    </nav>\n  ')
                }
                t.push("\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/invitee_field"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="autocomplete_people">\n  '), this.model.isEnabled() && (t.push("\n    "), this.model.isGroup() ? (t.push('\n      <input type="hidden" name="groups[][id]" value="'), t.push(r(this.model.get("group_id"))), t.push('">\n    ')) : (t.push('\n      <input type="hidden" name="invitees[][email_address]" data-role="email_address_input" value="'), t.push(r(this.model.get("email_address"))), t.push('">\n    ')), t.push("\n  ")), t.push('\n  <div class="icon"></div>\n  <div class="input">\n    '), this.readOnly() ? (t.push('\n      <input type="text" value="'), t.push(r(this.model.get("name") || this.model.get("email_address"))), t.push('" spellcheck="false" readonly>\n      <input type="text" style="background:white; opacity:0;" disabled>\n    ')) : (t.push('\n      <input type="text" value="'), t.push(r(this.model.get("name") || this.model.get("email_address"))), t.push('" data-behavior="input_change_emitter" data-role="human_input" spellcheck="false">\n    ')), t.push('\n  </div>\n  <div class="suggestions" data-role="suggestions_view">\n    <!-- templates/autocomplete_people_suggestions -->\n  </div>\n  '), this.removable() && t.push('\n    <a class="remove" data-behavior="remove_invitee"></a>\n  '), t.push("\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/invitee_field_group"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="group invitee field">\n  <input type="hidden" name="groups[][id]" value="'), t.push(r(this.model.get("group_id"))), t.push('">\n  <div class="icon"></div>\n  <div class="input">\n    <input type="text" value="'), t.push(r(this.model.get("name"))), t.push('" spellcheck="false" readonly>\n    <input type="text" style="background:white; opacity:0;" disabled>\n  </div>\n  <a class="remove" data-behavior="remove_group"></a>\n</div>\n\n'), this.enabled.length && t.push('\n  <div data-role="enabled_invitees"></div>\n'), t.push("\n\n"), this.disabled.length && (t.push("\n  "), this.enabled.length === 0 ? t.push("\n    <h3>Everyone in this group is already on the project</h3>  \n  ") : (t.push("\n    "), this.disabled.length === 1 ? t.push("\n      <h3>One person is already on the project</h3>\n    ") : t.push("\n      <h3>These people are already on the project</h3>\n    "), t.push("\n  ")), t.push('\n  <div data-role="disabled_invitees"></div>\n')), t.push("\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/member_field"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div class="autocomplete_people">\n  <div class="icon"></div>\n  <div class="input">\n    <input type="hidden" name="memberships[][person_id]" value="" data-role="person_id_input">\n\n    '), this.readOnly() ? (t.push('\n      <input type="text" value="'), t.push(r(this.model.get("name"))), t.push('" spellcheck="false" readonly>\n      <input type="text" style="background:white; opacity:0;" disabled>\n    ')) : (t.push('\n      <input type="text" value="'), t.push(r(this.model.get("name"))), t.push('" data-behavior="input_change_emitter" data-role="human_input" spellcheck="false">\n    ')), t.push('\n  </div>\n  <div class="suggestions" data-role="suggestions_view">\n    <!-- templates/autocomplete_people_suggestions -->\n  </div>\n  '), this.removable() && t.push('\n    <a class="remove" data-behavior="remove_member"></a>\n  '), t.push("\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/membership_suggestions"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u;
                t.push('<ol class="suggestions">\n  ');
                if (((s = this.results.enabledOptions) != null ? s.length : void 0) || ((o = this.results.disabledOptions) != null ? o.length : void 0)) {
                    t.push("\n    ");
                    if (this.results.enabledOptions.length) {
                        t.push("\n      "), u = this.results.enabledOptions;
                        for (n = 0, i = u.length; n < i; n++) e = u[n], t.push('\n        <li class="'), e === this.selected && t.push(r("selected")), t.push(' option suggestion" data-behavior="select_suggestion" data-suggestion-id="'), t.push(r(e.id)), t.push('">\n          <span class="name">'), t.push(r(e.get("name"))), t.push('</span> <span class="email">'), t.push(r(e.get("email_address"))), t.push("</span>\n        </li>\n      ");
                        t.push("\n    ")
                    } else t.push('\n      <li class="disabled option hint suggestion">\n        <span class="name">'), t.push(r(this.results.disabledOptions[0].get("name"))), t.push("</span> <span>is already in this group</span>\n      </li>\n    ");
                    t.push("\n  ")
                } else t.push("\n    "), this.showUnknownMessage && t.push('\n      <li class="unknown hint suggestion">\n        This person isnt in the system yet.\n      </li>\n    '), t.push("\n  ");
                t.push("\n</ol>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/new_superpowers"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<table border="0" cellspacing="0" cellpadding="0" id="invitee-'), t.push(r(this.invitee.emailAddressAlphanumeric())), t.push('">\n  <tr data-behavior="set_permission_checkboxes">\n    <td>\n      <strong>'), t.push(r(this.invitee.get("email_address"))), t.push('</strong>\n    </td>\n\n    <td class="option projects">\n      <input name="permissions['), t.push(r(this.invitee.get("email_address"))), t.push('][can_create_projects]" type="hidden" value="0">\n      <input name="permissions['), t.push(r(this.invitee.get("email_address"))), t.push('][can_create_projects]" data-behavior="can_create_projects_permission" type="checkbox" value="1">\n    </td>\n\n    <td class="option admin">\n      <input name="permissions['), t.push(r(this.invitee.get("email_address"))), t.push('][admin]" type="hidden" value="0">\n      <input name="permissions['), t.push(r(this.invitee.get("email_address"))), t.push('][admin]" data-behavior="admin_permission" type="checkbox" value="1">\n    </td>\n  </tr>\n</table>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/pending_attachment"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<li data-dirty>\n  <a class="remove" data-behavior="remove" href="#"><span>Remove</span></a>\n  <div class="icon"><img src="'), t.push(r(this.iconPath)), t.push('" class="file_icon" width="32" height="32"></div>\n  <span class="name">'), t.push(r(this.file.name)), t.push('</span>\n  <div class="progress" data-behavior="progress"><div></div></div>\n  <input type="hidden" name="attachments[][id]" value="'), t.push(r(this.file.id)), t.push('">\n  <input type="hidden" name="attachments[][_destroy]" value="">\n  <input type="hidden" name="attachments[][name]" value="'), t.push(r(this.file.name)), t.push('">\n  <input type="hidden" name="attachments[][content_type]" value="'), t.push(r(this.file.type)), t.push('">\n  <input type="hidden" name="attachments[][token]" value="">\n  '), this.file.link != null && (t.push('\n    <input type="hidden" name="attachments[][link][source]" value="'), t.push(r(this.file.link.source)), t.push('">\n    <input type="hidden" name="attachments[][link][url]" value="'), t.push(r(this.file.link.url)), t.push('">\n    <input type="hidden" name="attachments[][link][key]" value="'), t.push(r(this.file.link.key)), t.push('">\n    <input type="hidden" name="attachments[][link][size]" value="'), t.push(r(this.file.link.size)), t.push('">\n  ')), t.push('\n\n  <div data-behavior="taggings pending_taggings" class="taggings">\n    <ul class="tags"></ul>\n    <div class="edit_taggings" data-behavior="expandable expand_exclusively edit_taggings">\n      <a href="#" data-behavior="expand_on_click">Label...</a>\n    </div>\n  </div>\n</li>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/pending_invitee"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<li data-email-address="'), t.push(r(this.invitee.get("email_address"))), t.push('">\n  <img class="avatar" src="'), t.push(r(this.invitee.get("avatar_url") || "/assets/icons/avatar.gif")), t.push('">\n  <div class="text">\n    '), t.push(r(this.invitee.get("name") || this.invitee.get("email_address"))), t.push(' <a class="remove" data-behavior="remove"></a>\n  </div>\n  '), this.id ? (t.push('\n    <input type="hidden" name="invitees[][id]" value="'), t.push(r(this.invitee.id)), t.push('">\n  ')) : (t.push('\n    <input type="hidden" name="invitees[][email_address]" value="'), t.push(r(this.invitee.get("email_address"))), t.push('">\n  ')), t.push("\n</li>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/pending_tagging"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<li data-url="'), t.push(r(this.taggingId)), t.push('">\n  <input type="hidden" name="attachments[][tag_names][]" value="'), t.push(r(this.tagName)), t.push('">\n  <span class="label" data-role="tag_name">'), t.push(r(this.tagName)), t.push('</span>\n  <a href="#" data-behavior="remove_tagging" class="remove_tagging"><span>Remove label</span></a>\n  <span class="label_color"></span>\n</li>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/people_suggestions"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s;
                s = this.suggestions;
                for (n = 0, i = s.length; n < i; n++) e = s[n], t.push('\n  <li class="'), e === this.selected && t.push(r("selected")), t.push(' suggestion suggestion" data-behavior="select_suggestion" data-suggestion-id="'), t.push(r(e.id)), t.push('">\n    '), e.isGroup() ? (t.push('\n      <strong class="name">'), t.push(r(e.get("name"))), t.push("</strong> <span>Company with "), t.push(r(e.get("person_ids").length)), t.push(" people</span>\n    ")) : (t.push('\n      <span class="name">'), t.push(r(e.get("name"))), t.push('</span> <span class="email">'), t.push(r(e.get("email_address"))), t.push("</span>\n    ")), t.push("\n  </li>\n");
                t.push("\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/project_calendar_event_editor"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e;
                this.calendarEvent.isNew() ? t.push('<article class="calendar_event new" data-behavior="expandable hide_buttons_on_expand">') : t.push('<article class="calendar_event edit">'), t.push('\n  <div class="expanded_content bubble">\n    <form class="calendar_event_editor_form '), this.calendarEvent.isSpanned() && t.push(r("spanned")), t.push('">\n      <div data-behavior="expandable recurrence_prompt">\n        <div class="collapsed_content">\n          <header class="text_entry">\n            '), t.push(JST["templates/calendar_event_editor/name_fields"](this)), t.push("\n            "), t.push(JST["templates/calendar_event_editor/bucket_fields"]({
                            calendarEvent: this.calendarEvent,
                            bucketType: this.bucketType,
                            bucketId: this.bucketId
                        })), t.push("\n            "), this.isEditorForTemplate() ? (t.push("\n              "), t.push(JST["templates/template_calendar_event_form_fields"]({
                                calendarEvent: this.calendarEvent,
                                bucketType: this.bucketType,
                                bucketId: this.bucketId
                            })), t.push("\n            ")) : (t.push("\n              "), t.push(JST["templates/calendar_event_editor/date_fields"]({
                                calendarEvent: this.calendarEvent
                            })), t.push("\n            ")), t.push("\n            "), t.push(JST["templates/calendar_event_editor/recurrence_fields"](this)), t.push("\n          </header>\n          <footer>\n            "), e = this.calendarEvent.isNew() ? "" : "&subscribable_id=" + this.calendarEvent.id, t.push('\n            <div data-behavior="lazy_load_subscribers" data-url="/'), t.push(r("" + this.bucketType.toLowerCase() + "s")), t.push("/"), t.push(r(this.bucketId)), t.push("/subscribers?subscribable_type=CalendarEvent"), t.push(r(e)), t.push('"></div>\n            <p class="submit">\n              '), this.calendarEvent.isNew() ? t.push('\n                <input type="submit" value="Add this event", class=\'action_button green\'>\n              ') : t.push('\n                <input type="submit" value="Save changes", class=\'action_button green\'>\n              '), t.push('\n              or <a href="#" class="cancel" data-role="cancel" data-behavior="cancel">Cancel</a>\n            </p>\n          </footer>\n        </div>\n        <div class="expanded_content" data-role="expanded_recurrence_prompt">\n          '), t.push(JST["templates/calendar_event_editor/recurrence_prompt"](this)), t.push("\n        </div>\n      </div>\n    </form>\n  </div>\n</article>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/project_dates"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f, l, c, h;
                s = this.truncatedUpcomingEventsGroupedByDate(), t.push("\n\n");
                if (!_(s).isEmpty()) {
                    t.push('\n  <section class="calendar_events sidebar" data-collection-name=\'calendar_events\'>\n    <article class="note">\n      <div class="note_body">\n        <h1><a href="'), t.push(r((l = bcx.currentProject) != null ? l.url() : void 0)), t.push('/calendar_events">Upcoming Events</a></h1>\n\n        ');
                    for (o = 0, a = s.length; o < a; o++) {
                        e = s[o], t.push("\n          <h5>"), t.push(r(this.dateLabelFor(CalendarDate.parse(e[0])))), t.push('</h5>\n          <ul class="project_dates">\n            '), c = _(e[1]).sortBy(function (e) {
                            return !e.isTimed()
                        });
                        for (u = 0, f = c.length; u < f; u++) n = c[u], t.push('\n              <li><a href="'), t.push(r(n.showPath())), t.push('">'), t.push(r(this.emojify(n.summary()))), t.push("</a> <time>"), n.isTimed() && t.push(r("" + n.formattedTime())), t.push("</time> "), t.push(r(this.untilDateFor(n))), t.push("</li>\n            ");
                        t.push("\n          </ul>\n        ")
                    }
                    t.push("\n\n        "), (i = this.moreUpcomingEventsCount()) > 0 && (t.push('\n          <p class="more_events"><a href="'), t.push(r((h = bcx.currentProject) != null ? h.url() : void 0)), t.push("/calendar_events\" class='decorated'>All upcoming events...</a></p>\n        ")), t.push("\n      </div>\n    </article>\n  </section>\n")
                }
                t.push("\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/project_editor"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o;
                t.push('<div class="balloon top_right_side">\n  <span class="arrow"></span>\n  <span class="arrow"></span>\n\n  <form>\n    <header>\n      <fieldset class="calendar_settings">\n        <p>Choose a color</p>\n        <div class="swatches">\n          '), o = bcx.bucketColors;
                for (n = i = 0, s = o.length; i < s; n = ++i) e = o[n], t.push('\n            <input type="radio" id="'), t.push(r(this.id)), t.push("_swatch_"), t.push(r(n)), t.push('" name="color" value="'), t.push(r(e)), t.push('"'), this.project.getColor() === e && t.push(r(" checked")), t.push('>\n            <label class="swatch" for="'), t.push(r(this.id)), t.push("_swatch_"), t.push(r(n)), t.push('" style="background-color: #'), t.push(r(e)), t.push('"></label>\n          ');
                t.push('\n        </div>\n      </fieldset>\n    </header>\n    \n    <section>\n      <h4>Who can see this calendar?</h4>\n      <p>Only people who can see this project can see this calendar. You can <a href="'), t.push(r(this.project.accessesUrl())), t.push('" class="decorated" data-stacker=\'false\'>change who has access</a> on the project page.</p>\n    </section>\n    \n    <footer>      \n      <p class="submit">\n        <input type="submit" value="Save changes">\n        or <a href="#" class="cancel" data-behavior="cancel">Close</a>\n      </p>\n    </footer>\n  </form>\n</div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/project_toolbar"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a;
                t.push('<div class="tools'), this.visibleToolsInProject().length && t.push(r(" has_tools_in_project")), this.visibleToolsNotInProject().length && t.push(r(" has_tools_not_in_project")), t.push('">\n  \n  ');
                if (this.visibleToolsInProject().length) {
                    t.push('\n    <div class="group in_project">\n      '), u = this.tools;
                    for (n = 0, s = u.length; n < s; n++) e = u[n], t.push("\n        "), e.isInProject() && (t.push('\n          <a href="'), t.push(r(e.url())), t.push('" data-tool-name="'), t.push(r(e.name)), t.push('">\n            <span class=""><strong>'), t.push(r(e.pluralizedCount())), t.push("</strong></span>\n          </a>\n        ")), t.push("\n      ");
                    t.push("\n    </div>\n  ")
                }
                t.push("\n\n  ");
                if (this.visibleToolsNotInProject().length) {
                    t.push('\n    <div class="group not_in_project">\n      <span class="label">Add the first:</span>\n      '), a = this.tools;
                    for (i = 0, o = a.length; i < o; i++) e = a[i], t.push("\n        "), e.isNotInProject() && (t.push('\n          <a href="'), t.push(r(e.url())), t.push('" data-tool-name="'), t.push(r(e.name)), t.push('">\n            <span class="">'), t.push(r(e.pitch)), t.push("</span>\n          </a>\n        ")), t.push("\n      ");
                    t.push("\n    ")
                }
                t.push("\n  </div>\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/relative_date_picker"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o;
                t.push('<header>\n  <a href=\'#\' title="Previous" class="prev" data-behavior=\'previous\'><span>Previous</span></a>\n  <a href=\'#\' title="Next" class="next" data-behavior=\'next\'><span>Next</span></a>\n  <div class="title">Week '), t.push(r(this.current_week + 1)), t.push("</div>\n</header>\n\n<ul>\n  "), o = CalendarDate.weekdayNames;
                for (n = i = 0, s = o.length; i < s; n = ++i) e = o[n], t.push('\n    <li>\n      <a href="#" class=\''), this.current_week === this.due_week && this.due_wday === n && t.push(r("active")), t.push("' data-wday='"), t.push(r(n)), t.push("'>"), t.push(r(e)), t.push("</a>\n    </li>\n  ");
                t.push("\n</ul>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/subscribers"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f, l, c, h, p, d = [].indexOf || function (e) {
                        for (var t = 0, n = this.length; t < n; t++)
                            if (t in this && this[t] === e) return t;
                        return -1
                    }, v = this;
                t.push('<table>\n  <tbody>\n    <tr>\n      <td class="subscribers">\n        '), i = this.people.models, t.push("\n        "), this.showCurrentPerson && i.unshift(this.currentPerson), t.push("\n\n        "), this.project.isTemplate() || this.project.isDraft() ? (t.push("\n          "), o = i, t.push("\n          "), u = [], t.push("\n        ")) : (t.push("\n          "), o = i.filter(function (e) {
                            return e.get("wants_notifications") === !0
                        }), t.push("\n          "), u = i.filter(function (e) {
                            return e.get("wants_notifications") === !1
                        }), t.push("\n          "), n = u.length && !o.length, t.push("\n        ")), t.push("\n\n        "), this.project.isTemplate() ? (t.push("\n          <h4>Who should receive updates?</h4>\n          <p>Since this is a project template, we won't email anyone about this "), t.push(r(this.humanize(this.subscribable))), t.push(" now. People you check below will be notified when new comments are added after the project is published.</p>\n        ")) : this.project.isDraft() ? (t.push("\n          <h4>Who should receive updates?</h4>\n          <p>Since this project isn't published yet, we won't email anyone about this "), t.push(r(this.humanize(this.subscribable))), t.push(" now. People you check below will be notified when new comments are added after the project is published.</p>\n        ")) : o.length && (t.push("\n          <h4>Email this "), t.push(r(this.humanize(this.subscribable))), t.push(" to people on the project:</h4>\n        ")), t.push("\n\n        "), o.length && t.push('\n          <div class="select_all_or_none">\n            <a href="#" class="decorated select_everyone" data-behavior="subscriber_select_all">Select all</a> |\n            <a href="#" class="decorated select_everyone" data-behavior="subscriber_select_none">Select none</a>\n          </div>\n        '), t.push('\n\n        <div class="subscribers">\n          <div>\n            '), h = _(o).inGroups(this.subscribable === "comment" ? 2 : 3);
                for (a = 0, l = h.length; a < l; a++) {
                    i = h[a], t.push('\n              <div class="column">\n                ');
                    for (f = 0, c = i.length; f < c; f++) s = i[f], t.push('\n                  <label data-subscriber-id="'), t.push(r(s.get("person_id"))), t.push('" title="'), t.push(r(s === this.currentPerson ? "Me (" + s.get("name") + ")" : s.get("name"))), t.push('">\n                    <input name="'), t.push(r(this.subscribable)), t.push('[subscribers][]" type="checkbox" value="'), t.push(r(s.get("person_id"))), t.push('" '), ((p = s.get("person_id"), d.call(this.subscriberIds, p) >= 0) || this.defaultSubscribeAll) && t.push(r(e = "checked")), t.push(">\n                    "), t.push(r(s === this.currentPerson ? "Me (" + s.get("name") + ")" : s.get("name"))), t.push("\n                  </label>\n                ");
                    t.push("\n              </div>\n            ")
                }
                t.push("\n          </div>\n        </div>\n\n        "), u.length && (t.push('\n          <div class="unsubscribers">\n            <h6>\n              '), n ? t.push("\n                Everyone on this project has\n              ") : u.length > 1 ? t.push("\n                These people have\n              ") : t.push("\n                This person has\n              "), t.push("\n              turned off email notifications:</h6>\n            <p>"), t.push(r(_(u).map(function (e) {
                                    return e.get("name")
                                }).join(", ").replace(/,\s([^,]+)$/, " and $1"))), t.push("</p>\n          </div>\n        ")), t.push("\n      </td>\n\n      "), !this.groups.isEmpty() && !n && (t.push('\n        <td class="groups">\n          <h4>Select people from:</h4>\n          <div class="group_options">\n            '), this.groups.reject(function (e) {
                            return e.isSubgroup()
                        }).forEach(function (e) {
                            return t.push('\n              <a href="#" data-member-ids="'), t.push(r(JSON.stringify(v.groupMemberIds(e)))), t.push('" data-group-id="'), t.push(r(e.id)), t.push('">\n                <span>'), t.push(r(e.get("name"))), t.push("</span>\n              </a>\n              "), e.subgroups().isEmpty() || (t.push('\n                <div class="subgroup_options">\n                  '), e.subgroups().forEach(function (n) {
                                        return t.push('\n                    <a href="#" class="subgroup" data-member-ids="'), t.push(r(JSON.stringify(v.groupMemberIds(n)))), t.push('" data-group-id="'), t.push(r(n.id)), t.push('" data-parent-group-id="'), t.push(r(e.id)), t.push('">\n                      <span>'), t.push(r(n.get("name"))), t.push("</span>\n                    </a>\n                  ")
                                    }), t.push("\n                </div>\n              ")), t.push("\n            ")
                        }), t.push("\n          </div>\n        </td>\n      ")), t.push("\n    </tr>\n  </tbody>\n</table>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/template_calendar_event_editor"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push(JST["templates/project_calendar_event_editor"](this)), t.push("\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/template_calendar_event_form_fields"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s;
                t.push('<fieldset class="event_date">\n  <div class="start_date">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="label">Starts on:</td>\n        <td class="date" data-behavior="date_entry expand_dates">\n          <input type="hidden" data-due-week name="starts_at_due_week" value="'), t.push(r((e = this.calendarEvent.get("start_due_week")) != null ? e : 0)), t.push('">\n          <input type="hidden" data-due-wday name="starts_at_due_wday" value="'), t.push(r((n = this.calendarEvent.get("start_due_wday")) != null ? n : 1)), t.push('">\n\n          <input type="text" data-relative-date class="date" readonly value="'), t.push(r(this.calendarEvent.relativeDateLabelFor("start"))), t.push('">\n\n          <div data-behavior="relative_date_picker" class="notranslate relative_datepicker balloon" data-input=\'starts_at\'></div>\n        </td>\n      </tr>\n    </table>\n  </div>\n  <div class="end_date">\n    <table border="0" cellspacing="0" cellpadding="0">\n      <tr>\n        <td class="label">Ends on:</td>\n        <td class="date" data-behavior="date_entry">\n          <input type="hidden" data-due-week name="ends_at_due_week" value="'), t.push(r((i = this.calendarEvent.get("end_due_week")) != null ? i : 0)), t.push('">\n          <input type="hidden" data-due-wday name="ends_at_due_wday" value="'), t.push(r((s = this.calendarEvent.get("end_due_wday")) != null ? s : 1)), t.push('">\n\n          <input type="text" data-relative-date class="date" readonly value="'), t.push(r(this.calendarEvent.relativeDateLabelFor("end"))), t.push('">\n\n          <div data-behavior="relative_date_picker" class="notranslate relative_datepicker balloon" data-input=\'ends_at\'></div>\n        </td>\n      </tr>\n    </table>\n  </div>\n</fieldset>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/template_calendar_events_blank_slate"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<article class="blank_slate">\n  <header>\n    <img src="https://d3dma7a8zw52bz.cloudfront.net/assets/blank_slates/blank_slate_icon_events-c96eda67460874050b636a98e7d2d160.png" alt="Text Documents" width="234" height="182">\n  </header>\n\n  <div class="blank_slate_body">\n    '), $("div.project:not([data-behavior~=read_only])").length && t.push("\n      <h1>Let's add the first event to your project template.</h1>\n    "), t.push("\n\n    <h3>We'll add these dates to your project's calendar based on the day you start the project. You can always change them later.</h3>\n  </div>\n</article>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/template_date_display"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n, i, s, o, u, a, f;
                t.push('<section class="calendar_events">\n  ');
                if (this.todos.length || this.calendarEvents.length) {
                    t.push("\n\n    "), a = this.eventsGroupedByWeek();
                    for (i = 0, o = a.length; i < o; i++) {
                        n = a[i], t.push('\n      <section class="calendar_events group month upcoming_events">\n        <header>\n          <h2>Week '), t.push(r(parseInt(n[0]) + 1)), t.push("</h2>\n        </header>\n\n        "), f = n[1];
                        for (s = 0, u = f.length; s < u; s++) e = f[s], t.push("\n          "), t.push(this.renderDateAndEvents(e[0], e[1])), t.push("\n        ");
                        t.push("\n\n      </section>\n\n    ")
                    }
                    t.push("\n  ")
                } else t.push("\n    "), t.push(JST["templates/template_calendar_events_blank_slate"]({})), t.push("\n  ");
                t.push("\n</section>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/timeline_day_bubble"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e, n;
                t.push('<div class="day">\n  <a href="/'), t.push(r(bcx.currentAccountSlug)), t.push("/summary/"), t.push(r(this.date)), t.push('" class="decorated" data-default-stack="true">\n    '), e = this.date.getLocalDate(), t.push("\n    "), n = bcx.timeConversion.relativeDay(e), t.push("\n    <span>\n      "), n === "today" || n === "yesterday" ? (t.push("\n        <span>"), t.push(r(bcx.timeConversion.formats.daysAgo(e))), t.push('</span>\n        <time date-days-ago datetime="'), t.push(r(e.toISOString())), t.push('">'), t.push(r(bcx.timeConversion.formatDate(e))), t.push("</time>\n      ")) : (t.push("\n        <span>"), t.push(r(bcx.timeConversion.formatDate(e))), t.push('</span>\n        <time date-days-ago datetime="'), t.push(r(e.toISOString())), t.push('">'), t.push(r(bcx.timeConversion.formats.daysAgo(e))), t.push("</time>\n      ")), t.push("\n    </span>\n  </a>\n</div>\n")
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/todo"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                var e;
                t.push('<form class="calendar_todo_editor_form" action="'), t.push(r(this.todo.showPath())), t.push('" method="PUT" data-remote="true" data-behavior="edit_calendar_todo has_hover_content">\n  <div>\n    <span class="wrapper '), this.todo.get("completed") && t.push(r("complete")), t.push('">\n      <input type="checkbox" value="1" '), this.todo.get("completed") && t.push(r('checked="checked"')), t.push(' data-behavior="toggle_todo" data-url="'), t.push(r(this.todo.togglePath())), t.push('" '), this.isTemplate && t.push(r('disabled="disabled"')), t.push('>\n\n      <span class="content">\n        <a href="'), t.push(r(this.todo.showPath())), t.push('" '), this.context !== "agenda" && t.push(r('data-default-stack="true"')), t.push(' title="'), this.context === "agenda" && t.push(r("List: " + this.todo.todolist().get("name"))), t.push('">'), t.push(r(this.emojify(this.todo.get("content")))), t.push("</a>\n\n        "), this.todo.get("comments_count") && (t.push('\n          <span class="pill comments">\n            <a href="'), t.push(r(this.todo.showPath())), t.push('" '), this.context !== "agenda" && t.push(r('data-default-stack="true"')), t.push(">"), t.push(r(this.pluralize(this.todo.get("comments_count"), "comment"))), t.push("</a>\n          </span>\n        ")), t.push('\n\n        <span class="pill has_balloon '), this.todo.assignee() || t.push(r("blank")), t.push('" data-behavior="expandable expand_exclusively load_assignee_options '), this.todo.assignee() || t.push(r("hover_content")), t.push('">\n          <a href="#" data-behavior="expand_on_click">\n            <span data-behavior="assignee_name">\n              '), t.push(r(((e = this.todo.assignee()) != null ? e.get("name") : void 0) || "Unassigned")), t.push('\n            </span>\n          </a>\n\n          <span class="balloon right_side expanded_content">\n            <span class="arrow"></span>\n            <span class="arrow"></span>\n\n            <label>\n              <b>Assign this to-do to:</b>\n\n              <select name="todo[assignee_code]"\n                      data-behavior="assignee_options"\n                      data-project-id="'), t.push(r(this.todo.bucket().get("id"))), t.push('"\n                      data-assignee-code="'), t.push(r(this.todo.get("assignee_code"))), t.push('">\n                <option value="">Loading...</option>\n              </select>\n            </label>\n\n            <small><p>The person you select will be notified by email</p></small>\n\n            <label>\n              <b>Set the due date:</b>\n              <hr>\n              '), this.isTemplate ? (t.push('\n                <input type="hidden" name="todo[due_week]" id="alt_date_todo_'), t.push(r(this.todo.get("id"))), t.push('" value="'), t.push(r(this.todo.get("due_week"))), t.push('" data-behavior="alt_date_field">\n                <input type="hidden" name="todo[due_wday]" id="alt_date_todo_'), t.push(r(this.todo.get("id"))), t.push('" value="'), t.push(r(this.todo.get("due_wday"))), t.push('" data-behavior="alt_date_field">\n                <div data-behavior="relative_date_picker" class="notranslate relative_datepicker"></div>\n              ')) : (t.push('\n                <input type="hidden" name="todo[due_on]" id="alt_date_todo_'), t.push(r(this.todo.get("id"))), t.push('" value="'), t.push(r(this.todo.getDueDate())), t.push('" data-behavior="alt_date_field">\n                <div data-behavior="date_picker" class="notranslate"></div>\n              ')), t.push('\n            </label>\n\n            <footer><a href="#" data-behavior="no_due_date" class="no_date">No due date</a></footer>\n          </span>\n        </span>\n      </span>\n    </span>\n  </div>\n</form>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    this.JST || (this.JST = {}), this.JST["templates/wysiwyg_toolbar"] = function (e) {
        e || (e = {});
        var t = [],
            n = function (e) {
                var n = t,
                    r;
                return t = [], e.call(this), r = t.join(""), t = n, i(r)
            }, r = function (e) {
                return e && e.ecoSafe ? e : typeof e != "undefined" && e != null ? o(e) : ""
            }, i, s = e.safe,
            o = e.escape;
        return i = e.safe = function (e) {
            if (e && e.ecoSafe) return e;
            if (typeof e == "undefined" || e == null) e = "";
            var t = new String(e);
            return t.ecoSafe = !0, t
        }, o || (o = e.escape = function (e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        }),
        function () {
            (function () {
                t.push('<div data-behavior="wysiwyg_toolbar" style="display: none;">\n  <a tabindex="-1" data-wysihtml5-command="bold" title="CTRL+B">Bold</a>\n  <a tabindex="-1" data-wysihtml5-command="italic" title="CTRL+I">Italic</a>\n  <a tabindex="-1" data-wysihtml5-command="insertUnorderedList">Bullets</a>\n  <a tabindex="-1" data-wysihtml5-command="insertOrderedList">Numbers</a>\n  <a tabindex="-1" data-wysihtml5-command="pre">Quote</a>\n</div>\n')
            }).call(this)
        }.call(e), e.safe = s, e.escape = o, t.join("")
    }
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        }, i = [].slice;
    e = function (e) {
        function o() {
            return this.updateCalendarEventClasses = t(this.updateCalendarEventClasses, this), this.hide = t(this.hide, this), o.__super__.constructor.apply(this, arguments)
        }
        var n, s;
        return r(o, e), n = "MM d, yy", s = function (e) {
            return $.datepicker.formatDate(n, e.getLocalDate())
        }, o.prototype.events = {
            "submit form": "submitForm",
            "click a[data-behavior=cancel]": "cancel",
            "click a[data-behavior=delete]": "destroy",
            change: "updateCalendarEventClasses",
            "change select[name=freq]": "freqChanged",
            "change select[name=count]": "countChanged",
            "change :radio[name=event_recurrence_choice]": "recurrenceOptionChosen"
        }, o.prototype.initialize = function () {
            return this.calendarEvent = new bcx.models.CalendarEvent
        }, o.prototype.render = function () {
            var e = this;
            return o.__super__.render.apply(this, arguments), this.$("[data-behavior~=date_entry]").each(function (t, n) {
                return e.installDateEntryBehavior(n)
            }), this.updateCalendarEventClasses(), this.originalBucket = this.calendarEvent.isNew() ? null : this.calendarEvent.bucket()
        }, o.prototype.hide = function () {}, o.prototype.updateCalendarEventClasses = function () {
            var e = this;
            return _.defer(function () {
                return e.isTimed() ? $(e.el).removeClass("all_day").addClass("timed") : $(e.el).removeClass("timed").addClass("all_day"), e.isSpanned() ? $(e.el).find("form").addClass("spanned") : $(e.el).find("form").removeClass("spanned")
            })
        }, o.prototype.installDateEntryBehavior = function (e) {
            var t, r, i, o, u = this;
            return r = $(e), i = r.find("[type=text]"), t = r.find("[type=hidden]"), o = CalendarDate.parse(t.val()), i.val(s(o)).datepicker({
                    altField: t,
                    altFormat: "yy-mm-dd",
                    dateFormat: n,
                    firstDay: CalendarDate.firstDayOfWeek,
                    dayNamesMin: ["S", "M", "T", "W", "T", "F", "S"],
                    changeMonth: !1,
                    changeYear: !1,
                    gotoCurrent: !0,
                    prevText: "Previous",
                    selectOtherMonths: !0,
                    showOtherMonths: !0,
                    showAnim: !1,
                    onSelect: function (e, t) {
                        return u.dateSelected(r, e)
                    },
                    beforeShow: function (e, t) {
                        return u.beforeShowPicker(r, t)
                    }
                })
        }, o.prototype.beforeShowPicker = function (e, t) {
            t.dpDiv.addClass("calendar_event_picker notranslate"), this.setMinDates();
            if (e.find(":input[name=starts_at_date]").length) return e.attr("data-prev-date", this.dateEntry("starts_at_date", "hidden").val())
        }, o.prototype.setMinDates = function () {
            var e, t;
            return t = this.datePicker("starts_at_date", "getDate"), e = this.datePicker("ends_at_date", "getDate"), this.datePicker("ends_at_date", "option", {
                    minDate: t
                }), this.datePicker("until_date", "option", {
                    minDate: e
                })
        }, o.prototype.dateSelected = function (e) {
            return e.attr("data-dirty", !0), e.find(":input[name=starts_at_date]").length && this.shiftEndsAtDate(), this.shiftUntilDate(), this.updateCalendarEventClasses()
        }, o.prototype.shiftEndsAtDate = function () {
            var e, t, n, r;
            r = CalendarDate.parse(this.dateEntry("starts_at_date", "hidden").val()), n = CalendarDate.parse(this.dateEntry("starts_at_date").attr("data-prev-date"));
            if (e = r.daysSince(n)) return t = CalendarDate.parse(this.dateEntry("ends_at_date", "hidden").val()), this.datePicker("ends_at_date", "setDate", s(t.next(e)))
        }, o.prototype.shiftUntilDate = function () {
            var e, t;
            e = this.datePicker("ends_at_date", "getDate"), t = this.datePicker("until_date", "getDate");
            if (e > t) return this.datePicker("until_date", "setDate", e)
        }, o.prototype.field = function (e) {
            return this.$(":input[name='" + e + "']").val()
        }, o.prototype.dateEntry = function (e, t) {
            var n;
            return n = $("[data-behavior~=date_entry]:has([name=" + e + "])"), t != null ? n.find("[type=" + t + "]") : n
        }, o.prototype.datePicker = function () {
            var e, t, n;
            return t = arguments[0], e = 2 <= arguments.length ? i.call(arguments, 1) : [], (n = this.dateEntry(t, "text")).datepicker.apply(n, e)
        }, o.prototype.isTimed = function () {
            return this.field("starts_at_time") && this.field("starts_at_time").length && !this.isSpanned()
        }, o.prototype.isSpanned = function () {
            return this.field("starts_at_date") !== this.field("ends_at_date")
        }, o.prototype.updateCalendarEventAttributes = function () {
            var e, t, n, r, i;
            i = this.$(":input[name=bucket]").val().split(":"), t = i[0], e = i[1], this.calendarEvent.set({
                    summary: this.field("summary"),
                    description: this.field("description"),
                    bucket_type: t,
                    bucket_id: e
                }), this.isTimed() ? (r = CalendarDateTime.parse(this.field("starts_at_date"), this.field("starts_at_time")), this.calendarEvent.set({
                        all_day: !1,
                        starts_at: r.toString(),
                        ends_at: r.toString()
                    })) : this.isSpanned() ? this.calendarEvent.set({
                    all_day: !0,
                    starts_at: this.field("starts_at_date"),
                    ends_at: this.field("ends_at_date")
                }) : this.calendarEvent.set({
                    all_day: !0,
                    starts_at: this.field("starts_at_date"),
                    ends_at: this.field("starts_at_date")
                }), n = this.field("freq") || null, this.calendarEvent.set({
                    freq: n
                });
            if (n) switch (this.$(":input[name=event_recurrence_end]:checked").val()) {
            case "forever":
                return this.calendarEvent.set({
                        count: null,
                        until_date: null
                    });
            case "count":
                return this.calendarEvent.set({
                        count: this.field("count"),
                        until_date: null
                    });
            case "until":
                return this.calendarEvent.set({
                        count: null,
                        until_date: this.field("until_date")
                    })
            }
        }, o.prototype.submitForm = function (e) {
            var t = this;
            return this.calendarEvent.isRepeating() ? this.calendarEvent.isLastRecurrence() ? (this.markAsBusy(), this.choice = "excluded", this.editRepeatingEvent()) : this.showRecurrencePrompt("change") : (this.markAsBusy(), this.updateCalendarEventAttributes(), this.calendarEvent.save({}, {
                        error: function () {
                            return t.calendarEventRequestFailed()
                        },
                        success: function () {
                            return t.bucketChanged() ? t.moveBuckets() : t.calendarEventRequestSucceeded()
                        }
                    })), !1
        }, o.prototype.bucketChanged = function () {
            var e;
            if (this.originalBucket && (e = this.selectedBucket())) return e !== this.originalBucket
        }, o.prototype.moveBuckets = function (e) {
            var t, n, r = this;
            return e == null && (e = function () {
                return r.calendarEventRequestSucceeded()
            }), n = this.selectedBucket(), t = new MoveProcessor(new bcx.MoveOperation({
                        source_resource_type: "CalendarEvent",
                        source_resource_id: this.calendarEvent.get("id"),
                        destination_bucket_type: n.constructor.modelName,
                        destination_bucket_id: n.id
                    })), t.on("processor:success", function () {
                    return e()
                }), t.on("processor:failed", function () {
                    return r.calendarEventRequestFailed()
                }), t.run()
        }, o.prototype.destroy = function (e) {
            var t, n = this;
            return t = "Are you sure you want to delete this event?", this.calendarEvent.isRepeating() ? this.calendarEvent.isLastRecurrence() ? confirm(t) ? (this.markAsBusy(), this.choice = "excluded", this.destroyRepeatingEvent()) : this.cancelDestroy() : this.showRecurrencePrompt("destroy") : confirm(t) && (this.markAsBusy(), this.calendarEvent.trash({
                        error: function () {
                            return n.calendarEventRequestFailed()
                        },
                        success: function () {
                            return n.calendarEventRequestSucceeded()
                        }
                    })), !1
        }, o.prototype.cancelDestroy = function () {}, o.prototype.cancel = function (e) {
            return this.hide(), !1
        }, o.prototype.calendarEventRequestFailed = function () {
            return console.warn("failure!")
        }, o.prototype.calendarEventRequestSucceeded = function () {
            return this.markAsNotBusy(), this.hide()
        }, o.prototype.calendarEventRecurrenceRequestSucceeded = function () {
            return this.calendarEventRequestSucceeded()
        }, o.prototype.markAsBusy = function () {
            return this.$("form").addClass("busy")
        }, o.prototype.markAsNotBusy = function () {
            return this.$("form").removeClass("busy")
        }, o.prototype.getSelectedSubscribers = function () {
            var e, t;
            return e = bcx.peopleAndGroups.get("person_" + bcx.currentPerson.id), t = this.calendarEvent.subscribers(), e && this.calendarEvent.isNew() && t.push(e), t
        }, o.prototype.isEditorForTemplate = function () {
            return !1
        }, o.prototype.freqChanged = function (e) {
            var t;
            return t = $(e.target).val(), this.$("div.recurrence_end").toggle( !! t), this.$("label[data-role~=freqtext]").text(this.freqText(t))
        }, o.prototype.freqText = function (e) {
            switch (e) {
            case "daily":
                return "days";
            case "weekly":
                return "weeks";
            case "monthly":
                return "months";
            case "yearly":
                return "years"
            }
        }, o.prototype.recurrenceDescription = function () {
            var e, t, n, r, i, s;
            return n = this.calendarEvent.master(), r = this.freqText(n.getFreq()), i = r.replace(/s$/, ""), t = "Every " + i, (e = n.get("count")) ? t += " for " + e + " " + r + ", starting on " + n.getStartDate().longWithYear() + "." : (s = n.getUntilDate()) ? t += " from " + n.getStartDate().longWithYear() + " to " + s.longWithYear() + "." : t += ", starting on " + n.getStartDate().longWithYear() + "."
        }, o.prototype.countChanged = function (e) {
            return $(e.target).closest("li").find(":radio").attr("checked", !0)
        }, o.prototype.showRecurrencePrompt = function (e) {
            var t;
            return t = this.$("[data-behavior~=recurrence_prompt]"), t.find("[data-role~=expanded_recurrence_prompt]").html(this.renderRecurrencePrompt(e)), t.expand(), t.closest(".balloon").addClass("recurrence_prompt")
        }, o.prototype.renderRecurrencePrompt = function (e) {
            var t;
            return this.recurrenceChangeContext = e, t = _.extend({
                    calendarEvent: this.calendarEvent
                }, function () {
                    switch (this.recurrenceChangeContext) {
                    case "change":
                        return {
                            action: "change",
                            verb: "changing"
                        };
                    case "move":
                        return this.recurrenceChangeContext = "change", {
                            action: "move",
                            verb: "moving"
                        };
                    case "destroy":
                        return {
                            action: "delete",
                            verb: "deleting"
                        }
                    }
                }.call(this)), JST["templates/calendar_event_editor/recurrence_prompt"](t)
        }, o.prototype.recurrenceOptionChosen = function (e) {
            this.$(":input").attr("disabled", !0).closest("div").addClass("busy");
            if ((this.choice = $(e.target).val()) === "cancel") return this.hide();
            switch (this.recurrenceChangeContext) {
            case "change":
                return this.editRepeatingEvent();
            case "destroy":
                return this.destroyRepeatingEvent()
            }
        }, o.prototype.editRepeatingEvent = function () {
            var e = this;
            this.$("form.calendar_event_editor_form").length && this.updateCalendarEventAttributes();
            switch (this.choice) {
            case "recurring":
                return this.calendarEvent.isRecurrence() ? this.calendarEvent.createRecurring(function () {
                    return e.calendarEventRecurrenceRequestSucceeded()
                }) : this.calendarEvent.save({}, {
                        success: function () {
                            return e.calendarEvent.fromStartDate = null, e.bucketChanged() ? e.moveBuckets(function () {
                                return e.calendarEventRecurrenceRequestSucceeded()
                            }) : e.calendarEventRecurrenceRequestSucceeded()
                        }
                    });
            case "excluded":
                return this.calendarEvent.createExcluded(function () {
                    return e.calendarEventRecurrenceRequestSucceeded()
                })
            }
        }, o.prototype.destroyRepeatingEvent = function () {
            var e = this;
            switch (this.choice) {
            case "recurring":
                return this.calendarEvent.isRecurrence() ? this.calendarEvent.excludeWithFutureRecurrences(function () {
                    return e.calendarEventRecurrenceRequestSucceeded()
                }) : this.calendarEvent.trash({
                        success: function () {
                            return e.calendarEventRecurrenceRequestSucceeded()
                        }
                    });
            case "excluded":
                return this.calendarEvent.exclude(function () {
                    return e.calendarEventRecurrenceRequestSucceeded()
                })
            }
        }, o
    }(bcx.Autoview), bcx.AbstractCalendarEventEditor = e
}.call(this),
function () {
    var e = function (e, t) {
        return function () {
            return e.apply(t, arguments)
        }
    }, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        }, r = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    bcx.views.AddTaggingView = function (t) {
        function s() {
            return this.autocompleteTagName = e(this.autocompleteTagName, this), s.__super__.constructor.apply(this, arguments)
        }
        var i;
        return n(s, t), s.viewName("add_tagging"), s.prototype.events = {
            "keydown input[type=text]": "keyPressed",
            "click input[type=submit]": "addTagging",
            "click [data-behavior~=cancel]": "cancel"
        }, s.prototype.afterInstall = function () {
            var e;
            return e = this.taggingsView, this.existingTaggings = e.existingTaggings, this.existingTagNames = e.existingTagNames, this.render()
        }, s.prototype.afterRender = function () {
            return this.$input = this.$("input[type=text]"), this.$tags = this.$("div.choose_tags"), this.$submit = this.$("input[type=submit]"), this.$input.placeholder({
                    clearOnSubmit: !1
                }), this.$input.focus(), this.initializeAutocompletion()
        }, s.prototype.initializeAutocompletion = function () {
            var e = this;
            return this.getTagNamesForAutocompletion(function (t) {
                return e.$input.autocomplete({
                        appendTo: e.$tags,
                        source: e.autocompleteTagName,
                        delay: 0,
                        open: function () {
                            return e.$tags.find("ul.ui-autocomplete").removeAttr("style")
                        },
                        select: function (t, n) {
                            if (n.item) return e.$input.val(n.item.value)
                        }
                    })
            })
        }, s.prototype.autocompleteTagName = function (e, t) {
            var n, i, s = this;
            return i = e.term.trim(), n = RegExp("(^|\\s)" + $.ui.autocomplete.escapeRegex(i), "i"), this.getTagNamesForAutocompletion(function (e) {
                return t(_(e).select(function (e) {
                            return n.test(e) && r.call(s.existingTagNames, e) < 0
                        }))
            })
        }, s.prototype.getTagNamesForAutocompletion = function (e) {
            var t = this;
            return this.tagNamesForAutocompletion ? e(this.tagNamesForAutocompletion) : $.ajax({
                    url: "/" + bcx.currentAccountSlug + "/tags.json",
                    dataType: "json",
                    global: !1,
                    success: function (n) {
                        return e(t.tagNamesForAutocompletion = n)
                    }
                })
        }, s.prototype.hasTagName = function (e) {
            var t;
            return t = i(e), _(this.existingTagNames).detect(function (e) {
                return t === i(e)
            })
        }, s.prototype.keyPressed = function (e) {
            if (e.keyCode === 13) return this.addTagging()
        }, s.prototype.addTagging = function (e) {
            var t;
            return t = this.$input.val().trim(), t.length && (this.hasTagName(t) || (e = $(this.el).dispatch("tagging:add", t, this), e.isDefaultPrevented() || this.disable())), !1
        }, s.prototype.disable = function () {
            return this.$input.attr("disabled", !0), this.$submit.attr("disabled", !0), this.$submit.val("Adding...")
        }, s.prototype.refresh = function () {
            return this.taggingsView.refresh()
        }, s.prototype.afterRefresh = function () {
            return this.afterInstall()
        }, s.prototype.cancel = function (e) {
            return $(this.el).collapse(), !1
        }, i = function (e) {
            return e.toLowerCase().trim().replace(/\s\s+/, " ")
        }, s
    }(bcx.Autoview)
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    e = bcx.EmailAddressHelper.extractEmailAddressesFrom, bcx.views.AdhocSubscriber = function (n) {
        function i() {
            return this.replace = t(this.replace, this), this.appendTo = t(this.appendTo, this), this.deactivate = t(this.deactivate, this), i.__super__.constructor.apply(this, arguments)
        }
        return r(i, n), i.prototype.className = "person field", i.prototype.template = "templates/adhoc_subscriber", i.prototype.events = {
            "focus input": "activate",
            "input:change input": "changeModel",
            "paste input": "inputPasted",
            "suggestions:commit": "suggestionPicked",
            focusoutside: "deactivate",
            clickoutside: "deactivate"
        }, i.prototype.initialize = function () {
            var e = this;
            return this.inputModel = new this.collection.model, this.inputModel.bind("change", function () {
                return e.update()
            }), this.model || (this.model = this.inputModel), this.subscribable = this.options.subscribable, this.suggestionsView = new bcx.views.AutocompletePeopleSuggestions({
                    el: this.el,
                    model: this.inputModel,
                    collection: this.collection
                })
        }, i.prototype.render = function () {
            return $(this.el).html(JST[this.template](this)), this.updateHiddenInputs(), this.updateAllClassNames()
        }, i.prototype.activate = function () {
            return $(this.el).addClass("focused")
        }, i.prototype.deactivate = function () {
            return $(this.el).removeClass("focused"), this.updateAllClassNames()
        }, i.prototype.changeModel = function () {
            return this.model = this.inputModel, this.model.setInput(this.getHumanInput())
        }, i.prototype.inputPasted = function (t) {
            var n;
            return n = $(t.currentTarget), n.bind("input", function (t) {
                var r;
                return r = e(n.val()), r.length && n.val(r[0]), n.unbind("input", arguments.callee)
            })
        }, i.prototype.suggestionPicked = function (e, t) {
            return e.preventDefault(), this.trigger("replace", this, t.suggestion)
        }, i.prototype.update = function () {
            return this.updateHiddenInputs(), this.updateBlankClassName(), this.model.hasInvalidEmailAddress() || $(this.el).removeClass("invalid"), $(this.el).removeClass("unknown")
        }, i.prototype.updateHiddenInputs = function () {
            return this.$("[data-role~=person_id_input]").val(this.model.get("person_id")), this.$("[data-role~=person_id_input]").attr("disabled", this.model.isNew()), this.$("[data-role~=email_address_input]").val(this.model.get("email_address")), this.$("[data-role~=email_address_input]").attr("disabled", this.model.has("id") || this.model.isBlank())
        }, i.prototype.updateAllClassNames = function () {
            return this.updateBlankClassName(), this.updateInvalidClassName(), this.updateUnknownClassName()
        }, i.prototype.updateBlankClassName = function () {
            return $(this.el).toggleClass("blank", this.model.isBlank())
        }, i.prototype.updateInvalidClassName = function () {
            return $(this.el).toggleClass("invalid", this.model.hasInvalidEmailAddress())
        }, i.prototype.updateUnknownClassName = function () {
            return $(this.el).toggleClass("unknown", this.model.hasUnknownName())
        }, i.prototype.getHumanInput = function () {
            return this.$("[data-role~=human_input]").val()
        }, i.prototype.appendTo = function (e) {
            return this.render(), $(e).append(this.el)
        }, i.prototype.replace = function (e) {
            return this.render(), $(e).replaceWith(this.el)
        }, i
    }(bcx.View)
}.call(this),
function () {
    var e, t, n = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, r = {}.hasOwnProperty,
        i = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var n in t) r.call(t, n) && (e[n] = t[n]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    t = bcx.collections.PeopleAndGroups, e = bcx.views.AdhocSubscriber, bcx.views.AdhocSubscriberList = function (r) {
        function s() {
            return this.replaceView = n(this.replaceView, this), this.addView = n(this.addView, this), s.__super__.constructor.apply(this, arguments)
        }
        return i(s, r), s.prototype.firsthumanInput = "[data-role~=human_input]:first", s.prototype.events = {
            "input:change div.field:last-child": "lastFieldChanged"
        }, s.prototype.initialize = function () {
            var e, n, r, i;
            this.collection = new t($(this.el).data("people"), {
                    disabledIds: $(this.el).data("disabled-people-ids")
                }), this.subscribable = $(this.el).data("subscribable"), i = this.getOutsideSubscribers();
            for (n = 0, r = i.length; n < r; n++) e = i[n], this.addView(e);
            return this.addView()
        }, s.prototype.getOutsideSubscribers = function () {
            var e, t, n, r, i;
            t = $(this.el).data("outside-subscribers") || [], i = [];
            for (n = 0, r = t.length; n < r; n++) e = t[n], i.push(new this.collection.model(e));
            return i
        }, s.prototype.createView = function (t) {
            var n;
            return n = new e({
                    model: t,
                    collection: this.collection,
                    selection: this.selection,
                    subscribable: this.subscribable
                }), n.bind("replace", this.replaceView)
        }, s.prototype.addView = function (e) {
            var t;
            return e || (e = new this.collection.model), t = this.createView(e), t.appendTo(this.el)
        }, s.prototype.replaceView = function (e, t) {
            var n;
            return n = this.createView(t), n.replace(e.el), $(n.el).is(":last-child") && this.addView(), this.focusNextField(n.el)
        }, s.prototype.lastFieldChanged = function (e, t) {
            if (t.currentValue.length > 5) return this.addView()
        }, s.prototype.focusNextField = function (e) {
            return $(e).next("div.field").find(this.firsthumanInput).focus()
        }, s.prototype.focus = function () {
            return this.$(this.firsthumanInput).focus()
        }, s
    }(bcx.View)
}.call(this),
function () {
    bcx.views.Autoresize = function () {
        function e() {}
        return e.prototype.setup = function () {
            var e = this;
            return $(this.el).bind("autoview:render", function () {
                return e.autoresize()
            })
        }, e.prototype.autoresize = function () {
            return this.$("[data-behavior~=autoresize]").each(function () {
                return $(this).focus().autoResize()
            })
        }, e
    }()
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    e = function (e) {
        function n() {
            return this.performDragNavigation = t(this.performDragNavigation, this), this.updateBlankSlate = t(this.updateBlankSlate, this), this.updateCalendarListVisibility = t(this.updateCalendarListVisibility, this), n.__super__.constructor.apply(this, arguments)
        }
        return r(n, e), n.viewName("calendar_display"), n.prototype.events = {
            "click [data-behavior~=toggle_calendar_list]": "toggleCalendarListClicked",
            "click [data-behavior~=add_calendar]": "addCalendarClicked",
            "click [data-behavior~=edit_bucket]": "editBucketClicked",
            "click [data-behavior~=toggle_bucket]": "toggleBucketClicked",
            "click [data-behavior~=zoom_in]": "zoomInClicked",
            "click [data-behavior~=zoom_out]": "zoomOutClicked",
            "calendardate:click": "calendarDateClicked",
            "calendaritem:select": "calendarItemSelected",
            "calendaritem:deselect": "calendarItemDeselected",
            "calendaritemeditor:hide": "calendarItemEditorHidden",
            "project_editor:hide": "calendarOrProjectEditorClosed",
            "calendar_editor:hide": "calendarOrProjectEditorClosed",
            "calendaritem:dragstart": "calendarItemStartedDragging",
            "calendaritem:dragmove": "calendarItemMoved",
            "calendaritem:dragend": "calendarItemDropped",
            "calendaritem:dragover [data-behavior~=navigate]": "calendarItemDraggedOverNavigateButton",
            "calendaritem:dragout  [data-behavior~=navigate]": "calendarItemDraggedOutOfNavigateButton",
            "calendargrid:beforeanimate": "lockNavigation",
            "calendargrid:afteranimate": "unlockNavigation"
        }, n.prototype.initialize = function () {
            var e = this;
            return this.display = bcx.calendarDisplay, this.display.bind("reset", function () {
                return e.calendarItemEditor.unregister(), e.render()
            }), this.display.bind("change:calendarListVisibility", this.updateCalendarListVisibility), this.display.bind("change:zoomedIn", this.updateCalendarListVisibility), this.display.bind("change:blankSlate", this.updateBlankSlate), this.updateCalendarListVisibility()
        }, n.prototype.installSubviews = function () {
            return n.__super__.installSubviews.apply(this, arguments), this.calendarEditor = this.findSubviewByName("calendar_editor"), this.calendarEditor.hide(), this.projectEditor = this.findSubviewByName("project_editor"), this.projectEditor.hide(), this.calendarItemEditor = this.findSubviewByName("calendar_item_editor"), this.calendarItemEditor.hide(), this.calendarGrid = this.findSubviewByName("calendar_grid")
        }, n.prototype.install = function () {
            var e;
            return e = n.__super__.install.apply(this, arguments), this.updateBlankSlate(), e
        }, n.prototype.toggleCalendarListClicked = function (e) {
            return this.calendarItemEditor.hide(), this.display.toggleCalendarListVisibility(), !1
        }, n.prototype.updateCalendarListVisibility = function () {
            return this.display.getCalendarListVisibility() && !this.display.isZoomedIn() ? $(this.el).addClass("calendar_list_visible") : $(this.el).removeClass("calendar_list_visible")
        }, n.prototype.updateBlankSlate = function () {
            var e;
            return e = $(this.el).closest("div.panel"), this.display.blankSlate ? (e.addClass("blank_slate"), this.addCalendarClicked()) : (e.removeClass("blank_slate"), this.calendarEditor.hide())
        }, n.prototype.addCalendarClicked = function (e) {
            var t;
            return this.loadPeopleAndAccesses(), t = this.$("section.calendars h4"), this.calendarEditor.showWith(new bcx.models.Calendar, t.get(0)), !1
        }, n.prototype.editBucketClicked = function (e) {
            var t, n, r;
            return this.loadPeopleAndAccesses(), r = $(e.currentTarget).closest("[data-bucket-type]").get(0), t = this.findBucketByElement(r), n = t.constructor.modelName === "Calendar" ? this.calendarEditor : this.projectEditor, n.isVisibleWith(t) ? n.hide() : (n.showWith(t, r), $(r).addClass("activated")), !1
        }, n.prototype.calendarOrProjectEditorClosed = function (e) {
            var t;
            return t = $(this.el).find("li.activated[data-bucket-type]"), $(t).removeClass("activated")
        }, n.prototype.zoomInClicked = function (e) {
            var t, n;
            return n = $(e.currentTarget).closest("[data-bucket-type]").get(0), t = this.findBucketByElement(n), this.calendarEditor.hide(), this.projectEditor.hide(), this.calendarItemEditor.hide(), this.display.zoomIn(t), !1
        }, n.prototype.zoomOutClicked = function (e) {
            return this.calendarItemEditor.hide(), this.display.zoomOut(), !1
        }, n.prototype.loadPeopleAndAccesses = function () {
            return bcx.peopleAndGroups.loadWithAccesses()
        }, n.prototype.toggleBucketClicked = function (e) {
            var t;
            return t = this.findBucketByElement(e.currentTarget), this.display.toggleBucketVisibility(t), !1
        }, n.prototype.findBucketByElement = function (e) {
            var t, n, r;
            t = $(e).closest("[data-bucket-type]"), r = t.data("bucket-type"), n = t.data("bucket-id");
            if (r === "calendar") return bcx.calendars.get(n);
            if (r === "project") return bcx.projects.get(n)
        }, n.prototype.calendarDateClicked = function (e, t) {
            var n, r;
            return this.calendarItemEditor.visible ? this.calendarItemEditor.hide() : (n = new bcx.models.CalendarEvent({
                        summary: "New event",
                        all_day: !0,
                        starts_at: t.toString(),
                        until_date: t.next().toString()
                    }), (r = this.display.zoomedInBucket()) && n.set({
                        bucket_type: r.constructor.modelName,
                        bucket_id: r.id
                    }), this.calendarItemElement = this.calendarGrid.insertAllDayCalendarEventElement(n), this.calendarGrid.selectCalendarItemElement(this.calendarItemElement, n))
        }, n.prototype.calendarItemSelected = function (e, t) {
            return this.loadPeopleAndAccesses(), this.calendarItemEditor.showWith(t, e.target)
        }, n.prototype.calendarItemDeselected = function () {
            return this.calendarItemElement && $(this.calendarItemElement).remove(), this.calendarItemEditor.hide(!0)
        }, n.prototype.calendarItemEditorHidden = function () {
            return this.calendarGrid.deselectCalendarItemElement()
        }, n.prototype.calendarItemStartedDragging = function (e, t) {
            if (this.calendarItemEditor.visible) return this.calendarItemEditor.hide()
        }, n.prototype.calendarItemMoved = function (e, t) {
            var n, r, i;
            return n = t.calendarItem, r = t.fromStartDate, i = t.offset, n.
            setStartDate(r.next(i))
        }, n.prototype.calendarItemDropped = function (e, t) {
            var n, r;
            return n = t.calendarItem, r = t.fromStartDate, n.constructor.modelName === "CalendarEvent" && n.isRepeating() ? n.getStartDate() !== r && (n.fromStartDate = r, n.isLastRecurrence() ? n.createExcluded() : this.calendarItemEditor.showWith(n, this.calendarGrid.findDraggedElements())) : n.save(), this.resetDragNavigation(), this.display.navigateToCalendarEvent(n)
        }, n.prototype.calendarItemDraggedOverNavigateButton = function (e, t) {
            var n;
            return this.dragNavigationElement = e.currentTarget, (n = this.dragNavigationInterval) != null ? n : this.dragNavigationInterval = window.setInterval(this.performDragNavigation, 500)
        }, n.prototype.calendarItemDraggedOutOfNavigateButton = function (e, t) {
            return this.dragNavigationElement = null
        }, n.prototype.resetDragNavigation = function () {
            if (this.dragNavigationInterval) return window.clearInterval(this.dragNavigationInterval), this.dragNavigationInterval = null, this.dragNavigationElement = null
        }, n.prototype.performDragNavigation = function () {
            return this.dragNavigationElement ? $(this.dragNavigationElement).click() : this.resetDragNavigation()
        }, n.prototype.lockNavigation = function () {
            return this.display.lockNavigation()
        }, n.prototype.unlockNavigation = function () {
            return this.display.unlockNavigation()
        }, n
    }(bcx.Autoview)
}.call(this),
function () {
    bcx.views.Popover = function () {
        function e() {}
        return e.recordName = function (e) {
            return this.prototype.recordName = e
        }, e.prototype.recordName = "record", e.prototype.setup = function () {
            var e = this;
            return $(document).bind("popover:show", function (t) {
                if (t.target !== e.el) return e.hide()
            }), this.visible = !0, this.hide()
        }, e.prototype.showWith = function (e, t) {
            var n;
            return this[this.recordName] = e, n = this.visible, this.hide(!0), this.render(), this.visible = !0, $(this.el).show().trigger("popover:show"), typeof this.afterShow == "function" && this.afterShow(n), t && this.repositionRelativeTo(t), this.bindWindowEvents(), this.autofocus()
        }, e.prototype.show = function () {
            return this.showWith(null)
        }, e.prototype.hide = function (e) {
            e == null && (e = !1);
            if (this.visible) return this.unbindWindowEvents(), $(this.el).trigger("popover:hide").hide(), typeof this.afterHide == "function" && this.afterHide(e), this.visible = !1
        }, e.prototype.repositionRelativeTo = function (e) {
            return $(this.el).offset($(e).offset())
        }, e.prototype.isVisibleWith = function (e) {
            return this.visible && this[this.recordName] === e
        }, e.prototype.isDirty = function () {
            return $(this.el).isDirty()
        }, e.prototype.bindWindowEvents = function () {
            var e = this;
            $(window).bind("click.popover", function (t) {
                if (!$(t.target).closest("#" + e.id).length) return e.hide(), !1
            }), $(document).bind("keydown.popover", function (t) {
                if (t.keyCode !== $.ui.keyCode.ESCAPE) return;
                if (e.visible && !e.isDirty()) return e.hide(), !1
            });
            if (!$.browser.mobile) return $(window).bind("resize.popover", function () {
                return e.hide()
            })
        }, e.prototype.unbindWindowEvents = function () {
            return $(window).unbind(".popover"), $(document).unbind(".popover")
        }, e.prototype.autofocus = function () {
            return this.$(":input:first").focus()
        }, e
    }()
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    e = function (e) {
        function n() {
            return this.renderAccesses = t(this.renderAccesses, this), this.render = t(this.render, this), n.__super__.constructor.apply(this, arguments)
        }
        return r(n, e), n.viewName("calendar_editor"), n.include(bcx.views.Popover), n.recordName("calendar"), n.prototype.events = {
            "submit form": "submitForm",
            "click [data-behavior~=cancel]": "cancel",
            "click [data-behavior~=delete]": "destroy",
            "click [data-behavior~=select_suggestion]": "onClickSuggestion"
        }, n.prototype.initialize = function () {
            return this.calendar = new bcx.models.Calendar, bcx.peopleAndGroups.bind("loaded:withAccess", this.renderAccesses)
        }, n.prototype.onClickSuggestion = function (e) {
            return e.stopImmediatePropagation()
        }, n.prototype.render = function () {
            var e;
            return e = n.__super__.render.apply(this, arguments), this.renderAccesses(), this.setupPlaceholder(), e
        }, n.prototype.renderAccesses = function () {
            return this.$("[data-behavior~=calendar_accesses]").html("" + this.renderTemplate("calendar_accesses")), this.setupInviteesView(), this.initializeSlider()
        }, n.prototype.afterShow = function () {
            return this.initializeSlider()
        }, n.prototype.setupInviteesView = function () {
            var e, t, n, r, i, s, o;
            if (!bcx.peopleAndGroups.loadedWithAccesses) return;
            s = this.$("[data-behavior~=calendar_invitees]"), o = [];
            for (r = 0, i = s.length; r < i; r++) e = s[r], t = _(bcx.peopleAndGroups.models).reject(function (e) {
                return e.id === "person_" + bcx.currentPerson.id
            }), $(e).data("people", t), n = new bcx.views.CalendarInviteeFieldList({
                    el: e
                }), n.render(), n.focus(), o.push($(e).data("view", n));
            return o
        }, n.prototype.setupPlaceholder = function () {
            return $(this.el).find("[data-behavior~=placeholder]").placeholder()
        }, n.prototype.submitForm = function (e) {
            var t = this;
            return this.$("form").addClass("busy"), this.calendar.save(this.getCalendarAttributes(), {
                    success: function () {
                        return t.hide()
                    },
                    error: function () {
                        return console.warn("failure!")
                    }
                }), !1
        }, n.prototype.getRemovedPeopleFromInviteesView = function () {
            var e, t;
            e = this.$("div.change_accesses [data-behavior~=calendar_invitees]")[0];
            if (e && (t = $(e).data("view"))) return t.removedPeople
        }, n.prototype.getCalendarAttributes = function () {
            var e;
            return {
                name: this.$("[name=name]").val(),
                color: this.$("[name=color]:checked").val(),
                invitees: function () {
                    var t, n, r, i;
                    r = this.$("input[data-role~=email_address_input]"), i = [];
                    for (t = 0, n = r.length; t < n; t++) e = r[t], i.push({
                            email_address: e.value
                        });
                    return i
                }.call(this),
                remove_people: this.getRemovedPeopleFromInviteesView()
            }
        }, n.prototype.cancel = function () {
            return this.hide()
        }, n.prototype.afterHide = function (e) {
            if (!e) return $(this.el).trigger("calendar_editor:hide")
        }, n.prototype.initializeSlider = function () {
            return this.$("[data-behavior~=slider]:visible").slider()
        }, n.prototype.destroy = function (e) {
            var t = this;
            return confirm("Are you sure you want to delete this calendar?") && (this.$("form").addClass("busy"), this.calendar.trash({
                        success: function () {
                            return t.hide()
                        },
                        error: function () {
                            return console.warn("failure!")
                        }
                    })), !1
        }, n
    }(bcx.Autoview)
}.call(this),
function () {
    var e, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        };
    e = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return n(t, e), t.viewName("calendar_event_editor/recurrence_prompt"), t.prototype.showRecurrencePrompt = function (e) {
            return $(this.el).html(this.renderRecurrencePrompt("destroy"))
        }, t.prototype.markAsBusy = function () {
            return $(this.el).closest(".tool").addClass("busy")
        }, t.prototype.hide = function () {
            var e = this;
            return _.defer(function () {
                return $(e.el).parent().find("[data-behavior~=recurring_cancel]").click()
            })
        }, t.prototype.cancelDestroy = function () {
            return this.hide()
        }, t.prototype.calendarEventRecurrenceRequestSucceeded = function () {
            return $(".sheet.inactive:last").find("h1 > a").click()
        }, t
    }(bcx.AbstractCalendarEventEditor)
}.call(this),
function () {
    var e = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    bcx.views.Locking = function () {
        function t() {}
        return t.prototype.setup = function () {
            return this.lockCount = 0, this.onUnlock = []
        }, t.prototype.retainLock = function () {
            return this.lockCount++
        }, t.prototype.releaseLock = function () {
            var e;
            this.lockCount--;
            if (this.lockCount === 0) {
                e = [];
                while (this.onUnlock.length) e.push(this.onUnlock.shift()());
                return e
            }
        }, t.prototype.whenUnlocked = function (t) {
            if (this.lockCount === 0) return t();
            if (e.call(this.onUnlock, t) < 0) return this.onUnlock.push(t)
        }, t
    }()
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        }, i = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    e = function (e) {
        function n() {
            return this.endDrag = t(this.endDrag, this), this.onKeyPress = t(this.onKeyPress, this), this.onDragInterval = t(this.onDragInterval, this), this.onDragOver = t(this.onDragOver, this), this.performDrag = t(this.performDrag, this), this.cursorChanged = t(this.cursorChanged, this), this.updateToday = t(this.updateToday, this), n.__super__.constructor.apply(this, arguments)
        }
        return r(n, e), n.viewName("calendar_grid"), n.include(bcx.views.Locking), n.prototype.events = {
            "click div.event": "calendarItemClicked",
            "click div.date": "calendarDateClicked",
            "mousedown div.event": "startDrag"
        }, n.prototype.initialize = function () {
            var e = this;
            return this.today = CalendarDate.today(), this.display = bcx.calendarDisplay, this.display.bind("change:cursor", this.cursorChanged), this.display.afterChanges(function () {
                return e.whenUnlocked(e.render)
            }), this.display.bind("current_date_range:loaded", function (t) {
                if (e.display.getFirstDate() === t) return e.whenUnlocked(e.render)
            }), this.display.loadCurrentDateRange(), setInterval(this.updateToday, 1e4)
        }, n.prototype.updateToday = function () {
            var e;
            e = CalendarDate.today();
            if (!e.equals(this.today)) return this.today = e, this.whenUnlocked(this.render)
        }, n.prototype.render = function () {
            var e;
            return e = n.__super__.render.apply(this, arguments), this.highlightDraggedCalendarItem(), this.reselectTodoUnlessDateChanged(), e
        }, n.prototype.renderCalendarEvent = function (e) {
            return JST["templates/calendar_event"]({
                    calendarEvent: e,
                    emojify: this.emojify
                })
        }, n.prototype.renderTodo = function (e) {
            return JST["templates/calendar_todo"]({
                    todo: e,
                    emojify: this.emojify,
                    truncateWord: this.truncateWord
                })
        }, n.prototype.cursorChanged = function (e, t) {
            var n;
            n = Math.abs(e.previous("cursor").daysSince(t));
            if (!this.shouldAnimateForNavigation() || n === 1) return this.render(), this.display.loadCurrentDateRange();
            switch (t.compareTo(e.previous("cursor"))) {
            case -1:
                return this.display.loadCurrentDateRange("backward"), this.animate(-1);
            case 1:
                return this.display.loadCurrentDateRange("forward"), this.animate(1)
            }
        }, n.prototype.shouldAnimateForNavigation = function () {
            return !this.display.synchronous
        }, n.prototype.animate = function (e) {
            var t, n, r, i, s, o, u, a, f, l, c, h, p = this;
            this.retainLock(), $(this.el).trigger("calendargrid:beforeanimate"), t = this.$("div.grid_content"), n = this.$("div.weeks"), o = e === 1 ? "append" : "prepend", s = n.height(), n[o](this.getWeeksForAnimation()), i = n.height(), r = 0, u = e === 1 ? [-6] : [0, 6], h = (c = n.find("div.week")).slice.apply(c, u);
            for (f = 0, l = h.length; f < l; f++) a = h[f], r += $(a).height();
            return t.css({
                    overflow: "hidden",
                    position: "relative",
                    height: s
                }), n.css({
                    position: "absolute",
                    top: e === 1 ? 0 : s - i,
                    width: "100%"
                }), t.transition({
                    height: r
                }, {
                    duration: 600
                }), n.transition({
                    top: e === 1 ? r - i : 0
                }, {
                    duration: 600,
                    complete: function () {
                        var r;
                        return u = e === 1 ? [0, -6] : [6], (r = n.find("div.week")).slice.apply(r, u).remove(), t.css({
                                overflow: "",
                                position: "",
                                height: ""
                            }), n.css({
                                position: "",
                                top: "",
                                width: ""
                            }), p.releaseLock(), $(p.el).trigger("calendargrid:afteranimate")
                    }
                })
        }, n.prototype.getWeeksForAnimation = function () {
            var e, t, n, r, s, o, u;
            e = function () {
                var e, n, r, i;
                r = this.$("div.week"), i = [];
                for (e = 0, n = r.length; e < n; e++) t = r[e], i.push($(t).data("date"));
                return i
            }.call(this), n = [], o = this.renderContents().find("div.week");
            for (r = 0, s = o.length; r < s; r++) t = o[r], (u = $(t).data("date"), i.call(e, u) < 0) && n.push(t);
            return $(n)
        }, n.prototype.insertAllDayCalendarEventElement = function (e) {
            var t, n, r;
            n = $(this.renderCalendarEvent(e)).get(0), t = CalendarDate.parse(e.get("starts_at"));
            if (r = this.findElementForCalendarDate(t)) return $(r).find("div.events.all_day").append(n), n
        }, n.prototype.calendarItemClicked = function (e) {
            var t;
            if (!$(e.target).is(":input")) return t = $(e.currentTarget).is(".selected"), t && $(e.currentTarget).hasBehavior("calendar_todo") ? this.deselectCalendarItemElement() : t || this.selectCalendarItemElement(e.currentTarget), !1
        }, n.prototype.calendarDateClicked = function (e) {
            var t;
            if (!$(e.target).is(":input")) return t = this.findCalendarDateForElement(e.currentTarget), $(e.currentTarget).trigger("calendardate:click", t), !1
        }, n.prototype.findCalendarItemForElement = function (e) {
            var t;
            return t = $(e).data("id"), $(e).hasBehavior("calendar_todo") ? this.display.todos.get(t) : this.display.calendarEvents.get(t)
        }, n.prototype.findCalendarDateForElement = function (e) {
            return CalendarDate.parse($(e).data("date"))
        }, n.prototype.findElementForCalendarDate = function (e) {
            return this.$("div.date[data-date='" + e + "']").get(0)
        }, n.prototype.selectCalendarItemElement = function (e, t) {
            return this.deselectCalendarItemElement(), this.calendarItemElement = e, this.calendarItem = t != null ? t : this.findCalendarItemForElement(e), $(e).addClass("selected"), $(e).trigger("calendaritem:select", this.calendarItem)
        }, n.prototype.deselectCalendarItemElement = function () {
            if (!this.calendarItemElement) return;
            return $(this.calendarItemElement).removeClass("selected"), $(this.calendarItemElement).trigger("calendaritem:deselect", this.calendarItem), this.calendarItem = this.calendarItemElement = null
        }, n.prototype.reselectTodoUnlessDateChanged = function () {
            var e, t;
            if (!this.calendarItemElement) return;
            if ($(this.calendarItemElement).is("[data-behavior~=calendar_todo]") && (t = $(this.calendarItemElement).data("id"))) return e = $("[data-behavior~=calendar_todo][data-id=" + t + "]").get(0), $(this.calendarItemElement).closest("div.date[data-date]").data("date") === $(e).closest("div.date[data-date]").data("date") ? this.selectCalendarItemElement(e, this.findCalendarItemForElement(e)) : (this.calendarItemElement = e, this.deselectCalendarItemElement())
        }, n.prototype.classesForDate = function (e) {
            var t;
            return t = ["date"], (this.display.firstWeekContainsToday() || e.fallsOnSameMonthAs(this.display.getBeginningOfMonth())) && t.push("current_month"), e.equals(this.today) && t.push("today"), t.join(" ")
        }, n.prototype.classesForSpannedEventFrom = function (e, t) {
            var n, r, s, o, u;
            return r = ["event"], r.push("slot_" + e.slot), r.push("width_" + e.width), t = function () {
                var e, n, r;
                r = [];
                for (e = 0, n = t.length; e < n; e++) s = t[e], r.push(s.toString());
                return r
            }(), n = e.calendarEvent, (o = n.getStartDate().toString(), i.call(t, o) < 0) && r.push("wraps_prev"), (u = n.getEndDate().toString(), i.call(t, u) < 0) && r.push("wraps_next"), r.join(" ")
        }, n.prototype.startDrag = function (e) {
            var t, n, r, i, s, o;
            if (r = this.detectDateFromMouseEvent(e)) {
                t = $(e.currentTarget);
                if (n = this.findCalendarItemForElement(t)) return e.preventDefault(), $(window).one("mouseup", this.endDrag), $(window).bind("mousemove", this.performDrag), $(window).bind("keydown", this.onKeyPress), $(this.el).bind("calendaritem:dragover", this.onDragOver), o = t.offset(), i = o.left, s = o.top, this.dragging = {
                    fromDate: r,
                    fromPageX: e.pageX,
                    fromPageY: e.pageY,
                    fromXOffset: e.pageX - i,
                    fromYOffset: e.pageY - s,
                    fromStartDate: n.getStartDate(),
                    offset: 0,
                    calendarItem: n,
                    originalEl: e.currentTarget
                }
            }
        }, n.prototype.performDrag = function (e) {
            var t, n;
            return this.dragging.$ghost || (t = Math.abs(e.pageX - this.dragging.fromPageX), n = Math.abs(e.pageY - this.dragging.fromPageY), t + n >= 3 && (this.createDragGhost(), this.createDragInterval(), $(this.el).trigger("calendaritem:dragstart", this.dragging))), this.updateDragging(e), this.updateDragGhost(e)
        }, n.prototype.updateDragging = function (e) {
            var t, n;
            n = this.dragging.dragArea, t = this.detectDragAreaFromMouseEvent(e), n && t !== n && $(n).trigger("calendaritem:dragout", this.dragging), this.dragging.pageX = e.pageX, this.dragging.pageY = e.pageY;
            if (this.dragging.dragArea = t) return $(t).trigger("calendaritem:dragover", this.dragging)
        }, n.prototype.onDragOver = function (e) {
            var t, n;
            if (t = this.detectDateFromDragArea(this.dragging.dragArea, this.dragging)) {
                (n = this.dragging.toDate) || (this.dragging.toDate = n = t);
                if (n && !n.equals(t)) return this.dragging.toDate = t, this.dragging.offset = t.daysSince(this.dragging.fromDate), $(this.el).trigger("calendaritem:dragmove", this.dragging)
            }
        }, n.prototype.createDragGhost = function () {
            var e;
            return e = $(this.dragging.originalEl), this.dragging.$ghost = e.ghost().addClass("ghost_event").addClass(e.is(".wraps_prev") ? "wraps_prev" : void 0).addClass(e.is(".wraps_next") ? "wraps_next" : void 0), this.highlightDraggedCalendarItem()
        }, n.prototype.updateDragGhost = function (e) {
            var t;
            return (t = this.dragging.$ghost) != null ? t.offset({
                    left: e.pageX - this.dragging.fromXOffset,
                    top: e.pageY - this.dragging.fromYOffset
                }) : void 0
        }, n.prototype.findDraggedElements = function () {
            var e, t;
            if (e = (t = this.dragging) != null ? t.calendarItem : void 0) return this.$("div.event[data-id='" + e.id + "']")
        }, n.prototype.highlightDraggedCalendarItem = function () {
            if (this.dragging) return this.findDraggedElements().addClass("dragging")
        }, n.prototype.removeDragGhost = function () {
            var e, t, n, r, i, s, o = this;
            return t = this.findDraggedElements(), this.retainLock(), r = this.dragging.$ghost, e = this.$("div.date[data-date='" + this.dragging.toDate + "']"), n = e.closest("div.week").find("div.event[data-id='" + this.dragging.calendarItem.id + "']"), i = function () {
                return t.removeClass("dragging"), r.remove(), o.releaseLock()
            }, (s = n.offset()) ? r.transition({
                    top: s.top,
                    left: s.left,
                    width: n.width()
                }, {
                    timing: "ease-in",
                    complete: i
                }) : i()
        }, n.prototype.createDragInterval = function () {
            return this.dragging.interval = window.setInterval(this.onDragInterval, 50)
        }, n.prototype.onDragInterval = function () {
            return this.updateDragging(this.dragging)
        }, n.prototype.removeDragInterval = function () {
            return window.clearInterval(this.dragging.interval), this.dragging.interval = null
        }, n.prototype.onKeyPress = function (e) {
            if (e.keyCode === $.ui.keyCode.ESCAPE) return e.preventDefault(), this.dragging.toDate = this.dragging.fromStartDate, this.dragging.offset = 0, $(this.el).trigger("calendaritem:dragmove", this.dragging), this.render(), this.endDrag()
        }, n.prototype.endDrag = function () {
            return this.dragging.$ghost && (this.removeDragInterval(), this.removeDragGhost(), $(this.el).trigger("calendaritem:dragend", this.dragging)), $(window).unbind("mousemove", this.performDrag), $(window).unbind("keydown", this.onKeyPress), $(this.el).unbind("calendaritem:dragover", this.onDragOver), this.dragging = !1
        }, n.prototype.detectDragAreaFromMouseEvent = function (e) {
            return _($("[data-behavior~=calendar_event_drag_area]")).detect(function (t) {
                return $(t).containsPoint(e)
            })
        }, n.prototype.detectDateFromMouseEvent = function (e) {
            var t;
            if (t = this.detectDragAreaFromMouseEvent(e)) return this.detectDateFromDragArea(t, e)
        }, n.prototype.detectDateFromDragArea = function (e, t) {
            var n, r, i, s, o, u, a;
            n = $(e).closest("div.week");
            if (!n.length) return;
            return s = CalendarDate.parse(n.find("div.date:first").attr("data-date")), o = n.offset().left, u = n.width(), r = u / 7, i = t.pageX - o, a = Math.floor(i / r), s.next(a)
        }, n
    }(bcx.Autoview)
}.call(this),
function () {
    var e = function (e, t) {
        return function () {
            return e.apply(t, arguments)
        }
    }, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        }, r = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    bcx.views.CalendarInviteeField = function (t) {
        function i() {
            return this.currentPersonCanChangeAccess = e(this.currentPersonCanChangeAccess, this), i.__super__.constructor.apply(this, arguments)
        }
        return n(i, t), i.prototype.removable = function () {
            return this.readOnly() && this.model.isEnabled() && this.currentPersonCanChangeAccess()
        }, i.prototype.currentPersonCanChangeAccess = function () {
            var e, t, n, i, s, o, u = this;
            i = this.options.parent;
            if (bcx.currentPerson.isAdmin() || (s = this.model.id, r.call(i.selectedPeopleIds, s) < 0)) return !0;
            if (n = $(i.el).closest("[data-calendar-id]").data("calendar-id")) return t = (o = bcx.calendars.get(n)) != null ? o.accesses() : void 0, e = _(t).find(function (e) {
                return e.person_id === u.model.get("person_id")
            }), e && e.creator_id === bcx.currentPerson.id
        }, i
    }(bcx.views.InviteeField)
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    e = bcx.views.CalendarInviteeField, bcx.views.CalendarInviteeFieldList = function (n) {
        function i() {
            return this.isInSelectedPeople = t(this.isInSelectedPeople, this), this.replaceView = t(this.replaceView, this), this.onAddSelection = t(this.onAddSelection, this), this.onRemoveSelection = t(this.onRemoveSelection, this), i.__super__.constructor.apply(this, arguments)
        }
        return r(i, n), i.prototype.initialize = function () {
            var e, t;
            return i.__super__.initialize.apply(this, arguments), this.removedPeople = [], this.selectedPeopleIds = _((t = $(this.el).data("selected-people-ids")) != null ? t : []).reject(function (e) {
                return e === "person_" + bcx.currentPerson.id
            }), this.selectionPeople = function () {
                var t, n, r, i;
                r = this.selectedPeopleIds, i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(this.collection.get(e));
                return i
            }.call(this), this.selectionPeople.push(new this.collection.model, new this.collection.model, new this.collection.model), this.selection.reset(this.selectionPeople), this.selection.bind("remove", this.onRemoveSelection)
        }, i.prototype.viewConstructorFor = function (t) {
            return t.isGroup() ? i.__super__.viewConstructorFor.apply(this, arguments) : e
        }, i.prototype.onRemoveSelection = function (e) {
            if (this.isInSelectedPeople(e)) return this.removedPeople.push(e.get("person_id"))
        }, i.prototype.onAddSelection = function (e) {
            if (this.isInSelectedPeople(e)) return this.removedPeople = _(this.removedPeople).without(e.get("person_id"))
        }, i.prototype.replaceView = function (e, t) {
            return i.__super__.replaceView.apply(this, arguments), this.onAddSelection(t)
        }, i.prototype.reset = function () {
            return this.selection.reset(this.selectionPeople)
        }, i.prototype.reload = function () {
            return i.__super__.reload.apply(this, arguments), this.removedPeople = []
        }, i.prototype.isInSelectedPeople = function (e) {
            return e.get("person_id") && this.selectedPeopleIds.indexOf(e.id) >= 0
        }, i
    }(bcx.views.InviteeFieldList)
}.call(this),
function () {
    var e = function (e, t) {
        return function () {
            return e.apply(t, arguments)
        }
    }, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        };
    bcx.views.CalendarItemEditorView = function (t) {
        function r() {
            return this.finalizePopover = e(this.finalizePopover, this), this.changeSubscribersClicked = e(this.changeSubscribersClicked, this), this.enableBucketAndSubscriberFields = e(this.enableBucketAndSubscriberFields, this), this.render = e(this.render, this), r.__super__.constructor.apply(this, arguments)
        }
        return n(r, t), r.viewName("calendar_item_editor"), r.include(bcx.views.Popover), r.recordName("calendarItem"), r.prototype.initialize = function () {
            return r.__super__.initialize.apply(this, arguments), this.display = bcx.calendarDisplay, this.display.bind("reset", this.hide), bcx.peopleAndGroups.bind("loaded:withAccess", this.enableBucketAndSubscriberFields), $(this.el).bind("popover:show", this.finalizePopover), this.events = _.extend({}, this.events, {
                    "change select[data-behavior~=bucket_selector]": "bucketSelected",
                    "click a.done_editing[data-behavior~=slide]": "doneEditingClicked",
                    "slider:beforeslide li.slide[data-slide-index=1]": "changeSubscribersClicked",
                    "slider:slide": "slideBalloonIntoView",
                    "click [data-behavior~=subscriber_select_all], [data-behavior~=subscriber_select_none]": "toggleAllSubscribers",
                    "click [data-behavior~=toggle_subscribers] input:checkbox": "toggleWantsNotification",
                    "popover:hide": "cancelRecurrenceChange"
                }), this.delegateEvents()
        }, r.prototype.setCurrentBucket = function () {
            var e, t, n;
            return this.currentBucket = (e = (t = (n = this.calendarEvent.bucket()) != null ? n : this.lastUsedBucket) != null ? t : bcx.calendars.first()) != null ? e : bcx.projects.first()
        }, r.prototype.afterShow = function (e) {
            return this.setupPlaceholder(), this.initializeSlider(), this.setWantsNotification()
        }, r.prototype.afterHide = function (e) {
            if (!e) return $(this.el).trigger("calendaritemeditor:hide")
        }, r.prototype.render = function () {
            return this.setCurrentBucket(), r.__super__.render.apply(this, arguments)
        }, r.prototype.slideBalloonIntoView = function () {
            var e = this;
            return _.defer(function () {
                return e.$("> div.balloon").slideIntoView()
            })
        }, r.prototype.repositionRelativeTo = function (e) {
            var t, n, r, i, s, o, u, a, f, l;
            return i = $(e), r = $(e).find("> span.event"), n = r.outerWidth() > i.outerWidth() ? i : r, t = this.$("> div.balloon"), l = n.offset(), u = l.left, f = l.top, o = n.width(), s = t.outerWidth() + t.find("> span.arrow").outerWidth(), a = $(document).width(), u + o + s > a ? (this.setArrowOrientation("left"), $(this.el).offset({
                        top: f,
                        left: u
                    })) : (this.setArrowOrientation("right"), $(this.el).offset({
                        top: f,
                        left: u + o
                    })), this.slideBalloonIntoView()
        }, r.prototype.setArrowOrientation = function (e) {
            var t;
            return t = this.$("> div.balloon"), e === "right" ? t.removeClass("left_side").addClass("right_side") : t.removeClass("right_side").addClass("left_side")
        }, r.prototype.autofocus = function () {
            $(":input[name=summary], :input[name=description]").autoResize();
            if (this.calendarEvent.isNew()) return $(":input[name=summary]").focus().select()
        }, r.prototype.setupPlaceholder = function () {
            return $(this.el).find("[data-behavior~=placeholder]").placeholder()
        }, r.prototype.enableBucketAndSubscriberFields = function () {
            var e, t;
            e = this.$("fieldset[data-role=bucket_fields]"), t = this.$("fieldset[data-role=subscriber_fields]");
            if (e.find(":input:disabled").length) {
                t.replaceWith(JST["templates/calendar_event_editor/subscriber_fields"](this));
                if (this.currentPersonCanChangeBucket()) return e.replaceWith(JST["templates/calendar_event_editor/bucket_fields"](this))
            }
        }, r.prototype.updateCalendarEventAttributes = function () {
            var e, t, n, i;
            r.__super__.updateCalendarEventAttributes.apply(this, arguments), i = this.$(":input[name~=wants_notification]").is(":checked"), n = function () {
                var t, n, r, i;
                r = this.calendarEvent.subscribers(), i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.get("person_id"));
                return i
            }.call(this);
            if (i) switch (this.$(":input[name~='subscriber[group]']:checked").val()) {
            case "me":
                n = [bcx.currentPerson.id];
                break;
            case "everyone":
                n = function () {
                    var e, n, r, i;
                    r = this.selectedBucket().people(), i = [];
                    for (e = 0, n = r.length; e < n; e++) t = r[e], i.push(t.get("person_id"));
                    return i
                }.call(this);
                break;
            case "selected":
                n = this.selectedsubscriberIds()
            }
            return this.calendarEvent.set({
                    wants_notification: i,
                    subscribers: n
                })
        }, r.prototype.initializeSlider = function () {
            return this.$("[data-behavior~=slider]").slider()
        }, r.prototype.setWantsNotification = function () {
            if (this.calendarEvent.get("wants_notification")) return this.toggleWantsNotification()
        }, r.prototype.bucketSelected = function (e) {
            var t, n, r, i, s, o, u, a, f;
            t = this.selectedBucket(), f = [], o = this.$(":input[name~='subscriber[group]']:checked").val();
            if (!this.calendarEvent.isNew() && t === this.calendarEvent.bucket()) f = this.calendarEvent.subscribers();
            else if (o === "everyone" || o === "selected") o === "everyone" ? u = function () {
                var e, t, n, r;
                n = this.$(":input[name='message[subscribers][]']"), r = [];
                for (e = 0, t = n.length; e < t; e++) a = n[e], r.push(a.value);
                return r
            }.call(this): u = this.selectedsubscriberIds(),
            r = function () {
                var e, t, n;
                n = [];
                for (e = 0, t = u.length; e < t; e++) i = u[e], n.push(bcx.peopleAndGroups.get("person_" + i));
                return n
            }(),
            n = _(t.people()),
            f = _(r).select(function (e) {
                return n.include(e)
            });
            this.$("[data-role~=subscriber_options]").html(JST["templates/calendar_event_editor/subscriber_options"]({
                        subscribers: f,
                        unsubscribers: t.unsubscribers(),
                        bucket: t
                    })), this.$("[data-role~=bucket_subscribers]").html(JST["templates/bucket_subscribers"]({
                        bucket: t,
                        selectedSubscribers: f
                    })), r != null && r.length !== f.length && this.$("p.subscribers_modified").fadeIn("300"), s = this.$(":input[name~='subscriber[group]']:checked");
            if (s.val() !== o) return s.closest("label").highlight()
        }, r.prototype.doneEditingClicked = function (e) {
            var t, n, r, i = this;
            return t = this.selectedBucket(), n = _(this.selectedsubscriberIds()), r = _(t.people()).select(function (e) {
                return n.include("" + e.get("person_id"))
            }), this.$("[data-role~=subscriber_options]").html(JST["templates/calendar_event_editor/subscriber_options"]({
                        subscribers: r,
                        unsubscribers: t.unsubscribers(),
                        bucket: t
                    }))
        }, r.prototype.changeSubscribersClicked = function (e) {
            var t = this;
            return setTimeout(function () {
                return t.$(":input[name=~'subscriber[group]'][value='selected']").attr("checked", !0)
            }, 1)
        }, r.prototype.toggleWantsNotification = function () {
            var e, t;
            return e = this.$(":input[name~=wants_notification]"), t = this.$("[data-role~=subscriber_options]"), this.$(".slides").css({
                    height: "auto"
                }), e.is(":checked") ? (t.expand(), this.slideBalloonIntoView()) : t.collapse()
        }, r.prototype.toggleAllSubscribers = function (e) {
            var t, n;
            return e.preventDefault(), t = $(e.currentTarget), n = t.data("behavior") === "subscriber_select_all", this.$('input:checkbox[name~="message[subscribers][]"]').attr("checked", n)
        }, r.prototype.selectedBucket = function () {
            var e;
            if (e = this.$(":input[name=bucket]").val()) return bcx.getBucket(e)
        }, r.prototype.selectedsubscriberIds = function () {
            var e, t, n, r, i;
            r = this.$(":input[name='message[subscribers][]']:checked"), i = [];
            for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.value);
            return i
        }, r.prototype.finalizePopover = function () {
            var e;
            return this.$("input[name~=wants_notification]").removeAttr("disabled"), this.$(":input[name=bucket]").val() != null && this.bucketSelected(), e = this.$("select[name~=bucket]"), this.currentPersonCanChangeBucket() ? e.removeAttr("disabled") : e.closest("[data-role~=bucket_container]").hide()
        }, r.prototype.currentPersonCanChangeBucket = function () {
            return this.calendarEvent.isNew() || bcx.currentPerson.isAdmin() || bcx.currentPerson.id === this.calendarEvent.get("creator_id")
        }, r.prototype.calendarEventRequestSucceeded = function () {
            var e;
            return e = this.calendarEvent.subscribers(), this.display.setBucketVisibility(this.calendarEvent.bucket(), !0), this.calendarEvent.isNew() && e.length && (e.length > 1 || e[0].get("person_id") !== bcx.currentPerson.id) ? this.markAsNotified() : (this.markAsNotBusy(), this.hide())
        }, r.prototype.calendarEventRequestFailed = function () {
            return this.markAsFailed()
        }, r.prototype.markAsNotified = function () {
            var e;
            return e = $(this), this.updateAlertText("data-succeeded-text"), this.$("form").addClass("succeeded").onTransitionEnd(function () {
                var t = this;
                return setTimeout(function () {
                    return e.trigger("hide")
                }, 1e3)
            })
        }, r.prototype.markAsFailed = function () {
            return this.updateAlertText("data-failed-text"), this.$("form").addClass("failed").onTransitionEnd(function () {
                var e = this;
                return setTimeout(function () {
                    return e.$("form").removeClass("failed busy")
                }, 1250)
            })
        }, r.prototype.updateAlertText = function (e) {
            var t;
            return t = this.$("form").find("[data-behavior~=calendar_alert]"), t.html(t.attr(e))
        }, r.prototype.submitForm = function () {
            if (!this.$("form[data-behavior~=edit_calendar_todo]").length) return this.storeLastUsedBucket(), r.__super__.submitForm.apply(this, arguments)
        }, r.prototype.storeLastUsedBucket = function () {
            return this.lastUsedBucket = this.selectedBucket()
        }, r.prototype.cancelRecurrenceChange = function () {
            var e;
            if ((e = this.calendarEvent) != null ? e.fromStartDate : void 0) return this.calendarEvent.setStartDate(this.calendarEvent.fromStartDate), this.calendarEvent.fromStartDate = null
        }, r
    }(bcx.AbstractCalendarEventEditor)
}.call(this),
function () {
    var e, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        };
    e = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return n(t, e), t.viewName("calendar_jump"), t.include(bcx.views.Popover), t.recordName("cursor"), t.prototype.className = "position_reference", t.prototype.events = {
            "click [data-direction=backward]": "navigateBackward",
            "click [data-direction=forward]": "navigateForward",
            "click [data-date]": "monthClicked"
        }, t.prototype.initialize = function () {
            return this.display = bcx.calendarDisplay, this.cursor = this.display.getSignificantDate()
        }, t.prototype.getFirstMonth = function () {
            var e;
            return e = CalendarDate.today().year % 2, this.cursor.year % 2 === e ? this.cursor.beginningOfYear() : this.cursor.beginningOfYear().previous().beginningOfYear()
        }, t.prototype.navigateBackward = function () {
            return this.cursor = this.cursor.nextMonth(-24), this.render(), !1
        }, t.prototype.navigateForward = function () {
            return this.cursor = this.cursor.nextMonth(24), this.render(), !1
        }, t.prototype.monthClicked = function (e) {
            var t;
            return t = CalendarDate.parse($(e.currentTarget).data("date")), this.display.navigateToMonth(t), this.hide(), !1
        }, t
    }(bcx.Autoview)
}.call(this),
function () {
    var e, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        };
    e = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return n(t, e), t.viewName("calendar_list"), t.prototype.initialize = function () {
            return this.renderLater = _.debounce(this.render), this.calendars = bcx.calendars, this.calendars.bind("all", this.renderLater), this.projects = bcx.projects, this.projects.bind("all", this.renderLater), this.display = bcx.calendarDisplay, this.display.bind("change:hiddenBucketData", this.renderLater), this.display.bind("change:zoomedIn", this.renderLater), bcx.bucketAccesses.bind("all", this.renderLater), bcx.todos.bind("all", this.renderLater)
        }, t
    }(bcx.Autoview)
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in
                t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    e = function (e) {
        function n() {
            return this.hideSpinner = t(this.hideSpinner, this), this.showSpinner = t(this.showSpinner, this), this.cursorChanged = t(this.cursorChanged, this), n.__super__.constructor.apply(this, arguments)
        }
        return r(n, e), n.viewName("calendar_navigation"), n.prototype.tagName = "header", n.prototype.events = {
            "click [data-behavior~=navigate]": "navigationButtonClicked",
            "click [data-behavior~=jump_to_month]": "jumpToMonthLinkClicked"
        }, n.prototype.initialize = function () {
            return this.display = bcx.calendarDisplay, this.display.afterDisplayChanges(this.cursorChanged), this.display.bind("current_date_range:loading", this.showSpinner), this.display.bind("current_date_range:loaded", this.hideSpinner)
        }, n.prototype.installSubviews = function () {
            return n.__super__.installSubviews.apply(this, arguments), this.jump = this.findSubviewByName("calendar_jump")
        }, n.prototype.cursorChanged = function () {
            return this.jump.hide(), this.render()
        }, n.prototype.navigationButtonClicked = function (e) {
            var t;
            t = $(e.currentTarget).data("direction");
            switch (t) {
            case "backward":
                this.display.navigateBackward();
                break;
            case "forward":
                this.display.navigateForward();
                break;
            case "today":
                this.display.navigateToToday()
            }
            return !1
        }, n.prototype.jumpToMonthLinkClicked = function (e) {
            return this.jump.showWith(this.display.getSignificantDate()), !1
        }, n.prototype.showSpinner = function () {
            return this.showingSpinner = !0, this.$("span.busy").show()
        }, n.prototype.hideSpinner = function () {
            return this.showingSpinner = !1, this.$("span.busy").hide()
        }, n
    }(bcx.Autoview)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    this.DateDisplayView = function (e) {
        function r() {
            return r.__super__.constructor.apply(this, arguments)
        }
        var n;
        return t(r, e), r.viewName("date_display"), r.prototype.initialize = function () {
            return this.renderLater = _.debounce(this.render, 1), this.bucket = bcx.getBucket(this.identifier), this.calendarEvents = bcx.calendarEvents, this.calendarEvents.bind("all", this.renderLater), this.todos = bcx.todos, this.todos.bind("all", this.renderLater), bcx.peopleAndGroups.bind("loaded:projectParticipants", this.renderLater), bcx.peopleAndGroups.loadCurrentProjectParticipants()
        }, r.prototype.render = function () {
            return this.setEventsForDisplay(), r.__super__.render.apply(this, arguments)
        }, r.prototype.getColor = function () {
            var e, t;
            return (e = (t = bcx.currentProject) != null ? t.getColor() : void 0) != null ? e : bcx.bucketColors[0]
        }, r.prototype.addUpcomingRecurrences = function () {
            var e, t = this;
            return e = this.calendarEvents.select(function (e) {
                return e.bucket() === t.bucket && e.isRecurring()
            }), _(e).each(function (e) {
                return e.addRecurrencesInRange(CalendarDate.today(), CalendarDate.today().next(84))
            })
        }, r.prototype.setEventsForDisplay = function () {
            var e = this;
            return this.addUpcomingRecurrences(), this.events = this.calendarEvents.select(function (t) {
                return t.bucket() === e.bucket
            }).concat(bcx.todos.select(function (t) {
                        return t.bucket() === e.bucket
                    })), this.pastEvents = n(this.events, "past"), this.upcomingEvents = n(this.events, "upcoming")
        }, r.prototype.renderDateAndEvents = function (e, t) {
            var n, r;
            return this.safe(JST["templates/day_of_date"]({
                        day: e,
                        calendarEvents: (n = t.CalendarEvent) != null ? n : [],
                        todos: (r = t.Todo) != null ? r : [],
                        color: this.getColor(),
                        emojify: this.emojify,
                        pluralize: this.pluralize,
                        isTemplate: this.bucket.isTemplate()
                    }))
        }, n = function (e, t) {
            var n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C, k, L, A;
            d = CalendarDate.today(), f = 0, r = t === "upcoming" ? function (e) {
                return e.date >= d.date
            } : function (e) {
                return e.date < d.date
            }, o = {};
            for (g = 0, w = e.length; g < w; g++) {
                s = e[g], x = s.getDates();
                for (y = 0, E = x.length; y < E; y++) {
                    n = x[y];
                    if (!r(n)) continue;
                    v = s.constructor.modelName, a = n.toString(), p = (T = o[a]) != null ? T : o[a] = {}, (N = p[v]) == null && (p[v] = []), p[v].push(s), f++
                }
            }
            c = {
                length: f
            }, i = Object.keys(o).sort(), t === "past" && (i = i.reverse());
            for (b = 0, S = i.length; b < S; b++) a = i[b], u = o[a], n = CalendarDate.parse(a), h = n.is(d) ? (C = c.today) != null ? C : c.today = [] : t === "upcoming" && n.occursThisWeek() ? (k = c.thisWeek) != null ? k : c.thisWeek = [] : (l = n.beginningOfMonth().toString(), (L = c.byMonth) != null ? L : c.byMonth = [], (A = (m = c.byMonth)[l]) != null ? A : m[l] = []), h.push([n, u]);
            return c
        }, r
    }(bcx.Autoview)
}.call(this),
function () {
    var e, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        }, r = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        };
    e = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return n(t, e), t.prototype.template = "templates/membership_suggestions", t
    }(bcx.views.AutocompletePeopleSuggestions), bcx.views.MemberField = function (t) {
        function i() {
            return this.remove = r(this.remove, this), this.replace = r(this.replace, this), this.appendTo = r(this.appendTo, this), this.modelRemoved = r(this.modelRemoved, this), this.modelReplaced = r(this.modelReplaced, this), i.__super__.constructor.apply(this, arguments)
        }
        return n(i, t), i.prototype.className = "person invitee member field", i.prototype.template = "templates/member_field", i.prototype.events = {
            "focus input": "inputFocused",
            "input:change input": "inputChanged",
            "suggestions:commit": "suggestionPicked",
            "click [data-behavior~=remove_member]": "removeControlClicked"
        }, i.prototype.initialize = function () {
            return this.selection = this.options.selection, this.install(), this.suggestionsView = new e({
                    el: this.el,
                    model: this.model,
                    collection: this.collection
                })
        }, i.prototype.install = function () {
            return this.model.bind("replace", this.modelReplaced), this.model.bind("remove", this.modelRemoved)
        }, i.prototype.uninstall = function () {
            return this.model.unbind("replace", this.modelReplaced), this.model.unbind("remove", this.modelRemoved), this.unbind()
        }, i.prototype.render = function () {
            return $(this.el).html(JST[this.template](this)), this.updateHiddenInputs(), this.updateAllClassNames()
        }, i.prototype.update = function () {
            return this.updateHiddenInputs(), this.updateBlankClassName(), $(this.el).removeClass("invalid"), $(this.el).removeClass("unknown")
        }, i.prototype.updateHiddenInputs = function () {
            return this.$("[data-role~=person_id_input]").val(this.model.get("person_id"))
        }, i.prototype.updateAllClassNames = function () {
            return this.updateBlankClassName(), this.updateUnknownClassName(), this.updateDisabledClassName()
        }, i.prototype.updateBlankClassName = function () {
            return $(this.el).toggleClass("blank", this.model.isBlank())
        }, i.prototype.updateUnknownClassName = function () {
            return $(this.el).toggleClass("unknown", this.model.hasUnknownName())
        }, i.prototype.updateDisabledClassName = function () {
            return $(this.el).toggleClass("disabled", this.model.isDisabled())
        }, i.prototype.inputFocused = function () {
            return $(this.el).addClass("focused"), this.events.clickoutside = "inputLostFocus", this.events.focusoutside = "inputLostFocus", this.delegateEvents()
        }, i.prototype.inputLostFocus = function () {
            return $(this.el).removeClass("focused"), delete this.events.clickoutside, delete this.events.focusoutside, this.delegateEvents(), this.render()
        }, i.prototype.inputChanged = function (e, t) {
            return this.model.setInput(t.currentValue)
        }, i.prototype.suggestionPicked = function (e, t) {
            return e.preventDefault(), this.selection.replace(this.model, t.suggestion)
        }, i.prototype.removeControlClicked = function (e) {
            return $(e.target).addClass("activated"), this.selection.remove(this.model)
        }, i.prototype.modelReplaced = function (e) {
            return this.trigger("replace", this, e)
        }, i.prototype.modelRemoved = function () {
            return this.remove()
        }, i.prototype.appendTo = function (e) {
            return this.render(), $(e).append(this.el)
        }, i.prototype.replace = function (e) {
            return this.render(), $(e).replaceWith(this.el)
        }, i.prototype.remove = function () {
            var e = this;
            return this.uninstall(), $(this.el).delay(50).animate({
                    opacity: 0
                }, 200, "linear", function () {
                    return $(e.el).animate({
                            height: 0
                        }, Math.sqrt($(e.el).height()) * 50, "easeOutQuad", function () {
                            return $(e.el).remove()
                        })
                })
        }, i.prototype.readOnly = function () {
            return this.model.has("id")
        }, i.prototype.removable = function () {
            return this.readOnly() && this.model.isEnabled()
        }, i
    }(bcx.View)
}.call(this),
function () {
    var e, t, n, r = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, i = {}.hasOwnProperty,
        s = function (e, t) {
            function r() {
                this.constructor = e
            }
            for (var n in t) i.call(t, n) && (e[n] = t[n]);
            return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
        };
    t = bcx.collections.PeopleAndGroups, e = bcx.views.MemberField, bcx.views.MemberFieldList = function (i) {
        function o() {
            return this.resetView = r(this.resetView, this), this.replaceView = r(this.replaceView, this), this.addView = r(this.addView, this), o.__super__.constructor.apply(this, arguments)
        }
        return s(o, i), o.prototype.firsthumanInput = "[data-role~=human_input]:first", o.prototype.events = {
            "focus div.field:last-child": "lastFieldFocused"
        }, o.prototype.initialize = function () {
            return this.disabledIds = $(this.el).data("disabled-ids"), this.collection = new t($(this.el).data("people"), {
                    disabledIds: this.disabledIds
                }), this.selection = new n([new this.collection.model, new this.collection.model, new this.collection.model]), this.selection.each(this.addView), this.selection.bind("add", this.addView), this.selection.bind("reset", this.resetView)
        }, o.prototype.createView = function (t) {
            var n, r;
            return n = e, r = new n({
                    model: t,
                    collection: this.collection,
                    selection: this.selection
                }), r.bind("replace", this.replaceView)
        }, o.prototype.addView = function (e) {
            var t;
            return t = this.createView(e), t.appendTo(this.el)
        }, o.prototype.replaceView = function (e, t) {
            var n;
            return n = this.createView(t), n.replace(e.el), this.focusNextField(n.el)
        }, o.prototype.resetView = function () {
            return $(this.el).html(""), this.selection.each(this.addView)
        }, o.prototype.lastFieldFocused = function (e) {
            if (this.$("div.blank.field").size() === 1) return this.selection.add(new this.collection.model)
        }, o.prototype.focusNextField = function (e) {
            return $(e).next("div.field").find(this.firsthumanInput).focus()
        }, o.prototype.focus = function () {
            return this.$(this.firsthumanInput).focus()
        }, o.prototype.reset = function () {
            return this.selection.reset([new this.collection.model, new this.collection.model, new this.collection.model])
        }, o.prototype.reload = function () {
            return this.collection = new t($(this.el).data("people"), {
                    disabledIds: this.disabledIds
                }), this.reset()
        }, o
    }(bcx.View), n = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return s(t, e), t.prototype.add = function (e, n) {
            var r, i, s, o;
            n == null && (n = {}), _.isArray(e) || (e = [e]);
            for (s = 0, o = e.length; s < o; s++) i = e[s], (r = this.getByCid(i.cid)) && this.remove(r, n);
            return t.__super__.add.call(this, e, n)
        }, t.prototype.replace = function (e, t) {
            return this.remove(t), this.remove(e, {
                    silent: !0
                }), this.add(t, {
                    silent: !0
                }), t.isGroup() && this.add(t.members().enabled(), {
                    silent: !0
                }), e.trigger("replace", t), this.trigger("replace", e, t)
        }, t
    }(Backbone.Collection)
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    e = function (e) {
        function n() {
            return this.hide = t(this.hide, this), n.__super__.constructor.apply(this, arguments)
        }
        return r(n, e), n.viewName("project_calendar_event_editor"), n.include(bcx.views.Autoresize), n.prototype.initialize = function () {
            var e;
            return n.__super__.initialize.apply(this, arguments), e = this.identifier.split("-")[0].split(":"), this.bucketType = e[0], this.bucketId = e[1], e
        }, n.prototype.renderWithCalendarEvent = function (e) {
            return this.calendarEvent = e, this.render(), this.setupPlaceholder()
        }, n.prototype.autofocus = function () {
            var e = this;
            return _.defer(function () {
                return e.$(":input[name=summary]").focus().get(0).select()
            })
        }, n.prototype.setupPlaceholder = function () {
            return $(this.el).find("[data-behavior~=placeholder]").placeholder()
        }, n.prototype.hide = function () {
            return $(this.el).find("article.calendar_event.new").collapse(), $("#calendar_event").show(), $("#calendar_event_form").hide()
        }, n.prototype.updateCalendarEventAttributes = function () {
            var e, t, r, i, s, o, u;
            n.__super__.updateCalendarEventAttributes.apply(this, arguments), $(":input[name='calendar_event[subscribers][]'][type~=hidden]"), s = function () {
                var e, t, n, r;
                n = this.$(":input[name='calendar_event[subscribers][]']:checked"), r = [];
                for (e = 0, t = n.length; e < t; e++) i = n[e], r.push(i.value);
                return r
            }.call(this), t = this.$(":input[name='calendar_event[subscribers][]'][type~=hidden]:not([disabled])");
            for (o = 0, u = t.length; o < u; o++) e = t[o], s.push(e.value);
            return this.calendarEvent.set({
                    subscribers: s
                }), r = function () {
                var e, t, n, r;
                n = this.$(":input[name='calendar_event[new_subscriber_emails][]']"), r = [];
                for (e = 0, t = n.length; e < t; e++) i = n[e], r.push(i.value);
                return r
            }.call(this), this.calendarEvent.set({
                    new_subscriber_emails: _(r).compact()
                })
        }, n.prototype.selectedBucket = function () {
            return this.calendarEvent.bucket()
        }, n.prototype.calendarEventRecurrenceRequestSucceeded = function () {
            return Stacker.workspace.visit(this.calendarEvent.url(), {
                    replaceSheet: !0
                })
        }, n
    }(bcx.AbstractCalendarEventEditor), bcx.ProjectCalendarEventEditorView = e
}.call(this),
function () {
    var e, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        };
    e = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return n(t, e), t.viewName("project_dates"), t.prototype.initialize = function () {
            return this.truncationLimit = 5, this.today = CalendarDate.today(), this.project = bcx.projects.get(this.identifier), this.calendarEvents = bcx.calendarEvents, this.calendarEvents.bind("all", _.debounce(this.render))
        }, t.prototype.render = function () {
            return t.__super__.render.apply(this, arguments), this.updateSheetMargin()
        }, t.prototype.truncatedUpcomingEventsGroupedByDate = function () {
            var e, t, n, r, i, s, o, u, a, f;
            r = this.allUpcomingEvents().slice(0, this.truncationLimit - 1), s = {};
            for (u = 0, a = r.length; u < a; u++) e = r[u], o = e.getStartDate(), n = (e.isSpanned() && o.date < this.today.date ? this.today : o).toString(), (f = s[n]) == null && (s[n] = []), s[n].push(e);
            t = [];
            for (e in s) i = s[e], t.push([e, i]);
            return _(t).sortBy(function (e) {
                return CalendarDate.parse(e[0])
            })
        }, t.prototype.moreUpcomingEventsCount = function () {
            var e;
            return e = this.allUpcomingEvents().length, e > this.truncationLimit ? e - this.truncationLimit : 0
        }, t.prototype.dateLabelFor = function (e) {
            return e.value === this.today.value ? "Today" : e.occursThisYear() ? "" + e.getMonthName() + " " + e.day : "" + e.getMonthName() + " " + e.day + ", " + e.year
        }, t.prototype.untilDateFor = function (e) {
            return e.isSpanned() ? "(until " + this.dateLabelFor(e.getEndDate()) + ")" : ""
        }, t.prototype.updateSheetMargin = function () {
            var e, t;
            return t = this.allUpcomingEvents().length, e = $("div.project > div.sheet_body"), t > 0 ? e.addClass("has_upcoming_events") : e.removeClass("has_upcoming_events")
        }, t.prototype.allUpcomingEvents = function () {
            var e, t = this;
            return e = _(this.calendarEvents.getCalendarEventsOccurringOnOrAfter(this.today)).select(function (e) {
                return e.bucket() === t.project
            }), _.reject(e, function (e) {
                return e.isTimed() && e.getStartsAt() < (new Date).getTime()
            })
        }, t
    }(bcx.Autoview)
}.call(this),
function () {
    var e, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        };
    e = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return n(t, e), t.viewName("project_editor"), t.include(bcx.views.Popover), t.recordName("project"), t.prototype.events = {
            "submit form": "submitForm",
            "click [data-behavior~=cancel]": "cancel"
        }, t.prototype.initialize = function () {
            return this.project = new bcx.models.Project
        }, t.prototype.submitForm = function () {
            var e = this;
            return this.$("form").addClass("busy"), this.project.save(this.getProjectAttributes(), {
                    success: function () {
                        return e.hide()
                    },
                    error: function () {
                        return console.warn("failure!")
                    }
                }), !1
        }, t.prototype.getProjectAttributes = function () {
            return {
                color: this.$("[name=color]:checked").val()
            }
        }, t.prototype.cancel = function () {
            return this.hide()
        }, t.prototype.afterHide = function (e) {
            if (!e) return $(this.el).trigger("project_editor:hide")
        }, t
    }(bcx.Autoview)
}.call(this),
function () {
    var e, t, n, r, i, s, o, u, a = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, f = {}.hasOwnProperty,
        l = function (e, t) {
            function r() {
                this.constructor = e
            }
            for (var n in t) f.call(t, n) && (e[n] = t[n]);
            return r.prototype = t.prototype, e.prototype = new r, e.__super__ = t.prototype, e
        };
    u = function () {
        function e(e) {
            var t;
            this.project = e, this.scrollTo = a(this.scrollTo, this), this.selector = "section[data-collection-name=" + this.name + "]", (t = this.counter) == null && (this.counter = "" + this.name + "_count")
        }
        return e.prototype.url = function (e) {
            return e == null && (e = ""), "/" + bcx.currentAccountSlug + "/projects/" + this.project.get("param") + "/" + this.name + e
        }, e.prototype.count = function () {
            return this.project.get(this.counter)
        }, e.prototype.pluralizedCount = function () {
            var e;
            switch (e = this.count()) {
            case 0:
                return "" + this.title + "s";
            case 1:
                return "1 " + this.title;
            default:
                return "" + e + " " + this.title + "s"
            }
        }, e.prototype.isInProject = function () {
            return this.project.get("" + this.name + "_count") !== 0
        }, e.prototype.isNotInProject = function () {
            return this.project.get("" + this.name + "_count") === 0
        }, e.prototype.scrollTo = function () {
            return $.scrollTo(this.selector, 500, {
                    offset: -40
                })
        }, e.prototype.open = function () {
            return Stacker.workspace.visit(this.url())
        }, e.prototype.create = function () {
            return $("" + this.selector + " > article.new").expand(), setTimeout(this.scrollTo, 10)
        }, e
    }(), t = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return l(t, e), t.prototype.name = "topics", t.prototype.title = "Discussion", t.prototype.pitch = "Discussion", t.prototype.create = function () {
            return Stacker.workspace.visit("/" + bcx.currentAccountSlug + "/projects/" + this.project.get("param") + "/messages/new")
        }, t
    }(u), r = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return l(t, e), t.prototype.name = "attachments", t.prototype.title = "File", t.prototype.pitch = "File", t
    }(u), o = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return l(t, e), t.prototype.name = "todolists", t.prototype.title = "To-do", t.prototype.pitch = "To-do list", t.prototype.counter = "remaining_todos_count", t.prototype.pluralizedCount = function () {
            var e;
            switch (e = this.count()) {
            case 0:
                switch (e = this.project.get("completed_todos_count")) {
                case 0:
                    return "" + this.title + "s";
                case 1:
                    return "1 completed to-do";
                default:
                    return "" + e + " completed to-dos"
                }
                break;
            case 1:
                return "1 " + this.title;
            default:
                return "" + e + " " + this.title + "s"
            }
        }, t
    }(u), n = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return l(t, e), t.prototype.name = "documents", t.prototype.title = "Text document", t.prototype.pitch = "Text document", t.prototype.create = function () {
            return $.ajax(this.url(), {
                    type: "POST"
                })
        }, t
    }(u), i = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return l(t, e), t.prototype.name = "forwards", t.prototype.title = "Forwarded email", t.prototype.pitch = "Forwarded email", t.prototype.isNotInProject = function () {
            return !1
        }, t
    }(u), e = function (e) {
        function t() {
            return t.__super__.constructor.apply(this, arguments)
        }
        return l(t, e), t.prototype.name = "calendar_events", t.prototype.title = "Date", t.prototype.pitch = "Date", t.prototype.pluralizedCount = function () {
            return "Dates"
        }, t.prototype.isInProject = function () {
            return t.__super__.isInProject.apply(this, arguments) || this.project.get("completed_todos_count") !== 0 || this.project.get("remaining_todos_count") !== 0
        }, t.prototype.isNotInProject = function () {
            return !this.isInProject()
        }, t.prototype.create = function () {
            return Stacker.workspace.visit(this.url() + "#create")
        }, t
    }(u), s = function (s) {
        function u() {
            return this.toolLinkClicked = a(this.toolLinkClicked, this), u.__super__.constructor.apply(this, arguments)
        }
        return l(u, s), u.viewName("project_toolbar"), u.tools = [t, o, r, n, i, e], u.prototype.events = {
            "click a[data-tool-name]": "toolLinkClicked"
        }, u.prototype.initialize = function () {
            var e;
            return this.project = bcx.projects.getOrAdd(this.identifier), this.project.bind("change", this.render), this.tools = function () {
                var t, n, r, i;
                r = this.constructor.tools, i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(new e(this.project));
                return i
            }.call(this)
        }, u.prototype.toolLinkClicked = function (e) {
            var t, n, r;
            if (!Stacker.isStandardClick(e)) return;
            return t = $(e.currentTarget), n = t.data("tool-name"), r = this.findTool(n), r.isInProject() ? e.shiftKey ? r.scrollTo() : r.open() : r.create(), !1
        }, u.prototype.findTool = function (e) {
            return _.detect(this.tools, function (t) {
                return t.name === e
            })
        }, u.prototype.visibleToolsInProject = function () {
            return _.select(this.tools, function (e) {
                return e.isInProject()
            })
        }, u.prototype.visibleToolsNotInProject = function () {
            return _.select(this.tools, function (e) {
                return e.isNotInProject()
            })
        }, u
    }(bcx.Autoview)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.views.RelativeDatePicker = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.prototype.template = "templates/relative_date_picker", n.prototype.events = {
            "mousedown a[data-behavior=next]": "nextWeek",
            "mousedown a[data-behavior=previous]": "previousWeek",
            "mousedown a[data-wday]": "onDaySelect"
        }, n.prototype.initialize = function () {
            return this.due_week = this.options.due_week, this.due_week = this.due_week === "" ? 0 : parseInt(this.due_week), this.current_week = this.due_week, this.due_wday = parseInt(this.options.due_wday)
        }, n.prototype.render = function () {
            return $(this.el).html(JST[this.template](this))
        }, n.prototype.onDaySelect = function (e) {
            return e.preventDefault(), e.stopPropagation(), this.due_wday = parseInt($(e.target).data("wday")), this.options.onDatePick && this.options.onDatePick(this.current_week, this.due_wday), this.blurDayField()
        }, n.prototype.setWeekAndDay = function (e, t) {
            this.current_week = e, this.due_wday = t;
            if (this.options.onDatePick) return this.options.onDatePick(this.current_week, this.due_wday)
        }, n.prototype.nextWeek = function (e) {
            return e.preventDefault(), e.stopPropagation(), this.current_week += 1, this.render(), this.blurDayField()
        }, n.prototype.previousWeek = function (e) {
            return e.preventDefault(), e.stopPropagation(), this.current_week > 0 && (this.current_week -= 1), this.render(), this.blurDayField()
        }, n.prototype.blurDayField = function () {
            return setTimeout(function () {
                return $("input[data-relative-date]").blur()
            }, 10)
        }, n
    }(bcx.View)
}.call(this),
function () {
    var e, t = {}.hasOwnProperty,
        n = function (e, n) {
            function i() {
                this.constructor = e
            }
            for (var r in n) t.call(n, r) && (e[r] = n[r]);
            return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
        }, r = [].indexOf || function (e) {
            for (var t = 0, n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        };
    e = bcx.collections.PeopleAndGroups, bcx.views.SubscriberList = function (t) {
        function i() {
            return i.__super__.constructor.apply(this, arguments)
        }
        return n(i, t), i.prototype.template = "templates/subscribers", i.prototype.events = {
            "change input:checkbox": "subscriberChanged",
            "click [data-behavior~=subscriber_select_all], [data-behavior~=subscriber_select_none]": "toggleAll",
            "click [data-group-id]": "toggleGroup"
        }, i.prototype.initialize = function () {
            return this.project = bcx.currentProject, this.people = new e($(this.el).data("people")), this.currentPerson = this.people.get("person_" + bcx.currentPerson.id), this.people.remove(this.currentPerson), this.showCurrentPerson = $(this.el).data("keep-current-person"), this.defaultSubscribeAll = $(this.el).data("default-subscribe-all"), this.groups = new e($(this.el).data("groups")), this.cleanupGroups(), this.subscriberIds = $(this.el).data("subscriber-ids"), this.subscribable = $(this.el).data("subscribable")
        }, i.prototype.render = function () {
            return $(this.el).html(JST[this.template](this)), this.toggleGroupActivation()
        }, i.prototype.subscriberChanged = function (e) {
            var t, n = this;
            return t = parseInt($(e.currentTarget).val()), this.groups.each(function (e) {
                if (r.call(n.groupMemberIds(e), t) >= 0) return $(n.el).find("[data-group-id~=" + e.id + "]").toggleClass("activated", n.areAllGroupMembersChecked(e))
            })
        }, i.prototype.toggleAll = function (e) {
            var t, n;
            return e.preventDefault(), t = $(e.currentTarget), n = t.data("behavior") === "subscriber_select_all", $(this.el).find(":checkbox").attr("checked", n), $(this.el).find("[data-group-id]").toggleClass("activated", n)
        }, i.prototype.toggleGroup = function (e) {
            var t, n, i;
            e.preventDefault(), t = $(e.currentTarget), t.toggleClass("activated"), $(this.el).find("[data-parent-group-id=" + t.data("group-id") + "]").toggleClass("activated", t.hasClass("activated")), i = t.data("member-ids"), n = $(this.el).find(":checkbox").filter(function () {
                var e;
                return e = parseInt(this.value), r.call(i, e) >= 0
            }), n.attr("checked", t.hasClass("activated"));
            if (!t.hasClass("activated")) return this.selectActiveGroupMembers()
        }, i.prototype.groupMemberIds = function (e) {
            var t, n, r, i, s;
            return (i = this.groupMembers) == null && (this.groupMembers = {}), (s = (n = this.groupMembers)[r = e.id]) != null ? s : n[r] = _.map(_.compact(function () {
                        var n, r, i, s;
                        i = e.get("member_ids"), s = [];
                        for (n = 0, r = i.length; n < r; n++) t = i[n], s.push(this.people.get(t));
                        return s
                    }.call(this)), function (e) {
                    return e.get("person_id")
                })
        }, i.prototype.toggleGroupActivation = function () {
            var e = this;
            return this.groups.each(function (t) {
                return $(e.el).find("[data-group-id~=" + t.id + "]").toggleClass("activated", e.areAllGroupMembersChecked(t))
            })
        }, i.prototype.areAllGroupMembersChecked = function (e) {
            var t;
            return t = $(this.el).find(":checkbox:checked").map(function () {
                return parseInt(this.value)
            }).get(), _.all(this.groupMemberIds(e), function (e) {
                return _.include(t, e)
            })
        }, i.prototype.selectActiveGroupMembers = function () {
            var e;
            return e = $(this.el).find(":checkbox"), $(this.el).find("a.activated[data-group-id]").each(function () {
                var t, n;
                return n = $(this).data("member-ids"), t = e.filter(function () {
                    var e;
                    return e = parseInt(this.value), r.call(n, e) >= 0
                }), t.attr("checked", !0)
            })
        }, i.prototype.cleanupGroups = function () {
            var e, t = this;
            return e = this.groups.filter(function (e) {
                var n;
                return n = t.groupMemberIds(e), n.length === 0 || e.isSubgroup() && n.length >= t.people.length
            }), this.groups.remove(e)
        }, i
    }(bcx.View)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    bcx.views.TaggingsView = function (e) {
        function n(e, t) {
            this.el = e, n.__super__.constructor.call(this, t)
        }
        return t(n, e), n.prototype.events = {
            "click [data-behavior~=remove_tagging]": "removeTagging"
        }, n.prototype.initialize = function () {
            return this.setTaggableTypeAndId(), this.installAddTaggingsView(), this.refresh(), $(this.el).addClass("editing")
        }, n.prototype.setTaggableTypeAndId = function () {
            return this.taggableType = $(this.el).data("taggable-type"), this.taggableId = $(this.el).data("taggable-id")
        }, n.prototype.installAddTaggingsView = function () {
            var e, t, n;
            return n = "" + this.taggableType + ":" + this.taggableId, e = $(this.el).find("[data-behavior~=edit_taggings]"), t = $("<div>").appendTo(e), this.addTaggingsView = bcx.views.AddTaggingView.findOrCreate(n), this.addTaggingsView.taggingsView = this, this.addTaggingsView.install(t.get(0))
        }, n.prototype.refresh = function () {
            return this.existingTaggings = this.findExistingTaggings(), this.existingTagNames = this.findExistingTagNames(), this.addTaggingsView.afterRefresh()
        }, n.prototype.unregister = function () {
            return this.addTaggingsView.unregister(), $(this.el).removeClass("editing")
        }, n.prototype.findExistingTaggings = function () {
            var e, t, n, r, i, s;
            t = $(this.el).find("> ul li"), s = [];
            for (r = 0, i = t.length; r < i; r++) {
                n = t[r], e = $(n);
                if (e.data("deleted")) continue;
                s.push({
                        name: e.find("[data-role=tag_name]").text().trim(),
                        url: e.data("url")
                    })
            }
            return s
        }, n.prototype.findExistingTagNames = function () {
            return _(this.findExistingTaggings()).pluck("name")
        }, n.prototype.removeTagging = function (e) {
            var t, n;
            return t = $(e.currentTarget).closest("li"), n = t.data("url"), t.trigger("tagging:remove", [n, this]), !1
        }, n
    }(bcx.View)
}.call(this),
function () {
    var e, t = function (e, t) {
            return function () {
                return e.apply(t, arguments)
            }
        }, n = {}.hasOwnProperty,
        r = function (e, t) {
            function i() {
                this.constructor = e
            }
            for (var r in t) n.call(t, r) && (e[r] = t[r]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    e = function (e) {
        function n() {
            return this.onDocumentMouseDown = t(this.onDocumentMouseDown, this), n.__super__.constructor.apply(this, arguments)
        }
        return r(n, e), n.viewName("template_calendar_event_editor"), n.prototype.initialize = function () {
            return n.__super__.initialize.apply(this, arguments), this.events = _.extend({}, this.events, {
                    "focus td[data-behavior~=date_entry]": "showRelativeDatePicker",
                    "date_picker:hidden td[data-behavior~=date_entry]": "uninstallEventListener"
                }), this.delegateEvents()
        }, n.prototype.installDateEntryBehavior = function (e) {
            var t, n, r, i = this;
            return t = $(e), n = t.find("[data-behavior~=relative_date_picker]"), r = new bcx.views.RelativeDatePicker({
                    el: n,
                    due_week: t.find("input[data-due-week]").val(),
                    due_wday: t.find("input[data-due-wday]").val(),
                    onDatePick: function (e, r) {
                        return t.find("input[data-due-week]").val(e), t.find("input[data-due-wday]").val(r), t.find("input[data-relative-date]").val("Week " + (e + 1) + ", " + CalendarDate.weekdayNames[r]), i.ensureMinimumSpannedEndsAtDate(), n.hide(), n.trigger("date_picker:hidden")
                    }
                }), n.data("view", r)
        }, n.prototype.installEventListener = function () {
            return "undefined" != typeof document.attachEvent ? document.attachEvent("mousedown", this.onDocumentMouseDown) : document.addEventListener("mousedown", this.onDocumentMouseDown, !0)
        }, n.prototype.uninstallEventListener = function () {
            return "undefined" != typeof document.detachEvent ? document.detachEvent("mousedown", this.onDocumentMouseDown) : document.removeEventListener("mousedown", this.onDocumentMouseDown, !0)
        }, n.prototype.onDocumentMouseDown = function (e) {
            var t, n, r, i;
            n = $("td[data-behavior~=date_entry]");
            if (!n.length) return;
            return t = $(e.target).closest("td[data-behavior~=date_entry]"), r = t.length ? (i = t.siblings("td[data-behavior~=date_entry]"), i.find("[data-behavior~=relative_date_picker]")) : $("td[data-behavior~=date_entry] > [data-behavior~=relative_date_picker]"), r.trigger("date_picker:hidden"), r.hide()
        }, n.prototype.showRelativeDatePicker = function (e) {
            var t, n, r;
            t = $(e.currentTarget), n = t.find("[data-behavior~=relative_date_picker]");
            if (r = n.data("view")) return r.render(), this.installEventListener(), n.show()
        }, n.prototype.isEditorForTemplate = function () {
            return !0
        }, n.prototype.ensureMinimumSpannedEndsAtDate = function () {
            var e, t, n, r, i, s;
            s = this.$("[data-input~=starts_at]").data("view"), n = this.$("[data-input~=ends_at]").data("view"), i = s.current_week, t = n.current_week, r = s.due_wday, e = n.due_wday;
            if (t < i || t === i && e < r) return n.setWeekAndDay(i, r)
        }, n.prototype.updateCalendarEventAttributes = function () {
            return n.__super__.updateCalendarEventAttributes.apply(this, arguments), this.calendarEvent.set({
                    starts_at_due_week: this.field("starts_at_due_week"),
                    starts_at_due_wday: this.field("starts_at_due_wday"),
                    ends_at_due_week: this.field("ends_at_due_week"),
                    ends_at_due_wday: this.field("ends_at_due_wday")
                })
        }, n
    }(bcx.ProjectCalendarEventEditorView)
}.call(this),
function () {
    var e = {}.hasOwnProperty,
        t = function (t, n) {
            function i() {
                this.constructor = t
            }
            for (var r in n) e.call(n, r) && (t[r] = n[r]);
            return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
        };
    this.TemplateDateDisplayView = function (e) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return t(n, e), n.viewName("template_date_display"), n.prototype.initialize = function () {
            return this.bucket = bcx.getBucket(this.identifier), bcx.calendarEvents.bind("all", this.render), bcx.todos.bind("all", this.render), bcx.peopleAndGroups.bind("loaded:projectParticipants", this.render), bcx.peopleAndGroups.loadCurrentProjectParticipants()
        }, n.prototype.setEventsForDisplay = function () {
            var e = this;
            return this.todos = bcx.todos.select(function (t) {
                return t.bucket() === e.bucket
            }), this.calendarEvents = bcx.calendarEvents.select(function (t) {
                return t.bucket() === e.bucket
            })
        }, n.prototype.eventsGroupedByWeek = function () {
            var e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T = this;
            o = {}, e = function (e, t, n) {
                var r, i, s, u, a, f;
                return (u = o[t]) == null && (o[t] = {}), (a = (r = o[t])[n]) == null && (r[n] = {}), (f = (i = o[t][n])[s = e.constructor.modelName]) == null && (i[s] = []), o[t][n][e.constructor.modelName].push(e)
            }, S = this.todos;
            for (d = 0, y = S.length; d < y; d++) l = S[d], e(l, l.get("due_week"), l.get("due_wday"));
            x = this.calendarEvents;
            for (v = 0, b = x.length; v < b; v++) {
                t = x[v];
                if (t.isSpanned()) {
                    f = t.get("start_due_week"), a = t.get("start_due_wday"), s = t.get("end_due_week"), i = t.get("end_due_wday");
                    while (f < s || f === s && a <= i) e(t, f, a), a === 6 ? (a = 0, f += 1) : a += 1
                } else e(t, t.get("start_due_week"), t.get("start_due_wday"))
            }
            u = [], h = _(Object.keys(o)).sortBy(function (e) {
                return parseInt(e)
            });
            for (m = 0, w = h.length; m < w; m++) {
                c = h[m], p = [], r = Object.keys(o[c]).sort();
                for (g = 0, E = r.length; g < E; g++) n = r[g], p.push([n, o[c][n]]);
                u.push([c, p])
            }
            return u
        }, n
    }(this.DateDisplayView)
}.call(this);
